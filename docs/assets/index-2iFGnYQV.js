const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/basic-C2fQIivo.js","assets/index-BnEIw7I0.js","assets/w3m-modal-tHC6yGxT.js"])))=>i.map(i=>d[i]);
var Pj=Object.defineProperty;var Oj=(t,e,r)=>e in t?Pj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ot=(t,e,r)=>Oj(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Sr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ha(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function zm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var S$={exports:{}},ov={},x$={exports:{}},wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm=Symbol.for("react.element"),kj=Symbol.for("react.portal"),Rj=Symbol.for("react.fragment"),Dj=Symbol.for("react.strict_mode"),Lj=Symbol.for("react.profiler"),Bj=Symbol.for("react.provider"),jj=Symbol.for("react.context"),Uj=Symbol.for("react.forward_ref"),Fj=Symbol.for("react.suspense"),zj=Symbol.for("react.memo"),qj=Symbol.for("react.lazy"),X5=Symbol.iterator;function Wj(t){return t===null||typeof t!="object"?null:(t=X5&&t[X5]||t["@@iterator"],typeof t=="function"?t:null)}var I$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A$=Object.assign,C$={};function $p(t,e,r){this.props=t,this.context=e,this.refs=C$,this.updater=r||I$}$p.prototype.isReactComponent={};$p.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$p.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function N$(){}N$.prototype=$p.prototype;function cx(t,e,r){this.props=t,this.context=e,this.refs=C$,this.updater=r||I$}var lx=cx.prototype=new N$;lx.constructor=cx;A$(lx,$p.prototype);lx.isPureReactComponent=!0;var eA=Array.isArray,M$=Object.prototype.hasOwnProperty,ux={current:null},T$={key:!0,ref:!0,__self:!0,__source:!0};function $$(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)M$.call(e,n)&&!T$.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:qm,type:t,key:s,ref:o,props:i,_owner:ux.current}}function Hj(t,e){return{$$typeof:qm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hx(t){return typeof t=="object"&&t!==null&&t.$$typeof===qm}function Kj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var tA=/\/+/g;function C2(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Kj(""+t.key):e.toString(36)}function Vw(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qm:case kj:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+C2(o,0):n,eA(i)?(r="",t!=null&&(r=t.replace(tA,"$&/")+"/"),Vw(i,e,r,"",function(l){return l})):i!=null&&(hx(i)&&(i=Hj(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(tA,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",eA(t))for(var a=0;a<t.length;a++){s=t[a];var c=n+C2(s,a);o+=Vw(s,e,r,c,i)}else if(c=Wj(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=n+C2(s,a++),o+=Vw(s,e,r,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ky(t,e,r){if(t==null)return t;var n=[],i=0;return Vw(t,n,"","",function(s){return e.call(r,s,i++)}),n}function Vj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var is={current:null},Gw={transition:null},Gj={ReactCurrentDispatcher:is,ReactCurrentBatchConfig:Gw,ReactCurrentOwner:ux};function P$(){throw Error("act(...) is not supported in production builds of React.")}wt.Children={map:ky,forEach:function(t,e,r){ky(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ky(t,function(){e++}),e},toArray:function(t){return ky(t,function(e){return e})||[]},only:function(t){if(!hx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};wt.Component=$p;wt.Fragment=Rj;wt.Profiler=Lj;wt.PureComponent=cx;wt.StrictMode=Dj;wt.Suspense=Fj;wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gj;wt.act=P$;wt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=A$({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ux.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)M$.call(e,c)&&!T$.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];n.children=a}return{$$typeof:qm,type:t.type,key:i,ref:s,props:n,_owner:o}};wt.createContext=function(t){return t={$$typeof:jj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bj,_context:t},t.Consumer=t};wt.createElement=$$;wt.createFactory=function(t){var e=$$.bind(null,t);return e.type=t,e};wt.createRef=function(){return{current:null}};wt.forwardRef=function(t){return{$$typeof:Uj,render:t}};wt.isValidElement=hx;wt.lazy=function(t){return{$$typeof:qj,_payload:{_status:-1,_result:t},_init:Vj}};wt.memo=function(t,e){return{$$typeof:zj,type:t,compare:e===void 0?null:e}};wt.startTransition=function(t){var e=Gw.transition;Gw.transition={};try{t()}finally{Gw.transition=e}};wt.unstable_act=P$;wt.useCallback=function(t,e){return is.current.useCallback(t,e)};wt.useContext=function(t){return is.current.useContext(t)};wt.useDebugValue=function(){};wt.useDeferredValue=function(t){return is.current.useDeferredValue(t)};wt.useEffect=function(t,e){return is.current.useEffect(t,e)};wt.useId=function(){return is.current.useId()};wt.useImperativeHandle=function(t,e,r){return is.current.useImperativeHandle(t,e,r)};wt.useInsertionEffect=function(t,e){return is.current.useInsertionEffect(t,e)};wt.useLayoutEffect=function(t,e){return is.current.useLayoutEffect(t,e)};wt.useMemo=function(t,e){return is.current.useMemo(t,e)};wt.useReducer=function(t,e,r){return is.current.useReducer(t,e,r)};wt.useRef=function(t){return is.current.useRef(t)};wt.useState=function(t){return is.current.useState(t)};wt.useSyncExternalStore=function(t,e,r){return is.current.useSyncExternalStore(t,e,r)};wt.useTransition=function(){return is.current.useTransition()};wt.version="18.3.1";x$.exports=wt;var ne=x$.exports;const fe=ha(ne);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yj=ne,Qj=Symbol.for("react.element"),Zj=Symbol.for("react.fragment"),Jj=Object.prototype.hasOwnProperty,Xj=Yj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eU={key:!0,ref:!0,__self:!0,__source:!0};function O$(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Jj.call(e,n)&&!eU.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Qj,type:t,key:s,ref:o,props:i,_owner:Xj.current}}ov.Fragment=Zj;ov.jsx=O$;ov.jsxs=O$;S$.exports=ov;var W=S$.exports,k$={exports:{}},Zs={},R$={exports:{}},D$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,x){var y=M.length;M.push(x);e:for(;0<y;){var C=y-1>>>1,I=M[C];if(0<i(I,x))M[C]=x,M[y]=I,y=C;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var x=M[0],y=M.pop();if(y!==x){M[0]=y;e:for(var C=0,I=M.length,j=I>>>1;C<j;){var K=2*(C+1)-1,V=M[K],te=K+1,se=M[te];if(0>i(V,y))te<I&&0>i(se,V)?(M[C]=se,M[te]=y,C=te):(M[C]=V,M[K]=y,C=K);else if(te<I&&0>i(se,y))M[C]=se,M[te]=y,C=te;else break e}}return x}function i(M,x){var y=M.sortIndex-x.sortIndex;return y!==0?y:M.id-x.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,h=null,d=3,g=!1,m=!1,v=!1,$=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(M){for(var x=r(l);x!==null;){if(x.callback===null)n(l);else if(x.startTime<=M)n(l),x.sortIndex=x.expirationTime,e(c,x);else break;x=r(l)}}function T(M){if(v=!1,A(M),!m)if(r(c)!==null)m=!0,w(k);else{var x=r(l);x!==null&&N(T,x.startTime-M)}}function k(M,x){m=!1,v&&(v=!1,_(F),F=-1),g=!0;var y=d;try{for(A(x),h=r(c);h!==null&&(!(h.expirationTime>x)||M&&!D());){var C=h.callback;if(typeof C=="function"){h.callback=null,d=h.priorityLevel;var I=C(h.expirationTime<=x);x=t.unstable_now(),typeof I=="function"?h.callback=I:h===r(c)&&n(c),A(x)}else n(c);h=r(c)}if(h!==null)var j=!0;else{var K=r(l);K!==null&&N(T,K.startTime-x),j=!1}return j}finally{h=null,d=y,g=!1}}var R=!1,L=null,F=-1,B=5,q=-1;function D(){return!(t.unstable_now()-q<B)}function E(){if(L!==null){var M=t.unstable_now();q=M;var x=!0;try{x=L(!0,M)}finally{x?b():(R=!1,L=null)}}else R=!1}var b;if(typeof S=="function")b=function(){S(E)};else if(typeof MessageChannel<"u"){var f=new MessageChannel,p=f.port2;f.port1.onmessage=E,b=function(){p.postMessage(null)}}else b=function(){$(E,0)};function w(M){L=M,R||(R=!0,b())}function N(M,x){F=$(function(){M(t.unstable_now())},x)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,w(k))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(M){switch(d){case 1:case 2:case 3:var x=3;break;default:x=d}var y=d;d=x;try{return M()}finally{d=y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,x){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var y=d;d=M;try{return x()}finally{d=y}},t.unstable_scheduleCallback=function(M,x,y){var C=t.unstable_now();switch(typeof y=="object"&&y!==null?(y=y.delay,y=typeof y=="number"&&0<y?C+y:C):y=C,M){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=y+I,M={id:u++,callback:x,priorityLevel:M,startTime:y,expirationTime:I,sortIndex:-1},y>C?(M.sortIndex=y,e(l,M),r(c)===null&&M===r(l)&&(v?(_(F),F=-1):v=!0,N(T,y-C))):(M.sortIndex=I,e(c,M),m||g||(m=!0,w(k))),M},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(M){var x=d;return function(){var y=d;d=x;try{return M.apply(this,arguments)}finally{d=y}}}})(D$);R$.exports=D$;var tU=R$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rU=ne,Gs=tU;function de(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var L$=new Set,Rg={};function zh(t,e){Xf(t,e),Xf(t+"Capture",e)}function Xf(t,e){for(Rg[t]=e,t=0;t<e.length;t++)L$.add(e[t])}var Kc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),n_=Object.prototype.hasOwnProperty,nU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rA={},nA={};function iU(t){return n_.call(nA,t)?!0:n_.call(rA,t)?!1:nU.test(t)?nA[t]=!0:(rA[t]=!0,!1)}function sU(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oU(t,e,r,n){if(e===null||typeof e>"u"||sU(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ss(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ei={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ei[t]=new ss(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ei[e]=new ss(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ei[t]=new ss(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ei[t]=new ss(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ei[t]=new ss(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ei[t]=new ss(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ei[t]=new ss(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ei[t]=new ss(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ei[t]=new ss(t,5,!1,t.toLowerCase(),null,!1,!1)});var dx=/[\-:]([a-z])/g;function fx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dx,fx);Ei[e]=new ss(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dx,fx);Ei[e]=new ss(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dx,fx);Ei[e]=new ss(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ei[t]=new ss(t,1,!1,t.toLowerCase(),null,!1,!1)});Ei.xlinkHref=new ss("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ei[t]=new ss(t,1,!1,t.toLowerCase(),null,!0,!0)});function px(t,e,r,n){var i=Ei.hasOwnProperty(e)?Ei[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oU(e,r,i,n)&&(r=null),n||i===null?iU(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var rl=rU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ry=Symbol.for("react.element"),yf=Symbol.for("react.portal"),wf=Symbol.for("react.fragment"),gx=Symbol.for("react.strict_mode"),i_=Symbol.for("react.profiler"),B$=Symbol.for("react.provider"),j$=Symbol.for("react.context"),mx=Symbol.for("react.forward_ref"),s_=Symbol.for("react.suspense"),o_=Symbol.for("react.suspense_list"),yx=Symbol.for("react.memo"),Cl=Symbol.for("react.lazy"),U$=Symbol.for("react.offscreen"),iA=Symbol.iterator;function o0(t){return t===null||typeof t!="object"?null:(t=iA&&t[iA]||t["@@iterator"],typeof t=="function"?t:null)}var tn=Object.assign,N2;function V0(t){if(N2===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);N2=e&&e[1]||""}return`
`+N2+t}var M2=!1;function T2(t,e){if(!t||M2)return"";M2=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{M2=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?V0(t):""}function aU(t){switch(t.tag){case 5:return V0(t.type);case 16:return V0("Lazy");case 13:return V0("Suspense");case 19:return V0("SuspenseList");case 0:case 2:case 15:return t=T2(t.type,!1),t;case 11:return t=T2(t.type.render,!1),t;case 1:return t=T2(t.type,!0),t;default:return""}}function a_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wf:return"Fragment";case yf:return"Portal";case i_:return"Profiler";case gx:return"StrictMode";case s_:return"Suspense";case o_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case j$:return(t.displayName||"Context")+".Consumer";case B$:return(t._context.displayName||"Context")+".Provider";case mx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yx:return e=t.displayName||null,e!==null?e:a_(t.type)||"Memo";case Cl:e=t._payload,t=t._init;try{return a_(t(e))}catch{}}return null}function cU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return a_(e);case 8:return e===gx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function F$(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lU(t){var e=F$(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Dy(t){t._valueTracker||(t._valueTracker=lU(t))}function z$(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=F$(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function q1(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function c_(t,e){var r=e.checked;return tn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function sA(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=hu(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function q$(t,e){e=e.checked,e!=null&&px(t,"checked",e,!1)}function l_(t,e){q$(t,e);var r=hu(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?u_(t,e.type,r):e.hasOwnProperty("defaultValue")&&u_(t,e.type,hu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function oA(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function u_(t,e,r){(e!=="number"||q1(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var G0=Array.isArray;function Bf(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+hu(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function h_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(de(91));return tn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function aA(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(de(92));if(G0(r)){if(1<r.length)throw Error(de(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:hu(r)}}function W$(t,e){var r=hu(e.value),n=hu(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function cA(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function H$(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function d_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?H$(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ly,K$=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ly=Ly||document.createElement("div"),Ly.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ly.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Dg(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var hg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uU=["Webkit","ms","Moz","O"];Object.keys(hg).forEach(function(t){uU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hg[e]=hg[t]})});function V$(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||hg.hasOwnProperty(t)&&hg[t]?(""+e).trim():e+"px"}function G$(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=V$(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var hU=tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function f_(t,e){if(e){if(hU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(de(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(de(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(de(61))}if(e.style!=null&&typeof e.style!="object")throw Error(de(62))}}function p_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var g_=null;function wx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var m_=null,jf=null,Uf=null;function lA(t){if(t=Km(t)){if(typeof m_!="function")throw Error(de(280));var e=t.stateNode;e&&(e=hv(e),m_(t.stateNode,t.type,e))}}function Y$(t){jf?Uf?Uf.push(t):Uf=[t]:jf=t}function Q$(){if(jf){var t=jf,e=Uf;if(Uf=jf=null,lA(t),e)for(t=0;t<e.length;t++)lA(e[t])}}function Z$(t,e){return t(e)}function J$(){}var $2=!1;function X$(t,e,r){if($2)return t(e,r);$2=!0;try{return Z$(t,e,r)}finally{$2=!1,(jf!==null||Uf!==null)&&(J$(),Q$())}}function Lg(t,e){var r=t.stateNode;if(r===null)return null;var n=hv(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(de(231,e,typeof r));return r}var y_=!1;if(Kc)try{var a0={};Object.defineProperty(a0,"passive",{get:function(){y_=!0}}),window.addEventListener("test",a0,a0),window.removeEventListener("test",a0,a0)}catch{y_=!1}function dU(t,e,r,n,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(r,l)}catch(u){this.onError(u)}}var dg=!1,W1=null,H1=!1,w_=null,fU={onError:function(t){dg=!0,W1=t}};function pU(t,e,r,n,i,s,o,a,c){dg=!1,W1=null,dU.apply(fU,arguments)}function gU(t,e,r,n,i,s,o,a,c){if(pU.apply(this,arguments),dg){if(dg){var l=W1;dg=!1,W1=null}else throw Error(de(198));H1||(H1=!0,w_=l)}}function qh(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function eP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uA(t){if(qh(t)!==t)throw Error(de(188))}function mU(t){var e=t.alternate;if(!e){if(e=qh(t),e===null)throw Error(de(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return uA(i),t;if(s===n)return uA(i),e;s=s.sibling}throw Error(de(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(de(189))}}if(r.alternate!==n)throw Error(de(190))}if(r.tag!==3)throw Error(de(188));return r.stateNode.current===r?t:e}function tP(t){return t=mU(t),t!==null?rP(t):null}function rP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rP(t);if(e!==null)return e;t=t.sibling}return null}var nP=Gs.unstable_scheduleCallback,hA=Gs.unstable_cancelCallback,yU=Gs.unstable_shouldYield,wU=Gs.unstable_requestPaint,pn=Gs.unstable_now,bU=Gs.unstable_getCurrentPriorityLevel,bx=Gs.unstable_ImmediatePriority,iP=Gs.unstable_UserBlockingPriority,K1=Gs.unstable_NormalPriority,vU=Gs.unstable_LowPriority,sP=Gs.unstable_IdlePriority,av=null,Pa=null;function EU(t){if(Pa&&typeof Pa.onCommitFiberRoot=="function")try{Pa.onCommitFiberRoot(av,t,void 0,(t.current.flags&128)===128)}catch{}}var ra=Math.clz32?Math.clz32:xU,_U=Math.log,SU=Math.LN2;function xU(t){return t>>>=0,t===0?32:31-(_U(t)/SU|0)|0}var By=64,jy=4194304;function Y0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function V1(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=Y0(a):(s&=o,s!==0&&(n=Y0(s)))}else o=r&~i,o!==0?n=Y0(o):s!==0&&(n=Y0(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ra(e),i=1<<r,n|=t[r],e&=~i;return n}function IU(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AU(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ra(s),a=1<<o,c=i[o];c===-1?(!(a&r)||a&n)&&(i[o]=IU(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function b_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function oP(){var t=By;return By<<=1,!(By&4194240)&&(By=64),t}function P2(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Wm(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ra(e),t[e]=r}function CU(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-ra(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function vx(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ra(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var er=0;function aP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cP,Ex,lP,uP,hP,v_=!1,Uy=[],Zl=null,Jl=null,Xl=null,Bg=new Map,jg=new Map,Rl=[],NU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dA(t,e){switch(t){case"focusin":case"focusout":Zl=null;break;case"dragenter":case"dragleave":Jl=null;break;case"mouseover":case"mouseout":Xl=null;break;case"pointerover":case"pointerout":Bg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jg.delete(e.pointerId)}}function c0(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Km(e),e!==null&&Ex(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function MU(t,e,r,n,i){switch(e){case"focusin":return Zl=c0(Zl,t,e,r,n,i),!0;case"dragenter":return Jl=c0(Jl,t,e,r,n,i),!0;case"mouseover":return Xl=c0(Xl,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Bg.set(s,c0(Bg.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,jg.set(s,c0(jg.get(s)||null,t,e,r,n,i)),!0}return!1}function dP(t){var e=Xu(t.target);if(e!==null){var r=qh(e);if(r!==null){if(e=r.tag,e===13){if(e=eP(r),e!==null){t.blockedOn=e,hP(t.priority,function(){lP(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yw(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=E_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);g_=n,r.target.dispatchEvent(n),g_=null}else return e=Km(r),e!==null&&Ex(e),t.blockedOn=r,!1;e.shift()}return!0}function fA(t,e,r){Yw(t)&&r.delete(e)}function TU(){v_=!1,Zl!==null&&Yw(Zl)&&(Zl=null),Jl!==null&&Yw(Jl)&&(Jl=null),Xl!==null&&Yw(Xl)&&(Xl=null),Bg.forEach(fA),jg.forEach(fA)}function l0(t,e){t.blockedOn===e&&(t.blockedOn=null,v_||(v_=!0,Gs.unstable_scheduleCallback(Gs.unstable_NormalPriority,TU)))}function Ug(t){function e(i){return l0(i,t)}if(0<Uy.length){l0(Uy[0],t);for(var r=1;r<Uy.length;r++){var n=Uy[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Zl!==null&&l0(Zl,t),Jl!==null&&l0(Jl,t),Xl!==null&&l0(Xl,t),Bg.forEach(e),jg.forEach(e),r=0;r<Rl.length;r++)n=Rl[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Rl.length&&(r=Rl[0],r.blockedOn===null);)dP(r),r.blockedOn===null&&Rl.shift()}var Ff=rl.ReactCurrentBatchConfig,G1=!0;function $U(t,e,r,n){var i=er,s=Ff.transition;Ff.transition=null;try{er=1,_x(t,e,r,n)}finally{er=i,Ff.transition=s}}function PU(t,e,r,n){var i=er,s=Ff.transition;Ff.transition=null;try{er=4,_x(t,e,r,n)}finally{er=i,Ff.transition=s}}function _x(t,e,r,n){if(G1){var i=E_(t,e,r,n);if(i===null)z2(t,e,n,Y1,r),dA(t,n);else if(MU(i,t,e,r,n))n.stopPropagation();else if(dA(t,n),e&4&&-1<NU.indexOf(t)){for(;i!==null;){var s=Km(i);if(s!==null&&cP(s),s=E_(t,e,r,n),s===null&&z2(t,e,n,Y1,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else z2(t,e,n,null,r)}}var Y1=null;function E_(t,e,r,n){if(Y1=null,t=wx(n),t=Xu(t),t!==null)if(e=qh(t),e===null)t=null;else if(r=e.tag,r===13){if(t=eP(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Y1=t,null}function fP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bU()){case bx:return 1;case iP:return 4;case K1:case vU:return 16;case sP:return 536870912;default:return 16}default:return 16}}var jl=null,Sx=null,Qw=null;function pP(){if(Qw)return Qw;var t,e=Sx,r=e.length,n,i="value"in jl?jl.value:jl.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Qw=i.slice(t,1<n?1-n:void 0)}function Zw(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fy(){return!0}function pA(){return!1}function Js(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Fy:pA,this.isPropagationStopped=pA,this}return tn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fy)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fy)},persist:function(){},isPersistent:Fy}),e}var Pp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xx=Js(Pp),Hm=tn({},Pp,{view:0,detail:0}),OU=Js(Hm),O2,k2,u0,cv=tn({},Hm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ix,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==u0&&(u0&&t.type==="mousemove"?(O2=t.screenX-u0.screenX,k2=t.screenY-u0.screenY):k2=O2=0,u0=t),O2)},movementY:function(t){return"movementY"in t?t.movementY:k2}}),gA=Js(cv),kU=tn({},cv,{dataTransfer:0}),RU=Js(kU),DU=tn({},Hm,{relatedTarget:0}),R2=Js(DU),LU=tn({},Pp,{animationName:0,elapsedTime:0,pseudoElement:0}),BU=Js(LU),jU=tn({},Pp,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UU=Js(jU),FU=tn({},Pp,{data:0}),mA=Js(FU),zU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HU(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=WU[t])?!!e[t]:!1}function Ix(){return HU}var KU=tn({},Hm,{key:function(t){if(t.key){var e=zU[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zw(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qU[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ix,charCode:function(t){return t.type==="keypress"?Zw(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zw(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),VU=Js(KU),GU=tn({},cv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yA=Js(GU),YU=tn({},Hm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ix}),QU=Js(YU),ZU=tn({},Pp,{propertyName:0,elapsedTime:0,pseudoElement:0}),JU=Js(ZU),XU=tn({},cv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),eF=Js(XU),tF=[9,13,27,32],Ax=Kc&&"CompositionEvent"in window,fg=null;Kc&&"documentMode"in document&&(fg=document.documentMode);var rF=Kc&&"TextEvent"in window&&!fg,gP=Kc&&(!Ax||fg&&8<fg&&11>=fg),wA=" ",bA=!1;function mP(t,e){switch(t){case"keyup":return tF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bf=!1;function nF(t,e){switch(t){case"compositionend":return yP(e);case"keypress":return e.which!==32?null:(bA=!0,wA);case"textInput":return t=e.data,t===wA&&bA?null:t;default:return null}}function iF(t,e){if(bf)return t==="compositionend"||!Ax&&mP(t,e)?(t=pP(),Qw=Sx=jl=null,bf=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gP&&e.locale!=="ko"?null:e.data;default:return null}}var sF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sF[t.type]:e==="textarea"}function wP(t,e,r,n){Y$(n),e=Q1(e,"onChange"),0<e.length&&(r=new xx("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var pg=null,Fg=null;function oF(t){MP(t,0)}function lv(t){var e=_f(t);if(z$(e))return t}function aF(t,e){if(t==="change")return e}var bP=!1;if(Kc){var D2;if(Kc){var L2="oninput"in document;if(!L2){var EA=document.createElement("div");EA.setAttribute("oninput","return;"),L2=typeof EA.oninput=="function"}D2=L2}else D2=!1;bP=D2&&(!document.documentMode||9<document.documentMode)}function _A(){pg&&(pg.detachEvent("onpropertychange",vP),Fg=pg=null)}function vP(t){if(t.propertyName==="value"&&lv(Fg)){var e=[];wP(e,Fg,t,wx(t)),X$(oF,e)}}function cF(t,e,r){t==="focusin"?(_A(),pg=e,Fg=r,pg.attachEvent("onpropertychange",vP)):t==="focusout"&&_A()}function lF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lv(Fg)}function uF(t,e){if(t==="click")return lv(e)}function hF(t,e){if(t==="input"||t==="change")return lv(e)}function dF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sa=typeof Object.is=="function"?Object.is:dF;function zg(t,e){if(sa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!n_.call(e,i)||!sa(t[i],e[i]))return!1}return!0}function SA(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xA(t,e){var r=SA(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=SA(r)}}function EP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?EP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _P(){for(var t=window,e=q1();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=q1(t.document)}return e}function Cx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fF(t){var e=_P(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&EP(r.ownerDocument.documentElement,r)){if(n!==null&&Cx(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=xA(r,s);var o=xA(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pF=Kc&&"documentMode"in document&&11>=document.documentMode,vf=null,__=null,gg=null,S_=!1;function IA(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;S_||vf==null||vf!==q1(n)||(n=vf,"selectionStart"in n&&Cx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),gg&&zg(gg,n)||(gg=n,n=Q1(__,"onSelect"),0<n.length&&(e=new xx("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=vf)))}function zy(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ef={animationend:zy("Animation","AnimationEnd"),animationiteration:zy("Animation","AnimationIteration"),animationstart:zy("Animation","AnimationStart"),transitionend:zy("Transition","TransitionEnd")},B2={},SP={};Kc&&(SP=document.createElement("div").style,"AnimationEvent"in window||(delete Ef.animationend.animation,delete Ef.animationiteration.animation,delete Ef.animationstart.animation),"TransitionEvent"in window||delete Ef.transitionend.transition);function uv(t){if(B2[t])return B2[t];if(!Ef[t])return t;var e=Ef[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in SP)return B2[t]=e[r];return t}var xP=uv("animationend"),IP=uv("animationiteration"),AP=uv("animationstart"),CP=uv("transitionend"),NP=new Map,AA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mu(t,e){NP.set(t,e),zh(e,[t])}for(var j2=0;j2<AA.length;j2++){var U2=AA[j2],gF=U2.toLowerCase(),mF=U2[0].toUpperCase()+U2.slice(1);mu(gF,"on"+mF)}mu(xP,"onAnimationEnd");mu(IP,"onAnimationIteration");mu(AP,"onAnimationStart");mu("dblclick","onDoubleClick");mu("focusin","onFocus");mu("focusout","onBlur");mu(CP,"onTransitionEnd");Xf("onMouseEnter",["mouseout","mouseover"]);Xf("onMouseLeave",["mouseout","mouseover"]);Xf("onPointerEnter",["pointerout","pointerover"]);Xf("onPointerLeave",["pointerout","pointerover"]);zh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zh("onBeforeInput",["compositionend","keypress","textInput","paste"]);zh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Q0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yF=new Set("cancel close invalid load scroll toggle".split(" ").concat(Q0));function CA(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,gU(n,e,void 0,t),t.currentTarget=null}function MP(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;CA(i,a,l),s=c}else for(o=0;o<n.length;o++){if(a=n[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;CA(i,a,l),s=c}}}if(H1)throw t=w_,H1=!1,w_=null,t}function Dr(t,e){var r=e[N_];r===void 0&&(r=e[N_]=new Set);var n=t+"__bubble";r.has(n)||(TP(e,t,2,!1),r.add(n))}function F2(t,e,r){var n=0;e&&(n|=4),TP(r,t,n,e)}var qy="_reactListening"+Math.random().toString(36).slice(2);function qg(t){if(!t[qy]){t[qy]=!0,L$.forEach(function(r){r!=="selectionchange"&&(yF.has(r)||F2(r,!1,t),F2(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qy]||(e[qy]=!0,F2("selectionchange",!1,e))}}function TP(t,e,r,n){switch(fP(e)){case 1:var i=$U;break;case 4:i=PU;break;default:i=_x}r=i.bind(null,e,r,t),i=void 0,!y_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function z2(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Xu(a),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}a=a.parentNode}}n=n.return}X$(function(){var l=s,u=wx(r),h=[];e:{var d=NP.get(t);if(d!==void 0){var g=xx,m=t;switch(t){case"keypress":if(Zw(r)===0)break e;case"keydown":case"keyup":g=VU;break;case"focusin":m="focus",g=R2;break;case"focusout":m="blur",g=R2;break;case"beforeblur":case"afterblur":g=R2;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=gA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=RU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=QU;break;case xP:case IP:case AP:g=BU;break;case CP:g=JU;break;case"scroll":g=OU;break;case"wheel":g=eF;break;case"copy":case"cut":case"paste":g=UU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=yA}var v=(e&4)!==0,$=!v&&t==="scroll",_=v?d!==null?d+"Capture":null:d;v=[];for(var S=l,A;S!==null;){A=S;var T=A.stateNode;if(A.tag===5&&T!==null&&(A=T,_!==null&&(T=Lg(S,_),T!=null&&v.push(Wg(S,T,A)))),$)break;S=S.return}0<v.length&&(d=new g(d,m,null,r,u),h.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",d&&r!==g_&&(m=r.relatedTarget||r.fromElement)&&(Xu(m)||m[Vc]))break e;if((g||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,g?(m=r.relatedTarget||r.toElement,g=l,m=m?Xu(m):null,m!==null&&($=qh(m),m!==$||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=l),g!==m)){if(v=gA,T="onMouseLeave",_="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(v=yA,T="onPointerLeave",_="onPointerEnter",S="pointer"),$=g==null?d:_f(g),A=m==null?d:_f(m),d=new v(T,S+"leave",g,r,u),d.target=$,d.relatedTarget=A,T=null,Xu(u)===l&&(v=new v(_,S+"enter",m,r,u),v.target=A,v.relatedTarget=$,T=v),$=T,g&&m)t:{for(v=g,_=m,S=0,A=v;A;A=hd(A))S++;for(A=0,T=_;T;T=hd(T))A++;for(;0<S-A;)v=hd(v),S--;for(;0<A-S;)_=hd(_),A--;for(;S--;){if(v===_||_!==null&&v===_.alternate)break t;v=hd(v),_=hd(_)}v=null}else v=null;g!==null&&NA(h,d,g,v,!1),m!==null&&$!==null&&NA(h,$,m,v,!0)}}e:{if(d=l?_f(l):window,g=d.nodeName&&d.nodeName.toLowerCase(),g==="select"||g==="input"&&d.type==="file")var k=aF;else if(vA(d))if(bP)k=hF;else{k=lF;var R=cF}else(g=d.nodeName)&&g.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(k=uF);if(k&&(k=k(t,l))){wP(h,k,r,u);break e}R&&R(t,d,l),t==="focusout"&&(R=d._wrapperState)&&R.controlled&&d.type==="number"&&u_(d,"number",d.value)}switch(R=l?_f(l):window,t){case"focusin":(vA(R)||R.contentEditable==="true")&&(vf=R,__=l,gg=null);break;case"focusout":gg=__=vf=null;break;case"mousedown":S_=!0;break;case"contextmenu":case"mouseup":case"dragend":S_=!1,IA(h,r,u);break;case"selectionchange":if(pF)break;case"keydown":case"keyup":IA(h,r,u)}var L;if(Ax)e:{switch(t){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else bf?mP(t,r)&&(F="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(F="onCompositionStart");F&&(gP&&r.locale!=="ko"&&(bf||F!=="onCompositionStart"?F==="onCompositionEnd"&&bf&&(L=pP()):(jl=u,Sx="value"in jl?jl.value:jl.textContent,bf=!0)),R=Q1(l,F),0<R.length&&(F=new mA(F,t,null,r,u),h.push({event:F,listeners:R}),L?F.data=L:(L=yP(r),L!==null&&(F.data=L)))),(L=rF?nF(t,r):iF(t,r))&&(l=Q1(l,"onBeforeInput"),0<l.length&&(u=new mA("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:l}),u.data=L))}MP(h,e)})}function Wg(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Q1(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Lg(t,r),s!=null&&n.unshift(Wg(t,s,i)),s=Lg(t,e),s!=null&&n.push(Wg(t,s,i))),t=t.return}return n}function hd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function NA(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,c=a.alternate,l=a.stateNode;if(c!==null&&c===n)break;a.tag===5&&l!==null&&(a=l,i?(c=Lg(r,s),c!=null&&o.unshift(Wg(r,c,a))):i||(c=Lg(r,s),c!=null&&o.push(Wg(r,c,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var wF=/\r\n?/g,bF=/\u0000|\uFFFD/g;function MA(t){return(typeof t=="string"?t:""+t).replace(wF,`
`).replace(bF,"")}function Wy(t,e,r){if(e=MA(e),MA(t)!==e&&r)throw Error(de(425))}function Z1(){}var x_=null,I_=null;function A_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var C_=typeof setTimeout=="function"?setTimeout:void 0,vF=typeof clearTimeout=="function"?clearTimeout:void 0,TA=typeof Promise=="function"?Promise:void 0,EF=typeof queueMicrotask=="function"?queueMicrotask:typeof TA<"u"?function(t){return TA.resolve(null).then(t).catch(_F)}:C_;function _F(t){setTimeout(function(){throw t})}function q2(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Ug(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Ug(e)}function eu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $A(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Op=Math.random().toString(36).slice(2),Na="__reactFiber$"+Op,Hg="__reactProps$"+Op,Vc="__reactContainer$"+Op,N_="__reactEvents$"+Op,SF="__reactListeners$"+Op,xF="__reactHandles$"+Op;function Xu(t){var e=t[Na];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Vc]||r[Na]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=$A(t);t!==null;){if(r=t[Na])return r;t=$A(t)}return e}t=r,r=t.parentNode}return null}function Km(t){return t=t[Na]||t[Vc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _f(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(de(33))}function hv(t){return t[Hg]||null}var M_=[],Sf=-1;function yu(t){return{current:t}}function Fr(t){0>Sf||(t.current=M_[Sf],M_[Sf]=null,Sf--)}function Ir(t,e){Sf++,M_[Sf]=t.current,t.current=e}var du={},Ki=yu(du),_s=yu(!1),xh=du;function ep(t,e){var r=t.type.contextTypes;if(!r)return du;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ss(t){return t=t.childContextTypes,t!=null}function J1(){Fr(_s),Fr(Ki)}function PA(t,e,r){if(Ki.current!==du)throw Error(de(168));Ir(Ki,e),Ir(_s,r)}function $P(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(de(108,cU(t)||"Unknown",i));return tn({},r,n)}function X1(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||du,xh=Ki.current,Ir(Ki,t),Ir(_s,_s.current),!0}function OA(t,e,r){var n=t.stateNode;if(!n)throw Error(de(169));r?(t=$P(t,e,xh),n.__reactInternalMemoizedMergedChildContext=t,Fr(_s),Fr(Ki),Ir(Ki,t)):Fr(_s),Ir(_s,r)}var Mc=null,dv=!1,W2=!1;function PP(t){Mc===null?Mc=[t]:Mc.push(t)}function IF(t){dv=!0,PP(t)}function wu(){if(!W2&&Mc!==null){W2=!0;var t=0,e=er;try{var r=Mc;for(er=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Mc=null,dv=!1}catch(i){throw Mc!==null&&(Mc=Mc.slice(t+1)),nP(bx,wu),i}finally{er=e,W2=!1}}return null}var xf=[],If=0,eb=null,tb=0,Eo=[],_o=0,Ih=null,Lc=1,Bc="";function Lu(t,e){xf[If++]=tb,xf[If++]=eb,eb=t,tb=e}function OP(t,e,r){Eo[_o++]=Lc,Eo[_o++]=Bc,Eo[_o++]=Ih,Ih=t;var n=Lc;t=Bc;var i=32-ra(n)-1;n&=~(1<<i),r+=1;var s=32-ra(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Lc=1<<32-ra(e)+i|r<<i|n,Bc=s+t}else Lc=1<<s|r<<i|n,Bc=t}function Nx(t){t.return!==null&&(Lu(t,1),OP(t,1,0))}function Mx(t){for(;t===eb;)eb=xf[--If],xf[If]=null,tb=xf[--If],xf[If]=null;for(;t===Ih;)Ih=Eo[--_o],Eo[_o]=null,Bc=Eo[--_o],Eo[_o]=null,Lc=Eo[--_o],Eo[_o]=null}var Vs=null,qs=null,Hr=!1,Jo=null;function kP(t,e){var r=So(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function kA(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vs=t,qs=eu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vs=t,qs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ih!==null?{id:Lc,overflow:Bc}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=So(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Vs=t,qs=null,!0):!1;default:return!1}}function T_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $_(t){if(Hr){var e=qs;if(e){var r=e;if(!kA(t,e)){if(T_(t))throw Error(de(418));e=eu(r.nextSibling);var n=Vs;e&&kA(t,e)?kP(n,r):(t.flags=t.flags&-4097|2,Hr=!1,Vs=t)}}else{if(T_(t))throw Error(de(418));t.flags=t.flags&-4097|2,Hr=!1,Vs=t}}}function RA(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vs=t}function Hy(t){if(t!==Vs)return!1;if(!Hr)return RA(t),Hr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!A_(t.type,t.memoizedProps)),e&&(e=qs)){if(T_(t))throw RP(),Error(de(418));for(;e;)kP(t,e),e=eu(e.nextSibling)}if(RA(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(de(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){qs=eu(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}qs=null}}else qs=Vs?eu(t.stateNode.nextSibling):null;return!0}function RP(){for(var t=qs;t;)t=eu(t.nextSibling)}function tp(){qs=Vs=null,Hr=!1}function Tx(t){Jo===null?Jo=[t]:Jo.push(t)}var AF=rl.ReactCurrentBatchConfig;function h0(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(de(309));var n=r.stateNode}if(!n)throw Error(de(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(de(284));if(!r._owner)throw Error(de(290,t))}return t}function Ky(t,e){throw t=Object.prototype.toString.call(e),Error(de(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function DA(t){var e=t._init;return e(t._payload)}function DP(t){function e(_,S){if(t){var A=_.deletions;A===null?(_.deletions=[S],_.flags|=16):A.push(S)}}function r(_,S){if(!t)return null;for(;S!==null;)e(_,S),S=S.sibling;return null}function n(_,S){for(_=new Map;S!==null;)S.key!==null?_.set(S.key,S):_.set(S.index,S),S=S.sibling;return _}function i(_,S){return _=iu(_,S),_.index=0,_.sibling=null,_}function s(_,S,A){return _.index=A,t?(A=_.alternate,A!==null?(A=A.index,A<S?(_.flags|=2,S):A):(_.flags|=2,S)):(_.flags|=1048576,S)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,S,A,T){return S===null||S.tag!==6?(S=Z2(A,_.mode,T),S.return=_,S):(S=i(S,A),S.return=_,S)}function c(_,S,A,T){var k=A.type;return k===wf?u(_,S,A.props.children,T,A.key):S!==null&&(S.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Cl&&DA(k)===S.type)?(T=i(S,A.props),T.ref=h0(_,S,A),T.return=_,T):(T=i1(A.type,A.key,A.props,null,_.mode,T),T.ref=h0(_,S,A),T.return=_,T)}function l(_,S,A,T){return S===null||S.tag!==4||S.stateNode.containerInfo!==A.containerInfo||S.stateNode.implementation!==A.implementation?(S=J2(A,_.mode,T),S.return=_,S):(S=i(S,A.children||[]),S.return=_,S)}function u(_,S,A,T,k){return S===null||S.tag!==7?(S=gh(A,_.mode,T,k),S.return=_,S):(S=i(S,A),S.return=_,S)}function h(_,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Z2(""+S,_.mode,A),S.return=_,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ry:return A=i1(S.type,S.key,S.props,null,_.mode,A),A.ref=h0(_,null,S),A.return=_,A;case yf:return S=J2(S,_.mode,A),S.return=_,S;case Cl:var T=S._init;return h(_,T(S._payload),A)}if(G0(S)||o0(S))return S=gh(S,_.mode,A,null),S.return=_,S;Ky(_,S)}return null}function d(_,S,A,T){var k=S!==null?S.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return k!==null?null:a(_,S,""+A,T);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ry:return A.key===k?c(_,S,A,T):null;case yf:return A.key===k?l(_,S,A,T):null;case Cl:return k=A._init,d(_,S,k(A._payload),T)}if(G0(A)||o0(A))return k!==null?null:u(_,S,A,T,null);Ky(_,A)}return null}function g(_,S,A,T,k){if(typeof T=="string"&&T!==""||typeof T=="number")return _=_.get(A)||null,a(S,_,""+T,k);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ry:return _=_.get(T.key===null?A:T.key)||null,c(S,_,T,k);case yf:return _=_.get(T.key===null?A:T.key)||null,l(S,_,T,k);case Cl:var R=T._init;return g(_,S,A,R(T._payload),k)}if(G0(T)||o0(T))return _=_.get(A)||null,u(S,_,T,k,null);Ky(S,T)}return null}function m(_,S,A,T){for(var k=null,R=null,L=S,F=S=0,B=null;L!==null&&F<A.length;F++){L.index>F?(B=L,L=null):B=L.sibling;var q=d(_,L,A[F],T);if(q===null){L===null&&(L=B);break}t&&L&&q.alternate===null&&e(_,L),S=s(q,S,F),R===null?k=q:R.sibling=q,R=q,L=B}if(F===A.length)return r(_,L),Hr&&Lu(_,F),k;if(L===null){for(;F<A.length;F++)L=h(_,A[F],T),L!==null&&(S=s(L,S,F),R===null?k=L:R.sibling=L,R=L);return Hr&&Lu(_,F),k}for(L=n(_,L);F<A.length;F++)B=g(L,_,F,A[F],T),B!==null&&(t&&B.alternate!==null&&L.delete(B.key===null?F:B.key),S=s(B,S,F),R===null?k=B:R.sibling=B,R=B);return t&&L.forEach(function(D){return e(_,D)}),Hr&&Lu(_,F),k}function v(_,S,A,T){var k=o0(A);if(typeof k!="function")throw Error(de(150));if(A=k.call(A),A==null)throw Error(de(151));for(var R=k=null,L=S,F=S=0,B=null,q=A.next();L!==null&&!q.done;F++,q=A.next()){L.index>F?(B=L,L=null):B=L.sibling;var D=d(_,L,q.value,T);if(D===null){L===null&&(L=B);break}t&&L&&D.alternate===null&&e(_,L),S=s(D,S,F),R===null?k=D:R.sibling=D,R=D,L=B}if(q.done)return r(_,L),Hr&&Lu(_,F),k;if(L===null){for(;!q.done;F++,q=A.next())q=h(_,q.value,T),q!==null&&(S=s(q,S,F),R===null?k=q:R.sibling=q,R=q);return Hr&&Lu(_,F),k}for(L=n(_,L);!q.done;F++,q=A.next())q=g(L,_,F,q.value,T),q!==null&&(t&&q.alternate!==null&&L.delete(q.key===null?F:q.key),S=s(q,S,F),R===null?k=q:R.sibling=q,R=q);return t&&L.forEach(function(E){return e(_,E)}),Hr&&Lu(_,F),k}function $(_,S,A,T){if(typeof A=="object"&&A!==null&&A.type===wf&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Ry:e:{for(var k=A.key,R=S;R!==null;){if(R.key===k){if(k=A.type,k===wf){if(R.tag===7){r(_,R.sibling),S=i(R,A.props.children),S.return=_,_=S;break e}}else if(R.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Cl&&DA(k)===R.type){r(_,R.sibling),S=i(R,A.props),S.ref=h0(_,R,A),S.return=_,_=S;break e}r(_,R);break}else e(_,R);R=R.sibling}A.type===wf?(S=gh(A.props.children,_.mode,T,A.key),S.return=_,_=S):(T=i1(A.type,A.key,A.props,null,_.mode,T),T.ref=h0(_,S,A),T.return=_,_=T)}return o(_);case yf:e:{for(R=A.key;S!==null;){if(S.key===R)if(S.tag===4&&S.stateNode.containerInfo===A.containerInfo&&S.stateNode.implementation===A.implementation){r(_,S.sibling),S=i(S,A.children||[]),S.return=_,_=S;break e}else{r(_,S);break}else e(_,S);S=S.sibling}S=J2(A,_.mode,T),S.return=_,_=S}return o(_);case Cl:return R=A._init,$(_,S,R(A._payload),T)}if(G0(A))return m(_,S,A,T);if(o0(A))return v(_,S,A,T);Ky(_,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,S!==null&&S.tag===6?(r(_,S.sibling),S=i(S,A),S.return=_,_=S):(r(_,S),S=Z2(A,_.mode,T),S.return=_,_=S),o(_)):r(_,S)}return $}var rp=DP(!0),LP=DP(!1),rb=yu(null),nb=null,Af=null,$x=null;function Px(){$x=Af=nb=null}function Ox(t){var e=rb.current;Fr(rb),t._currentValue=e}function P_(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function zf(t,e){nb=t,$x=Af=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bs=!0),t.firstContext=null)}function Co(t){var e=t._currentValue;if($x!==t)if(t={context:t,memoizedValue:e,next:null},Af===null){if(nb===null)throw Error(de(308));Af=t,nb.dependencies={lanes:0,firstContext:t}}else Af=Af.next=t;return e}var eh=null;function kx(t){eh===null?eh=[t]:eh.push(t)}function BP(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,kx(e)):(r.next=i.next,i.next=r),e.interleaved=r,Gc(t,n)}function Gc(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Nl=!1;function Rx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zc(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tu(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,At&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Gc(t,r)}return i=n.interleaved,i===null?(e.next=e,kx(n)):(e.next=i.next,i.next=e),n.interleaved=e,Gc(t,r)}function Jw(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,vx(t,r)}}function LA(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ib(t,e,r,n){var i=t.updateQueue;Nl=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(s!==null){var h=i.baseState;o=0,u=l=c=null,a=s;do{var d=a.lane,g=a.eventTime;if((n&d)===d){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,v=a;switch(d=e,g=r,v.tag){case 1:if(m=v.payload,typeof m=="function"){h=m.call(g,h,d);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,d=typeof m=="function"?m.call(g,h,d):m,d==null)break e;h=tn({},h,d);break e;case 2:Nl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else g={eventTime:g,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=g,c=h):u=u.next=g,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ch|=o,t.lanes=o,t.memoizedState=h}}function BA(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(de(191,i));i.call(n)}}}var Vm={},Oa=yu(Vm),Kg=yu(Vm),Vg=yu(Vm);function th(t){if(t===Vm)throw Error(de(174));return t}function Dx(t,e){switch(Ir(Vg,e),Ir(Kg,t),Ir(Oa,Vm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:d_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=d_(e,t)}Fr(Oa),Ir(Oa,e)}function np(){Fr(Oa),Fr(Kg),Fr(Vg)}function UP(t){th(Vg.current);var e=th(Oa.current),r=d_(e,t.type);e!==r&&(Ir(Kg,t),Ir(Oa,r))}function Lx(t){Kg.current===t&&(Fr(Oa),Fr(Kg))}var Jr=yu(0);function sb(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var H2=[];function Bx(){for(var t=0;t<H2.length;t++)H2[t]._workInProgressVersionPrimary=null;H2.length=0}var Xw=rl.ReactCurrentDispatcher,K2=rl.ReactCurrentBatchConfig,Ah=0,en=null,Pn=null,Kn=null,ob=!1,mg=!1,Gg=0,CF=0;function Mi(){throw Error(de(321))}function jx(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!sa(t[r],e[r]))return!1;return!0}function Ux(t,e,r,n,i,s){if(Ah=s,en=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xw.current=t===null||t.memoizedState===null?$F:PF,t=r(n,i),mg){s=0;do{if(mg=!1,Gg=0,25<=s)throw Error(de(301));s+=1,Kn=Pn=null,e.updateQueue=null,Xw.current=OF,t=r(n,i)}while(mg)}if(Xw.current=ab,e=Pn!==null&&Pn.next!==null,Ah=0,Kn=Pn=en=null,ob=!1,e)throw Error(de(300));return t}function Fx(){var t=Gg!==0;return Gg=0,t}function Aa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?en.memoizedState=Kn=t:Kn=Kn.next=t,Kn}function No(){if(Pn===null){var t=en.alternate;t=t!==null?t.memoizedState:null}else t=Pn.next;var e=Kn===null?en.memoizedState:Kn.next;if(e!==null)Kn=e,Pn=t;else{if(t===null)throw Error(de(310));Pn=t,t={memoizedState:Pn.memoizedState,baseState:Pn.baseState,baseQueue:Pn.baseQueue,queue:Pn.queue,next:null},Kn===null?en.memoizedState=Kn=t:Kn=Kn.next=t}return Kn}function Yg(t,e){return typeof e=="function"?e(t):e}function V2(t){var e=No(),r=e.queue;if(r===null)throw Error(de(311));r.lastRenderedReducer=t;var n=Pn,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,c=null,l=s;do{var u=l.lane;if((Ah&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:t(n,l.action);else{var h={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=h,o=n):c=c.next=h,en.lanes|=u,Ch|=u}l=l.next}while(l!==null&&l!==s);c===null?o=n:c.next=a,sa(n,e.memoizedState)||(bs=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,en.lanes|=s,Ch|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function G2(t){var e=No(),r=e.queue;if(r===null)throw Error(de(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);sa(s,e.memoizedState)||(bs=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function FP(){}function zP(t,e){var r=en,n=No(),i=e(),s=!sa(n.memoizedState,i);if(s&&(n.memoizedState=i,bs=!0),n=n.queue,zx(HP.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Kn!==null&&Kn.memoizedState.tag&1){if(r.flags|=2048,Qg(9,WP.bind(null,r,n,i,e),void 0,null),Jn===null)throw Error(de(349));Ah&30||qP(r,e,i)}return i}function qP(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=en.updateQueue,e===null?(e={lastEffect:null,stores:null},en.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function WP(t,e,r,n){e.value=r,e.getSnapshot=n,KP(e)&&VP(t)}function HP(t,e,r){return r(function(){KP(e)&&VP(t)})}function KP(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!sa(t,r)}catch{return!0}}function VP(t){var e=Gc(t,1);e!==null&&na(e,t,1,-1)}function jA(t){var e=Aa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yg,lastRenderedState:t},e.queue=t,t=t.dispatch=TF.bind(null,en,t),[e.memoizedState,t]}function Qg(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=en.updateQueue,e===null?(e={lastEffect:null,stores:null},en.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function GP(){return No().memoizedState}function e1(t,e,r,n){var i=Aa();en.flags|=t,i.memoizedState=Qg(1|e,r,void 0,n===void 0?null:n)}function fv(t,e,r,n){var i=No();n=n===void 0?null:n;var s=void 0;if(Pn!==null){var o=Pn.memoizedState;if(s=o.destroy,n!==null&&jx(n,o.deps)){i.memoizedState=Qg(e,r,s,n);return}}en.flags|=t,i.memoizedState=Qg(1|e,r,s,n)}function UA(t,e){return e1(8390656,8,t,e)}function zx(t,e){return fv(2048,8,t,e)}function YP(t,e){return fv(4,2,t,e)}function QP(t,e){return fv(4,4,t,e)}function ZP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function JP(t,e,r){return r=r!=null?r.concat([t]):null,fv(4,4,ZP.bind(null,e,t),r)}function qx(){}function XP(t,e){var r=No();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&jx(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function eO(t,e){var r=No();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&jx(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function tO(t,e,r){return Ah&21?(sa(r,e)||(r=oP(),en.lanes|=r,Ch|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bs=!0),t.memoizedState=r)}function NF(t,e){var r=er;er=r!==0&&4>r?r:4,t(!0);var n=K2.transition;K2.transition={};try{t(!1),e()}finally{er=r,K2.transition=n}}function rO(){return No().memoizedState}function MF(t,e,r){var n=nu(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},nO(t))iO(e,r);else if(r=BP(t,e,r,n),r!==null){var i=ts();na(r,t,n,i),sO(r,e,n)}}function TF(t,e,r){var n=nu(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(nO(t))iO(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,sa(a,o)){var c=e.interleaved;c===null?(i.next=i,kx(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=BP(t,e,i,n),r!==null&&(i=ts(),na(r,t,n,i),sO(r,e,n))}}function nO(t){var e=t.alternate;return t===en||e!==null&&e===en}function iO(t,e){mg=ob=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function sO(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,vx(t,r)}}var ab={readContext:Co,useCallback:Mi,useContext:Mi,useEffect:Mi,useImperativeHandle:Mi,useInsertionEffect:Mi,useLayoutEffect:Mi,useMemo:Mi,useReducer:Mi,useRef:Mi,useState:Mi,useDebugValue:Mi,useDeferredValue:Mi,useTransition:Mi,useMutableSource:Mi,useSyncExternalStore:Mi,useId:Mi,unstable_isNewReconciler:!1},$F={readContext:Co,useCallback:function(t,e){return Aa().memoizedState=[t,e===void 0?null:e],t},useContext:Co,useEffect:UA,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,e1(4194308,4,ZP.bind(null,e,t),r)},useLayoutEffect:function(t,e){return e1(4194308,4,t,e)},useInsertionEffect:function(t,e){return e1(4,2,t,e)},useMemo:function(t,e){var r=Aa();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Aa();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=MF.bind(null,en,t),[n.memoizedState,t]},useRef:function(t){var e=Aa();return t={current:t},e.memoizedState=t},useState:jA,useDebugValue:qx,useDeferredValue:function(t){return Aa().memoizedState=t},useTransition:function(){var t=jA(!1),e=t[0];return t=NF.bind(null,t[1]),Aa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=en,i=Aa();if(Hr){if(r===void 0)throw Error(de(407));r=r()}else{if(r=e(),Jn===null)throw Error(de(349));Ah&30||qP(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,UA(HP.bind(null,n,s,t),[t]),n.flags|=2048,Qg(9,WP.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Aa(),e=Jn.identifierPrefix;if(Hr){var r=Bc,n=Lc;r=(n&~(1<<32-ra(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Gg++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=CF++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},PF={readContext:Co,useCallback:XP,useContext:Co,useEffect:zx,useImperativeHandle:JP,useInsertionEffect:YP,useLayoutEffect:QP,useMemo:eO,useReducer:V2,useRef:GP,useState:function(){return V2(Yg)},useDebugValue:qx,useDeferredValue:function(t){var e=No();return tO(e,Pn.memoizedState,t)},useTransition:function(){var t=V2(Yg)[0],e=No().memoizedState;return[t,e]},useMutableSource:FP,useSyncExternalStore:zP,useId:rO,unstable_isNewReconciler:!1},OF={readContext:Co,useCallback:XP,useContext:Co,useEffect:zx,useImperativeHandle:JP,useInsertionEffect:YP,useLayoutEffect:QP,useMemo:eO,useReducer:G2,useRef:GP,useState:function(){return G2(Yg)},useDebugValue:qx,useDeferredValue:function(t){var e=No();return Pn===null?e.memoizedState=t:tO(e,Pn.memoizedState,t)},useTransition:function(){var t=G2(Yg)[0],e=No().memoizedState;return[t,e]},useMutableSource:FP,useSyncExternalStore:zP,useId:rO,unstable_isNewReconciler:!1};function Yo(t,e){if(t&&t.defaultProps){e=tn({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function O_(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:tn({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var pv={isMounted:function(t){return(t=t._reactInternals)?qh(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=ts(),i=nu(t),s=zc(n,i);s.payload=e,r!=null&&(s.callback=r),e=tu(t,s,i),e!==null&&(na(e,t,i,n),Jw(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=ts(),i=nu(t),s=zc(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=tu(t,s,i),e!==null&&(na(e,t,i,n),Jw(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ts(),n=nu(t),i=zc(r,n);i.tag=2,e!=null&&(i.callback=e),e=tu(t,i,n),e!==null&&(na(e,t,n,r),Jw(e,t,n))}};function FA(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!zg(r,n)||!zg(i,s):!0}function oO(t,e,r){var n=!1,i=du,s=e.contextType;return typeof s=="object"&&s!==null?s=Co(s):(i=Ss(e)?xh:Ki.current,n=e.contextTypes,s=(n=n!=null)?ep(t,i):du),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pv,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function zA(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&pv.enqueueReplaceState(e,e.state,null)}function k_(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Rx(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Co(s):(s=Ss(e)?xh:Ki.current,i.context=ep(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(O_(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&pv.enqueueReplaceState(i,i.state,null),ib(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ip(t,e){try{var r="",n=e;do r+=aU(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Y2(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function R_(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var kF=typeof WeakMap=="function"?WeakMap:Map;function aO(t,e,r){r=zc(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){lb||(lb=!0,H_=n),R_(t,e)},r}function cO(t,e,r){r=zc(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){R_(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){R_(t,e),typeof n!="function"&&(ru===null?ru=new Set([this]):ru.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function qA(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new kF;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=GF.bind(null,t,e,r),e.then(t,t))}function WA(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function HA(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=zc(-1,1),e.tag=2,tu(r,e,1))),r.lanes|=1),t)}var RF=rl.ReactCurrentOwner,bs=!1;function Yi(t,e,r,n){e.child=t===null?LP(e,null,r,n):rp(e,t.child,r,n)}function KA(t,e,r,n,i){r=r.render;var s=e.ref;return zf(e,i),n=Ux(t,e,r,n,s,i),r=Fx(),t!==null&&!bs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yc(t,e,i)):(Hr&&r&&Nx(e),e.flags|=1,Yi(t,e,n,i),e.child)}function VA(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!Zx(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,lO(t,e,s,n,i)):(t=i1(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:zg,r(o,n)&&t.ref===e.ref)return Yc(t,e,i)}return e.flags|=1,t=iu(s,n),t.ref=e.ref,t.return=e,e.child=t}function lO(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(zg(s,n)&&t.ref===e.ref)if(bs=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(bs=!0);else return e.lanes=t.lanes,Yc(t,e,i)}return D_(t,e,r,n,i)}function uO(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ir(Nf,Rs),Rs|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ir(Nf,Rs),Rs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Ir(Nf,Rs),Rs|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Ir(Nf,Rs),Rs|=n;return Yi(t,e,i,r),e.child}function hO(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function D_(t,e,r,n,i){var s=Ss(r)?xh:Ki.current;return s=ep(e,s),zf(e,i),r=Ux(t,e,r,n,s,i),n=Fx(),t!==null&&!bs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yc(t,e,i)):(Hr&&n&&Nx(e),e.flags|=1,Yi(t,e,r,i),e.child)}function GA(t,e,r,n,i){if(Ss(r)){var s=!0;X1(e)}else s=!1;if(zf(e,i),e.stateNode===null)t1(t,e),oO(e,r,n),k_(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=r.contextType;typeof l=="object"&&l!==null?l=Co(l):(l=Ss(r)?xh:Ki.current,l=ep(e,l));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||c!==l)&&zA(e,o,n,l),Nl=!1;var d=e.memoizedState;o.state=d,ib(e,n,o,i),c=e.memoizedState,a!==n||d!==c||_s.current||Nl?(typeof u=="function"&&(O_(e,r,u,n),c=e.memoizedState),(a=Nl||FA(e,r,a,n,d,c,l))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=l,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,jP(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Yo(e.type,a),o.props=l,h=e.pendingProps,d=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Co(c):(c=Ss(r)?xh:Ki.current,c=ep(e,c));var g=r.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==c)&&zA(e,o,n,c),Nl=!1,d=e.memoizedState,o.state=d,ib(e,n,o,i);var m=e.memoizedState;a!==h||d!==m||_s.current||Nl?(typeof g=="function"&&(O_(e,r,g,n),m=e.memoizedState),(l=Nl||FA(e,r,l,n,d,m,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=c,n=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return L_(t,e,r,n,s,i)}function L_(t,e,r,n,i,s){hO(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&OA(e,r,!1),Yc(t,e,s);n=e.stateNode,RF.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=rp(e,t.child,null,s),e.child=rp(e,null,a,s)):Yi(t,e,a,s),e.memoizedState=n.state,i&&OA(e,r,!0),e.child}function dO(t){var e=t.stateNode;e.pendingContext?PA(t,e.pendingContext,e.pendingContext!==e.context):e.context&&PA(t,e.context,!1),Dx(t,e.containerInfo)}function YA(t,e,r,n,i){return tp(),Tx(i),e.flags|=256,Yi(t,e,r,n),e.child}var B_={dehydrated:null,treeContext:null,retryLane:0};function j_(t){return{baseLanes:t,cachePool:null,transitions:null}}function fO(t,e,r){var n=e.pendingProps,i=Jr.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ir(Jr,i&1),t===null)return $_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=yv(o,n,0,null),t=gh(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=j_(r),e.memoizedState=B_,t):Wx(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return DF(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=iu(i,c),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=iu(a,s):(s=gh(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?j_(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=B_,n}return s=t.child,t=s.sibling,n=iu(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Wx(t,e){return e=yv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vy(t,e,r,n){return n!==null&&Tx(n),rp(e,t.child,null,r),t=Wx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DF(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=Y2(Error(de(422))),Vy(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=yv({mode:"visible",children:n.children},i,0,null),s=gh(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&rp(e,t.child,null,o),e.child.memoizedState=j_(o),e.memoizedState=B_,s);if(!(e.mode&1))return Vy(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(de(419)),n=Y2(s,n,void 0),Vy(t,e,o,n)}if(a=(o&t.childLanes)!==0,bs||a){if(n=Jn,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Gc(t,i),na(n,t,i,-1))}return Qx(),n=Y2(Error(de(421))),Vy(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=YF.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,qs=eu(i.nextSibling),Vs=e,Hr=!0,Jo=null,t!==null&&(Eo[_o++]=Lc,Eo[_o++]=Bc,Eo[_o++]=Ih,Lc=t.id,Bc=t.overflow,Ih=e),e=Wx(e,n.children),e.flags|=4096,e)}function QA(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),P_(t.return,e,r)}function Q2(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function pO(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Yi(t,e,n.children,r),n=Jr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&QA(t,r,e);else if(t.tag===19)QA(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ir(Jr,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&sb(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Q2(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sb(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Q2(e,!0,r,null,s);break;case"together":Q2(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function t1(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yc(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ch|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(de(153));if(e.child!==null){for(t=e.child,r=iu(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=iu(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function LF(t,e,r){switch(e.tag){case 3:dO(e),tp();break;case 5:UP(e);break;case 1:Ss(e.type)&&X1(e);break;case 4:Dx(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ir(rb,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ir(Jr,Jr.current&1),e.flags|=128,null):r&e.child.childLanes?fO(t,e,r):(Ir(Jr,Jr.current&1),t=Yc(t,e,r),t!==null?t.sibling:null);Ir(Jr,Jr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return pO(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ir(Jr,Jr.current),n)break;return null;case 22:case 23:return e.lanes=0,uO(t,e,r)}return Yc(t,e,r)}var gO,U_,mO,yO;gO=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};U_=function(){};mO=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,th(Oa.current);var s=null;switch(r){case"input":i=c_(t,i),n=c_(t,n),s=[];break;case"select":i=tn({},i,{value:void 0}),n=tn({},n,{value:void 0}),s=[];break;case"textarea":i=h_(t,i),n=h_(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Z1)}f_(r,n);var o;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Rg.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in n){var c=n[l];if(a=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(l,r)),r=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Rg.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Dr("scroll",t),s||a===c||(s=[])):(s=s||[]).push(l,c))}r&&(s=s||[]).push("style",r);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};yO=function(t,e,r,n){r!==n&&(e.flags|=4)};function d0(t,e){if(!Hr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ti(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function BF(t,e,r){var n=e.pendingProps;switch(Mx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(e),null;case 1:return Ss(e.type)&&J1(),Ti(e),null;case 3:return n=e.stateNode,np(),Fr(_s),Fr(Ki),Bx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Hy(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jo!==null&&(G_(Jo),Jo=null))),U_(t,e),Ti(e),null;case 5:Lx(e);var i=th(Vg.current);if(r=e.type,t!==null&&e.stateNode!=null)mO(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(de(166));return Ti(e),null}if(t=th(Oa.current),Hy(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Na]=e,n[Hg]=s,t=(e.mode&1)!==0,r){case"dialog":Dr("cancel",n),Dr("close",n);break;case"iframe":case"object":case"embed":Dr("load",n);break;case"video":case"audio":for(i=0;i<Q0.length;i++)Dr(Q0[i],n);break;case"source":Dr("error",n);break;case"img":case"image":case"link":Dr("error",n),Dr("load",n);break;case"details":Dr("toggle",n);break;case"input":sA(n,s),Dr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Dr("invalid",n);break;case"textarea":aA(n,s),Dr("invalid",n)}f_(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&Wy(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Wy(n.textContent,a,t),i=["children",""+a]):Rg.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Dr("scroll",n)}switch(r){case"input":Dy(n),oA(n,s,!0);break;case"textarea":Dy(n),cA(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Z1)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=H$(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Na]=e,t[Hg]=n,gO(t,e,!1,!1),e.stateNode=t;e:{switch(o=p_(r,n),r){case"dialog":Dr("cancel",t),Dr("close",t),i=n;break;case"iframe":case"object":case"embed":Dr("load",t),i=n;break;case"video":case"audio":for(i=0;i<Q0.length;i++)Dr(Q0[i],t);i=n;break;case"source":Dr("error",t),i=n;break;case"img":case"image":case"link":Dr("error",t),Dr("load",t),i=n;break;case"details":Dr("toggle",t),i=n;break;case"input":sA(t,n),i=c_(t,n),Dr("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=tn({},n,{value:void 0}),Dr("invalid",t);break;case"textarea":aA(t,n),i=h_(t,n),Dr("invalid",t);break;default:i=n}f_(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?G$(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&K$(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Dg(t,c):typeof c=="number"&&Dg(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Rg.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Dr("scroll",t):c!=null&&px(t,s,c,o))}switch(r){case"input":Dy(t),oA(t,n,!1);break;case"textarea":Dy(t),cA(t);break;case"option":n.value!=null&&t.setAttribute("value",""+hu(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Bf(t,!!n.multiple,s,!1):n.defaultValue!=null&&Bf(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Z1)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ti(e),null;case 6:if(t&&e.stateNode!=null)yO(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(de(166));if(r=th(Vg.current),th(Oa.current),Hy(e)){if(n=e.stateNode,r=e.memoizedProps,n[Na]=e,(s=n.nodeValue!==r)&&(t=Vs,t!==null))switch(t.tag){case 3:Wy(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wy(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Na]=e,e.stateNode=n}return Ti(e),null;case 13:if(Fr(Jr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Hr&&qs!==null&&e.mode&1&&!(e.flags&128))RP(),tp(),e.flags|=98560,s=!1;else if(s=Hy(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(de(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(de(317));s[Na]=e}else tp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ti(e),s=!1}else Jo!==null&&(G_(Jo),Jo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Jr.current&1?Rn===0&&(Rn=3):Qx())),e.updateQueue!==null&&(e.flags|=4),Ti(e),null);case 4:return np(),U_(t,e),t===null&&qg(e.stateNode.containerInfo),Ti(e),null;case 10:return Ox(e.type._context),Ti(e),null;case 17:return Ss(e.type)&&J1(),Ti(e),null;case 19:if(Fr(Jr),s=e.memoizedState,s===null)return Ti(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)d0(s,!1);else{if(Rn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sb(t),o!==null){for(e.flags|=128,d0(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ir(Jr,Jr.current&1|2),e.child}t=t.sibling}s.tail!==null&&pn()>sp&&(e.flags|=128,n=!0,d0(s,!1),e.lanes=4194304)}else{if(!n)if(t=sb(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),d0(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Hr)return Ti(e),null}else 2*pn()-s.renderingStartTime>sp&&r!==1073741824&&(e.flags|=128,n=!0,d0(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pn(),e.sibling=null,r=Jr.current,Ir(Jr,n?r&1|2:r&1),e):(Ti(e),null);case 22:case 23:return Yx(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Rs&1073741824&&(Ti(e),e.subtreeFlags&6&&(e.flags|=8192)):Ti(e),null;case 24:return null;case 25:return null}throw Error(de(156,e.tag))}function jF(t,e){switch(Mx(e),e.tag){case 1:return Ss(e.type)&&J1(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return np(),Fr(_s),Fr(Ki),Bx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Lx(e),null;case 13:if(Fr(Jr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(de(340));tp()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fr(Jr),null;case 4:return np(),null;case 10:return Ox(e.type._context),null;case 22:case 23:return Yx(),null;case 24:return null;default:return null}}var Gy=!1,Fi=!1,UF=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Cf(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){cn(t,e,n)}else r.current=null}function F_(t,e,r){try{r()}catch(n){cn(t,e,n)}}var ZA=!1;function FF(t,e){if(x_=G1,t=_P(),Cx(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,c=-1,l=0,u=0,h=t,d=null;t:for(;;){for(var g;h!==r||i!==0&&h.nodeType!==3||(a=o+i),h!==s||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)d=h,h=g;for(;;){if(h===t)break t;if(d===r&&++l===i&&(a=o),d===s&&++u===n&&(c=o),(g=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=g}r=a===-1||c===-1?null:{start:a,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(I_={focusedElem:t,selectionRange:r},G1=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,$=m.memoizedState,_=e.stateNode,S=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:Yo(e.type,v),$);_.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(T){cn(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return m=ZA,ZA=!1,m}function yg(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&F_(e,r,s)}i=i.next}while(i!==n)}}function gv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function z_(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function wO(t){var e=t.alternate;e!==null&&(t.alternate=null,wO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Na],delete e[Hg],delete e[N_],delete e[SF],delete e[xF])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bO(t){return t.tag===5||t.tag===3||t.tag===4}function JA(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function q_(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Z1));else if(n!==4&&(t=t.child,t!==null))for(q_(t,e,r),t=t.sibling;t!==null;)q_(t,e,r),t=t.sibling}function W_(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(W_(t,e,r),t=t.sibling;t!==null;)W_(t,e,r),t=t.sibling}var hi=null,Zo=!1;function cl(t,e,r){for(r=r.child;r!==null;)vO(t,e,r),r=r.sibling}function vO(t,e,r){if(Pa&&typeof Pa.onCommitFiberUnmount=="function")try{Pa.onCommitFiberUnmount(av,r)}catch{}switch(r.tag){case 5:Fi||Cf(r,e);case 6:var n=hi,i=Zo;hi=null,cl(t,e,r),hi=n,Zo=i,hi!==null&&(Zo?(t=hi,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):hi.removeChild(r.stateNode));break;case 18:hi!==null&&(Zo?(t=hi,r=r.stateNode,t.nodeType===8?q2(t.parentNode,r):t.nodeType===1&&q2(t,r),Ug(t)):q2(hi,r.stateNode));break;case 4:n=hi,i=Zo,hi=r.stateNode.containerInfo,Zo=!0,cl(t,e,r),hi=n,Zo=i;break;case 0:case 11:case 14:case 15:if(!Fi&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&F_(r,e,o),i=i.next}while(i!==n)}cl(t,e,r);break;case 1:if(!Fi&&(Cf(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){cn(r,e,a)}cl(t,e,r);break;case 21:cl(t,e,r);break;case 22:r.mode&1?(Fi=(n=Fi)||r.memoizedState!==null,cl(t,e,r),Fi=n):cl(t,e,r);break;default:cl(t,e,r)}}function XA(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new UF),e.forEach(function(n){var i=QF.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Do(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:hi=a.stateNode,Zo=!1;break e;case 3:hi=a.stateNode.containerInfo,Zo=!0;break e;case 4:hi=a.stateNode.containerInfo,Zo=!0;break e}a=a.return}if(hi===null)throw Error(de(160));vO(s,o,i),hi=null,Zo=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){cn(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)EO(e,t),e=e.sibling}function EO(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Do(e,t),fa(t),n&4){try{yg(3,t,t.return),gv(3,t)}catch(v){cn(t,t.return,v)}try{yg(5,t,t.return)}catch(v){cn(t,t.return,v)}}break;case 1:Do(e,t),fa(t),n&512&&r!==null&&Cf(r,r.return);break;case 5:if(Do(e,t),fa(t),n&512&&r!==null&&Cf(r,r.return),t.flags&32){var i=t.stateNode;try{Dg(i,"")}catch(v){cn(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&q$(i,s),p_(a,o);var l=p_(a,s);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?G$(i,h):u==="dangerouslySetInnerHTML"?K$(i,h):u==="children"?Dg(i,h):px(i,u,h,l)}switch(a){case"input":l_(i,s);break;case"textarea":W$(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Bf(i,!!s.multiple,g,!1):d!==!!s.multiple&&(s.defaultValue!=null?Bf(i,!!s.multiple,s.defaultValue,!0):Bf(i,!!s.multiple,s.multiple?[]:"",!1))}i[Hg]=s}catch(v){cn(t,t.return,v)}}break;case 6:if(Do(e,t),fa(t),n&4){if(t.stateNode===null)throw Error(de(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){cn(t,t.return,v)}}break;case 3:if(Do(e,t),fa(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ug(e.containerInfo)}catch(v){cn(t,t.return,v)}break;case 4:Do(e,t),fa(t);break;case 13:Do(e,t),fa(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Vx=pn())),n&4&&XA(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(Fi=(l=Fi)||u,Do(e,t),Fi=l):Do(e,t),fa(t),n&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Ie=t,u=t.child;u!==null;){for(h=Ie=u;Ie!==null;){switch(d=Ie,g=d.child,d.tag){case 0:case 11:case 14:case 15:yg(4,d,d.return);break;case 1:Cf(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){cn(n,r,v)}}break;case 5:Cf(d,d.return);break;case 22:if(d.memoizedState!==null){t6(h);continue}}g!==null?(g.return=d,Ie=g):t6(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=V$("display",o))}catch(v){cn(t,t.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(v){cn(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Do(e,t),fa(t),n&4&&XA(t);break;case 21:break;default:Do(e,t),fa(t)}}function fa(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(bO(r)){var n=r;break e}r=r.return}throw Error(de(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Dg(i,""),n.flags&=-33);var s=JA(t);W_(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=JA(t);q_(t,a,o);break;default:throw Error(de(161))}}catch(c){cn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zF(t,e,r){Ie=t,_O(t)}function _O(t,e,r){for(var n=(t.mode&1)!==0;Ie!==null;){var i=Ie,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Gy;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Fi;a=Gy;var l=Fi;if(Gy=o,(Fi=c)&&!l)for(Ie=i;Ie!==null;)o=Ie,c=o.child,o.tag===22&&o.memoizedState!==null?r6(i):c!==null?(c.return=o,Ie=c):r6(i);for(;s!==null;)Ie=s,_O(s),s=s.sibling;Ie=i,Gy=a,Fi=l}e6(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ie=s):e6(t)}}function e6(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fi||gv(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Fi)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Yo(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&BA(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}BA(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Ug(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}Fi||e.flags&512&&z_(e)}catch(d){cn(e,e.return,d)}}if(e===t){Ie=null;break}if(r=e.sibling,r!==null){r.return=e.return,Ie=r;break}Ie=e.return}}function t6(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Ie=r;break}Ie=e.return}}function r6(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{gv(4,e)}catch(c){cn(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){cn(e,i,c)}}var s=e.return;try{z_(e)}catch(c){cn(e,s,c)}break;case 5:var o=e.return;try{z_(e)}catch(c){cn(e,o,c)}}}catch(c){cn(e,e.return,c)}if(e===t){Ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ie=a;break}Ie=e.return}}var qF=Math.ceil,cb=rl.ReactCurrentDispatcher,Hx=rl.ReactCurrentOwner,Io=rl.ReactCurrentBatchConfig,At=0,Jn=null,In=null,bi=0,Rs=0,Nf=yu(0),Rn=0,Zg=null,Ch=0,mv=0,Kx=0,wg=null,ys=null,Vx=0,sp=1/0,Nc=null,lb=!1,H_=null,ru=null,Yy=!1,Ul=null,ub=0,bg=0,K_=null,r1=-1,n1=0;function ts(){return At&6?pn():r1!==-1?r1:r1=pn()}function nu(t){return t.mode&1?At&2&&bi!==0?bi&-bi:AF.transition!==null?(n1===0&&(n1=oP()),n1):(t=er,t!==0||(t=window.event,t=t===void 0?16:fP(t.type)),t):1}function na(t,e,r,n){if(50<bg)throw bg=0,K_=null,Error(de(185));Wm(t,r,n),(!(At&2)||t!==Jn)&&(t===Jn&&(!(At&2)&&(mv|=r),Rn===4&&Dl(t,bi)),xs(t,n),r===1&&At===0&&!(e.mode&1)&&(sp=pn()+500,dv&&wu()))}function xs(t,e){var r=t.callbackNode;AU(t,e);var n=V1(t,t===Jn?bi:0);if(n===0)r!==null&&hA(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&hA(r),e===1)t.tag===0?IF(n6.bind(null,t)):PP(n6.bind(null,t)),EF(function(){!(At&6)&&wu()}),r=null;else{switch(aP(n)){case 1:r=bx;break;case 4:r=iP;break;case 16:r=K1;break;case 536870912:r=sP;break;default:r=K1}r=TO(r,SO.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function SO(t,e){if(r1=-1,n1=0,At&6)throw Error(de(327));var r=t.callbackNode;if(qf()&&t.callbackNode!==r)return null;var n=V1(t,t===Jn?bi:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=hb(t,n);else{e=n;var i=At;At|=2;var s=IO();(Jn!==t||bi!==e)&&(Nc=null,sp=pn()+500,ph(t,e));do try{KF();break}catch(a){xO(t,a)}while(!0);Px(),cb.current=s,At=i,In!==null?e=0:(Jn=null,bi=0,e=Rn)}if(e!==0){if(e===2&&(i=b_(t),i!==0&&(n=i,e=V_(t,i))),e===1)throw r=Zg,ph(t,0),Dl(t,n),xs(t,pn()),r;if(e===6)Dl(t,n);else{if(i=t.current.alternate,!(n&30)&&!WF(i)&&(e=hb(t,n),e===2&&(s=b_(t),s!==0&&(n=s,e=V_(t,s))),e===1))throw r=Zg,ph(t,0),Dl(t,n),xs(t,pn()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(de(345));case 2:Bu(t,ys,Nc);break;case 3:if(Dl(t,n),(n&130023424)===n&&(e=Vx+500-pn(),10<e)){if(V1(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){ts(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=C_(Bu.bind(null,t,ys,Nc),e);break}Bu(t,ys,Nc);break;case 4:if(Dl(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-ra(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=pn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*qF(n/1960))-n,10<n){t.timeoutHandle=C_(Bu.bind(null,t,ys,Nc),n);break}Bu(t,ys,Nc);break;case 5:Bu(t,ys,Nc);break;default:throw Error(de(329))}}}return xs(t,pn()),t.callbackNode===r?SO.bind(null,t):null}function V_(t,e){var r=wg;return t.current.memoizedState.isDehydrated&&(ph(t,e).flags|=256),t=hb(t,e),t!==2&&(e=ys,ys=r,e!==null&&G_(e)),t}function G_(t){ys===null?ys=t:ys.push.apply(ys,t)}function WF(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!sa(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dl(t,e){for(e&=~Kx,e&=~mv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ra(e),n=1<<r;t[r]=-1,e&=~n}}function n6(t){if(At&6)throw Error(de(327));qf();var e=V1(t,0);if(!(e&1))return xs(t,pn()),null;var r=hb(t,e);if(t.tag!==0&&r===2){var n=b_(t);n!==0&&(e=n,r=V_(t,n))}if(r===1)throw r=Zg,ph(t,0),Dl(t,e),xs(t,pn()),r;if(r===6)throw Error(de(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bu(t,ys,Nc),xs(t,pn()),null}function Gx(t,e){var r=At;At|=1;try{return t(e)}finally{At=r,At===0&&(sp=pn()+500,dv&&wu())}}function Nh(t){Ul!==null&&Ul.tag===0&&!(At&6)&&qf();var e=At;At|=1;var r=Io.transition,n=er;try{if(Io.transition=null,er=1,t)return t()}finally{er=n,Io.transition=r,At=e,!(At&6)&&wu()}}function Yx(){Rs=Nf.current,Fr(Nf)}function ph(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,vF(r)),In!==null)for(r=In.return;r!==null;){var n=r;switch(Mx(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&J1();break;case 3:np(),Fr(_s),Fr(Ki),Bx();break;case 5:Lx(n);break;case 4:np();break;case 13:Fr(Jr);break;case 19:Fr(Jr);break;case 10:Ox(n.type._context);break;case 22:case 23:Yx()}r=r.return}if(Jn=t,In=t=iu(t.current,null),bi=Rs=e,Rn=0,Zg=null,Kx=mv=Ch=0,ys=wg=null,eh!==null){for(e=0;e<eh.length;e++)if(r=eh[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}eh=null}return t}function xO(t,e){do{var r=In;try{if(Px(),Xw.current=ab,ob){for(var n=en.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ob=!1}if(Ah=0,Kn=Pn=en=null,mg=!1,Gg=0,Hx.current=null,r===null||r.return===null){Rn=1,Zg=e,In=null;break}e:{var s=t,o=r.return,a=r,c=e;if(e=bi,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=WA(o);if(g!==null){g.flags&=-257,HA(g,o,a,s,e),g.mode&1&&qA(s,l,e),e=g,c=l;var m=e.updateQueue;if(m===null){var v=new Set;v.add(c),e.updateQueue=v}else m.add(c);break e}else{if(!(e&1)){qA(s,l,e),Qx();break e}c=Error(de(426))}}else if(Hr&&a.mode&1){var $=WA(o);if($!==null){!($.flags&65536)&&($.flags|=256),HA($,o,a,s,e),Tx(ip(c,a));break e}}s=c=ip(c,a),Rn!==4&&(Rn=2),wg===null?wg=[s]:wg.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=aO(s,c,e);LA(s,_);break e;case 1:a=c;var S=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(ru===null||!ru.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=cO(s,a,e);LA(s,T);break e}}s=s.return}while(s!==null)}CO(r)}catch(k){e=k,In===r&&r!==null&&(In=r=r.return);continue}break}while(!0)}function IO(){var t=cb.current;return cb.current=ab,t===null?ab:t}function Qx(){(Rn===0||Rn===3||Rn===2)&&(Rn=4),Jn===null||!(Ch&268435455)&&!(mv&268435455)||Dl(Jn,bi)}function hb(t,e){var r=At;At|=2;var n=IO();(Jn!==t||bi!==e)&&(Nc=null,ph(t,e));do try{HF();break}catch(i){xO(t,i)}while(!0);if(Px(),At=r,cb.current=n,In!==null)throw Error(de(261));return Jn=null,bi=0,Rn}function HF(){for(;In!==null;)AO(In)}function KF(){for(;In!==null&&!yU();)AO(In)}function AO(t){var e=MO(t.alternate,t,Rs);t.memoizedProps=t.pendingProps,e===null?CO(t):In=e,Hx.current=null}function CO(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=jF(r,e),r!==null){r.flags&=32767,In=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rn=6,In=null;return}}else if(r=BF(r,e,Rs),r!==null){In=r;return}if(e=e.sibling,e!==null){In=e;return}In=e=t}while(e!==null);Rn===0&&(Rn=5)}function Bu(t,e,r){var n=er,i=Io.transition;try{Io.transition=null,er=1,VF(t,e,r,n)}finally{Io.transition=i,er=n}return null}function VF(t,e,r,n){do qf();while(Ul!==null);if(At&6)throw Error(de(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(de(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(CU(t,s),t===Jn&&(In=Jn=null,bi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Yy||(Yy=!0,TO(K1,function(){return qf(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Io.transition,Io.transition=null;var o=er;er=1;var a=At;At|=4,Hx.current=null,FF(t,r),EO(r,t),fF(I_),G1=!!x_,I_=x_=null,t.current=r,zF(r),wU(),At=a,er=o,Io.transition=s}else t.current=r;if(Yy&&(Yy=!1,Ul=t,ub=i),s=t.pendingLanes,s===0&&(ru=null),EU(r.stateNode),xs(t,pn()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(lb)throw lb=!1,t=H_,H_=null,t;return ub&1&&t.tag!==0&&qf(),s=t.pendingLanes,s&1?t===K_?bg++:(bg=0,K_=t):bg=0,wu(),null}function qf(){if(Ul!==null){var t=aP(ub),e=Io.transition,r=er;try{if(Io.transition=null,er=16>t?16:t,Ul===null)var n=!1;else{if(t=Ul,Ul=null,ub=0,At&6)throw Error(de(331));var i=At;for(At|=4,Ie=t.current;Ie!==null;){var s=Ie,o=s.child;if(Ie.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Ie=l;Ie!==null;){var u=Ie;switch(u.tag){case 0:case 11:case 15:yg(8,u,s)}var h=u.child;if(h!==null)h.return=u,Ie=h;else for(;Ie!==null;){u=Ie;var d=u.sibling,g=u.return;if(wO(u),u===l){Ie=null;break}if(d!==null){d.return=g,Ie=d;break}Ie=g}}}var m=s.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var $=v.sibling;v.sibling=null,v=$}while(v!==null)}}Ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ie=o;else e:for(;Ie!==null;){if(s=Ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:yg(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,Ie=_;break e}Ie=s.return}}var S=t.current;for(Ie=S;Ie!==null;){o=Ie;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,Ie=A;else e:for(o=S;Ie!==null;){if(a=Ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:gv(9,a)}}catch(k){cn(a,a.return,k)}if(a===o){Ie=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,Ie=T;break e}Ie=a.return}}if(At=i,wu(),Pa&&typeof Pa.onPostCommitFiberRoot=="function")try{Pa.onPostCommitFiberRoot(av,t)}catch{}n=!0}return n}finally{er=r,Io.transition=e}}return!1}function i6(t,e,r){e=ip(r,e),e=aO(t,e,1),t=tu(t,e,1),e=ts(),t!==null&&(Wm(t,1,e),xs(t,e))}function cn(t,e,r){if(t.tag===3)i6(t,t,r);else for(;e!==null;){if(e.tag===3){i6(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ru===null||!ru.has(n))){t=ip(r,t),t=cO(e,t,1),e=tu(e,t,1),t=ts(),e!==null&&(Wm(e,1,t),xs(e,t));break}}e=e.return}}function GF(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=ts(),t.pingedLanes|=t.suspendedLanes&r,Jn===t&&(bi&r)===r&&(Rn===4||Rn===3&&(bi&130023424)===bi&&500>pn()-Vx?ph(t,0):Kx|=r),xs(t,e)}function NO(t,e){e===0&&(t.mode&1?(e=jy,jy<<=1,!(jy&130023424)&&(jy=4194304)):e=1);var r=ts();t=Gc(t,e),t!==null&&(Wm(t,e,r),xs(t,r))}function YF(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),NO(t,r)}function QF(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(de(314))}n!==null&&n.delete(e),NO(t,r)}var MO;MO=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||_s.current)bs=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return bs=!1,LF(t,e,r);bs=!!(t.flags&131072)}else bs=!1,Hr&&e.flags&1048576&&OP(e,tb,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;t1(t,e),t=e.pendingProps;var i=ep(e,Ki.current);zf(e,r),i=Ux(null,e,n,t,i,r);var s=Fx();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ss(n)?(s=!0,X1(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Rx(e),i.updater=pv,e.stateNode=i,i._reactInternals=e,k_(e,n,t,r),e=L_(null,e,n,!0,s,r)):(e.tag=0,Hr&&s&&Nx(e),Yi(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(t1(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=JF(n),t=Yo(n,t),i){case 0:e=D_(null,e,n,t,r);break e;case 1:e=GA(null,e,n,t,r);break e;case 11:e=KA(null,e,n,t,r);break e;case 14:e=VA(null,e,n,Yo(n.type,t),r);break e}throw Error(de(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Yo(n,i),D_(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Yo(n,i),GA(t,e,n,i,r);case 3:e:{if(dO(e),t===null)throw Error(de(387));n=e.pendingProps,s=e.memoizedState,i=s.element,jP(t,e),ib(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ip(Error(de(423)),e),e=YA(t,e,n,r,i);break e}else if(n!==i){i=ip(Error(de(424)),e),e=YA(t,e,n,r,i);break e}else for(qs=eu(e.stateNode.containerInfo.firstChild),Vs=e,Hr=!0,Jo=null,r=LP(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(tp(),n===i){e=Yc(t,e,r);break e}Yi(t,e,n,r)}e=e.child}return e;case 5:return UP(e),t===null&&$_(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,A_(n,i)?o=null:s!==null&&A_(n,s)&&(e.flags|=32),hO(t,e),Yi(t,e,o,r),e.child;case 6:return t===null&&$_(e),null;case 13:return fO(t,e,r);case 4:return Dx(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=rp(e,null,n,r):Yi(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Yo(n,i),KA(t,e,n,i,r);case 7:return Yi(t,e,e.pendingProps,r),e.child;case 8:return Yi(t,e,e.pendingProps.children,r),e.child;case 12:return Yi(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ir(rb,n._currentValue),n._currentValue=o,s!==null)if(sa(s.value,o)){if(s.children===i.children&&!_s.current){e=Yc(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=zc(-1,r&-r),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),P_(s.return,r,e),a.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(de(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),P_(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Yi(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,zf(e,r),i=Co(i),n=n(i),e.flags|=1,Yi(t,e,n,r),e.child;case 14:return n=e.type,i=Yo(n,e.pendingProps),i=Yo(n.type,i),VA(t,e,n,i,r);case 15:return lO(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Yo(n,i),t1(t,e),e.tag=1,Ss(n)?(t=!0,X1(e)):t=!1,zf(e,r),oO(e,n,i),k_(e,n,i,r),L_(null,e,n,!0,t,r);case 19:return pO(t,e,r);case 22:return uO(t,e,r)}throw Error(de(156,e.tag))};function TO(t,e){return nP(t,e)}function ZF(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function So(t,e,r,n){return new ZF(t,e,r,n)}function Zx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JF(t){if(typeof t=="function")return Zx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===mx)return 11;if(t===yx)return 14}return 2}function iu(t,e){var r=t.alternate;return r===null?(r=So(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function i1(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")Zx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case wf:return gh(r.children,i,s,e);case gx:o=8,i|=8;break;case i_:return t=So(12,r,e,i|2),t.elementType=i_,t.lanes=s,t;case s_:return t=So(13,r,e,i),t.elementType=s_,t.lanes=s,t;case o_:return t=So(19,r,e,i),t.elementType=o_,t.lanes=s,t;case U$:return yv(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case B$:o=10;break e;case j$:o=9;break e;case mx:o=11;break e;case yx:o=14;break e;case Cl:o=16,n=null;break e}throw Error(de(130,t==null?t:typeof t,""))}return e=So(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function gh(t,e,r,n){return t=So(7,t,n,e),t.lanes=r,t}function yv(t,e,r,n){return t=So(22,t,n,e),t.elementType=U$,t.lanes=r,t.stateNode={isHidden:!1},t}function Z2(t,e,r){return t=So(6,t,null,e),t.lanes=r,t}function J2(t,e,r){return e=So(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XF(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=P2(0),this.expirationTimes=P2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=P2(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Jx(t,e,r,n,i,s,o,a,c){return t=new XF(t,e,r,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=So(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rx(s),t}function ez(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yf,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function $O(t){if(!t)return du;t=t._reactInternals;e:{if(qh(t)!==t||t.tag!==1)throw Error(de(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ss(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(de(171))}if(t.tag===1){var r=t.type;if(Ss(r))return $P(t,r,e)}return e}function PO(t,e,r,n,i,s,o,a,c){return t=Jx(r,n,!0,t,i,s,o,a,c),t.context=$O(null),r=t.current,n=ts(),i=nu(r),s=zc(n,i),s.callback=e??null,tu(r,s,i),t.current.lanes=i,Wm(t,i,n),xs(t,n),t}function wv(t,e,r,n){var i=e.current,s=ts(),o=nu(i);return r=$O(r),e.context===null?e.context=r:e.pendingContext=r,e=zc(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=tu(i,e,o),t!==null&&(na(t,i,o,s),Jw(t,i,o)),o}function db(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function s6(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Xx(t,e){s6(t,e),(t=t.alternate)&&s6(t,e)}function tz(){return null}var OO=typeof reportError=="function"?reportError:function(t){console.error(t)};function eI(t){this._internalRoot=t}bv.prototype.render=eI.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(de(409));wv(t,e,null,null)};bv.prototype.unmount=eI.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Nh(function(){wv(null,t,null,null)}),e[Vc]=null}};function bv(t){this._internalRoot=t}bv.prototype.unstable_scheduleHydration=function(t){if(t){var e=uP();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Rl.length&&e!==0&&e<Rl[r].priority;r++);Rl.splice(r,0,t),r===0&&dP(t)}};function tI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function o6(){}function rz(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var l=db(o);s.call(l)}}var o=PO(e,n,t,0,null,!1,!1,"",o6);return t._reactRootContainer=o,t[Vc]=o.current,qg(t.nodeType===8?t.parentNode:t),Nh(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var l=db(c);a.call(l)}}var c=Jx(t,0,!1,null,null,!1,!1,"",o6);return t._reactRootContainer=c,t[Vc]=c.current,qg(t.nodeType===8?t.parentNode:t),Nh(function(){wv(e,c,r,n)}),c}function Ev(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=db(o);a.call(c)}}wv(e,o,t,i)}else o=rz(r,e,t,i,n);return db(o)}cP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Y0(e.pendingLanes);r!==0&&(vx(e,r|1),xs(e,pn()),!(At&6)&&(sp=pn()+500,wu()))}break;case 13:Nh(function(){var n=Gc(t,1);if(n!==null){var i=ts();na(n,t,1,i)}}),Xx(t,1)}};Ex=function(t){if(t.tag===13){var e=Gc(t,134217728);if(e!==null){var r=ts();na(e,t,134217728,r)}Xx(t,134217728)}};lP=function(t){if(t.tag===13){var e=nu(t),r=Gc(t,e);if(r!==null){var n=ts();na(r,t,e,n)}Xx(t,e)}};uP=function(){return er};hP=function(t,e){var r=er;try{return er=t,e()}finally{er=r}};m_=function(t,e,r){switch(e){case"input":if(l_(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=hv(n);if(!i)throw Error(de(90));z$(n),l_(n,i)}}}break;case"textarea":W$(t,r);break;case"select":e=r.value,e!=null&&Bf(t,!!r.multiple,e,!1)}};Z$=Gx;J$=Nh;var nz={usingClientEntryPoint:!1,Events:[Km,_f,hv,Y$,Q$,Gx]},f0={findFiberByHostInstance:Xu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iz={bundleType:f0.bundleType,version:f0.version,rendererPackageName:f0.rendererPackageName,rendererConfig:f0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tP(t),t===null?null:t.stateNode},findFiberByHostInstance:f0.findFiberByHostInstance||tz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qy.isDisabled&&Qy.supportsFiber)try{av=Qy.inject(iz),Pa=Qy}catch{}}Zs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nz;Zs.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tI(e))throw Error(de(200));return ez(t,e,null,r)};Zs.createRoot=function(t,e){if(!tI(t))throw Error(de(299));var r=!1,n="",i=OO;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Jx(t,1,!1,null,null,r,!1,n,i),t[Vc]=e.current,qg(t.nodeType===8?t.parentNode:t),new eI(e)};Zs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(de(188)):(t=Object.keys(t).join(","),Error(de(268,t)));return t=tP(e),t=t===null?null:t.stateNode,t};Zs.flushSync=function(t){return Nh(t)};Zs.hydrate=function(t,e,r){if(!vv(e))throw Error(de(200));return Ev(null,t,e,!0,r)};Zs.hydrateRoot=function(t,e,r){if(!tI(t))throw Error(de(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=OO;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=PO(e,null,t,1,r??null,i,!1,s,o),t[Vc]=e.current,qg(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new bv(e)};Zs.render=function(t,e,r){if(!vv(e))throw Error(de(200));return Ev(null,t,e,!1,r)};Zs.unmountComponentAtNode=function(t){if(!vv(t))throw Error(de(40));return t._reactRootContainer?(Nh(function(){Ev(null,null,t,!1,function(){t._reactRootContainer=null,t[Vc]=null})}),!0):!1};Zs.unstable_batchedUpdates=Gx;Zs.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!vv(r))throw Error(de(200));if(t==null||t._reactInternals===void 0)throw Error(de(38));return Ev(t,e,r,!1,n)};Zs.version="18.3.1-next-f1338f8080-20240426";function kO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kO)}catch(t){console.error(t)}}kO(),k$.exports=Zs;var RO=k$.exports,DO,a6=RO;DO=a6.createRoot,a6.hydrateRoot;var Xe={},_v={};_v.byteLength=az;_v.toByteArray=lz;_v.fromByteArray=dz;var Ma=[],wo=[],sz=typeof Uint8Array<"u"?Uint8Array:Array,X2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var dd=0,oz=X2.length;dd<oz;++dd)Ma[dd]=X2[dd],wo[X2.charCodeAt(dd)]=dd;wo[45]=62;wo[95]=63;function LO(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function az(t){var e=LO(t),r=e[0],n=e[1];return(r+n)*3/4-n}function cz(t,e,r){return(e+r)*3/4-r}function lz(t){var e,r=LO(t),n=r[0],i=r[1],s=new sz(cz(t,n,i)),o=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=wo[t.charCodeAt(c)]<<18|wo[t.charCodeAt(c+1)]<<12|wo[t.charCodeAt(c+2)]<<6|wo[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=wo[t.charCodeAt(c)]<<2|wo[t.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=wo[t.charCodeAt(c)]<<10|wo[t.charCodeAt(c+1)]<<4|wo[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function uz(t){return Ma[t>>18&63]+Ma[t>>12&63]+Ma[t>>6&63]+Ma[t&63]}function hz(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(uz(n));return i.join("")}function dz(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(hz(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(Ma[e>>2]+Ma[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Ma[e>>10]+Ma[e>>4&63]+Ma[e<<2&63]+"=")),i.join("")}var rI={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */rI.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,l=c>>1,u=-7,h=r?i-1:0,d=r?-1:1,g=t[e+h];for(h+=d,s=g&(1<<-u)-1,g>>=-u,u+=a;u>0;s=s*256+t[e+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=o*256+t[e+h],h+=d,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(g?-1:1)*o*Math.pow(2,s-n)};rI.write=function(t,e,r,n,i,s){var o,a,c,l=s*8-i-1,u=(1<<l)-1,h=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:s-1,m=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=d/c:e+=d*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*c-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+g]=a&255,g+=m,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[r+g]=o&255,g+=m,o/=256,l-=8);t[r+g-m]|=v*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=_v,r=rI,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=S,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const U=new Uint8Array(1),P={foo:function(){return 42}};return Object.setPrototypeOf(P,Uint8Array.prototype),Object.setPrototypeOf(U,P),U.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(U){if(U>i)throw new RangeError('The value "'+U+'" is invalid for option "size"');const P=new Uint8Array(U);return Object.setPrototypeOf(P,a.prototype),P}function a(U,P,O){if(typeof U=="number"){if(typeof P=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(U)}return c(U,P,O)}a.poolSize=8192;function c(U,P,O){if(typeof U=="string")return d(U,P);if(ArrayBuffer.isView(U))return m(U);if(U==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(ft(U,ArrayBuffer)||U&&ft(U.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ft(U,SharedArrayBuffer)||U&&ft(U.buffer,SharedArrayBuffer)))return v(U,P,O);if(typeof U=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const z=U.valueOf&&U.valueOf();if(z!=null&&z!==U)return a.from(z,P,O);const G=$(U);if(G)return G;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof U[Symbol.toPrimitive]=="function")return a.from(U[Symbol.toPrimitive]("string"),P,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}a.from=function(U,P,O){return c(U,P,O)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(U){if(typeof U!="number")throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function u(U,P,O){return l(U),U<=0?o(U):P!==void 0?typeof O=="string"?o(U).fill(P,O):o(U).fill(P):o(U)}a.alloc=function(U,P,O){return u(U,P,O)};function h(U){return l(U),o(U<0?0:_(U)|0)}a.allocUnsafe=function(U){return h(U)},a.allocUnsafeSlow=function(U){return h(U)};function d(U,P){if((typeof P!="string"||P==="")&&(P="utf8"),!a.isEncoding(P))throw new TypeError("Unknown encoding: "+P);const O=A(U,P)|0;let z=o(O);const G=z.write(U,P);return G!==O&&(z=z.slice(0,G)),z}function g(U){const P=U.length<0?0:_(U.length)|0,O=o(P);for(let z=0;z<P;z+=1)O[z]=U[z]&255;return O}function m(U){if(ft(U,Uint8Array)){const P=new Uint8Array(U);return v(P.buffer,P.byteOffset,P.byteLength)}return g(U)}function v(U,P,O){if(P<0||U.byteLength<P)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<P+(O||0))throw new RangeError('"length" is outside of buffer bounds');let z;return P===void 0&&O===void 0?z=new Uint8Array(U):O===void 0?z=new Uint8Array(U,P):z=new Uint8Array(U,P,O),Object.setPrototypeOf(z,a.prototype),z}function $(U){if(a.isBuffer(U)){const P=_(U.length)|0,O=o(P);return O.length===0||U.copy(O,0,0,P),O}if(U.length!==void 0)return typeof U.length!="number"||Nt(U.length)?o(0):g(U);if(U.type==="Buffer"&&Array.isArray(U.data))return g(U.data)}function _(U){if(U>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return U|0}function S(U){return+U!=U&&(U=0),a.alloc(+U)}a.isBuffer=function(P){return P!=null&&P._isBuffer===!0&&P!==a.prototype},a.compare=function(P,O){if(ft(P,Uint8Array)&&(P=a.from(P,P.offset,P.byteLength)),ft(O,Uint8Array)&&(O=a.from(O,O.offset,O.byteLength)),!a.isBuffer(P)||!a.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(P===O)return 0;let z=P.length,G=O.length;for(let Z=0,ee=Math.min(z,G);Z<ee;++Z)if(P[Z]!==O[Z]){z=P[Z],G=O[Z];break}return z<G?-1:G<z?1:0},a.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(P,O){if(!Array.isArray(P))throw new TypeError('"list" argument must be an Array of Buffers');if(P.length===0)return a.alloc(0);let z;if(O===void 0)for(O=0,z=0;z<P.length;++z)O+=P[z].length;const G=a.allocUnsafe(O);let Z=0;for(z=0;z<P.length;++z){let ee=P[z];if(ft(ee,Uint8Array))Z+ee.length>G.length?(a.isBuffer(ee)||(ee=a.from(ee)),ee.copy(G,Z)):Uint8Array.prototype.set.call(G,ee,Z);else if(a.isBuffer(ee))ee.copy(G,Z);else throw new TypeError('"list" argument must be an Array of Buffers');Z+=ee.length}return G};function A(U,P){if(a.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||ft(U,ArrayBuffer))return U.byteLength;if(typeof U!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);const O=U.length,z=arguments.length>2&&arguments[2]===!0;if(!z&&O===0)return 0;let G=!1;for(;;)switch(P){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return Lt(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O*2;case"hex":return O>>>1;case"base64":return Bt(U).length;default:if(G)return z?-1:Lt(U).length;P=(""+P).toLowerCase(),G=!0}}a.byteLength=A;function T(U,P,O){let z=!1;if((P===void 0||P<0)&&(P=0),P>this.length||((O===void 0||O>this.length)&&(O=this.length),O<=0)||(O>>>=0,P>>>=0,O<=P))return"";for(U||(U="utf8");;)switch(U){case"hex":return x(this,P,O);case"utf8":case"utf-8":return f(this,P,O);case"ascii":return N(this,P,O);case"latin1":case"binary":return M(this,P,O);case"base64":return b(this,P,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,P,O);default:if(z)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),z=!0}}a.prototype._isBuffer=!0;function k(U,P,O){const z=U[P];U[P]=U[O],U[O]=z}a.prototype.swap16=function(){const P=this.length;if(P%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let O=0;O<P;O+=2)k(this,O,O+1);return this},a.prototype.swap32=function(){const P=this.length;if(P%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let O=0;O<P;O+=4)k(this,O,O+3),k(this,O+1,O+2);return this},a.prototype.swap64=function(){const P=this.length;if(P%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let O=0;O<P;O+=8)k(this,O,O+7),k(this,O+1,O+6),k(this,O+2,O+5),k(this,O+3,O+4);return this},a.prototype.toString=function(){const P=this.length;return P===0?"":arguments.length===0?f(this,0,P):T.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(P){if(!a.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P?!0:a.compare(this,P)===0},a.prototype.inspect=function(){let P="";const O=t.INSPECT_MAX_BYTES;return P=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(P+=" ... "),"<Buffer "+P+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(P,O,z,G,Z){if(ft(P,Uint8Array)&&(P=a.from(P,P.offset,P.byteLength)),!a.isBuffer(P))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof P);if(O===void 0&&(O=0),z===void 0&&(z=P?P.length:0),G===void 0&&(G=0),Z===void 0&&(Z=this.length),O<0||z>P.length||G<0||Z>this.length)throw new RangeError("out of range index");if(G>=Z&&O>=z)return 0;if(G>=Z)return-1;if(O>=z)return 1;if(O>>>=0,z>>>=0,G>>>=0,Z>>>=0,this===P)return 0;let ee=Z-G,Ne=z-O;const ze=Math.min(ee,Ne),Se=this.slice(G,Z),We=P.slice(O,z);for(let De=0;De<ze;++De)if(Se[De]!==We[De]){ee=Se[De],Ne=We[De];break}return ee<Ne?-1:Ne<ee?1:0};function R(U,P,O,z,G){if(U.length===0)return-1;if(typeof O=="string"?(z=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),O=+O,Nt(O)&&(O=G?0:U.length-1),O<0&&(O=U.length+O),O>=U.length){if(G)return-1;O=U.length-1}else if(O<0)if(G)O=0;else return-1;if(typeof P=="string"&&(P=a.from(P,z)),a.isBuffer(P))return P.length===0?-1:L(U,P,O,z,G);if(typeof P=="number")return P=P&255,typeof Uint8Array.prototype.indexOf=="function"?G?Uint8Array.prototype.indexOf.call(U,P,O):Uint8Array.prototype.lastIndexOf.call(U,P,O):L(U,[P],O,z,G);throw new TypeError("val must be string, number or Buffer")}function L(U,P,O,z,G){let Z=1,ee=U.length,Ne=P.length;if(z!==void 0&&(z=String(z).toLowerCase(),z==="ucs2"||z==="ucs-2"||z==="utf16le"||z==="utf-16le")){if(U.length<2||P.length<2)return-1;Z=2,ee/=2,Ne/=2,O/=2}function ze(We,De){return Z===1?We[De]:We.readUInt16BE(De*Z)}let Se;if(G){let We=-1;for(Se=O;Se<ee;Se++)if(ze(U,Se)===ze(P,We===-1?0:Se-We)){if(We===-1&&(We=Se),Se-We+1===Ne)return We*Z}else We!==-1&&(Se-=Se-We),We=-1}else for(O+Ne>ee&&(O=ee-Ne),Se=O;Se>=0;Se--){let We=!0;for(let De=0;De<Ne;De++)if(ze(U,Se+De)!==ze(P,De)){We=!1;break}if(We)return Se}return-1}a.prototype.includes=function(P,O,z){return this.indexOf(P,O,z)!==-1},a.prototype.indexOf=function(P,O,z){return R(this,P,O,z,!0)},a.prototype.lastIndexOf=function(P,O,z){return R(this,P,O,z,!1)};function F(U,P,O,z){O=Number(O)||0;const G=U.length-O;z?(z=Number(z),z>G&&(z=G)):z=G;const Z=P.length;z>Z/2&&(z=Z/2);let ee;for(ee=0;ee<z;++ee){const Ne=parseInt(P.substr(ee*2,2),16);if(Nt(Ne))return ee;U[O+ee]=Ne}return ee}function B(U,P,O,z){return Be(Lt(P,U.length-O),U,O,z)}function q(U,P,O,z){return Be(Ye(P),U,O,z)}function D(U,P,O,z){return Be(Bt(P),U,O,z)}function E(U,P,O,z){return Be(Ft(P,U.length-O),U,O,z)}a.prototype.write=function(P,O,z,G){if(O===void 0)G="utf8",z=this.length,O=0;else if(z===void 0&&typeof O=="string")G=O,z=this.length,O=0;else if(isFinite(O))O=O>>>0,isFinite(z)?(z=z>>>0,G===void 0&&(G="utf8")):(G=z,z=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Z=this.length-O;if((z===void 0||z>Z)&&(z=Z),P.length>0&&(z<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");let ee=!1;for(;;)switch(G){case"hex":return F(this,P,O,z);case"utf8":case"utf-8":return B(this,P,O,z);case"ascii":case"latin1":case"binary":return q(this,P,O,z);case"base64":return D(this,P,O,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,P,O,z);default:if(ee)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),ee=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function b(U,P,O){return P===0&&O===U.length?e.fromByteArray(U):e.fromByteArray(U.slice(P,O))}function f(U,P,O){O=Math.min(U.length,O);const z=[];let G=P;for(;G<O;){const Z=U[G];let ee=null,Ne=Z>239?4:Z>223?3:Z>191?2:1;if(G+Ne<=O){let ze,Se,We,De;switch(Ne){case 1:Z<128&&(ee=Z);break;case 2:ze=U[G+1],(ze&192)===128&&(De=(Z&31)<<6|ze&63,De>127&&(ee=De));break;case 3:ze=U[G+1],Se=U[G+2],(ze&192)===128&&(Se&192)===128&&(De=(Z&15)<<12|(ze&63)<<6|Se&63,De>2047&&(De<55296||De>57343)&&(ee=De));break;case 4:ze=U[G+1],Se=U[G+2],We=U[G+3],(ze&192)===128&&(Se&192)===128&&(We&192)===128&&(De=(Z&15)<<18|(ze&63)<<12|(Se&63)<<6|We&63,De>65535&&De<1114112&&(ee=De))}}ee===null?(ee=65533,Ne=1):ee>65535&&(ee-=65536,z.push(ee>>>10&1023|55296),ee=56320|ee&1023),z.push(ee),G+=Ne}return w(z)}const p=4096;function w(U){const P=U.length;if(P<=p)return String.fromCharCode.apply(String,U);let O="",z=0;for(;z<P;)O+=String.fromCharCode.apply(String,U.slice(z,z+=p));return O}function N(U,P,O){let z="";O=Math.min(U.length,O);for(let G=P;G<O;++G)z+=String.fromCharCode(U[G]&127);return z}function M(U,P,O){let z="";O=Math.min(U.length,O);for(let G=P;G<O;++G)z+=String.fromCharCode(U[G]);return z}function x(U,P,O){const z=U.length;(!P||P<0)&&(P=0),(!O||O<0||O>z)&&(O=z);let G="";for(let Z=P;Z<O;++Z)G+=Ve[U[Z]];return G}function y(U,P,O){const z=U.slice(P,O);let G="";for(let Z=0;Z<z.length-1;Z+=2)G+=String.fromCharCode(z[Z]+z[Z+1]*256);return G}a.prototype.slice=function(P,O){const z=this.length;P=~~P,O=O===void 0?z:~~O,P<0?(P+=z,P<0&&(P=0)):P>z&&(P=z),O<0?(O+=z,O<0&&(O=0)):O>z&&(O=z),O<P&&(O=P);const G=this.subarray(P,O);return Object.setPrototypeOf(G,a.prototype),G};function C(U,P,O){if(U%1!==0||U<0)throw new RangeError("offset is not uint");if(U+P>O)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(P,O,z){P=P>>>0,O=O>>>0,z||C(P,O,this.length);let G=this[P],Z=1,ee=0;for(;++ee<O&&(Z*=256);)G+=this[P+ee]*Z;return G},a.prototype.readUintBE=a.prototype.readUIntBE=function(P,O,z){P=P>>>0,O=O>>>0,z||C(P,O,this.length);let G=this[P+--O],Z=1;for(;O>0&&(Z*=256);)G+=this[P+--O]*Z;return G},a.prototype.readUint8=a.prototype.readUInt8=function(P,O){return P=P>>>0,O||C(P,1,this.length),this[P]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(P,O){return P=P>>>0,O||C(P,2,this.length),this[P]|this[P+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(P,O){return P=P>>>0,O||C(P,2,this.length),this[P]<<8|this[P+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(P,O){return P=P>>>0,O||C(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+this[P+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(P,O){return P=P>>>0,O||C(P,4,this.length),this[P]*16777216+(this[P+1]<<16|this[P+2]<<8|this[P+3])},a.prototype.readBigUInt64LE=mt(function(P){P=P>>>0,et(P,"offset");const O=this[P],z=this[P+7];(O===void 0||z===void 0)&&tt(P,this.length-8);const G=O+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24,Z=this[++P]+this[++P]*2**8+this[++P]*2**16+z*2**24;return BigInt(G)+(BigInt(Z)<<BigInt(32))}),a.prototype.readBigUInt64BE=mt(function(P){P=P>>>0,et(P,"offset");const O=this[P],z=this[P+7];(O===void 0||z===void 0)&&tt(P,this.length-8);const G=O*2**24+this[++P]*2**16+this[++P]*2**8+this[++P],Z=this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+z;return(BigInt(G)<<BigInt(32))+BigInt(Z)}),a.prototype.readIntLE=function(P,O,z){P=P>>>0,O=O>>>0,z||C(P,O,this.length);let G=this[P],Z=1,ee=0;for(;++ee<O&&(Z*=256);)G+=this[P+ee]*Z;return Z*=128,G>=Z&&(G-=Math.pow(2,8*O)),G},a.prototype.readIntBE=function(P,O,z){P=P>>>0,O=O>>>0,z||C(P,O,this.length);let G=O,Z=1,ee=this[P+--G];for(;G>0&&(Z*=256);)ee+=this[P+--G]*Z;return Z*=128,ee>=Z&&(ee-=Math.pow(2,8*O)),ee},a.prototype.readInt8=function(P,O){return P=P>>>0,O||C(P,1,this.length),this[P]&128?(255-this[P]+1)*-1:this[P]},a.prototype.readInt16LE=function(P,O){P=P>>>0,O||C(P,2,this.length);const z=this[P]|this[P+1]<<8;return z&32768?z|4294901760:z},a.prototype.readInt16BE=function(P,O){P=P>>>0,O||C(P,2,this.length);const z=this[P+1]|this[P]<<8;return z&32768?z|4294901760:z},a.prototype.readInt32LE=function(P,O){return P=P>>>0,O||C(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},a.prototype.readInt32BE=function(P,O){return P=P>>>0,O||C(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},a.prototype.readBigInt64LE=mt(function(P){P=P>>>0,et(P,"offset");const O=this[P],z=this[P+7];(O===void 0||z===void 0)&&tt(P,this.length-8);const G=this[P+4]+this[P+5]*2**8+this[P+6]*2**16+(z<<24);return(BigInt(G)<<BigInt(32))+BigInt(O+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24)}),a.prototype.readBigInt64BE=mt(function(P){P=P>>>0,et(P,"offset");const O=this[P],z=this[P+7];(O===void 0||z===void 0)&&tt(P,this.length-8);const G=(O<<24)+this[++P]*2**16+this[++P]*2**8+this[++P];return(BigInt(G)<<BigInt(32))+BigInt(this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+z)}),a.prototype.readFloatLE=function(P,O){return P=P>>>0,O||C(P,4,this.length),r.read(this,P,!0,23,4)},a.prototype.readFloatBE=function(P,O){return P=P>>>0,O||C(P,4,this.length),r.read(this,P,!1,23,4)},a.prototype.readDoubleLE=function(P,O){return P=P>>>0,O||C(P,8,this.length),r.read(this,P,!0,52,8)},a.prototype.readDoubleBE=function(P,O){return P=P>>>0,O||C(P,8,this.length),r.read(this,P,!1,52,8)};function I(U,P,O,z,G,Z){if(!a.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(P>G||P<Z)throw new RangeError('"value" argument is out of bounds');if(O+z>U.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(P,O,z,G){if(P=+P,O=O>>>0,z=z>>>0,!G){const Ne=Math.pow(2,8*z)-1;I(this,P,O,z,Ne,0)}let Z=1,ee=0;for(this[O]=P&255;++ee<z&&(Z*=256);)this[O+ee]=P/Z&255;return O+z},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(P,O,z,G){if(P=+P,O=O>>>0,z=z>>>0,!G){const Ne=Math.pow(2,8*z)-1;I(this,P,O,z,Ne,0)}let Z=z-1,ee=1;for(this[O+Z]=P&255;--Z>=0&&(ee*=256);)this[O+Z]=P/ee&255;return O+z},a.prototype.writeUint8=a.prototype.writeUInt8=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,1,255,0),this[O]=P&255,O+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,2,65535,0),this[O]=P&255,this[O+1]=P>>>8,O+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,2,65535,0),this[O]=P>>>8,this[O+1]=P&255,O+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,4,4294967295,0),this[O+3]=P>>>24,this[O+2]=P>>>16,this[O+1]=P>>>8,this[O]=P&255,O+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,4,4294967295,0),this[O]=P>>>24,this[O+1]=P>>>16,this[O+2]=P>>>8,this[O+3]=P&255,O+4};function j(U,P,O,z,G){Ce(P,z,G,U,O,7);let Z=Number(P&BigInt(4294967295));U[O++]=Z,Z=Z>>8,U[O++]=Z,Z=Z>>8,U[O++]=Z,Z=Z>>8,U[O++]=Z;let ee=Number(P>>BigInt(32)&BigInt(4294967295));return U[O++]=ee,ee=ee>>8,U[O++]=ee,ee=ee>>8,U[O++]=ee,ee=ee>>8,U[O++]=ee,O}function K(U,P,O,z,G){Ce(P,z,G,U,O,7);let Z=Number(P&BigInt(4294967295));U[O+7]=Z,Z=Z>>8,U[O+6]=Z,Z=Z>>8,U[O+5]=Z,Z=Z>>8,U[O+4]=Z;let ee=Number(P>>BigInt(32)&BigInt(4294967295));return U[O+3]=ee,ee=ee>>8,U[O+2]=ee,ee=ee>>8,U[O+1]=ee,ee=ee>>8,U[O]=ee,O+8}a.prototype.writeBigUInt64LE=mt(function(P,O=0){return j(this,P,O,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=mt(function(P,O=0){return K(this,P,O,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(P,O,z,G){if(P=+P,O=O>>>0,!G){const ze=Math.pow(2,8*z-1);I(this,P,O,z,ze-1,-ze)}let Z=0,ee=1,Ne=0;for(this[O]=P&255;++Z<z&&(ee*=256);)P<0&&Ne===0&&this[O+Z-1]!==0&&(Ne=1),this[O+Z]=(P/ee>>0)-Ne&255;return O+z},a.prototype.writeIntBE=function(P,O,z,G){if(P=+P,O=O>>>0,!G){const ze=Math.pow(2,8*z-1);I(this,P,O,z,ze-1,-ze)}let Z=z-1,ee=1,Ne=0;for(this[O+Z]=P&255;--Z>=0&&(ee*=256);)P<0&&Ne===0&&this[O+Z+1]!==0&&(Ne=1),this[O+Z]=(P/ee>>0)-Ne&255;return O+z},a.prototype.writeInt8=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,1,127,-128),P<0&&(P=255+P+1),this[O]=P&255,O+1},a.prototype.writeInt16LE=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,2,32767,-32768),this[O]=P&255,this[O+1]=P>>>8,O+2},a.prototype.writeInt16BE=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,2,32767,-32768),this[O]=P>>>8,this[O+1]=P&255,O+2},a.prototype.writeInt32LE=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,4,2147483647,-2147483648),this[O]=P&255,this[O+1]=P>>>8,this[O+2]=P>>>16,this[O+3]=P>>>24,O+4},a.prototype.writeInt32BE=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),this[O]=P>>>24,this[O+1]=P>>>16,this[O+2]=P>>>8,this[O+3]=P&255,O+4},a.prototype.writeBigInt64LE=mt(function(P,O=0){return j(this,P,O,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=mt(function(P,O=0){return K(this,P,O,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function V(U,P,O,z,G,Z){if(O+z>U.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function te(U,P,O,z,G){return P=+P,O=O>>>0,G||V(U,P,O,4),r.write(U,P,O,z,23,4),O+4}a.prototype.writeFloatLE=function(P,O,z){return te(this,P,O,!0,z)},a.prototype.writeFloatBE=function(P,O,z){return te(this,P,O,!1,z)};function se(U,P,O,z,G){return P=+P,O=O>>>0,G||V(U,P,O,8),r.write(U,P,O,z,52,8),O+8}a.prototype.writeDoubleLE=function(P,O,z){return se(this,P,O,!0,z)},a.prototype.writeDoubleBE=function(P,O,z){return se(this,P,O,!1,z)},a.prototype.copy=function(P,O,z,G){if(!a.isBuffer(P))throw new TypeError("argument should be a Buffer");if(z||(z=0),!G&&G!==0&&(G=this.length),O>=P.length&&(O=P.length),O||(O=0),G>0&&G<z&&(G=z),G===z||P.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),P.length-O<G-z&&(G=P.length-O+z);const Z=G-z;return this===P&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(O,z,G):Uint8Array.prototype.set.call(P,this.subarray(z,G),O),Z},a.prototype.fill=function(P,O,z,G){if(typeof P=="string"){if(typeof O=="string"?(G=O,O=0,z=this.length):typeof z=="string"&&(G=z,z=this.length),G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!a.isEncoding(G))throw new TypeError("Unknown encoding: "+G);if(P.length===1){const ee=P.charCodeAt(0);(G==="utf8"&&ee<128||G==="latin1")&&(P=ee)}}else typeof P=="number"?P=P&255:typeof P=="boolean"&&(P=Number(P));if(O<0||this.length<O||this.length<z)throw new RangeError("Out of range index");if(z<=O)return this;O=O>>>0,z=z===void 0?this.length:z>>>0,P||(P=0);let Z;if(typeof P=="number")for(Z=O;Z<z;++Z)this[Z]=P;else{const ee=a.isBuffer(P)?P:a.from(P,G),Ne=ee.length;if(Ne===0)throw new TypeError('The value "'+P+'" is invalid for argument "value"');for(Z=0;Z<z-O;++Z)this[Z+O]=ee[Z%Ne]}return this};const ce={};function ie(U,P,O){ce[U]=class extends O{constructor(){super(),Object.defineProperty(this,"message",{value:P.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${U}]`,this.stack,delete this.name}get code(){return U}set code(G){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:G,writable:!0})}toString(){return`${this.name} [${U}]: ${this.message}`}}}ie("ERR_BUFFER_OUT_OF_BOUNDS",function(U){return U?`${U} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function(U,P){return`The "${U}" argument must be of type number. Received type ${typeof P}`},TypeError),ie("ERR_OUT_OF_RANGE",function(U,P,O){let z=`The value of "${U}" is out of range.`,G=O;return Number.isInteger(O)&&Math.abs(O)>2**32?G=ve(String(O)):typeof O=="bigint"&&(G=String(O),(O>BigInt(2)**BigInt(32)||O<-(BigInt(2)**BigInt(32)))&&(G=ve(G)),G+="n"),z+=` It must be ${P}. Received ${G}`,z},RangeError);function ve(U){let P="",O=U.length;const z=U[0]==="-"?1:0;for(;O>=z+4;O-=3)P=`_${U.slice(O-3,O)}${P}`;return`${U.slice(0,O)}${P}`}function Me(U,P,O){et(P,"offset"),(U[P]===void 0||U[P+O]===void 0)&&tt(P,U.length-(O+1))}function Ce(U,P,O,z,G,Z){if(U>O||U<P){const ee=typeof P=="bigint"?"n":"";let Ne;throw P===0||P===BigInt(0)?Ne=`>= 0${ee} and < 2${ee} ** ${(Z+1)*8}${ee}`:Ne=`>= -(2${ee} ** ${(Z+1)*8-1}${ee}) and < 2 ** ${(Z+1)*8-1}${ee}`,new ce.ERR_OUT_OF_RANGE("value",Ne,U)}Me(z,G,Z)}function et(U,P){if(typeof U!="number")throw new ce.ERR_INVALID_ARG_TYPE(P,"number",U)}function tt(U,P,O){throw Math.floor(U)!==U?(et(U,O),new ce.ERR_OUT_OF_RANGE("offset","an integer",U)):P<0?new ce.ERR_BUFFER_OUT_OF_BOUNDS:new ce.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${P}`,U)}const Fe=/[^+/0-9A-Za-z-_]/g;function Gt(U){if(U=U.split("=")[0],U=U.trim().replace(Fe,""),U.length<2)return"";for(;U.length%4!==0;)U=U+"=";return U}function Lt(U,P){P=P||1/0;let O;const z=U.length;let G=null;const Z=[];for(let ee=0;ee<z;++ee){if(O=U.charCodeAt(ee),O>55295&&O<57344){if(!G){if(O>56319){(P-=3)>-1&&Z.push(239,191,189);continue}else if(ee+1===z){(P-=3)>-1&&Z.push(239,191,189);continue}G=O;continue}if(O<56320){(P-=3)>-1&&Z.push(239,191,189),G=O;continue}O=(G-55296<<10|O-56320)+65536}else G&&(P-=3)>-1&&Z.push(239,191,189);if(G=null,O<128){if((P-=1)<0)break;Z.push(O)}else if(O<2048){if((P-=2)<0)break;Z.push(O>>6|192,O&63|128)}else if(O<65536){if((P-=3)<0)break;Z.push(O>>12|224,O>>6&63|128,O&63|128)}else if(O<1114112){if((P-=4)<0)break;Z.push(O>>18|240,O>>12&63|128,O>>6&63|128,O&63|128)}else throw new Error("Invalid code point")}return Z}function Ye(U){const P=[];for(let O=0;O<U.length;++O)P.push(U.charCodeAt(O)&255);return P}function Ft(U,P){let O,z,G;const Z=[];for(let ee=0;ee<U.length&&!((P-=2)<0);++ee)O=U.charCodeAt(ee),z=O>>8,G=O%256,Z.push(G),Z.push(z);return Z}function Bt(U){return e.toByteArray(Gt(U))}function Be(U,P,O,z){let G;for(G=0;G<z&&!(G+O>=P.length||G>=U.length);++G)P[G+O]=U[G];return G}function ft(U,P){return U instanceof P||U!=null&&U.constructor!=null&&U.constructor.name!=null&&U.constructor.name===P.name}function Nt(U){return U!==U}const Ve=function(){const U="0123456789abcdef",P=new Array(256);for(let O=0;O<16;++O){const z=O*16;for(let G=0;G<16;++G)P[z+G]=U[O]+U[G]}return P}();function mt(U){return typeof BigInt>"u"?zt:U}function zt(){throw new Error("BigInt not supported")}})(Xe);const fd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Gm(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Y_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Wh(t,...e){if(!Gm(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function BO(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Y_(t.outputLen),Y_(t.blockLen)}function fb(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function fz(t,e){Wh(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function op(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function eE(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function pa(t,e){return t<<32-e|t>>>e}const jO=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",pz=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function mh(t){if(Wh(t),jO)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=pz[t[r]];return e}const fc={_0:48,_9:57,A:65,F:70,a:97,f:102};function c6(t){if(t>=fc._0&&t<=fc._9)return t-fc._0;if(t>=fc.A&&t<=fc.F)return t-(fc.A-10);if(t>=fc.a&&t<=fc.f)return t-(fc.a-10)}function pb(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(jO)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=c6(t.charCodeAt(s)),a=c6(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function gz(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function nI(t){return typeof t=="string"&&(t=gz(t)),Wh(t),t}function Ta(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Wh(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}let UO=class{};function FO(t){const e=n=>t().update(nI(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function iI(t=32){if(fd&&typeof fd.getRandomValues=="function")return fd.getRandomValues(new Uint8Array(t));if(fd&&typeof fd.randomBytes=="function")return Uint8Array.from(fd.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function mz(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function yz(t,e,r){return t&e^~t&r}function wz(t,e,r){return t&e^t&r^e&r}class zO extends UO{constructor(e,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=eE(this.buffer)}update(e){fb(this),e=nI(e),Wh(e);const{view:r,buffer:n,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=eE(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){fb(this),fz(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,op(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;mz(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=eE(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const ll=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$i=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Zy=BigInt(2**32-1),l6=BigInt(32);function bz(t,e=!1){return e?{h:Number(t&Zy),l:Number(t>>l6&Zy)}:{h:Number(t>>l6&Zy)|0,l:Number(t&Zy)|0}}function vz(t,e=!1){const r=t.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let s=0;s<r;s++){const{h:o,l:a}=bz(t[s],e);[n[s],i[s]]=[o,a]}return[n,i]}const u6=(t,e,r)=>t>>>r,h6=(t,e,r)=>t<<32-r|e>>>r,pd=(t,e,r)=>t>>>r|e<<32-r,gd=(t,e,r)=>t<<32-r|e>>>r,Jy=(t,e,r)=>t<<64-r|e>>>r-32,Xy=(t,e,r)=>t>>>r-32|e<<64-r;function pc(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const Ez=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),_z=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Sz=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),xz=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,Iz=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Az=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,Cz=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ul=new Uint32Array(64);let Nz=class extends zO{constructor(e=32){super(64,e,8,!1),this.A=ll[0]|0,this.B=ll[1]|0,this.C=ll[2]|0,this.D=ll[3]|0,this.E=ll[4]|0,this.F=ll[5]|0,this.G=ll[6]|0,this.H=ll[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,r,n,i,s,o,a,c]}set(e,r,n,i,s,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)ul[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=ul[h-15],g=ul[h-2],m=pa(d,7)^pa(d,18)^d>>>3,v=pa(g,17)^pa(g,19)^g>>>10;ul[h]=v+ul[h-7]+m+ul[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=pa(a,6)^pa(a,11)^pa(a,25),g=u+d+yz(a,c,l)+Cz[h]+ul[h]|0,v=(pa(n,2)^pa(n,13)^pa(n,22))+wz(n,i,s)|0;u=l,l=c,c=a,a=o+g|0,o=s,s=i,i=n,n=g+v|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){op(ul)}destroy(){this.set(0,0,0,0,0,0,0,0),op(this.buffer)}};const qO=vz(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Mz=qO[0],Tz=qO[1],hl=new Uint32Array(80),dl=new Uint32Array(80);let $z=class extends zO{constructor(e=64){super(128,e,16,!1),this.Ah=$i[0]|0,this.Al=$i[1]|0,this.Bh=$i[2]|0,this.Bl=$i[3]|0,this.Ch=$i[4]|0,this.Cl=$i[5]|0,this.Dh=$i[6]|0,this.Dl=$i[7]|0,this.Eh=$i[8]|0,this.El=$i[9]|0,this.Fh=$i[10]|0,this.Fl=$i[11]|0,this.Gh=$i[12]|0,this.Gl=$i[13]|0,this.Hh=$i[14]|0,this.Hl=$i[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:d,Gh:g,Gl:m,Hh:v,Hl:$}=this;return[e,r,n,i,s,o,a,c,l,u,h,d,g,m,v,$]}set(e,r,n,i,s,o,a,c,l,u,h,d,g,m,v,$){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=d|0,this.Gh=g|0,this.Gl=m|0,this.Hh=v|0,this.Hl=$|0}process(e,r){for(let A=0;A<16;A++,r+=4)hl[A]=e.getUint32(r),dl[A]=e.getUint32(r+=4);for(let A=16;A<80;A++){const T=hl[A-15]|0,k=dl[A-15]|0,R=pd(T,k,1)^pd(T,k,8)^u6(T,k,7),L=gd(T,k,1)^gd(T,k,8)^h6(T,k,7),F=hl[A-2]|0,B=dl[A-2]|0,q=pd(F,B,19)^Jy(F,B,61)^u6(F,B,6),D=gd(F,B,19)^Xy(F,B,61)^h6(F,B,6),E=Sz(L,D,dl[A-7],dl[A-16]),b=xz(E,R,q,hl[A-7],hl[A-16]);hl[A]=b|0,dl[A]=E|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:d,Fh:g,Fl:m,Gh:v,Gl:$,Hh:_,Hl:S}=this;for(let A=0;A<80;A++){const T=pd(h,d,14)^pd(h,d,18)^Jy(h,d,41),k=gd(h,d,14)^gd(h,d,18)^Xy(h,d,41),R=h&g^~h&v,L=d&m^~d&$,F=Iz(S,k,L,Tz[A],dl[A]),B=Az(F,_,T,R,Mz[A],hl[A]),q=F|0,D=pd(n,i,28)^Jy(n,i,34)^Jy(n,i,39),E=gd(n,i,28)^Xy(n,i,34)^Xy(n,i,39),b=n&s^n&a^s&a,f=i&o^i&c^o&c;_=v|0,S=$|0,v=g|0,$=m|0,g=h|0,m=d|0,{h,l:d}=pc(l|0,u|0,B|0,q|0),l=a|0,u=c|0,a=s|0,c=o|0,s=n|0,o=i|0;const p=Ez(q,E,f);n=_z(p,B,D,b),i=p|0}({h:n,l:i}=pc(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=pc(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=pc(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=pc(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:d}=pc(this.Eh|0,this.El|0,h|0,d|0),{h:g,l:m}=pc(this.Fh|0,this.Fl|0,g|0,m|0),{h:v,l:$}=pc(this.Gh|0,this.Gl|0,v|0,$|0),{h:_,l:S}=pc(this.Hh|0,this.Hl|0,_|0,S|0),this.set(n,i,s,o,a,c,l,u,h,d,g,m,v,$,_,S)}roundClean(){op(hl,dl)}destroy(){op(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const WO=FO(()=>new Nz),Pz=FO(()=>new $z);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sI=BigInt(0),Q_=BigInt(1);function Mh(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function ea(t,e,r=""){const n=Gm(t),i=t==null?void 0:t.length,s=e!==void 0;if(!n||s&&i!==e){const o=r&&`"${r}" `,a=s?` of length ${e}`:"",c=n?`length=${i}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function ew(t){const e=t.toString(16);return e.length&1?"0"+e:e}function HO(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?sI:BigInt("0x"+t)}function Sv(t){return HO(mh(t))}function Jg(t){return Wh(t),HO(mh(Uint8Array.from(t).reverse()))}function oI(t,e){return pb(t.toString(16).padStart(e*2,"0"))}function KO(t,e){return oI(t,e).reverse()}function an(t,e,r){let n;if(typeof e=="string")try{n=pb(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Gm(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function d6(t){return Uint8Array.from(t)}const tE=t=>typeof t=="bigint"&&sI<=t;function Oz(t,e,r){return tE(t)&&tE(e)&&tE(r)&&e<=t&&t<r}function Z_(t,e,r,n){if(!Oz(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function VO(t){let e;for(e=0;t>sI;t>>=Q_,e+=1);return e}const Ym=t=>(Q_<<BigInt(t))-Q_;function kz(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=g=>new Uint8Array(g),i=g=>Uint8Array.of(g);let s=n(t),o=n(t),a=0;const c=()=>{s.fill(1),o.fill(0),a=0},l=(...g)=>r(o,s,...g),u=(g=n(0))=>{o=l(i(0),g),s=l(),g.length!==0&&(o=l(i(1),g),s=l())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const m=[];for(;g<e;){s=l();const v=s.slice();m.push(v),g+=s.length}return Ta(...m)};return(g,m)=>{c(),u(g);let v;for(;!(v=m(h()));)u();return c(),v}}function Qm(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(i,s,o){const a=t[i];if(o&&a===void 0)return;const c=typeof a;if(c!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${c}`)}Object.entries(e).forEach(([i,s])=>n(i,s,!1)),Object.entries(r).forEach(([i,s])=>n(i,s,!0))}function gb(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vs=BigInt(0),vi=BigInt(1),rh=BigInt(2),GO=BigInt(3),YO=BigInt(4),QO=BigInt(5),Rz=BigInt(7),ZO=BigInt(8),Dz=BigInt(9),JO=BigInt(16);function _n(t,e){const r=t%e;return r>=vs?r:e+r}function on(t,e,r){let n=t;for(;e-- >vs;)n*=n,n%=r;return n}function f6(t,e){if(t===vs)throw new Error("invert: expected non-zero number");if(e<=vs)throw new Error("invert: expected positive modulus, got "+e);let r=_n(t,e),n=e,i=vs,s=vi;for(;r!==vs;){const a=n/r,c=n%r,l=i-s*a;n=r,r=c,i=s,s=l}if(n!==vi)throw new Error("invert: does not exist");return _n(i,e)}function aI(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function XO(t,e){const r=(t.ORDER+vi)/YO,n=t.pow(e,r);return aI(t,n,e),n}function Lz(t,e){const r=(t.ORDER-QO)/ZO,n=t.mul(e,rh),i=t.pow(n,r),s=t.mul(e,i),o=t.mul(t.mul(s,rh),i),a=t.mul(s,t.sub(o,t.ONE));return aI(t,a,e),a}function Bz(t){const e=Hh(t),r=e9(t),n=r(e,e.neg(e.ONE)),i=r(e,n),s=r(e,e.neg(n)),o=(t+Rz)/JO;return(a,c)=>{let l=a.pow(c,o),u=a.mul(l,n);const h=a.mul(l,i),d=a.mul(l,s),g=a.eql(a.sqr(u),c),m=a.eql(a.sqr(h),c);l=a.cmov(l,u,g),u=a.cmov(d,h,m);const v=a.eql(a.sqr(u),c),$=a.cmov(l,u,v);return aI(a,$,c),$}}function e9(t){if(t<GO)throw new Error("sqrt is not defined for small field");let e=t-vi,r=0;for(;e%rh===vs;)e/=rh,r++;let n=rh;const i=Hh(t);for(;p6(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return XO;let s=i.pow(n,e);const o=(e+vi)/rh;return function(c,l){if(c.is0(l))return l;if(p6(c,l)!==1)throw new Error("Cannot find square root");let u=r,h=c.mul(c.ONE,s),d=c.pow(l,e),g=c.pow(l,o);for(;!c.eql(d,c.ONE);){if(c.is0(d))return c.ZERO;let m=1,v=c.sqr(d);for(;!c.eql(v,c.ONE);)if(m++,v=c.sqr(v),m===u)throw new Error("Cannot find square root");const $=vi<<BigInt(u-m-1),_=c.pow(h,$);u=m,h=c.sqr(_),d=c.mul(d,h),g=c.mul(g,_)}return g}}function jz(t){return t%YO===GO?XO:t%ZO===QO?Lz:t%JO===Dz?Bz(t):e9(t)}const Uz=(t,e)=>(_n(t,e)&vi)===vi,Fz=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function zz(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=Fz.reduce((n,i)=>(n[i]="function",n),e);return Qm(t,r),t}function qz(t,e,r){if(r<vs)throw new Error("invalid exponent, negatives unsupported");if(r===vs)return t.ONE;if(r===vi)return e;let n=t.ONE,i=e;for(;r>vs;)r&vi&&(n=t.mul(n,i)),i=t.sqr(i),r>>=vi;return n}function t9(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((o,a,c)=>t.is0(a)?o:(n[c]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,c)=>t.is0(a)?o:(n[c]=t.mul(o,n[c]),t.mul(o,a)),s),n}function p6(t,e){const r=(t.ORDER-vi)/rh,n=t.pow(e,r),i=t.eql(n,t.ONE),s=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function r9(t,e){e!==void 0&&Y_(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Hh(t,e,r=!1,n={}){if(t<=vs)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s,o=!1,a;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const d=e;d.BITS&&(i=d.BITS),d.sqrt&&(s=d.sqrt),typeof d.isLE=="boolean"&&(r=d.isLE),typeof d.modFromBytes=="boolean"&&(o=d.modFromBytes),a=d.allowedLengths}else typeof e=="number"&&(i=e),n.sqrt&&(s=n.sqrt);const{nBitLength:c,nByteLength:l}=r9(t,i);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const h=Object.freeze({ORDER:t,isLE:r,BITS:c,BYTES:l,MASK:Ym(c),ZERO:vs,ONE:vi,allowedLengths:a,create:d=>_n(d,t),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return vs<=d&&d<t},is0:d=>d===vs,isValidNot0:d=>!h.is0(d)&&h.isValid(d),isOdd:d=>(d&vi)===vi,neg:d=>_n(-d,t),eql:(d,g)=>d===g,sqr:d=>_n(d*d,t),add:(d,g)=>_n(d+g,t),sub:(d,g)=>_n(d-g,t),mul:(d,g)=>_n(d*g,t),pow:(d,g)=>qz(h,d,g),div:(d,g)=>_n(d*f6(g,t),t),sqrN:d=>d*d,addN:(d,g)=>d+g,subN:(d,g)=>d-g,mulN:(d,g)=>d*g,inv:d=>f6(d,t),sqrt:s||(d=>(u||(u=jz(t)),u(h,d))),toBytes:d=>r?KO(d,l):oI(d,l),fromBytes:(d,g=!0)=>{if(a){if(!a.includes(d.length)||d.length>l)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+d.length);const v=new Uint8Array(l);v.set(d,r?0:v.length-d.length),d=v}if(d.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+d.length);let m=r?Jg(d):Sv(d);if(o&&(m=_n(m,t)),!g&&!h.isValid(m))throw new Error("invalid field element: outside of range 0..ORDER");return m},invertBatch:d=>t9(h,d),cmov:(d,g,m)=>m?g:d});return Object.freeze(h)}function n9(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function i9(t){const e=n9(t);return e+Math.ceil(e/2)}function Wz(t,e,r=!1){const n=t.length,i=n9(e),s=i9(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?Jg(t):Sv(t),a=_n(o,e-vi)+vi;return r?KO(a,i):oI(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ap=BigInt(0),nh=BigInt(1);function mb(t,e){const r=e.negate();return t?r:e}function ih(t,e){const r=t9(t.Fp,e.map(n=>n.Z));return e.map((n,i)=>t.fromAffine(n.toAffine(r[i])))}function s9(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function rE(t,e){s9(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,s=Ym(t),o=BigInt(t);return{windows:r,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function g6(t,e,r){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=r;let a=Number(t&i),c=t>>o;a>n&&(a-=s,c+=nh);const l=e*n,u=l+Math.abs(a)-1,h=a===0,d=a<0,g=e%2!==0;return{nextN:c,offset:u,isZero:h,isNeg:d,isNegF:g,offsetF:l}}function Hz(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Kz(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const nE=new WeakMap,o9=new WeakMap;function iE(t){return o9.get(t)||1}function m6(t){if(t!==ap)throw new Error("invalid wNAF")}class a9{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let i=e;for(;r>ap;)r&nh&&(n=n.add(i)),i=i.double(),r>>=nh;return n}precomputeWindow(e,r){const{windows:n,windowSize:i}=rE(r,this.bits),s=[];let o=e,a=o;for(let c=0;c<n;c++){a=o,s.push(a);for(let l=1;l<i;l++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=rE(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:l,isZero:u,isNeg:h,isNegF:d,offsetF:g}=g6(n,a,o);n=c,u?s=s.add(mb(d,r[g])):i=i.add(mb(h,r[l]))}return m6(n),{p:i,f:s}}wNAFUnsafe(e,r,n,i=this.ZERO){const s=rE(e,this.bits);for(let o=0;o<s.windows&&n!==ap;o++){const{nextN:a,offset:c,isZero:l,isNeg:u}=g6(n,o,s);if(n=a,!l){const h=r[c];i=i.add(u?h.negate():h)}}return m6(n),i}getPrecomputes(e,r,n){let i=nE.get(r);return i||(i=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(i=n(i)),nE.set(r,i))),i}cached(e,r,n){const i=iE(e);return this.wNAF(i,this.getPrecomputes(i,e,n),r)}unsafe(e,r,n,i){const s=iE(e);return s===1?this._unsafeLadder(e,r,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),r,i)}createCache(e,r){s9(r,this.bits),o9.set(e,r),nE.delete(e)}hasCache(e){return iE(e)!==1}}function Vz(t,e,r,n){let i=e,s=t.ZERO,o=t.ZERO;for(;r>ap||n>ap;)r&nh&&(s=s.add(i)),n&nh&&(o=o.add(i)),i=i.double(),r>>=nh,n>>=nh;return{p1:s,p2:o}}function c9(t,e,r,n){Hz(r,t),Kz(n,e);const i=r.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=VO(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=Ym(c),u=new Array(Number(l)+1).fill(o),h=Math.floor((e.BITS-1)/c)*c;let d=o;for(let g=h;g>=0;g-=c){u.fill(o);for(let v=0;v<s;v++){const $=n[v],_=Number($>>BigInt(g)&l);u[_]=u[_].add(r[v])}let m=o;for(let v=u.length-1,$=o;v>0;v--)$=$.add(u[v]),m=m.add($);if(d=d.add(m),g!==0)for(let v=0;v<c;v++)d=d.double()}return d}function y6(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return zz(e),e}else return Hh(t,{isLE:r})}function l9(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const l=e[c];if(!(typeof l=="bigint"&&l>ap))throw new Error(`CURVE.${c} must be positive bigint`)}const i=y6(e.p,r.Fp,n),s=y6(e.n,r.Fn,n),a=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const c of a)if(!i.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fl=BigInt(0),Hn=BigInt(1),sE=BigInt(2),Gz=BigInt(8);function Yz(t,e,r,n){const i=t.sqr(r),s=t.sqr(n),o=t.add(t.mul(e.a,i),s),a=t.add(t.ONE,t.mul(e.d,t.mul(i,s)));return t.eql(o,a)}function Qz(t,e={}){const r=l9("edwards",t,e,e.FpFnLE),{Fp:n,Fn:i}=r;let s=r.CURVE;const{h:o}=s;Qm(e,{},{uvRatio:"function"});const a=sE<<BigInt(i.BYTES*8)-Hn,c=$=>n.create($),l=e.uvRatio||(($,_)=>{try{return{isValid:!0,value:n.sqrt(n.div($,_))}}catch{return{isValid:!1,value:fl}}});if(!Yz(n,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function u($,_,S=!1){const A=S?Hn:fl;return Z_("coordinate "+$,_,A,a),_}function h($){if(!($ instanceof m))throw new Error("ExtendedPoint expected")}const d=gb(($,_)=>{const{X:S,Y:A,Z:T}=$,k=$.is0();_==null&&(_=k?Gz:n.inv(T));const R=c(S*_),L=c(A*_),F=n.mul(T,_);if(k)return{x:fl,y:Hn};if(F!==Hn)throw new Error("invZ was invalid");return{x:R,y:L}}),g=gb($=>{const{a:_,d:S}=s;if($.is0())throw new Error("bad point: ZERO");const{X:A,Y:T,Z:k,T:R}=$,L=c(A*A),F=c(T*T),B=c(k*k),q=c(B*B),D=c(L*_),E=c(B*c(D+F)),b=c(q+c(S*c(L*F)));if(E!==b)throw new Error("bad point: equation left != right (1)");const f=c(A*T),p=c(k*R);if(f!==p)throw new Error("bad point: equation left != right (2)");return!0});class m{constructor(_,S,A,T){this.X=u("x",_),this.Y=u("y",S),this.Z=u("z",A,!0),this.T=u("t",T),Object.freeze(this)}static CURVE(){return s}static fromAffine(_){if(_ instanceof m)throw new Error("extended point not allowed");const{x:S,y:A}=_||{};return u("x",S),u("y",A),new m(S,A,Hn,c(S*A))}static fromBytes(_,S=!1){const A=n.BYTES,{a:T,d:k}=s;_=d6(ea(_,A,"point")),Mh(S,"zip215");const R=d6(_),L=_[A-1];R[A-1]=L&-129;const F=Jg(R),B=S?a:n.ORDER;Z_("point.y",F,fl,B);const q=c(F*F),D=c(q-Hn),E=c(k*q-T);let{isValid:b,value:f}=l(D,E);if(!b)throw new Error("bad point: invalid y coordinate");const p=(f&Hn)===Hn,w=(L&128)!==0;if(!S&&f===fl&&w)throw new Error("bad point: x=0 and x_0=1");return w!==p&&(f=c(-f)),m.fromAffine({x:f,y:F})}static fromHex(_,S=!1){return m.fromBytes(an("point",_),S)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(_=8,S=!0){return v.createCache(this,_),S||this.multiply(sE),this}assertValidity(){g(this)}equals(_){h(_);const{X:S,Y:A,Z:T}=this,{X:k,Y:R,Z:L}=_,F=c(S*L),B=c(k*T),q=c(A*L),D=c(R*T);return F===B&&q===D}is0(){return this.equals(m.ZERO)}negate(){return new m(c(-this.X),this.Y,this.Z,c(-this.T))}double(){const{a:_}=s,{X:S,Y:A,Z:T}=this,k=c(S*S),R=c(A*A),L=c(sE*c(T*T)),F=c(_*k),B=S+A,q=c(c(B*B)-k-R),D=F+R,E=D-L,b=F-R,f=c(q*E),p=c(D*b),w=c(q*b),N=c(E*D);return new m(f,p,N,w)}add(_){h(_);const{a:S,d:A}=s,{X:T,Y:k,Z:R,T:L}=this,{X:F,Y:B,Z:q,T:D}=_,E=c(T*F),b=c(k*B),f=c(L*A*D),p=c(R*q),w=c((T+k)*(F+B)-E-b),N=p-f,M=p+f,x=c(b-S*E),y=c(w*N),C=c(M*x),I=c(w*x),j=c(N*M);return new m(y,C,j,I)}subtract(_){return this.add(_.negate())}multiply(_){if(!i.isValidNot0(_))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:S,f:A}=v.cached(this,_,T=>ih(m,T));return ih(m,[S,A])[0]}multiplyUnsafe(_,S=m.ZERO){if(!i.isValid(_))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return _===fl?m.ZERO:this.is0()||_===Hn?this:v.unsafe(this,_,A=>ih(m,A),S)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return v.unsafe(this,s.n).is0()}toAffine(_){return d(this,_)}clearCofactor(){return o===Hn?this:this.multiplyUnsafe(o)}toBytes(){const{x:_,y:S}=this.toAffine(),A=n.toBytes(S);return A[A.length-1]|=_&Hn?128:0,A}toHex(){return mh(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(_){return ih(m,_)}static msm(_,S){return c9(m,i,_,S)}_setWindowSize(_){this.precompute(_)}toRawBytes(){return this.toBytes()}}m.BASE=new m(s.Gx,s.Gy,Hn,c(s.Gx*s.Gy)),m.ZERO=new m(fl,Hn,Hn,fl),m.Fp=n,m.Fn=i;const v=new a9(m,i.BITS);return m.BASE.precompute(8),m}function Zz(t,e,r={}){if(typeof e!="function")throw new Error('"hash" function param is required');Qm(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=r,{BASE:i,Fp:s,Fn:o}=t,a=r.randomBytes||iI,c=r.adjustScalarBytes||(B=>B),l=r.domain||((B,q,D)=>{if(Mh(D,"phflag"),q.length||D)throw new Error("Contexts/pre-hash are not supported");return B});function u(B){return o.create(Jg(B))}function h(B){const q=A.secretKey;B=an("private key",B,q);const D=an("hashed private key",e(B),2*q),E=c(D.slice(0,q)),b=D.slice(q,2*q),f=u(E);return{head:E,prefix:b,scalar:f}}function d(B){const{head:q,prefix:D,scalar:E}=h(B),b=i.multiply(E),f=b.toBytes();return{head:q,prefix:D,scalar:E,point:b,pointBytes:f}}function g(B){return d(B).pointBytes}function m(B=Uint8Array.of(),...q){const D=Ta(...q);return u(e(l(D,an("context",B),!!n)))}function v(B,q,D={}){B=an("message",B),n&&(B=n(B));const{prefix:E,scalar:b,pointBytes:f}=d(q),p=m(D.context,E,B),w=i.multiply(p).toBytes(),N=m(D.context,w,f,B),M=o.create(p+N*b);if(!o.isValid(M))throw new Error("sign failed: invalid s");const x=Ta(w,o.toBytes(M));return ea(x,A.signature,"result")}const $={zip215:!0};function _(B,q,D,E=$){const{context:b,zip215:f}=E,p=A.signature;B=an("signature",B,p),q=an("message",q),D=an("publicKey",D,A.publicKey),f!==void 0&&Mh(f,"zip215"),n&&(q=n(q));const w=p/2,N=B.subarray(0,w),M=Jg(B.subarray(w,p));let x,y,C;try{x=t.fromBytes(D,f),y=t.fromBytes(N,f),C=i.multiplyUnsafe(M)}catch{return!1}if(!f&&x.isSmallOrder())return!1;const I=m(b,y.toBytes(),x.toBytes(),q);return y.add(x.multiplyUnsafe(I)).subtract(C).clearCofactor().is0()}const S=s.BYTES,A={secretKey:S,publicKey:S,signature:2*S,seed:S};function T(B=a(A.seed)){return ea(B,A.seed,"seed")}function k(B){const q=F.randomSecretKey(B);return{secretKey:q,publicKey:g(q)}}function R(B){return Gm(B)&&B.length===o.BYTES}function L(B,q){try{return!!t.fromBytes(B,q)}catch{return!1}}const F={getExtendedPublicKey:d,randomSecretKey:T,isValidSecretKey:R,isValidPublicKey:L,toMontgomery(B){const{y:q}=t.fromBytes(B),D=A.publicKey,E=D===32;if(!E&&D!==57)throw new Error("only defined for 25519 and 448");const b=E?s.div(Hn+q,Hn-q):s.div(q-Hn,q+Hn);return s.toBytes(b)},toMontgomerySecret(B){const q=A.secretKey;ea(B,q);const D=e(B.subarray(0,q));return c(D).subarray(0,q)},randomPrivateKey:T,precompute(B=8,q=t.BASE){return q.precompute(B,!1)}};return Object.freeze({keygen:k,getPublicKey:g,sign:v,verify:_,utils:F,Point:t,lengths:A})}function Jz(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=Hh(e.n,t.nBitLength,!0),i={Fp:r,Fn:n,uvRatio:t.uvRatio},s={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:i,hash:t.hash,eddsaOpts:s}}function Xz(t,e){const r=e.Point;return Object.assign({},e,{ExtendedPoint:r,CURVE:t,nBitLength:r.Fn.BITS,nByteLength:r.Fn.BYTES})}function eq(t){const{CURVE:e,curveOpts:r,hash:n,eddsaOpts:i}=Jz(t),s=Qz(e,r),o=Zz(s,n,i);return Xz(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tq=BigInt(1),w6=BigInt(2);BigInt(3);const rq=BigInt(5),nq=BigInt(8),cI=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),u9={p:cI,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:nq,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function iq(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=cI,a=t*t%s*t%s,c=on(a,w6,s)*a%s,l=on(c,tq,s)*t%s,u=on(l,rq,s)*l%s,h=on(u,e,s)*u%s,d=on(h,r,s)*h%s,g=on(d,n,s)*d%s,m=on(g,i,s)*g%s,v=on(m,i,s)*g%s,$=on(v,e,s)*u%s;return{pow_p_5_8:on($,w6,s)*t%s,b2:a}}function sq(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const b6=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function oq(t,e){const r=cI,n=_n(e*e*e,r),i=_n(n*n*e,r),s=iq(t*i).pow_p_5_8;let o=_n(t*n*s,r);const a=_n(e*o*o,r),c=o,l=_n(o*b6,r),u=a===t,h=a===_n(-t,r),d=a===_n(-t*b6,r);return u&&(o=c),(h||d)&&(o=l),Uz(o,r)&&(o=_n(-o,r)),{isValid:u||h,value:o}}const aq=Hh(u9.p,{isLE:!0}),cq={...u9,Fp:aq,hash:Pz,adjustScalarBytes:sq,uvRatio:oq},Zm=eq(cq);var lI={exports:{}};const lq={},uq=Object.freeze(Object.defineProperty({__proto__:null,default:lq},Symbol.toStringTag,{value:"Module"})),uI=zm(uq);lI.exports;(function(t){(function(e,r){function n(b,f){if(!b)throw new Error(f||"Assertion failed")}function i(b,f){b.super_=f;var p=function(){};p.prototype=f.prototype,b.prototype=new p,b.prototype.constructor=b}function s(b,f,p){if(s.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&((f==="le"||f==="be")&&(p=f,f=10),this._init(b||0,f||10,p||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=uI.Buffer}catch{}s.isBN=function(f){return f instanceof s?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===s.wordSize&&Array.isArray(f.words)},s.max=function(f,p){return f.cmp(p)>0?f:p},s.min=function(f,p){return f.cmp(p)<0?f:p},s.prototype._init=function(f,p,w){if(typeof f=="number")return this._initNumber(f,p,w);if(typeof f=="object")return this._initArray(f,p,w);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),f=f.toString().replace(/\s+/g,"");var N=0;f[0]==="-"&&(N++,this.negative=1),N<f.length&&(p===16?this._parseHex(f,N,w):(this._parseBase(f,p,N),w==="le"&&this._initArray(this.toArray(),p,w)))},s.prototype._initNumber=function(f,p,w){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(n(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),p,w)},s.prototype._initArray=function(f,p,w){if(n(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var M,x,y=0;if(w==="be")for(N=f.length-1,M=0;N>=0;N-=3)x=f[N]|f[N-1]<<8|f[N-2]<<16,this.words[M]|=x<<y&67108863,this.words[M+1]=x>>>26-y&67108863,y+=24,y>=26&&(y-=26,M++);else if(w==="le")for(N=0,M=0;N<f.length;N+=3)x=f[N]|f[N+1]<<8|f[N+2]<<16,this.words[M]|=x<<y&67108863,this.words[M+1]=x>>>26-y&67108863,y+=24,y>=26&&(y-=26,M++);return this._strip()};function a(b,f){var p=b.charCodeAt(f);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;n(!1,"Invalid character in "+b)}function c(b,f,p){var w=a(b,p);return p-1>=f&&(w|=a(b,p-1)<<4),w}s.prototype._parseHex=function(f,p,w){this.length=Math.ceil((f.length-p)/6),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var M=0,x=0,y;if(w==="be")for(N=f.length-1;N>=p;N-=2)y=c(f,p,N)<<M,this.words[x]|=y&67108863,M>=18?(M-=18,x+=1,this.words[x]|=y>>>26):M+=8;else{var C=f.length-p;for(N=C%2===0?p+1:p;N<f.length;N+=2)y=c(f,p,N)<<M,this.words[x]|=y&67108863,M>=18?(M-=18,x+=1,this.words[x]|=y>>>26):M+=8}this._strip()};function l(b,f,p,w){for(var N=0,M=0,x=Math.min(b.length,p),y=f;y<x;y++){var C=b.charCodeAt(y)-48;N*=w,C>=49?M=C-49+10:C>=17?M=C-17+10:M=C,n(C>=0&&M<w,"Invalid character"),N+=M}return N}s.prototype._parseBase=function(f,p,w){this.words=[0],this.length=1;for(var N=0,M=1;M<=67108863;M*=p)N++;N--,M=M/p|0;for(var x=f.length-w,y=x%N,C=Math.min(x,x-y)+w,I=0,j=w;j<C;j+=N)I=l(f,j,j+N,p),this.imuln(M),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(y!==0){var K=1;for(I=l(f,j,f.length,p),j=0;j<y;j++)K*=p;this.imuln(K),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}this._strip()},s.prototype.copy=function(f){f.words=new Array(this.length);for(var p=0;p<this.length;p++)f.words[p]=this.words[p];f.length=this.length,f.negative=this.negative,f.red=this.red};function u(b,f){b.words=f.words,b.length=f.length,b.negative=f.negative,b.red=f.red}if(s.prototype._move=function(f){u(f,this)},s.prototype.clone=function(){var f=new s(null);return this.copy(f),f},s.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(f,p){f=f||10,p=p|0||1;var w;if(f===16||f==="hex"){w="";for(var N=0,M=0,x=0;x<this.length;x++){var y=this.words[x],C=((y<<N|M)&16777215).toString(16);M=y>>>24-N&16777215,N+=2,N>=26&&(N-=26,x--),M!==0||x!==this.length-1?w=d[6-C.length]+C+w:w=C+w}for(M!==0&&(w=M.toString(16)+w);w.length%p!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(f===(f|0)&&f>=2&&f<=36){var I=g[f],j=m[f];w="";var K=this.clone();for(K.negative=0;!K.isZero();){var V=K.modrn(j).toString(f);K=K.idivn(j),K.isZero()?w=V+w:w=d[I-V.length]+V+w}for(this.isZero()&&(w="0"+w);w.length%p!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(f,p){return this.toArrayLike(o,f,p)}),s.prototype.toArray=function(f,p){return this.toArrayLike(Array,f,p)};var v=function(f,p){return f.allocUnsafe?f.allocUnsafe(p):new f(p)};s.prototype.toArrayLike=function(f,p,w){this._strip();var N=this.byteLength(),M=w||Math.max(1,N);n(N<=M,"byte array longer than desired length"),n(M>0,"Requested array length <= 0");var x=v(f,M),y=p==="le"?"LE":"BE";return this["_toArrayLike"+y](x,N),x},s.prototype._toArrayLikeLE=function(f,p){for(var w=0,N=0,M=0,x=0;M<this.length;M++){var y=this.words[M]<<x|N;f[w++]=y&255,w<f.length&&(f[w++]=y>>8&255),w<f.length&&(f[w++]=y>>16&255),x===6?(w<f.length&&(f[w++]=y>>24&255),N=0,x=0):(N=y>>>24,x+=2)}if(w<f.length)for(f[w++]=N;w<f.length;)f[w++]=0},s.prototype._toArrayLikeBE=function(f,p){for(var w=f.length-1,N=0,M=0,x=0;M<this.length;M++){var y=this.words[M]<<x|N;f[w--]=y&255,w>=0&&(f[w--]=y>>8&255),w>=0&&(f[w--]=y>>16&255),x===6?(w>=0&&(f[w--]=y>>24&255),N=0,x=0):(N=y>>>24,x+=2)}if(w>=0)for(f[w--]=N;w>=0;)f[w--]=0},Math.clz32?s.prototype._countBits=function(f){return 32-Math.clz32(f)}:s.prototype._countBits=function(f){var p=f,w=0;return p>=4096&&(w+=13,p>>>=13),p>=64&&(w+=7,p>>>=7),p>=8&&(w+=4,p>>>=4),p>=2&&(w+=2,p>>>=2),w+p},s.prototype._zeroBits=function(f){if(f===0)return 26;var p=f,w=0;return p&8191||(w+=13,p>>>=13),p&127||(w+=7,p>>>=7),p&15||(w+=4,p>>>=4),p&3||(w+=2,p>>>=2),p&1||w++,w},s.prototype.bitLength=function(){var f=this.words[this.length-1],p=this._countBits(f);return(this.length-1)*26+p};function $(b){for(var f=new Array(b.bitLength()),p=0;p<f.length;p++){var w=p/26|0,N=p%26;f[p]=b.words[w]>>>N&1}return f}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,p=0;p<this.length;p++){var w=this._zeroBits(this.words[p]);if(f+=w,w!==26)break}return f},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},s.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var p=0;p<f.length;p++)this.words[p]=this.words[p]|f.words[p];return this._strip()},s.prototype.ior=function(f){return n((this.negative|f.negative)===0),this.iuor(f)},s.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},s.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},s.prototype.iuand=function(f){var p;this.length>f.length?p=f:p=this;for(var w=0;w<p.length;w++)this.words[w]=this.words[w]&f.words[w];return this.length=p.length,this._strip()},s.prototype.iand=function(f){return n((this.negative|f.negative)===0),this.iuand(f)},s.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},s.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},s.prototype.iuxor=function(f){var p,w;this.length>f.length?(p=this,w=f):(p=f,w=this);for(var N=0;N<w.length;N++)this.words[N]=p.words[N]^w.words[N];if(this!==p)for(;N<p.length;N++)this.words[N]=p.words[N];return this.length=p.length,this._strip()},s.prototype.ixor=function(f){return n((this.negative|f.negative)===0),this.iuxor(f)},s.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},s.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},s.prototype.inotn=function(f){n(typeof f=="number"&&f>=0);var p=Math.ceil(f/26)|0,w=f%26;this._expand(p),w>0&&p--;for(var N=0;N<p;N++)this.words[N]=~this.words[N]&67108863;return w>0&&(this.words[N]=~this.words[N]&67108863>>26-w),this._strip()},s.prototype.notn=function(f){return this.clone().inotn(f)},s.prototype.setn=function(f,p){n(typeof f=="number"&&f>=0);var w=f/26|0,N=f%26;return this._expand(w+1),p?this.words[w]=this.words[w]|1<<N:this.words[w]=this.words[w]&~(1<<N),this._strip()},s.prototype.iadd=function(f){var p;if(this.negative!==0&&f.negative===0)return this.negative=0,p=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,p=this.isub(f),f.negative=1,p._normSign();var w,N;this.length>f.length?(w=this,N=f):(w=f,N=this);for(var M=0,x=0;x<N.length;x++)p=(w.words[x]|0)+(N.words[x]|0)+M,this.words[x]=p&67108863,M=p>>>26;for(;M!==0&&x<w.length;x++)p=(w.words[x]|0)+M,this.words[x]=p&67108863,M=p>>>26;if(this.length=w.length,M!==0)this.words[this.length]=M,this.length++;else if(w!==this)for(;x<w.length;x++)this.words[x]=w.words[x];return this},s.prototype.add=function(f){var p;return f.negative!==0&&this.negative===0?(f.negative=0,p=this.sub(f),f.negative^=1,p):f.negative===0&&this.negative!==0?(this.negative=0,p=f.sub(this),this.negative=1,p):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},s.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var p=this.iadd(f);return f.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var w=this.cmp(f);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var N,M;w>0?(N=this,M=f):(N=f,M=this);for(var x=0,y=0;y<M.length;y++)p=(N.words[y]|0)-(M.words[y]|0)+x,x=p>>26,this.words[y]=p&67108863;for(;x!==0&&y<N.length;y++)p=(N.words[y]|0)+x,x=p>>26,this.words[y]=p&67108863;if(x===0&&y<N.length&&N!==this)for(;y<N.length;y++)this.words[y]=N.words[y];return this.length=Math.max(this.length,y),N!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(f){return this.clone().isub(f)};function _(b,f,p){p.negative=f.negative^b.negative;var w=b.length+f.length|0;p.length=w,w=w-1|0;var N=b.words[0]|0,M=f.words[0]|0,x=N*M,y=x&67108863,C=x/67108864|0;p.words[0]=y;for(var I=1;I<w;I++){for(var j=C>>>26,K=C&67108863,V=Math.min(I,f.length-1),te=Math.max(0,I-b.length+1);te<=V;te++){var se=I-te|0;N=b.words[se]|0,M=f.words[te]|0,x=N*M+K,j+=x/67108864|0,K=x&67108863}p.words[I]=K|0,C=j|0}return C!==0?p.words[I]=C|0:p.length--,p._strip()}var S=function(f,p,w){var N=f.words,M=p.words,x=w.words,y=0,C,I,j,K=N[0]|0,V=K&8191,te=K>>>13,se=N[1]|0,ce=se&8191,ie=se>>>13,ve=N[2]|0,Me=ve&8191,Ce=ve>>>13,et=N[3]|0,tt=et&8191,Fe=et>>>13,Gt=N[4]|0,Lt=Gt&8191,Ye=Gt>>>13,Ft=N[5]|0,Bt=Ft&8191,Be=Ft>>>13,ft=N[6]|0,Nt=ft&8191,Ve=ft>>>13,mt=N[7]|0,zt=mt&8191,U=mt>>>13,P=N[8]|0,O=P&8191,z=P>>>13,G=N[9]|0,Z=G&8191,ee=G>>>13,Ne=M[0]|0,ze=Ne&8191,Se=Ne>>>13,We=M[1]|0,De=We&8191,He=We>>>13,fr=M[2]|0,Cr=fr&8191,rt=fr>>>13,or=M[3]|0,Yt=or&8191,Ze=or>>>13,ar=M[4]|0,cr=ar&8191,Qe=ar>>>13,Nr=M[5]|0,Mr=Nr&8191,nt=Nr>>>13,Tr=M[6]|0,$r=Tr&8191,Je=Tr>>>13,lr=M[7]|0,jt=lr&8191,it=lr>>>13,Pr=M[8]|0,Or=Pr&8191,st=Pr>>>13,kr=M[9]|0,xt=kr&8191,pr=kr>>>13;w.negative=f.negative^p.negative,w.length=19,C=Math.imul(V,ze),I=Math.imul(V,Se),I=I+Math.imul(te,ze)|0,j=Math.imul(te,Se);var Ja=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(Ja>>>26)|0,Ja&=67108863,C=Math.imul(ce,ze),I=Math.imul(ce,Se),I=I+Math.imul(ie,ze)|0,j=Math.imul(ie,Se),C=C+Math.imul(V,De)|0,I=I+Math.imul(V,He)|0,I=I+Math.imul(te,De)|0,j=j+Math.imul(te,He)|0;var Xa=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(Xa>>>26)|0,Xa&=67108863,C=Math.imul(Me,ze),I=Math.imul(Me,Se),I=I+Math.imul(Ce,ze)|0,j=Math.imul(Ce,Se),C=C+Math.imul(ce,De)|0,I=I+Math.imul(ce,He)|0,I=I+Math.imul(ie,De)|0,j=j+Math.imul(ie,He)|0,C=C+Math.imul(V,Cr)|0,I=I+Math.imul(V,rt)|0,I=I+Math.imul(te,Cr)|0,j=j+Math.imul(te,rt)|0;var ec=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(ec>>>26)|0,ec&=67108863,C=Math.imul(tt,ze),I=Math.imul(tt,Se),I=I+Math.imul(Fe,ze)|0,j=Math.imul(Fe,Se),C=C+Math.imul(Me,De)|0,I=I+Math.imul(Me,He)|0,I=I+Math.imul(Ce,De)|0,j=j+Math.imul(Ce,He)|0,C=C+Math.imul(ce,Cr)|0,I=I+Math.imul(ce,rt)|0,I=I+Math.imul(ie,Cr)|0,j=j+Math.imul(ie,rt)|0,C=C+Math.imul(V,Yt)|0,I=I+Math.imul(V,Ze)|0,I=I+Math.imul(te,Yt)|0,j=j+Math.imul(te,Ze)|0;var tc=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(tc>>>26)|0,tc&=67108863,C=Math.imul(Lt,ze),I=Math.imul(Lt,Se),I=I+Math.imul(Ye,ze)|0,j=Math.imul(Ye,Se),C=C+Math.imul(tt,De)|0,I=I+Math.imul(tt,He)|0,I=I+Math.imul(Fe,De)|0,j=j+Math.imul(Fe,He)|0,C=C+Math.imul(Me,Cr)|0,I=I+Math.imul(Me,rt)|0,I=I+Math.imul(Ce,Cr)|0,j=j+Math.imul(Ce,rt)|0,C=C+Math.imul(ce,Yt)|0,I=I+Math.imul(ce,Ze)|0,I=I+Math.imul(ie,Yt)|0,j=j+Math.imul(ie,Ze)|0,C=C+Math.imul(V,cr)|0,I=I+Math.imul(V,Qe)|0,I=I+Math.imul(te,cr)|0,j=j+Math.imul(te,Qe)|0;var Vi=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,C=Math.imul(Bt,ze),I=Math.imul(Bt,Se),I=I+Math.imul(Be,ze)|0,j=Math.imul(Be,Se),C=C+Math.imul(Lt,De)|0,I=I+Math.imul(Lt,He)|0,I=I+Math.imul(Ye,De)|0,j=j+Math.imul(Ye,He)|0,C=C+Math.imul(tt,Cr)|0,I=I+Math.imul(tt,rt)|0,I=I+Math.imul(Fe,Cr)|0,j=j+Math.imul(Fe,rt)|0,C=C+Math.imul(Me,Yt)|0,I=I+Math.imul(Me,Ze)|0,I=I+Math.imul(Ce,Yt)|0,j=j+Math.imul(Ce,Ze)|0,C=C+Math.imul(ce,cr)|0,I=I+Math.imul(ce,Qe)|0,I=I+Math.imul(ie,cr)|0,j=j+Math.imul(ie,Qe)|0,C=C+Math.imul(V,Mr)|0,I=I+Math.imul(V,nt)|0,I=I+Math.imul(te,Mr)|0,j=j+Math.imul(te,nt)|0;var rc=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(rc>>>26)|0,rc&=67108863,C=Math.imul(Nt,ze),I=Math.imul(Nt,Se),I=I+Math.imul(Ve,ze)|0,j=Math.imul(Ve,Se),C=C+Math.imul(Bt,De)|0,I=I+Math.imul(Bt,He)|0,I=I+Math.imul(Be,De)|0,j=j+Math.imul(Be,He)|0,C=C+Math.imul(Lt,Cr)|0,I=I+Math.imul(Lt,rt)|0,I=I+Math.imul(Ye,Cr)|0,j=j+Math.imul(Ye,rt)|0,C=C+Math.imul(tt,Yt)|0,I=I+Math.imul(tt,Ze)|0,I=I+Math.imul(Fe,Yt)|0,j=j+Math.imul(Fe,Ze)|0,C=C+Math.imul(Me,cr)|0,I=I+Math.imul(Me,Qe)|0,I=I+Math.imul(Ce,cr)|0,j=j+Math.imul(Ce,Qe)|0,C=C+Math.imul(ce,Mr)|0,I=I+Math.imul(ce,nt)|0,I=I+Math.imul(ie,Mr)|0,j=j+Math.imul(ie,nt)|0,C=C+Math.imul(V,$r)|0,I=I+Math.imul(V,Je)|0,I=I+Math.imul(te,$r)|0,j=j+Math.imul(te,Je)|0;var nc=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(nc>>>26)|0,nc&=67108863,C=Math.imul(zt,ze),I=Math.imul(zt,Se),I=I+Math.imul(U,ze)|0,j=Math.imul(U,Se),C=C+Math.imul(Nt,De)|0,I=I+Math.imul(Nt,He)|0,I=I+Math.imul(Ve,De)|0,j=j+Math.imul(Ve,He)|0,C=C+Math.imul(Bt,Cr)|0,I=I+Math.imul(Bt,rt)|0,I=I+Math.imul(Be,Cr)|0,j=j+Math.imul(Be,rt)|0,C=C+Math.imul(Lt,Yt)|0,I=I+Math.imul(Lt,Ze)|0,I=I+Math.imul(Ye,Yt)|0,j=j+Math.imul(Ye,Ze)|0,C=C+Math.imul(tt,cr)|0,I=I+Math.imul(tt,Qe)|0,I=I+Math.imul(Fe,cr)|0,j=j+Math.imul(Fe,Qe)|0,C=C+Math.imul(Me,Mr)|0,I=I+Math.imul(Me,nt)|0,I=I+Math.imul(Ce,Mr)|0,j=j+Math.imul(Ce,nt)|0,C=C+Math.imul(ce,$r)|0,I=I+Math.imul(ce,Je)|0,I=I+Math.imul(ie,$r)|0,j=j+Math.imul(ie,Je)|0,C=C+Math.imul(V,jt)|0,I=I+Math.imul(V,it)|0,I=I+Math.imul(te,jt)|0,j=j+Math.imul(te,it)|0;var ic=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(ic>>>26)|0,ic&=67108863,C=Math.imul(O,ze),I=Math.imul(O,Se),I=I+Math.imul(z,ze)|0,j=Math.imul(z,Se),C=C+Math.imul(zt,De)|0,I=I+Math.imul(zt,He)|0,I=I+Math.imul(U,De)|0,j=j+Math.imul(U,He)|0,C=C+Math.imul(Nt,Cr)|0,I=I+Math.imul(Nt,rt)|0,I=I+Math.imul(Ve,Cr)|0,j=j+Math.imul(Ve,rt)|0,C=C+Math.imul(Bt,Yt)|0,I=I+Math.imul(Bt,Ze)|0,I=I+Math.imul(Be,Yt)|0,j=j+Math.imul(Be,Ze)|0,C=C+Math.imul(Lt,cr)|0,I=I+Math.imul(Lt,Qe)|0,I=I+Math.imul(Ye,cr)|0,j=j+Math.imul(Ye,Qe)|0,C=C+Math.imul(tt,Mr)|0,I=I+Math.imul(tt,nt)|0,I=I+Math.imul(Fe,Mr)|0,j=j+Math.imul(Fe,nt)|0,C=C+Math.imul(Me,$r)|0,I=I+Math.imul(Me,Je)|0,I=I+Math.imul(Ce,$r)|0,j=j+Math.imul(Ce,Je)|0,C=C+Math.imul(ce,jt)|0,I=I+Math.imul(ce,it)|0,I=I+Math.imul(ie,jt)|0,j=j+Math.imul(ie,it)|0,C=C+Math.imul(V,Or)|0,I=I+Math.imul(V,st)|0,I=I+Math.imul(te,Or)|0,j=j+Math.imul(te,st)|0;var sc=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(sc>>>26)|0,sc&=67108863,C=Math.imul(Z,ze),I=Math.imul(Z,Se),I=I+Math.imul(ee,ze)|0,j=Math.imul(ee,Se),C=C+Math.imul(O,De)|0,I=I+Math.imul(O,He)|0,I=I+Math.imul(z,De)|0,j=j+Math.imul(z,He)|0,C=C+Math.imul(zt,Cr)|0,I=I+Math.imul(zt,rt)|0,I=I+Math.imul(U,Cr)|0,j=j+Math.imul(U,rt)|0,C=C+Math.imul(Nt,Yt)|0,I=I+Math.imul(Nt,Ze)|0,I=I+Math.imul(Ve,Yt)|0,j=j+Math.imul(Ve,Ze)|0,C=C+Math.imul(Bt,cr)|0,I=I+Math.imul(Bt,Qe)|0,I=I+Math.imul(Be,cr)|0,j=j+Math.imul(Be,Qe)|0,C=C+Math.imul(Lt,Mr)|0,I=I+Math.imul(Lt,nt)|0,I=I+Math.imul(Ye,Mr)|0,j=j+Math.imul(Ye,nt)|0,C=C+Math.imul(tt,$r)|0,I=I+Math.imul(tt,Je)|0,I=I+Math.imul(Fe,$r)|0,j=j+Math.imul(Fe,Je)|0,C=C+Math.imul(Me,jt)|0,I=I+Math.imul(Me,it)|0,I=I+Math.imul(Ce,jt)|0,j=j+Math.imul(Ce,it)|0,C=C+Math.imul(ce,Or)|0,I=I+Math.imul(ce,st)|0,I=I+Math.imul(ie,Or)|0,j=j+Math.imul(ie,st)|0,C=C+Math.imul(V,xt)|0,I=I+Math.imul(V,pr)|0,I=I+Math.imul(te,xt)|0,j=j+Math.imul(te,pr)|0;var oc=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(oc>>>26)|0,oc&=67108863,C=Math.imul(Z,De),I=Math.imul(Z,He),I=I+Math.imul(ee,De)|0,j=Math.imul(ee,He),C=C+Math.imul(O,Cr)|0,I=I+Math.imul(O,rt)|0,I=I+Math.imul(z,Cr)|0,j=j+Math.imul(z,rt)|0,C=C+Math.imul(zt,Yt)|0,I=I+Math.imul(zt,Ze)|0,I=I+Math.imul(U,Yt)|0,j=j+Math.imul(U,Ze)|0,C=C+Math.imul(Nt,cr)|0,I=I+Math.imul(Nt,Qe)|0,I=I+Math.imul(Ve,cr)|0,j=j+Math.imul(Ve,Qe)|0,C=C+Math.imul(Bt,Mr)|0,I=I+Math.imul(Bt,nt)|0,I=I+Math.imul(Be,Mr)|0,j=j+Math.imul(Be,nt)|0,C=C+Math.imul(Lt,$r)|0,I=I+Math.imul(Lt,Je)|0,I=I+Math.imul(Ye,$r)|0,j=j+Math.imul(Ye,Je)|0,C=C+Math.imul(tt,jt)|0,I=I+Math.imul(tt,it)|0,I=I+Math.imul(Fe,jt)|0,j=j+Math.imul(Fe,it)|0,C=C+Math.imul(Me,Or)|0,I=I+Math.imul(Me,st)|0,I=I+Math.imul(Ce,Or)|0,j=j+Math.imul(Ce,st)|0,C=C+Math.imul(ce,xt)|0,I=I+Math.imul(ce,pr)|0,I=I+Math.imul(ie,xt)|0,j=j+Math.imul(ie,pr)|0;var so=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(so>>>26)|0,so&=67108863,C=Math.imul(Z,Cr),I=Math.imul(Z,rt),I=I+Math.imul(ee,Cr)|0,j=Math.imul(ee,rt),C=C+Math.imul(O,Yt)|0,I=I+Math.imul(O,Ze)|0,I=I+Math.imul(z,Yt)|0,j=j+Math.imul(z,Ze)|0,C=C+Math.imul(zt,cr)|0,I=I+Math.imul(zt,Qe)|0,I=I+Math.imul(U,cr)|0,j=j+Math.imul(U,Qe)|0,C=C+Math.imul(Nt,Mr)|0,I=I+Math.imul(Nt,nt)|0,I=I+Math.imul(Ve,Mr)|0,j=j+Math.imul(Ve,nt)|0,C=C+Math.imul(Bt,$r)|0,I=I+Math.imul(Bt,Je)|0,I=I+Math.imul(Be,$r)|0,j=j+Math.imul(Be,Je)|0,C=C+Math.imul(Lt,jt)|0,I=I+Math.imul(Lt,it)|0,I=I+Math.imul(Ye,jt)|0,j=j+Math.imul(Ye,it)|0,C=C+Math.imul(tt,Or)|0,I=I+Math.imul(tt,st)|0,I=I+Math.imul(Fe,Or)|0,j=j+Math.imul(Fe,st)|0,C=C+Math.imul(Me,xt)|0,I=I+Math.imul(Me,pr)|0,I=I+Math.imul(Ce,xt)|0,j=j+Math.imul(Ce,pr)|0;var ac=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(ac>>>26)|0,ac&=67108863,C=Math.imul(Z,Yt),I=Math.imul(Z,Ze),I=I+Math.imul(ee,Yt)|0,j=Math.imul(ee,Ze),C=C+Math.imul(O,cr)|0,I=I+Math.imul(O,Qe)|0,I=I+Math.imul(z,cr)|0,j=j+Math.imul(z,Qe)|0,C=C+Math.imul(zt,Mr)|0,I=I+Math.imul(zt,nt)|0,I=I+Math.imul(U,Mr)|0,j=j+Math.imul(U,nt)|0,C=C+Math.imul(Nt,$r)|0,I=I+Math.imul(Nt,Je)|0,I=I+Math.imul(Ve,$r)|0,j=j+Math.imul(Ve,Je)|0,C=C+Math.imul(Bt,jt)|0,I=I+Math.imul(Bt,it)|0,I=I+Math.imul(Be,jt)|0,j=j+Math.imul(Be,it)|0,C=C+Math.imul(Lt,Or)|0,I=I+Math.imul(Lt,st)|0,I=I+Math.imul(Ye,Or)|0,j=j+Math.imul(Ye,st)|0,C=C+Math.imul(tt,xt)|0,I=I+Math.imul(tt,pr)|0,I=I+Math.imul(Fe,xt)|0,j=j+Math.imul(Fe,pr)|0;var cc=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(cc>>>26)|0,cc&=67108863,C=Math.imul(Z,cr),I=Math.imul(Z,Qe),I=I+Math.imul(ee,cr)|0,j=Math.imul(ee,Qe),C=C+Math.imul(O,Mr)|0,I=I+Math.imul(O,nt)|0,I=I+Math.imul(z,Mr)|0,j=j+Math.imul(z,nt)|0,C=C+Math.imul(zt,$r)|0,I=I+Math.imul(zt,Je)|0,I=I+Math.imul(U,$r)|0,j=j+Math.imul(U,Je)|0,C=C+Math.imul(Nt,jt)|0,I=I+Math.imul(Nt,it)|0,I=I+Math.imul(Ve,jt)|0,j=j+Math.imul(Ve,it)|0,C=C+Math.imul(Bt,Or)|0,I=I+Math.imul(Bt,st)|0,I=I+Math.imul(Be,Or)|0,j=j+Math.imul(Be,st)|0,C=C+Math.imul(Lt,xt)|0,I=I+Math.imul(Lt,pr)|0,I=I+Math.imul(Ye,xt)|0,j=j+Math.imul(Ye,pr)|0;var Ci=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,C=Math.imul(Z,Mr),I=Math.imul(Z,nt),I=I+Math.imul(ee,Mr)|0,j=Math.imul(ee,nt),C=C+Math.imul(O,$r)|0,I=I+Math.imul(O,Je)|0,I=I+Math.imul(z,$r)|0,j=j+Math.imul(z,Je)|0,C=C+Math.imul(zt,jt)|0,I=I+Math.imul(zt,it)|0,I=I+Math.imul(U,jt)|0,j=j+Math.imul(U,it)|0,C=C+Math.imul(Nt,Or)|0,I=I+Math.imul(Nt,st)|0,I=I+Math.imul(Ve,Or)|0,j=j+Math.imul(Ve,st)|0,C=C+Math.imul(Bt,xt)|0,I=I+Math.imul(Bt,pr)|0,I=I+Math.imul(Be,xt)|0,j=j+Math.imul(Be,pr)|0;var lc=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(lc>>>26)|0,lc&=67108863,C=Math.imul(Z,$r),I=Math.imul(Z,Je),I=I+Math.imul(ee,$r)|0,j=Math.imul(ee,Je),C=C+Math.imul(O,jt)|0,I=I+Math.imul(O,it)|0,I=I+Math.imul(z,jt)|0,j=j+Math.imul(z,it)|0,C=C+Math.imul(zt,Or)|0,I=I+Math.imul(zt,st)|0,I=I+Math.imul(U,Or)|0,j=j+Math.imul(U,st)|0,C=C+Math.imul(Nt,xt)|0,I=I+Math.imul(Nt,pr)|0,I=I+Math.imul(Ve,xt)|0,j=j+Math.imul(Ve,pr)|0;var uc=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(uc>>>26)|0,uc&=67108863,C=Math.imul(Z,jt),I=Math.imul(Z,it),I=I+Math.imul(ee,jt)|0,j=Math.imul(ee,it),C=C+Math.imul(O,Or)|0,I=I+Math.imul(O,st)|0,I=I+Math.imul(z,Or)|0,j=j+Math.imul(z,st)|0,C=C+Math.imul(zt,xt)|0,I=I+Math.imul(zt,pr)|0,I=I+Math.imul(U,xt)|0,j=j+Math.imul(U,pr)|0;var hc=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(hc>>>26)|0,hc&=67108863,C=Math.imul(Z,Or),I=Math.imul(Z,st),I=I+Math.imul(ee,Or)|0,j=Math.imul(ee,st),C=C+Math.imul(O,xt)|0,I=I+Math.imul(O,pr)|0,I=I+Math.imul(z,xt)|0,j=j+Math.imul(z,pr)|0;var r0=(y+C|0)+((I&8191)<<13)|0;y=(j+(I>>>13)|0)+(r0>>>26)|0,r0&=67108863,C=Math.imul(Z,xt),I=Math.imul(Z,pr),I=I+Math.imul(ee,xt)|0,j=Math.imul(ee,pr);var n0=(y+C|0)+((I&8191)<<13)|0;return y=(j+(I>>>13)|0)+(n0>>>26)|0,n0&=67108863,x[0]=Ja,x[1]=Xa,x[2]=ec,x[3]=tc,x[4]=Vi,x[5]=rc,x[6]=nc,x[7]=ic,x[8]=sc,x[9]=oc,x[10]=so,x[11]=ac,x[12]=cc,x[13]=Ci,x[14]=lc,x[15]=uc,x[16]=hc,x[17]=r0,x[18]=n0,y!==0&&(x[19]=y,w.length++),w};Math.imul||(S=_);function A(b,f,p){p.negative=f.negative^b.negative,p.length=b.length+f.length;for(var w=0,N=0,M=0;M<p.length-1;M++){var x=N;N=0;for(var y=w&67108863,C=Math.min(M,f.length-1),I=Math.max(0,M-b.length+1);I<=C;I++){var j=M-I,K=b.words[j]|0,V=f.words[I]|0,te=K*V,se=te&67108863;x=x+(te/67108864|0)|0,se=se+y|0,y=se&67108863,x=x+(se>>>26)|0,N+=x>>>26,x&=67108863}p.words[M]=y,w=x,x=N}return w!==0?p.words[M]=w:p.length--,p._strip()}function T(b,f,p){return A(b,f,p)}s.prototype.mulTo=function(f,p){var w,N=this.length+f.length;return this.length===10&&f.length===10?w=S(this,f,p):N<63?w=_(this,f,p):N<1024?w=A(this,f,p):w=T(this,f,p),w},s.prototype.mul=function(f){var p=new s(null);return p.words=new Array(this.length+f.length),this.mulTo(f,p)},s.prototype.mulf=function(f){var p=new s(null);return p.words=new Array(this.length+f.length),T(this,f,p)},s.prototype.imul=function(f){return this.clone().mulTo(f,this)},s.prototype.imuln=function(f){var p=f<0;p&&(f=-f),n(typeof f=="number"),n(f<67108864);for(var w=0,N=0;N<this.length;N++){var M=(this.words[N]|0)*f,x=(M&67108863)+(w&67108863);w>>=26,w+=M/67108864|0,w+=x>>>26,this.words[N]=x&67108863}return w!==0&&(this.words[N]=w,this.length++),this.length=f===0?1:this.length,p?this.ineg():this},s.prototype.muln=function(f){return this.clone().imuln(f)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(f){var p=$(f);if(p.length===0)return new s(1);for(var w=this,N=0;N<p.length&&p[N]===0;N++,w=w.sqr());if(++N<p.length)for(var M=w.sqr();N<p.length;N++,M=M.sqr())p[N]!==0&&(w=w.mul(M));return w},s.prototype.iushln=function(f){n(typeof f=="number"&&f>=0);var p=f%26,w=(f-p)/26,N=67108863>>>26-p<<26-p,M;if(p!==0){var x=0;for(M=0;M<this.length;M++){var y=this.words[M]&N,C=(this.words[M]|0)-y<<p;this.words[M]=C|x,x=y>>>26-p}x&&(this.words[M]=x,this.length++)}if(w!==0){for(M=this.length-1;M>=0;M--)this.words[M+w]=this.words[M];for(M=0;M<w;M++)this.words[M]=0;this.length+=w}return this._strip()},s.prototype.ishln=function(f){return n(this.negative===0),this.iushln(f)},s.prototype.iushrn=function(f,p,w){n(typeof f=="number"&&f>=0);var N;p?N=(p-p%26)/26:N=0;var M=f%26,x=Math.min((f-M)/26,this.length),y=67108863^67108863>>>M<<M,C=w;if(N-=x,N=Math.max(0,N),C){for(var I=0;I<x;I++)C.words[I]=this.words[I];C.length=x}if(x!==0)if(this.length>x)for(this.length-=x,I=0;I<this.length;I++)this.words[I]=this.words[I+x];else this.words[0]=0,this.length=1;var j=0;for(I=this.length-1;I>=0&&(j!==0||I>=N);I--){var K=this.words[I]|0;this.words[I]=j<<26-M|K>>>M,j=K&y}return C&&j!==0&&(C.words[C.length++]=j),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(f,p,w){return n(this.negative===0),this.iushrn(f,p,w)},s.prototype.shln=function(f){return this.clone().ishln(f)},s.prototype.ushln=function(f){return this.clone().iushln(f)},s.prototype.shrn=function(f){return this.clone().ishrn(f)},s.prototype.ushrn=function(f){return this.clone().iushrn(f)},s.prototype.testn=function(f){n(typeof f=="number"&&f>=0);var p=f%26,w=(f-p)/26,N=1<<p;if(this.length<=w)return!1;var M=this.words[w];return!!(M&N)},s.prototype.imaskn=function(f){n(typeof f=="number"&&f>=0);var p=f%26,w=(f-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(p!==0&&w++,this.length=Math.min(w,this.length),p!==0){var N=67108863^67108863>>>p<<p;this.words[this.length-1]&=N}return this._strip()},s.prototype.maskn=function(f){return this.clone().imaskn(f)},s.prototype.iaddn=function(f){return n(typeof f=="number"),n(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<=f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},s.prototype._iaddn=function(f){this.words[0]+=f;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(f){if(n(typeof f=="number"),n(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},s.prototype.addn=function(f){return this.clone().iaddn(f)},s.prototype.subn=function(f){return this.clone().isubn(f)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(f,p,w){var N=f.length+w,M;this._expand(N);var x,y=0;for(M=0;M<f.length;M++){x=(this.words[M+w]|0)+y;var C=(f.words[M]|0)*p;x-=C&67108863,y=(x>>26)-(C/67108864|0),this.words[M+w]=x&67108863}for(;M<this.length-w;M++)x=(this.words[M+w]|0)+y,y=x>>26,this.words[M+w]=x&67108863;if(y===0)return this._strip();for(n(y===-1),y=0,M=0;M<this.length;M++)x=-(this.words[M]|0)+y,y=x>>26,this.words[M]=x&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(f,p){var w=this.length-f.length,N=this.clone(),M=f,x=M.words[M.length-1]|0,y=this._countBits(x);w=26-y,w!==0&&(M=M.ushln(w),N.iushln(w),x=M.words[M.length-1]|0);var C=N.length-M.length,I;if(p!=="mod"){I=new s(null),I.length=C+1,I.words=new Array(I.length);for(var j=0;j<I.length;j++)I.words[j]=0}var K=N.clone()._ishlnsubmul(M,1,C);K.negative===0&&(N=K,I&&(I.words[C]=1));for(var V=C-1;V>=0;V--){var te=(N.words[M.length+V]|0)*67108864+(N.words[M.length+V-1]|0);for(te=Math.min(te/x|0,67108863),N._ishlnsubmul(M,te,V);N.negative!==0;)te--,N.negative=0,N._ishlnsubmul(M,1,V),N.isZero()||(N.negative^=1);I&&(I.words[V]=te)}return I&&I._strip(),N._strip(),p!=="div"&&w!==0&&N.iushrn(w),{div:I||null,mod:N}},s.prototype.divmod=function(f,p,w){if(n(!f.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var N,M,x;return this.negative!==0&&f.negative===0?(x=this.neg().divmod(f,p),p!=="mod"&&(N=x.div.neg()),p!=="div"&&(M=x.mod.neg(),w&&M.negative!==0&&M.iadd(f)),{div:N,mod:M}):this.negative===0&&f.negative!==0?(x=this.divmod(f.neg(),p),p!=="mod"&&(N=x.div.neg()),{div:N,mod:x.mod}):this.negative&f.negative?(x=this.neg().divmod(f.neg(),p),p!=="div"&&(M=x.mod.neg(),w&&M.negative!==0&&M.isub(f)),{div:x.div,mod:M}):f.length>this.length||this.cmp(f)<0?{div:new s(0),mod:this}:f.length===1?p==="div"?{div:this.divn(f.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modrn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new s(this.modrn(f.words[0]))}:this._wordDiv(f,p)},s.prototype.div=function(f){return this.divmod(f,"div",!1).div},s.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},s.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},s.prototype.divRound=function(f){var p=this.divmod(f);if(p.mod.isZero())return p.div;var w=p.div.negative!==0?p.mod.isub(f):p.mod,N=f.ushrn(1),M=f.andln(1),x=w.cmp(N);return x<0||M===1&&x===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modrn=function(f){var p=f<0;p&&(f=-f),n(f<=67108863);for(var w=(1<<26)%f,N=0,M=this.length-1;M>=0;M--)N=(w*N+(this.words[M]|0))%f;return p?-N:N},s.prototype.modn=function(f){return this.modrn(f)},s.prototype.idivn=function(f){var p=f<0;p&&(f=-f),n(f<=67108863);for(var w=0,N=this.length-1;N>=0;N--){var M=(this.words[N]|0)+w*67108864;this.words[N]=M/f|0,w=M%f}return this._strip(),p?this.ineg():this},s.prototype.divn=function(f){return this.clone().idivn(f)},s.prototype.egcd=function(f){n(f.negative===0),n(!f.isZero());var p=this,w=f.clone();p.negative!==0?p=p.umod(f):p=p.clone();for(var N=new s(1),M=new s(0),x=new s(0),y=new s(1),C=0;p.isEven()&&w.isEven();)p.iushrn(1),w.iushrn(1),++C;for(var I=w.clone(),j=p.clone();!p.isZero();){for(var K=0,V=1;!(p.words[0]&V)&&K<26;++K,V<<=1);if(K>0)for(p.iushrn(K);K-- >0;)(N.isOdd()||M.isOdd())&&(N.iadd(I),M.isub(j)),N.iushrn(1),M.iushrn(1);for(var te=0,se=1;!(w.words[0]&se)&&te<26;++te,se<<=1);if(te>0)for(w.iushrn(te);te-- >0;)(x.isOdd()||y.isOdd())&&(x.iadd(I),y.isub(j)),x.iushrn(1),y.iushrn(1);p.cmp(w)>=0?(p.isub(w),N.isub(x),M.isub(y)):(w.isub(p),x.isub(N),y.isub(M))}return{a:x,b:y,gcd:w.iushln(C)}},s.prototype._invmp=function(f){n(f.negative===0),n(!f.isZero());var p=this,w=f.clone();p.negative!==0?p=p.umod(f):p=p.clone();for(var N=new s(1),M=new s(0),x=w.clone();p.cmpn(1)>0&&w.cmpn(1)>0;){for(var y=0,C=1;!(p.words[0]&C)&&y<26;++y,C<<=1);if(y>0)for(p.iushrn(y);y-- >0;)N.isOdd()&&N.iadd(x),N.iushrn(1);for(var I=0,j=1;!(w.words[0]&j)&&I<26;++I,j<<=1);if(I>0)for(w.iushrn(I);I-- >0;)M.isOdd()&&M.iadd(x),M.iushrn(1);p.cmp(w)>=0?(p.isub(w),N.isub(M)):(w.isub(p),M.isub(N))}var K;return p.cmpn(1)===0?K=N:K=M,K.cmpn(0)<0&&K.iadd(f),K},s.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var p=this.clone(),w=f.clone();p.negative=0,w.negative=0;for(var N=0;p.isEven()&&w.isEven();N++)p.iushrn(1),w.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;w.isEven();)w.iushrn(1);var M=p.cmp(w);if(M<0){var x=p;p=w,w=x}else if(M===0||w.cmpn(1)===0)break;p.isub(w)}while(!0);return w.iushln(N)},s.prototype.invm=function(f){return this.egcd(f).a.umod(f)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(f){return this.words[0]&f},s.prototype.bincn=function(f){n(typeof f=="number");var p=f%26,w=(f-p)/26,N=1<<p;if(this.length<=w)return this._expand(w+1),this.words[w]|=N,this;for(var M=N,x=w;M!==0&&x<this.length;x++){var y=this.words[x]|0;y+=M,M=y>>>26,y&=67108863,this.words[x]=y}return M!==0&&(this.words[x]=M,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(f){var p=f<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var w;if(this.length>1)w=1;else{p&&(f=-f),n(f<=67108863,"Number is too big");var N=this.words[0]|0;w=N===f?0:N<f?-1:1}return this.negative!==0?-w|0:w},s.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var p=this.ucmp(f);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var p=0,w=this.length-1;w>=0;w--){var N=this.words[w]|0,M=f.words[w]|0;if(N!==M){N<M?p=-1:N>M&&(p=1);break}}return p},s.prototype.gtn=function(f){return this.cmpn(f)===1},s.prototype.gt=function(f){return this.cmp(f)===1},s.prototype.gten=function(f){return this.cmpn(f)>=0},s.prototype.gte=function(f){return this.cmp(f)>=0},s.prototype.ltn=function(f){return this.cmpn(f)===-1},s.prototype.lt=function(f){return this.cmp(f)===-1},s.prototype.lten=function(f){return this.cmpn(f)<=0},s.prototype.lte=function(f){return this.cmp(f)<=0},s.prototype.eqn=function(f){return this.cmpn(f)===0},s.prototype.eq=function(f){return this.cmp(f)===0},s.red=function(f){return new D(f)},s.prototype.toRed=function(f){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(f){return this.red=f,this},s.prototype.forceRed=function(f){return n(!this.red,"Already a number in reduction context"),this._forceRed(f)},s.prototype.redAdd=function(f){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},s.prototype.redIAdd=function(f){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},s.prototype.redSub=function(f){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},s.prototype.redISub=function(f){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},s.prototype.redShl=function(f){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},s.prototype.redMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},s.prototype.redIMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(f){return n(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var k={k256:null,p224:null,p192:null,p25519:null};function R(b,f){this.name=b,this.p=new s(f,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}R.prototype._tmp=function(){var f=new s(null);return f.words=new Array(Math.ceil(this.n/13)),f},R.prototype.ireduce=function(f){var p=f,w;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),w=p.bitLength();while(w>this.n);var N=w<this.n?-1:p.ucmp(this.p);return N===0?(p.words[0]=0,p.length=1):N>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},R.prototype.split=function(f,p){f.iushrn(this.n,0,p)},R.prototype.imulK=function(f){return f.imul(this.k)};function L(){R.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(L,R),L.prototype.split=function(f,p){for(var w=4194303,N=Math.min(f.length,9),M=0;M<N;M++)p.words[M]=f.words[M];if(p.length=N,f.length<=9){f.words[0]=0,f.length=1;return}var x=f.words[9];for(p.words[p.length++]=x&w,M=10;M<f.length;M++){var y=f.words[M]|0;f.words[M-10]=(y&w)<<4|x>>>22,x=y}x>>>=22,f.words[M-10]=x,x===0&&f.length>10?f.length-=10:f.length-=9},L.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var p=0,w=0;w<f.length;w++){var N=f.words[w]|0;p+=N*977,f.words[w]=p&67108863,p=N*64+(p/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function F(){R.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(F,R);function B(){R.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(B,R);function q(){R.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(q,R),q.prototype.imulK=function(f){for(var p=0,w=0;w<f.length;w++){var N=(f.words[w]|0)*19+p,M=N&67108863;N>>>=26,f.words[w]=M,p=N}return p!==0&&(f.words[f.length++]=p),f},s._prime=function(f){if(k[f])return k[f];var p;if(f==="k256")p=new L;else if(f==="p224")p=new F;else if(f==="p192")p=new B;else if(f==="p25519")p=new q;else throw new Error("Unknown prime "+f);return k[f]=p,p};function D(b){if(typeof b=="string"){var f=s._prime(b);this.m=f.p,this.prime=f}else n(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}D.prototype._verify1=function(f){n(f.negative===0,"red works only with positives"),n(f.red,"red works only with red numbers")},D.prototype._verify2=function(f,p){n((f.negative|p.negative)===0,"red works only with positives"),n(f.red&&f.red===p.red,"red works only with red numbers")},D.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):(u(f,f.umod(this.m)._forceRed(this)),f)},D.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},D.prototype.add=function(f,p){this._verify2(f,p);var w=f.add(p);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},D.prototype.iadd=function(f,p){this._verify2(f,p);var w=f.iadd(p);return w.cmp(this.m)>=0&&w.isub(this.m),w},D.prototype.sub=function(f,p){this._verify2(f,p);var w=f.sub(p);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},D.prototype.isub=function(f,p){this._verify2(f,p);var w=f.isub(p);return w.cmpn(0)<0&&w.iadd(this.m),w},D.prototype.shl=function(f,p){return this._verify1(f),this.imod(f.ushln(p))},D.prototype.imul=function(f,p){return this._verify2(f,p),this.imod(f.imul(p))},D.prototype.mul=function(f,p){return this._verify2(f,p),this.imod(f.mul(p))},D.prototype.isqr=function(f){return this.imul(f,f.clone())},D.prototype.sqr=function(f){return this.mul(f,f)},D.prototype.sqrt=function(f){if(f.isZero())return f.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var w=this.m.add(new s(1)).iushrn(2);return this.pow(f,w)}for(var N=this.m.subn(1),M=0;!N.isZero()&&N.andln(1)===0;)M++,N.iushrn(1);n(!N.isZero());var x=new s(1).toRed(this),y=x.redNeg(),C=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new s(2*I*I).toRed(this);this.pow(I,C).cmp(y)!==0;)I.redIAdd(y);for(var j=this.pow(I,N),K=this.pow(f,N.addn(1).iushrn(1)),V=this.pow(f,N),te=M;V.cmp(x)!==0;){for(var se=V,ce=0;se.cmp(x)!==0;ce++)se=se.redSqr();n(ce<te);var ie=this.pow(j,new s(1).iushln(te-ce-1));K=K.redMul(ie),j=ie.redSqr(),V=V.redMul(j),te=ce}return K},D.prototype.invm=function(f){var p=f._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},D.prototype.pow=function(f,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return f.clone();var w=4,N=new Array(1<<w);N[0]=new s(1).toRed(this),N[1]=f;for(var M=2;M<N.length;M++)N[M]=this.mul(N[M-1],f);var x=N[0],y=0,C=0,I=p.bitLength()%26;for(I===0&&(I=26),M=p.length-1;M>=0;M--){for(var j=p.words[M],K=I-1;K>=0;K--){var V=j>>K&1;if(x!==N[0]&&(x=this.sqr(x)),V===0&&y===0){C=0;continue}y<<=1,y|=V,C++,!(C!==w&&(M!==0||K!==0))&&(x=this.mul(x,N[y]),C=0,y=0)}I=26}return x},D.prototype.convertTo=function(f){var p=f.umod(this.m);return p===f?p.clone():p},D.prototype.convertFrom=function(f){var p=f.clone();return p.red=null,p},s.mont=function(f){return new E(f)};function E(b){D.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(E,D),E.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},E.prototype.convertFrom=function(f){var p=this.imod(f.mul(this.rinv));return p.red=null,p},E.prototype.imul=function(f,p){if(f.isZero()||p.isZero())return f.words[0]=0,f.length=1,f;var w=f.imul(p),N=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=w.isub(N).iushrn(this.shift),x=M;return M.cmp(this.m)>=0?x=M.isub(this.m):M.cmpn(0)<0&&(x=M.iadd(this.m)),x._forceRed(this)},E.prototype.mul=function(f,p){if(f.isZero()||p.isZero())return new s(0)._forceRed(this);var w=f.mul(p),N=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=w.isub(N).iushrn(this.shift),x=M;return M.cmp(this.m)>=0?x=M.isub(this.m):M.cmpn(0)<0&&(x=M.iadd(this.m)),x._forceRed(this)},E.prototype.invm=function(f){var p=this.imod(f._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(t,Sr)})(lI);var h9=lI.exports;const v6=ha(h9);var J_={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Xe,n=r.Buffer;function i(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s);function s(o,a,c){return n(o,a,c)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},s.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=n(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(J_,J_.exports);var hI=J_.exports,tw=hI.Buffer;function hq(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(g){if((Array.isArray(g)||g instanceof Uint8Array)&&(g=tw.from(g)),!tw.isBuffer(g))throw new TypeError("Expected Buffer");if(g.length===0)return"";for(var m=0,v=0,$=0,_=g.length;$!==_&&g[$]===0;)$++,m++;for(var S=(_-$)*l+1>>>0,A=new Uint8Array(S);$!==_;){for(var T=g[$],k=0,R=S-1;(T!==0||k<v)&&R!==-1;R--,k++)T+=256*A[R]>>>0,A[R]=T%o>>>0,T=T/o>>>0;if(T!==0)throw new Error("Non-zero carry");v=k,$++}for(var L=S-v;L!==S&&A[L]===0;)L++;for(var F=a.repeat(m);L<S;++L)F+=t.charAt(A[L]);return F}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return tw.alloc(0);for(var m=0,v=0,$=0;g[m]===a;)v++,m++;for(var _=(g.length-m)*c+1>>>0,S=new Uint8Array(_);m<g.length;){var A=g.charCodeAt(m);if(A>255)return;var T=e[A];if(T===255)return;for(var k=0,R=_-1;(T!==0||k<$)&&R!==-1;R--,k++)T+=o*S[R]>>>0,S[R]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");$=k,m++}for(var L=_-$;L!==_&&S[L]===0;)L++;var F=tw.allocUnsafe(v+(_-L));F.fill(0,0,v);for(var B=v;L!==_;)F[B++]=S[L++];return F}function d(g){var m=h(g);if(m)return m;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:h,decode:d}}var dq=hq,fq=dq,pq="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",gq=fq(pq);const yi=ha(gq),E6=WO;var pi={},rw=hI.Buffer;function mq(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(g){if((Array.isArray(g)||g instanceof Uint8Array)&&(g=rw.from(g)),!rw.isBuffer(g))throw new TypeError("Expected Buffer");if(g.length===0)return"";for(var m=0,v=0,$=0,_=g.length;$!==_&&g[$]===0;)$++,m++;for(var S=(_-$)*l+1>>>0,A=new Uint8Array(S);$!==_;){for(var T=g[$],k=0,R=S-1;(T!==0||k<v)&&R!==-1;R--,k++)T+=256*A[R]>>>0,A[R]=T%o>>>0,T=T/o>>>0;if(T!==0)throw new Error("Non-zero carry");v=k,$++}for(var L=S-v;L!==S&&A[L]===0;)L++;for(var F=a.repeat(m);L<S;++L)F+=t.charAt(A[L]);return F}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return rw.alloc(0);for(var m=0,v=0,$=0;g[m]===a;)v++,m++;for(var _=(g.length-m)*c+1>>>0,S=new Uint8Array(_);m<g.length;){var A=g.charCodeAt(m);if(A>255)return;var T=e[A];if(T===255)return;for(var k=0,R=_-1;(T!==0||k<$)&&R!==-1;R--,k++)T+=o*S[R]>>>0,S[R]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");$=k,m++}for(var L=_-$;L!==_&&S[L]===0;)L++;var F=rw.allocUnsafe(v+(_-L));F.fill(0,0,v);for(var B=v;L!==_;)F[B++]=S[L++];return F}function d(g){var m=h(g);if(m)return m;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:h,decode:d}}var yq=mq,wq=yq,bq="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",vq=wq(bq);function Oc(t,e,r){return e<=t&&t<=r}function xv(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function Eq(t){for(var e=String(t),r=e.length,n=0,i=[];n<r;){var s=e.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===r-1)i.push(65533);else{var o=t.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=s&1023,c=o&1023;i.push(65536+(a<<10)+c),n+=1}else i.push(65533)}n+=1}return i}function _q(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var yb=-1;function dI(t){this.tokens=[].slice.call(t)}dI.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():yb},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var cp=-1;function oE(t,e){if(t)throw TypeError("Decoder error");return e||65533}var wb="utf-8";function bb(t,e){if(!(this instanceof bb))return new bb(t,e);if(t=t!==void 0?String(t).toLowerCase():wb,t!==wb)throw new Error("Encoding not supported. Only utf-8 is supported");e=xv(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}bb.prototype={decode:function(e,r){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),r=xv(r),this._streaming||(this._decoder=new Sq({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var i=new dI(n),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==cp);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===cp)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),_q(s)}};function vb(t,e){if(!(this instanceof vb))return new vb(t,e);if(t=t!==void 0?String(t).toLowerCase():wb,t!==wb)throw new Error("Encoding not supported. Only utf-8 is supported");e=xv(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}vb.prototype={encode:function(e,r){e=e?String(e):"",r=xv(r),this._streaming||(this._encoder=new xq(this._options)),this._streaming=!!r.stream;for(var n=[],i=new dI(Eq(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==cp);)Array.isArray(s)?n.push.apply(n,s):n.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==cp;)Array.isArray(s)?n.push.apply(n,s):n.push(s);this._encoder=null}return new Uint8Array(n)}};function Sq(t){var e=t.fatal,r=0,n=0,i=0,s=128,o=191;this.handler=function(a,c){if(c===yb&&i!==0)return i=0,oE(e);if(c===yb)return cp;if(i===0){if(Oc(c,0,127))return c;if(Oc(c,194,223))i=1,r=c-192;else if(Oc(c,224,239))c===224&&(s=160),c===237&&(o=159),i=2,r=c-224;else if(Oc(c,240,244))c===240&&(s=144),c===244&&(o=143),i=3,r=c-240;else return oE(e);return r=r<<6*i,null}if(!Oc(c,s,o))return r=i=n=0,s=128,o=191,a.prepend(c),oE(e);if(s=128,o=191,n+=1,r+=c-128<<6*(i-n),n!==i)return null;var l=r;return r=i=n=0,l}}function xq(t){t.fatal,this.handler=function(e,r){if(r===yb)return cp;if(Oc(r,0,127))return r;var n,i;Oc(r,128,2047)?(n=1,i=192):Oc(r,2048,65535)?(n=2,i=224):Oc(r,65536,1114111)&&(n=3,i=240);for(var s=[(r>>6*n)+i];n>0;){var o=r>>6*(n-1);s.push(128|o&63),n-=1}return s}}const Iq=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:bb,TextEncoder:vb},Symbol.toStringTag,{value:"Module"})),Aq=zm(Iq);var Cq=Sr&&Sr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Nq=Sr&&Sr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ha=Sr&&Sr.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},Mq=Sr&&Sr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&Cq(e,t,r);return Nq(e,t),e},d9=Sr&&Sr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pi,"__esModule",{value:!0});var f9=pi.deserializeUnchecked=b9=pi.deserialize=w9=pi.serialize=pi.BinaryReader=pi.BinaryWriter=pi.BorshError=pi.baseDecode=pi.baseEncode=void 0;const Fl=d9(h9),p9=d9(vq),Tq=Mq(Aq),$q=typeof TextDecoder!="function"?Tq.TextDecoder:TextDecoder,Pq=new $q("utf-8",{fatal:!0});function Oq(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),p9.default.encode(Buffer.from(t))}pi.baseEncode=Oq;function kq(t){return Buffer.from(p9.default.decode(t))}pi.baseDecode=kq;const aE=1024;class Xi extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}pi.BorshError=Xi;class g9{constructor(){this.buf=Buffer.alloc(aE),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(aE)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Fl.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Fl.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Fl.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Fl.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(aE)]),this.length+=e.length}writeString(e){this.maybeResize();const r=Buffer.from(e,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,r){this.maybeResize(),this.writeU32(e.length);for(const n of e)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}}pi.BinaryWriter=g9;function Ka(t,e,r){const n=r.value;r.value=function(...i){try{return n.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Xi("Reached the end of buffer when deserializing")}throw s}}}class Xs{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Fl.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Fl.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Fl.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Fl.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Xi(`Expected buffer length ${e} isn't within bounds`);const r=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,r}readString(){const e=this.readU32(),r=this.readBuffer(e);try{return Pq.decode(r)}catch(n){throw new Xi(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const r=this.readU32(),n=Array();for(let i=0;i<r;++i)n.push(e());return n}}Ha([Ka],Xs.prototype,"readU8",null);Ha([Ka],Xs.prototype,"readU16",null);Ha([Ka],Xs.prototype,"readU32",null);Ha([Ka],Xs.prototype,"readU64",null);Ha([Ka],Xs.prototype,"readU128",null);Ha([Ka],Xs.prototype,"readU256",null);Ha([Ka],Xs.prototype,"readU512",null);Ha([Ka],Xs.prototype,"readString",null);Ha([Ka],Xs.prototype,"readFixedArray",null);Ha([Ka],Xs.prototype,"readArray",null);pi.BinaryReader=Xs;function m9(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Ku(t,e,r,n,i){try{if(typeof n=="string")i[`write${m9(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new Xi(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new Xi(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let s=0;s<n[1];s++)Ku(t,null,r[s],n[0],i)}else i.writeArray(r,s=>{Ku(t,e,s,n[0],i)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?i.writeU8(0):(i.writeU8(1),Ku(t,e,r,n.type,i));break}case"map":{i.writeU32(r.size),r.forEach((s,o)=>{Ku(t,e,o,n.key,i),Ku(t,e,s,n.value,i)});break}default:throw new Xi(`FieldType ${n} unrecognized`)}else y9(t,r,i)}catch(s){throw s instanceof Xi&&s.addToFieldPath(e),s}}function y9(t,e,r){if(typeof e.borshSerialize=="function"){e.borshSerialize(r);return}const n=t.get(e.constructor);if(!n)throw new Xi(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([i,s])=>{Ku(t,i,e[i],s,r)});else if(n.kind==="enum"){const i=e[n.field];for(let s=0;s<n.values.length;++s){const[o,a]=n.values[s];if(o===i){r.writeU8(s),Ku(t,o,e[o],a,r);break}}}else throw new Xi(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function Rq(t,e,r=g9){const n=new r;return y9(t,e,n),n.toArray()}var w9=pi.serialize=Rq;function Vu(t,e,r,n){try{if(typeof r=="string")return n[`read${m9(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){const i=[];for(let s=0;s<r[1];s++)i.push(Vu(t,null,r[0],n));return i}else return n.readArray(()=>Vu(t,e,r[0],n))}if(r.kind==="option")return n.readU8()?Vu(t,e,r.type,n):void 0;if(r.kind==="map"){let i=new Map;const s=n.readU32();for(let o=0;o<s;o++){const a=Vu(t,e,r.key,n),c=Vu(t,e,r.value,n);i.set(a,c)}return i}return fI(t,r,n)}catch(i){throw i instanceof Xi&&i.addToFieldPath(e),i}}function fI(t,e,r){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(r);const n=t.get(e);if(!n)throw new Xi(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){const i={};for(const[s,o]of t.get(e).fields)i[s]=Vu(t,s,o,r);return new e(i)}if(n.kind==="enum"){const i=r.readU8();if(i>=n.values.length)throw new Xi(`Enum index: ${i} is out of range`);const[s,o]=n.values[i],a=Vu(t,s,o,r);return new e({[s]:a})}throw new Xi(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function Dq(t,e,r,n=Xs){const i=new n(r),s=fI(t,e,i);if(i.offset<r.length)throw new Xi(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return s}var b9=pi.deserialize=Dq;function Lq(t,e,r,n=Xs){const i=new n(r);return fI(t,e,i)}f9=pi.deserializeUnchecked=Lq;var re={};Object.defineProperty(re,"__esModule",{value:!0});re.s16=re.s8=re.nu64be=re.u48be=re.u40be=re.u32be=re.u24be=re.u16be=ui=re.nu64=re.u48=re.u40=Le=re.u32=re.u24=vo=re.u16=Ut=re.u8=yh=re.offset=re.greedy=re.Constant=re.UTF8=re.CString=re.Blob=re.Boolean=re.BitField=re.BitStructure=re.VariantLayout=re.Union=re.UnionLayoutDiscriminator=re.UnionDiscriminator=re.Structure=re.Sequence=re.DoubleBE=re.Double=re.FloatBE=re.Float=re.NearInt64BE=re.NearInt64=re.NearUInt64BE=re.NearUInt64=re.IntBE=re.Int=re.UIntBE=re.UInt=re.OffsetLayout=re.GreedyCount=re.ExternalLayout=re.bindConstructorLayout=re.nameWithProperty=re.Layout=re.uint8ArrayToBuffer=re.checkUint8Array=void 0;re.constant=re.utf8=re.cstr=Ur=re.blob=re.unionLayoutDiscriminator=re.union=zi=re.seq=re.bits=Te=re.struct=re.f64be=re.f64=re.f32be=re.f32=re.ns64be=re.s48be=re.s40be=re.s32be=re.s24be=re.s16be=Ls=re.ns64=re.s48=re.s40=re.s32=re.s24=void 0;const pI=Xe;function kp(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}re.checkUint8Array=kp;function kt(t){return kp(t),pI.Buffer.from(t.buffer,t.byteOffset,t.length)}re.uint8ArrayToBuffer=kt;class rr{constructor(e,r){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=r}makeDestinationObject(){return{}}getSpan(e,r){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const r=Object.create(this.constructor.prototype);return Object.assign(r,this),r.property=e,r}fromArray(e){}}re.Layout=rr;function gI(t,e){return e.property?t+"["+e.property+"]":t}re.nameWithProperty=gI;function Bq(t,e){if(typeof t!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof rr))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(r,n){return e.encode(this,r,n)},writable:!0}),Object.defineProperty(t,"decode",{value(r,n){return e.decode(r,n)},writable:!0})}re.bindConstructorLayout=Bq;class ws extends rr{isCount(){throw new Error("ExternalLayout is abstract")}}re.ExternalLayout=ws;class v9 extends ws{constructor(e=1,r){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,r),this.elementSpan=e}isCount(){return!0}decode(e,r=0){kp(e);const n=e.length-r;return Math.floor(n/this.elementSpan)}encode(e,r,n){return 0}}re.GreedyCount=v9;class mI extends ws{constructor(e,r=0,n){if(!(e instanceof rr))throw new TypeError("layout must be a Layout");if(!Number.isInteger(r))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=r}isCount(){return this.layout instanceof Ao||this.layout instanceof ia}decode(e,r=0){return this.layout.decode(e,r+this.offset)}encode(e,r,n=0){return this.layout.encode(e,r,n+this.offset)}}re.OffsetLayout=mI;class Ao extends rr{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return kt(e).readUIntLE(r,this.span)}encode(e,r,n=0){return kt(r).writeUIntLE(e,n,this.span),this.span}}re.UInt=Ao;class ia extends rr{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return kt(e).readUIntBE(r,this.span)}encode(e,r,n=0){return kt(r).writeUIntBE(e,n,this.span),this.span}}re.UIntBE=ia;class Kh extends rr{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return kt(e).readIntLE(r,this.span)}encode(e,r,n=0){return kt(r).writeIntLE(e,n,this.span),this.span}}re.Int=Kh;class Rp extends rr{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return kt(e).readIntBE(r,this.span)}encode(e,r,n=0){return kt(r).writeIntBE(e,n,this.span),this.span}}re.IntBE=Rp;const X_=Math.pow(2,32);function Iv(t){const e=Math.floor(t/X_),r=t-e*X_;return{hi32:e,lo32:r}}function Av(t,e){return t*X_+e}class E9 extends rr{constructor(e){super(8,e)}decode(e,r=0){const n=kt(e),i=n.readUInt32LE(r),s=n.readUInt32LE(r+4);return Av(s,i)}encode(e,r,n=0){const i=Iv(e),s=kt(r);return s.writeUInt32LE(i.lo32,n),s.writeUInt32LE(i.hi32,n+4),8}}re.NearUInt64=E9;class _9 extends rr{constructor(e){super(8,e)}decode(e,r=0){const n=kt(e),i=n.readUInt32BE(r),s=n.readUInt32BE(r+4);return Av(i,s)}encode(e,r,n=0){const i=Iv(e),s=kt(r);return s.writeUInt32BE(i.hi32,n),s.writeUInt32BE(i.lo32,n+4),8}}re.NearUInt64BE=_9;class S9 extends rr{constructor(e){super(8,e)}decode(e,r=0){const n=kt(e),i=n.readUInt32LE(r),s=n.readInt32LE(r+4);return Av(s,i)}encode(e,r,n=0){const i=Iv(e),s=kt(r);return s.writeUInt32LE(i.lo32,n),s.writeInt32LE(i.hi32,n+4),8}}re.NearInt64=S9;class x9 extends rr{constructor(e){super(8,e)}decode(e,r=0){const n=kt(e),i=n.readInt32BE(r),s=n.readUInt32BE(r+4);return Av(i,s)}encode(e,r,n=0){const i=Iv(e),s=kt(r);return s.writeInt32BE(i.hi32,n),s.writeUInt32BE(i.lo32,n+4),8}}re.NearInt64BE=x9;class I9 extends rr{constructor(e){super(4,e)}decode(e,r=0){return kt(e).readFloatLE(r)}encode(e,r,n=0){return kt(r).writeFloatLE(e,n),4}}re.Float=I9;class A9 extends rr{constructor(e){super(4,e)}decode(e,r=0){return kt(e).readFloatBE(r)}encode(e,r,n=0){return kt(r).writeFloatBE(e,n),4}}re.FloatBE=A9;class C9 extends rr{constructor(e){super(8,e)}decode(e,r=0){return kt(e).readDoubleLE(r)}encode(e,r,n=0){return kt(r).writeDoubleLE(e,n),8}}re.Double=C9;class N9 extends rr{constructor(e){super(8,e)}decode(e,r=0){return kt(e).readDoubleBE(r)}encode(e,r,n=0){return kt(r).writeDoubleBE(e,n),8}}re.DoubleBE=N9;class M9 extends rr{constructor(e,r,n){if(!(e instanceof rr))throw new TypeError("elementLayout must be a Layout");if(!(r instanceof ws&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(r instanceof ws)&&0<e.span&&(i=r*e.span),super(i,n),this.elementLayout=e,this.count=r}getSpan(e,r=0){if(0<=this.span)return this.span;let n=0,i=this.count;if(i instanceof ws&&(i=i.decode(e,r)),0<this.elementLayout.span)n=i*this.elementLayout.span;else{let s=0;for(;s<i;)n+=this.elementLayout.getSpan(e,r+n),++s}return n}decode(e,r=0){const n=[];let i=0,s=this.count;for(s instanceof ws&&(s=s.decode(e,r));i<s;)n.push(this.elementLayout.decode(e,r)),r+=this.elementLayout.getSpan(e,r),i+=1;return n}encode(e,r,n=0){const i=this.elementLayout,s=e.reduce((o,a)=>o+i.encode(a,r,n+o),0);return this.count instanceof ws&&this.count.encode(e.length,r,n),s}}re.Sequence=M9;class T9 extends rr{constructor(e,r,n){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof rr,!0)))throw new TypeError("fields must be array of Layout instances");typeof r=="boolean"&&n===void 0&&(n=r,r=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,r),this.fields=e,this.decodePrefixes=!!n}getSpan(e,r=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((i,s)=>{const o=s.getSpan(e,r);return r+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,r=0){kp(e);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,r)),r+=i.getSpan(e,r),this.decodePrefixes&&e.length===r)break;return n}encode(e,r,n=0){const i=n;let s=0,o=0;for(const a of this.fields){let c=a.span;if(o=0<c?c:0,a.property!==void 0){const l=e[a.property];l!==void 0&&(o=a.encode(l,r,n),0>c&&(c=a.getSpan(r,n)))}s=n,n+=c}return s+o-i}fromArray(e){const r=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(r[n.property]=e.shift());return r}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const r of this.fields)if(r.property===e)return r}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let r=0;for(const n of this.fields){if(n.property===e)return r;0>n.span?r=-1:0<=r&&(r+=n.span)}}}re.Structure=T9;class yI{constructor(e){this.property=e}decode(e,r){throw new Error("UnionDiscriminator is abstract")}encode(e,r,n){throw new Error("UnionDiscriminator is abstract")}}re.UnionDiscriminator=yI;class Eb extends yI{constructor(e,r){if(!(e instanceof ws&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(r||e.property||"variant"),this.layout=e}decode(e,r){return this.layout.decode(e,r)}encode(e,r,n){return this.layout.encode(e,r,n)}}re.UnionLayoutDiscriminator=Eb;class wI extends rr{constructor(e,r,n){let i;if(e instanceof Ao||e instanceof ia)i=new Eb(new mI(e));else if(e instanceof ws&&e.isCount())i=new Eb(e);else if(e instanceof yI)i=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(r===void 0&&(r=null),!(r===null||r instanceof rr))throw new TypeError("defaultLayout must be null or a Layout");if(r!==null){if(0>r.span)throw new Error("defaultLayout must have constant span");r.property===void 0&&(r=r.replicate("content"))}let s=-1;r&&(s=r.span,0<=s&&(e instanceof Ao||e instanceof ia)&&(s+=i.layout.span)),super(s,n),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof Ao||e instanceof ia,this.defaultLayout=r,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,r=0){if(0<=this.span)return this.span;const n=this.getVariant(e,r);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,r)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const r=this.registry[e[this.discriminator.property]];if(r&&(!r.layout||r.property&&Object.prototype.hasOwnProperty.call(e,r.property)))return r}else for(const r in this.registry){const n=this.registry[r];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e,r=0){let n;const i=this.discriminator,s=i.decode(e,r),o=this.registry[s];if(o===void 0){const a=this.defaultLayout;let c=0;this.usesPrefixDiscriminator&&(c=i.layout.span),n=this.makeDestinationObject(),n[i.property]=s,n[a.property]=a.decode(e,r+c)}else n=o.decode(e,r);return n}encode(e,r,n=0){const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(e[s.property],r,n),a+o.encode(e[o.property],r,n+a)}return i.encode(e,r,n)}addVariant(e,r,n){const i=new $9(this,e,r,n);return this.registry[e]=i,i}getVariant(e,r=0){let n;return e instanceof Uint8Array?n=this.discriminator.decode(e,r):n=e,this.registry[n]}}re.Union=wI;class $9 extends rr{constructor(e,r,n,i){if(!(e instanceof wI))throw new TypeError("union must be a Union");if(!Number.isInteger(r)||0>r)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof rr))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=n?n.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=r,this.layout=n||null}getSpan(e,r=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,r+n)),n+i}decode(e,r=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(e,r))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,r+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,r,n=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,r,n);let s=i;if(this.layout&&(this.layout.encode(e[this.property],r,n+i),s+=this.layout.getSpan(r,n+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}re.VariantLayout=$9;function ef(t){return 0>t&&(t+=4294967296),t}class bI extends rr{constructor(e,r,n){if(!(e instanceof Ao||e instanceof ia))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof r=="string"&&n===void 0&&(n=r,r=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!r,this.fields=[];let i=0;this._packedSetValue=function(s){return i=ef(s),this},this._packedGetValue=function(){return i}}decode(e,r=0){const n=this.makeDestinationObject(),i=this.word.decode(e,r);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(n[s.property]=s.decode(e));return n}encode(e,r,n=0){const i=this.word.decode(r,n);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const o=e[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),r,n)}addField(e,r){const n=new vI(this,e,r);return this.fields.push(n),n}addBoolean(e){const r=new P9(this,e);return this.fields.push(r),r}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const r of this.fields)if(r.property===e)return r}}re.BitStructure=bI;class vI{constructor(e,r,n){if(!(e instanceof bI))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(r)||0>=r)throw new TypeError("bits must be positive integer");const i=8*e.span,s=e.fields.reduce((o,a)=>o+a.bits,0);if(r+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=e,this.bits=r,this.valueMask=(1<<r)-1,r===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-r),this.wordMask=ef(this.valueMask<<this.start),this.property=n}decode(e,r){const n=this.container._packedGetValue();return ef(n&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==ef(e&this.valueMask))throw new TypeError(gI("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const r=this.container._packedGetValue(),n=ef(e<<this.start);this.container._packedSetValue(ef(r&~this.wordMask)|n)}}re.BitField=vI;let P9=class extends vI{constructor(e,r){super(e,1,r)}decode(e,r){return!!super.decode(e,r)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};re.Boolean=P9;let O9=class extends rr{constructor(e,r){if(!(e instanceof ws&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof ws||(n=e),super(n,r),this.length=e}getSpan(e,r){let n=this.span;return 0>n&&(n=this.length.decode(e,r)),n}decode(e,r=0){let n=this.span;return 0>n&&(n=this.length.decode(e,r)),kt(e).slice(r,r+n)}encode(e,r,n){let i=this.length;if(this.length instanceof ws&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(gI("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(n+i>r.length)throw new RangeError("encoding overruns Uint8Array");const s=kt(e);return kt(r).write(s.toString("hex"),n,i,"hex"),this.length instanceof ws&&this.length.encode(i,r,n),i}};re.Blob=O9;class k9 extends rr{constructor(e){super(-1,e)}getSpan(e,r=0){kp(e);let n=r;for(;n<e.length&&e[n]!==0;)n+=1;return 1+n-r}decode(e,r=0){const n=this.getSpan(e,r);return kt(e).slice(r,r+n-1).toString("utf-8")}encode(e,r,n=0){typeof e!="string"&&(e=String(e));const i=pI.Buffer.from(e,"utf8"),s=i.length;if(n+s>r.length)throw new RangeError("encoding overruns Buffer");const o=kt(r);return i.copy(o,n),o[n+s]=0,s+1}}re.CString=k9;class R9 extends rr{constructor(e,r){if(typeof e=="string"&&r===void 0&&(r=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,r),this.maxSpan=e}getSpan(e,r=0){return kp(e),e.length-r}decode(e,r=0){const n=this.getSpan(e,r);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return kt(e).slice(r,r+n).toString("utf-8")}encode(e,r,n=0){typeof e!="string"&&(e=String(e));const i=pI.Buffer.from(e,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(n+s>r.length)throw new RangeError("encoding overruns Buffer");return i.copy(kt(r),n),s}}re.UTF8=R9;class D9 extends rr{constructor(e,r){super(0,r),this.value=e}decode(e,r){return this.value}encode(e,r,n){return 0}}re.Constant=D9;re.greedy=(t,e)=>new v9(t,e);var yh=re.offset=(t,e,r)=>new mI(t,e,r),Ut=re.u8=t=>new Ao(1,t),vo=re.u16=t=>new Ao(2,t);re.u24=t=>new Ao(3,t);var Le=re.u32=t=>new Ao(4,t);re.u40=t=>new Ao(5,t);re.u48=t=>new Ao(6,t);var ui=re.nu64=t=>new E9(t);re.u16be=t=>new ia(2,t);re.u24be=t=>new ia(3,t);re.u32be=t=>new ia(4,t);re.u40be=t=>new ia(5,t);re.u48be=t=>new ia(6,t);re.nu64be=t=>new _9(t);re.s8=t=>new Kh(1,t);re.s16=t=>new Kh(2,t);re.s24=t=>new Kh(3,t);re.s32=t=>new Kh(4,t);re.s40=t=>new Kh(5,t);re.s48=t=>new Kh(6,t);var Ls=re.ns64=t=>new S9(t);re.s16be=t=>new Rp(2,t);re.s24be=t=>new Rp(3,t);re.s32be=t=>new Rp(4,t);re.s40be=t=>new Rp(5,t);re.s48be=t=>new Rp(6,t);re.ns64be=t=>new x9(t);re.f32=t=>new I9(t);re.f32be=t=>new A9(t);re.f64=t=>new C9(t);re.f64be=t=>new N9(t);var Te=re.struct=(t,e,r)=>new T9(t,e,r);re.bits=(t,e,r)=>new bI(t,e,r);var zi=re.seq=(t,e,r)=>new M9(t,e,r);re.union=(t,e,r)=>new wI(t,e,r);re.unionLayoutDiscriminator=(t,e)=>new Eb(t,e);var Ur=re.blob=(t,e)=>new O9(t,e);re.cstr=t=>new k9(t);re.utf8=(t,e)=>new R9(t,e);re.constant=(t,e)=>new D9(t,e);var jq=8078e3,Uq=8078001,Fq=8078004,zq=8078005,qq=8078006,Wq=8078011;function L9(t){return Array.isArray(t)?"%5B"+t.map(L9).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function Hq([t,e]){return`${t}=${L9(e)}`}function Kq(t){const e=Object.entries(t).map(Hq).join("&");return btoa(e)}function Vq(t,e={}){{let r=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(r+=` '${Kq(e)}'`),`${r}\``}}var Wf=class extends Error{constructor(...[e,r]){let n,i;if(r){const{cause:o,...a}=r;o&&(i={cause:o}),Object.keys(a).length>0&&(n=a)}const s=Vq(e,n);super(s,i);ot(this,"cause",this.cause);ot(this,"context");this.context={__code:e,...n},this.name="SolanaError"}};function Gq(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function Yq(t){return Object.freeze({...t,encode:e=>{const r=new Uint8Array(Gq(e,t));return t.write(e,r,0),r}})}function Qq(t){return Object.freeze({...t,decode:(e,r=0)=>t.read(e,r)[0]})}function md(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function Zq(t,e){if(md(t)!==md(e))throw new Wf(Fq);if(md(t)&&md(e)&&t.fixedSize!==e.fixedSize)throw new Wf(zq,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!md(t)&&!md(e)&&t.maxSize!==e.maxSize)throw new Wf(qq,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function Jq(t,e,r=0){if(e.length-r<=0)throw new Wf(jq,{codecDescription:t})}function Xq(t,e,r,n=0){const i=r.length-n;if(i<e)throw new Wf(Uq,{bytesLength:i,codecDescription:t,expected:e})}function eW(t,e,r,n){if(n<e||n>r)throw new Wf(Wq,{codecDescription:t,max:r,min:e,value:n})}function B9(t){return(t==null?void 0:t.endian)!==1}function tW(t){return Yq({fixedSize:t.size,write(e,r,n){t.range&&eW(t.name,t.range[0],t.range[1],e);const i=new ArrayBuffer(t.size);return t.set(new DataView(i),e,B9(t.config)),r.set(new Uint8Array(i),n),n+t.size}})}function rW(t){return Qq({fixedSize:t.size,read(e,r=0){Jq(t.name,e,r),Xq(t.name,t.size,e,r);const n=new DataView(nW(e,r,t.size));return[t.get(n,B9(t.config)),r+t.size]}})}function nW(t,e,r){const n=t.byteOffset+(e??0),i=r??t.byteLength;return t.buffer.slice(n,n+i)}var iW=(t={})=>tW({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,r,n)=>e.setBigUint64(0,BigInt(r),n),size:8}),sW=(t={})=>rW({config:t,get:(e,r)=>e.getBigUint64(0,r),name:"u64",size:8}),oW=(t={})=>Zq(iW(t),sW(t));class aW extends TypeError{constructor(e,r){let n;const{message:i,explanation:s,...o}=e,{path:a}=e,c=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??c),s!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...r()])}}function cW(t){return Jm(t)&&typeof t[Symbol.iterator]=="function"}function Jm(t){return typeof t=="object"&&t!=null}function _b(t){return Jm(t)&&!Array.isArray(t)}function oa(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function lW(t){const{done:e,value:r}=t.next();return e?void 0:r}function uW(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=r,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${oa(n)}\``}=t;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:c}}function*_6(t,e,r,n){cW(t)||(t=[t]);for(const i of t){const s=uW(i,e,r,n);s&&(yield s)}}function*EI(t,e,r={}){const{path:n=[],branch:i=[t],coerce:s=!1,mask:o=!1}=r,a={path:n,branch:i,mask:o};s&&(t=e.coercer(t,a));let c="valid";for(const l of e.validator(t,a))l.explanation=r.message,c="not_valid",yield[l,void 0];for(let[l,u,h]of e.entries(t,a)){const d=EI(u,h,{path:l===void 0?n:[...n,l],branch:l===void 0?i:[...i,u],coerce:s,mask:o,message:r.message});for(const g of d)g[0]?(c=g[0].refinement!=null?"not_refined":"not_valid",yield[g[0],void 0]):s&&(u=g[1],l===void 0?t=u:t instanceof Map?t.set(l,u):t instanceof Set?t.add(u):Jm(t)&&(u!==void 0||l in t)&&(t[l]=u))}if(c!=="not_valid")for(const l of e.refiner(t,a))l.explanation=r.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,t])}let Va=class{constructor(e){const{type:r,schema:n,validator:i,refiner:s,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=r,this.schema=n,this.entries=a,this.coercer=o,i?this.validator=(c,l)=>{const u=i(c,l);return _6(u,l,this,c)}:this.validator=()=>[],s?this.refiner=(c,l)=>{const u=s(c,l);return _6(u,l,this,c)}:this.refiner=()=>[]}assert(e,r){return hW(e,this,r)}create(e,r){return we(e,this,r)}is(e){return j9(e,this)}mask(e,r){return dW(e,this,r)}validate(e,r={}){return Xm(e,this,r)}};function hW(t,e,r){const n=Xm(t,e,{message:r});if(n[0])throw n[0]}function we(t,e,r){const n=Xm(t,e,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function dW(t,e,r){const n=Xm(t,e,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function j9(t,e){return!Xm(t,e)[0]}function Xm(t,e,r={}){const n=EI(t,e,r),i=lW(n);return i[0]?[new aW(i[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Vh(t,e){return new Va({type:t,schema:null,validator:e})}function fW(){return Vh("any",()=>!0)}function be(t){return new Va({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${oa(e)}`}})}function ja(){return Vh("boolean",t=>typeof t=="boolean")}function _I(t){return Vh("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${oa(e)}`)}function Xr(t){const e=oa(t),r=typeof t;return new Va({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${oa(n)}`}})}function pW(){return Vh("never",()=>!1)}function Ee(t){return new Va({...t,validator:(e,r)=>e===null||t.validator(e,r),refiner:(e,r)=>e===null||t.refiner(e,r)})}function X(){return Vh("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${oa(t)}`)}function Re(t){return new Va({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function U9(t,e){return new Va({type:"record",schema:null,*entries(r){if(Jm(r))for(const n in r){const i=r[n];yield[n,n,t],yield[n,i,e]}},validator(r){return _b(r)||`Expected an object, but received: ${oa(r)}`},coercer(r){return _b(r)?{...r}:r}})}function pe(){return Vh("string",t=>typeof t=="string"||`Expected a string, but received: ${oa(t)}`)}function SI(t){const e=pW();return new Va({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],t[i]||e]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${oa(r)}`},coercer(r){return Array.isArray(r)?r.slice():r}})}function le(t){const e=Object.keys(t);return new Va({type:"type",schema:t,*entries(r){if(Jm(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return _b(r)||`Expected an object, but received: ${oa(r)}`},coercer(r){return _b(r)?{...r}:r}})}function rs(t){const e=t.map(r=>r.type).join(" | ");return new Va({type:"union",schema:null,coercer(r,n){for(const i of t){const[s,o]=i.validate(r,{coerce:!0,mask:n.mask});if(!s)return o}return r},validator(r,n){const i=[];for(const s of t){const[...o]=EI(r,s,n),[a]=o;if(a[0])for(const[c]of o)c&&i.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${oa(r)}`,...i]}})}function Dp(){return Vh("unknown",()=>!0)}function ey(t,e,r){return new Va({...t,coercer:(n,i)=>j9(n,e)?t.coercer(r(n,i),i):t.coercer(n,i)})}var nw,gW=new Uint8Array(16);function F9(){if(!nw&&(nw=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!nw))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nw(gW)}const mW=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Cv(t){return typeof t=="string"&&mW.test(t)}var li=[];for(var cE=0;cE<256;++cE)li.push((cE+256).toString(16).substr(1));function Nv(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(li[t[e+0]]+li[t[e+1]]+li[t[e+2]]+li[t[e+3]]+"-"+li[t[e+4]]+li[t[e+5]]+"-"+li[t[e+6]]+li[t[e+7]]+"-"+li[t[e+8]]+li[t[e+9]]+"-"+li[t[e+10]]+li[t[e+11]]+li[t[e+12]]+li[t[e+13]]+li[t[e+14]]+li[t[e+15]]).toLowerCase();if(!Cv(r))throw TypeError("Stringified UUID is invalid");return r}var S6,lE,uE=0,hE=0;function yW(t,e,r){var n=e&&r||0,i=e||new Array(16);t=t||{};var s=t.node||S6,o=t.clockseq!==void 0?t.clockseq:lE;if(s==null||o==null){var a=t.random||(t.rng||F9)();s==null&&(s=S6=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=lE=(a[6]<<8|a[7])&16383)}var c=t.msecs!==void 0?t.msecs:Date.now(),l=t.nsecs!==void 0?t.nsecs:hE+1,u=c-uE+(l-hE)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||c>uE)&&t.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");uE=c,hE=l,lE=o,c+=122192928e5;var h=((c&268435455)*1e4+l)%4294967296;i[n++]=h>>>24&255,i[n++]=h>>>16&255,i[n++]=h>>>8&255,i[n++]=h&255;var d=c/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=d&255,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(var g=0;g<6;++g)i[n+g]=s[g];return e||Nv(i)}function z9(t){if(!Cv(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function wW(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var bW="6ba7b810-9dad-11d1-80b4-00c04fd430c8",vW="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function q9(t,e,r){function n(i,s,o,a){if(typeof i=="string"&&(i=wW(i)),typeof s=="string"&&(s=z9(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+i.length);if(c.set(s),c.set(i,s.length),c=r(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var l=0;l<16;++l)o[a+l]=c[l];return o}return Nv(c)}try{n.name=t}catch{}return n.DNS=bW,n.URL=vW,n}function EW(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return _W(SW(xW(t),t.length*8))}function _W(t){for(var e=[],r=t.length*32,n="0123456789abcdef",i=0;i<r;i+=8){var s=t[i>>5]>>>i%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(o)}return e}function W9(t){return(t+64>>>9<<4)+14+1}function SW(t,e){t[e>>5]|=128<<e%32,t[W9(e)-1]=e;for(var r=1732584193,n=-271733879,i=-1732584194,s=271733878,o=0;o<t.length;o+=16){var a=r,c=n,l=i,u=s;r=Pi(r,n,i,s,t[o],7,-680876936),s=Pi(s,r,n,i,t[o+1],12,-389564586),i=Pi(i,s,r,n,t[o+2],17,606105819),n=Pi(n,i,s,r,t[o+3],22,-1044525330),r=Pi(r,n,i,s,t[o+4],7,-176418897),s=Pi(s,r,n,i,t[o+5],12,1200080426),i=Pi(i,s,r,n,t[o+6],17,-1473231341),n=Pi(n,i,s,r,t[o+7],22,-45705983),r=Pi(r,n,i,s,t[o+8],7,1770035416),s=Pi(s,r,n,i,t[o+9],12,-1958414417),i=Pi(i,s,r,n,t[o+10],17,-42063),n=Pi(n,i,s,r,t[o+11],22,-1990404162),r=Pi(r,n,i,s,t[o+12],7,1804603682),s=Pi(s,r,n,i,t[o+13],12,-40341101),i=Pi(i,s,r,n,t[o+14],17,-1502002290),n=Pi(n,i,s,r,t[o+15],22,1236535329),r=Oi(r,n,i,s,t[o+1],5,-165796510),s=Oi(s,r,n,i,t[o+6],9,-1069501632),i=Oi(i,s,r,n,t[o+11],14,643717713),n=Oi(n,i,s,r,t[o],20,-373897302),r=Oi(r,n,i,s,t[o+5],5,-701558691),s=Oi(s,r,n,i,t[o+10],9,38016083),i=Oi(i,s,r,n,t[o+15],14,-660478335),n=Oi(n,i,s,r,t[o+4],20,-405537848),r=Oi(r,n,i,s,t[o+9],5,568446438),s=Oi(s,r,n,i,t[o+14],9,-1019803690),i=Oi(i,s,r,n,t[o+3],14,-187363961),n=Oi(n,i,s,r,t[o+8],20,1163531501),r=Oi(r,n,i,s,t[o+13],5,-1444681467),s=Oi(s,r,n,i,t[o+2],9,-51403784),i=Oi(i,s,r,n,t[o+7],14,1735328473),n=Oi(n,i,s,r,t[o+12],20,-1926607734),r=ki(r,n,i,s,t[o+5],4,-378558),s=ki(s,r,n,i,t[o+8],11,-2022574463),i=ki(i,s,r,n,t[o+11],16,1839030562),n=ki(n,i,s,r,t[o+14],23,-35309556),r=ki(r,n,i,s,t[o+1],4,-1530992060),s=ki(s,r,n,i,t[o+4],11,1272893353),i=ki(i,s,r,n,t[o+7],16,-155497632),n=ki(n,i,s,r,t[o+10],23,-1094730640),r=ki(r,n,i,s,t[o+13],4,681279174),s=ki(s,r,n,i,t[o],11,-358537222),i=ki(i,s,r,n,t[o+3],16,-722521979),n=ki(n,i,s,r,t[o+6],23,76029189),r=ki(r,n,i,s,t[o+9],4,-640364487),s=ki(s,r,n,i,t[o+12],11,-421815835),i=ki(i,s,r,n,t[o+15],16,530742520),n=ki(n,i,s,r,t[o+2],23,-995338651),r=Ri(r,n,i,s,t[o],6,-198630844),s=Ri(s,r,n,i,t[o+7],10,1126891415),i=Ri(i,s,r,n,t[o+14],15,-1416354905),n=Ri(n,i,s,r,t[o+5],21,-57434055),r=Ri(r,n,i,s,t[o+12],6,1700485571),s=Ri(s,r,n,i,t[o+3],10,-1894986606),i=Ri(i,s,r,n,t[o+10],15,-1051523),n=Ri(n,i,s,r,t[o+1],21,-2054922799),r=Ri(r,n,i,s,t[o+8],6,1873313359),s=Ri(s,r,n,i,t[o+15],10,-30611744),i=Ri(i,s,r,n,t[o+6],15,-1560198380),n=Ri(n,i,s,r,t[o+13],21,1309151649),r=Ri(r,n,i,s,t[o+4],6,-145523070),s=Ri(s,r,n,i,t[o+11],10,-1120210379),i=Ri(i,s,r,n,t[o+2],15,718787259),n=Ri(n,i,s,r,t[o+9],21,-343485551),r=zl(r,a),n=zl(n,c),i=zl(i,l),s=zl(s,u)}return[r,n,i,s]}function xW(t){if(t.length===0)return[];for(var e=t.length*8,r=new Uint32Array(W9(e)),n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function zl(t,e){var r=(t&65535)+(e&65535),n=(t>>16)+(e>>16)+(r>>16);return n<<16|r&65535}function IW(t,e){return t<<e|t>>>32-e}function Mv(t,e,r,n,i,s){return zl(IW(zl(zl(e,t),zl(n,s)),i),r)}function Pi(t,e,r,n,i,s,o){return Mv(e&r|~e&n,t,e,i,s,o)}function Oi(t,e,r,n,i,s,o){return Mv(e&n|r&~n,t,e,i,s,o)}function ki(t,e,r,n,i,s,o){return Mv(e^r^n,t,e,i,s,o)}function Ri(t,e,r,n,i,s,o){return Mv(r^(e|~n),t,e,i,s,o)}var AW=q9("v3",48,EW);function CW(t,e,r){t=t||{};var n=t.random||(t.rng||F9)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return Nv(n)}function NW(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function dE(t,e){return t<<e|t>>>32-e}function MW(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=[];for(var i=0;i<n.length;++i)t.push(n.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),a=new Array(o),c=0;c<o;++c){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=t[c*64+u*4]<<24|t[c*64+u*4+1]<<16|t[c*64+u*4+2]<<8|t[c*64+u*4+3];a[c]=l}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var h=0;h<o;++h){for(var d=new Uint32Array(80),g=0;g<16;++g)d[g]=a[h][g];for(var m=16;m<80;++m)d[m]=dE(d[m-3]^d[m-8]^d[m-14]^d[m-16],1);for(var v=r[0],$=r[1],_=r[2],S=r[3],A=r[4],T=0;T<80;++T){var k=Math.floor(T/20),R=dE(v,5)+NW(k,$,_,S)+A+e[k]+d[T]>>>0;A=S,S=_,_=dE($,30)>>>0,$=v,v=R}r[0]=r[0]+v>>>0,r[1]=r[1]+$>>>0,r[2]=r[2]+_>>>0,r[3]=r[3]+S>>>0,r[4]=r[4]+A>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var TW=q9("v5",80,MW);const $W="00000000-0000-0000-0000-000000000000";function PW(t){if(!Cv(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const OW=Object.freeze(Object.defineProperty({__proto__:null,NIL:$W,parse:z9,stringify:Nv,v1:yW,v3:AW,v4:CW,v5:TW,validate:Cv,version:PW},Symbol.toStringTag,{value:"Module"})),H9=zm(OW),kW=H9.v4,RW=function(t,e,r,n){if(typeof t!="string")throw new TypeError(t+" must be a string");n=n||{};const i=typeof n.version=="number"?n.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:t};if(i===2&&(s.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");s.params=e}if(typeof r>"u"){const o=typeof n.generator=="function"?n.generator:function(){return kW()};s.id=o(s,n)}else i===2&&r===null?n.notificationIdNull&&(s.id=null):s.id=r;return s};var DW=RW;const LW=H9.v4,BW=DW,Xg=function(t,e){if(!(this instanceof Xg))return new Xg(t,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return LW()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=t};var jW=Xg;Xg.prototype.request=function(t,e,r,n){const i=this;let s=null;const o=Array.isArray(t)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&t&&typeof t=="object"&&typeof e=="function")n=e,s=t;else{typeof r=="function"&&(n=r,r=void 0);const l=typeof n=="function";try{s=BW(t,e,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(u){if(l){n(u);return}throw u}if(!l)return s}let c;try{c=JSON.stringify(s,this.options.replacer)}catch(l){n(l);return}return this.callServer(c,function(l,u){i._parseResponse(l,u,n)}),s};Xg.prototype._parseResponse=function(t,e,r){if(t){r(t);return}if(!e){r();return}let n;try{n=JSON.parse(e,this.options.reviver)}catch(i){r(i);return}if(r.length===3)if(Array.isArray(n)){const i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};r(null,n.filter(i),n.filter(s));return}else{r(null,n.error,n.result);return}r(null,n)};const UW=ha(jW);var K9={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function s(c,l,u,h,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new i(u,h||c,d),m=r?r+l:l;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],g]:c._events[m].push(g):(c._events[m]=g,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new n:delete c._events[l]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,h;if(this._eventsCount===0)return l;for(h in u=this._events)e.call(u,h)&&l.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=r?r+l:l,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var d=0,g=h.length,m=new Array(g);d<g;d++)m[d]=h[d].fn;return m},a.prototype.listenerCount=function(l){var u=r?r+l:l,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(l,u,h,d,g,m){var v=r?r+l:l;if(!this._events[v])return!1;var $=this._events[v],_=arguments.length,S,A;if($.fn){switch($.once&&this.removeListener(l,$.fn,void 0,!0),_){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,u),!0;case 3:return $.fn.call($.context,u,h),!0;case 4:return $.fn.call($.context,u,h,d),!0;case 5:return $.fn.call($.context,u,h,d,g),!0;case 6:return $.fn.call($.context,u,h,d,g,m),!0}for(A=1,S=new Array(_-1);A<_;A++)S[A-1]=arguments[A];$.fn.apply($.context,S)}else{var T=$.length,k;for(A=0;A<T;A++)switch($[A].once&&this.removeListener(l,$[A].fn,void 0,!0),_){case 1:$[A].fn.call($[A].context);break;case 2:$[A].fn.call($[A].context,u);break;case 3:$[A].fn.call($[A].context,u,h);break;case 4:$[A].fn.call($[A].context,u,h,d);break;default:if(!S)for(k=1,S=new Array(_-1);k<_;k++)S[k-1]=arguments[k];$[A].fn.apply($[A].context,S)}}return!0},a.prototype.on=function(l,u,h){return s(this,l,u,h,!1)},a.prototype.once=function(l,u,h){return s(this,l,u,h,!0)},a.prototype.removeListener=function(l,u,h,d){var g=r?r+l:l;if(!this._events[g])return this;if(!u)return o(this,g),this;var m=this._events[g];if(m.fn)m.fn===u&&(!d||m.once)&&(!h||m.context===h)&&o(this,g);else{for(var v=0,$=[],_=m.length;v<_;v++)(m[v].fn!==u||d&&!m[v].once||h&&m[v].context!==h)&&$.push(m[v]);$.length?this._events[g]=$.length===1?$[0]:$:o(this,g)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=r?r+l:l,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(K9);var FW=K9.exports;const xI=ha(FW);var zW=class extends xI{constructor(e,r){super();ot(this,"socket");this.socket=new window.WebSocket(e,r.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=n=>this.emit("message",n.data),this.socket.onerror=n=>this.emit("error",n),this.socket.onclose=n=>{this.emit("close",n.code,n.reason)}}send(e,r,n){const i=n||r;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,r){this.socket.close(e,r)}addEventListener(e,r,n){this.socket.addEventListener(e,r,n)}};function qW(t,e){return new zW(t,e)}var WW=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},HW=class extends xI{constructor(e,r="ws://localhost:8080",{autoconnect:n=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},c,l){super();ot(this,"address");ot(this,"rpc_id");ot(this,"queue");ot(this,"options");ot(this,"autoconnect");ot(this,"ready");ot(this,"reconnect");ot(this,"reconnect_timer_id");ot(this,"reconnect_interval");ot(this,"max_reconnects");ot(this,"rest_options");ot(this,"current_reconnects");ot(this,"generate_request_id");ot(this,"socket");ot(this,"webSocketFactory");ot(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=r,this.autoconnect=n,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),l?this.dataPack=l:this.dataPack=new WW,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,r,n,i){return!i&&typeof n=="object"&&(i=n,n=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,r),c={jsonrpc:"2.0",method:e,params:r||void 0,id:a};this.socket.send(this.dataPack.encode(c),i,l=>{if(l)return o(l);this.queue[a]={promise:[s,o]},n&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},n))})})}async login(e){const r=await this.call("rpc.login",e);if(!r)throw new Error("authentication failed");return r}async listMethods(){return await this.call("__listMethods")}notify(e,r){return new Promise((n,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:r};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);n()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const r=await this.call("rpc.on",e);if(typeof e=="string"&&r[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+r[e]);return r}async unsubscribe(e){typeof e=="string"&&(e=[e]);const r=await this.call("rpc.off",e);if(typeof e=="string"&&r[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+r);return r}close(e,r){this.socket&&this.socket.close(e||1e3,r)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(e,r){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,r),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=Xe.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const i=[n.notification];if(n.params.constructor===Object)i.push(n.params);else for(let s=0;s<n.params.length;s++)i.push(n.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",n,i),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,r),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",n,i),1))})}};class V9 extends UO{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,BO(e);const n=nI(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),op(s)}update(e){return fb(this),this.iHash.update(e),this}digestInto(e){fb(this),Wh(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const G9=(t,e,r)=>new V9(t,e).update(r).digest();G9.create=(t,e)=>new V9(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const x6=(t,e)=>(t+(t>=0?e:-e)/Y9)/e;function KW(t,e,r){const[[n,i],[s,o]]=e,a=x6(o*t,r),c=x6(-i*t,r);let l=t-a*n-c*s,u=-a*i-c*o;const h=l<jc,d=u<jc;h&&(l=-l),d&&(u=-u);const g=Ym(Math.ceil(VO(r)/2))+Hf;if(l<jc||l>=g||u<jc||u>=g)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:h,k1:l,k2neg:d,k2:u}}function eS(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function fE(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return Mh(r.lowS,"lowS"),Mh(r.prehash,"prehash"),r.format!==void 0&&eS(r.format),r}class VW extends Error{constructor(e=""){super(e)}}const Tc={Err:VW,_tlv:{encode:(t,e)=>{const{Err:r}=Tc;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=ew(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?ew(i.length/2|128):"";return ew(t)+s+i+e},decode(t,e){const{Err:r}=Tc;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+c);if(l.length!==c)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=Tc;if(t<jc)throw new e("integer: negative integers are not allowed");let r=ew(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Tc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Sv(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Tc,i=an("signature",t),{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(t){const{_tlv:e,_int:r}=Tc,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}},jc=BigInt(0),Hf=BigInt(1),Y9=BigInt(2),iw=BigInt(3),GW=BigInt(4);function Mf(t,e){const{BYTES:r}=t;let n;if(typeof e=="bigint")n=e;else{let i=an("private key",e);try{n=t.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function YW(t,e={}){const r=l9("weierstrass",t,e),{Fp:n,Fn:i}=r;let s=r.CURVE;const{h:o,n:a}=s;Qm(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!n.is0(s.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const l=Z9(n,i);function u(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function h(E,b,f){const{x:p,y:w}=b.toAffine(),N=n.toBytes(p);if(Mh(f,"isCompressed"),f){u();const M=!n.isOdd(w);return Ta(Q9(M),N)}else return Ta(Uint8Array.of(4),N,n.toBytes(w))}function d(E){ea(E,void 0,"Point");const{publicKey:b,publicKeyUncompressed:f}=l,p=E.length,w=E[0],N=E.subarray(1);if(p===b&&(w===2||w===3)){const M=n.fromBytes(N);if(!n.isValid(M))throw new Error("bad point: is not on curve, wrong x");const x=v(M);let y;try{y=n.sqrt(x)}catch(j){const K=j instanceof Error?": "+j.message:"";throw new Error("bad point: is not on curve, sqrt error"+K)}u();const C=n.isOdd(y);return(w&1)===1!==C&&(y=n.neg(y)),{x:M,y}}else if(p===f&&w===4){const M=n.BYTES,x=n.fromBytes(N.subarray(0,M)),y=n.fromBytes(N.subarray(M,M*2));if(!$(x,y))throw new Error("bad point: is not on curve");return{x,y}}else throw new Error(`bad point: got length ${p}, expected compressed=${b} or uncompressed=${f}`)}const g=e.toBytes||h,m=e.fromBytes||d;function v(E){const b=n.sqr(E),f=n.mul(b,E);return n.add(n.add(f,n.mul(E,s.a)),s.b)}function $(E,b){const f=n.sqr(b),p=v(E);return n.eql(f,p)}if(!$(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const _=n.mul(n.pow(s.a,iw),GW),S=n.mul(n.sqr(s.b),BigInt(27));if(n.is0(n.add(_,S)))throw new Error("bad curve params: a or b");function A(E,b,f=!1){if(!n.isValid(b)||f&&n.is0(b))throw new Error(`bad point coordinate ${E}`);return b}function T(E){if(!(E instanceof B))throw new Error("ProjectivePoint expected")}function k(E){if(!c||!c.basises)throw new Error("no endo");return KW(E,c.basises,i.ORDER)}const R=gb((E,b)=>{const{X:f,Y:p,Z:w}=E;if(n.eql(w,n.ONE))return{x:f,y:p};const N=E.is0();b==null&&(b=N?n.ONE:n.inv(w));const M=n.mul(f,b),x=n.mul(p,b),y=n.mul(w,b);if(N)return{x:n.ZERO,y:n.ZERO};if(!n.eql(y,n.ONE))throw new Error("invZ was invalid");return{x:M,y:x}}),L=gb(E=>{if(E.is0()){if(e.allowInfinityPoint&&!n.is0(E.Y))return;throw new Error("bad point: ZERO")}const{x:b,y:f}=E.toAffine();if(!n.isValid(b)||!n.isValid(f))throw new Error("bad point: x or y not field elements");if(!$(b,f))throw new Error("bad point: equation left != right");if(!E.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function F(E,b,f,p,w){return f=new B(n.mul(f.X,E),f.Y,f.Z),b=mb(p,b),f=mb(w,f),b.add(f)}class B{constructor(b,f,p){this.X=A("x",b),this.Y=A("y",f,!0),this.Z=A("z",p),Object.freeze(this)}static CURVE(){return s}static fromAffine(b){const{x:f,y:p}=b||{};if(!b||!n.isValid(f)||!n.isValid(p))throw new Error("invalid affine point");if(b instanceof B)throw new Error("projective point not allowed");return n.is0(f)&&n.is0(p)?B.ZERO:new B(f,p,n.ONE)}static fromBytes(b){const f=B.fromAffine(m(ea(b,void 0,"point")));return f.assertValidity(),f}static fromHex(b){return B.fromBytes(an("pointHex",b))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(b=8,f=!0){return D.createCache(this,b),f||this.multiply(iw),this}assertValidity(){L(this)}hasEvenY(){const{y:b}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(b)}equals(b){T(b);const{X:f,Y:p,Z:w}=this,{X:N,Y:M,Z:x}=b,y=n.eql(n.mul(f,x),n.mul(N,w)),C=n.eql(n.mul(p,x),n.mul(M,w));return y&&C}negate(){return new B(this.X,n.neg(this.Y),this.Z)}double(){const{a:b,b:f}=s,p=n.mul(f,iw),{X:w,Y:N,Z:M}=this;let x=n.ZERO,y=n.ZERO,C=n.ZERO,I=n.mul(w,w),j=n.mul(N,N),K=n.mul(M,M),V=n.mul(w,N);return V=n.add(V,V),C=n.mul(w,M),C=n.add(C,C),x=n.mul(b,C),y=n.mul(p,K),y=n.add(x,y),x=n.sub(j,y),y=n.add(j,y),y=n.mul(x,y),x=n.mul(V,x),C=n.mul(p,C),K=n.mul(b,K),V=n.sub(I,K),V=n.mul(b,V),V=n.add(V,C),C=n.add(I,I),I=n.add(C,I),I=n.add(I,K),I=n.mul(I,V),y=n.add(y,I),K=n.mul(N,M),K=n.add(K,K),I=n.mul(K,V),x=n.sub(x,I),C=n.mul(K,j),C=n.add(C,C),C=n.add(C,C),new B(x,y,C)}add(b){T(b);const{X:f,Y:p,Z:w}=this,{X:N,Y:M,Z:x}=b;let y=n.ZERO,C=n.ZERO,I=n.ZERO;const j=s.a,K=n.mul(s.b,iw);let V=n.mul(f,N),te=n.mul(p,M),se=n.mul(w,x),ce=n.add(f,p),ie=n.add(N,M);ce=n.mul(ce,ie),ie=n.add(V,te),ce=n.sub(ce,ie),ie=n.add(f,w);let ve=n.add(N,x);return ie=n.mul(ie,ve),ve=n.add(V,se),ie=n.sub(ie,ve),ve=n.add(p,w),y=n.add(M,x),ve=n.mul(ve,y),y=n.add(te,se),ve=n.sub(ve,y),I=n.mul(j,ie),y=n.mul(K,se),I=n.add(y,I),y=n.sub(te,I),I=n.add(te,I),C=n.mul(y,I),te=n.add(V,V),te=n.add(te,V),se=n.mul(j,se),ie=n.mul(K,ie),te=n.add(te,se),se=n.sub(V,se),se=n.mul(j,se),ie=n.add(ie,se),V=n.mul(te,ie),C=n.add(C,V),V=n.mul(ve,ie),y=n.mul(ce,y),y=n.sub(y,V),V=n.mul(ce,te),I=n.mul(ve,I),I=n.add(I,V),new B(y,C,I)}subtract(b){return this.add(b.negate())}is0(){return this.equals(B.ZERO)}multiply(b){const{endo:f}=e;if(!i.isValidNot0(b))throw new Error("invalid scalar: out of range");let p,w;const N=M=>D.cached(this,M,x=>ih(B,x));if(f){const{k1neg:M,k1:x,k2neg:y,k2:C}=k(b),{p:I,f:j}=N(x),{p:K,f:V}=N(C);w=j.add(V),p=F(f.beta,I,K,M,y)}else{const{p:M,f:x}=N(b);p=M,w=x}return ih(B,[p,w])[0]}multiplyUnsafe(b){const{endo:f}=e,p=this;if(!i.isValid(b))throw new Error("invalid scalar: out of range");if(b===jc||p.is0())return B.ZERO;if(b===Hf)return p;if(D.hasCache(this))return this.multiply(b);if(f){const{k1neg:w,k1:N,k2neg:M,k2:x}=k(b),{p1:y,p2:C}=Vz(B,p,N,x);return F(f.beta,y,C,w,M)}else return D.unsafe(p,b)}multiplyAndAddUnsafe(b,f,p){const w=this.multiplyUnsafe(f).add(b.multiplyUnsafe(p));return w.is0()?void 0:w}toAffine(b){return R(this,b)}isTorsionFree(){const{isTorsionFree:b}=e;return o===Hf?!0:b?b(B,this):D.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:b}=e;return o===Hf?this:b?b(B,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(b=!0){return Mh(b,"isCompressed"),this.assertValidity(),g(B,this,b)}toHex(b=!0){return mh(this.toBytes(b))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(b=!0){return this.toBytes(b)}_setWindowSize(b){this.precompute(b)}static normalizeZ(b){return ih(B,b)}static msm(b,f){return c9(B,i,b,f)}static fromPrivateKey(b){return B.BASE.multiply(Mf(i,b))}}B.BASE=new B(s.Gx,s.Gy,n.ONE),B.ZERO=new B(n.ZERO,n.ONE,n.ZERO),B.Fp=n,B.Fn=i;const q=i.BITS,D=new a9(B,e.endo?Math.ceil(q/2):q);return B.BASE.precompute(8),B}function Q9(t){return Uint8Array.of(t?2:3)}function Z9(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function QW(t,e={}){const{Fn:r}=t,n=e.randomBytes||iI,i=Object.assign(Z9(t.Fp,r),{seed:i9(r.ORDER)});function s(g){try{return!!Mf(r,g)}catch{return!1}}function o(g,m){const{publicKey:v,publicKeyUncompressed:$}=i;try{const _=g.length;return m===!0&&_!==v||m===!1&&_!==$?!1:!!t.fromBytes(g)}catch{return!1}}function a(g=n(i.seed)){return Wz(ea(g,i.seed,"seed"),r.ORDER)}function c(g,m=!0){return t.BASE.multiply(Mf(r,g)).toBytes(m)}function l(g){const m=a(g);return{secretKey:m,publicKey:c(m)}}function u(g){if(typeof g=="bigint")return!1;if(g instanceof t)return!0;const{secretKey:m,publicKey:v,publicKeyUncompressed:$}=i;if(r.allowedLengths||m===v)return;const _=an("key",g).length;return _===v||_===$}function h(g,m,v=!0){if(u(g)===!0)throw new Error("first arg must be private key");if(u(m)===!1)throw new Error("second arg must be public key");const $=Mf(r,g);return t.fromHex(m).multiply($).toBytes(v)}return Object.freeze({getPublicKey:c,getSharedSecret:h,keygen:l,Point:t,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:g=>Mf(r,g),precompute(g=8,m=t.BASE){return m.precompute(g,!1)}},lengths:i})}function ZW(t,e,r={}){BO(e),Qm(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||iI,i=r.hmac||((f,...p)=>G9(e,f,Ta(...p))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:l,getPublicKey:u,getSharedSecret:h,utils:d,lengths:g}=QW(t,r),m={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},v="compact";function $(f){const p=a>>Hf;return f>p}function _(f,p){if(!o.isValidNot0(p))throw new Error(`invalid signature ${f}: out of range 1..Point.Fn.ORDER`);return p}function S(f,p){eS(p);const w=g.signature,N=p==="compact"?w:p==="recovered"?w+1:void 0;return ea(f,N,`${p} signature`)}class A{constructor(p,w,N){this.r=_("r",p),this.s=_("s",w),N!=null&&(this.recovery=N),Object.freeze(this)}static fromBytes(p,w=v){S(p,w);let N;if(w==="der"){const{r:C,s:I}=Tc.toSig(ea(p));return new A(C,I)}w==="recovered"&&(N=p[0],w="compact",p=p.subarray(1));const M=o.BYTES,x=p.subarray(0,M),y=p.subarray(M,M*2);return new A(o.fromBytes(x),o.fromBytes(y),N)}static fromHex(p,w){return this.fromBytes(pb(p),w)}addRecoveryBit(p){return new A(this.r,this.s,p)}recoverPublicKey(p){const w=s.ORDER,{r:N,s:M,recovery:x}=this;if(x==null||![0,1,2,3].includes(x))throw new Error("recovery id invalid");if(a*Y9<w&&x>1)throw new Error("recovery id is ambiguous for h>1 curve");const C=x===2||x===3?N+a:N;if(!s.isValid(C))throw new Error("recovery id 2 or 3 invalid");const I=s.toBytes(C),j=t.fromBytes(Ta(Q9((x&1)===0),I)),K=o.inv(C),V=k(an("msgHash",p)),te=o.create(-V*K),se=o.create(M*K),ce=t.BASE.multiplyUnsafe(te).add(j.multiplyUnsafe(se));if(ce.is0())throw new Error("point at infinify");return ce.assertValidity(),ce}hasHighS(){return $(this.s)}toBytes(p=v){if(eS(p),p==="der")return pb(Tc.hexFromSig(this));const w=o.toBytes(this.r),N=o.toBytes(this.s);if(p==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Ta(Uint8Array.of(this.recovery),w,N)}return Ta(w,N)}toHex(p){return mh(this.toBytes(p))}assertValidity(){}static fromCompact(p){return A.fromBytes(an("sig",p),"compact")}static fromDER(p){return A.fromBytes(an("sig",p),"der")}normalizeS(){return this.hasHighS()?new A(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return mh(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return mh(this.toBytes("compact"))}}const T=r.bits2int||function(p){if(p.length>8192)throw new Error("input is too large");const w=Sv(p),N=p.length*8-c;return N>0?w>>BigInt(N):w},k=r.bits2int_modN||function(p){return o.create(T(p))},R=Ym(c);function L(f){return Z_("num < 2^"+c,f,jc,R),o.toBytes(f)}function F(f,p){return ea(f,void 0,"message"),p?ea(e(f),void 0,"prehashed message"):f}function B(f,p,w){if(["recovered","canonical"].some(te=>te in w))throw new Error("sign() legacy options not supported");const{lowS:N,prehash:M,extraEntropy:x}=fE(w,m);f=F(f,M);const y=k(f),C=Mf(o,p),I=[L(C),L(y)];if(x!=null&&x!==!1){const te=x===!0?n(g.secretKey):x;I.push(an("extraEntropy",te))}const j=Ta(...I),K=y;function V(te){const se=T(te);if(!o.isValidNot0(se))return;const ce=o.inv(se),ie=t.BASE.multiply(se).toAffine(),ve=o.create(ie.x);if(ve===jc)return;const Me=o.create(ce*o.create(K+ve*C));if(Me===jc)return;let Ce=(ie.x===ve?0:2)|Number(ie.y&Hf),et=Me;return N&&$(Me)&&(et=o.neg(Me),Ce^=1),new A(ve,et,Ce)}return{seed:j,k2sig:V}}function q(f,p,w={}){f=an("message",f);const{seed:N,k2sig:M}=B(f,p,w);return kz(e.outputLen,o.BYTES,i)(N,M)}function D(f){let p;const w=typeof f=="string"||Gm(f),N=!w&&f!==null&&typeof f=="object"&&typeof f.r=="bigint"&&typeof f.s=="bigint";if(!w&&!N)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(N)p=new A(f.r,f.s);else if(w){try{p=A.fromBytes(an("sig",f),"der")}catch(M){if(!(M instanceof Tc.Err))throw M}if(!p)try{p=A.fromBytes(an("sig",f),"compact")}catch{return!1}}return p||!1}function E(f,p,w,N={}){const{lowS:M,prehash:x,format:y}=fE(N,m);if(w=an("publicKey",w),p=F(an("message",p),x),"strict"in N)throw new Error("options.strict was renamed to lowS");const C=y===void 0?D(f):A.fromBytes(an("sig",f),y);if(C===!1)return!1;try{const I=t.fromBytes(w);if(M&&C.hasHighS())return!1;const{r:j,s:K}=C,V=k(p),te=o.inv(K),se=o.create(V*te),ce=o.create(j*te),ie=t.BASE.multiplyUnsafe(se).add(I.multiplyUnsafe(ce));return ie.is0()?!1:o.create(ie.x)===j}catch{return!1}}function b(f,p,w={}){const{prehash:N}=fE(w,m);return p=F(p,N),A.fromBytes(f,"recovered").recoverPublicKey(p).toBytes()}return Object.freeze({keygen:l,getPublicKey:u,getSharedSecret:h,utils:d,lengths:g,Point:t,sign:q,verify:E,recoverPublicKey:b,Signature:A,hash:e})}function JW(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=Hh(e.n,{BITS:t.nBitLength,allowedLengths:n,modFromBytes:t.wrapPrivateKey}),s={Fp:r,Fn:i,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function XW(t){const{CURVE:e,curveOpts:r}=JW(t),n={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:n}}function eH(t,e){const r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,r9(r.Fn.ORDER,r.Fn.BITS))})}function tH(t){const{CURVE:e,curveOpts:r,hash:n,ecdsaOpts:i}=XW(t),s=YW(e,r),o=ZW(s,n,i);return eH(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function rH(t,e){const r=n=>tH({...t,hash:n});return{...r(e),create:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const II={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},nH={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},I6=BigInt(2);function iH(t){const e=II.p,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,h=on(u,r,e)*u%e,d=on(h,r,e)*u%e,g=on(d,I6,e)*l%e,m=on(g,i,e)*g%e,v=on(m,s,e)*m%e,$=on(v,a,e)*v%e,_=on($,c,e)*$%e,S=on(_,a,e)*v%e,A=on(S,r,e)*u%e,T=on(A,o,e)*m%e,k=on(T,n,e)*l%e,R=on(k,I6,e);if(!tS.eql(tS.sqr(R),t))throw new Error("Cannot find square root");return R}const tS=Hh(II.p,{sqrt:iH}),sH=rH({...II,Fp:tS,lowS:!0,endo:nH},WO);Zm.utils.randomPrivateKey;Zm.getPublicKey;function A6(t){try{return Zm.ExtendedPoint.fromHex(t),!0}catch{return!1}}const J9=(t,e)=>Zm.sign(t,e.slice(0,32)),oH=Zm.verify,di=t=>Xe.Buffer.isBuffer(t)?t:t instanceof Uint8Array?Xe.Buffer.from(t.buffer,t.byteOffset,t.byteLength):Xe.Buffer.from(t);class aH{constructor(e){Object.assign(this,e)}encode(){return Xe.Buffer.from(w9(s1,this))}static decode(e){return b9(s1,this,e)}static decodeUnchecked(e){return f9(s1,this,e)}}const s1=new Map;var X9;const cH=32,su=32;function lH(t){return t._bn!==void 0}let C6=1;class Ae extends aH{constructor(e){if(super({}),this._bn=void 0,lH(e))this._bn=e._bn;else{if(typeof e=="string"){const r=yi.decode(e);if(r.length!=su)throw new Error("Invalid public key input");this._bn=new v6(r)}else this._bn=new v6(e);if(this._bn.byteLength()>su)throw new Error("Invalid public key input")}}static unique(){const e=new Ae(C6);return C6+=1,new Ae(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return yi.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(Xe.Buffer);if(e.length===su)return e;const r=Xe.Buffer.alloc(32);return e.copy(r,32-e.length),r}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,r,n){const i=Xe.Buffer.concat([e.toBuffer(),Xe.Buffer.from(r),n.toBuffer()]),s=E6(i);return new Ae(s)}static createProgramAddressSync(e,r){let n=Xe.Buffer.alloc(0);e.forEach(function(s){if(s.length>cH)throw new TypeError("Max seed length exceeded");n=Xe.Buffer.concat([n,di(s)])}),n=Xe.Buffer.concat([n,r.toBuffer(),Xe.Buffer.from("ProgramDerivedAddress")]);const i=E6(n);if(A6(i))throw new Error("Invalid seeds, address must fall off the curve");return new Ae(i)}static async createProgramAddress(e,r){return this.createProgramAddressSync(e,r)}static findProgramAddressSync(e,r){let n=255,i;for(;n!=0;){try{const s=e.concat(Xe.Buffer.from([n]));i=this.createProgramAddressSync(s,r)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,r){return this.findProgramAddressSync(e,r)}static isOnCurve(e){const r=new Ae(e);return A6(r.toBytes())}}X9=Ae;Ae.default=new X9("11111111111111111111111111111111");s1.set(Ae,{kind:"struct",fields:[["_bn","u256"]]});new Ae("BPFLoader1111111111111111111111111111111111");const Kf=1232,AI=127,Sb=64;class ek extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ek.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class tk extends Error{constructor(e,r){super(`Transaction was not confirmed in ${r.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(tk.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Z0 extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Z0.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class xb{constructor(e,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=r}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const r of this.keySegments()){if(e<r.length)return r[e];e-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,o)=>{n.set(s.toBase58(),o)});const i=s=>{const o=n.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const yt=(t="publicKey")=>Ur(32,t),uH=(t="signature")=>Ur(64,t),Tf=(t="string")=>{const e=Te([Le("length"),Le("lengthPadding"),Ur(yh(Le(),-8),"chars")],t),r=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,o)=>r(s,o).chars.toString(),i.encode=(s,o,a)=>{const c={chars:Xe.Buffer.from(s,"utf8")};return n(c,o,a)},i.alloc=s=>Le().span+Le().span+Xe.Buffer.from(s,"utf8").length,i},hH=(t="authorized")=>Te([yt("staker"),yt("withdrawer")],t),dH=(t="lockup")=>Te([Ls("unixTimestamp"),Ls("epoch"),yt("custodian")],t),fH=(t="voteInit")=>Te([yt("nodePubkey"),yt("authorizedVoter"),yt("authorizedWithdrawer"),Ut("commission")],t),pH=(t="voteAuthorizeWithSeedArgs")=>Te([Le("voteAuthorizationType"),yt("currentAuthorityDerivedKeyOwnerPubkey"),Tf("currentAuthorityDerivedKeySeed"),yt("newAuthorized")],t);function rk(t,e){const r=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*r(i.elementLayout)}else if("fields"in i)return rk({layout:i},e[i.property]);return 0};let n=0;return t.layout.fields.forEach(i=>{n+=r(i)}),n}function Bs(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(n&127)<<r*7,r+=1,!(n&128))break}return e}function js(t,e){let r=e;for(;;){let n=r&127;if(r>>=7,r==0){t.push(n);break}else n|=128,t.push(n)}}function qr(t,e){if(!t)throw new Error(e||"Assertion failed")}class Tv{constructor(e,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=r}static compile(e,r){const n=new Map,i=o=>{const a=o.toBase58();let c=n.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,c)),c},s=i(r);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const c=i(a.pubkey);c.isSigner||(c.isSigner=a.isSigner),c.isWritable||(c.isWritable=a.isWritable)}}return new Tv(r,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];qr(e.length<=256,"Max static account keys length exceeded");const r=e.filter(([,c])=>c.isSigner&&c.isWritable),n=e.filter(([,c])=>c.isSigner&&!c.isWritable),i=e.filter(([,c])=>!c.isSigner&&c.isWritable),s=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:r.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{qr(r.length>0,"Expected at least one writable signer key");const[c]=r[0];qr(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...r.map(([c])=>new Ae(c)),...n.map(([c])=>new Ae(c)),...i.map(([c])=>new Ae(c)),...s.map(([c])=>new Ae(c))];return[o,a]}extractTableLookup(e){const[r,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(r.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:r,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,r){const n=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(r(o)){const a=new Ae(s),c=e.findIndex(l=>l.equals(a));c>=0&&(qr(c<256,"Max lookup table index exceeded"),n.push(c),i.push(a),this.keyMetaMap.delete(s))}return[n,i]}}const nk="Reached end of buffer unexpectedly";function kc(t){if(t.length===0)throw new Error(nk);return t.shift()}function Us(t,...e){const[r]=e;if(e.length===2?r+(e[1]??0)>t.length:r>=t.length)throw new Error(nk);return t.splice(...e)}class Qc{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(r=>new Ae(r)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:yi.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new xb(this.staticAccountKeys)}static compile(e){const r=Tv.compile(e.instructions,e.payerKey),[n,i]=r.getMessageComponents(),o=new xb(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:yi.encode(a.data)}));return new Qc({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-r,s=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=r-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,r)=>!this.isProgramId(r))}serialize(){const e=this.accountKeys.length;let r=[];js(r,e);const n=this.instructions.map(h=>{const{accounts:d,programIdIndex:g}=h,m=Array.from(yi.decode(h.data));let v=[];js(v,d.length);let $=[];return js($,m.length),{programIdIndex:g,keyIndicesCount:Xe.Buffer.from(v),keyIndices:d,dataLength:Xe.Buffer.from($),data:m}});let i=[];js(i,n.length);let s=Xe.Buffer.alloc(Kf);Xe.Buffer.from(i).copy(s);let o=i.length;n.forEach(h=>{const g=Te([Ut("programIdIndex"),Ur(h.keyIndicesCount.length,"keyIndicesCount"),zi(Ut("keyIndex"),h.keyIndices.length,"keyIndices"),Ur(h.dataLength.length,"dataLength"),zi(Ut("userdatum"),h.data.length,"data")]).encode(h,s,o);o+=g}),s=s.slice(0,o);const a=Te([Ur(1,"numRequiredSignatures"),Ur(1,"numReadonlySignedAccounts"),Ur(1,"numReadonlyUnsignedAccounts"),Ur(r.length,"keyCount"),zi(yt("key"),e,"keys"),yt("recentBlockhash")]),c={numRequiredSignatures:Xe.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Xe.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Xe.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Xe.Buffer.from(r),keys:this.accountKeys.map(h=>di(h.toBytes())),recentBlockhash:yi.decode(this.recentBlockhash)};let l=Xe.Buffer.alloc(2048);const u=a.encode(c,l);return s.copy(l,u),l.slice(0,u+s.length)}static from(e){let r=[...e];const n=kc(r);if(n!==(n&AI))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=kc(r),s=kc(r),o=Bs(r);let a=[];for(let d=0;d<o;d++){const g=Us(r,0,su);a.push(new Ae(Xe.Buffer.from(g)))}const c=Us(r,0,su),l=Bs(r);let u=[];for(let d=0;d<l;d++){const g=kc(r),m=Bs(r),v=Us(r,0,m),$=Bs(r),_=Us(r,0,$),S=yi.encode(Xe.Buffer.from(_));u.push({programIdIndex:g,accounts:v,data:S})}const h={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:yi.encode(Xe.Buffer.from(c)),accountKeys:a,instructions:u};return new Qc(h)}}class em{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const r of this.addressTableLookups)e+=r.readonlyIndexes.length+r.writableIndexes.length;return e}getAccountKeys(e){let r;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)r=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new xb(this.staticAccountKeys,r)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-r,o=n-r-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=r-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const r={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)r.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)r.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return r}static compile(e){const r=Tv.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const u of s){const h=r.extractTableLookup(u);if(h!==void 0){const[d,{writable:g,readonly:m}]=h;n.push(d),i.writable.push(...g),i.readonly.push(...m)}}const[o,a]=r.getMessageComponents(),l=new xb(a,i).compileInstructions(e.instructions);return new em({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:l,addressTableLookups:n})}serialize(){const e=Array();js(e,this.staticAccountKeys.length);const r=this.serializeInstructions(),n=Array();js(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();js(s,this.addressTableLookups.length);const o=Te([Ut("prefix"),Te([Ut("numRequiredSignatures"),Ut("numReadonlySignedAccounts"),Ut("numReadonlyUnsignedAccounts")],"header"),Ur(e.length,"staticAccountKeysLength"),zi(yt(),this.staticAccountKeys.length,"staticAccountKeys"),yt("recentBlockhash"),Ur(n.length,"instructionsLength"),Ur(r.length,"serializedInstructions"),Ur(s.length,"addressTableLookupsLength"),Ur(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(Kf),l=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(u=>u.toBytes()),recentBlockhash:yi.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,l)}serializeInstructions(){let e=0;const r=new Uint8Array(Kf);for(const n of this.compiledInstructions){const i=Array();js(i,n.accountKeyIndexes.length);const s=Array();js(s,n.data.length);const o=Te([Ut("programIdIndex"),Ur(i.length,"encodedAccountKeyIndexesLength"),zi(Ut(),n.accountKeyIndexes.length,"accountKeyIndexes"),Ur(s.length,"encodedDataLength"),Ur(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},r,e)}return r.slice(0,e)}serializeAddressTableLookups(){let e=0;const r=new Uint8Array(Kf);for(const n of this.addressTableLookups){const i=Array();js(i,n.writableIndexes.length);const s=Array();js(s,n.readonlyIndexes.length);const o=Te([yt("accountKey"),Ur(i.length,"encodedWritableIndexesLength"),zi(Ut(),n.writableIndexes.length,"writableIndexes"),Ur(s.length,"encodedReadonlyIndexesLength"),zi(Ut(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},r,e)}return r.slice(0,e)}static deserialize(e){let r=[...e];const n=kc(r),i=n&AI;qr(n!==i,"Expected versioned message but received legacy message");const s=i;qr(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:kc(r),numReadonlySignedAccounts:kc(r),numReadonlyUnsignedAccounts:kc(r)},a=[],c=Bs(r);for(let m=0;m<c;m++)a.push(new Ae(Us(r,0,su)));const l=yi.encode(Us(r,0,su)),u=Bs(r),h=[];for(let m=0;m<u;m++){const v=kc(r),$=Bs(r),_=Us(r,0,$),S=Bs(r),A=new Uint8Array(Us(r,0,S));h.push({programIdIndex:v,accountKeyIndexes:_,data:A})}const d=Bs(r),g=[];for(let m=0;m<d;m++){const v=new Ae(Us(r,0,su)),$=Bs(r),_=Us(r,0,$),S=Bs(r),A=Us(r,0,S);g.push({accountKey:v,writableIndexes:_,readonlyIndexes:A})}return new em({header:o,staticAccountKeys:a,recentBlockhash:l,compiledInstructions:h,addressTableLookups:g})}}const CI={deserializeMessageVersion(t){const e=t[0],r=e&AI;return r===e?"legacy":r},deserialize:t=>{const e=CI.deserializeMessageVersion(t);if(e==="legacy")return Qc.from(t);if(e===0)return em.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let pl=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const gH=Xe.Buffer.alloc(Sb).fill(0);class Go{constructor(e){this.keys=void 0,this.programId=void 0,this.data=Xe.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:r,isWritable:n})=>({pubkey:e.toJSON(),isSigner:r,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class wi{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:r,nonceInfo:n}=e;this.minNonceContextSlot=r,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:r,lastValidBlockHeight:n}=e;this.recentBlockhash=r,this.lastValidBlockHeight=n}else{const{recentBlockhash:r,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=r}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(r=>{"instructions"in r?this.instructions=this.instructions.concat(r.instructions):"data"in r&&"programId"in r&&"keys"in r?this.instructions.push(r):this.instructions.push(new Go(r))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?r=[this.nonceInfo.nonceInstruction,...this.instructions]:r=this.instructions):(e=this.recentBlockhash,r=this.instructions),!e)throw new Error("Transaction recentBlockhash required");r.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let v=0;v<r.length;v++)if(r[v].programId===void 0)throw new Error(`Transaction instruction index ${v} has undefined program id`);const i=[],s=[];r.forEach(v=>{v.keys.forEach(_=>{s.push({..._})});const $=v.programId.toString();i.includes($)||i.push($)}),i.forEach(v=>{s.push({pubkey:new Ae(v),isSigner:!1,isWritable:!1})});const o=[];s.forEach(v=>{const $=v.pubkey.toString(),_=o.findIndex(S=>S.pubkey.toString()===$);_>-1?(o[_].isWritable=o[_].isWritable||v.isWritable,o[_].isSigner=o[_].isSigner||v.isSigner):o.push(v)}),o.sort(function(v,$){if(v.isSigner!==$.isSigner)return v.isSigner?-1:1;if(v.isWritable!==$.isWritable)return v.isWritable?-1:1;const _={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return v.pubkey.toBase58().localeCompare($.pubkey.toBase58(),"en",_)});const a=o.findIndex(v=>v.pubkey.equals(n));if(a>-1){const[v]=o.splice(a,1);v.isSigner=!0,v.isWritable=!0,o.unshift(v)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const v of this.signatures){const $=o.findIndex(_=>_.pubkey.equals(v.publicKey));if($>-1)o[$].isSigner||(o[$].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${v.publicKey.toString()}`)}let c=0,l=0,u=0;const h=[],d=[];o.forEach(({pubkey:v,isSigner:$,isWritable:_})=>{$?(h.push(v.toString()),c+=1,_||(l+=1)):(d.push(v.toString()),_||(u+=1))});const g=h.concat(d),m=r.map(v=>{const{data:$,programId:_}=v;return{programIdIndex:g.indexOf(_.toString()),accounts:v.keys.map(S=>g.indexOf(S.pubkey.toString())),data:yi.encode($)}});return m.forEach(v=>{qr(v.programIdIndex>=0),v.accounts.forEach($=>qr($>=0))}),new Qc({header:{numRequiredSignatures:c,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:u},accountKeys:g,recentBlockhash:e,instructions:m})}_compile(){const e=this.compileMessage(),r=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===r.length&&this.signatures.every((i,s)=>r[s].equals(i.publicKey))||(this.signatures=r.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const r=new Set;this.signatures=e.filter(n=>{const i=n.toString();return r.has(i)?!1:(r.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,n=[];for(const s of e){const o=s.publicKey.toString();r.has(o)||(r.add(o),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,n=[];for(const s of e){const o=s.publicKey.toString();r.has(o)||(r.add(o),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...r){const n=e.serialize();r.forEach(i=>{const s=J9(n,i.secretKey);this._addSignature(i.publicKey,di(s))})}addSignature(e,r){this._compile(),this._addSignature(e,r)}_addSignature(e,r){qr(r.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=Xe.Buffer.from(r)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,r){const n={};for(const{signature:i,publicKey:s}of this.signatures)i===null?r&&(n.missing||(n.missing=[])).push(s):oH(i,e,s.toBytes())||(n.invalid||(n.invalid=[])).push(s);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:r,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n){const s=this._getMessageSignednessErrors(i,r);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:r}=this,n=[];js(n,r.length);const i=n.length+r.length*64+e.length,s=Xe.Buffer.alloc(i);return qr(r.length<256),Xe.Buffer.from(n).copy(s,0),r.forEach(({signature:o},a)=>{o!==null&&(qr(o.length===64,"signature has invalid length"),Xe.Buffer.from(o).copy(s,n.length+a*64))}),e.copy(s,n.length+r.length*64),qr(s.length<=Kf,`Transaction too large: ${s.length} > ${Kf}`),s}get keys(){return qr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return qr(this.instructions.length===1),this.instructions[0].programId}get data(){return qr(this.instructions.length===1),this.instructions[0].data}static from(e){let r=[...e];const n=Bs(r);let i=[];for(let s=0;s<n;s++){const o=Us(r,0,Sb);i.push(yi.encode(Xe.Buffer.from(o)))}return wi.populate(Qc.from(r),i)}static populate(e,r=[]){const n=new wi;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),r.forEach((i,s)=>{const o={signature:i==yi.encode(gH)?null:yi.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new Go({keys:s,programId:e.accountKeys[i.programIdIndex],data:yi.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class lp{get version(){return this.message.version}constructor(e,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)qr(r.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(Sb));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),r=Array();js(r,this.signatures.length);const n=Te([Ur(r.length,"encodedSignaturesLength"),zi(uH(),this.signatures.length,"signatures"),Ur(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let r=[...e];const n=[],i=Bs(r);for(let o=0;o<i;o++)n.push(new Uint8Array(Us(r,0,Sb)));const s=CI.deserialize(new Uint8Array(r));return new lp(s,n)}sign(e){const r=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(o=>o.equals(i.publicKey));qr(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=J9(r,i.secretKey)}}addSignature(e,r){qr(r.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));qr(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=r}}const mH=160,yH=64,wH=mH/yH,bH=1e3/wH;new Ae("SysvarC1ock11111111111111111111111111111111");new Ae("SysvarEpochSchedu1e111111111111111111111111");new Ae("Sysvar1nstructions1111111111111111111111111");const pE=new Ae("SysvarRecentB1ockHashes11111111111111111111"),N6=new Ae("SysvarRent111111111111111111111111111111111");new Ae("SysvarRewards111111111111111111111111111111");new Ae("SysvarS1otHashes111111111111111111111111111");new Ae("SysvarS1otHistory11111111111111111111111111");new Ae("SysvarStakeHistory1111111111111111111111111");class M6 extends Error{constructor({action:e,signature:r,transactionMessage:n,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${r} resulted in an error. 
${n}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+s+o;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=r,this.transactionMessage=n,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((r,n)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,r(s)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class Pe extends Error{constructor({code:e,message:r,data:n},i){super(i!=null?`${i}: ${r}`:r),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}function tf(t){return new Promise(e=>setTimeout(e,t))}function co(t,e){const r=t.layout.span>=0?t.layout.span:rk(t,e),n=Xe.Buffer.alloc(r),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,n),n}const vH=ui("lamportsPerSignature"),ik=Te([Le("version"),Le("state"),yt("authorizedPubkey"),yt("nonce"),Te([vH],"feeCalculator")]),T6=ik.span;class NI{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const r=ik.decode(di(e),0);return new NI({authorizedPubkey:new Ae(r.authorizedPubkey),nonce:new Ae(r.nonce).toString(),feeCalculator:r.feeCalculator})}}function up(t){const e=Ur(8,t),r=e.decode.bind(e),n=e.encode.bind(e),i=e,s=oW();return i.decode=(o,a)=>{const c=r(o,a);return s.decode(c)},i.encode=(o,a,c)=>{const l=s.encode(o);return n(l,a,c)},i}const lo=Object.freeze({Create:{index:0,layout:Te([Le("instruction"),Ls("lamports"),Ls("space"),yt("programId")])},Assign:{index:1,layout:Te([Le("instruction"),yt("programId")])},Transfer:{index:2,layout:Te([Le("instruction"),up("lamports")])},CreateWithSeed:{index:3,layout:Te([Le("instruction"),yt("base"),Tf("seed"),Ls("lamports"),Ls("space"),yt("programId")])},AdvanceNonceAccount:{index:4,layout:Te([Le("instruction")])},WithdrawNonceAccount:{index:5,layout:Te([Le("instruction"),Ls("lamports")])},InitializeNonceAccount:{index:6,layout:Te([Le("instruction"),yt("authorized")])},AuthorizeNonceAccount:{index:7,layout:Te([Le("instruction"),yt("authorized")])},Allocate:{index:8,layout:Te([Le("instruction"),Ls("space")])},AllocateWithSeed:{index:9,layout:Te([Le("instruction"),yt("base"),Tf("seed"),Ls("space"),yt("programId")])},AssignWithSeed:{index:10,layout:Te([Le("instruction"),yt("base"),Tf("seed"),yt("programId")])},TransferWithSeed:{index:11,layout:Te([Le("instruction"),up("lamports"),Tf("seed"),yt("programId")])},UpgradeNonceAccount:{index:12,layout:Te([Le("instruction")])}});class fu{constructor(){}static createAccount(e){const r=lo.Create,n=co(r,{lamports:e.lamports,space:e.space,programId:di(e.programId.toBuffer())});return new Go({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let r,n;if("basePubkey"in e){const i=lo.TransferWithSeed;r=co(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:di(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=lo.Transfer;r=co(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Go({keys:n,programId:this.programId,data:r})}static assign(e){let r,n;if("basePubkey"in e){const i=lo.AssignWithSeed;r=co(i,{base:di(e.basePubkey.toBuffer()),seed:e.seed,programId:di(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=lo.Assign;r=co(i,{programId:di(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Go({keys:n,programId:this.programId,data:r})}static createAccountWithSeed(e){const r=lo.CreateWithSeed,n=co(r,{base:di(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:di(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Go({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const r=new wi;"basePubkey"in e&&"seed"in e?r.add(fu.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:T6,programId:this.programId})):r.add(fu.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:T6,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}static nonceInitialize(e){const r=lo.InitializeNonceAccount,n=co(r,{authorized:di(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:pE,isSigner:!1,isWritable:!1},{pubkey:N6,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Go(i)}static nonceAdvance(e){const r=lo.AdvanceNonceAccount,n=co(r),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:pE,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Go(i)}static nonceWithdraw(e){const r=lo.WithdrawNonceAccount,n=co(r,{lamports:e.lamports});return new Go({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:pE,isSigner:!1,isWritable:!1},{pubkey:N6,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const r=lo.AuthorizeNonceAccount,n=co(r,{authorized:di(e.newAuthorizedPubkey.toBuffer())});return new Go({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let r,n;if("basePubkey"in e){const i=lo.AllocateWithSeed;r=co(i,{base:di(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:di(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=lo.Allocate;r=co(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Go({keys:n,programId:this.programId,data:r})}}fu.programId=new Ae("11111111111111111111111111111111");new Ae("BPFLoader2111111111111111111111111111111111");function EH(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gE,$6;function _H(){if($6)return gE;$6=1;var t=Object.prototype.toString,e=Object.keys||function(n){var i=[];for(var s in n)i.push(s);return i};function r(n,i){var s,o,a,c,l,u,h;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return r(n.toJSON(),i);if(h=t.call(n),h==="[object Array]"){for(a="[",o=n.length-1,s=0;s<o;s++)a+=r(n[s],!0)+",";return o>-1&&(a+=r(n[s],!0)),a+"]"}else if(h==="[object Object]"){for(c=e(n).sort(),o=c.length,a="",s=0;s<o;)l=c[s],u=r(n[l],!1),u!==void 0&&(a&&(a+=","),a+=JSON.stringify(l)+":"+u),s++;return"{"+a+"}"}else return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return gE=function(n){var i=r(n,!1);if(i!==void 0)return""+i},gE}var SH=_H(),P6=EH(SH);const p0=32;function mE(t){let e=0;for(;t>1;)t/=2,e++;return e}function xH(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class IH{constructor(e,r,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=r,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const r=mE(xH(e+p0+1))-mE(p0)-1,n=this.getSlotsInEpoch(r),i=e-(n-p0);return[r,i]}else{const r=e-this.firstNormalSlot,n=Math.floor(r/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=r%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*p0:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+mE(p0)):this.slotsPerEpoch}}var AH=globalThis.fetch;class CH extends HW{constructor(e,r,n){const i=s=>{const o=qW(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...r});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,r,n),this.underlyingSocket=void 0}call(...e){var n;const r=(n=this.underlyingSocket)==null?void 0:n.readyState;return r===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...e){var n;const r=(n=this.underlyingSocket)==null?void 0:n.readyState;return r===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}}function NH(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${t.index}`);return r}const O6=56;class k6{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const r=NH(MH,e),n=e.length-O6;qr(n>=0,"lookup table is invalid"),qr(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=Te([zi(yt(),i,"addresses")]).decode(e.slice(O6));return{deactivationSlot:r.deactivationSlot,lastExtendedSlot:r.lastExtendedSlot,lastExtendedSlotStartIndex:r.lastExtendedStartIndex,authority:r.authority.length!==0?new Ae(r.authority[0]):void 0,addresses:s.map(o=>new Ae(o))}}}const MH={index:1,layout:Te([Le("typeIndex"),up("deactivationSlot"),ui("lastExtendedSlot"),Ut("lastExtendedStartIndex"),Ut(),zi(yt(),yh(Ut(),-1),"authority")])},TH=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function $H(t){const e=t.match(TH);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[r,n,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${n}${c}${s}`}const rn=ey(_I(Ae),pe(),t=>new Ae(t)),sk=SI([pe(),Xr("base64")]),MI=ey(_I(Xe.Buffer),sk,t=>Xe.Buffer.from(t[0],"base64")),PH=30*1e3;function OH(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function gr(t){let e,r;if(typeof t=="string")e=t;else if(t){const{commitment:n,...i}=t;e=n,r=i}return{commitment:e,config:r}}function R6(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function ok(t){return rs([le({jsonrpc:Xr("2.0"),id:pe(),result:t}),le({jsonrpc:Xr("2.0"),id:pe(),error:le({code:Dp(),message:pe(),data:Re(fW())})})])}const kH=ok(Dp());function ht(t){return ey(ok(t),kH,e=>"error"in e?e:{...e,result:we(e.result,t)})}function dn(t){return ht(le({context:le({slot:X()}),value:t}))}function $v(t){return le({context:le({slot:X()}),value:t})}function yE(t,e){return t===0?new em({header:e.header,staticAccountKeys:e.accountKeys.map(r=>new Ae(r)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(r=>({programIdIndex:r.programIdIndex,accountKeyIndexes:r.accounts,data:yi.decode(r.data)})),addressTableLookups:e.addressTableLookups}):new Qc(e)}const RH=le({foundation:X(),foundationTerm:X(),initial:X(),taper:X(),terminal:X()}),DH=ht(be(Ee(le({epoch:X(),effectiveSlot:X(),amount:X(),postBalance:X(),commission:Re(Ee(X()))})))),LH=be(le({slot:X(),prioritizationFee:X()})),BH=le({total:X(),validator:X(),foundation:X(),epoch:X()}),jH=le({epoch:X(),slotIndex:X(),slotsInEpoch:X(),absoluteSlot:X(),blockHeight:Re(X()),transactionCount:Re(X())}),UH=le({slotsPerEpoch:X(),leaderScheduleSlotOffset:X(),warmup:ja(),firstNormalEpoch:X(),firstNormalSlot:X()}),FH=U9(pe(),be(X())),Gh=Ee(rs([le({}),pe()])),zH=le({err:Gh}),qH=Xr("receivedSignature"),WH=le({"solana-core":pe(),"feature-set":Re(X())}),HH=le({program:pe(),programId:rn,parsed:Dp()}),KH=le({programId:rn,accounts:be(rn),data:pe()}),D6=dn(le({err:Ee(rs([le({}),pe()])),logs:Ee(be(pe())),accounts:Re(Ee(be(Ee(le({executable:ja(),owner:pe(),lamports:X(),data:be(pe()),rentEpoch:Re(X())}))))),unitsConsumed:Re(X()),returnData:Re(Ee(le({programId:pe(),data:SI([pe(),Xr("base64")])}))),innerInstructions:Re(Ee(be(le({index:X(),instructions:be(rs([HH,KH]))}))))})),VH=dn(le({byIdentity:U9(pe(),be(X())),range:le({firstSlot:X(),lastSlot:X()})}));function GH(t,e,r,n,i,s){const o=r||AH;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(u,h)=>{const d=await new Promise((g,m)=>{try{n(u,h,(v,$)=>g([v,$]))}catch(v){m(v)}});return await o(...d)}),new UW(async(u,h)=>{const d={method:"POST",body:u,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},GK)};try{let g=5,m,v=500;for(;c?m=await c(t,d):m=await o(t,d),!(m.status!==429||i===!0||(g-=1,g===0));)console.error(`Server responded with ${m.status} ${m.statusText}.  Retrying after ${v}ms delay...`),await tf(v),v*=2;const $=await m.text();m.ok?h(null,$):h(new Error(`${m.status} ${m.statusText}: ${$}`))}catch(g){g instanceof Error&&h(g)}},{})}function YH(t){return(e,r)=>new Promise((n,i)=>{t.request(e,r,(s,o)=>{if(s){i(s);return}n(o)})})}function QH(t){return e=>new Promise((r,n)=>{e.length===0&&r([]);const i=e.map(s=>t.request(s.methodName,s.args));t.request(i,(s,o)=>{if(s){n(s);return}r(o)})})}const ZH=ht(RH),JH=ht(BH),XH=ht(LH),eK=ht(jH),tK=ht(UH),rK=ht(FH),nK=ht(X()),iK=dn(le({total:X(),circulating:X(),nonCirculating:X(),nonCirculatingAccounts:be(rn)})),rS=le({amount:pe(),uiAmount:Ee(X()),decimals:X(),uiAmountString:Re(pe())}),sK=dn(be(le({address:rn,amount:pe(),uiAmount:Ee(X()),decimals:X(),uiAmountString:Re(pe())}))),oK=dn(be(le({pubkey:rn,account:le({executable:ja(),owner:rn,lamports:X(),data:MI,rentEpoch:X()})}))),nS=le({program:pe(),parsed:Dp(),space:X()}),aK=dn(be(le({pubkey:rn,account:le({executable:ja(),owner:rn,lamports:X(),data:nS,rentEpoch:X()})}))),cK=dn(be(le({lamports:X(),address:rn}))),tm=le({executable:ja(),owner:rn,lamports:X(),data:MI,rentEpoch:X()}),lK=le({pubkey:rn,account:tm}),uK=ey(rs([_I(Xe.Buffer),nS]),rs([sk,nS]),t=>Array.isArray(t)?we(t,MI):t),iS=le({executable:ja(),owner:rn,lamports:X(),data:uK,rentEpoch:X()}),hK=le({pubkey:rn,account:iS}),dK=le({state:rs([Xr("active"),Xr("inactive"),Xr("activating"),Xr("deactivating")]),active:X(),inactive:X()}),fK=ht(be(le({signature:pe(),slot:X(),err:Gh,memo:Ee(pe()),blockTime:Re(Ee(X()))}))),pK=ht(be(le({signature:pe(),slot:X(),err:Gh,memo:Ee(pe()),blockTime:Re(Ee(X()))}))),gK=le({subscription:X(),result:$v(tm)}),mK=le({pubkey:rn,account:tm}),yK=le({subscription:X(),result:$v(mK)}),wK=le({parent:X(),slot:X(),root:X()}),bK=le({subscription:X(),result:wK}),vK=rs([le({type:rs([Xr("firstShredReceived"),Xr("completed"),Xr("optimisticConfirmation"),Xr("root")]),slot:X(),timestamp:X()}),le({type:Xr("createdBank"),parent:X(),slot:X(),timestamp:X()}),le({type:Xr("frozen"),slot:X(),timestamp:X(),stats:le({numTransactionEntries:X(),numSuccessfulTransactions:X(),numFailedTransactions:X(),maxTransactionsPerEntry:X()})}),le({type:Xr("dead"),slot:X(),timestamp:X(),err:pe()})]),EK=le({subscription:X(),result:vK}),_K=le({subscription:X(),result:$v(rs([zH,qH]))}),SK=le({subscription:X(),result:X()}),xK=le({pubkey:pe(),gossip:Ee(pe()),tpu:Ee(pe()),rpc:Ee(pe()),version:Ee(pe())}),L6=le({votePubkey:pe(),nodePubkey:pe(),activatedStake:X(),epochVoteAccount:ja(),epochCredits:be(SI([X(),X(),X()])),commission:X(),lastVote:X(),rootSlot:Ee(X())}),IK=ht(le({current:be(L6),delinquent:be(L6)})),AK=rs([Xr("processed"),Xr("confirmed"),Xr("finalized")]),CK=le({slot:X(),confirmations:Ee(X()),err:Gh,confirmationStatus:Re(AK)}),NK=dn(be(Ee(CK))),MK=ht(X()),ak=le({accountKey:rn,writableIndexes:be(X()),readonlyIndexes:be(X())}),TI=le({signatures:be(pe()),message:le({accountKeys:be(pe()),header:le({numRequiredSignatures:X(),numReadonlySignedAccounts:X(),numReadonlyUnsignedAccounts:X()}),instructions:be(le({accounts:be(X()),data:pe(),programIdIndex:X()})),recentBlockhash:pe(),addressTableLookups:Re(be(ak))})}),ck=le({pubkey:rn,signer:ja(),writable:ja(),source:Re(rs([Xr("transaction"),Xr("lookupTable")]))}),lk=le({accountKeys:be(ck),signatures:be(pe())}),uk=le({parsed:Dp(),program:pe(),programId:rn}),hk=le({accounts:be(rn),data:pe(),programId:rn}),TK=rs([hk,uk]),$K=rs([le({parsed:Dp(),program:pe(),programId:pe()}),le({accounts:be(pe()),data:pe(),programId:pe()})]),dk=ey(TK,$K,t=>"accounts"in t?we(t,hk):we(t,uk)),fk=le({signatures:be(pe()),message:le({accountKeys:be(ck),instructions:be(dk),recentBlockhash:pe(),addressTableLookups:Re(Ee(be(ak)))})}),Ib=le({accountIndex:X(),mint:pe(),owner:Re(pe()),programId:Re(pe()),uiTokenAmount:rS}),pk=le({writable:be(rn),readonly:be(rn)}),Pv=le({err:Gh,fee:X(),innerInstructions:Re(Ee(be(le({index:X(),instructions:be(le({accounts:be(X()),data:pe(),programIdIndex:X()}))})))),preBalances:be(X()),postBalances:be(X()),logMessages:Re(Ee(be(pe()))),preTokenBalances:Re(Ee(be(Ib))),postTokenBalances:Re(Ee(be(Ib))),loadedAddresses:Re(pk),computeUnitsConsumed:Re(X()),costUnits:Re(X())}),$I=le({err:Gh,fee:X(),innerInstructions:Re(Ee(be(le({index:X(),instructions:be(dk)})))),preBalances:be(X()),postBalances:be(X()),logMessages:Re(Ee(be(pe()))),preTokenBalances:Re(Ee(be(Ib))),postTokenBalances:Re(Ee(be(Ib))),loadedAddresses:Re(pk),computeUnitsConsumed:Re(X()),costUnits:Re(X())}),Lp=rs([Xr(0),Xr("legacy")]),Yh=le({pubkey:pe(),lamports:X(),postBalance:Ee(X()),rewardType:Ee(pe()),commission:Re(Ee(X()))}),PK=ht(Ee(le({blockhash:pe(),previousBlockhash:pe(),parentSlot:X(),transactions:be(le({transaction:TI,meta:Ee(Pv),version:Re(Lp)})),rewards:Re(be(Yh)),blockTime:Ee(X()),blockHeight:Ee(X())}))),OK=ht(Ee(le({blockhash:pe(),previousBlockhash:pe(),parentSlot:X(),rewards:Re(be(Yh)),blockTime:Ee(X()),blockHeight:Ee(X())}))),kK=ht(Ee(le({blockhash:pe(),previousBlockhash:pe(),parentSlot:X(),transactions:be(le({transaction:lk,meta:Ee(Pv),version:Re(Lp)})),rewards:Re(be(Yh)),blockTime:Ee(X()),blockHeight:Ee(X())}))),RK=ht(Ee(le({blockhash:pe(),previousBlockhash:pe(),parentSlot:X(),transactions:be(le({transaction:fk,meta:Ee($I),version:Re(Lp)})),rewards:Re(be(Yh)),blockTime:Ee(X()),blockHeight:Ee(X())}))),DK=ht(Ee(le({blockhash:pe(),previousBlockhash:pe(),parentSlot:X(),transactions:be(le({transaction:lk,meta:Ee($I),version:Re(Lp)})),rewards:Re(be(Yh)),blockTime:Ee(X()),blockHeight:Ee(X())}))),LK=ht(Ee(le({blockhash:pe(),previousBlockhash:pe(),parentSlot:X(),rewards:Re(be(Yh)),blockTime:Ee(X()),blockHeight:Ee(X())}))),BK=ht(Ee(le({blockhash:pe(),previousBlockhash:pe(),parentSlot:X(),transactions:be(le({transaction:TI,meta:Ee(Pv)})),rewards:Re(be(Yh)),blockTime:Ee(X())}))),B6=ht(Ee(le({blockhash:pe(),previousBlockhash:pe(),parentSlot:X(),signatures:be(pe()),blockTime:Ee(X())}))),wE=ht(Ee(le({slot:X(),meta:Ee(Pv),blockTime:Re(Ee(X())),transaction:TI,version:Re(Lp)}))),sw=ht(Ee(le({slot:X(),transaction:fk,meta:Ee($I),blockTime:Re(Ee(X())),version:Re(Lp)}))),jK=dn(le({blockhash:pe(),lastValidBlockHeight:X()})),UK=dn(ja()),FK=le({slot:X(),numTransactions:X(),numSlots:X(),samplePeriodSecs:X()}),zK=ht(be(FK)),qK=dn(Ee(le({feeCalculator:le({lamportsPerSignature:X()})}))),WK=ht(pe()),HK=ht(pe()),KK=le({err:Gh,logs:be(pe()),signature:pe()}),VK=le({result:$v(KK),subscription:X()}),GK={"solana-client":"js/1.0.0-maintenance"};class YK{constructor(e,r){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const l={};return async u=>{const{commitment:h,config:d}=gr(u),g=this._buildArgs([],h,void 0,d),m=P6(g);return l[m]=l[m]??(async()=>{try{const v=await this._rpcRequest("getBlockHeight",g),$=we(v,ht(X()));if("error"in $)throw new Pe($.error,"failed to get block height information");return $.result}finally{delete l[m]}})(),await l[m]}})();let n,i,s,o,a,c;r&&typeof r=="string"?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,n=r.wsEndpoint,i=r.httpHeaders,s=r.fetch,o=r.fetchMiddleware,a=r.disableRetryOnRateLimit,c=r.httpAgent),this._rpcEndpoint=OH(e),this._rpcWsEndpoint=n||$H(e),this._rpcClient=GH(e,i,s,o,a,c),this._rpcRequest=YH(this._rpcClient),this._rpcBatchRequest=QH(this._rpcClient),this._rpcWebSocket=new CH(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,r){const{commitment:n,config:i}=gr(r),s=this._buildArgs([e.toBase58()],n,void 0,i),o=await this._rpcRequest("getBalance",s),a=we(o,dn(X()));if("error"in a)throw new Pe(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,r){return await this.getBalanceAndContext(e,r).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const r=await this._rpcRequest("getBlockTime",[e]),n=we(r,ht(Ee(X())));if("error"in n)throw new Pe(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),r=we(e,ht(X()));if("error"in r)throw new Pe(r.error,"failed to get minimum ledger slot");return r.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),r=we(e,nK);if("error"in r)throw new Pe(r.error,"failed to get first available block");return r.result}async getSupply(e){let r={};typeof e=="string"?r={commitment:e}:e?r={...e,commitment:e&&e.commitment||this.commitment}:r={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[r]),i=we(n,iK);if("error"in i)throw new Pe(i.error,"failed to get supply");return i.result}async getTokenSupply(e,r){const n=this._buildArgs([e.toBase58()],r),i=await this._rpcRequest("getTokenSupply",n),s=we(i,dn(rS));if("error"in s)throw new Pe(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,r){const n=this._buildArgs([e.toBase58()],r),i=await this._rpcRequest("getTokenAccountBalance",n),s=we(i,dn(rS));if("error"in s)throw new Pe(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,r,n){const{commitment:i,config:s}=gr(n);let o=[e.toBase58()];"mint"in r?o.push({mint:r.mint.toBase58()}):o.push({programId:r.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),c=await this._rpcRequest("getTokenAccountsByOwner",a),l=we(c,oK);if("error"in l)throw new Pe(l.error,`failed to get token accounts owned by account ${e.toBase58()}`);return l.result}async getParsedTokenAccountsByOwner(e,r,n){let i=[e.toBase58()];"mint"in r?i.push({mint:r.mint.toBase58()}):i.push({programId:r.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=we(o,aK);if("error"in a)throw new Pe(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const r={...e,commitment:e&&e.commitment||this.commitment},n=r.filter||r.commitment?[r]:[],i=await this._rpcRequest("getLargestAccounts",n),s=we(i,cK);if("error"in s)throw new Pe(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,r){const n=this._buildArgs([e.toBase58()],r),i=await this._rpcRequest("getTokenLargestAccounts",n),s=we(i,sK);if("error"in s)throw new Pe(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,r){const{commitment:n,config:i}=gr(r),s=this._buildArgs([e.toBase58()],n,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=we(o,dn(Ee(tm)));if("error"in a)throw new Pe(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,r){const{commitment:n,config:i}=gr(r),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=we(o,dn(Ee(iS)));if("error"in a)throw new Pe(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,r){try{return(await this.getAccountInfoAndContext(e,r)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,r){const{commitment:n,config:i}=gr(r),s=e.map(l=>l.toBase58()),o=this._buildArgs([s],n,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),c=we(a,dn(be(Ee(iS))));if("error"in c)throw new Pe(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfoAndContext(e,r){const{commitment:n,config:i}=gr(r),s=e.map(l=>l.toBase58()),o=this._buildArgs([s],n,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),c=we(a,dn(be(Ee(tm))));if("error"in c)throw new Pe(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfo(e,r){return(await this.getMultipleAccountsInfoAndContext(e,r)).value}async getStakeActivation(e,r,n){const{commitment:i,config:s}=gr(r),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),c=we(a,ht(dK));if("error"in c)throw new Pe(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,r){const{commitment:n,config:i}=gr(r),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],n,s||"base64",{...o,...o.filters?{filters:R6(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),l=be(lK),u=o.withContext===!0?we(c,dn(l)):we(c,ht(l));if("error"in u)throw new Pe(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,r){const{commitment:n,config:i}=gr(r),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=we(o,ht(be(hK)));if("error"in a)throw new Pe(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,r){var s;let n;if(typeof e=="string")n=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let i;try{i=yi.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return qr(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:r||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:r||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:r||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((r,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:r}){let n,i,s=!1;const o=new Promise((c,l)=>{try{n=this.onSignature(r,(h,d)=>{n=void 0;const g={context:d,value:h};c({__type:pl.PROCESSED,response:g})},e);const u=new Promise(h=>{n==null?h():i=this._onSubscriptionStateChange(n,d=>{d==="subscribed"&&h()})});(async()=>{if(await u,s)return;const h=await this.getSignatureStatus(r);if(s||h==null)return;const{context:d,value:g}=h;if(g!=null)if(g!=null&&g.err)l(g.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(g.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(g.confirmationStatus==="processed"||g.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,c({__type:pl.PROCESSED,response:{context:d,value:g}})}})()}catch(u){l(u)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:r,lastValidBlockHeight:n,signature:i}}){let s=!1;const o=new Promise(h=>{const d=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let g=await d();if(!s){for(;g<=n;)if(await tf(1e3),s||(g=await d(),s))return;h({__type:pl.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),l=this.getCancellationPromise(r);let u;try{const h=await Promise.race([l,c,o]);if(h.__type===pl.PROCESSED)u=h.response;else throw new ek(i)}finally{s=!0,a()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:r,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const c=new Promise(g=>{let m=s,v=null;const $=async()=>{try{const{context:_,value:S}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return v=_.slot,S==null?void 0:S.nonce}catch{return m}};(async()=>{if(m=await $(),!a)for(;;){if(s!==m){g({__type:pl.NONCE_INVALID,slotInWhichNonceDidAdvance:v});return}if(await tf(2e3),a||(m=await $(),a))return}})()}),{abortConfirmation:l,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),h=this.getCancellationPromise(r);let d;try{const g=await Promise.race([h,u,c]);if(g.__type===pl.PROCESSED)d=g.response;else{let m;for(;;){const v=await this.getSignatureStatus(o);if(v==null)break;if(v.context.slot<(g.slotInWhichNonceDidAdvance??n)){await tf(400);continue}m=v;break}if(m!=null&&m.value){const v=e||"finalized",{confirmationStatus:$}=m.value;switch(v){case"processed":case"recent":if($!=="processed"&&$!=="confirmed"&&$!=="finalized")throw new Z0(o);break;case"confirmed":case"single":case"singleGossip":if($!=="confirmed"&&$!=="finalized")throw new Z0(o);break;case"finalized":case"max":case"root":if($!=="finalized")throw new Z0(o);break;default:}d={context:m.context,value:{err:m.value.err}}}else throw new Z0(o)}}finally{a=!0,l()}return d}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:r}){let n;const i=new Promise(c=>{let l=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{l=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:pl.TIMED_OUT,timeoutMs:l}),l)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:r});let a;try{const c=await Promise.race([o,i]);if(c.__type===pl.PROCESSED)a=c.response;else throw new tk(r,c.timeoutMs/1e3)}finally{clearTimeout(n),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),r=we(e,ht(be(xK)));if("error"in r)throw new Pe(r.error,"failed to get cluster nodes");return r.result}async getVoteAccounts(e){const r=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",r),i=we(n,IK);if("error"in i)throw new Pe(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:r,config:n}=gr(e),i=this._buildArgs([],r,void 0,n),s=await this._rpcRequest("getSlot",i),o=we(s,ht(X()));if("error"in o)throw new Pe(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:r,config:n}=gr(e),i=this._buildArgs([],r,void 0,n),s=await this._rpcRequest("getSlotLeader",i),o=we(s,ht(pe()));if("error"in o)throw new Pe(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,r){const n=[e,r],i=await this._rpcRequest("getSlotLeaders",n),s=we(i,ht(be(rn)));if("error"in s)throw new Pe(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,r){const{context:n,value:i}=await this.getSignatureStatuses([e],r);qr(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,r){const n=[e];r&&n.push(r);const i=await this._rpcRequest("getSignatureStatuses",n),s=we(i,NK);if("error"in s)throw new Pe(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:r,config:n}=gr(e),i=this._buildArgs([],r,void 0,n),s=await this._rpcRequest("getTransactionCount",i),o=we(s,ht(X()));if("error"in o)throw new Pe(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const r=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",r),i=we(n,ZH);if("error"in i)throw new Pe(i.error,"failed to get inflation");return i.result}async getInflationReward(e,r,n){const{commitment:i,config:s}=gr(n),o=this._buildArgs([e.map(l=>l.toBase58())],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),c=we(a,DH);if("error"in c)throw new Pe(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),r=we(e,JH);if("error"in r)throw new Pe(r.error,"failed to get inflation rate");return r.result}async getEpochInfo(e){const{commitment:r,config:n}=gr(e),i=this._buildArgs([],r,void 0,n),s=await this._rpcRequest("getEpochInfo",i),o=we(s,eK);if("error"in o)throw new Pe(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),r=we(e,tK);if("error"in r)throw new Pe(r.error,"failed to get epoch schedule");const n=r.result;return new IH(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),r=we(e,rK);if("error"in r)throw new Pe(r.error,"failed to get leader schedule");return r.result}async getMinimumBalanceForRentExemption(e,r){const n=this._buildArgs([e],r),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=we(i,MK);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:r,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:r,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const r=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=we(r,zK);if("error"in n)throw new Pe(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,r){const n=this._buildArgs([e],r),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=we(i,qK);if("error"in s)throw new Pe(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,r){const n=di(e.serialize()).toString("base64"),i=this._buildArgs([n],r),s=await this._rpcRequest("getFeeForMessage",i),o=we(s,dn(Ee(X())));if("error"in o)throw new Pe(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const r=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),n=r!=null&&r.length?[r]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=we(i,XH);if("error"in s)throw new Pe(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhashAndContext(e){const{commitment:r,config:n}=gr(e),i=this._buildArgs([],r,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),o=we(s,jK);if("error"in o)throw new Pe(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,r){const{commitment:n,config:i}=gr(r),s=this._buildArgs([e],n,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=we(o,UK);if("error"in a)throw new Pe(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),r=we(e,ht(WH));if("error"in r)throw new Pe(r.error,"failed to get version");return r.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),r=we(e,ht(pe()));if("error"in r)throw new Pe(r.error,"failed to get genesis hash");return r.result}async getBlock(e,r){const{commitment:n,config:i}=gr(r),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=we(o,kK);if("error"in a)throw a.error;return a.result}case"none":{const a=we(o,OK);if("error"in a)throw a.error;return a.result}default:{const a=we(o,PK);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:l,meta:u,version:h})=>({meta:u,transaction:{...l,message:yE(h,l.message)},version:h}))}:null}}}catch(a){throw new Pe(a,"failed to get confirmed block")}}async getParsedBlock(e,r){const{commitment:n,config:i}=gr(r),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=we(o,DK);if("error"in a)throw a.error;return a.result}case"none":{const a=we(o,LK);if("error"in a)throw a.error;return a.result}default:{const a=we(o,RK);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Pe(a,"failed to get block")}}async getBlockProduction(e){let r,n;if(typeof e=="string")n=e;else if(e){const{commitment:a,...c}=e;n=a,r=c}const i=this._buildArgs([],n,"base64",r),s=await this._rpcRequest("getBlockProduction",i),o=we(s,VH);if("error"in o)throw new Pe(o.error,"failed to get block production information");return o.result}async getTransaction(e,r){const{commitment:n,config:i}=gr(r),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getTransaction",s),a=we(o,wE);if("error"in a)throw new Pe(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:yE(c.version,c.transaction.message)}}}async getParsedTransaction(e,r){const{commitment:n,config:i}=gr(r),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=we(o,sw);if("error"in a)throw new Pe(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,r){const{commitment:n,config:i}=gr(r),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(c=>{const l=we(c,sw);if("error"in l)throw new Pe(l.error,"failed to get transactions");return l.result})}async getTransactions(e,r){const{commitment:n,config:i}=gr(r),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,i)}));return(await this._rpcBatchRequest(s)).map(c=>{const l=we(c,wE);if("error"in l)throw new Pe(l.error,"failed to get transactions");const u=l.result;return u&&{...u,transaction:{...u.transaction,message:yE(u.version,u.transaction.message)}}})}async getConfirmedBlock(e,r){const n=this._buildArgsAtLeastConfirmed([e],r),i=await this._rpcRequest("getBlock",n),s=we(i,BK);if("error"in s)throw new Pe(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:l})=>{const u=new Qc(c.message);return{meta:l,transaction:{...c,message:u}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:l})=>({meta:l,transaction:wi.populate(c.message,c.signatures)}))}}async getBlocks(e,r,n){const i=this._buildArgsAtLeastConfirmed(r!==void 0?[e,r]:[e],n),s=await this._rpcRequest("getBlocks",i),o=we(s,ht(be(X())));if("error"in o)throw new Pe(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,r){const n=this._buildArgsAtLeastConfirmed([e],r,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=we(i,B6);if("error"in s)throw new Pe(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,r){const n=this._buildArgsAtLeastConfirmed([e],r,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=we(i,B6);if("error"in s)throw new Pe(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,r){const n=this._buildArgsAtLeastConfirmed([e],r),i=await this._rpcRequest("getTransaction",n),s=we(i,wE);if("error"in s)throw new Pe(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new Qc(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:wi.populate(a,c)}}async getParsedConfirmedTransaction(e,r){const n=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed"),i=await this._rpcRequest("getTransaction",n),s=we(i,sw);if("error"in s)throw new Pe(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,r){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],r,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=we(o,sw);if("error"in a)throw new Pe(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,r,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(r--,!(r<=0||r<s));)try{const c=await this.getConfirmedBlockSignatures(r,"finalized");c.signatures.length>0&&(i.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>o));)try{const c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(i.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,r,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,r),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=we(s,fK);if("error"in o)throw new Pe(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,r,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,r),s=await this._rpcRequest("getSignaturesForAddress",i),o=we(s,pK);if("error"in o)throw new Pe(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,r){const{context:n,value:i}=await this.getAccountInfoAndContext(e,r);let s=null;return i!==null&&(s=new k6({key:e,state:k6.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,r){const{context:n,value:i}=await this.getAccountInfoAndContext(e,r);let s=null;return i!==null&&(s=NI.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,r){return await this.getNonceAndContext(e,r).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,r){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),r]),i=we(n,WK);if("error"in i)throw new Pe(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await tf(100);const n=Date.now()-this._blockhashInfo.lastFetch>=PH;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),r=this._blockhashInfo.latestBlockhash,n=r?r.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await tf(bH/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:r,config:n}=gr(e),i=this._buildArgs([],r,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=we(s,dn(X()));if("error"in o)throw new Pe(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,r,n){if("message"in e){const v=e.serialize(),$=Xe.Buffer.from(v).toString("base64");if(Array.isArray(r)||n!==void 0)throw new Error("Invalid arguments");const _=r||{};_.encoding="base64","commitment"in _||(_.commitment=this.commitment),r&&typeof r=="object"&&"innerInstructions"in r&&(_.innerInstructions=r.innerInstructions);const S=[$,_],A=await this._rpcRequest("simulateTransaction",S),T=we(A,D6);if("error"in T)throw new Error("failed to simulate transaction: "+T.error.message);return T.result}let i;if(e instanceof wi){let m=e;i=new wi,i.feePayer=m.feePayer,i.instructions=e.instructions,i.nonceInfo=m.nonceInfo,i.signatures=m.signatures}else i=wi.populate(e),i._message=i._json=void 0;if(r!==void 0&&!Array.isArray(r))throw new Error("Invalid arguments");const s=r;if(i.nonceInfo&&s)i.sign(...s);else{let m=this._disableBlockhashCaching;for(;;){const v=await this._blockhashWithExpiryBlockHeight(m);if(i.lastValidBlockHeight=v.lastValidBlockHeight,i.recentBlockhash=v.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const $=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes($)&&!this._blockhashInfo.transactionSignatures.includes($)){this._blockhashInfo.simulatedSignatures.push($);break}else m=!0}}const o=i._compile(),a=o.serialize(),l=i._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(n){const m=(Array.isArray(n)?n:o.nonProgramIds()).map(v=>v.toBase58());u.accounts={encoding:"base64",addresses:m}}s&&(u.sigVerify=!0),r&&typeof r=="object"&&"innerInstructions"in r&&(u.innerInstructions=r.innerInstructions);const h=[l,u],d=await this._rpcRequest("simulateTransaction",h),g=we(d,D6);if("error"in g){let m;if("data"in g.error&&(m=g.error.data.logs,m&&Array.isArray(m))){const v=`
    `,$=v+m.join(v);console.error(g.error.message,$)}throw new M6({action:"simulate",signature:"",transactionMessage:g.error.message,logs:m})}return g.result}async sendTransaction(e,r,n){if("version"in e){if(r&&Array.isArray(r))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,r)}if(r===void 0||!Array.isArray(r))throw new Error("Invalid arguments");const i=r;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,r){const n=di(e).toString("base64");return await this.sendEncodedTransaction(n,r)}async sendEncodedTransaction(e,r){const n={encoding:"base64"},i=r&&r.skipPreflight,s=i===!0?"processed":r&&r.preflightCommitment||this.commitment;r&&r.maxRetries!=null&&(n.maxRetries=r.maxRetries),r&&r.minContextSlot!=null&&(n.minContextSlot=r.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const o=[e,n],a=await this._rpcRequest("sendTransaction",o),c=we(a,HK);if("error"in c){let l;throw"data"in c.error&&(l=c.error.data.logs),new M6({action:i?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:l})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([r,n])=>{this._setSubscription(r,{...n,state:"pending"})})}_setSubscription(e,r){var i;const n=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=r,n!==r.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(r.state)}catch{}})}}_onSubscriptionStateChange(e,r){var s;const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[n]||(s[n]=new Set);return i.add(r),()=>{i.delete(r),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,r=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(n,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!r())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!r())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,r){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...r)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:r,subscription:n}=we(e,gK);this._handleServerNotification(n,[r.value,r.context])}_makeSubscription(e,r){const n=this._nextClientSubscriptionId++,i=P6([e.method,r]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:r,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[i];qr(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,r,n){const{commitment:i,config:s}=gr(n),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:r,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:r,subscription:n}=we(e,yK);this._handleServerNotification(n,[{accountId:r.value.pubkey,accountInfo:r.value.account},r.context])}onProgramAccountChange(e,r,n,i){const{commitment:s,config:o}=gr(n),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:R6(i)}:void 0));return this._makeSubscription({callback:r,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,r,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:r,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:r,subscription:n}=we(e,VK);this._handleServerNotification(n,[r.value,r.context])}_wsOnSlotNotification(e){const{result:r,subscription:n}=we(e,bK);this._handleServerNotification(n,[r])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:r,subscription:n}=we(e,EK);this._handleServerNotification(n,[r])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,r){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${r}' events could not be found.`)}_buildArgs(e,r,n,i){const s=r||this._commitment;if(s||n||i){let o={};n&&(o.encoding=n),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,r,n,i){const s=r||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,r,n,i)}_wsOnSignatureNotification(e){const{result:r,subscription:n}=we(e,_K);r.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,r.value==="receivedSignature"?[{type:"received"},r.context]:[{type:"status",result:r.value},r.context])}onSignature(e,r,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){r(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,r,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(c,l)=>{r(c,l);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:r,subscription:n}=we(e,SK);this._handleServerNotification(n,[r])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:Te([Le("instruction"),up("recentSlot"),Ut("bumpSeed")])},FreezeLookupTable:{index:1,layout:Te([Le("instruction")])},ExtendLookupTable:{index:2,layout:Te([Le("instruction"),up(),zi(yt(),yh(Le(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Te([Le("instruction")])},CloseLookupTable:{index:4,layout:Te([Le("instruction")])}});new Ae("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:Te([Ut("instruction"),Le("units"),Le("additionalFee")])},RequestHeapFrame:{index:1,layout:Te([Ut("instruction"),Le("bytes")])},SetComputeUnitLimit:{index:2,layout:Te([Ut("instruction"),Le("units")])},SetComputeUnitPrice:{index:3,layout:Te([Ut("instruction"),up("microLamports")])}});new Ae("ComputeBudget111111111111111111111111111111");Te([Ut("numSignatures"),Ut("padding"),vo("signatureOffset"),vo("signatureInstructionIndex"),vo("publicKeyOffset"),vo("publicKeyInstructionIndex"),vo("messageDataOffset"),vo("messageDataSize"),vo("messageInstructionIndex")]);new Ae("Ed25519SigVerify111111111111111111111111111");sH.utils.isValidPrivateKey;Te([Ut("numSignatures"),vo("signatureOffset"),Ut("signatureInstructionIndex"),vo("ethAddressOffset"),Ut("ethAddressInstructionIndex"),vo("messageDataOffset"),vo("messageDataSize"),Ut("messageInstructionIndex"),Ur(20,"ethAddress"),Ur(64,"signature"),Ut("recoveryId")]);new Ae("KeccakSecp256k11111111111111111111111111111");var gk;new Ae("StakeConfig11111111111111111111111111111111");class mk{constructor(e,r,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=r,this.custodian=n}}gk=mk;mk.default=new gk(0,0,Ae.default);Object.freeze({Initialize:{index:0,layout:Te([Le("instruction"),hH(),dH()])},Authorize:{index:1,layout:Te([Le("instruction"),yt("newAuthorized"),Le("stakeAuthorizationType")])},Delegate:{index:2,layout:Te([Le("instruction")])},Split:{index:3,layout:Te([Le("instruction"),Ls("lamports")])},Withdraw:{index:4,layout:Te([Le("instruction"),Ls("lamports")])},Deactivate:{index:5,layout:Te([Le("instruction")])},Merge:{index:7,layout:Te([Le("instruction")])},AuthorizeWithSeed:{index:8,layout:Te([Le("instruction"),yt("newAuthorized"),Le("stakeAuthorizationType"),Tf("authoritySeed"),yt("authorityOwner")])}});new Ae("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Te([Le("instruction"),fH()])},Authorize:{index:1,layout:Te([Le("instruction"),yt("newAuthorized"),Le("voteAuthorizationType")])},Withdraw:{index:3,layout:Te([Le("instruction"),Ls("lamports")])},UpdateValidatorIdentity:{index:4,layout:Te([Le("instruction")])},AuthorizeWithSeed:{index:10,layout:Te([Le("instruction"),pH()])}});new Ae("Vote111111111111111111111111111111111111111");new Ae("Va1idator1nfo111111111111111111111111111111");le({name:pe(),website:Re(pe()),details:Re(pe()),iconUrl:Re(pe()),keybaseUsername:Re(pe())});new Ae("Vote111111111111111111111111111111111111111");Te([yt("nodePubkey"),yt("authorizedWithdrawer"),Ut("commission"),ui(),zi(Te([ui("slot"),Le("confirmationCount")]),yh(Le(),-8),"votes"),Ut("rootSlotValid"),ui("rootSlot"),ui(),zi(Te([ui("epoch"),yt("authorizedVoter")]),yh(Le(),-8),"authorizedVoters"),Te([zi(Te([yt("authorizedPubkey"),ui("epochOfLastAuthorizedSwitch"),ui("targetEpoch")]),32,"buf"),ui("idx"),Ut("isEmpty")],"priorVoters"),ui(),zi(Te([ui("epoch"),ui("credits"),ui("prevCredits")]),yh(Le(),-8),"epochCredits"),Te([ui("slot"),ui("timestamp")],"lastTimestamp")]);const QK={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function ZK(t,e){return QK["https"][t]}const wh=1e9,yk=ne.createContext({});function ty(){return ne.useContext(yk)}const JK=({children:t,endpoint:e,config:r={commitment:"confirmed"}})=>{const n=ne.useMemo(()=>new YK(e,r),[e,r]);return fe.createElement(yk.Provider,{value:{connection:n}},t)};class yn extends Error{constructor(e,r){super(e),this.error=r}}class aa extends yn{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class wk extends yn{constructor(){super(...arguments),this.name="WalletLoadError"}}class $f extends yn{constructor(){super(...arguments),this.name="WalletConfigError"}}class ca extends yn{constructor(){super(...arguments),this.name="WalletConnectionError"}}class ry extends yn{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class pu extends yn{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class Uc extends yn{constructor(){super(...arguments),this.name="WalletAccountError"}}class Zc extends yn{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class Ct extends yn{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class $a extends yn{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class mn extends yn{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class Qh extends yn{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class j6 extends yn{constructor(){super(...arguments),this.name="WalletSignInError"}}class XK extends yn{constructor(){super(...arguments),this.name="WalletWindowClosedError"}}var ke;(function(t){t.Installed="Installed",t.NotDetected="NotDetected",t.Loadable="Loadable",t.Unsupported="Unsupported"})(ke||(ke={}));class bk extends xI{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,r,n={}){const i=this.publicKey;if(!i)throw new Ct;return e.feePayer=e.feePayer||i,e.recentBlockhash=e.recentBlockhash||(await r.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,e}}function Ov(t){if(typeof window>"u"||typeof document>"u")return;const e=[];function r(){if(t())for(const s of e)s()}const n=setInterval(r,1e3);e.push(()=>clearInterval(n)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",r,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",r))),document.readyState!=="complete"&&(window.addEventListener("load",r,{once:!0}),e.push(()=>window.removeEventListener("load",r))),r()}function sS(){if(!navigator)return!1;const t=navigator.userAgent.toLowerCase(),e=t.includes("iphone")||t.includes("ipad"),r=t.includes("safari");return e&&r}function xo(t){return"version"in t}class PI extends bk{async sendTransaction(e,r,n={}){let i=!0;try{if(xo(e)){if(!this.supportedTransactionVersions)throw new $a("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new $a(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const s=e.serialize();return await r.sendRawTransaction(s,n)}catch(s){throw s instanceof mn?(i=!1,s):new $a(s==null?void 0:s.message,s)}}else try{const{signers:s,...o}=n;e=await this.prepareTransaction(e,r,o),s!=null&&s.length&&e.partialSign(...s),e=await this.signTransaction(e);const a=e.serialize();return await r.sendRawTransaction(a,o)}catch(s){throw s instanceof mn?(i=!1,s):new $a(s==null?void 0:s.message,s)}}catch(s){throw i&&this.emit("error",s),s}}async signAllTransactions(e){for(const n of e)if(xo(n)){if(!this.supportedTransactionVersions)throw new mn("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new mn(`Signing transaction version ${n.version} isn't supported by this wallet`)}const r=[];for(const n of e)r.push(await this.signTransaction(n));return r}}class ny extends PI{}class eV extends ny{}const Zi="solana:signAndSendTransaction",bh="solana:signIn",Rc="solana:signMessage",Wr="solana:signTransaction",kv="standard:connect",Ab="standard:disconnect",Rv="standard:events";function tV(t){return kv in t.features&&Rv in t.features&&(Zi in t.features||Wr in t.features)}var oS;(function(t){t.Mainnet="mainnet-beta",t.Testnet="testnet",t.Devnet="devnet"})(oS||(oS={}));class U6 extends yn{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const rV=[],Dv={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){Qo("call","select")},connect(){return Promise.reject(Qo("call","connect"))},disconnect(){return Promise.reject(Qo("call","disconnect"))},sendTransaction(){return Promise.reject(Qo("call","sendTransaction"))},signTransaction(){return Promise.reject(Qo("call","signTransaction"))},signAllTransactions(){return Promise.reject(Qo("call","signAllTransactions"))},signMessage(){return Promise.reject(Qo("call","signMessage"))},signIn(){return Promise.reject(Qo("call","signIn"))}};Object.defineProperty(Dv,"wallets",{get(){return Qo("read","wallets"),rV}});Object.defineProperty(Dv,"wallet",{get(){return Qo("read","wallet"),null}});Object.defineProperty(Dv,"publicKey",{get(){return Qo("read","publicKey"),null}});function Qo(t,e){const r=new Error(`You have tried to ${t} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(r),r}const vk=ne.createContext(Dv);function bu(){return ne.useContext(vk)}function nV(t,e){const r=ne.useState(()=>{try{const s=localStorage.getItem(t);if(s)return JSON.parse(s)}catch(s){typeof window<"u"&&console.error(s)}return e}),n=r[0],i=ne.useRef(!0);return ne.useEffect(()=>{if(i.current){i.current=!1;return}try{n===null?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(n))}catch(s){typeof window<"u"&&console.error(s)}},[n,t]),r}var iV=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Ek={},eo={};let OI;const sV=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];eo.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};eo.getSymbolTotalCodewords=function(e){return sV[e]};eo.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};eo.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');OI=e};eo.isKanjiModeEnabled=function(){return typeof OI<"u"};eo.toSJIS=function(e){return OI(e)};var Lv={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(Lv);function _k(){this.buffer=[],this.length=0}_k.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var oV=_k;function iy(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}iy.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)};iy.prototype.get=function(t,e){return this.data[t*this.size+e]};iy.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};iy.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var aV=iy,Sk={};(function(t){const e=eo.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(Sk);var xk={};const cV=eo.getSymbolSize,F6=7;xk.getPositions=function(e){const r=cV(e);return[[0,0],[r-F6,0],[0,r-F6]]};var Ik={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,l=null,u=null;for(let h=0;h<s;h++){a=c=0,l=u=null;for(let d=0;d<s;d++){let g=i.get(h,d);g===l?a++:(a>=5&&(o+=e.N1+(a-5)),l=g,a=1),g=i.get(d,h),g===u?c++:(c>=5&&(o+=e.N1+(c-5)),u=g,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const l=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(l===4||l===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let l=0;l<s;l++){a=c=0;for(let u=0;u<s;u++)a=a<<1&2047|i.get(l,u),u>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(u,l),u>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,r(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let l=0;l<o;l++){s(l),t.applyMask(l,i);const u=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(l,i),u<c&&(c=u,a=l)}return a}})(Ik);var Bv={};const ql=Lv,ow=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],aw=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Bv.getBlocksCount=function(e,r){switch(r){case ql.L:return ow[(e-1)*4+0];case ql.M:return ow[(e-1)*4+1];case ql.Q:return ow[(e-1)*4+2];case ql.H:return ow[(e-1)*4+3];default:return}};Bv.getTotalCodewordsCount=function(e,r){switch(r){case ql.L:return aw[(e-1)*4+0];case ql.M:return aw[(e-1)*4+1];case ql.Q:return aw[(e-1)*4+2];case ql.H:return aw[(e-1)*4+3];default:return}};var Ak={},jv={};const vg=new Uint8Array(512),Cb=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)vg[r]=e,Cb[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)vg[r]=vg[r-255]})();jv.log=function(e){if(e<1)throw new Error("log("+e+")");return Cb[e]};jv.exp=function(e){return vg[e]};jv.mul=function(e,r){return e===0||r===0?0:vg[Cb[e]+Cb[r]]};(function(t){const e=jv;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(n[o],i[a]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(Ak);const Ck=Ak;function kI(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}kI.prototype.initialize=function(e){this.degree=e,this.genPoly=Ck.generateECPolynomial(this.degree)};kI.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=Ck.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var lV=kI,Nk={},vu={},RI={};RI.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Ga={};const Mk="[0-9]+",uV="[A-Z $%*+\\-./:]+";let rm="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";rm=rm.replace(/u/g,"\\u");const hV="(?:(?![A-Z0-9 $%*+\\-./:]|"+rm+`)(?:.|[\r
]))+`;Ga.KANJI=new RegExp(rm,"g");Ga.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ga.BYTE=new RegExp(hV,"g");Ga.NUMERIC=new RegExp(Mk,"g");Ga.ALPHANUMERIC=new RegExp(uV,"g");const dV=new RegExp("^"+rm+"$"),fV=new RegExp("^"+Mk+"$"),pV=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ga.testKanji=function(e){return dV.test(e)};Ga.testNumeric=function(e){return fV.test(e)};Ga.testAlphanumeric=function(e){return pV.test(e)};(function(t){const e=RI,r=Ga;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}})(vu);(function(t){const e=eo,r=Bv,n=Lv,i=vu,s=RI,o=7973,a=e.getBCHDigit(o);function c(d,g,m){for(let v=1;v<=40;v++)if(g<=t.getCapacity(v,m,d))return v}function l(d,g){return i.getCharCountIndicator(d,g)+4}function u(d,g){let m=0;return d.forEach(function(v){const $=l(v.mode,g);m+=$+v.getBitsLength()}),m}function h(d,g){for(let m=1;m<=40;m++)if(u(d,m)<=t.getCapacity(m,g,i.MIXED))return m}t.from=function(g,m){return s.isValid(g)?parseInt(g,10):m},t.getCapacity=function(g,m,v){if(!s.isValid(g))throw new Error("Invalid QR Code version");typeof v>"u"&&(v=i.BYTE);const $=e.getSymbolTotalCodewords(g),_=r.getTotalCodewordsCount(g,m),S=($-_)*8;if(v===i.MIXED)return S;const A=S-l(v,g);switch(v){case i.NUMERIC:return Math.floor(A/10*3);case i.ALPHANUMERIC:return Math.floor(A/11*2);case i.KANJI:return Math.floor(A/13);case i.BYTE:default:return Math.floor(A/8)}},t.getBestVersionForData=function(g,m){let v;const $=n.from(m,n.M);if(Array.isArray(g)){if(g.length>1)return h(g,$);if(g.length===0)return 1;v=g[0]}else v=g;return c(v.mode,v.getLength(),$)},t.getEncodedBits=function(g){if(!s.isValid(g)||g<7)throw new Error("Invalid QR Code version");let m=g<<12;for(;e.getBCHDigit(m)-a>=0;)m^=o<<e.getBCHDigit(m)-a;return g<<12|m}})(Nk);var Tk={};const aS=eo,$k=1335,gV=21522,z6=aS.getBCHDigit($k);Tk.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;aS.getBCHDigit(i)-z6>=0;)i^=$k<<aS.getBCHDigit(i)-z6;return(n<<10|i)^gV};var Pk={};const mV=vu;function hp(t){this.mode=mV.NUMERIC,this.data=t.toString()}hp.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};hp.prototype.getLength=function(){return this.data.length};hp.prototype.getBitsLength=function(){return hp.getBitsLength(this.data.length)};hp.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var yV=hp;const wV=vu,bE=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function dp(t){this.mode=wV.ALPHANUMERIC,this.data=t}dp.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};dp.prototype.getLength=function(){return this.data.length};dp.prototype.getBitsLength=function(){return dp.getBitsLength(this.data.length)};dp.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=bE.indexOf(this.data[r])*45;n+=bE.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(bE.indexOf(this.data[r]),6)};var bV=dp;const vV=vu;function fp(t){this.mode=vV.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}fp.getBitsLength=function(e){return e*8};fp.prototype.getLength=function(){return this.data.length};fp.prototype.getBitsLength=function(){return fp.getBitsLength(this.data.length)};fp.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var EV=fp;const _V=vu,SV=eo;function pp(t){this.mode=_V.KANJI,this.data=t}pp.getBitsLength=function(e){return e*13};pp.prototype.getLength=function(){return this.data.length};pp.prototype.getBitsLength=function(){return pp.getBitsLength(this.data.length)};pp.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=SV.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var xV=pp,Ok={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var c,l,u,h,d,g,m,v,$;!a.empty();){c=a.pop(),l=c.value,h=c.cost,d=r[l]||{};for(u in d)d.hasOwnProperty(u)&&(g=d[u],m=h+g,v=o[u],$=typeof o[u]>"u",($||v>m)&&(o[u]=m,a.push(u,m),s[u]=l))}if(typeof i<"u"&&typeof o[i]>"u"){var _=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(_)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Ok);var IV=Ok.exports;(function(t){const e=vu,r=yV,n=bV,i=EV,s=xV,o=Ga,a=eo,c=IV;function l(_){return unescape(encodeURIComponent(_)).length}function u(_,S,A){const T=[];let k;for(;(k=_.exec(A))!==null;)T.push({data:k[0],index:k.index,mode:S,length:k[0].length});return T}function h(_){const S=u(o.NUMERIC,e.NUMERIC,_),A=u(o.ALPHANUMERIC,e.ALPHANUMERIC,_);let T,k;return a.isKanjiModeEnabled()?(T=u(o.BYTE,e.BYTE,_),k=u(o.KANJI,e.KANJI,_)):(T=u(o.BYTE_KANJI,e.BYTE,_),k=[]),S.concat(A,T,k).sort(function(L,F){return L.index-F.index}).map(function(L){return{data:L.data,mode:L.mode,length:L.length}})}function d(_,S){switch(S){case e.NUMERIC:return r.getBitsLength(_);case e.ALPHANUMERIC:return n.getBitsLength(_);case e.KANJI:return s.getBitsLength(_);case e.BYTE:return i.getBitsLength(_)}}function g(_){return _.reduce(function(S,A){const T=S.length-1>=0?S[S.length-1]:null;return T&&T.mode===A.mode?(S[S.length-1].data+=A.data,S):(S.push(A),S)},[])}function m(_){const S=[];for(let A=0;A<_.length;A++){const T=_[A];switch(T.mode){case e.NUMERIC:S.push([T,{data:T.data,mode:e.ALPHANUMERIC,length:T.length},{data:T.data,mode:e.BYTE,length:T.length}]);break;case e.ALPHANUMERIC:S.push([T,{data:T.data,mode:e.BYTE,length:T.length}]);break;case e.KANJI:S.push([T,{data:T.data,mode:e.BYTE,length:l(T.data)}]);break;case e.BYTE:S.push([{data:T.data,mode:e.BYTE,length:l(T.data)}])}}return S}function v(_,S){const A={},T={start:{}};let k=["start"];for(let R=0;R<_.length;R++){const L=_[R],F=[];for(let B=0;B<L.length;B++){const q=L[B],D=""+R+B;F.push(D),A[D]={node:q,lastCount:0},T[D]={};for(let E=0;E<k.length;E++){const b=k[E];A[b]&&A[b].node.mode===q.mode?(T[b][D]=d(A[b].lastCount+q.length,q.mode)-d(A[b].lastCount,q.mode),A[b].lastCount+=q.length):(A[b]&&(A[b].lastCount=q.length),T[b][D]=d(q.length,q.mode)+4+e.getCharCountIndicator(q.mode,S))}}k=F}for(let R=0;R<k.length;R++)T[k[R]].end=0;return{map:T,table:A}}function $(_,S){let A;const T=e.getBestModeForData(_);if(A=e.from(S,T),A!==e.BYTE&&A.bit<T.bit)throw new Error('"'+_+'" cannot be encoded with mode '+e.toString(A)+`.
 Suggested mode is: `+e.toString(T));switch(A===e.KANJI&&!a.isKanjiModeEnabled()&&(A=e.BYTE),A){case e.NUMERIC:return new r(_);case e.ALPHANUMERIC:return new n(_);case e.KANJI:return new s(_);case e.BYTE:return new i(_)}}t.fromArray=function(S){return S.reduce(function(A,T){return typeof T=="string"?A.push($(T,null)):T.data&&A.push($(T.data,T.mode)),A},[])},t.fromString=function(S,A){const T=h(S,a.isKanjiModeEnabled()),k=m(T),R=v(k,A),L=c.find_path(R.map,"start","end"),F=[];for(let B=1;B<L.length-1;B++)F.push(R.table[L[B]].node);return t.fromArray(g(F))},t.rawSplit=function(S){return t.fromArray(h(S,a.isKanjiModeEnabled()))}})(Pk);const Uv=eo,vE=Lv,AV=oV,CV=aV,NV=Sk,MV=xk,cS=Ik,lS=Bv,TV=lV,Nb=Nk,$V=Tk,PV=vu,EE=Pk;function OV(t,e){const r=t.size,n=MV.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function kV(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function RV(t,e){const r=NV.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function DV(t,e){const r=t.size,n=Nb.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function _E(t,e,r){const n=t.size,i=$V.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function LV(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let l=!1;o<e.length&&(l=(e[o]>>>s&1)===1),t.set(i,a-c,l),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function BV(t,e,r){const n=new AV;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),PV.getCharCountIndicator(c.mode,t)),c.write(n)});const i=Uv.getSymbolTotalCodewords(t),s=lS.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return jV(n,t,e)}function jV(t,e,r){const n=Uv.getSymbolTotalCodewords(e),i=lS.getTotalCodewordsCount(e,r),s=n-i,o=lS.getBlocksCount(e,r),a=n%o,c=o-a,l=Math.floor(n/o),u=Math.floor(s/o),h=u+1,d=l-u,g=new TV(d);let m=0;const v=new Array(o),$=new Array(o);let _=0;const S=new Uint8Array(t.buffer);for(let L=0;L<o;L++){const F=L<c?u:h;v[L]=S.slice(m,m+F),$[L]=g.encode(v[L]),m+=F,_=Math.max(_,F)}const A=new Uint8Array(n);let T=0,k,R;for(k=0;k<_;k++)for(R=0;R<o;R++)k<v[R].length&&(A[T++]=v[R][k]);for(k=0;k<d;k++)for(R=0;R<o;R++)A[T++]=$[R][k];return A}function UV(t,e,r,n){let i;if(Array.isArray(t))i=EE.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){const u=EE.rawSplit(t);l=Nb.getBestVersionForData(u,r)}i=EE.fromString(t,l||40)}else throw new Error("Invalid data");const s=Nb.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=BV(e,r,i),a=Uv.getSymbolSize(e),c=new CV(a);return OV(c,e),kV(c),RV(c,e),_E(c,r,0),e>=7&&DV(c,e),LV(c,o),isNaN(n)&&(n=cS.getBestMask(c,_E.bind(null,c,r))),cS.applyMask(n,c),_E(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}Ek.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=vE.M,i,s;return typeof r<"u"&&(n=vE.from(r.errorCorrectionLevel,vE.M),i=Nb.from(r.version),s=cS.from(r.maskPattern),r.toSJISFunc&&Uv.setToSJISFunction(r.toSJISFunc)),UV(e,i,n,s)};var kk={},DI={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),l=Math.floor((o+s.margin*2)*c),u=s.margin*c,h=[s.color.light,s.color.dark];for(let d=0;d<l;d++)for(let g=0;g<l;g++){let m=(d*l+g)*4,v=s.color.light;if(d>=u&&g>=u&&d<l-u&&g<l-u){const $=Math.floor((d-u)/c),_=Math.floor((g-u)/c);v=h[a[$*o+_]?1:0]}n[m++]=v.r,n[m++]=v.g,n[m++]=v.b,n[m]=v.a}}})(DI);(function(t){const e=DI;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,l=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(l=n()),c=e.getOptions(c);const u=e.getImageWidth(s.modules.size,c),h=l.getContext("2d"),d=h.createImageData(u,u);return e.qrToImageData(d.data,s,c),r(h,l,u),h.putImageData(d,0,0),l},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const l=t.render(s,o,c),u=c.type||"image/png",h=c.rendererOpts||{};return l.toDataURL(u,h.quality)}})(kk);var Rk={};const FV=DI;function q6(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function SE(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function zV(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),l=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(n+=s?SE("M",c+r,.5+l+r):SE("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(n+=SE("h",o),o=0)):i++}return n}Rk.render=function(e,r,n){const i=FV.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+q6(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+q6(i.color.dark,"stroke")+' d="'+zV(o,s,i.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',d='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof n=="function"&&n(null,d),d};const qV=iV,uS=Ek,Dk=kk,WV=Rk;function LI(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!qV())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,l){try{const u=uS.create(r,n);c(t(u,e,n))}catch(u){l(u)}})}try{const c=uS.create(r,n);i(null,t(c,e,n))}catch(c){i(c)}}uS.create;LI.bind(null,Dk.render);LI.bind(null,Dk.renderToDataURL);LI.bind(null,function(t,e,r){return WV.render(t,r)});function xE(t){switch(t){case"processed":case"confirmed":case"finalized":case void 0:return t;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const nm="solana:mainnet",Lk="solana:devnet",Bk="solana:testnet",HV="solana:localnet",KV="https://api.mainnet-beta.solana.com";function VV(t){return t.includes(KV)?nm:/\bdevnet\b/i.test(t)?Lk:/\btestnet\b/i.test(t)?Bk:/\blocalhost\b/i.test(t)||/\b127\.0\.0\.1\b/.test(t)?HV:nm}function GV(t){let e=`${t.domain} wants you to sign in with your Solana account:
`;e+=`${t.address}`,t.statement&&(e+=`

${t.statement}`);const r=[];if(t.uri&&r.push(`URI: ${t.uri}`),t.version&&r.push(`Version: ${t.version}`),t.chainId&&r.push(`Chain ID: ${t.chainId}`),t.nonce&&r.push(`Nonce: ${t.nonce}`),t.issuedAt&&r.push(`Issued At: ${t.issuedAt}`),t.expirationTime&&r.push(`Expiration Time: ${t.expirationTime}`),t.notBefore&&r.push(`Not Before: ${t.notBefore}`),t.requestId&&r.push(`Request ID: ${t.requestId}`),t.resources){r.push("Resources:");for(const n of t.resources)r.push(`- ${n}`)}return r.length&&(e+=`

${r.join(`
`)}`),e}function YV(t){return Object.freeze({...t,decode:(e,r=0)=>t.read(e,r)[0]})}var QV=t=>YV({read(e,r){const n=r===0?e:e.slice(r);if(n.length===0)return["",0];let i=n.findIndex(c=>c!==0);i=i===-1?n.length:i;const s=t[0].repeat(i);if(i===n.length)return[s,e.length];const o=n.slice(i).reduce((c,l)=>c*256n+BigInt(l),0n),a=ZV(o,t);return[s+a,e.length]}});function ZV(t,e){const r=BigInt(e.length),n=[];for(;t>0n;)n.unshift(e[Number(t%r)]),t/=r;return n.join("")}var JV="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",XV=()=>QV(JV);const Jc={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class Xc extends Error{constructor(...e){const[r,n,i]=e;super(n),this.code=r,this.data=i,this.name="SolanaMobileWalletAdapterError"}}class jk extends Error{constructor(...e){const[r,n,i,s]=e;super(i),this.code=n,this.data=s,this.jsonRpcMessageId=r,this.name="SolanaMobileWalletAdapterProtocolError"}}function xn(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(t,[])).next())})}function eG(t){return window.btoa(t)}function W6(t,e){return window.btoa(String.fromCharCode.call(null,...t))}function Uk(t){return new Uint8Array(window.atob(t).split("").map(e=>e.charCodeAt(0)))}function IE(t,e){return xn(this,void 0,void 0,function*(){const r=yield crypto.subtle.exportKey("raw",t),n=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,r),i=new Uint8Array(r.byteLength+n.byteLength);return i.set(new Uint8Array(r),0),i.set(new Uint8Array(n),r.byteLength),i})}function tG(t){return GV(t)}function rG(t){return eG(tG(t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const nG="solana:signTransactions",H6="solana:cloneAuthorization";function iG(t){return XV().decode(t)}function sG(t){return iG(Uk(t))}function oG(t,e){return new Proxy({},{get(r,n){return n==="then"?null:(r[n]==null&&(r[n]=function(i){return xn(this,void 0,void 0,function*(){const{method:s,params:o}=aG(n,i,t),a=yield e(s,o);return s==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield lG(o.sign_in_payload,a,e)),cG(n,a,t)})}),r[n])},defineProperty(){return!1},deleteProperty(){return!1}})}function aG(t,e,r){let n=e,i=t.toString().replace(/[A-Z]/g,s=>`_${s.toLowerCase()}`).toLowerCase();switch(t){case"authorize":{let{chain:s}=n;if(r==="legacy"){switch(s){case"solana:testnet":{s="testnet";break}case"solana:devnet":{s="devnet";break}case"solana:mainnet":{s="mainnet-beta";break}default:s=n.cluster}n.cluster=s}else{switch(s){case"testnet":case"devnet":{s=`solana:${s}`;break}case"mainnet-beta":{s="solana:mainnet";break}}n.chain=s}}case"reauthorize":{const{auth_token:s,identity:o}=n;if(s)switch(r){case"legacy":{i="reauthorize",n={auth_token:s,identity:o};break}default:{i="authorize";break}}break}}return{method:i,params:n}}function cG(t,e,r){switch(t){case"getCapabilities":{const n=e;switch(r){case"legacy":{const i=[nG];return n.supports_clone_authorization===!0&&i.push(H6),Object.assign(Object.assign({},n),{features:i})}case"v1":return Object.assign(Object.assign({},n),{supports_sign_and_send_transactions:!0,supports_clone_authorization:n.features.includes(H6)})}}}return e}function lG(t,e,r){var n;return xn(this,void 0,void 0,function*(){const i=(n=t.domain)!==null&&n!==void 0?n:window.location.host,s=e.accounts[0].address,o=rG(Object.assign(Object.assign({},t),{domain:i,address:sG(s)})),a=yield r("sign_messages",{addresses:[s],payloads:[o]}),c=Uk(a.signed_payloads[0]),l=W6(c.slice(0,c.length-64)),u=W6(c.slice(c.length-64));return{address:s,signed_message:l.length==0?o:l,signature:u}})}const sh=4;function uG(t){if(t>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(sh);return new DataView(e).setUint32(0,t,!1),new Uint8Array(e)}const hS=12,Fk=65;function hG(t,e,r){return xn(this,void 0,void 0,function*(){const n=uG(e),i=new Uint8Array(hS);crypto.getRandomValues(i);const s=yield crypto.subtle.encrypt(qk(n,i),r,new TextEncoder().encode(t)),o=new Uint8Array(n.byteLength+i.byteLength+s.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(i),n.byteLength),o.set(new Uint8Array(s),n.byteLength+i.byteLength),o})}function zk(t,e){return xn(this,void 0,void 0,function*(){const r=t.slice(0,sh),n=t.slice(sh,sh+hS),i=t.slice(sh+hS),s=yield crypto.subtle.decrypt(qk(r,n),e,i);return dG().decode(s)})}function qk(t,e){return{additionalData:t,iv:e,name:"AES-GCM",tagLength:128}}let AE;function dG(){return AE===void 0&&(AE=new TextDecoder("utf-8")),AE}function fG(){return xn(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function CE(){return xn(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function pG(t){let e="";const r=new Uint8Array(t),n=r.byteLength;for(let i=0;i<n;i++)e+=String.fromCharCode(r[i]);return window.btoa(e)}function gG(){return Wk(49152+Math.floor(Math.random()*16384))}function Wk(t){if(t<49152||t>65535)throw new Xc(Jc.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${t} given.`,{port:t});return t}function mG(t){return t.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const yG="solana-wallet";function K6(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function wG(t,e){let r=null;if(e){try{r=new URL(e)}catch{}if((r==null?void 0:r.protocol)!=="https:")throw new Xc(Jc.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}r||(r=new URL(`${yG}:/`));const n=t.startsWith("/")?t:[...K6(r.pathname),...K6(t)].join("/");return new URL(n,r)}function bG(t,e,r,n=["v1"]){return xn(this,void 0,void 0,function*(){const i=Wk(e),s=yield crypto.subtle.exportKey("raw",t),o=pG(s),a=wG("v1/associate/local",r);return a.searchParams.set("association",mG(o)),a.searchParams.set("port",`${i}`),n.forEach(c=>{a.searchParams.set("v",c)}),a})}function vG(t,e){return xn(this,void 0,void 0,function*(){const r=JSON.stringify(t),n=t.id;return hG(r,n,e)})}function EG(t,e){return xn(this,void 0,void 0,function*(){const r=yield zk(t,e),n=JSON.parse(r);if(Object.hasOwnProperty.call(n,"error"))throw new jk(n.id,n.error.code,n.error.message);return n})}function _G(t,e,r){return xn(this,void 0,void 0,function*(){const[n,i]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",t.slice(0,Fk),{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:i},r,256),o=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(n),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function SG(t,e){return xn(this,void 0,void 0,function*(){const r=yield zk(t,e),n=JSON.parse(r);let i="legacy";if(Object.hasOwnProperty.call(n,"v"))switch(n.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new Xc(Jc.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${n.v}`)}return{protocol_version:i}})}const Mb={Firefox:0,Other:1};function xG(){return navigator.userAgent.indexOf("Firefox/")!==-1?Mb.Firefox:Mb.Other}function IG(){return new Promise((t,e)=>{function r(){clearTimeout(i),window.removeEventListener("blur",n)}function n(){r(),t()}window.addEventListener("blur",n);const i=setTimeout(()=>{r(),e()},3e3)})}let g0=null;function AG(t){g0==null&&(g0=document.createElement("iframe"),g0.style.display="none",document.body.appendChild(g0)),g0.contentWindow.location.href=t.toString()}function CG(t){return xn(this,void 0,void 0,function*(){if(t.protocol==="https:")window.location.assign(t);else try{const e=xG();switch(e){case Mb.Firefox:AG(t);break;case Mb.Other:{const r=IG();window.location.assign(t),yield r;break}default:}}catch{throw new Xc(Jc.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function NG(t,e){return xn(this,void 0,void 0,function*(){const r=gG(),n=yield bG(t,r,e);return yield CG(n),r})}const V6={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},MG="com.solana.mobilewalletadapter.v1";function TG(){if(typeof window>"u"||window.isSecureContext!==!0)throw new Xc(Jc.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function $G(t){let e;try{e=new URL(t)}catch{throw new Xc(Jc.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new Xc(Jc.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function G6(t){return new DataView(t).getUint32(0,!1)}function PG(t,e){return xn(this,void 0,void 0,function*(){TG();const r=yield fG(),i=`ws://localhost:${yield NG(r.publicKey,e==null?void 0:e.baseUri)}/solana-wallet`;let s;const o=(()=>{const u=[...V6.retryDelayScheduleMs];return()=>u.length>1?u.shift():u[0]})();let a=1,c=0,l={__type:"disconnected"};return new Promise((u,h)=>{let d;const g={},m=()=>xn(this,void 0,void 0,function*(){if(l.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${l.__type}\`.`);return}d.removeEventListener("open",m);const{associationKeypair:k}=l,R=yield CE();d.send(yield IE(R.publicKey,k.privateKey)),l={__type:"hello_req_sent",associationPublicKey:k.publicKey,ecdhPrivateKey:R.privateKey}}),v=k=>{k.wasClean?l={__type:"disconnected"}:h(new Xc(Jc.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${k.code}: ${k.reason}).`,{closeEvent:k})),S()},$=k=>xn(this,void 0,void 0,function*(){S(),Date.now()-s>=V6.timeoutMs?h(new Xc(Jc.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${i}.`)):(yield new Promise(R=>{const L=o();A=window.setTimeout(R,L)}),T())}),_=k=>xn(this,void 0,void 0,function*(){const R=yield k.data.arrayBuffer();switch(l.__type){case"connecting":if(R.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const L=yield CE();d.send(yield IE(L.publicKey,r.privateKey)),l={__type:"hello_req_sent",associationPublicKey:r.publicKey,ecdhPrivateKey:L.privateKey};break;case"connected":try{const F=R.slice(0,sh),B=G6(F);if(B!==c+1)throw new Error("Encrypted message has invalid sequence number");c=B;const q=yield EG(R,l.sharedSecret),D=g[q.id];delete g[q.id],D.resolve(q.result)}catch(F){if(F instanceof jk){const B=g[F.jsonRpcMessageId];delete g[F.jsonRpcMessageId],B.reject(F)}else throw F}break;case"hello_req_sent":{if(R.byteLength===0){const E=yield CE();d.send(yield IE(E.publicKey,r.privateKey)),l={__type:"hello_req_sent",associationPublicKey:r.publicKey,ecdhPrivateKey:E.privateKey};break}const F=yield _G(R,l.associationPublicKey,l.ecdhPrivateKey),B=R.slice(Fk),q=B.byteLength!==0?yield xn(this,void 0,void 0,function*(){const E=B.slice(0,sh),b=G6(E);if(b!==c+1)throw new Error("Encrypted message has invalid sequence number");return c=b,SG(B,F)}):{protocol_version:"legacy"};l={__type:"connected",sharedSecret:F,sessionProperties:q};const D=oG(q.protocol_version,(E,b)=>xn(this,void 0,void 0,function*(){const f=a++;return d.send(yield vG({id:f,jsonrpc:"2.0",method:E,params:b??{}},F)),new Promise((p,w)=>{g[f]={resolve(N){switch(E){case"authorize":case"reauthorize":{const{wallet_uri_base:M}=N;if(M!=null)try{$G(M)}catch(x){w(x);return}break}}p(N)},reject:w}})}));try{u(yield t(D))}catch(E){h(E)}finally{S(),d.close()}break}}});let S,A;const T=()=>{S&&S(),l={__type:"connecting",associationKeypair:r},s===void 0&&(s=Date.now()),d=new WebSocket(i,[MG]),d.addEventListener("open",m),d.addEventListener("close",v),d.addEventListener("error",$),d.addEventListener("message",_),S=()=>{window.clearTimeout(A),d.removeEventListener("open",m),d.removeEventListener("close",v),d.removeEventListener("error",$),d.removeEventListener("message",_)}};T()})})}function OG(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var m=0,v=0,$=0,_=g.length;$!==_&&g[$]===0;)$++,m++;for(var S=(_-$)*l+1>>>0,A=new Uint8Array(S);$!==_;){for(var T=g[$],k=0,R=S-1;(T!==0||k<v)&&R!==-1;R--,k++)T+=256*A[R]>>>0,A[R]=T%o>>>0,T=T/o>>>0;if(T!==0)throw new Error("Non-zero carry");v=k,$++}for(var L=S-v;L!==S&&A[L]===0;)L++;for(var F=a.repeat(m);L<S;++L)F+=t.charAt(A[L]);return F}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;for(var m=0,v=0,$=0;g[m]===a;)v++,m++;for(var _=(g.length-m)*c+1>>>0,S=new Uint8Array(_);g[m];){var A=g.charCodeAt(m);if(A>255)return;var T=e[A];if(T===255)return;for(var k=0,R=_-1;(T!==0||k<$)&&R!==-1;R--,k++)T+=o*S[R]>>>0,S[R]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");$=k,m++}for(var L=_-$;L!==_&&S[L]===0;)L++;for(var F=new Uint8Array(v+(_-L)),B=v;L!==_;)F[B++]=S[L++];return F}function d(g){var m=h(g);if(m)return m;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:h,decode:d}}var kG=OG;const RG=kG,DG="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var LG=RG(DG);const dS=ha(LG);function zr(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(t,[])).next())})}function ae(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function vn(t,e,r,n,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}var J0,Tn,ju,rf,Hk,Kk,Vk,o1;const BG=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,jG=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,UG=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class FG{constructor(){J0.add(this),Tn.set(this,null),ju.set(this,{}),rf.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),ae(this,J0,"m",Kk).call(this),ae(this,Tn,"f")&&(ae(this,Tn,"f").style.display="flex")},this.close=(e=void 0)=>{var r;console.debug("Modal close"),ae(this,J0,"m",Vk).call(this),ae(this,Tn,"f")&&(ae(this,Tn,"f").style.display="none"),(r=ae(this,ju,"f").close)===null||r===void 0||r.forEach(n=>n(e))},o1.set(this,e=>{e.key==="Escape"&&this.close(e)}),this.init=this.init.bind(this),vn(this,Tn,document.getElementById("mobile-wallet-adapter-embedded-root-ui"))}init(){return zr(this,void 0,void 0,function*(){console.log("Injecting modal"),ae(this,J0,"m",Hk).call(this)})}addEventListener(e,r){var n;return!((n=ae(this,ju,"f")[e])===null||n===void 0)&&n.push(r)||(ae(this,ju,"f")[e]=[r]),()=>this.removeEventListener(e,r)}removeEventListener(e,r){var n;ae(this,ju,"f")[e]=(n=ae(this,ju,"f")[e])===null||n===void 0?void 0:n.filter(i=>r!==i)}}Tn=new WeakMap,ju=new WeakMap,rf=new WeakMap,o1=new WeakMap,J0=new WeakSet,Hk=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){ae(this,Tn,"f")||vn(this,Tn,document.getElementById("mobile-wallet-adapter-embedded-root-ui"));return}vn(this,Tn,document.createElement("div")),ae(this,Tn,"f").id="mobile-wallet-adapter-embedded-root-ui",ae(this,Tn,"f").innerHTML=BG,ae(this,Tn,"f").style.display="none";const e=ae(this,Tn,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");e&&(e.innerHTML=this.contentHtml);const r=document.createElement("style");r.id="mobile-wallet-adapter-embedded-modal-styles",r.textContent=jG+this.contentStyles;const n=document.createElement("div");n.innerHTML=UG,this.dom=n.attachShadow({mode:"closed"}),this.dom.appendChild(r),this.dom.appendChild(ae(this,Tn,"f")),document.body.appendChild(n)},Kk=function(){if(!ae(this,Tn,"f")||ae(this,rf,"f"))return;[...ae(this,Tn,"f").querySelectorAll("[data-modal-close]")].forEach(r=>r==null?void 0:r.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",ae(this,o1,"f")),vn(this,rf,!0)},Vk=function(){if(!ae(this,rf,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",ae(this,o1,"f")),!ae(this,Tn,"f")))return;[...ae(this,Tn,"f").querySelectorAll("[data-modal-close]")].forEach(r=>r==null?void 0:r.removeEventListener("click",this.close)),vn(this,rf,!1)};const zG="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function cw(t){return window.btoa(String.fromCharCode.call(null,...t))}function gl(t){return new Uint8Array(window.atob(t).split("").map(e=>e.charCodeAt(0)))}var nf,oh,fS,pS,gS,mS,X0,ji,Ic,Il,sf,Uu,a1,eg,c1,yS,l1,Gk,wS,u1,of,h1,tg,d1,af,rg,f1,bS,vS,p1,g1,ES,_S,m1;const Yk="Mobile Wallet Adapter",qG=64,WG=[Zi,Wr,Rc,bh];class HG{constructor(e){nf.add(this),oh.set(this,{}),fS.set(this,"1.0.0"),pS.set(this,Yk),gS.set(this,"https://solanamobile.com/wallets"),mS.set(this,zG),X0.set(this,void 0),ji.set(this,void 0),Ic.set(this,void 0),Il.set(this,!1),sf.set(this,0),Uu.set(this,[]),a1.set(this,void 0),eg.set(this,void 0),c1.set(this,void 0),yS.set(this,(r,n)=>{var i;return!((i=ae(this,oh,"f")[r])===null||i===void 0)&&i.push(n)||(ae(this,oh,"f")[r]=[n]),()=>ae(this,nf,"m",Gk).call(this,r,n)}),wS.set(this,({silent:r}={})=>zr(this,void 0,void 0,function*(){if(ae(this,Il,"f")||this.connected)return{accounts:this.accounts};vn(this,Il,!0);try{if(r){const n=yield ae(this,Ic,"f").get();if(n)yield ae(this,h1,"f").call(this,n.capabilities),yield ae(this,of,"f").call(this,n);else return{accounts:this.accounts}}else yield ae(this,u1,"f").call(this)}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}finally{vn(this,Il,!1)}return{accounts:this.accounts}})),u1.set(this,r=>zr(this,void 0,void 0,function*(){try{const n=yield ae(this,Ic,"f").get();if(n)return ae(this,of,"f").call(this,n),n;const i=yield ae(this,a1,"f").select(ae(this,Uu,"f"));return yield ae(this,af,"f").call(this,s=>zr(this,void 0,void 0,function*(){const[o,a]=yield Promise.all([s.getCapabilities(),s.authorize({chain:i,identity:ae(this,X0,"f"),sign_in_payload:r})]),c=ae(this,f1,"f").call(this,a.accounts),l=Object.assign(Object.assign({},a),{accounts:c,chain:i,capabilities:o});return Promise.all([ae(this,h1,"f").call(this,o),ae(this,Ic,"f").set(l),ae(this,of,"f").call(this,l)]),l}))}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}})),of.set(this,r=>zr(this,void 0,void 0,function*(){var n;const i=ae(this,ji,"f")==null||((n=ae(this,ji,"f"))===null||n===void 0?void 0:n.accounts.length)!==r.accounts.length||ae(this,ji,"f").accounts.some((s,o)=>s.address!==r.accounts[o].address);vn(this,ji,r),i&&ae(this,nf,"m",l1).call(this,"change",{accounts:this.accounts})})),h1.set(this,r=>zr(this,void 0,void 0,function*(){const n=r.features.includes("solana:signTransactions"),i=r.supports_sign_and_send_transactions,s=Zi in this.features!==i||Wr in this.features!==n;vn(this,eg,Object.assign(Object.assign({},(i||!i&&!n)&&{[Zi]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:ae(this,p1,"f")}}),n&&{[Wr]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:ae(this,g1,"f")}})),s&&ae(this,nf,"m",l1).call(this,"change",{features:this.features})})),tg.set(this,(r,n,i)=>zr(this,void 0,void 0,function*(){var s,o;try{const[a,c]=yield Promise.all([(o=(s=ae(this,ji,"f"))===null||s===void 0?void 0:s.capabilities)!==null&&o!==void 0?o:yield r.getCapabilities(),r.authorize({auth_token:n,identity:ae(this,X0,"f"),chain:i})]),l=ae(this,f1,"f").call(this,c.accounts),u=Object.assign(Object.assign({},c),{accounts:l,chain:i,capabilities:a});Promise.all([ae(this,Ic,"f").set(u),ae(this,of,"f").call(this,u)])}catch(a){throw ae(this,d1,"f").call(this),new Error(a instanceof Error&&a.message||"Unknown error")}})),d1.set(this,()=>zr(this,void 0,void 0,function*(){var r;ae(this,Ic,"f").clear(),vn(this,Il,!1),vn(this,sf,(r=ae(this,sf,"f"),r++,r)),vn(this,ji,void 0),ae(this,nf,"m",l1).call(this,"change",{accounts:this.accounts})})),af.set(this,r=>zr(this,void 0,void 0,function*(){var n;const i=(n=ae(this,ji,"f"))===null||n===void 0?void 0:n.wallet_uri_base,s=i?{baseUri:i}:void 0,o=ae(this,sf,"f");try{return yield PG(r,s)}catch(a){throw ae(this,sf,"f")!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield ae(this,c1,"f").call(this,this)),a}})),rg.set(this,()=>{if(!ae(this,ji,"f"))throw new Error("Wallet not connected");return{authToken:ae(this,ji,"f").auth_token,chain:ae(this,ji,"f").chain}}),f1.set(this,r=>r.map(n=>{var i,s;const o=gl(n.address);return{address:dS.encode(o),publicKey:o,label:n.label,icon:n.icon,chains:(i=n.chains)!==null&&i!==void 0?i:ae(this,Uu,"f"),features:(s=n.features)!==null&&s!==void 0?s:WG}})),bS.set(this,r=>zr(this,void 0,void 0,function*(){const{authToken:n,chain:i}=ae(this,rg,"f").call(this);try{const s=r.map(o=>cw(o));return yield ae(this,af,"f").call(this,o=>zr(this,void 0,void 0,function*(){return yield ae(this,tg,"f").call(this,o,n,i),(yield o.signTransactions({payloads:s})).signed_payloads.map(gl)}))}catch(s){throw new Error(s instanceof Error&&s.message||"Unknown error")}})),vS.set(this,(r,n)=>zr(this,void 0,void 0,function*(){const{authToken:i,chain:s}=ae(this,rg,"f").call(this);try{return yield ae(this,af,"f").call(this,o=>zr(this,void 0,void 0,function*(){const[a,c]=yield Promise.all([o.getCapabilities(),ae(this,tg,"f").call(this,o,i,s)]);if(a.supports_sign_and_send_transactions){const l=cw(r);return(yield o.signAndSendTransactions(Object.assign(Object.assign({},n),{payloads:[l]}))).signatures.map(gl)[0]}else throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),p1.set(this,(...r)=>zr(this,void 0,void 0,function*(){const n=[];for(const i of r){const s=yield ae(this,vS,"f").call(this,i.transaction,i.options);n.push({signature:s})}return n})),g1.set(this,(...r)=>zr(this,void 0,void 0,function*(){return(yield ae(this,bS,"f").call(this,r.map(({transaction:n})=>n))).map(n=>({signedTransaction:n}))})),ES.set(this,(...r)=>zr(this,void 0,void 0,function*(){const{authToken:n,chain:i}=ae(this,rg,"f").call(this),s=r.map(({account:a})=>cw(a.publicKey)),o=r.map(({message:a})=>cw(a));try{return yield ae(this,af,"f").call(this,a=>zr(this,void 0,void 0,function*(){return yield ae(this,tg,"f").call(this,a,n,i),(yield a.signMessages({addresses:s,payloads:o})).signed_payloads.map(gl).map(l=>({signedMessage:l,signature:l.slice(-qG)}))}))}catch(a){throw new Error(a instanceof Error&&a.message||"Unknown error")}})),_S.set(this,(...r)=>zr(this,void 0,void 0,function*(){const n=[];if(r.length>1)for(const i of r)n.push(yield ae(this,m1,"f").call(this,i));else return[yield ae(this,m1,"f").call(this,r[0])];return n})),m1.set(this,r=>zr(this,void 0,void 0,function*(){var n,i,s;vn(this,Il,!0);try{const o=yield ae(this,u1,"f").call(this,Object.assign(Object.assign({},r),{domain:(n=r==null?void 0:r.domain)!==null&&n!==void 0?n:window.location.host}));if(!o.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const a=o.sign_in_result.address,c=o.accounts.find(l=>l.address==a);return{account:Object.assign(Object.assign({},c??{address:dS.encode(gl(a))}),{publicKey:gl(a),chains:(i=c==null?void 0:c.chains)!==null&&i!==void 0?i:ae(this,Uu,"f"),features:(s=c==null?void 0:c.features)!==null&&s!==void 0?s:o.capabilities.features}),signedMessage:gl(o.sign_in_result.signed_message),signature:gl(o.sign_in_result.signature)}}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}finally{vn(this,Il,!1)}})),vn(this,Ic,e.authorizationCache),vn(this,X0,e.appIdentity),vn(this,Uu,e.chains),vn(this,a1,e.chainSelector),vn(this,c1,e.onWalletNotFound),vn(this,eg,{[Zi]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:ae(this,p1,"f")},[Wr]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:ae(this,g1,"f")}})}get version(){return ae(this,fS,"f")}get name(){return ae(this,pS,"f")}get url(){return ae(this,gS,"f")}get icon(){return ae(this,mS,"f")}get chains(){return ae(this,Uu,"f")}get features(){return Object.assign({[kv]:{version:"1.0.0",connect:ae(this,wS,"f")},[Ab]:{version:"1.0.0",disconnect:ae(this,d1,"f")},[Rv]:{version:"1.0.0",on:ae(this,yS,"f")},[Rc]:{version:"1.0.0",signMessage:ae(this,ES,"f")},[bh]:{version:"1.0.0",signIn:ae(this,_S,"f")}},ae(this,eg,"f"))}get accounts(){var e,r;return(r=(e=ae(this,ji,"f"))===null||e===void 0?void 0:e.accounts)!==null&&r!==void 0?r:[]}get connected(){return!!ae(this,ji,"f")}get isAuthorized(){return!!ae(this,ji,"f")}get currentAuthorization(){return ae(this,ji,"f")}get cachedAuthorizationResult(){return ae(this,Ic,"f").get()}}oh=new WeakMap,fS=new WeakMap,pS=new WeakMap,gS=new WeakMap,mS=new WeakMap,X0=new WeakMap,ji=new WeakMap,Ic=new WeakMap,Il=new WeakMap,sf=new WeakMap,Uu=new WeakMap,a1=new WeakMap,eg=new WeakMap,c1=new WeakMap,yS=new WeakMap,wS=new WeakMap,u1=new WeakMap,of=new WeakMap,h1=new WeakMap,tg=new WeakMap,d1=new WeakMap,af=new WeakMap,rg=new WeakMap,f1=new WeakMap,bS=new WeakMap,vS=new WeakMap,p1=new WeakMap,g1=new WeakMap,ES=new WeakMap,_S=new WeakMap,m1=new WeakMap,nf=new WeakSet,l1=function(e,...r){var n;(n=ae(this,oh,"f")[e])===null||n===void 0||n.forEach(i=>i.apply(null,r))},Gk=function(e,r){var n;ae(this,oh,"f")[e]=(n=ae(this,oh,"f")[e])===null||n===void 0?void 0:n.filter(i=>r!==i)};const KG="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",VG="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.";class GG extends FG{constructor(){super(...arguments),this.contentStyles=QG,this.contentHtml=YG}initWithError(e){super.init(),this.populateError(e)}populateError(e){var r,n;const i=(r=this.dom)===null||r===void 0?void 0:r.getElementById("mobile-wallet-adapter-error-message"),s=(n=this.dom)===null||n===void 0?void 0:n.getElementById("mobile-wallet-adapter-error-action");if(i){if(e.name==="SolanaMobileWalletAdapterError")switch(e.code){case"ERROR_WALLET_NOT_FOUND":i.innerHTML=KG,s&&s.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":i.innerHTML=VG,s&&(s.style.display="none");return}i.innerHTML=`An unexpected error occurred: ${e.message}`}else console.log("Failed to locate error dialog element")}}const YG=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,QG=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`;function ZG(){return zr(this,void 0,void 0,function*(){if(typeof window<"u"){const t=window.navigator.userAgent.toLowerCase(),e=new GG;t.includes("wv")?e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),e.open()}})}const NE="SolanaMobileWalletAdapterDefaultAuthorizationCache";function JG(){let t;try{t=window.localStorage}catch{}return{clear(){return zr(this,void 0,void 0,function*(){if(t)try{t.removeItem(NE)}catch{}})},get(){return zr(this,void 0,void 0,function*(){if(t)try{const e=JSON.parse(t.getItem(NE));if(e&&e.accounts){const r=e.accounts.map(n=>Object.assign(Object.assign({},n),{publicKey:"publicKey"in n?new Uint8Array(Object.values(n.publicKey)):dS.decode(n.address)}));return Object.assign(Object.assign({},e),{accounts:r})}else return e||void 0}catch{}})},set(e){return zr(this,void 0,void 0,function*(){if(t)try{t.setItem(NE,JSON.stringify(e))}catch{}})}}}function XG(){return{select(t){return zr(this,void 0,void 0,function*(){return t.length===1?t[0]:t.includes(nm)?nm:t[0]})}}}function vr(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(t,[])).next())})}function je(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function ks(t,e,r,n,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}const SS="standard:connect",eY="standard:disconnect",tY="standard:events";function ME(t){return window.btoa(String.fromCharCode.call(null,...t))}function rY(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var Wn,Zr,Ll,Dc,y1,$c,Fu,xS,IS,Qk,Tb,w1,Ml;const b1=Yk,nY=64;function iY(t){return"version"in t}function Zk(t){switch(t){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return t}}class sY extends eV{constructor(e,r){super(),Wn.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),Zr.set(this,void 0),Ll.set(this,!1),Dc.set(this,rY()?ke.Loadable:ke.Unsupported),y1.set(this,void 0),$c.set(this,void 0),Fu.set(this,void 0),xS.set(this,n=>vr(this,void 0,void 0,function*(){if(n.accounts&&n.accounts.length>0){je(this,Wn,"m",Qk).call(this);const i=yield je(this,y1,"f").call(this,n.accounts);i!==je(this,$c,"f")&&(ks(this,$c,i),ks(this,Fu,void 0),this.emit("connect",this.publicKey))}})),ks(this,y1,n=>vr(this,void 0,void 0,function*(){var i;const s=yield r.addressSelector.select(n.map(({publicKey:o})=>ME(o)));return(i=n.find(({publicKey:o})=>ME(o)===s))!==null&&i!==void 0?i:n[0]})),ks(this,Zr,e),je(this,Zr,"f").features[tY].on("change",je(this,xS,"f")),this.name=je(this,Zr,"f").name,this.icon=je(this,Zr,"f").icon,this.url=je(this,Zr,"f").url}get publicKey(){var e;if(!je(this,Fu,"f")&&je(this,$c,"f"))try{ks(this,Fu,new Ae(je(this,$c,"f").publicKey),"f")}catch(r){throw new Zc(r instanceof Error&&(r==null?void 0:r.message)||"Unknown error",r)}return(e=je(this,Fu,"f"))!==null&&e!==void 0?e:null}get connected(){return je(this,Zr,"f").connected}get connecting(){return je(this,Ll,"f")}get readyState(){return je(this,Dc,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return vr(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return vr(this,void 0,void 0,function*(){je(this,Wn,"m",IS).call(this,!0)})}connect(){return vr(this,void 0,void 0,function*(){je(this,Wn,"m",IS).call(this)})}performAuthorization(e){return vr(this,void 0,void 0,function*(){try{const r=yield je(this,Zr,"f").cachedAuthorizationResult;return r?(yield je(this,Zr,"f").features[SS].connect({silent:!0}),r):(e?yield je(this,Zr,"f").features[bh].signIn(e):yield je(this,Zr,"f").features[SS].connect(),yield yield je(this,Zr,"f").cachedAuthorizationResult)}catch(r){throw new ca(r instanceof Error&&r.message||"Unknown error",r)}})}disconnect(){return vr(this,void 0,void 0,function*(){return yield je(this,Wn,"m",Ml).call(this,()=>vr(this,void 0,void 0,function*(){ks(this,Ll,!1),ks(this,Fu,void 0),ks(this,$c,void 0),yield je(this,Zr,"f").features[eY].disconnect(),this.emit("disconnect")}))})}signIn(e){return vr(this,void 0,void 0,function*(){return je(this,Wn,"m",Ml).call(this,()=>vr(this,void 0,void 0,function*(){var r;if(je(this,Dc,"f")!==ke.Installed&&je(this,Dc,"f")!==ke.Loadable)throw new aa;ks(this,Ll,!0);try{const n=yield je(this,Zr,"f").features[bh].signIn(Object.assign(Object.assign({},e),{domain:(r=e==null?void 0:e.domain)!==null&&r!==void 0?r:window.location.host}));if(n.length>0)return n[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(n){throw new ca(n instanceof Error&&n.message||"Unknown error",n)}finally{ks(this,Ll,!1)}}))})}signMessage(e){return vr(this,void 0,void 0,function*(){return yield je(this,Wn,"m",Ml).call(this,()=>vr(this,void 0,void 0,function*(){const r=je(this,Wn,"m",Tb).call(this);try{return(yield je(this,Zr,"f").features[Rc].signMessage({account:r,message:e}))[0].signature}catch(n){throw new Qh(n==null?void 0:n.message,n)}}))})}sendTransaction(e,r,n){return vr(this,void 0,void 0,function*(){return yield je(this,Wn,"m",Ml).call(this,()=>vr(this,void 0,void 0,function*(){const i=je(this,Wn,"m",Tb).call(this);try{let s=function(){let o;switch(r.commitment){case"confirmed":case"finalized":case"processed":o=r.commitment;break;default:o="finalized"}let a;switch(n==null?void 0:n.preflightCommitment){case"confirmed":case"finalized":case"processed":a=n.preflightCommitment;break;case void 0:a=o;break;default:a="finalized"}return(a==="finalized"?2:a==="confirmed"?1:0)<(o==="finalized"?2:o==="confirmed"?1:0)?a:o};if(Zi in je(this,Zr,"f").features){const o=Zk(je(this,Zr,"f").currentAuthorization.chain),[a]=(yield je(this,Zr,"f").features[Zi].signAndSendTransaction({account:i,transaction:e.serialize(),chain:o,options:n?{skipPreflight:n.skipPreflight,maxRetries:n.maxRetries}:void 0})).map(c=>ME(c.signature));return a}else{const[o]=yield je(this,Wn,"m",w1).call(this,[e]);if(iY(o))return yield r.sendTransaction(o);{const a=o.serialize();return yield r.sendRawTransaction(a,Object.assign(Object.assign({},n),{preflightCommitment:s()}))}}}catch(s){throw new $a(s==null?void 0:s.message,s)}}))})}signTransaction(e){return vr(this,void 0,void 0,function*(){return yield je(this,Wn,"m",Ml).call(this,()=>vr(this,void 0,void 0,function*(){const[r]=yield je(this,Wn,"m",w1).call(this,[e]);return r}))})}signAllTransactions(e){return vr(this,void 0,void 0,function*(){return yield je(this,Wn,"m",Ml).call(this,()=>vr(this,void 0,void 0,function*(){return yield je(this,Wn,"m",w1).call(this,e)}))})}}Zr=new WeakMap,Ll=new WeakMap,Dc=new WeakMap,y1=new WeakMap,$c=new WeakMap,Fu=new WeakMap,xS=new WeakMap,Wn=new WeakSet,IS=function(e=!1){return vr(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield je(this,Wn,"m",Ml).call(this,()=>vr(this,void 0,void 0,function*(){if(je(this,Dc,"f")!==ke.Installed&&je(this,Dc,"f")!==ke.Loadable)throw new aa;ks(this,Ll,!0);try{yield je(this,Zr,"f").features[SS].connect({silent:e})}catch(r){throw new ca(r instanceof Error&&r.message||"Unknown error",r)}finally{ks(this,Ll,!1)}}))})},Qk=function(){je(this,Dc,"f")!==ke.Installed&&this.emit("readyStateChange",ks(this,Dc,ke.Installed))},Tb=function(){if(!je(this,Zr,"f").isAuthorized||!je(this,$c,"f"))throw new Ct;return je(this,$c,"f")},w1=function(e){return vr(this,void 0,void 0,function*(){const r=je(this,Wn,"m",Tb).call(this);try{if(Wr in je(this,Zr,"f").features)return je(this,Zr,"f").features[Wr].signTransaction(...e.map(n=>({account:r,transaction:n.serialize()}))).then(n=>n.map(i=>{const s=i.signedTransaction,a=s[0]*nY+1;return CI.deserializeMessageVersion(s.slice(a,s.length))==="legacy"?wi.from(s):lp.deserialize(s)}));throw new Error("Connected wallet does not support signing transactions")}catch(n){throw new mn(n==null?void 0:n.message,n)}})},Ml=function(e){return vr(this,void 0,void 0,function*(){try{return yield e()}catch(r){throw this.emit("error",r),r}})};class oY extends sY{constructor(e){var r;const n=Zk((r=e.chain)!==null&&r!==void 0?r:e.cluster);super(new HG({appIdentity:e.appIdentity,authorizationCache:{set:e.authorizationResultCache.set,get:()=>vr(this,void 0,void 0,function*(){return yield e.authorizationResultCache.get()}),clear:e.authorizationResultCache.clear},chains:[n],chainSelector:XG(),onWalletNotFound:()=>vr(this,void 0,void 0,function*(){e.onWalletNotFound(this)})}),{addressSelector:e.addressSelector,chain:n})}}class aY extends oY{}function cY(){return{select(t){return vr(this,void 0,void 0,function*(){return t[0]})}}}function lY(){return JG()}function uY(t){return vr(this,void 0,void 0,function*(){return ZG()})}function hY(){return uY}var dY=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},fY=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},v1;function pY(t){const e=({register:r})=>r(t);try{window.dispatchEvent(new gY(e))}catch(r){console.error(`wallet-standard:register-wallet event could not be dispatched
`,r)}try{window.addEventListener("wallet-standard:app-ready",({detail:r})=>e(r))}catch(r){console.error(`wallet-standard:app-ready event listener could not be added
`,r)}}class gY extends Event{get detail(){return dY(this,v1,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),v1.set(this,void 0),fY(this,v1,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}v1=new WeakMap;function mY(t,e){if(t===e)return!0;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function yY(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),h=u.charCodeAt(0);if(e[h]!==255)throw new TypeError(u+" is ambiguous");e[h]=l}const r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,h=0,d=0;const g=l.length;for(;d!==g&&l[d]===0;)d++,u++;const m=(g-d)*s+1>>>0,v=new Uint8Array(m);for(;d!==g;){let S=l[d],A=0;for(let T=m-1;(S!==0||A<h)&&T!==-1;T--,A++)S+=256*v[T]>>>0,v[T]=S%r>>>0,S=S/r>>>0;if(S!==0)throw new Error("Non-zero carry");h=A,d++}let $=m-h;for(;$!==m&&v[$]===0;)$++;let _=n.repeat(u);for(;$<m;++$)_+=t.charAt(v[$]);return _}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,h=0,d=0;for(;l[u]===n;)h++,u++;const g=(l.length-u)*i+1>>>0,m=new Uint8Array(g);for(;u<l.length;){const S=l.charCodeAt(u);if(S>255)return;let A=e[S];if(A===255)return;let T=0;for(let k=g-1;(A!==0||T<d)&&k!==-1;k--,T++)A+=r*m[k]>>>0,m[k]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");d=T,u++}let v=g-d;for(;v!==g&&m[v]===0;)v++;const $=new Uint8Array(h+(g-v));let _=h;for(;v!==g;)$[_++]=m[v++];return $}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var wY="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const bY=yY(wY);var $e=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},En=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},fi,ms,ah,ch,zu,ng,$b,Ot,Pb,AS,E1,CS,Eg,NS,Y6,Q6,Z6,J6;class vY extends bk{get name(){return $e(this,Ot,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return $e(this,Ot,"f").icon}get readyState(){return $e(this,Pb,"f")}get publicKey(){return $e(this,ah,"f")}get connecting(){return $e(this,ch,"f")}get supportedTransactionVersions(){return $e(this,$b,"f")}get wallet(){return $e(this,Ot,"f")}get standard(){return!0}constructor({wallet:e}){super(),fi.add(this),ms.set(this,void 0),ah.set(this,void 0),ch.set(this,void 0),zu.set(this,void 0),ng.set(this,void 0),$b.set(this,void 0),Ot.set(this,void 0),Pb.set(this,typeof window>"u"||typeof document>"u"?ke.Unsupported:ke.Installed),NS.set(this,r=>{if("accounts"in r){const n=$e(this,Ot,"f").accounts[0];$e(this,ms,"f")&&!$e(this,zu,"f")&&n!==$e(this,ms,"f")&&(n?$e(this,fi,"m",E1).call(this,n):(this.emit("error",new ry),$e(this,fi,"m",CS).call(this)))}"features"in r&&$e(this,fi,"m",Eg).call(this)}),En(this,Ot,e,"f"),En(this,ms,null,"f"),En(this,ah,null,"f"),En(this,ch,!1,"f"),En(this,zu,!1,"f"),En(this,ng,$e(this,Ot,"f").features[Rv].on("change",$e(this,NS,"f")),"f"),$e(this,fi,"m",Eg).call(this)}destroy(){En(this,ms,null,"f"),En(this,ah,null,"f"),En(this,ch,!1,"f"),En(this,zu,!1,"f");const e=$e(this,ng,"f");e&&(En(this,ng,null,"f"),e())}async autoConnect(){return $e(this,fi,"m",AS).call(this,{silent:!0})}async connect(){return $e(this,fi,"m",AS).call(this)}async disconnect(){if(Ab in $e(this,Ot,"f").features)try{En(this,zu,!0,"f"),await $e(this,Ot,"f").features[Ab].disconnect()}catch(e){this.emit("error",new pu(e==null?void 0:e.message,e))}finally{En(this,zu,!1,"f")}$e(this,fi,"m",CS).call(this)}async sendTransaction(e,r,n={}){try{const i=$e(this,ms,"f");if(!i)throw new Ct;let s;if(Zi in $e(this,Ot,"f").features)if(i.features.includes(Zi))s=Zi;else if(Wr in $e(this,Ot,"f").features&&i.features.includes(Wr))s=Wr;else throw new Uc;else if(Wr in $e(this,Ot,"f").features){if(!i.features.includes(Wr))throw new Uc;s=Wr}else throw new $f;const o=VV(r.rpcEndpoint);if(!i.chains.includes(o))throw new $a;try{const{signers:a,...c}=n;let l;if(xo(e)?(a!=null&&a.length&&e.sign(a),l=e.serialize()):(e=await this.prepareTransaction(e,r,c),a!=null&&a.length&&e.partialSign(...a),l=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s===Zi){const[u]=await $e(this,Ot,"f").features[Zi].signAndSendTransaction({account:i,chain:o,transaction:l,options:{preflightCommitment:xE(c.preflightCommitment||r.commitment),skipPreflight:c.skipPreflight,maxRetries:c.maxRetries,minContextSlot:c.minContextSlot}});return bY.encode(u.signature)}else{const[u]=await $e(this,Ot,"f").features[Wr].signTransaction({account:i,chain:o,transaction:l,options:{preflightCommitment:xE(c.preflightCommitment||r.commitment),minContextSlot:c.minContextSlot}});return await r.sendRawTransaction(u.signedTransaction,{...c,preflightCommitment:xE(c.preflightCommitment||r.commitment)})}}catch(a){throw a instanceof yn?a:new $a(a==null?void 0:a.message,a)}}catch(i){throw this.emit("error",i),i}}}ms=new WeakMap,ah=new WeakMap,ch=new WeakMap,zu=new WeakMap,ng=new WeakMap,$b=new WeakMap,Ot=new WeakMap,Pb=new WeakMap,NS=new WeakMap,fi=new WeakSet,AS=async function(e){try{if(this.connected||this.connecting)return;if($e(this,Pb,"f")!==ke.Installed)throw new aa;if(En(this,ch,!0,"f"),!$e(this,Ot,"f").accounts.length)try{await $e(this,Ot,"f").features[kv].connect(e)}catch(n){throw new ca(n==null?void 0:n.message,n)}const r=$e(this,Ot,"f").accounts[0];if(!r)throw new Uc;$e(this,fi,"m",E1).call(this,r)}catch(r){throw this.emit("error",r),r}finally{En(this,ch,!1,"f")}},E1=function(e){let r;try{r=new Ae(e.address)}catch(n){throw new Zc(n==null?void 0:n.message,n)}En(this,ms,e,"f"),En(this,ah,r,"f"),$e(this,fi,"m",Eg).call(this),this.emit("connect",r)},CS=function(){En(this,ms,null,"f"),En(this,ah,null,"f"),$e(this,fi,"m",Eg).call(this),this.emit("disconnect")},Eg=function(){var r,n;const e=Zi in $e(this,Ot,"f").features?$e(this,Ot,"f").features[Zi].supportedTransactionVersions:$e(this,Ot,"f").features[Wr].supportedTransactionVersions;En(this,$b,mY(e,["legacy"])?null:new Set(e),"f"),Wr in $e(this,Ot,"f").features&&((r=$e(this,ms,"f"))!=null&&r.features.includes(Wr))?(this.signTransaction=$e(this,fi,"m",Y6),this.signAllTransactions=$e(this,fi,"m",Q6)):(delete this.signTransaction,delete this.signAllTransactions),Rc in $e(this,Ot,"f").features&&((n=$e(this,ms,"f"))!=null&&n.features.includes(Rc))?this.signMessage=$e(this,fi,"m",Z6):delete this.signMessage,bh in $e(this,Ot,"f").features?this.signIn=$e(this,fi,"m",J6):delete this.signIn},Y6=async function(e){try{const r=$e(this,ms,"f");if(!r)throw new Ct;if(!(Wr in $e(this,Ot,"f").features))throw new $f;if(!r.features.includes(Wr))throw new Uc;try{const i=(await $e(this,Ot,"f").features[Wr].signTransaction({account:r,transaction:xo(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return xo(e)?lp.deserialize(i):wi.from(i)}catch(n){throw n instanceof yn?n:new mn(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}},Q6=async function(e){try{const r=$e(this,ms,"f");if(!r)throw new Ct;if(!(Wr in $e(this,Ot,"f").features))throw new $f;if(!r.features.includes(Wr))throw new Uc;try{const n=await $e(this,Ot,"f").features[Wr].signTransaction(...e.map(i=>({account:r,transaction:xo(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((i,s)=>{const o=n[s].signedTransaction;return xo(i)?lp.deserialize(o):wi.from(o)})}catch(n){throw new mn(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}},Z6=async function(e){try{const r=$e(this,ms,"f");if(!r)throw new Ct;if(!(Rc in $e(this,Ot,"f").features))throw new $f;if(!r.features.includes(Rc))throw new Uc;try{return(await $e(this,Ot,"f").features[Rc].signMessage({account:r,message:e}))[0].signature}catch(n){throw new Qh(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}},J6=async function(e={}){try{if(!(bh in $e(this,Ot,"f").features))throw new $f;let r;try{[r]=await $e(this,Ot,"f").features[bh].signIn(e)}catch(n){throw new j6(n==null?void 0:n.message,n)}if(!r)throw new j6;return $e(this,fi,"m",E1).call(this,r.account),r}catch(r){throw this.emit("error",r),r}};const EY=tV;var _Y=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},SY=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},_1;let Ds;const Fv=new Set;function xY(t){_g=void 0,Fv.add(t)}function IY(t){_g=void 0,Fv.delete(t)}const Pf={};function AY(){if(Ds||(Ds=Object.freeze({register:X6,get:CY,on:NY}),typeof window>"u"))return Ds;const t=Object.freeze({register:X6});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new MY(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Ds}function X6(...t){var e;return t=t.filter(r=>!Fv.has(r)),t.length?(t.forEach(r=>xY(r)),(e=Pf.register)==null||e.forEach(r=>MS(()=>r(...t))),function(){var n;t.forEach(i=>IY(i)),(n=Pf.unregister)==null||n.forEach(i=>MS(()=>i(...t)))}):()=>{}}let _g;function CY(){return _g||(_g=[...Fv]),_g}function NY(t,e){var r;return(r=Pf[t])!=null&&r.push(e)||(Pf[t]=[e]),function(){var i;Pf[t]=(i=Pf[t])==null?void 0:i.filter(s=>e!==s)}}function MS(t){try{t()}catch(e){console.error(e)}}class MY extends Event{get detail(){return _Y(this,_1,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),_1.set(this,void 0),SY(this,_1,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}_1=new WeakMap;function TY(){if(Ds||(Ds=AY(),typeof window>"u"))return Ds;const t=window.navigator.wallets||[];if(!Array.isArray(t))return console.error("window.navigator.wallets is not an array"),Ds;const{register:e}=Ds,r=(...n)=>n.forEach(i=>MS(()=>i({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:r})})}catch{return console.error("window.navigator.wallets could not be set"),Ds}return r(...t),Ds}function $Y(t){const e=e8(()=>new Set),{get:r,on:n}=e8(()=>TY()),[i,s]=ne.useState(()=>t8(r()));ne.useEffect(()=>{const a=[n("register",(...c)=>s(l=>[...l,...t8(c)])),n("unregister",(...c)=>s(l=>l.filter(u=>c.some(h=>h===u.wallet))))];return()=>a.forEach(c=>c())},[n]);const o=PY(i);return ne.useEffect(()=>{if(!o)return;const a=new Set(i);new Set(o.filter(l=>!a.has(l))).forEach(l=>l.destroy())},[o,i]),ne.useEffect(()=>()=>i.forEach(a=>a.destroy()),[]),ne.useMemo(()=>[...i,...t.filter(({name:a})=>i.some(c=>c.name===a)?(e.has(a)||(e.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[i,t,e])}function e8(t){const e=ne.useRef(void 0);return e.current===void 0&&(e.current={value:t()}),e.current.value}function PY(t){const e=ne.useRef(void 0);return ne.useEffect(()=>{e.current=t}),e.current}function t8(t){return t.filter(EY).map(e=>new vY({wallet:e}))}var Vf;(function(t){t[t.DESKTOP_WEB=0]="DESKTOP_WEB",t[t.MOBILE_WEB=1]="MOBILE_WEB"})(Vf||(Vf={}));function OY(t){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(t)}function kY({adapters:t,userAgentString:e}){return t.some(r=>r.name!==b1&&r.readyState===ke.Installed)?Vf.DESKTOP_WEB:e&&/android/i.test(e)&&!OY(e)?Vf.MOBILE_WEB:Vf.DESKTOP_WEB}function RY(t){return t?/devnet/i.test(t)?"devnet":/testnet/i.test(t)?"testnet":"mainnet-beta":"mainnet-beta"}function DY({children:t,wallets:e,adapter:r,isUnloadingRef:n,onAutoConnectRequest:i,onConnectError:s,onError:o,onSelectWallet:a}){const c=ne.useRef(!1),[l,u]=ne.useState(!1),h=ne.useRef(!1),[d,g]=ne.useState(!1),[m,v]=ne.useState(()=>(r==null?void 0:r.publicKey)??null),[$,_]=ne.useState(()=>(r==null?void 0:r.connected)??!1),S=ne.useRef(o);ne.useEffect(()=>(S.current=o,()=>{S.current=void 0}),[o]);const A=ne.useRef((p,w)=>(n.current||(S.current?S.current(p,w):(console.error(p,w),p instanceof aa&&typeof window<"u"&&w&&window.open(w.url,"_blank"))),p)),[T,k]=ne.useState(()=>e.map(p=>({adapter:p,readyState:p.readyState})).filter(({readyState:p})=>p!==ke.Unsupported));ne.useEffect(()=>{k(w=>e.map((N,M)=>{const x=w[M];return x&&x.adapter===N&&x.readyState===N.readyState?x:{adapter:N,readyState:N.readyState}}).filter(({readyState:N})=>N!==ke.Unsupported));function p(w){k(N=>{const M=N.findIndex(({adapter:y})=>y===this);if(M===-1)return N;const{adapter:x}=N[M];return[...N.slice(0,M),{adapter:x,readyState:w},...N.slice(M+1)].filter(({readyState:y})=>y!==ke.Unsupported)})}return e.forEach(w=>w.on("readyStateChange",p,w)),()=>{e.forEach(w=>w.off("readyStateChange",p,w))}},[r,e]);const R=ne.useMemo(()=>T.find(p=>p.adapter===r)??null,[r,T]);ne.useEffect(()=>{if(!r)return;const p=M=>{v(M),c.current=!1,u(!1),_(!0),h.current=!1,g(!1)},w=()=>{n.current||(v(null),c.current=!1,u(!1),_(!1),h.current=!1,g(!1))},N=M=>{A.current(M,r)};return r.on("connect",p),r.on("disconnect",w),r.on("error",N),()=>{r.off("connect",p),r.off("disconnect",w),r.off("error",N),w()}},[r,n]);const L=ne.useRef(!1);ne.useEffect(()=>()=>{L.current=!1},[r]),ne.useEffect(()=>{L.current||c.current||$||!i||!((R==null?void 0:R.readyState)===ke.Installed||(R==null?void 0:R.readyState)===ke.Loadable)||(c.current=!0,u(!0),L.current=!0,async function(){try{await i()}catch{s()}finally{u(!1),c.current=!1}}())},[$,i,s,R]);const F=ne.useCallback(async(p,w,N)=>{if(!r)throw A.current(new U6);if(!$)throw A.current(new Ct,r);return await r.sendTransaction(p,w,N)},[r,$]),B=ne.useMemo(()=>r&&"signTransaction"in r?async p=>{if(!$)throw A.current(new Ct,r);return await r.signTransaction(p)}:void 0,[r,$]),q=ne.useMemo(()=>r&&"signAllTransactions"in r?async p=>{if(!$)throw A.current(new Ct,r);return await r.signAllTransactions(p)}:void 0,[r,$]),D=ne.useMemo(()=>r&&"signMessage"in r?async p=>{if(!$)throw A.current(new Ct,r);return await r.signMessage(p)}:void 0,[r,$]),E=ne.useMemo(()=>r&&"signIn"in r?async p=>await r.signIn(p):void 0,[r]),b=ne.useCallback(async()=>{if(c.current||h.current||R!=null&&R.adapter.connected)return;if(!R)throw A.current(new U6);const{adapter:p,readyState:w}=R;if(!(w===ke.Installed||w===ke.Loadable))throw A.current(new aa,p);c.current=!0,u(!0);try{await p.connect()}catch(N){throw s(),N}finally{u(!1),c.current=!1}},[s,R]),f=ne.useCallback(async()=>{if(!h.current&&r){h.current=!0,g(!0);try{await r.disconnect()}finally{g(!1),h.current=!1}}},[r]);return fe.createElement(vk.Provider,{value:{autoConnect:!!i,wallets:T,wallet:R,publicKey:m,connected:$,connecting:l,disconnecting:d,select:a,connect:b,disconnect:f,sendTransaction:F,signTransaction:B,signAllTransactions:q,signMessage:D,signIn:E}},t)}let TE;function LY(){var t;return TE===void 0&&(TE=((t=globalThis.navigator)==null?void 0:t.userAgent)??null),TE}function r8(t){const e=LY();return kY({adapters:t,userAgentString:e})===Vf.MOBILE_WEB}function BY(){const t=globalThis.location;if(t)return`${t.protocol}//${t.host}`}function jY({children:t,wallets:e,autoConnect:r,localStorageKey:n="walletName",onError:i}){const{connection:s}=ty(),o=$Y(e),a=ne.useMemo(()=>{if(!r8(o))return null;const S=o.find(A=>A.name===b1);return S||new aY({addressSelector:cY(),appIdentity:{uri:BY()},authorizationResultCache:lY(),cluster:RY(s==null?void 0:s.rpcEndpoint),onWalletNotFound:hY()})},[o,s==null?void 0:s.rpcEndpoint]),c=ne.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[l,u]=nV(n,null),h=ne.useMemo(()=>c.find(S=>S.name===l)??null,[c,l]),d=ne.useCallback(S=>{l!==S&&(h&&h.name!==b1&&h.disconnect(),u(S))},[h,u,l]);ne.useEffect(()=>{if(!h)return;function S(){v.current||u(null)}return h.on("disconnect",S),()=>{h.off("disconnect",S)}},[h,o,u,l]);const g=ne.useRef(!1),m=ne.useMemo(()=>{if(!(!r||!h))return async()=>{(r===!0||await r(h))&&(g.current?await h.connect():await h.autoConnect())}},[r,h]),v=ne.useRef(!1);ne.useEffect(()=>{if(l===b1&&r8(o)){v.current=!1;return}function S(){v.current=!0}return window.addEventListener("beforeunload",S),()=>{window.removeEventListener("beforeunload",S)}},[o,l]);const $=ne.useCallback(()=>{h&&d(null)},[h,d]),_=ne.useCallback(S=>{g.current=!0,d(S)},[d]);return fe.createElement(DY,{wallets:c,adapter:h,isUnloadingRef:v,onAutoConnectRequest:m,onConnectError:$,onError:i,onSelectWallet:_},t)}const Jk={setVisible(t){console.error(Xk("call","setVisible"))},visible:!1};Object.defineProperty(Jk,"visible",{get(){return console.error(Xk("read","visible")),!1}});function Xk(t,e){return`You have tried to  ${t} "${e}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const e7=ne.createContext(Jk);function BI(){return ne.useContext(e7)}function UY({onSelectWallet:t}){const{connect:e,connected:r,connecting:n,disconnect:i,disconnecting:s,publicKey:o,select:a,wallet:c,wallets:l}=bu();let u;n?u="connecting":r?u="connected":s?u="disconnecting":c?u="has-wallet":u="no-wallet";const h=ne.useCallback(()=>{e().catch(()=>{})},[e]),d=ne.useCallback(()=>{i().catch(()=>{})},[i]),g=ne.useCallback(()=>{t({onSelectWallet:a,wallets:l})},[t,a,l]);return{buttonState:u,onConnect:u==="has-wallet"?h:void 0,onDisconnect:u!=="disconnecting"&&u!=="no-wallet"?d:void 0,onSelectWallet:g,publicKey:o??void 0,walletIcon:c==null?void 0:c.adapter.icon,walletName:c==null?void 0:c.adapter.name}}const t7=t=>fe.createElement("button",{className:`wallet-adapter-button ${t.className||""}`,disabled:t.disabled,style:t.style,onClick:t.onClick,tabIndex:t.tabIndex||0,type:"button"},t.startIcon&&fe.createElement("i",{className:"wallet-adapter-button-start-icon"},t.startIcon),t.children,t.endIcon&&fe.createElement("i",{className:"wallet-adapter-button-end-icon"},t.endIcon)),r7=({wallet:t,...e})=>t&&fe.createElement("img",{src:t.adapter.icon,alt:`${t.adapter.name} icon`,...e});function FY({walletIcon:t,walletName:e,...r}){return fe.createElement(t7,{...r,className:"wallet-adapter-button-trigger",startIcon:t&&e?fe.createElement(r7,{wallet:{adapter:{icon:t,name:e}}}):void 0})}function zY({children:t,labels:e,...r}){const{setVisible:n}=BI(),{buttonState:i,onConnect:s,onDisconnect:o,publicKey:a,walletIcon:c,walletName:l}=UY({onSelectWallet(){n(!0)}}),[u,h]=ne.useState(!1),[d,g]=ne.useState(!1),m=ne.useRef(null);ne.useEffect(()=>{const $=_=>{const S=m.current;!S||S.contains(_.target)||g(!1)};return document.addEventListener("mousedown",$),document.addEventListener("touchstart",$),()=>{document.removeEventListener("mousedown",$),document.removeEventListener("touchstart",$)}},[]);const v=ne.useMemo(()=>{if(t)return t;if(a){const $=a.toBase58();return $.slice(0,4)+".."+$.slice(-4)}else return i==="connecting"||i==="has-wallet"?e[i]:e["no-wallet"]},[i,t,e,a]);return fe.createElement("div",{className:"wallet-adapter-dropdown"},fe.createElement(FY,{...r,"aria-expanded":d,style:{pointerEvents:d?"none":"auto",...r.style},onClick:()=>{switch(i){case"no-wallet":n(!0);break;case"has-wallet":s&&s();break;case"connected":g(!0);break}},walletIcon:c,walletName:l},v),fe.createElement("ul",{"aria-label":"dropdown-list",className:`wallet-adapter-dropdown-list ${d&&"wallet-adapter-dropdown-list-active"}`,ref:m,role:"menu"},a?fe.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:async()=>{await navigator.clipboard.writeText(a.toBase58()),h(!0),setTimeout(()=>h(!1),400)},role:"menuitem"},u?e.copied:e["copy-address"]):null,fe.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{n(!0),g(!1)},role:"menuitem"},e["change-wallet"]),o?fe.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{o(),g(!1)},role:"menuitem"},e.disconnect):null))}const n8=({id:t,children:e,expanded:r=!1})=>{const n=ne.useRef(null),i=ne.useRef(!0),s="height 250ms ease-out",o=()=>{const c=n.current;c&&requestAnimationFrame(()=>{c.style.height=c.scrollHeight+"px"})},a=()=>{const c=n.current;c&&requestAnimationFrame(()=>{c.style.height=c.offsetHeight+"px",c.style.overflow="hidden",requestAnimationFrame(()=>{c.style.height="0"})})};return ne.useLayoutEffect(()=>{r?o():a()},[r]),ne.useLayoutEffect(()=>{const c=n.current;if(!c)return;function l(){c&&(c.style.overflow=r?"initial":"hidden",r&&(c.style.height="auto"))}function u(h){c&&h.target===c&&h.propertyName==="height"&&l()}return i.current&&(l(),i.current=!1),c.addEventListener("transitionend",u),()=>c.removeEventListener("transitionend",u)},[r]),fe.createElement("div",{className:"wallet-adapter-collapse",id:t,ref:n,role:"region",style:{height:0,transition:i.current?void 0:s}},e)},$E=({handleClick:t,tabIndex:e,wallet:r})=>fe.createElement("li",null,fe.createElement(t7,{onClick:t,startIcon:fe.createElement(r7,{wallet:r}),tabIndex:e},r.adapter.name,r.readyState===ke.Installed&&fe.createElement("span",null,"Detected"))),qY=()=>fe.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),fe.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),fe.createElement("g",{clipPath:"url(#clip0_880_5115)"},fe.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),fe.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),fe.createElement("defs",null,fe.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},fe.createElement("stop",{stopColor:"#9945FF"}),fe.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),fe.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),fe.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),fe.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),fe.createElement("stop",{offset:"1",stopColor:"#00D18C"})),fe.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},fe.createElement("stop",{stopColor:"#9945FF"}),fe.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),fe.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),fe.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),fe.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),fe.createElement("stop",{offset:"1",stopColor:"#00D18C"})),fe.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},fe.createElement("stop",{stopColor:"#9945FF"}),fe.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),fe.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),fe.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),fe.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),fe.createElement("stop",{offset:"1",stopColor:"#00D18C"})),fe.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},fe.createElement("stop",{stopColor:"#9945FF"}),fe.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),fe.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),fe.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),fe.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),fe.createElement("stop",{offset:"1",stopColor:"#00D18C"})),fe.createElement("clipPath",{id:"clip0_880_5115"},fe.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),WY=({className:t="",container:e="body"})=>{const r=ne.useRef(null),{wallets:n,select:i}=bu(),{setVisible:s}=BI(),[o,a]=ne.useState(!1),[c,l]=ne.useState(!1),[u,h]=ne.useState(null),[d,g]=ne.useMemo(()=>{const A=[],T=[];for(const k of n)k.readyState===ke.Installed?A.push(k):T.push(k);return A.length?[A,T]:[T,[]]},[n]),m=ne.useCallback(()=>{l(!1),setTimeout(()=>s(!1),150)},[s]),v=ne.useCallback(A=>{A.preventDefault(),m()},[m]),$=ne.useCallback((A,T)=>{i(T),v(A)},[i,v]),_=ne.useCallback(()=>a(!o),[o]),S=ne.useCallback(A=>{const T=r.current;if(!T)return;const k=T.querySelectorAll("button"),R=k[0],L=k[k.length-1];A.shiftKey?document.activeElement===R&&(L.focus(),A.preventDefault()):document.activeElement===L&&(R.focus(),A.preventDefault())},[r]);return ne.useLayoutEffect(()=>{const A=k=>{k.key==="Escape"?m():k.key==="Tab"&&S(k)},{overflow:T}=window.getComputedStyle(document.body);return setTimeout(()=>l(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",A,!1),()=>{document.body.style.overflow=T,window.removeEventListener("keydown",A,!1)}},[m,S]),ne.useLayoutEffect(()=>h(document.querySelector(e)),[e]),u&&RO.createPortal(fe.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${c&&"wallet-adapter-modal-fade-in"} ${t}`,ref:r,role:"dialog"},fe.createElement("div",{className:"wallet-adapter-modal-container"},fe.createElement("div",{className:"wallet-adapter-modal-wrapper"},fe.createElement("button",{onClick:v,className:"wallet-adapter-modal-button-close"},fe.createElement("svg",{width:"14",height:"14"},fe.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),d.length?fe.createElement(fe.Fragment,null,fe.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),fe.createElement("ul",{className:"wallet-adapter-modal-list"},d.map(A=>fe.createElement($E,{key:A.adapter.name,handleClick:T=>$(T,A.adapter.name),wallet:A})),g.length?fe.createElement(n8,{expanded:o,id:"wallet-adapter-modal-collapse"},g.map(A=>fe.createElement($E,{key:A.adapter.name,handleClick:T=>$(T,A.adapter.name),tabIndex:o?0:-1,wallet:A}))):null),g.length?fe.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:_,tabIndex:0},fe.createElement("span",null,o?"Less ":"More ","options"),fe.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},fe.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):fe.createElement(fe.Fragment,null,fe.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),fe.createElement("div",{className:"wallet-adapter-modal-middle"},fe.createElement(qY,null)),g.length?fe.createElement(fe.Fragment,null,fe.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:_,tabIndex:0},fe.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),fe.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},fe.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),fe.createElement(n8,{expanded:o,id:"wallet-adapter-modal-collapse"},fe.createElement("ul",{className:"wallet-adapter-modal-list"},g.map(A=>fe.createElement($E,{key:A.adapter.name,handleClick:T=>$(T,A.adapter.name),tabIndex:o?0:-1,wallet:A}))))):null))),fe.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:v})),u)},HY=({children:t,...e})=>{const[r,n]=ne.useState(!1);return fe.createElement(e7.Provider,{value:{visible:r,setVisible:n}},t,r&&fe.createElement(WY,{...e}))},KY={"change-wallet":"Change wallet",connecting:"Connecting ...","copy-address":"Copy address",copied:"Copied",disconnect:"Disconnect","has-wallet":"Connect","no-wallet":"Select Wallet"};function VY(t){return fe.createElement(zY,{...t,labels:KY})}const GY="modulepreload",YY=function(t){return"/dojo3/"+t},i8={},Th=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=YY(c),c in i8)return;i8[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":GY,l||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),l)return new Promise((d,g)=>{h.addEventListener("load",d),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var lw={exports:{}},s8;function QY(){if(s8)return lw.exports;s8=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(k,R,L){return Function.prototype.apply.call(k,R,L)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:r=function(k){return Object.getOwnPropertyNames(k)};function n(T){console&&console.warn&&console.warn(T)}var i=Number.isNaN||function(k){return k!==k};function s(){s.init.call(this)}lw.exports=s,lw.exports.once=_,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(T){if(typeof T!="number"||T<0||i(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");o=T}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||i(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function c(T){return T._maxListeners===void 0?s.defaultMaxListeners:T._maxListeners}s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(k){for(var R=[],L=1;L<arguments.length;L++)R.push(arguments[L]);var F=k==="error",B=this._events;if(B!==void 0)F=F&&B.error===void 0;else if(!F)return!1;if(F){var q;if(R.length>0&&(q=R[0]),q instanceof Error)throw q;var D=new Error("Unhandled error."+(q?" ("+q.message+")":""));throw D.context=q,D}var E=B[k];if(E===void 0)return!1;if(typeof E=="function")e(E,this,R);else for(var b=E.length,f=m(E,b),L=0;L<b;++L)e(f[L],this,R);return!0};function l(T,k,R,L){var F,B,q;if(a(R),B=T._events,B===void 0?(B=T._events=Object.create(null),T._eventsCount=0):(B.newListener!==void 0&&(T.emit("newListener",k,R.listener?R.listener:R),B=T._events),q=B[k]),q===void 0)q=B[k]=R,++T._eventsCount;else if(typeof q=="function"?q=B[k]=L?[R,q]:[q,R]:L?q.unshift(R):q.push(R),F=c(T),F>0&&q.length>F&&!q.warned){q.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=T,D.type=k,D.count=q.length,n(D)}return T}s.prototype.addListener=function(k,R){return l(this,k,R,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(k,R){return l(this,k,R,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(T,k,R){var L={fired:!1,wrapFn:void 0,target:T,type:k,listener:R},F=u.bind(L);return F.listener=R,L.wrapFn=F,F}s.prototype.once=function(k,R){return a(R),this.on(k,h(this,k,R)),this},s.prototype.prependOnceListener=function(k,R){return a(R),this.prependListener(k,h(this,k,R)),this},s.prototype.removeListener=function(k,R){var L,F,B,q,D;if(a(R),F=this._events,F===void 0)return this;if(L=F[k],L===void 0)return this;if(L===R||L.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete F[k],F.removeListener&&this.emit("removeListener",k,L.listener||R));else if(typeof L!="function"){for(B=-1,q=L.length-1;q>=0;q--)if(L[q]===R||L[q].listener===R){D=L[q].listener,B=q;break}if(B<0)return this;B===0?L.shift():v(L,B),L.length===1&&(F[k]=L[0]),F.removeListener!==void 0&&this.emit("removeListener",k,D||R)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(k){var R,L,F;if(L=this._events,L===void 0)return this;if(L.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):L[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete L[k]),this;if(arguments.length===0){var B=Object.keys(L),q;for(F=0;F<B.length;++F)q=B[F],q!=="removeListener"&&this.removeAllListeners(q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=L[k],typeof R=="function")this.removeListener(k,R);else if(R!==void 0)for(F=R.length-1;F>=0;F--)this.removeListener(k,R[F]);return this};function d(T,k,R){var L=T._events;if(L===void 0)return[];var F=L[k];return F===void 0?[]:typeof F=="function"?R?[F.listener||F]:[F]:R?$(F):m(F,F.length)}s.prototype.listeners=function(k){return d(this,k,!0)},s.prototype.rawListeners=function(k){return d(this,k,!1)},s.listenerCount=function(T,k){return typeof T.listenerCount=="function"?T.listenerCount(k):g.call(T,k)},s.prototype.listenerCount=g;function g(T){var k=this._events;if(k!==void 0){var R=k[T];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function m(T,k){for(var R=new Array(k),L=0;L<k;++L)R[L]=T[L];return R}function v(T,k){for(;k+1<T.length;k++)T[k]=T[k+1];T.pop()}function $(T){for(var k=new Array(T.length),R=0;R<k.length;++R)k[R]=T[R].listener||T[R];return k}function _(T,k){return new Promise(function(R,L){function F(q){T.removeListener(k,B),L(q)}function B(){typeof T.removeListener=="function"&&T.removeListener("error",F),R([].slice.call(arguments))}A(T,k,B,{once:!0}),k!=="error"&&S(T,F,{once:!0})})}function S(T,k,R){typeof T.on=="function"&&A(T,"error",k,R)}function A(T,k,R,L){if(typeof T.on=="function")L.once?T.once(k,R):T.on(k,R);else if(typeof T.addEventListener=="function")T.addEventListener(k,function F(B){L.once&&T.removeEventListener(k,F),R(B)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return lw.exports}var Dn=QY();const Bp=ha(Dn),ZY={},n7=(t,e)=>{ZY[t]=e},zv=t=>{class e extends Error{constructor(i,s,o){super(i||t,o);ot(this,"cause");if(Object.setPrototypeOf(this,e.prototype),this.name=t,s)for(const a in s)this[a]=s[a];if(o&&JY(o)&&"cause"in o&&!this.cause){const a=o.cause;this.cause=a,"stack"in a&&(this.stack=this.stack+`
CAUSE: `+a.stack)}}}return e};function JY(t){return typeof t=="object"}const C6e=zv("DisconnectedDevice"),N6e=zv("DisconnectedDeviceDuringOperation"),M6e=zv("TransportOpenUserCancelled"),T6e=zv("TransportRaceCondition");var o8;(function(t){t.Unknown="Unknown",t.LocationServicesDisabled="LocationServicesDisabled",t.LocationServicesUnauthorized="LocationServicesUnauthorized",t.BluetoothScanStartFailed="BluetoothScanStartFailed"})(o8||(o8={}));class XY extends Error{constructor(r,n){const i="TransportError";super(r||i);ot(this,"id");this.name=i,this.message=r,this.stack=new Error(r).stack,this.id=n}}n7("TransportError",t=>new XY(t.message,t.id));const Sg={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,DEVICE_IN_RECOVERY_MODE:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,DEVICE_NOT_ONBOARDED:27911,DEVICE_NOT_ONBOARDED_2:26129,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761,NOT_ENOUGH_SPACE:20738,APP_NOT_FOUND_OR_INVALID_CONTEXT:20771,INVALID_APP_NAME_LENGTH:26378,GEN_AES_KEY_FAILED:21529,INTERNAL_CRYPTO_OPERATION_FAILED:21530,INTERNAL_COMPUTE_AES_CMAC_FAILED:21531,ENCRYPT_APP_STORAGE_FAILED:21532,INVALID_BACKUP_STATE:26178,PIN_NOT_SET:21762,INVALID_BACKUP_LENGTH:26419,INVALID_RESTORE_STATE:26179,INVALID_CHUNK_LENGTH:26420,INVALID_BACKUP_HEADER:26698,TRUSTCHAIN_WRONG_SEED:45063};function eQ(t){switch(t){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=t&&t<=28671)return"Internal error, please report"}class sy extends Error{constructor(r,{canBeMappedToChildError:n=!0}={}){const i=Object.keys(Sg).find(c=>Sg[c]===r)||"UNKNOWN_ERROR",s=eQ(r)||i,o=r.toString(16),a=`Ledger device: ${s} (0x${o})`;super(a);ot(this,"statusCode");ot(this,"statusText");if(this.name="TransportStatusError",this.statusCode=r,this.statusText=i,Object.setPrototypeOf(this,sy.prototype),n&&r===Sg.LOCKED_DEVICE)return new jI(a)}}class jI extends sy{constructor(e){super(Sg.LOCKED_DEVICE,{canBeMappedToChildError:!1}),e&&(this.message=e),this.name="LockedDeviceError",Object.setPrototypeOf(this,jI.prototype)}}n7("TransportStatusError",t=>new sy(t.statusCode));let i7=0;const Tl=[],$6e=(t,e,r)=>{const n={type:t,id:String(++i7),date:new Date};e&&(n.message=e),s7(n)},tQ=({type:t,message:e,data:r,context:n})=>{const i={type:t,id:String(++i7),date:new Date};e&&(i.message=e),r&&(i.data=r),n&&(i.context=n),s7(i)};class S1{constructor(e,r){ot(this,"type");ot(this,"context");this.type=e,this.context=r}trace(e,r){tQ({type:this.type,message:e,data:r,context:this.context})}getContext(){return this.context}setContext(e){this.context=e}updateContext(e){this.context={...this.context,...e}}getType(){return this.type}setType(e){this.type=e}withType(e){return new S1(e,this.context)}withContext(e){return new S1(this.type,e)}withUpdatedContext(e){return new S1(this.type,{...this.context,...e})}}const rQ=t=>(Tl.push(t),()=>{const e=Tl.indexOf(t);e!==-1&&(Tl[e]=Tl[Tl.length-1],Tl.pop())});function s7(t){for(let e=0;e<Tl.length;e++)try{Tl[e](t)}catch(r){console.error(r)}}typeof window<"u"&&(window.__ledgerLogsListen=rQ);function nQ(t,e){const n=Buffer.alloc(17);let i=n.writeUInt8(4,0);return i=n.writeUInt32BE(uw(44),i),i=n.writeUInt32BE(uw(501),i),i=n.writeUInt32BE(uw(t),i),n.writeUInt32BE(uw(e),i),n}const iQ=1<<31>>>0;function uw(t){return(t|iQ)>>>0}const sQ=5,oQ=6,aQ=0,cQ=1,lQ=1,uQ=2,hw=255,a8=224;async function hQ(t,e){const r=await o7(t,sQ,aQ,e);return new Ae(r)}async function dQ(t,e,r){const n=Buffer.alloc(1);n.writeUInt8(1,0);const i=xo(e)?e.message.serialize():e.serializeMessage(),s=Buffer.concat([n,r,i]);return await o7(t,oQ,cQ,s)}async function o7(t,e,r,n){let i=0,s=0;if(n.length>hw)for(;n.length-s>hw;){const c=n.slice(s,s+hw);if((await t.send(a8,e,r,i|uQ,c)).length!==2)throw new sy(Sg.INCORRECT_DATA);i|=lQ,s+=hw}const o=n.slice(s),a=await t.send(a8,e,r,i,o);return a.slice(0,a.length-2)}const fQ="Ledger";class pQ extends PI{constructor(e={}){super(),this.name=fQ,this.url="https://ledger.com",this.icon="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzUgMzUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0ibTIzLjU4OCAwaC0xNnYyMS41ODNoMjEuNnYtMTZhNS41ODUgNS41ODUgMCAwIDAgLTUuNi01LjU4M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5KSIvPjxwYXRoIGQ9Im04LjM0MiAwaC0yLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCAtNS41ODUgNS41ODV2Mi43NTdoOC4zNDJ6Ii8+PHBhdGggZD0ibTAgNy41OWg4LjM0MnY4LjM0MmgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDUuNzM5KSIvPjxwYXRoIGQ9Im0xNS4xOCAyMy40NTFoMi43NTdhNS41ODUgNS41ODUgMCAwIDAgNS41ODUtNS42di0yLjY3MWgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMS40NzggMTEuNDc4KSIvPjxwYXRoIGQ9Im03LjU5IDE1LjE4aDguMzQydjguMzQyaC04LjM0MnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5IDExLjQ3OCkiLz48cGF0aCBkPSJtMCAxNS4xOHYyLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCA1LjU4NSA1LjU4NWgyLjc1N3YtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDExLjQ3OCkiLz48L2c+PC9zdmc+",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"||typeof navigator>"u"||!navigator.hid?ke.Unsupported:ke.Loadable,this._disconnected=()=>{const r=this._transport;r&&(r.off("disconnect",this._disconnected),this._transport=null,this._publicKey=null,this.emit("error",new ry),this.emit("disconnect"))},this._derivationPath=e.derivationPath||nQ(0,0),this._connecting=!1,this._transport=null,this._publicKey=null}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ke.Loadable)throw new aa;this._connecting=!0;let e;try{e=(await Th(async()=>{const{default:i}=await import("./TransportWebHID-9xzrvQsB.js");return{default:i}},[])).default}catch(i){throw new wk(i==null?void 0:i.message,i)}let r;try{r=await e.create()}catch(i){throw new ca(i==null?void 0:i.message,i)}let n;try{n=await hQ(r,this._derivationPath)}catch(i){throw new Zc(i==null?void 0:i.message,i)}r.on("disconnect",this._disconnected),this._transport=r,this._publicKey=n,this.emit("connect",n)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._transport;if(e){e.off("disconnect",this._disconnected),this._transport=null,this._publicKey=null;try{await e.close()}catch(r){this.emit("error",new pu(r==null?void 0:r.message,r))}}this.emit("disconnect")}async signTransaction(e){try{const r=this._transport,n=this._publicKey;if(!r||!n)throw new Ct;try{const i=await dQ(r,e,this._derivationPath);e.addSignature(n,i)}catch(i){throw new mn(i==null?void 0:i.message,i)}return e}catch(r){throw this.emit("error",r),r}}}const gQ="Phantom";class mQ extends ny{constructor(e={}){super(),this.name=gQ,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?ke.Unsupported:ke.NotDetected,this._disconnected=()=>{const r=this._wallet;r&&(r.off("disconnect",this._disconnected),r.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new ry),this.emit("disconnect"))},this._accountChanged=r=>{const n=this._publicKey;if(n){try{r=new Ae(r.toBytes())}catch(i){this.emit("error",new Zc(i==null?void 0:i.message,i));return}n.equals(r)||(this._publicKey=r,this.emit("connect",r))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ke.Unsupported&&(sS()?(this._readyState=ke.Loadable,this.emit("readyStateChange",this._readyState)):Ov(()=>{var r,n,i;return(n=(r=window.phantom)==null?void 0:r.solana)!=null&&n.isPhantom||(i=window.solana)!=null&&i.isPhantom?(this._readyState=ke.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===ke.Installed&&await this.connect()}async connect(){var e;try{if(this.connected||this.connecting)return;if(this.readyState===ke.Loadable){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${i}?ref=${s}`;return}if(this.readyState!==ke.Installed)throw new aa;this._connecting=!0;const r=((e=window.phantom)==null?void 0:e.solana)||window.solana;if(!r.isConnected)try{await r.connect()}catch(i){throw new ca(i==null?void 0:i.message,i)}if(!r.publicKey)throw new Uc;let n;try{n=new Ae(r.publicKey.toBytes())}catch(i){throw new Zc(i==null?void 0:i.message,i)}r.on("disconnect",this._disconnected),r.on("accountChanged",this._accountChanged),this._wallet=r,this._publicKey=n,this.emit("connect",n)}catch(r){throw this.emit("error",r),r}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(r){this.emit("error",new pu(r==null?void 0:r.message,r))}}this.emit("disconnect")}async sendTransaction(e,r,n={}){try{const i=this._wallet;if(!i)throw new Ct;try{const{signers:s,...o}=n;xo(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,r,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||r.commitment;const{signature:a}=await i.signAndSendTransaction(e,o);return a}catch(s){throw s instanceof yn?s:new $a(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const r=this._wallet;if(!r)throw new Ct;try{return await r.signTransaction(e)||e}catch(n){throw new mn(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}async signAllTransactions(e){try{const r=this._wallet;if(!r)throw new Ct;try{return await r.signAllTransactions(e)||e}catch(n){throw new mn(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}async signMessage(e){try{const r=this._wallet;if(!r)throw new Ct;try{const{signature:n}=await r.signMessage(e);return n}catch(n){throw new Qh(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}}const yQ="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=";var Jt=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},wQ=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},x1,lh,TS,$S,PS,Ui,OS,a7,c7,kS,RS,DS,LS,BS;class bQ{constructor(){x1.add(this),lh.set(this,{}),TS.set(this,"1.0.0"),$S.set(this,"MetaMask"),PS.set(this,yQ),Ui.set(this,null),OS.set(this,(e,r)=>{var n;return(n=Jt(this,lh,"f")[e])!=null&&n.push(r)||(Jt(this,lh,"f")[e]=[r]),()=>Jt(this,x1,"m",c7).call(this,e,r)}),kS.set(this,async()=>{if(!Jt(this,Ui,"f")){let e;try{e=(await Th(async()=>{const{default:r}=await import("./index-BuX_xkeJ.js");return{default:r}},[])).default}catch{throw new Error("Unable to load Solflare MetaMask SDK")}wQ(this,Ui,new e,"f"),Jt(this,Ui,"f").on("standard_change",r=>Jt(this,x1,"m",a7).call(this,"change",r))}return this.accounts.length||await Jt(this,Ui,"f").connect(),{accounts:this.accounts}}),RS.set(this,async()=>{Jt(this,Ui,"f")&&await Jt(this,Ui,"f").disconnect()}),DS.set(this,async(...e)=>{if(!Jt(this,Ui,"f"))throw new Ct;return await Jt(this,Ui,"f").standardSignAndSendTransaction(...e)}),LS.set(this,async(...e)=>{if(!Jt(this,Ui,"f"))throw new Ct;return await Jt(this,Ui,"f").standardSignTransaction(...e)}),BS.set(this,async(...e)=>{if(!Jt(this,Ui,"f"))throw new Ct;return await Jt(this,Ui,"f").standardSignMessage(...e)})}get version(){return Jt(this,TS,"f")}get name(){return Jt(this,$S,"f")}get icon(){return Jt(this,PS,"f")}get chains(){return[nm,Lk,Bk]}get features(){return{[kv]:{version:"1.0.0",connect:Jt(this,kS,"f")},[Ab]:{version:"1.0.0",disconnect:Jt(this,RS,"f")},[Rv]:{version:"1.0.0",on:Jt(this,OS,"f")},[Zi]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:Jt(this,DS,"f")},[Wr]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:Jt(this,LS,"f")},[Rc]:{version:"1.0.0",signMessage:Jt(this,BS,"f")}}}get accounts(){return Jt(this,Ui,"f")?Jt(this,Ui,"f").standardAccounts:[]}}lh=new WeakMap,TS=new WeakMap,$S=new WeakMap,PS=new WeakMap,Ui=new WeakMap,OS=new WeakMap,kS=new WeakMap,RS=new WeakMap,DS=new WeakMap,LS=new WeakMap,BS=new WeakMap,x1=new WeakSet,a7=function(e,...r){var n;(n=Jt(this,lh,"f")[e])==null||n.forEach(i=>i.apply(null,r))},c7=function(e,r){var n;Jt(this,lh,"f")[e]=(n=Jt(this,lh,"f")[e])==null?void 0:n.filter(i=>r!==i)};let c8=!1;function vQ(){c8||(pY(new bQ),c8=!0)}async function EQ(){const t="solflare-detect-metamask";function e(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:t,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function r(n){var s,o;const i=n.data;(i==null?void 0:i.target)==="metamask-inpage"&&((s=i.data)==null?void 0:s.name)==="metamask-provider"&&(((o=i.data.data)==null?void 0:o.id)===t?(window.removeEventListener("message",r),i.data.data.error||vQ()):e())}window.addEventListener("message",r),window.setTimeout(()=>window.removeEventListener("message",r),5e3),e()}const _Q="Solflare";class SQ extends ny{constructor(e={}){super(),this.name=_Q,this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJTIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MCA1MCI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMwMjA1MGE7c3Ryb2tlOiNmZmVmNDY7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOi41cHg7fS5jbHMtMntmaWxsOiNmZmVmNDY7fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJjbHMtMiIgeD0iMCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiByeD0iMTIiIHJ5PSIxMiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTI0LjIzLDI2LjQybDIuNDYtMi4zOCw0LjU5LDEuNWMzLjAxLDEsNC41MSwyLjg0LDQuNTEsNS40MywwLDEuOTYtLjc1LDMuMjYtMi4yNSw0LjkzbC0uNDYuNS4xNy0xLjE3Yy42Ny00LjI2LS41OC02LjA5LTQuNzItNy40M2wtNC4zLTEuMzhoMFpNMTguMDUsMTEuODVsMTIuNTIsNC4xNy0yLjcxLDIuNTktNi41MS0yLjE3Yy0yLjI1LS43NS0zLjAxLTEuOTYtMy4zLTQuNTF2LS4wOGgwWk0xNy4zLDMzLjA2bDIuODQtMi43MSw1LjM0LDEuNzVjMi44LjkyLDMuNzYsMi4xMywzLjQ2LDUuMThsLTExLjY1LTQuMjJoMFpNMTMuNzEsMjAuOTVjMC0uNzkuNDItMS41NCwxLjEzLTIuMTcuNzUsMS4wOSwyLjA1LDIuMDUsNC4wOSwyLjcxbDQuNDIsMS40Ni0yLjQ2LDIuMzgtNC4zNC0xLjQyYy0yLS42Ny0yLjg0LTEuNjctMi44NC0yLjk2TTI2LjgyLDQyLjg3YzkuMTgtNi4wOSwxNC4xMS0xMC4yMywxNC4xMS0xNS4zMiwwLTMuMzgtMi01LjI2LTYuNDMtNi43MmwtMy4zNC0xLjEzLDkuMTQtOC43Ny0xLjg0LTEuOTYtMi43MSwyLjM4LTEyLjgxLTQuMjJjLTMuOTcsMS4yOS04Ljk3LDUuMDktOC45Nyw4Ljg5LDAsLjQyLjA0LjgzLjE3LDEuMjktMy4zLDEuODgtNC42MywzLjYzLTQuNjMsNS44LDAsMi4wNSwxLjA5LDQuMDksNC41NSw1LjIybDIuNzUuOTItOS41Miw5LjE0LDEuODQsMS45NiwyLjk2LTIuNzEsMTQuNzMsNS4yMmgwWiIvPjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?ke.Unsupported:ke.Loadable,this._disconnected=()=>{const r=this._wallet;r&&(r.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new ry),this.emit("disconnect"))},this._accountChanged=r=>{if(!r)return;const n=this._publicKey;if(n){try{r=new Ae(r.toBytes())}catch(i){this.emit("error",new Zc(i==null?void 0:i.message,i));return}n.equals(r)||(this._publicKey=r,this.emit("connect",r))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=e,this._readyState!==ke.Unsupported&&(Ov(()=>{var r;return(r=window.solflare)!=null&&r.isSolflare||window.SolflareApp?(this._readyState=ke.Installed,this.emit("readyStateChange",this._readyState),!0):!1}),EQ())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var e;return!!((e=this._wallet)!=null&&e.connected)}get readyState(){return this._readyState}async autoConnect(){this.readyState===ke.Loadable&&sS()||await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ke.Loadable&&this._readyState!==ke.Installed)throw new aa;if(this.readyState===ke.Loadable&&sS()){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://solflare.com/ul/v1/browse/${i}?ref=${s}`;return}let e;try{e=(await Th(async()=>{const{default:i}=await import("./index-D5jwkJI6.js");return{default:i}},[])).default}catch(i){throw new wk(i==null?void 0:i.message,i)}let r;try{r=new e({network:this._config.network})}catch(i){throw new $f(i==null?void 0:i.message,i)}if(this._connecting=!0,!r.connected)try{await r.connect()}catch(i){throw new ca(i==null?void 0:i.message,i)}if(!r.publicKey)throw new ca;let n;try{n=new Ae(r.publicKey.toBytes())}catch(i){throw new Zc(i==null?void 0:i.message,i)}r.on("disconnect",this._disconnected),r.on("accountChanged",this._accountChanged),this._wallet=r,this._publicKey=n,this.emit("connect",n)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(r){this.emit("error",new pu(r==null?void 0:r.message,r))}}this.emit("disconnect")}async sendTransaction(e,r,n={}){try{const i=this._wallet;if(!i)throw new Ct;try{const{signers:s,...o}=n;return xo(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,r,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||r.commitment,await i.signAndSendTransaction(e,o)}catch(s){throw s instanceof yn?s:new $a(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const r=this._wallet;if(!r)throw new Ct;try{return await r.signTransaction(e)||e}catch(n){throw new mn(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}async signAllTransactions(e){try{const r=this._wallet;if(!r)throw new Ct;try{return await r.signAllTransactions(e)||e}catch(n){throw new mn(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}async signMessage(e){try{const r=this._wallet;if(!r)throw new Ct;try{return await r.signMessage(e,"utf8")}catch(n){throw new Qh(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}}var Ob;(function(t){t.Mainnet="solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",t.Devnet="solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",t.Deprecated_Mainnet="solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",t.Deprecated_Devnet="solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"})(Ob||(Ob={}));var bo;(function(t){t.signTransaction="solana_signTransaction",t.signMessage="solana_signMessage",t.signAndSendTransaction="solana_signAndSendTransaction",t.signAndSendAllTransactions="solana_signAndSendAllTransactions",t.signAllTransactions="solana_signAllTransactions"})(bo||(bo={}));const $n={Mainnet:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",Devnet:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",Deprecated_Mainnet:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",Deprecated_Devnet:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"};var J={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jS=function(t,e){return jS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},jS(t,e)};function xQ(t,e){jS(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var US=function(){return US=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},US.apply(this,arguments)};function IQ(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function AQ(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function CQ(t,e){return function(r,n){e(r,n,t)}}function NQ(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function MQ(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function TQ(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function $Q(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function PQ(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function FS(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l7(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function OQ(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l7(arguments[e]));return t}function kQ(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function im(t){return this instanceof im?(this.v=t,this):new im(t)}function RQ(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(g){return new Promise(function(m,v){s.push([d,g,m,v])>1||a(d,g)})})}function a(d,g){try{c(n[d](g))}catch(m){h(s[0][3],m)}}function c(d){d.value instanceof im?Promise.resolve(d.value.v).then(l,u):h(s[0][2],d)}function l(d){a("next",d)}function u(d){a("throw",d)}function h(d,g){d(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function DQ(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:im(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function LQ(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof FS=="function"?FS(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function BQ(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function jQ(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function UQ(t){return t&&t.__esModule?t:{default:t}}function FQ(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function zQ(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const qQ=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return US},__asyncDelegator:DQ,__asyncGenerator:RQ,__asyncValues:LQ,__await:im,__awaiter:MQ,__classPrivateFieldGet:FQ,__classPrivateFieldSet:zQ,__createBinding:$Q,__decorate:AQ,__exportStar:PQ,__extends:xQ,__generator:TQ,__importDefault:UQ,__importStar:jQ,__makeTemplateObject:BQ,__metadata:NQ,__param:CQ,__read:l7,__rest:IQ,__spread:OQ,__spreadArrays:kQ,__values:FS},Symbol.toStringTag,{value:"Module"})),qv=zm(qQ);var PE={},m0={},l8;function WQ(){if(l8)return m0;l8=1,Object.defineProperty(m0,"__esModule",{value:!0}),m0.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return m0.delay=t,m0}var Nu={},OE={},Mu={},u8;function HQ(){return u8||(u8=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.ONE_THOUSAND=Mu.ONE_HUNDRED=void 0,Mu.ONE_HUNDRED=100,Mu.ONE_THOUSAND=1e3),Mu}var kE={},h8;function KQ(){return h8||(h8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(kE)),kE}var d8;function u7(){return d8||(d8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=qv;e.__exportStar(HQ(),t),e.__exportStar(KQ(),t)}(OE)),OE}var f8;function VQ(){if(f8)return Nu;f8=1,Object.defineProperty(Nu,"__esModule",{value:!0}),Nu.fromMiliseconds=Nu.toMiliseconds=void 0;const t=u7();function e(n){return n*t.ONE_THOUSAND}Nu.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Nu.fromMiliseconds=r,Nu}var p8;function GQ(){return p8||(p8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=qv;e.__exportStar(WQ(),t),e.__exportStar(VQ(),t)}(PE)),PE}var yd={},g8;function YQ(){if(g8)return yd;g8=1,Object.defineProperty(yd,"__esModule",{value:!0}),yd.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return yd.Watch=t,yd.default=t,yd}var RE={},y0={},m8;function QQ(){if(m8)return y0;m8=1,Object.defineProperty(y0,"__esModule",{value:!0}),y0.IWatch=void 0;class t{}return y0.IWatch=t,y0}var y8;function ZQ(){return y8||(y8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),qv.__exportStar(QQ(),t)}(RE)),RE}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=qv;e.__exportStar(GQ(),t),e.__exportStar(YQ(),t),e.__exportStar(ZQ(),t),e.__exportStar(u7(),t)})(J);class to{}let JQ=class extends to{constructor(e){super()}};const w8=J.FIVE_SECONDS,da={pulse:"heartbeat_pulse"};let h7=class d7 extends JQ{constructor(e){super(e),this.events=new Dn.EventEmitter,this.interval=w8,this.interval=(e==null?void 0:e.interval)||w8}static async init(e){const r=new d7(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),J.toMiliseconds(this.interval))}pulse(){this.events.emit(da.pulse)}};const XQ=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,eZ=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,tZ=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function rZ(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){nZ(t);return}return e}function nZ(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Wl(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const r=t.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!tZ.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(XQ.test(t)||eZ.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,rZ)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function iZ(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function zn(t,...e){try{return iZ(t(...e))}catch(r){return Promise.reject(r)}}function sZ(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function oZ(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function I1(t){if(sZ(t))return String(t);if(oZ(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return I1(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const zS="base64:";function aZ(t){return typeof t=="string"?t:zS+uZ(t)}function cZ(t){return typeof t!="string"||!t.startsWith(zS)?t:lZ(t.slice(zS.length))}function lZ(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function uZ(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function ds(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function hZ(...t){return ds(t.join(":"))}function dw(t){return t=ds(t),t?t+":":""}function dZ(t,e){if(e===void 0)return!0;let r=0,n=t.indexOf(":");for(;n>-1;)r++,n=t.indexOf(":",n+1);return r<=e}function fZ(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const pZ="memory",gZ=()=>{const t=new Map;return{name:pZ,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function mZ(t={}){const e={mounts:{"":t.driver||gZ()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},n=(l,u)=>e.mountpoints.filter(h=>h.startsWith(l)||u&&l.startsWith(h)).map(h=>({relativeBase:l.length>h.length?l.slice(h.length):void 0,mountpoint:h,driver:e.mounts[h]})),i=(l,u)=>{if(e.watching){u=ds(u);for(const h of e.watchListeners)h(l,u)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await b8(e.mounts[l],i,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,h)=>{const d=new Map,g=m=>{let v=d.get(m.base);return v||(v={driver:m.driver,base:m.base,items:[]},d.set(m.base,v)),v};for(const m of l){const v=typeof m=="string",$=ds(v?m:m.key),_=v?void 0:m.value,S=v||!m.options?u:{...u,...m.options},A=r($);g(A).items.push({key:$,value:_,relativeKey:A.relativeKey,options:S})}return Promise.all([...d.values()].map(m=>h(m))).then(m=>m.flat())},c={hasItem(l,u={}){l=ds(l);const{relativeKey:h,driver:d}=r(l);return zn(d.hasItem,h,u)},getItem(l,u={}){l=ds(l);const{relativeKey:h,driver:d}=r(l);return zn(d.getItem,h,u).then(g=>Wl(g))},getItems(l,u={}){return a(l,u,h=>h.driver.getItems?zn(h.driver.getItems,h.items.map(d=>({key:d.relativeKey,options:d.options})),u).then(d=>d.map(g=>({key:hZ(h.base,g.key),value:Wl(g.value)}))):Promise.all(h.items.map(d=>zn(h.driver.getItem,d.relativeKey,d.options).then(g=>({key:d.key,value:Wl(g)})))))},getItemRaw(l,u={}){l=ds(l);const{relativeKey:h,driver:d}=r(l);return d.getItemRaw?zn(d.getItemRaw,h,u):zn(d.getItem,h,u).then(g=>cZ(g))},async setItem(l,u,h={}){if(u===void 0)return c.removeItem(l);l=ds(l);const{relativeKey:d,driver:g}=r(l);g.setItem&&(await zn(g.setItem,d,I1(u),h),g.watch||i("update",l))},async setItems(l,u){await a(l,u,async h=>{if(h.driver.setItems)return zn(h.driver.setItems,h.items.map(d=>({key:d.relativeKey,value:I1(d.value),options:d.options})),u);h.driver.setItem&&await Promise.all(h.items.map(d=>zn(h.driver.setItem,d.relativeKey,I1(d.value),d.options)))})},async setItemRaw(l,u,h={}){if(u===void 0)return c.removeItem(l,h);l=ds(l);const{relativeKey:d,driver:g}=r(l);if(g.setItemRaw)await zn(g.setItemRaw,d,u,h);else if(g.setItem)await zn(g.setItem,d,aZ(u),h);else return;g.watch||i("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=ds(l);const{relativeKey:h,driver:d}=r(l);d.removeItem&&(await zn(d.removeItem,h,u),(u.removeMeta||u.removeMata)&&await zn(d.removeItem,h+"$",u),d.watch||i("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=ds(l);const{relativeKey:h,driver:d}=r(l),g=Object.create(null);if(d.getMeta&&Object.assign(g,await zn(d.getMeta,h,u)),!u.nativeOnly){const m=await zn(d.getItem,h+"$",u).then(v=>Wl(v));m&&typeof m=="object"&&(typeof m.atime=="string"&&(m.atime=new Date(m.atime)),typeof m.mtime=="string"&&(m.mtime=new Date(m.mtime)),Object.assign(g,m))}return g},setMeta(l,u,h={}){return this.setItem(l+"$",u,h)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var $;l=dw(l);const h=n(l,!0);let d=[];const g=[];let m=!0;for(const _ of h){($=_.driver.flags)!=null&&$.maxDepth||(m=!1);const S=await zn(_.driver.getKeys,_.relativeBase,u);for(const A of S){const T=_.mountpoint+ds(A);d.some(k=>T.startsWith(k))||g.push(T)}d=[_.mountpoint,...d.filter(A=>!A.startsWith(_.mountpoint))]}const v=u.maxDepth!==void 0&&!m;return g.filter(_=>(!v||dZ(_,u.maxDepth))&&fZ(_,l))},async clear(l,u={}){l=dw(l),await Promise.all(n(l,!1).map(async h=>{if(h.driver.clear)return zn(h.driver.clear,h.relativeBase,u);if(h.driver.removeItem){const d=await h.driver.getKeys(h.relativeBase||"",u);return Promise.all(d.map(g=>h.driver.removeItem(g,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>v8(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=dw(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((h,d)=>d.length-h.length)),e.mounts[l]=u,e.watching&&Promise.resolve(b8(u,i,l)).then(h=>{e.unwatch[l]=h}).catch(console.error),c},async unmount(l,u=!0){var h,d;l=dw(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((d=(h=e.unwatch)[l])==null||d.call(h),delete e.unwatch[l]),u&&await v8(e.mounts[l]),e.mountpoints=e.mountpoints.filter(g=>g!==l),delete e.mounts[l])},getMount(l=""){l=ds(l)+":";const u=r(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=ds(l),n(l,u.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,h={})=>c.setItem(l,u,h),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function b8(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function v8(t){typeof t.dispose=="function"&&await zn(t.dispose)}function Zh(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function UI(t,e){let r;const n=()=>{if(r)return r;const i=indexedDB.open(t);return i.onupgradeneeded=()=>i.result.createObjectStore(e),r=Zh(i),r.then(s=>{s.onclose=()=>r=void 0},()=>{}),r};return(i,s)=>n().then(o=>s(o.transaction(e,i).objectStore(e)))}let DE;function oy(){return DE||(DE=UI("keyval-store","keyval")),DE}function kb(t,e=oy()){return e("readonly",r=>Zh(r.get(t)))}function f7(t,e,r=oy()){return r("readwrite",n=>(n.put(e,t),Zh(n.transaction)))}function p7(t,e=oy()){return e("readwrite",r=>(r.delete(t),Zh(r.transaction)))}function g7(t=oy()){return t("readwrite",e=>(e.clear(),Zh(e.transaction)))}function yZ(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Zh(t.transaction)}function m7(t=oy()){return t("readonly",e=>{if(e.getAllKeys)return Zh(e.getAllKeys());const r=[];return yZ(e,n=>r.push(n.key)).then(()=>r)})}const wZ=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),bZ=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function la(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return bZ(t)}catch{return t}}function Mo(t){return typeof t=="string"?t:wZ(t)||""}const vZ="idb-keyval";var EZ=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i;let n;return t.dbName&&t.storeName&&(n=UI(t.dbName,t.storeName)),{name:vZ,options:t,async hasItem(i){return!(typeof await kb(r(i),n)>"u")},async getItem(i){return await kb(r(i),n)??null},setItem(i,s){return f7(r(i),s,n)},removeItem(i){return p7(r(i),n)},getKeys(){return m7(n)},clear(){return g7(n)}}};const _Z="WALLET_CONNECT_V2_INDEXED_DB",SZ="keyvaluestorage";let xZ=class{constructor(){this.indexedDb=mZ({driver:EZ({dbName:_Z,storeName:SZ})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Mo(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var LE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},A1={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof LE<"u"&&LE.localStorage?A1.exports=LE.localStorage:typeof window<"u"&&window.localStorage?A1.exports=window.localStorage:A1.exports=new e})();function IZ(t){var e;return[t[0],la((e=t[1])!=null?e:"")]}let AZ=class{constructor(){this.localStorage=A1.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(IZ)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return la(r)}async setItem(e,r){this.localStorage.setItem(e,Mo(r))}async removeItem(e){this.localStorage.removeItem(e)}};const CZ="wc_storage_version",E8=1,NZ=async(t,e,r)=>{const n=CZ,i=await e.getItem(n);if(i&&i>=E8){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(n,E8),r(e),MZ(t,o)},MZ=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let TZ=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new AZ;this.storage=e;try{const r=new xZ;NZ(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};function $Z(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var PZ=OZ;function OZ(t,e,r){var n=r&&r.stringify||$Z,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var o=new Array(s);o[0]=n(t);for(var a=1;a<s;a++)o[a]=n(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-i,h=-1,d=t&&t.length||0,g=0;g<d;){if(t.charCodeAt(g)===37&&g+1<d){switch(h=h>-1?h:0,t.charCodeAt(g+1)){case 100:case 102:if(u>=c||e[u]==null)break;h<g&&(l+=t.slice(h,g)),l+=Number(e[u]),h=g+2,g++;break;case 105:if(u>=c||e[u]==null)break;h<g&&(l+=t.slice(h,g)),l+=Math.floor(Number(e[u])),h=g+2,g++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;h<g&&(l+=t.slice(h,g));var m=typeof e[u];if(m==="string"){l+="'"+e[u]+"'",h=g+2,g++;break}if(m==="function"){l+=e[u].name||"<anonymous>",h=g+2,g++;break}l+=n(e[u]),h=g+2,g++;break;case 115:if(u>=c)break;h<g&&(l+=t.slice(h,g)),l+=String(e[u]),h=g+2,g++;break;case 37:h<g&&(l+=t.slice(h,g)),l+="%",h=g+2,g++,u--;break}++u}++g}return h===-1?t:(h<d&&(l+=t.slice(h)),l)}const _8=PZ;var cf=ka;const sm=qZ().console||{},kZ={mapHttpRequest:fw,mapHttpResponse:fw,wrapRequestSerializer:BE,wrapResponseSerializer:BE,wrapErrorSerializer:BE,req:fw,res:fw,err:jZ};function RZ(t,e){return Array.isArray(t)?t.filter(function(n){return n!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function ka(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=t.browser.write||sm;t.browser.write&&(t.browser.asObject=!0);const n=t.serializers||{},i=RZ(t.browser.serialize,n);let s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const o=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(r);c.log||(c.log=om),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:h,set:d});const l={transmit:e,serialize:i,asObject:t.browser.asObject,levels:o,timestamp:UZ(t)};c.levels=ka.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=om,c.serializers=n,c._serialize=i,c._stdErrSerialize=s,c.child=g,e&&(c._logEvent=qS());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function h(){return this._level}function d(m){if(m!=="silent"&&!this.levels.values[m])throw Error("unknown level "+m);this._level=m,wd(l,c,"error","log"),wd(l,c,"fatal","error"),wd(l,c,"warn","error"),wd(l,c,"info","log"),wd(l,c,"debug","log"),wd(l,c,"trace","log")}function g(m,v){if(!m)throw new Error("missing bindings for child Pino");v=v||{},i&&m.serializers&&(v.serializers=m.serializers);const $=v.serializers;if(i&&$){var _=Object.assign({},n,$),S=t.browser.serialize===!0?Object.keys(_):i;delete m.serializers,Wv([m],S,_,this._stdErrSerialize)}function A(T){this._childLevel=(T._childLevel|0)+1,this.error=bd(T,m,"error"),this.fatal=bd(T,m,"fatal"),this.warn=bd(T,m,"warn"),this.info=bd(T,m,"info"),this.debug=bd(T,m,"debug"),this.trace=bd(T,m,"trace"),_&&(this.serializers=_,this._serialize=S),e&&(this._logEvent=qS([].concat(T._logEvent.bindings,m)))}return A.prototype=this,new A(this)}return c}ka.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};ka.stdSerializers=kZ;ka.stdTimeFunctions=Object.assign({},{nullTime:y7,epochTime:w7,unixTime:FZ,isoTime:zZ});function wd(t,e,r,n){const i=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?om:i[r]?i[r]:sm[r]||sm[n]||om,DZ(t,e,r)}function DZ(t,e,r){!t.transmit&&e[r]===om||(e[r]=function(n){return function(){const s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===sm?sm:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&Wv(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(a,LZ(this,r,o,s)):n.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=ka.levels.values[l],h=ka.levels.values[r];if(h<u)return;BZ(this,{ts:s,methodLevel:r,methodValue:h,transmitValue:ka.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[r]))}function LZ(t,e,r,n){t._serialize&&Wv(r,t._serialize,t.serializers,t._stdErrSerialize);const i=r.slice();let s=i[0];const o={};n&&(o.time=n),o.level=ka.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof i[0]=="object";)Object.assign(o,i.shift());s=i.length?_8(i.shift(),i):void 0}else typeof s=="string"&&(s=_8(i.shift(),i));return s!==void 0&&(o.msg=s),o}function Wv(t,e,r,n){for(const i in t)if(n&&t[i]instanceof Error)t[i]=ka.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(const s in t[i])e&&e.indexOf(s)>-1&&s in r&&(t[i][s]=r[s](t[i][s]))}function bd(t,e,r){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return t[r].apply(this,n)}}function BZ(t,e,r){const n=e.send,i=e.ts,s=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;Wv(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=r.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=o,n(s,t._logEvent,a),t._logEvent=qS(c)}function qS(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function jZ(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)e[r]===void 0&&(e[r]=t[r]);return e}function UZ(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?y7:w7}function fw(){return{}}function BE(t){return t}function om(){}function y7(){return!1}function w7(){return Date.now()}function FZ(){return Math.round(Date.now()/1e3)}function zZ(){return new Date(Date.now()).toISOString()}function qZ(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const Eu=ha(cf),WZ={level:"info"},ay="custom_context",FI=1e3*1024;let HZ=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},S8=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new HZ(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}},b7=class{constructor(e,r=FI){this.level=e??"error",this.levelValue=cf.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new S8(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===cf.levels.values.error?console.error(e):r===cf.levels.values.warn?console.warn(e):r===cf.levels.values.debug?console.debug(e):r===cf.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Mo({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new S8(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(Mo({extraMetadata:e})),new Blob(r,{type:"application/json"})}},KZ=class{constructor(e,r=FI){this.baseChunkLogger=new b7(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}},VZ=class{constructor(e,r=FI){this.baseChunkLogger=new b7(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var GZ=Object.defineProperty,YZ=Object.defineProperties,QZ=Object.getOwnPropertyDescriptors,x8=Object.getOwnPropertySymbols,ZZ=Object.prototype.hasOwnProperty,JZ=Object.prototype.propertyIsEnumerable,I8=(t,e,r)=>e in t?GZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Rb=(t,e)=>{for(var r in e||(e={}))ZZ.call(e,r)&&I8(t,r,e[r]);if(x8)for(var r of x8(e))JZ.call(e,r)&&I8(t,r,e[r]);return t},Db=(t,e)=>YZ(t,QZ(e));function nl(t){return Db(Rb({},t),{level:(t==null?void 0:t.level)||WZ.level})}function XZ(t,e=ay){return t[e]||""}function eJ(t,e,r=ay){return t[r]=e,t}function dr(t,e=ay){let r="";return typeof t.bindings>"u"?r=XZ(t,e):r=t.bindings().context||"",r}function tJ(t,e,r=ay){const n=dr(t,r);return n.trim()?`${n}/${e}`:e}function Vt(t,e,r=ay){const n=tJ(t,e,r),i=t.child({context:n});return eJ(i,n,r)}function rJ(t){var e,r;const n=new KZ((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Eu(Db(Rb({},t.opts),{level:"trace",browser:Db(Rb({},(r=t.opts)==null?void 0:r.browser),{write:i=>n.write(i)})})),chunkLoggerController:n}}function nJ(t){var e;const r=new VZ((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Eu(Db(Rb({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function zI(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?rJ(t):nJ(t)}var iJ=Object.defineProperty,sJ=(t,e,r)=>e in t?iJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,A8=(t,e,r)=>sJ(t,typeof e!="symbol"?e+"":e,r);let oJ=class extends to{constructor(e){super(),this.opts=e,A8(this,"protocol","wc"),A8(this,"version",2)}};var aJ=Object.defineProperty,cJ=(t,e,r)=>e in t?aJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,lJ=(t,e,r)=>cJ(t,e+"",r);let uJ=class extends to{constructor(e,r){super(),this.core=e,this.logger=r,lJ(this,"records",new Map)}},hJ=class{constructor(e,r){this.logger=e,this.core=r}},dJ=class extends to{constructor(e,r){super(),this.relayer=e,this.logger=r}},fJ=class extends to{constructor(e){super()}},pJ=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},gJ=class extends to{constructor(e,r){super(),this.relayer=e,this.logger=r}},mJ=class extends to{constructor(e,r){super(),this.core=e,this.logger=r}},yJ=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},wJ=class{constructor(e,r){this.projectId=e,this.logger=r}},bJ=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};function vJ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function v7(t,...e){if(!vJ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function C8(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function EJ(t,e){v7(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const vd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jE=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function _J(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function E7(t){return typeof t=="string"&&(t=_J(t)),v7(t),t}let SJ=class{clone(){return this._cloneInto()}};function xJ(t){const e=n=>t().update(E7(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function _7(t=32){if(vd&&typeof vd.getRandomValues=="function")return vd.getRandomValues(new Uint8Array(t));if(vd&&typeof vd.randomBytes=="function")return vd.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function IJ(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}let AJ=class extends SJ{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=jE(this.buffer)}update(e){C8(this);const{view:r,buffer:n,blockLen:i}=this;e=E7(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=jE(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){C8(this),EJ(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;IJ(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=jE(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}};const pw=BigInt(2**32-1),WS=BigInt(32);function S7(t,e=!1){return e?{h:Number(t&pw),l:Number(t>>WS&pw)}:{h:Number(t>>WS&pw)|0,l:Number(t&pw)|0}}function CJ(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=S7(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const NJ=(t,e)=>BigInt(t>>>0)<<WS|BigInt(e>>>0),MJ=(t,e,r)=>t>>>r,TJ=(t,e,r)=>t<<32-r|e>>>r,$J=(t,e,r)=>t>>>r|e<<32-r,PJ=(t,e,r)=>t<<32-r|e>>>r,OJ=(t,e,r)=>t<<64-r|e>>>r-32,kJ=(t,e,r)=>t>>>r-32|e<<64-r,RJ=(t,e)=>e,DJ=(t,e)=>t,LJ=(t,e,r)=>t<<r|e>>>32-r,BJ=(t,e,r)=>e<<r|t>>>32-r,jJ=(t,e,r)=>e<<r-32|t>>>64-r,UJ=(t,e,r)=>t<<r-32|e>>>64-r;function FJ(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const zJ=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),qJ=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,WJ=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),HJ=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,KJ=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),VJ=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,lt={fromBig:S7,split:CJ,toBig:NJ,shrSH:MJ,shrSL:TJ,rotrSH:$J,rotrSL:PJ,rotrBH:OJ,rotrBL:kJ,rotr32H:RJ,rotr32L:DJ,rotlSH:LJ,rotlSL:BJ,rotlBH:jJ,rotlBL:UJ,add:FJ,add3L:zJ,add3H:qJ,add4L:WJ,add4H:HJ,add5H:VJ,add5L:KJ},[GJ,YJ]=lt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ml=new Uint32Array(80),yl=new Uint32Array(80);let QJ=class extends AJ{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:d,Gh:g,Gl:m,Hh:v,Hl:$}=this;return[e,r,n,i,s,o,a,c,l,u,h,d,g,m,v,$]}set(e,r,n,i,s,o,a,c,l,u,h,d,g,m,v,$){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=d|0,this.Gh=g|0,this.Gl=m|0,this.Hh=v|0,this.Hl=$|0}process(e,r){for(let A=0;A<16;A++,r+=4)ml[A]=e.getUint32(r),yl[A]=e.getUint32(r+=4);for(let A=16;A<80;A++){const T=ml[A-15]|0,k=yl[A-15]|0,R=lt.rotrSH(T,k,1)^lt.rotrSH(T,k,8)^lt.shrSH(T,k,7),L=lt.rotrSL(T,k,1)^lt.rotrSL(T,k,8)^lt.shrSL(T,k,7),F=ml[A-2]|0,B=yl[A-2]|0,q=lt.rotrSH(F,B,19)^lt.rotrBH(F,B,61)^lt.shrSH(F,B,6),D=lt.rotrSL(F,B,19)^lt.rotrBL(F,B,61)^lt.shrSL(F,B,6),E=lt.add4L(L,D,yl[A-7],yl[A-16]),b=lt.add4H(E,R,q,ml[A-7],ml[A-16]);ml[A]=b|0,yl[A]=E|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:d,Fh:g,Fl:m,Gh:v,Gl:$,Hh:_,Hl:S}=this;for(let A=0;A<80;A++){const T=lt.rotrSH(h,d,14)^lt.rotrSH(h,d,18)^lt.rotrBH(h,d,41),k=lt.rotrSL(h,d,14)^lt.rotrSL(h,d,18)^lt.rotrBL(h,d,41),R=h&g^~h&v,L=d&m^~d&$,F=lt.add5L(S,k,L,YJ[A],yl[A]),B=lt.add5H(F,_,T,R,GJ[A],ml[A]),q=F|0,D=lt.rotrSH(n,i,28)^lt.rotrBH(n,i,34)^lt.rotrBH(n,i,39),E=lt.rotrSL(n,i,28)^lt.rotrBL(n,i,34)^lt.rotrBL(n,i,39),b=n&s^n&a^s&a,f=i&o^i&c^o&c;_=v|0,S=$|0,v=g|0,$=m|0,g=h|0,m=d|0,{h,l:d}=lt.add(l|0,u|0,B|0,q|0),l=a|0,u=c|0,a=s|0,c=o|0,s=n|0,o=i|0;const p=lt.add3L(q,E,f);n=lt.add3H(p,B,D,b),i=p|0}({h:n,l:i}=lt.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=lt.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=lt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=lt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:d}=lt.add(this.Eh|0,this.El|0,h|0,d|0),{h:g,l:m}=lt.add(this.Fh|0,this.Fl|0,g|0,m|0),{h:v,l:$}=lt.add(this.Gh|0,this.Gl|0,v|0,$|0),{h:_,l:S}=lt.add(this.Hh|0,this.Hl|0,_|0,S|0),this.set(n,i,s,o,a,c,l,u,h,d,g,m,v,$,_,S)}roundClean(){ml.fill(0),yl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const ZJ=xJ(()=>new QJ);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qI=BigInt(0),x7=BigInt(1),JJ=BigInt(2);function WI(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function HI(t){if(!WI(t))throw new Error("Uint8Array expected")}function UE(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const XJ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function KI(t){HI(t);let e="";for(let r=0;r<t.length;r++)e+=XJ[t[r]];return e}function I7(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?qI:BigInt("0x"+t)}const gc={_0:48,_9:57,A:65,F:70,a:97,f:102};function N8(t){if(t>=gc._0&&t<=gc._9)return t-gc._0;if(t>=gc.A&&t<=gc.F)return t-(gc.A-10);if(t>=gc.a&&t<=gc.f)return t-(gc.a-10)}function A7(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=N8(t.charCodeAt(s)),a=N8(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function eX(t){return I7(KI(t))}function C1(t){return HI(t),I7(KI(Uint8Array.from(t).reverse()))}function C7(t,e){return A7(t.toString(16).padStart(e*2,"0"))}function HS(t,e){return C7(t,e).reverse()}function mc(t,e,r){let n;if(typeof e=="string")try{n=A7(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(WI(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function M8(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];HI(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}const FE=t=>typeof t=="bigint"&&qI<=t;function tX(t,e,r){return FE(t)&&FE(e)&&FE(r)&&e<=t&&t<r}function w0(t,e,r,n){if(!tX(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function rX(t){let e;for(e=0;t>qI;t>>=x7,e+=1);return e}const nX=t=>(JJ<<BigInt(t-1))-x7,iX={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||WI(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function VI(t,e,r={}){const n=(i,s,o)=>{const a=iX[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}function T8(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const Zn=BigInt(0),gn=BigInt(1),Gu=BigInt(2),sX=BigInt(3),KS=BigInt(4),$8=BigInt(5),P8=BigInt(8);function On(t,e){const r=t%e;return r>=Zn?r:e+r}function oX(t,e,r){if(e<Zn)throw new Error("invalid exponent, negatives unsupported");if(r<=Zn)throw new Error("invalid modulus");if(r===gn)return Zn;let n=gn;for(;e>Zn;)e&gn&&(n=n*t%r),t=t*t%r,e>>=gn;return n}function ga(t,e,r){let n=t;for(;e-- >Zn;)n*=n,n%=r;return n}function O8(t,e){if(t===Zn)throw new Error("invert: expected non-zero number");if(e<=Zn)throw new Error("invert: expected positive modulus, got "+e);let r=On(t,e),n=e,i=Zn,s=gn;for(;r!==Zn;){const o=n/r,a=n%r,c=i-s*o;n=r,r=a,i=s,s=c}if(n!==gn)throw new Error("invert: does not exist");return On(i,e)}function aX(t){const e=(t-gn)/Gu;let r,n,i;for(r=t-gn,n=0;r%Gu===Zn;r/=Gu,n++);for(i=Gu;i<t&&oX(i,e,t)!==t-gn;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+gn)/KS;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(r+gn)/Gu;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,l=o.pow(o.mul(o.ONE,i),r),u=o.pow(a,s),h=o.pow(a,r);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let d=1;for(let m=o.sqr(h);d<c&&!o.eql(m,o.ONE);d++)m=o.sqr(m);const g=o.pow(l,gn<<BigInt(c-d-1));l=o.sqr(g),u=o.mul(u,g),h=o.mul(h,l),c=d}return u}}function cX(t){if(t%KS===sX){const e=(t+gn)/KS;return function(r,n){const i=r.pow(n,e);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}}if(t%P8===$8){const e=(t-$8)/P8;return function(r,n){const i=r.mul(n,Gu),s=r.pow(i,e),o=r.mul(n,s),a=r.mul(r.mul(o,Gu),s),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return aX(t)}const lX=(t,e)=>(On(t,e)&gn)===gn,uX=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function hX(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=uX.reduce((n,i)=>(n[i]="function",n),e);return VI(t,r)}function dX(t,e,r){if(r<Zn)throw new Error("invalid exponent, negatives unsupported");if(r===Zn)return t.ONE;if(r===gn)return e;let n=t.ONE,i=e;for(;r>Zn;)r&gn&&(n=t.mul(n,i)),i=t.sqr(i),r>>=gn;return n}function fX(t,e){const r=new Array(e.length),n=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),i),r}function N7(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function M7(t,e,r=!1,n={}){if(t<=Zn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=N7(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:nX(i),ZERO:Zn,ONE:gn,create:c=>On(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Zn<=c&&c<t},is0:c=>c===Zn,isOdd:c=>(c&gn)===gn,neg:c=>On(-c,t),eql:(c,l)=>c===l,sqr:c=>On(c*c,t),add:(c,l)=>On(c+l,t),sub:(c,l)=>On(c-l,t),mul:(c,l)=>On(c*l,t),pow:(c,l)=>dX(a,c,l),div:(c,l)=>On(c*O8(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>O8(c,t),sqrt:n.sqrt||(c=>(o||(o=cX(t)),o(a,c))),invertBatch:c=>fX(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>r?HS(c,s):C7(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?C1(c):eX(c)}});return Object.freeze(a)}const k8=BigInt(0),gw=BigInt(1);function zE(t,e){const r=e.negate();return t?r:e}function T7(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function qE(t,e){T7(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function pX(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function gX(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const WE=new WeakMap,$7=new WeakMap;function HE(t){return $7.get(t)||1}function mX(t,e){return{constTimeNegate:zE,hasPrecomputes(r){return HE(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>k8;)n&gw&&(i=i.add(s)),s=s.double(),n>>=gw;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=qE(n,e),o=[];let a=r,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,i){const{windows:s,windowSize:o}=qE(r,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**r-1),u=2**r,h=BigInt(r);for(let d=0;d<s;d++){const g=d*o;let m=Number(i&l);i>>=h,m>o&&(m-=u,i+=gw);const v=g,$=g+Math.abs(m)-1,_=d%2!==0,S=m<0;m===0?c=c.add(zE(_,n[v])):a=a.add(zE(S,n[$]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:o,windowSize:a}=qE(r,e),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let h=0;h<o;h++){const d=h*a;if(i===k8)break;let g=Number(i&c);if(i>>=u,g>a&&(g-=l,i+=gw),g===0)continue;let m=n[d+Math.abs(g)-1];g<0&&(m=m.negate()),s=s.add(m)}return s},getPrecomputes(r,n,i){let s=WE.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&WE.set(n,i(s))),s},wNAFCached(r,n,i){const s=HE(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=HE(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){T7(n,e),$7.set(r,n),WE.delete(r)}}}function yX(t,e,r,n){if(pX(r,t),gX(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=rX(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let h=l;h>=0;h-=o){c.fill(i);for(let g=0;g<n.length;g++){const m=n[g],v=Number(m>>BigInt(h)&BigInt(a));c[v]=c[v].add(r[g])}let d=i;for(let g=c.length-1,m=i;g>0;g--)m=m.add(c[g]),d=d.add(m);if(u=u.add(d),h!==0)for(let g=0;g<o;g++)u=u.double()}return u}function wX(t){return hX(t.Fp),VI(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...N7(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Lo=BigInt(0),os=BigInt(1),mw=BigInt(2),bX=BigInt(8),vX={zip215:!0};function EX(t){const e=wX(t);return VI(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function _X(t){const e=EX(t),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=mw<<BigInt(a*8)-os,u=r.create,h=M7(e.n,e.nBitLength),d=e.uvRatio||((p,w)=>{try{return{isValid:!0,value:r.sqrt(p*r.inv(w))}}catch{return{isValid:!1,value:Lo}}}),g=e.adjustScalarBytes||(p=>p),m=e.domain||((p,w,N)=>{if(UE("phflag",N),w.length||N)throw new Error("Contexts/pre-hash are not supported");return p});function v(p,w){w0("coordinate "+p,w,Lo,l)}function $(p){if(!(p instanceof A))throw new Error("ExtendedPoint expected")}const _=T8((p,w)=>{const{ex:N,ey:M,ez:x}=p,y=p.is0();w==null&&(w=y?bX:r.inv(x));const C=u(N*w),I=u(M*w),j=u(x*w);if(y)return{x:Lo,y:os};if(j!==os)throw new Error("invZ was invalid");return{x:C,y:I}}),S=T8(p=>{const{a:w,d:N}=e;if(p.is0())throw new Error("bad point: ZERO");const{ex:M,ey:x,ez:y,et:C}=p,I=u(M*M),j=u(x*x),K=u(y*y),V=u(K*K),te=u(I*w),se=u(K*u(te+j)),ce=u(V+u(N*u(I*j)));if(se!==ce)throw new Error("bad point: equation left != right (1)");const ie=u(M*x),ve=u(y*C);if(ie!==ve)throw new Error("bad point: equation left != right (2)");return!0});class A{constructor(w,N,M,x){this.ex=w,this.ey=N,this.ez=M,this.et=x,v("x",w),v("y",N),v("z",M),v("t",x),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof A)throw new Error("extended point not allowed");const{x:N,y:M}=w||{};return v("x",N),v("y",M),new A(N,M,os,u(N*M))}static normalizeZ(w){const N=r.invertBatch(w.map(M=>M.ez));return w.map((M,x)=>M.toAffine(N[x])).map(A.fromAffine)}static msm(w,N){return yX(A,h,w,N)}_setWindowSize(w){R.setWindowSize(this,w)}assertValidity(){S(this)}equals(w){$(w);const{ex:N,ey:M,ez:x}=this,{ex:y,ey:C,ez:I}=w,j=u(N*I),K=u(y*x),V=u(M*I),te=u(C*x);return j===K&&V===te}is0(){return this.equals(A.ZERO)}negate(){return new A(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:w}=e,{ex:N,ey:M,ez:x}=this,y=u(N*N),C=u(M*M),I=u(mw*u(x*x)),j=u(w*y),K=N+M,V=u(u(K*K)-y-C),te=j+C,se=te-I,ce=j-C,ie=u(V*se),ve=u(te*ce),Me=u(V*ce),Ce=u(se*te);return new A(ie,ve,Ce,Me)}add(w){$(w);const{a:N,d:M}=e,{ex:x,ey:y,ez:C,et:I}=this,{ex:j,ey:K,ez:V,et:te}=w;if(N===BigInt(-1)){const Ft=u((y-x)*(K+j)),Bt=u((y+x)*(K-j)),Be=u(Bt-Ft);if(Be===Lo)return this.double();const ft=u(C*mw*te),Nt=u(I*mw*V),Ve=Nt+ft,mt=Bt+Ft,zt=Nt-ft,U=u(Ve*Be),P=u(mt*zt),O=u(Ve*zt),z=u(Be*mt);return new A(U,P,z,O)}const se=u(x*j),ce=u(y*K),ie=u(I*M*te),ve=u(C*V),Me=u((x+y)*(j+K)-se-ce),Ce=ve-ie,et=ve+ie,tt=u(ce-N*se),Fe=u(Me*Ce),Gt=u(et*tt),Lt=u(Me*tt),Ye=u(Ce*et);return new A(Fe,Gt,Ye,Lt)}subtract(w){return this.add(w.negate())}wNAF(w){return R.wNAFCached(this,w,A.normalizeZ)}multiply(w){const N=w;w0("scalar",N,os,n);const{p:M,f:x}=this.wNAF(N);return A.normalizeZ([M,x])[0]}multiplyUnsafe(w,N=A.ZERO){const M=w;return w0("scalar",M,Lo,n),M===Lo?k:this.is0()||M===os?this:R.wNAFCachedUnsafe(this,M,A.normalizeZ,N)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return R.unsafeLadder(this,n).is0()}toAffine(w){return _(this,w)}clearCofactor(){const{h:w}=e;return w===os?this:this.multiplyUnsafe(w)}static fromHex(w,N=!1){const{d:M,a:x}=e,y=r.BYTES;w=mc("pointHex",w,y),UE("zip215",N);const C=w.slice(),I=w[y-1];C[y-1]=I&-129;const j=C1(C),K=N?l:r.ORDER;w0("pointHex.y",j,Lo,K);const V=u(j*j),te=u(V-os),se=u(M*V-x);let{isValid:ce,value:ie}=d(te,se);if(!ce)throw new Error("Point.fromHex: invalid y coordinate");const ve=(ie&os)===os,Me=(I&128)!==0;if(!N&&ie===Lo&&Me)throw new Error("Point.fromHex: x=0 and x_0=1");return Me!==ve&&(ie=u(-ie)),A.fromAffine({x:ie,y:j})}static fromPrivateKey(w){return B(w).point}toRawBytes(){const{x:w,y:N}=this.toAffine(),M=HS(N,r.BYTES);return M[M.length-1]|=w&os?128:0,M}toHex(){return KI(this.toRawBytes())}}A.BASE=new A(e.Gx,e.Gy,os,u(e.Gx*e.Gy)),A.ZERO=new A(Lo,os,os,Lo);const{BASE:T,ZERO:k}=A,R=mX(A,a*8);function L(p){return On(p,n)}function F(p){return L(C1(p))}function B(p){const w=r.BYTES;p=mc("private key",p,w);const N=mc("hashed private key",s(p),2*w),M=g(N.slice(0,w)),x=N.slice(w,2*w),y=F(M),C=T.multiply(y),I=C.toRawBytes();return{head:M,prefix:x,scalar:y,point:C,pointBytes:I}}function q(p){return B(p).pointBytes}function D(p=new Uint8Array,...w){const N=M8(...w);return F(s(m(N,mc("context",p),!!i)))}function E(p,w,N={}){p=mc("message",p),i&&(p=i(p));const{prefix:M,scalar:x,pointBytes:y}=B(w),C=D(N.context,M,p),I=T.multiply(C).toRawBytes(),j=D(N.context,I,y,p),K=L(C+j*x);w0("signature.s",K,Lo,n);const V=M8(I,HS(K,r.BYTES));return mc("result",V,r.BYTES*2)}const b=vX;function f(p,w,N,M=b){const{context:x,zip215:y}=M,C=r.BYTES;p=mc("signature",p,2*C),w=mc("message",w),N=mc("publicKey",N,C),y!==void 0&&UE("zip215",y),i&&(w=i(w));const I=C1(p.slice(C,2*C));let j,K,V;try{j=A.fromHex(N,y),K=A.fromHex(p.slice(0,C),y),V=T.multiplyUnsafe(I)}catch{return!1}if(!y&&j.isSmallOrder())return!1;const te=D(x,K.toRawBytes(),j.toRawBytes(),w);return K.add(j.multiplyUnsafe(te)).subtract(V).clearCofactor().equals(A.ZERO)}return T._setWindowSize(8),{CURVE:e,getPublicKey:q,sign:E,verify:f,ExtendedPoint:A,utils:{getExtendedPublicKey:B,randomPrivateKey:()=>o(r.BYTES),precompute(p=8,w=A.BASE){return w._setWindowSize(p),w.multiply(BigInt(3)),w}}}}BigInt(0),BigInt(1);const GI=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),R8=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const SX=BigInt(1),D8=BigInt(2);BigInt(3);const xX=BigInt(5),IX=BigInt(8);function AX(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=GI,o=t*t%s*t%s,a=ga(o,D8,s)*o%s,c=ga(a,SX,s)*t%s,l=ga(c,xX,s)*c%s,u=ga(l,e,s)*l%s,h=ga(u,r,s)*u%s,d=ga(h,n,s)*h%s,g=ga(d,i,s)*d%s,m=ga(g,i,s)*d%s,v=ga(m,e,s)*l%s;return{pow_p_5_8:ga(v,D8,s)*t%s,b2:o}}function CX(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function NX(t,e){const r=GI,n=On(e*e*e,r),i=On(n*n*e,r),s=AX(t*i).pow_p_5_8;let o=On(t*n*s,r);const a=On(e*o*o,r),c=o,l=On(o*R8,r),u=a===t,h=a===On(-t,r),d=a===On(-t*R8,r);return u&&(o=c),(h||d)&&(o=l),lX(o,r)&&(o=On(-o,r)),{isValid:u||h,value:o}}const MX=M7(GI,void 0,!0),TX={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:MX,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:IX,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ZJ,randomBytes:_7,adjustScalarBytes:CX,uvRatio:NX},P7=_X(TX),$X="EdDSA",PX="JWT",Lb=".",Hv="base64url",O7="utf8",k7="utf8",OX=":",kX="did",RX="key",L8="base58btc",DX="z",LX="K36",BX=32;function YI(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function R7(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?YI(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function D7(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=R7(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return YI(r)}function jX(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var v=0,$=0,_=0,S=m.length;_!==S&&m[_]===0;)_++,v++;for(var A=(S-_)*u+1>>>0,T=new Uint8Array(A);_!==S;){for(var k=m[_],R=0,L=A-1;(k!==0||R<$)&&L!==-1;L--,R++)k+=256*T[L]>>>0,T[L]=k%a>>>0,k=k/a>>>0;if(k!==0)throw new Error("Non-zero carry");$=R,_++}for(var F=A-$;F!==A&&T[F]===0;)F++;for(var B=c.repeat(v);F<A;++F)B+=t.charAt(T[F]);return B}function d(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var v=0;if(m[v]!==" "){for(var $=0,_=0;m[v]===c;)$++,v++;for(var S=(m.length-v)*l+1>>>0,A=new Uint8Array(S);m[v];){var T=r[m.charCodeAt(v)];if(T===255)return;for(var k=0,R=S-1;(T!==0||k<_)&&R!==-1;R--,k++)T+=a*A[R]>>>0,A[R]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");_=k,v++}if(m[v]!==" "){for(var L=S-_;L!==S&&A[L]===0;)L++;for(var F=new Uint8Array($+(S-L)),B=$;L!==S;)F[B++]=A[L++];return F}}}function g(m){var v=d(m);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:g}}var UX=jX,FX=UX;const L7=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},zX=t=>new TextEncoder().encode(t),qX=t=>new TextDecoder().decode(t);let WX=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},HX=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return B7(this,e)}},KX=class{constructor(e){this.decoders=e}or(e){return B7(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const B7=(t,e)=>new KX({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let VX=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new WX(e,r,n),this.decoder=new HX(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Kv=({name:t,prefix:e,encode:r,decode:n})=>new VX(t,e,r,n),cy=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=FX(r,e);return Kv({prefix:t,name:e,encode:n,decode:s=>L7(i(s))})},GX=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},YX=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},_i=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Kv({prefix:e,name:t,encode(i){return YX(i,n,r)},decode(i){return GX(i,n,r,t)}}),QX=Kv({prefix:"\0",name:"identity",encode:t=>qX(t),decode:t=>zX(t)});var ZX=Object.freeze({__proto__:null,identity:QX});const JX=_i({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var XX=Object.freeze({__proto__:null,base2:JX});const eee=_i({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var tee=Object.freeze({__proto__:null,base8:eee});const ree=cy({prefix:"9",name:"base10",alphabet:"0123456789"});var nee=Object.freeze({__proto__:null,base10:ree});const iee=_i({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),see=_i({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var oee=Object.freeze({__proto__:null,base16:iee,base16upper:see});const aee=_i({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),cee=_i({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),lee=_i({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),uee=_i({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),hee=_i({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dee=_i({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),fee=_i({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),pee=_i({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),gee=_i({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var mee=Object.freeze({__proto__:null,base32:aee,base32upper:cee,base32pad:lee,base32padupper:uee,base32hex:hee,base32hexupper:dee,base32hexpad:fee,base32hexpadupper:pee,base32z:gee});const yee=cy({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),wee=cy({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var bee=Object.freeze({__proto__:null,base36:yee,base36upper:wee});const vee=cy({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Eee=cy({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var _ee=Object.freeze({__proto__:null,base58btc:vee,base58flickr:Eee});const See=_i({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),xee=_i({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Iee=_i({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Aee=_i({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Cee=Object.freeze({__proto__:null,base64:See,base64pad:xee,base64url:Iee,base64urlpad:Aee});const j7=Array.from(""),Nee=j7.reduce((t,e,r)=>(t[r]=e,t),[]),Mee=j7.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Tee(t){return t.reduce((e,r)=>(e+=Nee[r],e),"")}function $ee(t){const e=[];for(const r of t){const n=Mee[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Pee=Kv({prefix:"",name:"base256emoji",encode:Tee,decode:$ee});var Oee=Object.freeze({__proto__:null,base256emoji:Pee}),kee=U7,B8=128,Ree=-128,Dee=Math.pow(2,31);function U7(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Dee;)e[r++]=t&255|B8,t/=128;for(;t&Ree;)e[r++]=t&255|B8,t>>>=7;return e[r]=t|0,U7.bytes=r-n+1,e}var Lee=VS,Bee=128,j8=127;function VS(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw VS.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&j8)<<i:(o&j8)*Math.pow(2,i),i+=7}while(o>=Bee);return VS.bytes=s-n,r}var jee=Math.pow(2,7),Uee=Math.pow(2,14),Fee=Math.pow(2,21),zee=Math.pow(2,28),qee=Math.pow(2,35),Wee=Math.pow(2,42),Hee=Math.pow(2,49),Kee=Math.pow(2,56),Vee=Math.pow(2,63),Gee=function(t){return t<jee?1:t<Uee?2:t<Fee?3:t<zee?4:t<qee?5:t<Wee?6:t<Hee?7:t<Kee?8:t<Vee?9:10},Yee={encode:kee,decode:Lee,encodingLength:Gee},F7=Yee;const U8=(t,e,r=0)=>(F7.encode(t,e,r),e),F8=t=>F7.encodingLength(t),GS=(t,e)=>{const r=e.byteLength,n=F8(t),i=n+F8(r),s=new Uint8Array(i+r);return U8(t,s,0),U8(r,s,n),s.set(e,i),new Qee(t,r,e,s)};let Qee=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};const z7=({name:t,code:e,encode:r})=>new Zee(t,e,r);let Zee=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?GS(this.code,r):r.then(n=>GS(this.code,n))}else throw Error("Unknown type, must be binary type")}};const q7=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Jee=z7({name:"sha2-256",code:18,encode:q7("SHA-256")}),Xee=z7({name:"sha2-512",code:19,encode:q7("SHA-512")});var ete=Object.freeze({__proto__:null,sha256:Jee,sha512:Xee});const W7=0,tte="identity",H7=L7,rte=t=>GS(W7,H7(t)),nte={code:W7,name:tte,encode:H7,digest:rte};var ite=Object.freeze({__proto__:null,identity:nte});new TextEncoder,new TextDecoder;const z8={...ZX,...XX,...tee,...nee,...oee,...mee,...bee,..._ee,...Cee,...Oee};({...ete,...ite});function K7(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const q8=K7("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),KE=K7("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=R7(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),V7={utf8:q8,"utf-8":q8,hex:z8.base16,latin1:KE,ascii:KE,binary:KE,...z8};function Vv(t,e="utf8"){const r=V7[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function jp(t,e="utf8"){const r=V7[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?YI(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function W8(t){return la(Vv(jp(t,Hv),O7))}function Bb(t){return Vv(jp(Mo(t),O7),Hv)}function QI(t){const e=jp(LX,L8),r=DX+Vv(D7([e,t]),L8);return[kX,RX,r].join(OX)}function ste(t){return Vv(t,Hv)}function ote(t){return jp(t,Hv)}function ate(t){return jp([Bb(t.header),Bb(t.payload)].join(Lb),k7)}function cte(t){return[Bb(t.header),Bb(t.payload),ste(t.signature)].join(Lb)}function gp(t){const e=t.split(Lb),r=W8(e[0]),n=W8(e[1]),i=ote(e[2]),s=jp(e.slice(0,2).join(Lb),k7);return{header:r,payload:n,signature:i,data:s}}function jb(t=_7(BX)){const e=P7.getPublicKey(t);return{secretKey:D7([t,e]),publicKey:e}}async function G7(t,e,r,n,i=J.fromMiliseconds(Date.now())){const s={alg:$X,typ:PX},o=QI(n.publicKey),a=i+r,c={iss:o,sub:t,aud:e,iat:i,exp:a},l=ate({header:s,payload:c}),u=P7.sign(l,n.secretKey.slice(0,32));return cte({header:s,payload:c,signature:u})}var H8=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},lte=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),ute=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),hte=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),dte=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),fte=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),pte=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,gte=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,K8=3,mte=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",pte]],V8=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Y7(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new fte:typeof navigator<"u"?wte(navigator.userAgent):vte()}function yte(t){return t!==""&&mte.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function wte(t){var e=yte(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new dte;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<K8&&(i=H8(H8([],i,!0),Ete(K8-i.length),!0)):i=[];var s=i.join("."),o=bte(t),a=gte.exec(t);return a&&a[1]?new hte(r,s,o,a[1]):new lte(r,s,o)}function bte(t){for(var e=0,r=V8.length;e<r;e++){var n=V8[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function vte(){var t=typeof process<"u"&&process.version;return t?new ute(process.version.slice(1)):null}function Ete(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Er={};Object.defineProperty(Er,"__esModule",{value:!0});Er.getLocalStorage=Er.getLocalStorageOrThrow=Er.getCrypto=Er.getCryptoOrThrow=ZI=Er.getLocation=Er.getLocationOrThrow=ly=Er.getNavigator=Er.getNavigatorOrThrow=il=Er.getDocument=Er.getDocumentOrThrow=Er.getFromWindowOrThrow=Er.getFromWindow=void 0;function Jh(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Er.getFromWindow=Jh;function Up(t){const e=Jh(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Er.getFromWindowOrThrow=Up;function _te(){return Up("document")}Er.getDocumentOrThrow=_te;function Ste(){return Jh("document")}var il=Er.getDocument=Ste;function xte(){return Up("navigator")}Er.getNavigatorOrThrow=xte;function Ite(){return Jh("navigator")}var ly=Er.getNavigator=Ite;function Ate(){return Up("location")}Er.getLocationOrThrow=Ate;function Cte(){return Jh("location")}var ZI=Er.getLocation=Cte;function Nte(){return Up("crypto")}Er.getCryptoOrThrow=Nte;function Mte(){return Jh("crypto")}Er.getCrypto=Mte;function Tte(){return Up("localStorage")}Er.getLocalStorageOrThrow=Tte;function $te(){return Jh("localStorage")}Er.getLocalStorage=$te;var JI={};Object.defineProperty(JI,"__esModule",{value:!0});var XI=JI.getWindowMetadata=void 0;const G8=Er;function Pte(){let t,e;try{t=G8.getDocumentOrThrow(),e=G8.getLocationOrThrow()}catch{return null}function r(){const h=t.getElementsByTagName("link"),d=[];for(let g=0;g<h.length;g++){const m=h[g],v=m.getAttribute("rel");if(v&&v.toLowerCase().indexOf("icon")>-1){const $=m.getAttribute("href");if($)if($.toLowerCase().indexOf("https:")===-1&&$.toLowerCase().indexOf("http:")===-1&&$.indexOf("//")!==0){let _=e.protocol+"//"+e.host;if($.indexOf("/")===0)_+=$;else{const S=e.pathname.split("/");S.pop();const A=S.join("/");_+=A+"/"+$}d.push(_)}else if($.indexOf("//")===0){const _=e.protocol+$;d.push(_)}else d.push($)}}return d}function n(...h){const d=t.getElementsByTagName("meta");for(let g=0;g<d.length;g++){const m=d[g],v=["itemprop","property","name"].map($=>m.getAttribute($)).filter($=>$?h.includes($):!1);if(v.length&&v){const $=m.getAttribute("content");if($)return $}}return""}function i(){let h=n("name","og:site_name","og:title","twitter:title");return h||(h=t.title),h}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,l=r();return{description:a,url:c,icons:l,name:o}}XI=JI.getWindowMetadata=Pte;function am(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Y8(t){return am(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const Q7="2.23.2";let b0={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${Q7}`},Gv=class YS extends Error{constructor(e,r={}){var a;const n=(()=>{var c;return r.cause instanceof YS?r.cause.details:(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),i=r.cause instanceof YS&&r.cause.docsPath||r.docsPath,s=(a=b0.getDocsUrl)==null?void 0:a.call(b0,{...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...b0.version?[`Version: ${b0.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=Q7}walk(e){return Z7(this,e)}};function Z7(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Z7(t.cause,e):e?null:t}let J7=class extends Gv{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}};function Fp(t,{dir:e,size:r=32}={}){return typeof t=="string"?Ote(t,{dir:e,size:r}):kte(t,{dir:e,size:r})}function Ote(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new J7({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function kte(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new J7({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}let Rte=class extends Gv{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}},Dte=class extends Gv{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function zp(t,{size:e}){if(Y8(t)>e)throw new Dte({givenSize:Y8(t),maxSize:e})}function QS(t,e={}){const{signed:r}=e;e.size&&zp(t,{size:e.size});const n=BigInt(t);if(!r)return n;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function Lte(t,e={}){return Number(QS(t,e))}const Bte=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ZS(t,e={}){return typeof t=="number"||typeof t=="bigint"?eR(t,e):typeof t=="string"?Fte(t,e):typeof t=="boolean"?jte(t,e):X7(t,e)}function jte(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(zp(r,{size:e.size}),Fp(r,{size:e.size})):r}function X7(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=Bte[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(zp(n,{size:e.size}),Fp(n,{dir:"right",size:e.size})):n}function eR(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new Rte({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?Fp(a,{size:n}):a}const Ute=new TextEncoder;function Fte(t,e={}){const r=Ute.encode(t);return X7(r,e)}const zte=new TextEncoder;function qte(t,e={}){return typeof t=="number"||typeof t=="bigint"?Hte(t,e):typeof t=="boolean"?Wte(t,e):am(t)?tR(t,e):rR(t,e)}function Wte(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(zp(r,{size:e.size}),Fp(r,{size:e.size})):r}const yc={zero:48,nine:57,A:65,F:70,a:97,f:102};function Q8(t){if(t>=yc.zero&&t<=yc.nine)return t-yc.zero;if(t>=yc.A&&t<=yc.F)return t-(yc.A-10);if(t>=yc.a&&t<=yc.f)return t-(yc.a-10)}function tR(t,e={}){let r=t;e.size&&(zp(r,{size:e.size}),r=Fp(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=Q8(n.charCodeAt(a++)),l=Q8(n.charCodeAt(a++));if(c===void 0||l===void 0)throw new Gv(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);s[o]=c*16+l}return s}function Hte(t,e){const r=eR(t,e);return tR(r)}function rR(t,e={}){const r=zte.encode(t);return typeof e.size=="number"?(zp(r,{size:e.size}),Fp(r,{dir:"right",size:e.size})):r}function Ub(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Kte(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Yv(t,...e){if(!Kte(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function u8e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ub(t.outputLen),Ub(t.blockLen)}function Z8(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Vte(t,e){Yv(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const yw=BigInt(2**32-1),J8=BigInt(32);function Gte(t,e=!1){return e?{h:Number(t&yw),l:Number(t>>J8&yw)}:{h:Number(t>>J8&yw)|0,l:Number(t&yw)|0}}function Yte(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Gte(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const Qte=(t,e,r)=>t<<r|e>>>32-r,Zte=(t,e,r)=>e<<r|t>>>32-r,Jte=(t,e,r)=>e<<r-32|t>>>64-r,Xte=(t,e,r)=>t<<r-32|e>>>64-r,Ed=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ere(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function h8e(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function d8e(t,e){return t<<32-e|t>>>e}const X8=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function tre(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function eC(t){for(let e=0;e<t.length;e++)t[e]=tre(t[e])}function rre(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function nR(t){return typeof t=="string"&&(t=rre(t)),Yv(t),t}function f8e(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Yv(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}let nre=class{clone(){return this._cloneInto()}};function ire(t){const e=n=>t().update(nR(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function g8e(t=32){if(Ed&&typeof Ed.getRandomValues=="function")return Ed.getRandomValues(new Uint8Array(t));if(Ed&&typeof Ed.randomBytes=="function")return Ed.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const iR=[],sR=[],oR=[],sre=BigInt(0),v0=BigInt(1),ore=BigInt(2),are=BigInt(7),cre=BigInt(256),lre=BigInt(113);for(let t=0,e=v0,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],iR.push(2*(5*n+r)),sR.push((t+1)*(t+2)/2%64);let i=sre;for(let s=0;s<7;s++)e=(e<<v0^(e>>are)*lre)%cre,e&ore&&(i^=v0<<(v0<<BigInt(s))-v0);oR.push(i)}const[ure,hre]=Yte(oR,!0),tC=(t,e,r)=>r>32?Jte(t,e,r):Qte(t,e,r),rC=(t,e,r)=>r>32?Xte(t,e,r):Zte(t,e,r);function dre(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],h=tC(l,u,1)^r[a],d=rC(l,u,1)^r[a+1];for(let g=0;g<50;g+=10)t[o+g]^=h,t[o+g+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=sR[o],c=tC(i,s,a),l=rC(i,s,a),u=iR[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=ure[n],t[1]^=hre[n]}r.fill(0)}let fre=class aR extends nre{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ub(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ere(this.state)}keccak(){X8||eC(this.state32),dre(this.state32,this.rounds),X8||eC(this.state32),this.posOut=0,this.pos=0}update(e){Z8(this);const{blockLen:r,state:n}=this;e=nR(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,r&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Z8(this,!1),Yv(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ub(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Vte(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new aR(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const pre=(t,e,r)=>ire(()=>new fre(e,t,r)),gre=pre(1,136,256/8);function cR(t,e){const r=e||"hex",n=gre(am(t,{strict:!1})?qte(t):t);return r==="bytes"?n:ZS(n)}let mre=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const VE=new mre(8192);function yre(t,e){if(VE.has(`${t}.${e}`))return VE.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=cR(rR(r),"bytes"),i=r.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(n[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return VE.set(`${t}.${e}`,s),s}function wre(t){const e=cR(`0x${t.substring(4)}`).substring(26);return yre(`0x${e}`)}async function bre({hash:t,signature:e}){const r=am(t)?t:ZS(t),{secp256k1:n}=await Th(async()=>{const{secp256k1:o}=await import("./secp256k1-D4a0NX7V.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:h,yParity:d}=e,g=Number(d??h),m=nC(g);return new n.Signature(QS(l),QS(u)).addRecoveryBit(m)}const o=am(e)?e:ZS(e),a=Lte(`0x${o.slice(130)}`),c=nC(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function nC(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function vre({hash:t,signature:e}){return wre(await bre({hash:t,signature:e}))}function lR(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Gf(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=lR(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function Ere(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var v=0,$=0,_=0,S=m.length;_!==S&&m[_]===0;)_++,v++;for(var A=(S-_)*u+1>>>0,T=new Uint8Array(A);_!==S;){for(var k=m[_],R=0,L=A-1;(k!==0||R<$)&&L!==-1;L--,R++)k+=256*T[L]>>>0,T[L]=k%a>>>0,k=k/a>>>0;if(k!==0)throw new Error("Non-zero carry");$=R,_++}for(var F=A-$;F!==A&&T[F]===0;)F++;for(var B=c.repeat(v);F<A;++F)B+=t.charAt(T[F]);return B}function d(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var v=0;if(m[v]!==" "){for(var $=0,_=0;m[v]===c;)$++,v++;for(var S=(m.length-v)*l+1>>>0,A=new Uint8Array(S);m[v];){var T=r[m.charCodeAt(v)];if(T===255)return;for(var k=0,R=S-1;(T!==0||k<_)&&R!==-1;R--,k++)T+=a*A[R]>>>0,A[R]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");_=k,v++}if(m[v]!==" "){for(var L=S-_;L!==S&&A[L]===0;)L++;for(var F=new Uint8Array($+(S-L)),B=$;L!==S;)F[B++]=A[L++];return F}}}function g(m){var v=d(m);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:g}}var _re=Ere,Sre=_re;const xre=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Ire=t=>new TextEncoder().encode(t),Are=t=>new TextDecoder().decode(t);class Cre{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Nre{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return uR(this,e)}}class Mre{constructor(e){this.decoders=e}or(e){return uR(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const uR=(t,e)=>new Mre({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Tre{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Cre(e,r,n),this.decoder=new Nre(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Qv=({name:t,prefix:e,encode:r,decode:n})=>new Tre(t,e,r,n),uy=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Sre(r,e);return Qv({prefix:t,name:e,encode:n,decode:s=>xre(i(s))})},$re=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Pre=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Si=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Qv({prefix:e,name:t,encode(i){return Pre(i,n,r)},decode(i){return $re(i,n,r,t)}}),Ore=Qv({prefix:"\0",name:"identity",encode:t=>Are(t),decode:t=>Ire(t)}),kre=Object.freeze(Object.defineProperty({__proto__:null,identity:Ore},Symbol.toStringTag,{value:"Module"})),Rre=Si({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Dre=Object.freeze(Object.defineProperty({__proto__:null,base2:Rre},Symbol.toStringTag,{value:"Module"})),Lre=Si({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Bre=Object.freeze(Object.defineProperty({__proto__:null,base8:Lre},Symbol.toStringTag,{value:"Module"})),jre=uy({prefix:"9",name:"base10",alphabet:"0123456789"}),Ure=Object.freeze(Object.defineProperty({__proto__:null,base10:jre},Symbol.toStringTag,{value:"Module"})),Fre=Si({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),zre=Si({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),qre=Object.freeze(Object.defineProperty({__proto__:null,base16:Fre,base16upper:zre},Symbol.toStringTag,{value:"Module"})),Wre=Si({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Hre=Si({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Kre=Si({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Vre=Si({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Gre=Si({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Yre=Si({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Qre=Si({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Zre=Si({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Jre=Si({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Xre=Object.freeze(Object.defineProperty({__proto__:null,base32:Wre,base32hex:Gre,base32hexpad:Qre,base32hexpadupper:Zre,base32hexupper:Yre,base32pad:Kre,base32padupper:Vre,base32upper:Hre,base32z:Jre},Symbol.toStringTag,{value:"Module"})),ene=uy({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tne=uy({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),rne=Object.freeze(Object.defineProperty({__proto__:null,base36:ene,base36upper:tne},Symbol.toStringTag,{value:"Module"})),nne=uy({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ine=uy({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),sne=Object.freeze(Object.defineProperty({__proto__:null,base58btc:nne,base58flickr:ine},Symbol.toStringTag,{value:"Module"})),one=Si({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ane=Si({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),cne=Si({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),lne=Si({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),une=Object.freeze(Object.defineProperty({__proto__:null,base64:one,base64pad:ane,base64url:cne,base64urlpad:lne},Symbol.toStringTag,{value:"Module"})),hR=Array.from(""),hne=hR.reduce((t,e,r)=>(t[r]=e,t),[]),dne=hR.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function fne(t){return t.reduce((e,r)=>(e+=hne[r],e),"")}function pne(t){const e=[];for(const r of t){const n=dne[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const gne=Qv({prefix:"",name:"base256emoji",encode:fne,decode:pne}),mne=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:gne},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const iC={...kre,...Dre,...Bre,...Ure,...qre,...Xre,...rne,...sne,...une,...mne};function dR(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const sC=dR("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),GE=dR("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=lR(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),fR={utf8:sC,"utf-8":sC,hex:iC.base16,latin1:GE,ascii:GE,binary:GE,...iC};function Kr(t,e="utf8"){const r=fR[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function Kt(t,e="utf8"){const r=fR[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var e5={};const yne="6.6.1",wne={version:yne};var ro={},t5={exports:{}};t5.exports;(function(t){(function(e,r){function n(D,E){if(!D)throw new Error(E||"Assertion failed")}function i(D,E){D.super_=E;var b=function(){};b.prototype=E.prototype,D.prototype=new b,D.prototype.constructor=D}function s(D,E,b){if(s.isBN(D))return D;this.negative=0,this.words=null,this.length=0,this.red=null,D!==null&&((E==="le"||E==="be")&&(b=E,E=10),this._init(D||0,E||10,b||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=uI.Buffer}catch{}s.isBN=function(E){return E instanceof s?!0:E!==null&&typeof E=="object"&&E.constructor.wordSize===s.wordSize&&Array.isArray(E.words)},s.max=function(E,b){return E.cmp(b)>0?E:b},s.min=function(E,b){return E.cmp(b)<0?E:b},s.prototype._init=function(E,b,f){if(typeof E=="number")return this._initNumber(E,b,f);if(typeof E=="object")return this._initArray(E,b,f);b==="hex"&&(b=16),n(b===(b|0)&&b>=2&&b<=36),E=E.toString().replace(/\s+/g,"");var p=0;E[0]==="-"&&(p++,this.negative=1),p<E.length&&(b===16?this._parseHex(E,p,f):(this._parseBase(E,b,p),f==="le"&&this._initArray(this.toArray(),b,f)))},s.prototype._initNumber=function(E,b,f){E<0&&(this.negative=1,E=-E),E<67108864?(this.words=[E&67108863],this.length=1):E<4503599627370496?(this.words=[E&67108863,E/67108864&67108863],this.length=2):(n(E<9007199254740992),this.words=[E&67108863,E/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),b,f)},s.prototype._initArray=function(E,b,f){if(n(typeof E.length=="number"),E.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(E.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w,N,M=0;if(f==="be")for(p=E.length-1,w=0;p>=0;p-=3)N=E[p]|E[p-1]<<8|E[p-2]<<16,this.words[w]|=N<<M&67108863,this.words[w+1]=N>>>26-M&67108863,M+=24,M>=26&&(M-=26,w++);else if(f==="le")for(p=0,w=0;p<E.length;p+=3)N=E[p]|E[p+1]<<8|E[p+2]<<16,this.words[w]|=N<<M&67108863,this.words[w+1]=N>>>26-M&67108863,M+=24,M>=26&&(M-=26,w++);return this.strip()};function a(D,E){var b=D.charCodeAt(E);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function c(D,E,b){var f=a(D,b);return b-1>=E&&(f|=a(D,b-1)<<4),f}s.prototype._parseHex=function(E,b,f){this.length=Math.ceil((E.length-b)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w=0,N=0,M;if(f==="be")for(p=E.length-1;p>=b;p-=2)M=c(E,b,p)<<w,this.words[N]|=M&67108863,w>=18?(w-=18,N+=1,this.words[N]|=M>>>26):w+=8;else{var x=E.length-b;for(p=x%2===0?b+1:b;p<E.length;p+=2)M=c(E,b,p)<<w,this.words[N]|=M&67108863,w>=18?(w-=18,N+=1,this.words[N]|=M>>>26):w+=8}this.strip()};function l(D,E,b,f){for(var p=0,w=Math.min(D.length,b),N=E;N<w;N++){var M=D.charCodeAt(N)-48;p*=f,M>=49?p+=M-49+10:M>=17?p+=M-17+10:p+=M}return p}s.prototype._parseBase=function(E,b,f){this.words=[0],this.length=1;for(var p=0,w=1;w<=67108863;w*=b)p++;p--,w=w/b|0;for(var N=E.length-f,M=N%p,x=Math.min(N,N-M)+f,y=0,C=f;C<x;C+=p)y=l(E,C,C+p,b),this.imuln(w),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y);if(M!==0){var I=1;for(y=l(E,C,E.length,b),C=0;C<M;C++)I*=b;this.imuln(I),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y)}this.strip()},s.prototype.copy=function(E){E.words=new Array(this.length);for(var b=0;b<this.length;b++)E.words[b]=this.words[b];E.length=this.length,E.negative=this.negative,E.red=this.red},s.prototype.clone=function(){var E=new s(null);return this.copy(E),E},s.prototype._expand=function(E){for(;this.length<E;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(E,b){E=E||10,b=b|0||1;var f;if(E===16||E==="hex"){f="";for(var p=0,w=0,N=0;N<this.length;N++){var M=this.words[N],x=((M<<p|w)&16777215).toString(16);w=M>>>24-p&16777215,p+=2,p>=26&&(p-=26,N--),w!==0||N!==this.length-1?f=u[6-x.length]+x+f:f=x+f}for(w!==0&&(f=w.toString(16)+f);f.length%b!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(E===(E|0)&&E>=2&&E<=36){var y=h[E],C=d[E];f="";var I=this.clone();for(I.negative=0;!I.isZero();){var j=I.modn(C).toString(E);I=I.idivn(C),I.isZero()?f=j+f:f=u[y-j.length]+j+f}for(this.isZero()&&(f="0"+f);f.length%b!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var E=this.words[0];return this.length===2?E+=this.words[1]*67108864:this.length===3&&this.words[2]===1?E+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-E:E},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(E,b){return n(typeof o<"u"),this.toArrayLike(o,E,b)},s.prototype.toArray=function(E,b){return this.toArrayLike(Array,E,b)},s.prototype.toArrayLike=function(E,b,f){var p=this.byteLength(),w=f||Math.max(1,p);n(p<=w,"byte array longer than desired length"),n(w>0,"Requested array length <= 0"),this.strip();var N=b==="le",M=new E(w),x,y,C=this.clone();if(N){for(y=0;!C.isZero();y++)x=C.andln(255),C.iushrn(8),M[y]=x;for(;y<w;y++)M[y]=0}else{for(y=0;y<w-p;y++)M[y]=0;for(y=0;!C.isZero();y++)x=C.andln(255),C.iushrn(8),M[w-y-1]=x}return M},Math.clz32?s.prototype._countBits=function(E){return 32-Math.clz32(E)}:s.prototype._countBits=function(E){var b=E,f=0;return b>=4096&&(f+=13,b>>>=13),b>=64&&(f+=7,b>>>=7),b>=8&&(f+=4,b>>>=4),b>=2&&(f+=2,b>>>=2),f+b},s.prototype._zeroBits=function(E){if(E===0)return 26;var b=E,f=0;return b&8191||(f+=13,b>>>=13),b&127||(f+=7,b>>>=7),b&15||(f+=4,b>>>=4),b&3||(f+=2,b>>>=2),b&1||f++,f},s.prototype.bitLength=function(){var E=this.words[this.length-1],b=this._countBits(E);return(this.length-1)*26+b};function g(D){for(var E=new Array(D.bitLength()),b=0;b<E.length;b++){var f=b/26|0,p=b%26;E[b]=(D.words[f]&1<<p)>>>p}return E}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var E=0,b=0;b<this.length;b++){var f=this._zeroBits(this.words[b]);if(E+=f,f!==26)break}return E},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(E){return this.negative!==0?this.abs().inotn(E).iaddn(1):this.clone()},s.prototype.fromTwos=function(E){return this.testn(E-1)?this.notn(E).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(E){for(;this.length<E.length;)this.words[this.length++]=0;for(var b=0;b<E.length;b++)this.words[b]=this.words[b]|E.words[b];return this.strip()},s.prototype.ior=function(E){return n((this.negative|E.negative)===0),this.iuor(E)},s.prototype.or=function(E){return this.length>E.length?this.clone().ior(E):E.clone().ior(this)},s.prototype.uor=function(E){return this.length>E.length?this.clone().iuor(E):E.clone().iuor(this)},s.prototype.iuand=function(E){var b;this.length>E.length?b=E:b=this;for(var f=0;f<b.length;f++)this.words[f]=this.words[f]&E.words[f];return this.length=b.length,this.strip()},s.prototype.iand=function(E){return n((this.negative|E.negative)===0),this.iuand(E)},s.prototype.and=function(E){return this.length>E.length?this.clone().iand(E):E.clone().iand(this)},s.prototype.uand=function(E){return this.length>E.length?this.clone().iuand(E):E.clone().iuand(this)},s.prototype.iuxor=function(E){var b,f;this.length>E.length?(b=this,f=E):(b=E,f=this);for(var p=0;p<f.length;p++)this.words[p]=b.words[p]^f.words[p];if(this!==b)for(;p<b.length;p++)this.words[p]=b.words[p];return this.length=b.length,this.strip()},s.prototype.ixor=function(E){return n((this.negative|E.negative)===0),this.iuxor(E)},s.prototype.xor=function(E){return this.length>E.length?this.clone().ixor(E):E.clone().ixor(this)},s.prototype.uxor=function(E){return this.length>E.length?this.clone().iuxor(E):E.clone().iuxor(this)},s.prototype.inotn=function(E){n(typeof E=="number"&&E>=0);var b=Math.ceil(E/26)|0,f=E%26;this._expand(b),f>0&&b--;for(var p=0;p<b;p++)this.words[p]=~this.words[p]&67108863;return f>0&&(this.words[p]=~this.words[p]&67108863>>26-f),this.strip()},s.prototype.notn=function(E){return this.clone().inotn(E)},s.prototype.setn=function(E,b){n(typeof E=="number"&&E>=0);var f=E/26|0,p=E%26;return this._expand(f+1),b?this.words[f]=this.words[f]|1<<p:this.words[f]=this.words[f]&~(1<<p),this.strip()},s.prototype.iadd=function(E){var b;if(this.negative!==0&&E.negative===0)return this.negative=0,b=this.isub(E),this.negative^=1,this._normSign();if(this.negative===0&&E.negative!==0)return E.negative=0,b=this.isub(E),E.negative=1,b._normSign();var f,p;this.length>E.length?(f=this,p=E):(f=E,p=this);for(var w=0,N=0;N<p.length;N++)b=(f.words[N]|0)+(p.words[N]|0)+w,this.words[N]=b&67108863,w=b>>>26;for(;w!==0&&N<f.length;N++)b=(f.words[N]|0)+w,this.words[N]=b&67108863,w=b>>>26;if(this.length=f.length,w!==0)this.words[this.length]=w,this.length++;else if(f!==this)for(;N<f.length;N++)this.words[N]=f.words[N];return this},s.prototype.add=function(E){var b;return E.negative!==0&&this.negative===0?(E.negative=0,b=this.sub(E),E.negative^=1,b):E.negative===0&&this.negative!==0?(this.negative=0,b=E.sub(this),this.negative=1,b):this.length>E.length?this.clone().iadd(E):E.clone().iadd(this)},s.prototype.isub=function(E){if(E.negative!==0){E.negative=0;var b=this.iadd(E);return E.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(E),this.negative=1,this._normSign();var f=this.cmp(E);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,w;f>0?(p=this,w=E):(p=E,w=this);for(var N=0,M=0;M<w.length;M++)b=(p.words[M]|0)-(w.words[M]|0)+N,N=b>>26,this.words[M]=b&67108863;for(;N!==0&&M<p.length;M++)b=(p.words[M]|0)+N,N=b>>26,this.words[M]=b&67108863;if(N===0&&M<p.length&&p!==this)for(;M<p.length;M++)this.words[M]=p.words[M];return this.length=Math.max(this.length,M),p!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(E){return this.clone().isub(E)};function m(D,E,b){b.negative=E.negative^D.negative;var f=D.length+E.length|0;b.length=f,f=f-1|0;var p=D.words[0]|0,w=E.words[0]|0,N=p*w,M=N&67108863,x=N/67108864|0;b.words[0]=M;for(var y=1;y<f;y++){for(var C=x>>>26,I=x&67108863,j=Math.min(y,E.length-1),K=Math.max(0,y-D.length+1);K<=j;K++){var V=y-K|0;p=D.words[V]|0,w=E.words[K]|0,N=p*w+I,C+=N/67108864|0,I=N&67108863}b.words[y]=I|0,x=C|0}return x!==0?b.words[y]=x|0:b.length--,b.strip()}var v=function(E,b,f){var p=E.words,w=b.words,N=f.words,M=0,x,y,C,I=p[0]|0,j=I&8191,K=I>>>13,V=p[1]|0,te=V&8191,se=V>>>13,ce=p[2]|0,ie=ce&8191,ve=ce>>>13,Me=p[3]|0,Ce=Me&8191,et=Me>>>13,tt=p[4]|0,Fe=tt&8191,Gt=tt>>>13,Lt=p[5]|0,Ye=Lt&8191,Ft=Lt>>>13,Bt=p[6]|0,Be=Bt&8191,ft=Bt>>>13,Nt=p[7]|0,Ve=Nt&8191,mt=Nt>>>13,zt=p[8]|0,U=zt&8191,P=zt>>>13,O=p[9]|0,z=O&8191,G=O>>>13,Z=w[0]|0,ee=Z&8191,Ne=Z>>>13,ze=w[1]|0,Se=ze&8191,We=ze>>>13,De=w[2]|0,He=De&8191,fr=De>>>13,Cr=w[3]|0,rt=Cr&8191,or=Cr>>>13,Yt=w[4]|0,Ze=Yt&8191,ar=Yt>>>13,cr=w[5]|0,Qe=cr&8191,Nr=cr>>>13,Mr=w[6]|0,nt=Mr&8191,Tr=Mr>>>13,$r=w[7]|0,Je=$r&8191,lr=$r>>>13,jt=w[8]|0,it=jt&8191,Pr=jt>>>13,Or=w[9]|0,st=Or&8191,kr=Or>>>13;f.negative=E.negative^b.negative,f.length=19,x=Math.imul(j,ee),y=Math.imul(j,Ne),y=y+Math.imul(K,ee)|0,C=Math.imul(K,Ne);var xt=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(xt>>>26)|0,xt&=67108863,x=Math.imul(te,ee),y=Math.imul(te,Ne),y=y+Math.imul(se,ee)|0,C=Math.imul(se,Ne),x=x+Math.imul(j,Se)|0,y=y+Math.imul(j,We)|0,y=y+Math.imul(K,Se)|0,C=C+Math.imul(K,We)|0;var pr=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(pr>>>26)|0,pr&=67108863,x=Math.imul(ie,ee),y=Math.imul(ie,Ne),y=y+Math.imul(ve,ee)|0,C=Math.imul(ve,Ne),x=x+Math.imul(te,Se)|0,y=y+Math.imul(te,We)|0,y=y+Math.imul(se,Se)|0,C=C+Math.imul(se,We)|0,x=x+Math.imul(j,He)|0,y=y+Math.imul(j,fr)|0,y=y+Math.imul(K,He)|0,C=C+Math.imul(K,fr)|0;var Ja=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(Ja>>>26)|0,Ja&=67108863,x=Math.imul(Ce,ee),y=Math.imul(Ce,Ne),y=y+Math.imul(et,ee)|0,C=Math.imul(et,Ne),x=x+Math.imul(ie,Se)|0,y=y+Math.imul(ie,We)|0,y=y+Math.imul(ve,Se)|0,C=C+Math.imul(ve,We)|0,x=x+Math.imul(te,He)|0,y=y+Math.imul(te,fr)|0,y=y+Math.imul(se,He)|0,C=C+Math.imul(se,fr)|0,x=x+Math.imul(j,rt)|0,y=y+Math.imul(j,or)|0,y=y+Math.imul(K,rt)|0,C=C+Math.imul(K,or)|0;var Xa=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(Xa>>>26)|0,Xa&=67108863,x=Math.imul(Fe,ee),y=Math.imul(Fe,Ne),y=y+Math.imul(Gt,ee)|0,C=Math.imul(Gt,Ne),x=x+Math.imul(Ce,Se)|0,y=y+Math.imul(Ce,We)|0,y=y+Math.imul(et,Se)|0,C=C+Math.imul(et,We)|0,x=x+Math.imul(ie,He)|0,y=y+Math.imul(ie,fr)|0,y=y+Math.imul(ve,He)|0,C=C+Math.imul(ve,fr)|0,x=x+Math.imul(te,rt)|0,y=y+Math.imul(te,or)|0,y=y+Math.imul(se,rt)|0,C=C+Math.imul(se,or)|0,x=x+Math.imul(j,Ze)|0,y=y+Math.imul(j,ar)|0,y=y+Math.imul(K,Ze)|0,C=C+Math.imul(K,ar)|0;var ec=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(ec>>>26)|0,ec&=67108863,x=Math.imul(Ye,ee),y=Math.imul(Ye,Ne),y=y+Math.imul(Ft,ee)|0,C=Math.imul(Ft,Ne),x=x+Math.imul(Fe,Se)|0,y=y+Math.imul(Fe,We)|0,y=y+Math.imul(Gt,Se)|0,C=C+Math.imul(Gt,We)|0,x=x+Math.imul(Ce,He)|0,y=y+Math.imul(Ce,fr)|0,y=y+Math.imul(et,He)|0,C=C+Math.imul(et,fr)|0,x=x+Math.imul(ie,rt)|0,y=y+Math.imul(ie,or)|0,y=y+Math.imul(ve,rt)|0,C=C+Math.imul(ve,or)|0,x=x+Math.imul(te,Ze)|0,y=y+Math.imul(te,ar)|0,y=y+Math.imul(se,Ze)|0,C=C+Math.imul(se,ar)|0,x=x+Math.imul(j,Qe)|0,y=y+Math.imul(j,Nr)|0,y=y+Math.imul(K,Qe)|0,C=C+Math.imul(K,Nr)|0;var tc=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(tc>>>26)|0,tc&=67108863,x=Math.imul(Be,ee),y=Math.imul(Be,Ne),y=y+Math.imul(ft,ee)|0,C=Math.imul(ft,Ne),x=x+Math.imul(Ye,Se)|0,y=y+Math.imul(Ye,We)|0,y=y+Math.imul(Ft,Se)|0,C=C+Math.imul(Ft,We)|0,x=x+Math.imul(Fe,He)|0,y=y+Math.imul(Fe,fr)|0,y=y+Math.imul(Gt,He)|0,C=C+Math.imul(Gt,fr)|0,x=x+Math.imul(Ce,rt)|0,y=y+Math.imul(Ce,or)|0,y=y+Math.imul(et,rt)|0,C=C+Math.imul(et,or)|0,x=x+Math.imul(ie,Ze)|0,y=y+Math.imul(ie,ar)|0,y=y+Math.imul(ve,Ze)|0,C=C+Math.imul(ve,ar)|0,x=x+Math.imul(te,Qe)|0,y=y+Math.imul(te,Nr)|0,y=y+Math.imul(se,Qe)|0,C=C+Math.imul(se,Nr)|0,x=x+Math.imul(j,nt)|0,y=y+Math.imul(j,Tr)|0,y=y+Math.imul(K,nt)|0,C=C+Math.imul(K,Tr)|0;var Vi=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,x=Math.imul(Ve,ee),y=Math.imul(Ve,Ne),y=y+Math.imul(mt,ee)|0,C=Math.imul(mt,Ne),x=x+Math.imul(Be,Se)|0,y=y+Math.imul(Be,We)|0,y=y+Math.imul(ft,Se)|0,C=C+Math.imul(ft,We)|0,x=x+Math.imul(Ye,He)|0,y=y+Math.imul(Ye,fr)|0,y=y+Math.imul(Ft,He)|0,C=C+Math.imul(Ft,fr)|0,x=x+Math.imul(Fe,rt)|0,y=y+Math.imul(Fe,or)|0,y=y+Math.imul(Gt,rt)|0,C=C+Math.imul(Gt,or)|0,x=x+Math.imul(Ce,Ze)|0,y=y+Math.imul(Ce,ar)|0,y=y+Math.imul(et,Ze)|0,C=C+Math.imul(et,ar)|0,x=x+Math.imul(ie,Qe)|0,y=y+Math.imul(ie,Nr)|0,y=y+Math.imul(ve,Qe)|0,C=C+Math.imul(ve,Nr)|0,x=x+Math.imul(te,nt)|0,y=y+Math.imul(te,Tr)|0,y=y+Math.imul(se,nt)|0,C=C+Math.imul(se,Tr)|0,x=x+Math.imul(j,Je)|0,y=y+Math.imul(j,lr)|0,y=y+Math.imul(K,Je)|0,C=C+Math.imul(K,lr)|0;var rc=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(rc>>>26)|0,rc&=67108863,x=Math.imul(U,ee),y=Math.imul(U,Ne),y=y+Math.imul(P,ee)|0,C=Math.imul(P,Ne),x=x+Math.imul(Ve,Se)|0,y=y+Math.imul(Ve,We)|0,y=y+Math.imul(mt,Se)|0,C=C+Math.imul(mt,We)|0,x=x+Math.imul(Be,He)|0,y=y+Math.imul(Be,fr)|0,y=y+Math.imul(ft,He)|0,C=C+Math.imul(ft,fr)|0,x=x+Math.imul(Ye,rt)|0,y=y+Math.imul(Ye,or)|0,y=y+Math.imul(Ft,rt)|0,C=C+Math.imul(Ft,or)|0,x=x+Math.imul(Fe,Ze)|0,y=y+Math.imul(Fe,ar)|0,y=y+Math.imul(Gt,Ze)|0,C=C+Math.imul(Gt,ar)|0,x=x+Math.imul(Ce,Qe)|0,y=y+Math.imul(Ce,Nr)|0,y=y+Math.imul(et,Qe)|0,C=C+Math.imul(et,Nr)|0,x=x+Math.imul(ie,nt)|0,y=y+Math.imul(ie,Tr)|0,y=y+Math.imul(ve,nt)|0,C=C+Math.imul(ve,Tr)|0,x=x+Math.imul(te,Je)|0,y=y+Math.imul(te,lr)|0,y=y+Math.imul(se,Je)|0,C=C+Math.imul(se,lr)|0,x=x+Math.imul(j,it)|0,y=y+Math.imul(j,Pr)|0,y=y+Math.imul(K,it)|0,C=C+Math.imul(K,Pr)|0;var nc=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(nc>>>26)|0,nc&=67108863,x=Math.imul(z,ee),y=Math.imul(z,Ne),y=y+Math.imul(G,ee)|0,C=Math.imul(G,Ne),x=x+Math.imul(U,Se)|0,y=y+Math.imul(U,We)|0,y=y+Math.imul(P,Se)|0,C=C+Math.imul(P,We)|0,x=x+Math.imul(Ve,He)|0,y=y+Math.imul(Ve,fr)|0,y=y+Math.imul(mt,He)|0,C=C+Math.imul(mt,fr)|0,x=x+Math.imul(Be,rt)|0,y=y+Math.imul(Be,or)|0,y=y+Math.imul(ft,rt)|0,C=C+Math.imul(ft,or)|0,x=x+Math.imul(Ye,Ze)|0,y=y+Math.imul(Ye,ar)|0,y=y+Math.imul(Ft,Ze)|0,C=C+Math.imul(Ft,ar)|0,x=x+Math.imul(Fe,Qe)|0,y=y+Math.imul(Fe,Nr)|0,y=y+Math.imul(Gt,Qe)|0,C=C+Math.imul(Gt,Nr)|0,x=x+Math.imul(Ce,nt)|0,y=y+Math.imul(Ce,Tr)|0,y=y+Math.imul(et,nt)|0,C=C+Math.imul(et,Tr)|0,x=x+Math.imul(ie,Je)|0,y=y+Math.imul(ie,lr)|0,y=y+Math.imul(ve,Je)|0,C=C+Math.imul(ve,lr)|0,x=x+Math.imul(te,it)|0,y=y+Math.imul(te,Pr)|0,y=y+Math.imul(se,it)|0,C=C+Math.imul(se,Pr)|0,x=x+Math.imul(j,st)|0,y=y+Math.imul(j,kr)|0,y=y+Math.imul(K,st)|0,C=C+Math.imul(K,kr)|0;var ic=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(ic>>>26)|0,ic&=67108863,x=Math.imul(z,Se),y=Math.imul(z,We),y=y+Math.imul(G,Se)|0,C=Math.imul(G,We),x=x+Math.imul(U,He)|0,y=y+Math.imul(U,fr)|0,y=y+Math.imul(P,He)|0,C=C+Math.imul(P,fr)|0,x=x+Math.imul(Ve,rt)|0,y=y+Math.imul(Ve,or)|0,y=y+Math.imul(mt,rt)|0,C=C+Math.imul(mt,or)|0,x=x+Math.imul(Be,Ze)|0,y=y+Math.imul(Be,ar)|0,y=y+Math.imul(ft,Ze)|0,C=C+Math.imul(ft,ar)|0,x=x+Math.imul(Ye,Qe)|0,y=y+Math.imul(Ye,Nr)|0,y=y+Math.imul(Ft,Qe)|0,C=C+Math.imul(Ft,Nr)|0,x=x+Math.imul(Fe,nt)|0,y=y+Math.imul(Fe,Tr)|0,y=y+Math.imul(Gt,nt)|0,C=C+Math.imul(Gt,Tr)|0,x=x+Math.imul(Ce,Je)|0,y=y+Math.imul(Ce,lr)|0,y=y+Math.imul(et,Je)|0,C=C+Math.imul(et,lr)|0,x=x+Math.imul(ie,it)|0,y=y+Math.imul(ie,Pr)|0,y=y+Math.imul(ve,it)|0,C=C+Math.imul(ve,Pr)|0,x=x+Math.imul(te,st)|0,y=y+Math.imul(te,kr)|0,y=y+Math.imul(se,st)|0,C=C+Math.imul(se,kr)|0;var sc=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(sc>>>26)|0,sc&=67108863,x=Math.imul(z,He),y=Math.imul(z,fr),y=y+Math.imul(G,He)|0,C=Math.imul(G,fr),x=x+Math.imul(U,rt)|0,y=y+Math.imul(U,or)|0,y=y+Math.imul(P,rt)|0,C=C+Math.imul(P,or)|0,x=x+Math.imul(Ve,Ze)|0,y=y+Math.imul(Ve,ar)|0,y=y+Math.imul(mt,Ze)|0,C=C+Math.imul(mt,ar)|0,x=x+Math.imul(Be,Qe)|0,y=y+Math.imul(Be,Nr)|0,y=y+Math.imul(ft,Qe)|0,C=C+Math.imul(ft,Nr)|0,x=x+Math.imul(Ye,nt)|0,y=y+Math.imul(Ye,Tr)|0,y=y+Math.imul(Ft,nt)|0,C=C+Math.imul(Ft,Tr)|0,x=x+Math.imul(Fe,Je)|0,y=y+Math.imul(Fe,lr)|0,y=y+Math.imul(Gt,Je)|0,C=C+Math.imul(Gt,lr)|0,x=x+Math.imul(Ce,it)|0,y=y+Math.imul(Ce,Pr)|0,y=y+Math.imul(et,it)|0,C=C+Math.imul(et,Pr)|0,x=x+Math.imul(ie,st)|0,y=y+Math.imul(ie,kr)|0,y=y+Math.imul(ve,st)|0,C=C+Math.imul(ve,kr)|0;var oc=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(oc>>>26)|0,oc&=67108863,x=Math.imul(z,rt),y=Math.imul(z,or),y=y+Math.imul(G,rt)|0,C=Math.imul(G,or),x=x+Math.imul(U,Ze)|0,y=y+Math.imul(U,ar)|0,y=y+Math.imul(P,Ze)|0,C=C+Math.imul(P,ar)|0,x=x+Math.imul(Ve,Qe)|0,y=y+Math.imul(Ve,Nr)|0,y=y+Math.imul(mt,Qe)|0,C=C+Math.imul(mt,Nr)|0,x=x+Math.imul(Be,nt)|0,y=y+Math.imul(Be,Tr)|0,y=y+Math.imul(ft,nt)|0,C=C+Math.imul(ft,Tr)|0,x=x+Math.imul(Ye,Je)|0,y=y+Math.imul(Ye,lr)|0,y=y+Math.imul(Ft,Je)|0,C=C+Math.imul(Ft,lr)|0,x=x+Math.imul(Fe,it)|0,y=y+Math.imul(Fe,Pr)|0,y=y+Math.imul(Gt,it)|0,C=C+Math.imul(Gt,Pr)|0,x=x+Math.imul(Ce,st)|0,y=y+Math.imul(Ce,kr)|0,y=y+Math.imul(et,st)|0,C=C+Math.imul(et,kr)|0;var so=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(so>>>26)|0,so&=67108863,x=Math.imul(z,Ze),y=Math.imul(z,ar),y=y+Math.imul(G,Ze)|0,C=Math.imul(G,ar),x=x+Math.imul(U,Qe)|0,y=y+Math.imul(U,Nr)|0,y=y+Math.imul(P,Qe)|0,C=C+Math.imul(P,Nr)|0,x=x+Math.imul(Ve,nt)|0,y=y+Math.imul(Ve,Tr)|0,y=y+Math.imul(mt,nt)|0,C=C+Math.imul(mt,Tr)|0,x=x+Math.imul(Be,Je)|0,y=y+Math.imul(Be,lr)|0,y=y+Math.imul(ft,Je)|0,C=C+Math.imul(ft,lr)|0,x=x+Math.imul(Ye,it)|0,y=y+Math.imul(Ye,Pr)|0,y=y+Math.imul(Ft,it)|0,C=C+Math.imul(Ft,Pr)|0,x=x+Math.imul(Fe,st)|0,y=y+Math.imul(Fe,kr)|0,y=y+Math.imul(Gt,st)|0,C=C+Math.imul(Gt,kr)|0;var ac=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(ac>>>26)|0,ac&=67108863,x=Math.imul(z,Qe),y=Math.imul(z,Nr),y=y+Math.imul(G,Qe)|0,C=Math.imul(G,Nr),x=x+Math.imul(U,nt)|0,y=y+Math.imul(U,Tr)|0,y=y+Math.imul(P,nt)|0,C=C+Math.imul(P,Tr)|0,x=x+Math.imul(Ve,Je)|0,y=y+Math.imul(Ve,lr)|0,y=y+Math.imul(mt,Je)|0,C=C+Math.imul(mt,lr)|0,x=x+Math.imul(Be,it)|0,y=y+Math.imul(Be,Pr)|0,y=y+Math.imul(ft,it)|0,C=C+Math.imul(ft,Pr)|0,x=x+Math.imul(Ye,st)|0,y=y+Math.imul(Ye,kr)|0,y=y+Math.imul(Ft,st)|0,C=C+Math.imul(Ft,kr)|0;var cc=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(cc>>>26)|0,cc&=67108863,x=Math.imul(z,nt),y=Math.imul(z,Tr),y=y+Math.imul(G,nt)|0,C=Math.imul(G,Tr),x=x+Math.imul(U,Je)|0,y=y+Math.imul(U,lr)|0,y=y+Math.imul(P,Je)|0,C=C+Math.imul(P,lr)|0,x=x+Math.imul(Ve,it)|0,y=y+Math.imul(Ve,Pr)|0,y=y+Math.imul(mt,it)|0,C=C+Math.imul(mt,Pr)|0,x=x+Math.imul(Be,st)|0,y=y+Math.imul(Be,kr)|0,y=y+Math.imul(ft,st)|0,C=C+Math.imul(ft,kr)|0;var Ci=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,x=Math.imul(z,Je),y=Math.imul(z,lr),y=y+Math.imul(G,Je)|0,C=Math.imul(G,lr),x=x+Math.imul(U,it)|0,y=y+Math.imul(U,Pr)|0,y=y+Math.imul(P,it)|0,C=C+Math.imul(P,Pr)|0,x=x+Math.imul(Ve,st)|0,y=y+Math.imul(Ve,kr)|0,y=y+Math.imul(mt,st)|0,C=C+Math.imul(mt,kr)|0;var lc=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(lc>>>26)|0,lc&=67108863,x=Math.imul(z,it),y=Math.imul(z,Pr),y=y+Math.imul(G,it)|0,C=Math.imul(G,Pr),x=x+Math.imul(U,st)|0,y=y+Math.imul(U,kr)|0,y=y+Math.imul(P,st)|0,C=C+Math.imul(P,kr)|0;var uc=(M+x|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(uc>>>26)|0,uc&=67108863,x=Math.imul(z,st),y=Math.imul(z,kr),y=y+Math.imul(G,st)|0,C=Math.imul(G,kr);var hc=(M+x|0)+((y&8191)<<13)|0;return M=(C+(y>>>13)|0)+(hc>>>26)|0,hc&=67108863,N[0]=xt,N[1]=pr,N[2]=Ja,N[3]=Xa,N[4]=ec,N[5]=tc,N[6]=Vi,N[7]=rc,N[8]=nc,N[9]=ic,N[10]=sc,N[11]=oc,N[12]=so,N[13]=ac,N[14]=cc,N[15]=Ci,N[16]=lc,N[17]=uc,N[18]=hc,M!==0&&(N[19]=M,f.length++),f};Math.imul||(v=m);function $(D,E,b){b.negative=E.negative^D.negative,b.length=D.length+E.length;for(var f=0,p=0,w=0;w<b.length-1;w++){var N=p;p=0;for(var M=f&67108863,x=Math.min(w,E.length-1),y=Math.max(0,w-D.length+1);y<=x;y++){var C=w-y,I=D.words[C]|0,j=E.words[y]|0,K=I*j,V=K&67108863;N=N+(K/67108864|0)|0,V=V+M|0,M=V&67108863,N=N+(V>>>26)|0,p+=N>>>26,N&=67108863}b.words[w]=M,f=N,N=p}return f!==0?b.words[w]=f:b.length--,b.strip()}function _(D,E,b){var f=new S;return f.mulp(D,E,b)}s.prototype.mulTo=function(E,b){var f,p=this.length+E.length;return this.length===10&&E.length===10?f=v(this,E,b):p<63?f=m(this,E,b):p<1024?f=$(this,E,b):f=_(this,E,b),f};function S(D,E){this.x=D,this.y=E}S.prototype.makeRBT=function(E){for(var b=new Array(E),f=s.prototype._countBits(E)-1,p=0;p<E;p++)b[p]=this.revBin(p,f,E);return b},S.prototype.revBin=function(E,b,f){if(E===0||E===f-1)return E;for(var p=0,w=0;w<b;w++)p|=(E&1)<<b-w-1,E>>=1;return p},S.prototype.permute=function(E,b,f,p,w,N){for(var M=0;M<N;M++)p[M]=b[E[M]],w[M]=f[E[M]]},S.prototype.transform=function(E,b,f,p,w,N){this.permute(N,E,b,f,p,w);for(var M=1;M<w;M<<=1)for(var x=M<<1,y=Math.cos(2*Math.PI/x),C=Math.sin(2*Math.PI/x),I=0;I<w;I+=x)for(var j=y,K=C,V=0;V<M;V++){var te=f[I+V],se=p[I+V],ce=f[I+V+M],ie=p[I+V+M],ve=j*ce-K*ie;ie=j*ie+K*ce,ce=ve,f[I+V]=te+ce,p[I+V]=se+ie,f[I+V+M]=te-ce,p[I+V+M]=se-ie,V!==x&&(ve=y*j-C*K,K=y*K+C*j,j=ve)}},S.prototype.guessLen13b=function(E,b){var f=Math.max(b,E)|1,p=f&1,w=0;for(f=f/2|0;f;f=f>>>1)w++;return 1<<w+1+p},S.prototype.conjugate=function(E,b,f){if(!(f<=1))for(var p=0;p<f/2;p++){var w=E[p];E[p]=E[f-p-1],E[f-p-1]=w,w=b[p],b[p]=-b[f-p-1],b[f-p-1]=-w}},S.prototype.normalize13b=function(E,b){for(var f=0,p=0;p<b/2;p++){var w=Math.round(E[2*p+1]/b)*8192+Math.round(E[2*p]/b)+f;E[p]=w&67108863,w<67108864?f=0:f=w/67108864|0}return E},S.prototype.convert13b=function(E,b,f,p){for(var w=0,N=0;N<b;N++)w=w+(E[N]|0),f[2*N]=w&8191,w=w>>>13,f[2*N+1]=w&8191,w=w>>>13;for(N=2*b;N<p;++N)f[N]=0;n(w===0),n((w&-8192)===0)},S.prototype.stub=function(E){for(var b=new Array(E),f=0;f<E;f++)b[f]=0;return b},S.prototype.mulp=function(E,b,f){var p=2*this.guessLen13b(E.length,b.length),w=this.makeRBT(p),N=this.stub(p),M=new Array(p),x=new Array(p),y=new Array(p),C=new Array(p),I=new Array(p),j=new Array(p),K=f.words;K.length=p,this.convert13b(E.words,E.length,M,p),this.convert13b(b.words,b.length,C,p),this.transform(M,N,x,y,p,w),this.transform(C,N,I,j,p,w);for(var V=0;V<p;V++){var te=x[V]*I[V]-y[V]*j[V];y[V]=x[V]*j[V]+y[V]*I[V],x[V]=te}return this.conjugate(x,y,p),this.transform(x,y,K,N,p,w),this.conjugate(K,N,p),this.normalize13b(K,p),f.negative=E.negative^b.negative,f.length=E.length+b.length,f.strip()},s.prototype.mul=function(E){var b=new s(null);return b.words=new Array(this.length+E.length),this.mulTo(E,b)},s.prototype.mulf=function(E){var b=new s(null);return b.words=new Array(this.length+E.length),_(this,E,b)},s.prototype.imul=function(E){return this.clone().mulTo(E,this)},s.prototype.imuln=function(E){n(typeof E=="number"),n(E<67108864);for(var b=0,f=0;f<this.length;f++){var p=(this.words[f]|0)*E,w=(p&67108863)+(b&67108863);b>>=26,b+=p/67108864|0,b+=w>>>26,this.words[f]=w&67108863}return b!==0&&(this.words[f]=b,this.length++),this.length=E===0?1:this.length,this},s.prototype.muln=function(E){return this.clone().imuln(E)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(E){var b=g(E);if(b.length===0)return new s(1);for(var f=this,p=0;p<b.length&&b[p]===0;p++,f=f.sqr());if(++p<b.length)for(var w=f.sqr();p<b.length;p++,w=w.sqr())b[p]!==0&&(f=f.mul(w));return f},s.prototype.iushln=function(E){n(typeof E=="number"&&E>=0);var b=E%26,f=(E-b)/26,p=67108863>>>26-b<<26-b,w;if(b!==0){var N=0;for(w=0;w<this.length;w++){var M=this.words[w]&p,x=(this.words[w]|0)-M<<b;this.words[w]=x|N,N=M>>>26-b}N&&(this.words[w]=N,this.length++)}if(f!==0){for(w=this.length-1;w>=0;w--)this.words[w+f]=this.words[w];for(w=0;w<f;w++)this.words[w]=0;this.length+=f}return this.strip()},s.prototype.ishln=function(E){return n(this.negative===0),this.iushln(E)},s.prototype.iushrn=function(E,b,f){n(typeof E=="number"&&E>=0);var p;b?p=(b-b%26)/26:p=0;var w=E%26,N=Math.min((E-w)/26,this.length),M=67108863^67108863>>>w<<w,x=f;if(p-=N,p=Math.max(0,p),x){for(var y=0;y<N;y++)x.words[y]=this.words[y];x.length=N}if(N!==0)if(this.length>N)for(this.length-=N,y=0;y<this.length;y++)this.words[y]=this.words[y+N];else this.words[0]=0,this.length=1;var C=0;for(y=this.length-1;y>=0&&(C!==0||y>=p);y--){var I=this.words[y]|0;this.words[y]=C<<26-w|I>>>w,C=I&M}return x&&C!==0&&(x.words[x.length++]=C),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(E,b,f){return n(this.negative===0),this.iushrn(E,b,f)},s.prototype.shln=function(E){return this.clone().ishln(E)},s.prototype.ushln=function(E){return this.clone().iushln(E)},s.prototype.shrn=function(E){return this.clone().ishrn(E)},s.prototype.ushrn=function(E){return this.clone().iushrn(E)},s.prototype.testn=function(E){n(typeof E=="number"&&E>=0);var b=E%26,f=(E-b)/26,p=1<<b;if(this.length<=f)return!1;var w=this.words[f];return!!(w&p)},s.prototype.imaskn=function(E){n(typeof E=="number"&&E>=0);var b=E%26,f=(E-b)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(b!==0&&f++,this.length=Math.min(f,this.length),b!==0){var p=67108863^67108863>>>b<<b;this.words[this.length-1]&=p}return this.strip()},s.prototype.maskn=function(E){return this.clone().imaskn(E)},s.prototype.iaddn=function(E){return n(typeof E=="number"),n(E<67108864),E<0?this.isubn(-E):this.negative!==0?this.length===1&&(this.words[0]|0)<E?(this.words[0]=E-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(E),this.negative=1,this):this._iaddn(E)},s.prototype._iaddn=function(E){this.words[0]+=E;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},s.prototype.isubn=function(E){if(n(typeof E=="number"),n(E<67108864),E<0)return this.iaddn(-E);if(this.negative!==0)return this.negative=0,this.iaddn(E),this.negative=1,this;if(this.words[0]-=E,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},s.prototype.addn=function(E){return this.clone().iaddn(E)},s.prototype.subn=function(E){return this.clone().isubn(E)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(E,b,f){var p=E.length+f,w;this._expand(p);var N,M=0;for(w=0;w<E.length;w++){N=(this.words[w+f]|0)+M;var x=(E.words[w]|0)*b;N-=x&67108863,M=(N>>26)-(x/67108864|0),this.words[w+f]=N&67108863}for(;w<this.length-f;w++)N=(this.words[w+f]|0)+M,M=N>>26,this.words[w+f]=N&67108863;if(M===0)return this.strip();for(n(M===-1),M=0,w=0;w<this.length;w++)N=-(this.words[w]|0)+M,M=N>>26,this.words[w]=N&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(E,b){var f=this.length-E.length,p=this.clone(),w=E,N=w.words[w.length-1]|0,M=this._countBits(N);f=26-M,f!==0&&(w=w.ushln(f),p.iushln(f),N=w.words[w.length-1]|0);var x=p.length-w.length,y;if(b!=="mod"){y=new s(null),y.length=x+1,y.words=new Array(y.length);for(var C=0;C<y.length;C++)y.words[C]=0}var I=p.clone()._ishlnsubmul(w,1,x);I.negative===0&&(p=I,y&&(y.words[x]=1));for(var j=x-1;j>=0;j--){var K=(p.words[w.length+j]|0)*67108864+(p.words[w.length+j-1]|0);for(K=Math.min(K/N|0,67108863),p._ishlnsubmul(w,K,j);p.negative!==0;)K--,p.negative=0,p._ishlnsubmul(w,1,j),p.isZero()||(p.negative^=1);y&&(y.words[j]=K)}return y&&y.strip(),p.strip(),b!=="div"&&f!==0&&p.iushrn(f),{div:y||null,mod:p}},s.prototype.divmod=function(E,b,f){if(n(!E.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var p,w,N;return this.negative!==0&&E.negative===0?(N=this.neg().divmod(E,b),b!=="mod"&&(p=N.div.neg()),b!=="div"&&(w=N.mod.neg(),f&&w.negative!==0&&w.iadd(E)),{div:p,mod:w}):this.negative===0&&E.negative!==0?(N=this.divmod(E.neg(),b),b!=="mod"&&(p=N.div.neg()),{div:p,mod:N.mod}):this.negative&E.negative?(N=this.neg().divmod(E.neg(),b),b!=="div"&&(w=N.mod.neg(),f&&w.negative!==0&&w.isub(E)),{div:N.div,mod:w}):E.length>this.length||this.cmp(E)<0?{div:new s(0),mod:this}:E.length===1?b==="div"?{div:this.divn(E.words[0]),mod:null}:b==="mod"?{div:null,mod:new s(this.modn(E.words[0]))}:{div:this.divn(E.words[0]),mod:new s(this.modn(E.words[0]))}:this._wordDiv(E,b)},s.prototype.div=function(E){return this.divmod(E,"div",!1).div},s.prototype.mod=function(E){return this.divmod(E,"mod",!1).mod},s.prototype.umod=function(E){return this.divmod(E,"mod",!0).mod},s.prototype.divRound=function(E){var b=this.divmod(E);if(b.mod.isZero())return b.div;var f=b.div.negative!==0?b.mod.isub(E):b.mod,p=E.ushrn(1),w=E.andln(1),N=f.cmp(p);return N<0||w===1&&N===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},s.prototype.modn=function(E){n(E<=67108863);for(var b=(1<<26)%E,f=0,p=this.length-1;p>=0;p--)f=(b*f+(this.words[p]|0))%E;return f},s.prototype.idivn=function(E){n(E<=67108863);for(var b=0,f=this.length-1;f>=0;f--){var p=(this.words[f]|0)+b*67108864;this.words[f]=p/E|0,b=p%E}return this.strip()},s.prototype.divn=function(E){return this.clone().idivn(E)},s.prototype.egcd=function(E){n(E.negative===0),n(!E.isZero());var b=this,f=E.clone();b.negative!==0?b=b.umod(E):b=b.clone();for(var p=new s(1),w=new s(0),N=new s(0),M=new s(1),x=0;b.isEven()&&f.isEven();)b.iushrn(1),f.iushrn(1),++x;for(var y=f.clone(),C=b.clone();!b.isZero();){for(var I=0,j=1;!(b.words[0]&j)&&I<26;++I,j<<=1);if(I>0)for(b.iushrn(I);I-- >0;)(p.isOdd()||w.isOdd())&&(p.iadd(y),w.isub(C)),p.iushrn(1),w.iushrn(1);for(var K=0,V=1;!(f.words[0]&V)&&K<26;++K,V<<=1);if(K>0)for(f.iushrn(K);K-- >0;)(N.isOdd()||M.isOdd())&&(N.iadd(y),M.isub(C)),N.iushrn(1),M.iushrn(1);b.cmp(f)>=0?(b.isub(f),p.isub(N),w.isub(M)):(f.isub(b),N.isub(p),M.isub(w))}return{a:N,b:M,gcd:f.iushln(x)}},s.prototype._invmp=function(E){n(E.negative===0),n(!E.isZero());var b=this,f=E.clone();b.negative!==0?b=b.umod(E):b=b.clone();for(var p=new s(1),w=new s(0),N=f.clone();b.cmpn(1)>0&&f.cmpn(1)>0;){for(var M=0,x=1;!(b.words[0]&x)&&M<26;++M,x<<=1);if(M>0)for(b.iushrn(M);M-- >0;)p.isOdd()&&p.iadd(N),p.iushrn(1);for(var y=0,C=1;!(f.words[0]&C)&&y<26;++y,C<<=1);if(y>0)for(f.iushrn(y);y-- >0;)w.isOdd()&&w.iadd(N),w.iushrn(1);b.cmp(f)>=0?(b.isub(f),p.isub(w)):(f.isub(b),w.isub(p))}var I;return b.cmpn(1)===0?I=p:I=w,I.cmpn(0)<0&&I.iadd(E),I},s.prototype.gcd=function(E){if(this.isZero())return E.abs();if(E.isZero())return this.abs();var b=this.clone(),f=E.clone();b.negative=0,f.negative=0;for(var p=0;b.isEven()&&f.isEven();p++)b.iushrn(1),f.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;f.isEven();)f.iushrn(1);var w=b.cmp(f);if(w<0){var N=b;b=f,f=N}else if(w===0||f.cmpn(1)===0)break;b.isub(f)}while(!0);return f.iushln(p)},s.prototype.invm=function(E){return this.egcd(E).a.umod(E)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(E){return this.words[0]&E},s.prototype.bincn=function(E){n(typeof E=="number");var b=E%26,f=(E-b)/26,p=1<<b;if(this.length<=f)return this._expand(f+1),this.words[f]|=p,this;for(var w=p,N=f;w!==0&&N<this.length;N++){var M=this.words[N]|0;M+=w,w=M>>>26,M&=67108863,this.words[N]=M}return w!==0&&(this.words[N]=w,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(E){var b=E<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var f;if(this.length>1)f=1;else{b&&(E=-E),n(E<=67108863,"Number is too big");var p=this.words[0]|0;f=p===E?0:p<E?-1:1}return this.negative!==0?-f|0:f},s.prototype.cmp=function(E){if(this.negative!==0&&E.negative===0)return-1;if(this.negative===0&&E.negative!==0)return 1;var b=this.ucmp(E);return this.negative!==0?-b|0:b},s.prototype.ucmp=function(E){if(this.length>E.length)return 1;if(this.length<E.length)return-1;for(var b=0,f=this.length-1;f>=0;f--){var p=this.words[f]|0,w=E.words[f]|0;if(p!==w){p<w?b=-1:p>w&&(b=1);break}}return b},s.prototype.gtn=function(E){return this.cmpn(E)===1},s.prototype.gt=function(E){return this.cmp(E)===1},s.prototype.gten=function(E){return this.cmpn(E)>=0},s.prototype.gte=function(E){return this.cmp(E)>=0},s.prototype.ltn=function(E){return this.cmpn(E)===-1},s.prototype.lt=function(E){return this.cmp(E)===-1},s.prototype.lten=function(E){return this.cmpn(E)<=0},s.prototype.lte=function(E){return this.cmp(E)<=0},s.prototype.eqn=function(E){return this.cmpn(E)===0},s.prototype.eq=function(E){return this.cmp(E)===0},s.red=function(E){return new B(E)},s.prototype.toRed=function(E){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),E.convertTo(this)._forceRed(E)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(E){return this.red=E,this},s.prototype.forceRed=function(E){return n(!this.red,"Already a number in reduction context"),this._forceRed(E)},s.prototype.redAdd=function(E){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,E)},s.prototype.redIAdd=function(E){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,E)},s.prototype.redSub=function(E){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,E)},s.prototype.redISub=function(E){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,E)},s.prototype.redShl=function(E){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,E)},s.prototype.redMul=function(E){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.mul(this,E)},s.prototype.redIMul=function(E){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.imul(this,E)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(E){return n(this.red&&!E.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,E)};var A={k256:null,p224:null,p192:null,p25519:null};function T(D,E){this.name=D,this.p=new s(E,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}T.prototype._tmp=function(){var E=new s(null);return E.words=new Array(Math.ceil(this.n/13)),E},T.prototype.ireduce=function(E){var b=E,f;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),f=b.bitLength();while(f>this.n);var p=f<this.n?-1:b.ucmp(this.p);return p===0?(b.words[0]=0,b.length=1):p>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},T.prototype.split=function(E,b){E.iushrn(this.n,0,b)},T.prototype.imulK=function(E){return E.imul(this.k)};function k(){T.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(k,T),k.prototype.split=function(E,b){for(var f=4194303,p=Math.min(E.length,9),w=0;w<p;w++)b.words[w]=E.words[w];if(b.length=p,E.length<=9){E.words[0]=0,E.length=1;return}var N=E.words[9];for(b.words[b.length++]=N&f,w=10;w<E.length;w++){var M=E.words[w]|0;E.words[w-10]=(M&f)<<4|N>>>22,N=M}N>>>=22,E.words[w-10]=N,N===0&&E.length>10?E.length-=10:E.length-=9},k.prototype.imulK=function(E){E.words[E.length]=0,E.words[E.length+1]=0,E.length+=2;for(var b=0,f=0;f<E.length;f++){var p=E.words[f]|0;b+=p*977,E.words[f]=b&67108863,b=p*64+(b/67108864|0)}return E.words[E.length-1]===0&&(E.length--,E.words[E.length-1]===0&&E.length--),E};function R(){T.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(R,T);function L(){T.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(L,T);function F(){T.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(F,T),F.prototype.imulK=function(E){for(var b=0,f=0;f<E.length;f++){var p=(E.words[f]|0)*19+b,w=p&67108863;p>>>=26,E.words[f]=w,b=p}return b!==0&&(E.words[E.length++]=b),E},s._prime=function(E){if(A[E])return A[E];var b;if(E==="k256")b=new k;else if(E==="p224")b=new R;else if(E==="p192")b=new L;else if(E==="p25519")b=new F;else throw new Error("Unknown prime "+E);return A[E]=b,b};function B(D){if(typeof D=="string"){var E=s._prime(D);this.m=E.p,this.prime=E}else n(D.gtn(1),"modulus must be greater than 1"),this.m=D,this.prime=null}B.prototype._verify1=function(E){n(E.negative===0,"red works only with positives"),n(E.red,"red works only with red numbers")},B.prototype._verify2=function(E,b){n((E.negative|b.negative)===0,"red works only with positives"),n(E.red&&E.red===b.red,"red works only with red numbers")},B.prototype.imod=function(E){return this.prime?this.prime.ireduce(E)._forceRed(this):E.umod(this.m)._forceRed(this)},B.prototype.neg=function(E){return E.isZero()?E.clone():this.m.sub(E)._forceRed(this)},B.prototype.add=function(E,b){this._verify2(E,b);var f=E.add(b);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},B.prototype.iadd=function(E,b){this._verify2(E,b);var f=E.iadd(b);return f.cmp(this.m)>=0&&f.isub(this.m),f},B.prototype.sub=function(E,b){this._verify2(E,b);var f=E.sub(b);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},B.prototype.isub=function(E,b){this._verify2(E,b);var f=E.isub(b);return f.cmpn(0)<0&&f.iadd(this.m),f},B.prototype.shl=function(E,b){return this._verify1(E),this.imod(E.ushln(b))},B.prototype.imul=function(E,b){return this._verify2(E,b),this.imod(E.imul(b))},B.prototype.mul=function(E,b){return this._verify2(E,b),this.imod(E.mul(b))},B.prototype.isqr=function(E){return this.imul(E,E.clone())},B.prototype.sqr=function(E){return this.mul(E,E)},B.prototype.sqrt=function(E){if(E.isZero())return E.clone();var b=this.m.andln(3);if(n(b%2===1),b===3){var f=this.m.add(new s(1)).iushrn(2);return this.pow(E,f)}for(var p=this.m.subn(1),w=0;!p.isZero()&&p.andln(1)===0;)w++,p.iushrn(1);n(!p.isZero());var N=new s(1).toRed(this),M=N.redNeg(),x=this.m.subn(1).iushrn(1),y=this.m.bitLength();for(y=new s(2*y*y).toRed(this);this.pow(y,x).cmp(M)!==0;)y.redIAdd(M);for(var C=this.pow(y,p),I=this.pow(E,p.addn(1).iushrn(1)),j=this.pow(E,p),K=w;j.cmp(N)!==0;){for(var V=j,te=0;V.cmp(N)!==0;te++)V=V.redSqr();n(te<K);var se=this.pow(C,new s(1).iushln(K-te-1));I=I.redMul(se),C=se.redSqr(),j=j.redMul(C),K=te}return I},B.prototype.invm=function(E){var b=E._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},B.prototype.pow=function(E,b){if(b.isZero())return new s(1).toRed(this);if(b.cmpn(1)===0)return E.clone();var f=4,p=new Array(1<<f);p[0]=new s(1).toRed(this),p[1]=E;for(var w=2;w<p.length;w++)p[w]=this.mul(p[w-1],E);var N=p[0],M=0,x=0,y=b.bitLength()%26;for(y===0&&(y=26),w=b.length-1;w>=0;w--){for(var C=b.words[w],I=y-1;I>=0;I--){var j=C>>I&1;if(N!==p[0]&&(N=this.sqr(N)),j===0&&M===0){x=0;continue}M<<=1,M|=j,x++,!(x!==f&&(w!==0||I!==0))&&(N=this.mul(N,p[M]),x=0,M=0)}y=26}return N},B.prototype.convertTo=function(E){var b=E.umod(this.m);return b===E?b.clone():b},B.prototype.convertFrom=function(E){var b=E.clone();return b.red=null,b},s.mont=function(E){return new q(E)};function q(D){B.call(this,D),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(q,B),q.prototype.convertTo=function(E){return this.imod(E.ushln(this.shift))},q.prototype.convertFrom=function(E){var b=this.imod(E.mul(this.rinv));return b.red=null,b},q.prototype.imul=function(E,b){if(E.isZero()||b.isZero())return E.words[0]=0,E.length=1,E;var f=E.imul(b),p=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=f.isub(p).iushrn(this.shift),N=w;return w.cmp(this.m)>=0?N=w.isub(this.m):w.cmpn(0)<0&&(N=w.iadd(this.m)),N._forceRed(this)},q.prototype.mul=function(E,b){if(E.isZero()||b.isZero())return new s(0)._forceRed(this);var f=E.mul(b),p=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=f.isub(p).iushrn(this.shift),N=w;return w.cmp(this.m)>=0?N=w.isub(this.m):w.cmpn(0)<0&&(N=w.iadd(this.m)),N._forceRed(this)},q.prototype.invm=function(E){var b=this.imod(E._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(t,Sr)})(t5);var sl=t5.exports,Xh=pR;function pR(t,e){if(!t)throw new Error(e||"Assertion failed")}pR.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var r5={};(function(t){var e=t;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if(typeof s!="string"){for(var c=0;c<s.length;c++)a[c]=s[c]|0;return a}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var c=0;c<s.length;c+=2)a.push(parseInt(s[c]+s[c+1],16))}else for(var c=0;c<s.length;c++){var l=s.charCodeAt(c),u=l>>8,h=l&255;u?a.push(u,h):a.push(h)}return a}e.toArray=r;function n(s){return s.length===1?"0"+s:s}e.zero2=n;function i(s){for(var o="",a=0;a<s.length;a++)o+=n(s[a].toString(16));return o}e.toHex=i,e.encode=function(o,a){return a==="hex"?i(o):o}})(r5);(function(t){var e=t,r=sl,n=Xh,i=r5;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function s(u,h,d){var g=new Array(Math.max(u.bitLength(),d)+1),m;for(m=0;m<g.length;m+=1)g[m]=0;var v=1<<h+1,$=u.clone();for(m=0;m<g.length;m++){var _,S=$.andln(v-1);$.isOdd()?(S>(v>>1)-1?_=(v>>1)-S:_=S,$.isubn(_)):_=0,g[m]=_,$.iushrn(1)}return g}e.getNAF=s;function o(u,h){var d=[[],[]];u=u.clone(),h=h.clone();for(var g=0,m=0,v;u.cmpn(-g)>0||h.cmpn(-m)>0;){var $=u.andln(3)+g&3,_=h.andln(3)+m&3;$===3&&($=-1),_===3&&(_=-1);var S;$&1?(v=u.andln(7)+g&7,(v===3||v===5)&&_===2?S=-$:S=$):S=0,d[0].push(S);var A;_&1?(v=h.andln(7)+m&7,(v===3||v===5)&&$===2?A=-_:A=_):A=0,d[1].push(A),2*g===S+1&&(g=1-g),2*m===A+1&&(m=1-m),u.iushrn(1),h.iushrn(1)}return d}e.getJSF=o;function a(u,h,d){var g="_"+h;u.prototype[h]=function(){return this[g]!==void 0?this[g]:this[g]=d.call(this)}}e.cachedProperty=a;function c(u){return typeof u=="string"?e.toArray(u,"hex"):u}e.parseBytes=c;function l(u){return new r(u,"hex","le")}e.intFromLE=l})(ro);var n5={exports:{}},YE;n5.exports=function(e){return YE||(YE=new Hl(null)),YE.generate(e)};function Hl(t){this.rand=t}n5.exports.Rand=Hl;Hl.prototype.generate=function(e){return this._rand(e)};Hl.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Hl.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?Hl.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(Hl.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var oC=uI;if(typeof oC.randomBytes!="function")throw new Error("Not supported");Hl.prototype._rand=function(e){return oC.randomBytes(e)}}catch{}var gR=n5.exports,i5={},Tu=sl,hy=ro,Fb=hy.getNAF,bne=hy.getJSF,zb=hy.assert;function _u(t,e){this.type=t,this.p=new Tu(e.p,16),this.red=e.prime?Tu.red(e.prime):Tu.mont(this.p),this.zero=new Tu(0).toRed(this.red),this.one=new Tu(1).toRed(this.red),this.two=new Tu(2).toRed(this.red),this.n=e.n&&new Tu(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Zv=_u;_u.prototype.point=function(){throw new Error("Not implemented")};_u.prototype.validate=function(){throw new Error("Not implemented")};_u.prototype._fixedNafMul=function(e,r){zb(e.precomputed);var n=e._getDoubles(),i=Fb(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var l=a+n.step-1;l>=a;l--)c=(c<<1)+i[l];o.push(c)}for(var u=this.jpoint(null,null,null),h=this.jpoint(null,null,null),d=s;d>0;d--){for(a=0;a<o.length;a++)c=o[a],c===d?h=h.mixedAdd(n.points[a]):c===-d&&(h=h.mixedAdd(n.points[a].neg()));u=u.add(h)}return u.toP()};_u.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Fb(r,n,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var l=0;c>=0&&o[c]===0;c--)l++;if(c>=0&&l++,a=a.dblp(l),c<0)break;var u=o[c];zb(u!==0),e.type==="affine"?u>0?a=a.mixedAdd(s[u-1>>1]):a=a.mixedAdd(s[-u-1>>1].neg()):u>0?a=a.add(s[u-1>>1]):a=a.add(s[-u-1>>1].neg())}return e.type==="affine"?a.toP():a};_u.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,l=0,u,h,d;for(u=0;u<i;u++){d=r[u];var g=d._getNAFPoints(e);o[u]=g.wnd,a[u]=g.points}for(u=i-1;u>=1;u-=2){var m=u-1,v=u;if(o[m]!==1||o[v]!==1){c[m]=Fb(n[m],o[m],this._bitLength),c[v]=Fb(n[v],o[v],this._bitLength),l=Math.max(c[m].length,l),l=Math.max(c[v].length,l);continue}var $=[r[m],null,null,r[v]];r[m].y.cmp(r[v].y)===0?($[1]=r[m].add(r[v]),$[2]=r[m].toJ().mixedAdd(r[v].neg())):r[m].y.cmp(r[v].y.redNeg())===0?($[1]=r[m].toJ().mixedAdd(r[v]),$[2]=r[m].add(r[v].neg())):($[1]=r[m].toJ().mixedAdd(r[v]),$[2]=r[m].toJ().mixedAdd(r[v].neg()));var _=[-3,-1,-5,-7,0,7,5,1,3],S=bne(n[m],n[v]);for(l=Math.max(S[0].length,l),c[m]=new Array(l),c[v]=new Array(l),h=0;h<l;h++){var A=S[0][h]|0,T=S[1][h]|0;c[m][h]=_[(A+1)*3+(T+1)],c[v][h]=0,a[m]=$}}var k=this.jpoint(null,null,null),R=this._wnafT4;for(u=l;u>=0;u--){for(var L=0;u>=0;){var F=!0;for(h=0;h<i;h++)R[h]=c[h][u]|0,R[h]!==0&&(F=!1);if(!F)break;L++,u--}if(u>=0&&L++,k=k.dblp(L),u<0)break;for(h=0;h<i;h++){var B=R[h];B!==0&&(B>0?d=a[h][B-1>>1]:B<0&&(d=a[h][-B-1>>1].neg()),d.type==="affine"?k=k.mixedAdd(d):k=k.add(d))}}for(u=0;u<i;u++)a[u]=null;return s?k:k.toP()};function $o(t,e){this.curve=t,this.type=e,this.precomputed=null}_u.BasePoint=$o;$o.prototype.eq=function(){throw new Error("Not implemented")};$o.prototype.validate=function(){return this.curve.validate(this)};_u.prototype.decodePoint=function(e,r){e=hy.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?zb(e[e.length-1]%2===0):e[0]===7&&zb(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};$o.prototype.encodeCompressed=function(e){return this.encode(e,!0)};$o.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};$o.prototype.encode=function(e,r){return hy.encode(this._encode(r),e)};$o.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};$o.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};$o.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};$o.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};$o.prototype._getBeta=function(){return null};$o.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var JS={exports:{}};typeof Object.create=="function"?JS.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:JS.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var Jv=JS.exports,vne=ro,un=sl,s5=Jv,qp=Zv,Ene=vne.assert;function Po(t){qp.call(this,"short",t),this.a=new un(t.a,16).toRed(this.red),this.b=new un(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}s5(Po,qp);var _ne=Po;Po.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new un(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new un(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],Ene(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new un(a.a,16),b:new un(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};Po.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:un.mont(e),n=new un(2).toRed(r).redInvm(),i=n.redNeg(),s=new un(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};Po.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new un(1),o=new un(0),a=new un(0),c=new un(1),l,u,h,d,g,m,v,$=0,_,S;n.cmpn(0)!==0;){var A=i.div(n);_=i.sub(A.mul(n)),S=a.sub(A.mul(s));var T=c.sub(A.mul(o));if(!h&&_.cmp(r)<0)l=v.neg(),u=s,h=_.neg(),d=S;else if(h&&++$===2)break;v=_,i=n,n=_,a=s,s=S,c=o,o=T}g=_.neg(),m=S;var k=h.sqr().add(d.sqr()),R=g.sqr().add(m.sqr());return R.cmp(k)>=0&&(g=l,m=u),h.negative&&(h=h.neg(),d=d.neg()),g.negative&&(g=g.neg(),m=m.neg()),[{a:h,b:d},{a:g,b:m}]};Po.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),c=o.mul(i.a),l=s.mul(n.b),u=o.mul(i.b),h=e.sub(a).sub(c),d=l.add(u).neg();return{k1:h,k2:d}};Po.prototype.pointFromX=function(e,r){e=new un(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};Po.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};Po.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],l=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=c,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var u=this._wnafMulAdd(1,i,s,o*2,n),h=0;h<o*2;h++)i[h]=null,s[h]=null;return u};function ti(t,e,r,n){qp.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new un(e,16),this.y=new un(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}s5(ti,qp.BasePoint);Po.prototype.point=function(e,r,n){return new ti(this,e,r,n)};Po.prototype.pointFromJSON=function(e,r){return ti.fromJSON(this,e,r)};ti.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};ti.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};ti.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};ti.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};ti.prototype.isInfinity=function(){return this.inf};ti.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};ti.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};ti.prototype.getX=function(){return this.x.fromRed()};ti.prototype.getY=function(){return this.y.fromRed()};ti.prototype.mul=function(e){return e=new un(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};ti.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};ti.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};ti.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};ti.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};ti.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function xi(t,e,r,n){qp.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new un(0)):(this.x=new un(e,16),this.y=new un(r,16),this.z=new un(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}s5(xi,qp.BasePoint);Po.prototype.jpoint=function(e,r,n){return new xi(this,e,r,n)};xi.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};xi.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};xi.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),l=o.redSub(a);if(c.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=c.redSqr(),h=u.redMul(c),d=i.redMul(u),g=l.redSqr().redIAdd(h).redISub(d).redISub(d),m=l.redMul(d.redISub(g)).redISub(o.redMul(h)),v=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(g,m,v)};xi.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),u=l.redMul(a),h=n.redMul(l),d=c.redSqr().redIAdd(u).redISub(h).redISub(h),g=c.redMul(h.redISub(d)).redISub(s.redMul(u)),m=this.z.redMul(a);return this.curve.jpoint(d,g,m)};xi.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,l=c.redSqr().redSqr(),u=a.redAdd(a);for(r=0;r<e;r++){var h=o.redSqr(),d=u.redSqr(),g=d.redSqr(),m=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(l)),v=o.redMul(d),$=m.redSqr().redISub(v.redAdd(v)),_=v.redISub($),S=m.redMul(_);S=S.redIAdd(S).redISub(g);var A=u.redMul(c);r+1<e&&(l=l.redMul(g)),o=$,c=A,u=S}return this.curve.jpoint(o,u.redMul(s),c)};xi.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};xi.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),l=c.redSqr().redISub(a).redISub(a),u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),e=l,r=c.redMul(a.redISub(l)).redISub(u),n=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),d=this.y.redSqr(),g=d.redSqr(),m=this.x.redAdd(d).redSqr().redISub(h).redISub(g);m=m.redIAdd(m);var v=h.redAdd(h).redIAdd(h),$=v.redSqr(),_=g.redIAdd(g);_=_.redIAdd(_),_=_.redIAdd(_),e=$.redISub(m).redISub(m),r=v.redMul(m.redISub(e)).redISub(_),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};xi.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=c.redSqr().redISub(a).redISub(a);e=l;var u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),r=c.redMul(a.redISub(l)).redISub(u),n=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),d=this.y.redSqr(),g=this.x.redMul(d),m=this.x.redSub(h).redMul(this.x.redAdd(h));m=m.redAdd(m).redIAdd(m);var v=g.redIAdd(g);v=v.redIAdd(v);var $=v.redAdd(v);e=m.redSqr().redISub($),n=this.y.redAdd(this.z).redSqr().redISub(d).redISub(h);var _=d.redSqr();_=_.redIAdd(_),_=_.redIAdd(_),_=_.redIAdd(_),r=m.redMul(v.redISub(e)).redISub(_)}return this.curve.jpoint(e,r,n)};xi.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=r.redAdd(r);l=l.redIAdd(l);var u=l.redMul(a),h=c.redSqr().redISub(u.redAdd(u)),d=u.redISub(h),g=a.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var m=c.redMul(d).redISub(g),v=n.redAdd(n).redMul(i);return this.curve.jpoint(h,m,v)};xi.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var u=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(l),h=r.redMul(u);h=h.redIAdd(h),h=h.redIAdd(h);var d=this.x.redMul(c).redISub(h);d=d.redIAdd(d),d=d.redIAdd(d);var g=this.y.redMul(u.redMul(l.redISub(u)).redISub(a.redMul(c)));g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var m=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(d,g,m)};xi.prototype.mul=function(e,r){return e=new un(e,r),this.curve._wnafMul(this,e)};xi.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};xi.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};xi.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};xi.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Of=sl,mR=Jv,Xv=Zv,Sne=ro;function Wp(t){Xv.call(this,"mont",t),this.a=new Of(t.a,16).toRed(this.red),this.b=new Of(t.b,16).toRed(this.red),this.i4=new Of(4).toRed(this.red).redInvm(),this.two=new Of(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}mR(Wp,Xv);var xne=Wp;Wp.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),s=i.redSqrt();return s.redSqr().cmp(i)===0};function ei(t,e,r){Xv.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Of(e,16),this.z=new Of(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}mR(ei,Xv.BasePoint);Wp.prototype.decodePoint=function(e,r){return this.point(Sne.toArray(e,r),1)};Wp.prototype.point=function(e,r){return new ei(this,e,r)};Wp.prototype.pointFromJSON=function(e){return ei.fromJSON(this,e)};ei.prototype.precompute=function(){};ei.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};ei.fromJSON=function(e,r){return new ei(e,r[0],r[1]||e.one)};ei.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};ei.prototype.isInfinity=function(){return this.z.cmpn(0)===0};ei.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=r.redSub(i),o=r.redMul(i),a=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)};ei.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};ei.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(n),c=s.redMul(i),l=r.z.redMul(a.redAdd(c).redSqr()),u=r.x.redMul(a.redISub(c).redSqr());return this.curve.point(l,u)};ei.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i};ei.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};ei.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};ei.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};ei.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};ei.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Ine=ro,Fc=sl,yR=Jv,e2=Zv,Ane=Ine.assert;function Ya(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,e2.call(this,"edwards",t),this.a=new Fc(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Fc(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Fc(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),Ane(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}yR(Ya,e2);var Cne=Ya;Ya.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Ya.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Ya.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)};Ya.prototype.pointFromX=function(e,r){e=new Fc(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var c=a.fromRed().isOdd();return(r&&!c||!r&&c)&&(a=a.redNeg()),this.point(e,a)};Ya.prototype.pointFromY=function(e,r){e=new Fc(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)};Ya.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function Ar(t,e,r,n,i){e2.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Fc(e,16),this.y=new Fc(r,16),this.z=n?new Fc(n,16):this.curve.one,this.t=i&&new Fc(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}yR(Ar,e2.BasePoint);Ya.prototype.pointFromJSON=function(e){return Ar.fromJSON(this,e)};Ya.prototype.point=function(e,r,n,i){return new Ar(this,e,r,n,i)};Ar.fromJSON=function(e,r){return new Ar(e,r[0],r[1],r[2])};Ar.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Ar.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Ar.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=i.redAdd(r),a=o.redSub(n),c=i.redSub(r),l=s.redMul(a),u=o.redMul(c),h=s.redMul(c),d=a.redMul(o);return this.curve.point(l,u,d,h)};Ar.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,s,o,a,c,l;if(this.curve.twisted){a=this.curve._mulA(r);var u=a.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(u.redSub(this.curve.two)),s=u.redMul(a.redSub(n)),o=u.redSqr().redSub(u).redSub(u)):(c=this.z.redSqr(),l=u.redSub(c).redISub(c),i=e.redSub(r).redISub(n).redMul(l),s=u.redMul(a.redSub(n)),o=u.redMul(l))}else a=r.redAdd(n),c=this.curve._mulC(this.z).redSqr(),l=a.redSub(c).redSub(c),i=this.curve._mulC(e.redISub(a)).redMul(l),s=this.curve._mulC(a).redMul(r.redISub(n)),o=a.redMul(l);return this.curve.point(i,s,o)};Ar.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Ar.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(r),a=s.redSub(i),c=s.redAdd(i),l=n.redAdd(r),u=o.redMul(a),h=c.redMul(l),d=o.redMul(l),g=a.redMul(c);return this.curve.point(u,h,g,d)};Ar.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(s),a=n.redSub(o),c=n.redAdd(o),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),u=r.redMul(a).redMul(l),h,d;return this.curve.twisted?(h=r.redMul(c).redMul(s.redSub(this.curve._mulA(i))),d=a.redMul(c)):(h=r.redMul(c).redMul(s.redSub(i)),d=this.curve._mulC(a).redMul(c)),this.curve.point(u,h,d)};Ar.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Ar.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Ar.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};Ar.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};Ar.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Ar.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Ar.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Ar.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Ar.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Ar.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};Ar.prototype.toP=Ar.prototype.normalize;Ar.prototype.mixedAdd=Ar.prototype.add;(function(t){var e=t;e.base=Zv,e.short=_ne,e.mont=xne,e.edwards=Cne})(i5);var t2={},r2={},bt={},Nne=Xh,Mne=Jv;bt.inherits=Mne;function Tne(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function $ne(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):Tne(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}bt.toArray=$ne;function Pne(t){for(var e="",r=0;r<t.length;r++)e+=bR(t[r].toString(16));return e}bt.toHex=Pne;function wR(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}bt.htonl=wR;function One(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=wR(i)),r+=vR(i.toString(16))}return r}bt.toHex32=One;function bR(t){return t.length===1?"0"+t:t}bt.zero2=bR;function vR(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}bt.zero8=vR;function kne(t,e,r,n){var i=r-e;Nne(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var c;n==="big"?c=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:c=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=c>>>0}return s}bt.join32=kne;function Rne(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];e==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}bt.split32=Rne;function Dne(t,e){return t>>>e|t<<32-e}bt.rotr32=Dne;function Lne(t,e){return t<<e|t>>>32-e}bt.rotl32=Lne;function Bne(t,e){return t+e>>>0}bt.sum32=Bne;function jne(t,e,r){return t+e+r>>>0}bt.sum32_3=jne;function Une(t,e,r,n){return t+e+r+n>>>0}bt.sum32_4=Une;function Fne(t,e,r,n,i){return t+e+r+n+i>>>0}bt.sum32_5=Fne;function zne(t,e,r,n){var i=t[e],s=t[e+1],o=n+s>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o}bt.sum64=zne;function qne(t,e,r,n){var i=e+n>>>0,s=(i<e?1:0)+t+r;return s>>>0}bt.sum64_hi=qne;function Wne(t,e,r,n){var i=e+n;return i>>>0}bt.sum64_lo=Wne;function Hne(t,e,r,n,i,s,o,a){var c=0,l=e;l=l+n>>>0,c+=l<e?1:0,l=l+s>>>0,c+=l<s?1:0,l=l+a>>>0,c+=l<a?1:0;var u=t+r+i+o+c;return u>>>0}bt.sum64_4_hi=Hne;function Kne(t,e,r,n,i,s,o,a){var c=e+n+s+a;return c>>>0}bt.sum64_4_lo=Kne;function Vne(t,e,r,n,i,s,o,a,c,l){var u=0,h=e;h=h+n>>>0,u+=h<e?1:0,h=h+s>>>0,u+=h<s?1:0,h=h+a>>>0,u+=h<a?1:0,h=h+l>>>0,u+=h<l?1:0;var d=t+r+i+o+c+u;return d>>>0}bt.sum64_5_hi=Vne;function Gne(t,e,r,n,i,s,o,a,c,l){var u=e+n+s+a+l;return u>>>0}bt.sum64_5_lo=Gne;function Yne(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}bt.rotr64_hi=Yne;function Qne(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}bt.rotr64_lo=Qne;function Zne(t,e,r){return t>>>r}bt.shr64_hi=Zne;function Jne(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}bt.shr64_lo=Jne;var Hp={},aC=bt,Xne=Xh;function n2(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Hp.BlockHash=n2;n2.prototype.update=function(e,r){if(e=aC.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=aC.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};n2.prototype.digest=function(e){return this.update(this._pad()),Xne(this.pending===null),this._digest(e)};n2.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var Kp={},Qa={},eie=bt,Ra=eie.rotr32;function tie(t,e,r,n){if(t===0)return ER(e,r,n);if(t===1||t===3)return SR(e,r,n);if(t===2)return _R(e,r,n)}Qa.ft_1=tie;function ER(t,e,r){return t&e^~t&r}Qa.ch32=ER;function _R(t,e,r){return t&e^t&r^e&r}Qa.maj32=_R;function SR(t,e,r){return t^e^r}Qa.p32=SR;function rie(t){return Ra(t,2)^Ra(t,13)^Ra(t,22)}Qa.s0_256=rie;function nie(t){return Ra(t,6)^Ra(t,11)^Ra(t,25)}Qa.s1_256=nie;function iie(t){return Ra(t,7)^Ra(t,18)^t>>>3}Qa.g0_256=iie;function sie(t){return Ra(t,17)^Ra(t,19)^t>>>10}Qa.g1_256=sie;var mp=bt,oie=Hp,aie=Qa,QE=mp.rotl32,E0=mp.sum32,cie=mp.sum32_5,lie=aie.ft_1,xR=oie.BlockHash,uie=[1518500249,1859775393,2400959708,3395469782];function Ua(){if(!(this instanceof Ua))return new Ua;xR.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}mp.inherits(Ua,xR);var hie=Ua;Ua.blockSize=512;Ua.outSize=160;Ua.hmacStrength=80;Ua.padLength=64;Ua.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=QE(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4];for(i=0;i<n.length;i++){var u=~~(i/20),h=cie(QE(s,5),lie(u,o,a,c),l,n[i],uie[u]);l=c,c=a,a=QE(o,30),o=s,s=h}this.h[0]=E0(this.h[0],s),this.h[1]=E0(this.h[1],o),this.h[2]=E0(this.h[2],a),this.h[3]=E0(this.h[3],c),this.h[4]=E0(this.h[4],l)};Ua.prototype._digest=function(e){return e==="hex"?mp.toHex32(this.h,"big"):mp.split32(this.h,"big")};var yp=bt,die=Hp,Vp=Qa,fie=Xh,Bo=yp.sum32,pie=yp.sum32_4,gie=yp.sum32_5,mie=Vp.ch32,yie=Vp.maj32,wie=Vp.s0_256,bie=Vp.s1_256,vie=Vp.g0_256,Eie=Vp.g1_256,IR=die.BlockHash,_ie=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Fa(){if(!(this instanceof Fa))return new Fa;IR.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=_ie,this.W=new Array(64)}yp.inherits(Fa,IR);var AR=Fa;Fa.blockSize=512;Fa.outSize=256;Fa.hmacStrength=192;Fa.padLength=64;Fa.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=pie(Eie(n[i-2]),n[i-7],vie(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4],u=this.h[5],h=this.h[6],d=this.h[7];for(fie(this.k.length===n.length),i=0;i<n.length;i++){var g=gie(d,bie(l),mie(l,u,h),this.k[i],n[i]),m=Bo(wie(s),yie(s,o,a));d=h,h=u,u=l,l=Bo(c,g),c=a,a=o,o=s,s=Bo(g,m)}this.h[0]=Bo(this.h[0],s),this.h[1]=Bo(this.h[1],o),this.h[2]=Bo(this.h[2],a),this.h[3]=Bo(this.h[3],c),this.h[4]=Bo(this.h[4],l),this.h[5]=Bo(this.h[5],u),this.h[6]=Bo(this.h[6],h),this.h[7]=Bo(this.h[7],d)};Fa.prototype._digest=function(e){return e==="hex"?yp.toHex32(this.h,"big"):yp.split32(this.h,"big")};var XS=bt,CR=AR;function el(){if(!(this instanceof el))return new el;CR.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}XS.inherits(el,CR);var Sie=el;el.blockSize=512;el.outSize=224;el.hmacStrength=192;el.padLength=64;el.prototype._digest=function(e){return e==="hex"?XS.toHex32(this.h.slice(0,7),"big"):XS.split32(this.h.slice(0,7),"big")};var Is=bt,xie=Hp,Iie=Xh,Da=Is.rotr64_hi,La=Is.rotr64_lo,NR=Is.shr64_hi,MR=Is.shr64_lo,wl=Is.sum64,ZE=Is.sum64_hi,JE=Is.sum64_lo,Aie=Is.sum64_4_hi,Cie=Is.sum64_4_lo,Nie=Is.sum64_5_hi,Mie=Is.sum64_5_lo,TR=xie.BlockHash,Tie=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ua(){if(!(this instanceof ua))return new ua;TR.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Tie,this.W=new Array(160)}Is.inherits(ua,TR);var $R=ua;ua.blockSize=1024;ua.outSize=512;ua.hmacStrength=192;ua.padLength=128;ua.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var s=Fie(n[i-4],n[i-3]),o=zie(n[i-4],n[i-3]),a=n[i-14],c=n[i-13],l=jie(n[i-30],n[i-29]),u=Uie(n[i-30],n[i-29]),h=n[i-32],d=n[i-31];n[i]=Aie(s,o,a,c,l,u,h,d),n[i+1]=Cie(s,o,a,c,l,u,h,d)}};ua.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],l=this.h[5],u=this.h[6],h=this.h[7],d=this.h[8],g=this.h[9],m=this.h[10],v=this.h[11],$=this.h[12],_=this.h[13],S=this.h[14],A=this.h[15];Iie(this.k.length===n.length);for(var T=0;T<n.length;T+=2){var k=S,R=A,L=Lie(d,g),F=Bie(d,g),B=$ie(d,g,m,v,$),q=Pie(d,g,m,v,$,_),D=this.k[T],E=this.k[T+1],b=n[T],f=n[T+1],p=Nie(k,R,L,F,B,q,D,E,b,f),w=Mie(k,R,L,F,B,q,D,E,b,f);k=Rie(i,s),R=Die(i,s),L=Oie(i,s,o,a,c),F=kie(i,s,o,a,c,l);var N=ZE(k,R,L,F),M=JE(k,R,L,F);S=$,A=_,$=m,_=v,m=d,v=g,d=ZE(u,h,p,w),g=JE(h,h,p,w),u=c,h=l,c=o,l=a,o=i,a=s,i=ZE(p,w,N,M),s=JE(p,w,N,M)}wl(this.h,0,i,s),wl(this.h,2,o,a),wl(this.h,4,c,l),wl(this.h,6,u,h),wl(this.h,8,d,g),wl(this.h,10,m,v),wl(this.h,12,$,_),wl(this.h,14,S,A)};ua.prototype._digest=function(e){return e==="hex"?Is.toHex32(this.h,"big"):Is.split32(this.h,"big")};function $ie(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function Pie(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function Oie(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function kie(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function Rie(t,e){var r=Da(t,e,28),n=Da(e,t,2),i=Da(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Die(t,e){var r=La(t,e,28),n=La(e,t,2),i=La(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Lie(t,e){var r=Da(t,e,14),n=Da(t,e,18),i=Da(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function Bie(t,e){var r=La(t,e,14),n=La(t,e,18),i=La(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function jie(t,e){var r=Da(t,e,1),n=Da(t,e,8),i=NR(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Uie(t,e){var r=La(t,e,1),n=La(t,e,8),i=MR(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Fie(t,e){var r=Da(t,e,19),n=Da(e,t,29),i=NR(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}function zie(t,e){var r=La(t,e,19),n=La(e,t,29),i=MR(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}var e4=bt,PR=$R;function tl(){if(!(this instanceof tl))return new tl;PR.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}e4.inherits(tl,PR);var qie=tl;tl.blockSize=1024;tl.outSize=384;tl.hmacStrength=192;tl.padLength=128;tl.prototype._digest=function(e){return e==="hex"?e4.toHex32(this.h.slice(0,12),"big"):e4.split32(this.h.slice(0,12),"big")};Kp.sha1=hie;Kp.sha224=Sie;Kp.sha256=AR;Kp.sha384=qie;Kp.sha512=$R;var OR={},$h=bt,Wie=Hp,ww=$h.rotl32,cC=$h.sum32,_0=$h.sum32_3,lC=$h.sum32_4,kR=Wie.BlockHash;function za(){if(!(this instanceof za))return new za;kR.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}$h.inherits(za,kR);OR.ripemd160=za;za.blockSize=512;za.outSize=160;za.hmacStrength=192;za.padLength=64;za.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=n,l=i,u=s,h=o,d=a,g=0;g<80;g++){var m=cC(ww(lC(n,uC(g,i,s,o),e[Vie[g]+r],Hie(g)),Yie[g]),a);n=a,a=o,o=ww(s,10),s=i,i=m,m=cC(ww(lC(c,uC(79-g,l,u,h),e[Gie[g]+r],Kie(g)),Qie[g]),d),c=d,d=h,h=ww(u,10),u=l,l=m}m=_0(this.h[1],s,h),this.h[1]=_0(this.h[2],o,d),this.h[2]=_0(this.h[3],a,c),this.h[3]=_0(this.h[4],n,l),this.h[4]=_0(this.h[0],i,u),this.h[0]=m};za.prototype._digest=function(e){return e==="hex"?$h.toHex32(this.h,"little"):$h.split32(this.h,"little")};function uC(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function Hie(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Kie(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var Vie=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Gie=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Yie=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Qie=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Zie=bt,Jie=Xh;function wp(t,e,r){if(!(this instanceof wp))return new wp(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(Zie.toArray(e,r))}var Xie=wp;wp.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),Jie(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};wp.prototype.update=function(e,r){return this.inner.update(e,r),this};wp.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=bt,e.common=Hp,e.sha=Kp,e.ripemd=OR,e.hmac=Xie,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(r2);var XE,hC;function ese(){return hC||(hC=1,XE={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),XE}(function(t){var e=t,r=r2,n=i5,i=ro,s=i.assert;function o(l){l.type==="short"?this.curve=new n.short(l):l.type==="edwards"?this.curve=new n.edwards(l):this.curve=new n.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function a(l,u){Object.defineProperty(e,l,{configurable:!0,enumerable:!0,get:function(){var h=new o(u);return Object.defineProperty(e,l,{configurable:!0,enumerable:!0,value:h}),h}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=ese()}catch{c=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})})(t2);var tse=r2,vh=r5,RR=Xh;function gu(t){if(!(this instanceof gu))return new gu(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=vh.toArray(t.entropy,t.entropyEnc||"hex"),r=vh.toArray(t.nonce,t.nonceEnc||"hex"),n=vh.toArray(t.pers,t.persEnc||"hex");RR(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var rse=gu;gu.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};gu.prototype._hmac=function(){return new tse.hmac(this.hash,this.K)};gu.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};gu.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=vh.toArray(e,r),n=vh.toArray(n,i),RR(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};gu.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=vh.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,vh.encode(o,r)};var nse=sl,ise=ro,t4=ise.assert;function qi(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var sse=qi;qi.fromPublic=function(e,r,n){return r instanceof qi?r:new qi(e,{pub:r,pubEnc:n})};qi.fromPrivate=function(e,r,n){return r instanceof qi?r:new qi(e,{priv:r,privEnc:n})};qi.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};qi.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};qi.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};qi.prototype._importPrivate=function(e,r){this.priv=new nse(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};qi.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?t4(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&t4(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};qi.prototype.derive=function(e){return e.validate()||t4(e.validate(),"public point not validated"),e.mul(this.priv).getX()};qi.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};qi.prototype.verify=function(e,r,n){return this.ec.verify(e,r,this,void 0,n)};qi.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var qb=sl,o5=ro,ose=o5.assert;function i2(t,e){if(t instanceof i2)return t;this._importDER(t,e)||(ose(t.r&&t.s,"Signature without r or s"),this.r=new qb(t.r,16),this.s=new qb(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var ase=i2;function cse(){this.place=0}function e3(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4||t[e.place]===0)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function dC(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}i2.prototype._importDER=function(e,r){e=o5.toArray(e,r);var n=new cse;if(e[n.place++]!==48)return!1;var i=e3(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=e3(e,n);if(s===!1||e[n.place]&128)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=e3(e,n);if(a===!1||e.length!==a+n.place||e[n.place]&128)return!1;var c=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new qb(o),this.s=new qb(c),this.recoveryParam=null,!0};function t3(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}i2.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=dC(r),n=dC(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];t3(i,r.length),i=i.concat(r),i.push(2),t3(i,n.length);var s=i.concat(n),o=[48];return t3(o,s.length),o=o.concat(s),o5.encode(o,e)};var ta=sl,DR=rse,lse=ro,r3=t2,use=gR,Yu=lse.assert,a5=sse,s2=ase;function To(t){if(!(this instanceof To))return new To(t);typeof t=="string"&&(Yu(Object.prototype.hasOwnProperty.call(r3,t),"Unknown curve "+t),t=r3[t]),t instanceof r3.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var hse=To;To.prototype.keyPair=function(e){return new a5(this,e)};To.prototype.keyFromPrivate=function(e,r){return a5.fromPrivate(this,e,r)};To.prototype.keyFromPublic=function(e,r){return a5.fromPublic(this,e,r)};To.prototype.genKeyPair=function(e){e||(e={});for(var r=new DR({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||use(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new ta(2));;){var s=new ta(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};To.prototype._truncateToN=function(e,r,n){var i;if(ta.isBN(e)||typeof e=="number")e=new ta(e,16),i=e.byteLength();else if(typeof e=="object")i=e.length,e=new ta(e,16);else{var s=e.toString();i=s.length+1>>>1,e=new ta(s,16)}typeof n!="number"&&(n=i*8);var o=n-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};To.prototype.sign=function(e,r,n,i){if(typeof n=="object"&&(i=n,n=null),i||(i={}),typeof e!="string"&&typeof e!="number"&&!ta.isBN(e)){Yu(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),Yu(e.length>>>0===e.length);for(var s=0;s<e.length;s++)Yu((e[s]&255)===e[s])}r=this.keyFromPrivate(r,n),e=this._truncateToN(e,!1,i.msgBitLength),Yu(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),a=r.getPrivate().toArray("be",o),c=e.toArray("be",o);Yu(new ta(c).eq(e),"Can not sign message");for(var l=new DR({hash:this.hash,entropy:a,nonce:c,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new ta(1)),h=0;;h++){var d=i.k?i.k(h):new ta(l.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(u)>=0)){var g=this.g.mul(d);if(!g.isInfinity()){var m=g.getX(),v=m.umod(this.n);if(v.cmpn(0)!==0){var $=d.invm(this.n).mul(v.mul(r.getPrivate()).iadd(e));if($=$.umod(this.n),$.cmpn(0)!==0){var _=(g.getY().isOdd()?1:0)|(m.cmp(v)!==0?2:0);return i.canonical&&$.cmp(this.nh)>0&&($=this.n.sub($),_^=1),new s2({r:v,s:$,recoveryParam:_})}}}}}};To.prototype.verify=function(e,r,n,i,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),n=this.keyFromPublic(n,i),r=new s2(r,"hex");var o=r.r,a=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var c=a.invm(this.n),l=c.mul(e).umod(this.n),u=c.mul(o).umod(this.n),h;return this.curve._maxwellTrick?(h=this.g.jmulAdd(l,n.getPublic(),u),h.isInfinity()?!1:h.eqXToP(o)):(h=this.g.mulAdd(l,n.getPublic(),u),h.isInfinity()?!1:h.getX().umod(this.n).cmp(o)===0)};To.prototype.recoverPubKey=function(t,e,r,n){Yu((3&r)===r,"The recovery param is more than two bits"),e=new s2(e,n);var i=this.n,s=new ta(t),o=e.r,a=e.s,c=r&1,l=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var u=e.r.invm(i),h=i.sub(s).mul(u).umod(i),d=a.mul(u).umod(i);return this.g.mulAdd(h,o,d)};To.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new s2(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var dy=ro,LR=dy.assert,fC=dy.parseBytes,Gp=dy.cachedProperty;function Xn(t,e){this.eddsa=t,this._secret=fC(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=fC(e.pub)}Xn.fromPublic=function(e,r){return r instanceof Xn?r:new Xn(e,{pub:r})};Xn.fromSecret=function(e,r){return r instanceof Xn?r:new Xn(e,{secret:r})};Xn.prototype.secret=function(){return this._secret};Gp(Xn,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Gp(Xn,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Gp(Xn,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});Gp(Xn,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Gp(Xn,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Gp(Xn,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Xn.prototype.sign=function(e){return LR(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Xn.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};Xn.prototype.getSecret=function(e){return LR(this._secret,"KeyPair is public only"),dy.encode(this.secret(),e)};Xn.prototype.getPublic=function(e){return dy.encode(this.pubBytes(),e)};var dse=Xn,fse=sl,o2=ro,pC=o2.assert,a2=o2.cachedProperty,pse=o2.parseBytes;function ed(t,e){this.eddsa=t,typeof e!="object"&&(e=pse(e)),Array.isArray(e)&&(pC(e.length===t.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),pC(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof fse&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}a2(ed,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});a2(ed,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});a2(ed,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});a2(ed,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});ed.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};ed.prototype.toHex=function(){return o2.encode(this.toBytes(),"hex").toUpperCase()};var gse=ed,mse=r2,yse=t2,bp=ro,wse=bp.assert,BR=bp.parseBytes,jR=dse,gC=gse;function As(t){if(wse(t==="ed25519","only tested with ed25519 so far"),!(this instanceof As))return new As(t);t=yse[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=mse.sha512}var bse=As;As.prototype.sign=function(e,r){e=BR(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),s=this.g.mul(i),o=this.encodePoint(s),a=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),c=i.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:c,Rencoded:o})};As.prototype.verify=function(e,r,n){if(e=BR(e),r=this.makeSignature(r),r.S().gte(r.eddsa.curve.n)||r.S().isNeg())return!1;var i=this.keyFromPublic(n),s=this.hashInt(r.Rencoded(),i.pubBytes(),e),o=this.g.mul(r.S()),a=r.R().add(i.pub().mul(s));return a.eq(o)};As.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return bp.intFromLE(e.digest()).umod(this.curve.n)};As.prototype.keyFromPublic=function(e){return jR.fromPublic(this,e)};As.prototype.keyFromSecret=function(e){return jR.fromSecret(this,e)};As.prototype.makeSignature=function(e){return e instanceof gC?e:new gC(this,e)};As.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};As.prototype.decodePoint=function(e){e=bp.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&-129),i=(e[r]&128)!==0,s=bp.intFromLE(n);return this.curve.pointFromY(s,i)};As.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};As.prototype.decodeInt=function(e){return bp.intFromLE(e)};As.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(t){var e=t;e.version=wne.version,e.utils=ro,e.rand=gR,e.curve=i5,e.curves=t2,e.ec=hse,e.eddsa=bse})(e5);const UR={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var vse={};const FR=":";function Yf(t){const[e,r]=t.split(FR);return{namespace:e,reference:r}}function Ese(t){const[e,r,n]=t.split(FR);return{namespace:e,reference:r,address:n}}function zR(t,e){return t.includes(":")?[t]:e.chains||[]}const _se="ReactNative",Ws={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Sse="js";function Wb(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Su(){return!il()&&!!ly()&&navigator.product===_se}function xse(){return Su()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Ise(){return Su()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function fy(){return!Wb()&&!!ly()&&!!il()}function py(){return Su()?Ws.reactNative:Wb()?Ws.node:fy()?Ws.browser:Ws.unknown}function mC(){var t;try{return Su()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function Ase(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const i=e[n];i!==void 0&&r.set(n,i)}return r.toString()}function qR(){return XI()||{name:"",description:"",url:"",icons:[""]}}function Cse(){if(py()===Ws.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=Y7();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Nse(){var t;const e=py();return e===Ws.browser?[e,((t=ZI())==null?void 0:t.host)||"unknown"].join(":"):e}function WR(t,e,r){const n=Cse(),i=Nse();return[[t,e].join("-"),[Sse,r].join("-"),n,i].join("/")}function Mse({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=r.split("?"),u=WR(t,e,n),h={auth:i,ua:u,projectId:s,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},d=Ase(l[1]||"",h);return l[0]+"?"+d}function uh(t,e){return t.filter(r=>e.includes(r)).length===t.length}function HR(t){return Object.fromEntries(t.entries())}function KR(t){return new Map(Object.entries(t))}function qu(t=J.FIVE_MINUTES,e){const r=J.toMiliseconds(t||J.FIVE_MINUTES);let n,i,s,o;return{resolve:a=>{s&&n&&(clearTimeout(s),n(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},r),n=a,i=c})}}function Kl(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function VR(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Tse(t){return VR("topic",t)}function $se(t){return VR("id",t)}function GR(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Nn(t,e){return J.fromMiliseconds(Date.now()+J.toMiliseconds(t))}function $l(t){return Date.now()>=J.toMiliseconds(t)}function Wt(t,e){return`${t}${e?`:${e}`:""}`}function N1(t=[],e=[]){return[...new Set([...t,...e])]}async function Pse({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=Ose(s,t,e),a=py();if(a===Ws.browser){if(!((n=il())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}kse(o)}else a===Ws.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function Ose(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${Bse(n,!0)}`}else i=`${i}/wc?${n}`;return i}function kse(t){let e="_self";Lse()?e="_top":(Dse()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Rse(t,e){let r="";try{if(fy()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function yC(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function wC(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function c5(){return typeof process<"u"&&vse.IS_VITEST==="true"}function Dse(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Lse(){try{return window.self!==window.top}catch{return!1}}function Bse(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function YR(t){return Buffer.from(t,"base64").toString("utf-8")}function jse(t){return new Promise(e=>setTimeout(e,t))}function cm(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Use(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function c2(t,...e){if(!Use(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function l5(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");cm(t.outputLen),cm(t.blockLen)}function vp(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function QR(t,e){c2(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const bw=BigInt(2**32-1),bC=BigInt(32);function Fse(t,e=!1){return e?{h:Number(t&bw),l:Number(t>>bC&bw)}:{h:Number(t>>bC&bw)|0,l:Number(t&bw)|0}}function zse(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Fse(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const qse=(t,e,r)=>t<<r|e>>>32-r,Wse=(t,e,r)=>e<<r|t>>>32-r,Hse=(t,e,r)=>e<<r-32|t>>>64-r,Kse=(t,e,r)=>t<<r-32|e>>>64-r,_d=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Vse(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function n3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ma(t,e){return t<<32-e|t>>>e}const vC=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Gse(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function EC(t){for(let e=0;e<t.length;e++)t[e]=Gse(t[e])}function Yse(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Ep(t){return typeof t=="string"&&(t=Yse(t)),c2(t),t}let u5=class{clone(){return this._cloneInto()}};function ZR(t){const e=n=>t().update(Ep(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function gy(t=32){if(_d&&typeof _d.getRandomValues=="function")return _d.getRandomValues(new Uint8Array(t));if(_d&&typeof _d.randomBytes=="function")return _d.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const JR=[],XR=[],eD=[],Qse=BigInt(0),S0=BigInt(1),Zse=BigInt(2),Jse=BigInt(7),Xse=BigInt(256),eoe=BigInt(113);for(let t=0,e=S0,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],JR.push(2*(5*n+r)),XR.push((t+1)*(t+2)/2%64);let i=Qse;for(let s=0;s<7;s++)e=(e<<S0^(e>>Jse)*eoe)%Xse,e&Zse&&(i^=S0<<(S0<<BigInt(s))-S0);eD.push(i)}const[toe,roe]=zse(eD,!0),_C=(t,e,r)=>r>32?Hse(t,e,r):qse(t,e,r),SC=(t,e,r)=>r>32?Kse(t,e,r):Wse(t,e,r);function noe(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],h=_C(l,u,1)^r[a],d=SC(l,u,1)^r[a+1];for(let g=0;g<50;g+=10)t[o+g]^=h,t[o+g+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=XR[o],c=_C(i,s,a),l=SC(i,s,a),u=JR[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=toe[n],t[1]^=roe[n]}r.fill(0)}let ioe=class tD extends u5{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,cm(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Vse(this.state)}keccak(){vC||EC(this.state32),noe(this.state32,this.rounds),vC||EC(this.state32),this.posOut=0,this.pos=0}update(e){vp(this);const{blockLen:r,state:n}=this;e=Ep(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,r&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){vp(this,!1),c2(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return cm(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(QR(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new tD(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const soe=(t,e,r)=>ZR(()=>new ioe(e,t,r)),ooe=soe(1,136,256/8),aoe="https://rpc.walletconnect.org/v1";function rD(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(ooe(r)).toString("hex")}async function coe(t,e,r,n,i,s){switch(r.t){case"eip191":return await loe(t,e,r.s);case"eip1271":return await uoe(t,e,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function loe(t,e,r){return(await vre({hash:rD(e),signature:r})).toLowerCase()===t.toLowerCase()}async function uoe(t,e,r,n,i,s){const o=Yf(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=r.substring(2),h=rD(e).substring(2),d=a+h+c+l+u,g=await fetch(`${s||aoe}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:hoe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:d},"latest"]})}),{result:m}=await g.json();return m?m.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function hoe(){return Date.now()+Math.floor(Math.random()*1e3)}var doe=Object.defineProperty,foe=Object.defineProperties,poe=Object.getOwnPropertyDescriptors,xC=Object.getOwnPropertySymbols,goe=Object.prototype.hasOwnProperty,moe=Object.prototype.propertyIsEnumerable,IC=(t,e,r)=>e in t?doe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yoe=(t,e)=>{for(var r in e||(e={}))goe.call(e,r)&&IC(t,r,e[r]);if(xC)for(var r of xC(e))moe.call(e,r)&&IC(t,r,e[r]);return t},woe=(t,e)=>foe(t,poe(e));const boe="did:pkh:",h5=t=>t==null?void 0:t.split(":"),voe=t=>{const e=t&&h5(t);if(e)return t.includes(boe)?e[3]:e[1]},r4=t=>{const e=t&&h5(t);if(e)return e[2]+":"+e[3]},Hb=t=>{const e=t&&h5(t);if(e)return e.pop()};async function AC(t){const{cacao:e,projectId:r}=t,{s:n,p:i}=e,s=nD(i,i.iss),o=Hb(i.iss);return await coe(o,s,n,r4(i.iss),r)}const nD=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=Hb(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${voe(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,h=t.nbf?`Not Before: ${t.nbf}`:void 0,d=t.requestId?`Request ID: ${t.requestId}`:void 0,g=t.resources?`Resources:${t.resources.map(v=>`
- ${v}`).join("")}`:void 0,m=M1(t.resources);if(m){const v=lm(m);i=Moe(i,v)}return[r,n,"",i,"",s,o,a,c,l,u,h,d,g].filter(v=>v!=null).join(`
`)};function Eoe(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function _oe(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Ph(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{const s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function Soe(t,e,r,n={}){return r==null||r.sort((i,s)=>i.localeCompare(s)),{att:{[t]:xoe(e,r,n)}}}function xoe(t,e,r={}){e=e==null?void 0:e.sort((i,s)=>i.localeCompare(s));const n=e.map(i=>({[`${t}/${i}`]:[r]}));return Object.assign({},...n)}function iD(t){return Ph(t),`urn:recap:${Eoe(t).replace(/=/g,"")}`}function lm(t){const e=_oe(t.replace("urn:recap:",""));return Ph(e),e}function Ioe(t,e,r){const n=Soe(t,e,r);return iD(n)}function Aoe(t){return t&&t.includes("urn:recap:")}function Coe(t,e){const r=lm(t),n=lm(e),i=Noe(r,n);return iD(i)}function Noe(t,e){Ph(t),Ph(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;n.att[i]=woe(yoe({},n.att[i]),{[a]:((c=t.att[i])==null?void 0:c[a])||((l=e.att[i])==null?void 0:l[a])})})}),n}function Moe(t="",e){Ph(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let i=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(h=>({ability:h.split("/")[0],action:h.split("/")[1]}));c.sort((h,d)=>h.action.localeCompare(d.action));const l={};c.forEach(h=>{l[h.ability]||(l[h.ability]=[]),l[h.ability].push(h.action)});const u=Object.keys(l).map(h=>(i++,`(${i}) '${h}': '${l[h].join("', '")}' for '${a}'.`));n.push(u.join(", ").replace(".,","."))});const s=n.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function CC(t){var e;const r=lm(t);Ph(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function NC(t){const e=lm(t);Ph(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function M1(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return Aoe(e)?e:void 0}function i3(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function sD(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Fs(t,...e){if(!sD(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function MC(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Toe(t,e){Fs(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function TC(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const ou=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),$oe=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Poe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Poe)throw new Error("Non little-endian hardware is not supported");function Ooe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function n4(t){if(typeof t=="string")t=Ooe(t);else if(sD(t))t=i4(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function koe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Roe(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const Doe=(t,e)=>{function r(n,...i){if(Fs(n),t.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Fs(l):Fs(l,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&Fs(i[1]);const o=e(n,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Fs(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Fs(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Fs(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(r,t),r};function $C(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!Loe(e))throw new Error("invalid output, must be aligned");return e}function PC(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s);t.setUint32(e+4,o,n),t.setUint32(e+0,a,n)}function Loe(t){return t.byteOffset%4===0}function i4(t){return Uint8Array.from(t)}function _p(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const oD=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Boe=oD("expand 16-byte k"),joe=oD("expand 32-byte k"),Uoe=ou(Boe),Foe=ou(joe);function Mt(t,e){return t<<e|t>>>32-e}function s4(t){return t.byteOffset%4===0}const vw=64,zoe=16,aD=2**32-1,OC=new Uint32Array;function qoe(t,e,r,n,i,s,o,a){const c=i.length,l=new Uint8Array(vw),u=ou(l),h=s4(i)&&s4(s),d=h?ou(i):OC,g=h?ou(s):OC;for(let m=0;m<c;o++){if(t(e,r,n,u,o,a),o>=aD)throw new Error("arx: counter overflow");const v=Math.min(vw,c-m);if(h&&v===vw){const $=m/4;if(m%4!==0)throw new Error("arx: invalid block position");for(let _=0,S;_<zoe;_++)S=$+_,g[S]=d[S]^u[_];m+=vw;continue}for(let $=0,_;$<v;$++)_=m+$,s[_]=i[_]^l[$];m+=v}}function Woe(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=koe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return i3(i),i3(o),TC(s),TC(r),(a,c,l,u,h=0)=>{Fs(a),Fs(c),Fs(l);const d=l.length;if(u===void 0&&(u=new Uint8Array(d)),Fs(u),i3(h),h<0||h>=aD)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const g=[];let m=a.length,v,$;if(m===32)g.push(v=i4(a)),$=Foe;else if(m===16&&r)v=new Uint8Array(32),v.set(a),v.set(a,16),$=Uoe,g.push(v);else throw new Error(`arx: invalid 32-byte key, got length=${m}`);s4(c)||g.push(c=i4(c));const _=ou(v);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n($,_,ou(c.subarray(0,16)),_),c=c.subarray(16)}const S=16-i;if(S!==c.length)throw new Error(`arx: nonce must be ${S} or 16 bytes`);if(S!==12){const T=new Uint8Array(12);T.set(c,s?0:12-c.length),c=T,g.push(c)}const A=ou(c);return qoe(t,$,_,A,l,u,h,o),_p(...g),u}}const ni=(t,e)=>t[e++]&255|(t[e++]&255)<<8;let Hoe=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=n4(e),Fs(e,32);const r=ni(e,0),n=ni(e,2),i=ni(e,4),s=ni(e,6),o=ni(e,8),a=ni(e,10),c=ni(e,12),l=ni(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=ni(e,16+2*u)}process(e,r,n=!1){const i=n?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],h=o[4],d=o[5],g=o[6],m=o[7],v=o[8],$=o[9],_=ni(e,r+0),S=ni(e,r+2),A=ni(e,r+4),T=ni(e,r+6),k=ni(e,r+8),R=ni(e,r+10),L=ni(e,r+12),F=ni(e,r+14);let B=s[0]+(_&8191),q=s[1]+((_>>>13|S<<3)&8191),D=s[2]+((S>>>10|A<<6)&8191),E=s[3]+((A>>>7|T<<9)&8191),b=s[4]+((T>>>4|k<<12)&8191),f=s[5]+(k>>>1&8191),p=s[6]+((k>>>14|R<<2)&8191),w=s[7]+((R>>>11|L<<5)&8191),N=s[8]+((L>>>8|F<<8)&8191),M=s[9]+(F>>>5|i),x=0,y=x+B*a+q*(5*$)+D*(5*v)+E*(5*m)+b*(5*g);x=y>>>13,y&=8191,y+=f*(5*d)+p*(5*h)+w*(5*u)+N*(5*l)+M*(5*c),x+=y>>>13,y&=8191;let C=x+B*c+q*a+D*(5*$)+E*(5*v)+b*(5*m);x=C>>>13,C&=8191,C+=f*(5*g)+p*(5*d)+w*(5*h)+N*(5*u)+M*(5*l),x+=C>>>13,C&=8191;let I=x+B*l+q*c+D*a+E*(5*$)+b*(5*v);x=I>>>13,I&=8191,I+=f*(5*m)+p*(5*g)+w*(5*d)+N*(5*h)+M*(5*u),x+=I>>>13,I&=8191;let j=x+B*u+q*l+D*c+E*a+b*(5*$);x=j>>>13,j&=8191,j+=f*(5*v)+p*(5*m)+w*(5*g)+N*(5*d)+M*(5*h),x+=j>>>13,j&=8191;let K=x+B*h+q*u+D*l+E*c+b*a;x=K>>>13,K&=8191,K+=f*(5*$)+p*(5*v)+w*(5*m)+N*(5*g)+M*(5*d),x+=K>>>13,K&=8191;let V=x+B*d+q*h+D*u+E*l+b*c;x=V>>>13,V&=8191,V+=f*a+p*(5*$)+w*(5*v)+N*(5*m)+M*(5*g),x+=V>>>13,V&=8191;let te=x+B*g+q*d+D*h+E*u+b*l;x=te>>>13,te&=8191,te+=f*c+p*a+w*(5*$)+N*(5*v)+M*(5*m),x+=te>>>13,te&=8191;let se=x+B*m+q*g+D*d+E*h+b*u;x=se>>>13,se&=8191,se+=f*l+p*c+w*a+N*(5*$)+M*(5*v),x+=se>>>13,se&=8191;let ce=x+B*v+q*m+D*g+E*d+b*h;x=ce>>>13,ce&=8191,ce+=f*u+p*l+w*c+N*a+M*(5*$),x+=ce>>>13,ce&=8191;let ie=x+B*$+q*v+D*m+E*g+b*d;x=ie>>>13,ie&=8191,ie+=f*h+p*u+w*l+N*c+M*a,x+=ie>>>13,ie&=8191,x=(x<<2)+x|0,x=x+y|0,y=x&8191,x=x>>>13,C+=x,s[0]=y,s[1]=C,s[2]=I,s[3]=j,s[4]=K,s[5]=V,s[6]=te,s[7]=se,s[8]=ce,s[9]=ie}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)n[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;_p(n)}update(e){MC(this);const{buffer:r,blockLen:n}=this;e=n4(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o===n){for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){_p(this.h,this.r,this.buffer,this.pad)}digestInto(e){MC(this),Toe(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=n[o]>>>0,e[s++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}};function Koe(t){const e=(n,i)=>t(i).update(n4(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const Voe=Koe(t=>new Hoe(t));function Goe(t,e,r,n,i,s=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],h=e[1],d=e[2],g=e[3],m=e[4],v=e[5],$=e[6],_=e[7],S=i,A=r[0],T=r[1],k=r[2],R=o,L=a,F=c,B=l,q=u,D=h,E=d,b=g,f=m,p=v,w=$,N=_,M=S,x=A,y=T,C=k;for(let j=0;j<s;j+=2)R=R+q|0,M=Mt(M^R,16),f=f+M|0,q=Mt(q^f,12),R=R+q|0,M=Mt(M^R,8),f=f+M|0,q=Mt(q^f,7),L=L+D|0,x=Mt(x^L,16),p=p+x|0,D=Mt(D^p,12),L=L+D|0,x=Mt(x^L,8),p=p+x|0,D=Mt(D^p,7),F=F+E|0,y=Mt(y^F,16),w=w+y|0,E=Mt(E^w,12),F=F+E|0,y=Mt(y^F,8),w=w+y|0,E=Mt(E^w,7),B=B+b|0,C=Mt(C^B,16),N=N+C|0,b=Mt(b^N,12),B=B+b|0,C=Mt(C^B,8),N=N+C|0,b=Mt(b^N,7),R=R+D|0,C=Mt(C^R,16),w=w+C|0,D=Mt(D^w,12),R=R+D|0,C=Mt(C^R,8),w=w+C|0,D=Mt(D^w,7),L=L+E|0,M=Mt(M^L,16),N=N+M|0,E=Mt(E^N,12),L=L+E|0,M=Mt(M^L,8),N=N+M|0,E=Mt(E^N,7),F=F+b|0,x=Mt(x^F,16),f=f+x|0,b=Mt(b^f,12),F=F+b|0,x=Mt(x^F,8),f=f+x|0,b=Mt(b^f,7),B=B+q|0,y=Mt(y^B,16),p=p+y|0,q=Mt(q^p,12),B=B+q|0,y=Mt(y^B,8),p=p+y|0,q=Mt(q^p,7);let I=0;n[I++]=o+R|0,n[I++]=a+L|0,n[I++]=c+F|0,n[I++]=l+B|0,n[I++]=u+q|0,n[I++]=h+D|0,n[I++]=d+E|0,n[I++]=g+b|0,n[I++]=m+f|0,n[I++]=v+p|0,n[I++]=$+w|0,n[I++]=_+N|0,n[I++]=S+M|0,n[I++]=A+x|0,n[I++]=T+y|0,n[I++]=k+C|0}const Yoe=Woe(Goe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Qoe=new Uint8Array(16),kC=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(Qoe.subarray(r))},Zoe=new Uint8Array(32);function RC(t,e,r,n,i){const s=t(e,r,Zoe),o=Voe.create(s);i&&kC(o,i),kC(o,n);const a=new Uint8Array(16),c=$oe(a);PC(c,0,BigInt(i?i.length:0),!0),PC(c,8,BigInt(n.length),!0),o.update(a);const l=o.digest();return _p(s,a),l}const Joe=t=>(e,r,n)=>({encrypt(i,s){const o=i.length;s=$C(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,r,a,a,1);const c=RC(t,e,r,a,n);return s.set(c,o),_p(c),s},decrypt(i,s){s=$C(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=RC(t,e,r,o,n);if(!Roe(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,r,s,s,1),_p(c),s}}),cD=Doe({blockSize:64,nonceLength:12,tagLength:16},Joe(Yoe));let lD=class extends u5{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,l5(e);const n=Ep(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return vp(this),this.iHash.update(e),this}digestInto(e){vp(this),c2(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const d5=(t,e,r)=>new lD(t,e).update(r).digest();d5.create=(t,e)=>new lD(t,e);function Xoe(t,e,r){return l5(t),r===void 0&&(r=new Uint8Array(t.outputLen)),d5(t,Ep(r),Ep(e))}const s3=new Uint8Array([0]),DC=new Uint8Array;function eae(t,e,r,n=32){if(l5(t),cm(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/t.outputLen);r===void 0&&(r=DC);const s=new Uint8Array(i*t.outputLen),o=d5.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<i;l++)s3[0]=l+1,a.update(l===0?DC:c).update(r).update(s3).digestInto(c),s.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),s3.fill(0),s.slice(0,n)}const tae=(t,e,r,n,i)=>eae(t,Xoe(t,e,r),n,i);function rae(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function nae(t,e,r){return t&e^~t&r}function iae(t,e,r){return t&e^t&r^e&r}let sae=class extends u5{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=n3(this.buffer)}update(e){vp(this);const{view:r,buffer:n,blockLen:i}=this;e=Ep(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=n3(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){vp(this),QR(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;rae(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=n3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}};const oae=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),bl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),vl=new Uint32Array(64);let aae=class extends sae{constructor(){super(64,32,8,!1),this.A=bl[0]|0,this.B=bl[1]|0,this.C=bl[2]|0,this.D=bl[3]|0,this.E=bl[4]|0,this.F=bl[5]|0,this.G=bl[6]|0,this.H=bl[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,r,n,i,s,o,a,c]}set(e,r,n,i,s,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)vl[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=vl[h-15],g=vl[h-2],m=ma(d,7)^ma(d,18)^d>>>3,v=ma(g,17)^ma(g,19)^g>>>10;vl[h]=v+vl[h-7]+m+vl[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=ma(a,6)^ma(a,11)^ma(a,25),g=u+d+nae(a,c,l)+oae[h]+vl[h]|0,m=(ma(n,2)^ma(n,13)^ma(n,22))+iae(n,i,s)|0;u=l,l=c,c=a,a=o+g|0,o=s,s=i,i=n,n=g+m|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){vl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const l2=ZR(()=>new aae);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uD=BigInt(0);function f5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function hD(t){if(!f5(t))throw new Error("Uint8Array expected")}const cae=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function lae(t){hD(t);let e="";for(let r=0;r<t.length;r++)e+=cae[t[r]];return e}function uae(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?uD:BigInt("0x"+t)}const wc={_0:48,_9:57,A:65,F:70,a:97,f:102};function LC(t){if(t>=wc._0&&t<=wc._9)return t-wc._0;if(t>=wc.A&&t<=wc.F)return t-(wc.A-10);if(t>=wc.a&&t<=wc.f)return t-(wc.a-10)}function dD(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=LC(t.charCodeAt(s)),a=LC(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function BC(t){return hD(t),uae(lae(Uint8Array.from(t).reverse()))}function hae(t,e){return dD(t.toString(16).padStart(e*2,"0"))}function dae(t,e){return hae(t,e).reverse()}function jC(t,e,r){let n;if(typeof e=="string")try{n=dD(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(f5(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const o3=t=>typeof t=="bigint"&&uD<=t;function fae(t,e,r){return o3(t)&&o3(e)&&o3(r)&&e<=t&&t<r}function UC(t,e,r,n){if(!fae(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}const pae={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||f5(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function gae(t,e,r={}){const n=(i,s,o)=>{const a=pae[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const kf=BigInt(0),Ew=BigInt(1);function fD(t,e){const r=t%e;return r>=kf?r:e+r}function mae(t,e,r){if(e<kf)throw new Error("invalid exponent, negatives unsupported");if(r<=kf)throw new Error("invalid modulus");if(r===Ew)return kf;let n=Ew;for(;e>kf;)e&Ew&&(n=n*t%r),t=t*t%r,e>>=Ew;return n}function Ko(t,e,r){let n=t;for(;e-- >kf;)n*=n,n%=r;return n}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Sd=BigInt(0),a3=BigInt(1);function yae(t){return gae(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function wae(t){const e=yae(t),{P:r}=e,n=S=>fD(S,r),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(S=>S),c=e.powPminus2||(S=>mae(S,r-BigInt(2),r));function l(S,A,T){const k=n(S*(A-T));return A=n(A-k),T=n(T+k),[A,T]}const u=(e.a-BigInt(2))/BigInt(4);function h(S,A){UC("u",S,Sd,r),UC("scalar",A,Sd,r);const T=A,k=S;let R=a3,L=Sd,F=S,B=a3,q=Sd,D;for(let b=BigInt(i-1);b>=Sd;b--){const f=T>>b&a3;q^=f,D=l(q,R,F),R=D[0],F=D[1],D=l(q,L,B),L=D[0],B=D[1],q=f;const p=R+L,w=n(p*p),N=R-L,M=n(N*N),x=w-M,y=F+B,C=F-B,I=n(C*p),j=n(y*N),K=I+j,V=I-j;F=n(K*K),B=n(k*n(V*V)),R=n(w*M),L=n(x*(w+n(u*x)))}D=l(q,R,F),R=D[0],F=D[1],D=l(q,L,B),L=D[0],B=D[1];const E=c(L);return n(R*E)}function d(S){return dae(n(S),s)}function g(S){const A=jC("u coordinate",S,s);return o===32&&(A[31]&=127),BC(A)}function m(S){const A=jC("scalar",S),T=A.length;if(T!==s&&T!==o){let k=""+s+" or "+o;throw new Error("invalid scalar, expected "+k+" bytes, got "+T)}return BC(a(A))}function v(S,A){const T=g(A),k=m(S),R=h(T,k);if(R===Sd)throw new Error("invalid private or public key received");return d(R)}const $=d(e.Gu);function _(S){return v(S,$)}return{scalarMult:v,scalarMultBase:_,getSharedSecret:(S,A)=>v(S,A),getPublicKey:S=>_(S),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:$}}const o4=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const bae=BigInt(1),FC=BigInt(2),vae=BigInt(3),Eae=BigInt(5);BigInt(8);function _ae(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=o4,o=t*t%s*t%s,a=Ko(o,FC,s)*o%s,c=Ko(a,bae,s)*t%s,l=Ko(c,Eae,s)*c%s,u=Ko(l,e,s)*l%s,h=Ko(u,r,s)*u%s,d=Ko(h,n,s)*h%s,g=Ko(d,i,s)*d%s,m=Ko(g,i,s)*d%s,v=Ko(m,e,s)*l%s;return{pow_p_5_8:Ko(v,FC,s)*t%s,b2:o}}function Sae(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const a4=wae({P:o4,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=o4,{pow_p_5_8:r,b2:n}=_ae(t);return fD(Ko(r,vae,e)*n,e)},adjustScalarBytes:Sae,randomBytes:gy}),pD="base10",Wi="base16",Vl="base64pad",x0="base64url",my="utf8",gD=0,qc=1,yy=2,xae=0,zC=1,xg=12,p5=32;function Iae(){const t=a4.utils.randomPrivateKey(),e=a4.getPublicKey(t);return{privateKey:Kt(t,Wi),publicKey:Kt(e,Wi)}}function c4(){const t=gy(p5);return Kt(t,Wi)}function Aae(t,e){const r=a4.getSharedSecret(Kr(t,Wi),Kr(e,Wi)),n=tae(l2,r,void 0,void 0,p5);return Kt(n,Wi)}function T1(t){const e=l2(Kr(t,Wi));return Kt(e,Wi)}function Pc(t){const e=l2(Kr(t,my));return Kt(e,Wi)}function mD(t){return Kr(`${t}`,pD)}function Oh(t){return Number(Kt(t,pD))}function Cae(t){const e=mD(typeof t.type<"u"?t.type:gD);if(Oh(e)===qc&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Kr(t.senderPublicKey,Wi):void 0,n=typeof t.iv<"u"?Kr(t.iv,Wi):gy(xg),i=Kr(t.symKey,Wi),s=cD(i,n).encrypt(Kr(t.message,my));return yD({type:e,sealed:s,iv:n,senderPublicKey:r,encoding:t.encoding})}function Nae(t){const e=Kr(t.symKey,Wi),{sealed:r,iv:n}=um(t),i=cD(e,n).decrypt(r);if(i===null)throw new Error("Failed to decrypt");return Kt(i,my)}function Mae(t,e){const r=mD(yy),n=gy(xg),i=Kr(t,my);return yD({type:r,sealed:i,iv:n,encoding:e})}function Tae(t,e){const{sealed:r}=um({encoded:t,encoding:e});return Kt(r,my)}function yD(t){const{encoding:e=Vl}=t;if(Oh(t.type)===yy)return Kt(Gf([t.type,t.sealed]),e);if(Oh(t.type)===qc){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Kt(Gf([t.type,t.senderPublicKey,t.iv,t.sealed]),e)}return Kt(Gf([t.type,t.iv,t.sealed]),e)}function um(t){const{encoded:e,encoding:r=Vl}=t,n=Kr(e,r),i=n.slice(xae,zC),s=zC;if(Oh(i)===qc){const l=s+p5,u=l+xg,h=n.slice(s,l),d=n.slice(l,u),g=n.slice(u);return{type:i,sealed:g,iv:d,senderPublicKey:h}}if(Oh(i)===yy){const l=n.slice(s),u=gy(xg);return{type:i,sealed:l,iv:u}}const o=s+xg,a=n.slice(s,o),c=n.slice(o);return{type:i,sealed:c,iv:a}}function $ae(t,e){const r=um({encoded:t,encoding:e==null?void 0:e.encoding});return wD({type:Oh(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Kt(r.senderPublicKey,Wi):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function wD(t){const e=(t==null?void 0:t.type)||gD;if(e===qc){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function qC(t){return t.type===qc&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function WC(t){return t.type===yy}function Pae(t){return new e5.ec("p256").keyFromPublic({x:Buffer.from(t.x,"base64").toString("hex"),y:Buffer.from(t.y,"base64").toString("hex")},"hex")}function Oae(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;return r>0&&(e+="=".repeat(4-r)),e}function kae(t){return Buffer.from(Oae(t),"base64")}function Rae(t,e){const[r,n,i]=t.split("."),s=kae(i);if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),c=`${r}.${n}`,l=l2(c),u=Pae(e),h=Kt(l,Wi);if(!u.verify(h,{r:o,s:a}))throw new Error("Invalid signature");return gp(t).payload}const Dae="irn";function Kb(t){return(t==null?void 0:t.relay)||{protocol:Dae}}function ig(t){const e=UR[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function Lae(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function HC(t){if(!t.includes("wc:")){const l=YR(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(s),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:Bae(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:Lae(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Bae(t){return t.startsWith("//")?t.substring(2):t}function jae(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=i,o=r+e+s;t[s]&&(n[o]=t[s])}),n}function KC(t){const e=new URLSearchParams,r=jae(t.relay);Object.keys(r).sort().forEach(i=>{e.set(i,r[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function _w(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function Yp(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function Uae(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Yp(r.accounts))}),e}function Fae(t,e){const r=[];return Object.values(t).forEach(n=>{Yp(n.accounts).includes(e)&&r.push(...n.methods)}),r}function zae(t,e){const r=[];return Object.values(t).forEach(n=>{Yp(n.accounts).includes(e)&&r.push(...n.events)}),r}function g5(t){return t.includes(":")}function sg(t){return g5(t)?t.split(":")[0]:t}function qae(t){const e={};return t==null||t.forEach(r=>{var n;const[i,s]=r.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(r),(n=e[i].chains)==null||n.push(`${i}:${s}`)}),e}function VC(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=qae(e);for(const[n,i]of Object.entries(r))i.methods?i.methods=N1(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return r}const Wae={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Hae={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function me(t,e){const{message:r,code:n}=Hae[t];return{message:e?`${r} ${e}`:r,code:n}}function ir(t,e){const{message:r,code:n}=Wae[t];return{message:e?`${r} ${e}`:r,code:n}}function kh(t,e){return!!Array.isArray(t)}function hm(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ji(t){return typeof t>"u"}function fn(t,e){return e&&Ji(t)?!0:typeof t=="string"&&!!t.trim().length}function m5(t,e){return e&&Ji(t)?!0:typeof t=="number"&&!isNaN(t)}function Kae(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return uh(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Yp(a),h=r[o];(!uh(zR(o,h),u)||!uh(h.methods,c)||!uh(h.events,l))&&(s=!1)}),s):!1}function Vb(t){return fn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Vae(t){if(fn(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Vb(r)}}return!1}function Gae(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(fn(t,!1)){if(e(t))return!0;const r=YR(t);return e(r)}}catch{}return!1}function Yae(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Qae(t){return t==null?void 0:t.topic}function Zae(t,e){let r=null;return fn(t==null?void 0:t.publicKey,!1)||(r=me("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function GC(t){let e=!0;return kh(t)?t.length&&(e=t.every(r=>fn(r,!1))):e=!1,e}function Jae(t,e,r){let n=null;return kh(e)&&e.length?e.forEach(i=>{n||Vb(i)||(n=ir("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Vb(t)||(n=ir("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Xae(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=Jae(i,zR(i,s),`${e} ${r}`);o&&(n=o)}),n}function ece(t,e){let r=null;return kh(t)?t.forEach(n=>{r||Vae(n)||(r=ir("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=ir("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function tce(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=ece(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function rce(t,e){let r=null;return GC(t==null?void 0:t.methods)?GC(t==null?void 0:t.events)||(r=ir("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=ir("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function bD(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=rce(n,`${e}, namespace`);i&&(r=i)}),r}function nce(t,e,r){let n=null;if(t&&hm(t)){const i=bD(t,e);i&&(n=i);const s=Xae(t,e,r);s&&(n=s)}else n=me("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function c3(t,e){let r=null;if(t&&hm(t)){const n=bD(t,e);n&&(r=n);const i=tce(t,e);i&&(r=i)}else r=me("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function vD(t){return fn(t.protocol,!0)}function ice(t,e){let r=!1;return t?t&&kh(t)&&t.length&&t.forEach(n=>{r=vD(n)}):r=!0,r}function sce(t){return typeof t=="number"}function ps(t){return typeof t<"u"&&typeof t!==null}function oce(t){return!(!t||typeof t!="object"||!t.code||!m5(t.code,!1)||!t.message||!fn(t.message,!1))}function ace(t){return!(Ji(t)||!fn(t.method,!1))}function cce(t){return!(Ji(t)||Ji(t.result)&&Ji(t.error)||!m5(t.id,!1)||!fn(t.jsonrpc,!1))}function lce(t){return!(Ji(t)||!fn(t.name,!1))}function YC(t,e){return!(!Vb(e)||!Uae(t).includes(e))}function uce(t,e,r){return fn(r,!1)?Fae(t,e).includes(r):!1}function hce(t,e,r){return fn(r,!1)?zae(t,e).includes(r):!1}function QC(t,e,r){let n=null;const i=dce(t),s=fce(e),o=Object.keys(i),a=Object.keys(s),c=ZC(Object.keys(t)),l=ZC(Object.keys(e)),u=c.filter(h=>!l.includes(h));return u.length&&(n=me("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),uh(o,a)||(n=me("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(h=>{if(!h.includes(":")||n)return;const d=Yp(e[h].accounts);d.includes(h)||(n=me("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${d.toString()}`))}),o.forEach(h=>{n||(uh(i[h].methods,s[h].methods)?uh(i[h].events,s[h].events)||(n=me("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${h}`)):n=me("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${h}`))}),n}function dce(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function ZC(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function fce(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=Yp(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function pce(t,e){return m5(t,!1)&&t<=e.max&&t>=e.min}function JC(){const t=py();return new Promise(e=>{switch(t){case Ws.browser:e(gce());break;case Ws.reactNative:e(mce());break;case Ws.node:e(yce());break;default:e(!0)}})}function gce(){return fy()&&(navigator==null?void 0:navigator.onLine)}async function mce(){if(Su()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function yce(){return!0}function wce(t){switch(py()){case Ws.browser:bce(t);break;case Ws.reactNative:vce(t);break}}function bce(t){!Su()&&fy()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function vce(t){Su()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const l3={};let I0=class{static get(e){return l3[e]}static set(e,r){l3[e]=r}static delete(e){delete l3[e]}};const Ece="PARSE_ERROR",_ce="INVALID_REQUEST",Sce="METHOD_NOT_FOUND",xce="INVALID_PARAMS",ED="INTERNAL_ERROR",y5="SERVER_ERROR",Ice=[-32700,-32600,-32601,-32602,-32603],Ig={[Ece]:{code:-32700,message:"Parse error"},[_ce]:{code:-32600,message:"Invalid Request"},[Sce]:{code:-32601,message:"Method not found"},[xce]:{code:-32602,message:"Invalid params"},[ED]:{code:-32603,message:"Internal error"},[y5]:{code:-32e3,message:"Server error"}},_D=y5;function Ace(t){return Ice.includes(t)}function XC(t){return Object.keys(Ig).includes(t)?Ig[t]:Ig[_D]}function Cce(t){const e=Object.values(Ig).find(r=>r.code===t);return e||Ig[_D]}function SD(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var xD={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var l4=function(t,e){return l4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},l4(t,e)};function Nce(t,e){l4(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var u4=function(){return u4=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},u4.apply(this,arguments)};function Mce(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Tce(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function $ce(t,e){return function(r,n){e(r,n,t)}}function Pce(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Oce(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function kce(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Rce(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Dce(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function h4(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ID(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function Lce(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ID(arguments[e]));return t}function Bce(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function dm(t){return this instanceof dm?(this.v=t,this):new dm(t)}function jce(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(g){return new Promise(function(m,v){s.push([d,g,m,v])>1||a(d,g)})})}function a(d,g){try{c(n[d](g))}catch(m){h(s[0][3],m)}}function c(d){d.value instanceof dm?Promise.resolve(d.value.v).then(l,u):h(s[0][2],d)}function l(d){a("next",d)}function u(d){a("throw",d)}function h(d,g){d(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Uce(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:dm(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function Fce(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof h4=="function"?h4(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function zce(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function qce(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Wce(t){return t&&t.__esModule?t:{default:t}}function Hce(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Kce(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const Vce=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return u4},__asyncDelegator:Uce,__asyncGenerator:jce,__asyncValues:Fce,__await:dm,__awaiter:Oce,__classPrivateFieldGet:Hce,__classPrivateFieldSet:Kce,__createBinding:Rce,__decorate:Tce,__exportStar:Dce,__extends:Nce,__generator:kce,__importDefault:Wce,__importStar:qce,__makeTemplateObject:zce,__metadata:Pce,__param:$ce,__read:ID,__rest:Mce,__spread:Lce,__spreadArrays:Bce,__values:h4},Symbol.toStringTag,{value:"Module"})),Gce=zm(Vce);var bc={},eN;function Yce(){if(eN)return bc;eN=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.isBrowserCryptoAvailable=bc.getSubtleCrypto=bc.getBrowerCrypto=void 0;function t(){return(Sr==null?void 0:Sr.crypto)||(Sr==null?void 0:Sr.msCrypto)||{}}bc.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}bc.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return bc.isBrowserCryptoAvailable=r,bc}var vc={},tN;function Qce(){if(tN)return vc;tN=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.isBrowser=vc.isNode=vc.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}vc.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}vc.isNode=e;function r(){return!t()&&!e()}return vc.isBrowser=r,vc}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Gce;e.__exportStar(Yce(),t),e.__exportStar(Qce(),t)})(xD);function Vn(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Hs(t=6){return BigInt(Vn(t))}function es(t,e,r){return{id:r||Vn(),jsonrpc:"2.0",method:t,params:e}}function xu(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Qp(t,e,r){return{id:t,jsonrpc:"2.0",error:Zce(e)}}function Zce(t,e){return typeof t>"u"?XC(ED):(typeof t=="string"&&(t=Object.assign(Object.assign({},XC(y5)),{message:t})),Ace(t.code)&&(t=Cce(t.code)),t)}let Jce=class{},Xce=class extends Jce{constructor(){super()}},ele=class extends Xce{constructor(e){super()}};const tle="^https?:",rle="^wss?:";function nle(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function AD(t,e){const r=nle(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function rN(t){return AD(t,tle)}function nN(t){return AD(t,rle)}function ile(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function CD(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Zp(t){return CD(t)&&"method"in t}function td(t){return CD(t)&&(kn(t)||ln(t))}function kn(t){return"result"in t}function ln(t){return"error"in t}let Vr=class extends ele{constructor(e){super(e),this.events=new Dn.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(es(e.method,e.params||[],e.id||Hs().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{ln(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),td(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const sle=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),ole=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",iN=t=>t.split("?")[0],sN=10,ale=sle();let ND=class{constructor(e){if(this.url=e,this.events=new Dn.EventEmitter,this.registering=!1,!nN(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Mo(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!nN(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=xD.isReactNative()?void 0:{rejectUnauthorized:!ile(e)},s=new ale(e,[],i);ole()?s.onerror=o=>{const a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?la(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Qp(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return SD(e,iN(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>sN&&this.events.setMaxListeners(sN)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${iN(this.url)}`));return this.events.emit("register_error",r),r}};var Gb={exports:{}};Gb.exports;(function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",h="[object Date]",d="[object Error]",g="[object Function]",m="[object GeneratorFunction]",v="[object Map]",$="[object Number]",_="[object Null]",S="[object Object]",A="[object Promise]",T="[object Proxy]",k="[object RegExp]",R="[object Set]",L="[object String]",F="[object Symbol]",B="[object Undefined]",q="[object WeakMap]",D="[object ArrayBuffer]",E="[object DataView]",b="[object Float32Array]",f="[object Float64Array]",p="[object Int8Array]",w="[object Int16Array]",N="[object Int32Array]",M="[object Uint8Array]",x="[object Uint8ClampedArray]",y="[object Uint16Array]",C="[object Uint32Array]",I=/[\\^$.*+?()[\]{}|]/g,j=/^\[object .+?Constructor\]$/,K=/^(?:0|[1-9]\d*)$/,V={};V[b]=V[f]=V[p]=V[w]=V[N]=V[M]=V[x]=V[y]=V[C]=!0,V[a]=V[c]=V[D]=V[u]=V[E]=V[h]=V[d]=V[g]=V[v]=V[$]=V[S]=V[k]=V[R]=V[L]=V[q]=!1;var te=typeof Sr=="object"&&Sr&&Sr.Object===Object&&Sr,se=typeof self=="object"&&self&&self.Object===Object&&self,ce=te||se||Function("return this")(),ie=e&&!e.nodeType&&e,ve=ie&&!0&&t&&!t.nodeType&&t,Me=ve&&ve.exports===ie,Ce=Me&&te.process,et=function(){try{return Ce&&Ce.binding&&Ce.binding("util")}catch{}}(),tt=et&&et.isTypedArray;function Fe(H,Q){for(var oe=-1,xe=H==null?0:H.length,Rr=0,at=[];++oe<xe;){var sn=H[oe];Q(sn,oe,H)&&(at[Rr++]=sn)}return at}function Gt(H,Q){for(var oe=-1,xe=Q.length,Rr=H.length;++oe<xe;)H[Rr+oe]=Q[oe];return H}function Lt(H,Q){for(var oe=-1,xe=H==null?0:H.length;++oe<xe;)if(Q(H[oe],oe,H))return!0;return!1}function Ye(H,Q){for(var oe=-1,xe=Array(H);++oe<H;)xe[oe]=Q(oe);return xe}function Ft(H){return function(Q){return H(Q)}}function Bt(H,Q){return H.has(Q)}function Be(H,Q){return H==null?void 0:H[Q]}function ft(H){var Q=-1,oe=Array(H.size);return H.forEach(function(xe,Rr){oe[++Q]=[Rr,xe]}),oe}function Nt(H,Q){return function(oe){return H(Q(oe))}}function Ve(H){var Q=-1,oe=Array(H.size);return H.forEach(function(xe){oe[++Q]=xe}),oe}var mt=Array.prototype,zt=Function.prototype,U=Object.prototype,P=ce["__core-js_shared__"],O=zt.toString,z=U.hasOwnProperty,G=function(){var H=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||"");return H?"Symbol(src)_1."+H:""}(),Z=U.toString,ee=RegExp("^"+O.call(z).replace(I,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ne=Me?ce.Buffer:void 0,ze=ce.Symbol,Se=ce.Uint8Array,We=U.propertyIsEnumerable,De=mt.splice,He=ze?ze.toStringTag:void 0,fr=Object.getOwnPropertySymbols,Cr=Ne?Ne.isBuffer:void 0,rt=Nt(Object.keys,Object),or=ud(ce,"DataView"),Yt=ud(ce,"Map"),Ze=ud(ce,"Promise"),ar=ud(ce,"Set"),cr=ud(ce,"WeakMap"),Qe=ud(Object,"create"),Nr=Au(or),Mr=Au(Yt),nt=Au(Ze),Tr=Au(ar),$r=Au(cr),Je=ze?ze.prototype:void 0,lr=Je?Je.valueOf:void 0;function jt(H){var Q=-1,oe=H==null?0:H.length;for(this.clear();++Q<oe;){var xe=H[Q];this.set(xe[0],xe[1])}}function it(){this.__data__=Qe?Qe(null):{},this.size=0}function Pr(H){var Q=this.has(H)&&delete this.__data__[H];return this.size-=Q?1:0,Q}function Or(H){var Q=this.__data__;if(Qe){var oe=Q[H];return oe===n?void 0:oe}return z.call(Q,H)?Q[H]:void 0}function st(H){var Q=this.__data__;return Qe?Q[H]!==void 0:z.call(Q,H)}function kr(H,Q){var oe=this.__data__;return this.size+=this.has(H)?0:1,oe[H]=Qe&&Q===void 0?n:Q,this}jt.prototype.clear=it,jt.prototype.delete=Pr,jt.prototype.get=Or,jt.prototype.has=st,jt.prototype.set=kr;function xt(H){var Q=-1,oe=H==null?0:H.length;for(this.clear();++Q<oe;){var xe=H[Q];this.set(xe[0],xe[1])}}function pr(){this.__data__=[],this.size=0}function Ja(H){var Q=this.__data__,oe=My(Q,H);if(oe<0)return!1;var xe=Q.length-1;return oe==xe?Q.pop():De.call(Q,oe,1),--this.size,!0}function Xa(H){var Q=this.__data__,oe=My(Q,H);return oe<0?void 0:Q[oe][1]}function ec(H){return My(this.__data__,H)>-1}function tc(H,Q){var oe=this.__data__,xe=My(oe,H);return xe<0?(++this.size,oe.push([H,Q])):oe[xe][1]=Q,this}xt.prototype.clear=pr,xt.prototype.delete=Ja,xt.prototype.get=Xa,xt.prototype.has=ec,xt.prototype.set=tc;function Vi(H){var Q=-1,oe=H==null?0:H.length;for(this.clear();++Q<oe;){var xe=H[Q];this.set(xe[0],xe[1])}}function rc(){this.size=0,this.__data__={hash:new jt,map:new(Yt||xt),string:new jt}}function nc(H){var Q=Ty(this,H).delete(H);return this.size-=Q?1:0,Q}function ic(H){return Ty(this,H).get(H)}function sc(H){return Ty(this,H).has(H)}function oc(H,Q){var oe=Ty(this,H),xe=oe.size;return oe.set(H,Q),this.size+=oe.size==xe?0:1,this}Vi.prototype.clear=rc,Vi.prototype.delete=nc,Vi.prototype.get=ic,Vi.prototype.has=sc,Vi.prototype.set=oc;function so(H){var Q=-1,oe=H==null?0:H.length;for(this.__data__=new Vi;++Q<oe;)this.add(H[Q])}function ac(H){return this.__data__.set(H,n),this}function cc(H){return this.__data__.has(H)}so.prototype.add=so.prototype.push=ac,so.prototype.has=cc;function Ci(H){var Q=this.__data__=new xt(H);this.size=Q.size}function lc(){this.__data__=new xt,this.size=0}function uc(H){var Q=this.__data__,oe=Q.delete(H);return this.size=Q.size,oe}function hc(H){return this.__data__.get(H)}function r0(H){return this.__data__.has(H)}function n0(H,Q){var oe=this.__data__;if(oe instanceof xt){var xe=oe.__data__;if(!Yt||xe.length<r-1)return xe.push([H,Q]),this.size=++oe.size,this;oe=this.__data__=new Vi(xe)}return oe.set(H,Q),this.size=oe.size,this}Ci.prototype.clear=lc,Ci.prototype.delete=uc,Ci.prototype.get=hc,Ci.prototype.has=r0,Ci.prototype.set=n0;function hj(H,Q){var oe=$y(H),xe=!oe&&Aj(H),Rr=!oe&&!xe&&A2(H),at=!oe&&!xe&&!Rr&&Z5(H),sn=oe||xe||Rr||at,Ln=sn?Ye(H.length,String):[],ri=Ln.length;for(var Gr in H)z.call(H,Gr)&&!(sn&&(Gr=="length"||Rr&&(Gr=="offset"||Gr=="parent")||at&&(Gr=="buffer"||Gr=="byteLength"||Gr=="byteOffset")||Ej(Gr,ri)))&&Ln.push(Gr);return Ln}function My(H,Q){for(var oe=H.length;oe--;)if(V5(H[oe][0],Q))return oe;return-1}function dj(H,Q,oe){var xe=Q(H);return $y(H)?xe:Gt(xe,oe(H))}function i0(H){return H==null?H===void 0?B:_:He&&He in Object(H)?bj(H):Ij(H)}function q5(H){return s0(H)&&i0(H)==a}function W5(H,Q,oe,xe,Rr){return H===Q?!0:H==null||Q==null||!s0(H)&&!s0(Q)?H!==H&&Q!==Q:fj(H,Q,oe,xe,W5,Rr)}function fj(H,Q,oe,xe,Rr,at){var sn=$y(H),Ln=$y(Q),ri=sn?c:ol(H),Gr=Ln?c:ol(Q);ri=ri==a?S:ri,Gr=Gr==a?S:Gr;var Ns=ri==S,Ro=Gr==S,Ni=ri==Gr;if(Ni&&A2(H)){if(!A2(Q))return!1;sn=!0,Ns=!1}if(Ni&&!Ns)return at||(at=new Ci),sn||Z5(H)?H5(H,Q,oe,xe,Rr,at):yj(H,Q,ri,oe,xe,Rr,at);if(!(oe&i)){var oo=Ns&&z.call(H,"__wrapped__"),ao=Ro&&z.call(Q,"__wrapped__");if(oo||ao){var al=oo?H.value():H,dc=ao?Q.value():Q;return at||(at=new Ci),Rr(al,dc,oe,xe,at)}}return Ni?(at||(at=new Ci),wj(H,Q,oe,xe,Rr,at)):!1}function pj(H){if(!Q5(H)||Sj(H))return!1;var Q=G5(H)?ee:j;return Q.test(Au(H))}function gj(H){return s0(H)&&Y5(H.length)&&!!V[i0(H)]}function mj(H){if(!xj(H))return rt(H);var Q=[];for(var oe in Object(H))z.call(H,oe)&&oe!="constructor"&&Q.push(oe);return Q}function H5(H,Q,oe,xe,Rr,at){var sn=oe&i,Ln=H.length,ri=Q.length;if(Ln!=ri&&!(sn&&ri>Ln))return!1;var Gr=at.get(H);if(Gr&&at.get(Q))return Gr==Q;var Ns=-1,Ro=!0,Ni=oe&s?new so:void 0;for(at.set(H,Q),at.set(Q,H);++Ns<Ln;){var oo=H[Ns],ao=Q[Ns];if(xe)var al=sn?xe(ao,oo,Ns,Q,H,at):xe(oo,ao,Ns,H,Q,at);if(al!==void 0){if(al)continue;Ro=!1;break}if(Ni){if(!Lt(Q,function(dc,Cu){if(!Bt(Ni,Cu)&&(oo===dc||Rr(oo,dc,oe,xe,at)))return Ni.push(Cu)})){Ro=!1;break}}else if(!(oo===ao||Rr(oo,ao,oe,xe,at))){Ro=!1;break}}return at.delete(H),at.delete(Q),Ro}function yj(H,Q,oe,xe,Rr,at,sn){switch(oe){case E:if(H.byteLength!=Q.byteLength||H.byteOffset!=Q.byteOffset)return!1;H=H.buffer,Q=Q.buffer;case D:return!(H.byteLength!=Q.byteLength||!at(new Se(H),new Se(Q)));case u:case h:case $:return V5(+H,+Q);case d:return H.name==Q.name&&H.message==Q.message;case k:case L:return H==Q+"";case v:var Ln=ft;case R:var ri=xe&i;if(Ln||(Ln=Ve),H.size!=Q.size&&!ri)return!1;var Gr=sn.get(H);if(Gr)return Gr==Q;xe|=s,sn.set(H,Q);var Ns=H5(Ln(H),Ln(Q),xe,Rr,at,sn);return sn.delete(H),Ns;case F:if(lr)return lr.call(H)==lr.call(Q)}return!1}function wj(H,Q,oe,xe,Rr,at){var sn=oe&i,Ln=K5(H),ri=Ln.length,Gr=K5(Q),Ns=Gr.length;if(ri!=Ns&&!sn)return!1;for(var Ro=ri;Ro--;){var Ni=Ln[Ro];if(!(sn?Ni in Q:z.call(Q,Ni)))return!1}var oo=at.get(H);if(oo&&at.get(Q))return oo==Q;var ao=!0;at.set(H,Q),at.set(Q,H);for(var al=sn;++Ro<ri;){Ni=Ln[Ro];var dc=H[Ni],Cu=Q[Ni];if(xe)var J5=sn?xe(Cu,dc,Ni,Q,H,at):xe(dc,Cu,Ni,H,Q,at);if(!(J5===void 0?dc===Cu||Rr(dc,Cu,oe,xe,at):J5)){ao=!1;break}al||(al=Ni=="constructor")}if(ao&&!al){var Py=H.constructor,Oy=Q.constructor;Py!=Oy&&"constructor"in H&&"constructor"in Q&&!(typeof Py=="function"&&Py instanceof Py&&typeof Oy=="function"&&Oy instanceof Oy)&&(ao=!1)}return at.delete(H),at.delete(Q),ao}function K5(H){return dj(H,Mj,vj)}function Ty(H,Q){var oe=H.__data__;return _j(Q)?oe[typeof Q=="string"?"string":"hash"]:oe.map}function ud(H,Q){var oe=Be(H,Q);return pj(oe)?oe:void 0}function bj(H){var Q=z.call(H,He),oe=H[He];try{H[He]=void 0;var xe=!0}catch{}var Rr=Z.call(H);return xe&&(Q?H[He]=oe:delete H[He]),Rr}var vj=fr?function(H){return H==null?[]:(H=Object(H),Fe(fr(H),function(Q){return We.call(H,Q)}))}:Tj,ol=i0;(or&&ol(new or(new ArrayBuffer(1)))!=E||Yt&&ol(new Yt)!=v||Ze&&ol(Ze.resolve())!=A||ar&&ol(new ar)!=R||cr&&ol(new cr)!=q)&&(ol=function(H){var Q=i0(H),oe=Q==S?H.constructor:void 0,xe=oe?Au(oe):"";if(xe)switch(xe){case Nr:return E;case Mr:return v;case nt:return A;case Tr:return R;case $r:return q}return Q});function Ej(H,Q){return Q=Q??o,!!Q&&(typeof H=="number"||K.test(H))&&H>-1&&H%1==0&&H<Q}function _j(H){var Q=typeof H;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?H!=="__proto__":H===null}function Sj(H){return!!G&&G in H}function xj(H){var Q=H&&H.constructor,oe=typeof Q=="function"&&Q.prototype||U;return H===oe}function Ij(H){return Z.call(H)}function Au(H){if(H!=null){try{return O.call(H)}catch{}try{return H+""}catch{}}return""}function V5(H,Q){return H===Q||H!==H&&Q!==Q}var Aj=q5(function(){return arguments}())?q5:function(H){return s0(H)&&z.call(H,"callee")&&!We.call(H,"callee")},$y=Array.isArray;function Cj(H){return H!=null&&Y5(H.length)&&!G5(H)}var A2=Cr||$j;function Nj(H,Q){return W5(H,Q)}function G5(H){if(!Q5(H))return!1;var Q=i0(H);return Q==g||Q==m||Q==l||Q==T}function Y5(H){return typeof H=="number"&&H>-1&&H%1==0&&H<=o}function Q5(H){var Q=typeof H;return H!=null&&(Q=="object"||Q=="function")}function s0(H){return H!=null&&typeof H=="object"}var Z5=tt?Ft(tt):gj;function Mj(H){return Cj(H)?hj(H):mj(H)}function Tj(){return[]}function $j(){return!1}t.exports=Nj})(Gb,Gb.exports);var cle=Gb.exports;const lle=ha(cle),MD="wc",TD=2,d4="core",qa=`${MD}@2:${d4}:`,ule={logger:"error"},hle={database:":memory:"},dle="crypto",oN="client_ed25519_seed",fle=J.ONE_DAY,ple="keychain",gle="0.3",mle="messages",yle="0.3",aN=J.SIX_HOURS,wle="publisher",$D="irn",ble="error",PD="wss://relay.walletconnect.org",vle="relayer",Gn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Ele="_subscription",uo={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},_le=.1,f4="2.19.0",Br={link_mode:"link_mode",relay:"relay"},Sle="0.3",xle="WALLETCONNECT_CLIENT_ID",cN="WALLETCONNECT_LINK_MODE_APPS",Ps={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Ile="subscription",Ale="0.3",Cle=J.FIVE_SECONDS*1e3,Nle="pairing",Mle="0.3",A0={wc_pairingDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:J.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:J.ONE_DAY,prompt:!1,tag:0},res:{ttl:J.ONE_DAY,prompt:!1,tag:0}}},Qu={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},jo={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Tle="history",$le="0.3",Ple="expirer",mo={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Ole="0.3",kle="verify-api",Rle="https://verify.walletconnect.com",OD="https://verify.walletconnect.org",Ag=OD,Dle=`${Ag}/v3`,Lle=[Rle,OD],Ble="echo",jle="https://echo.walletconnect.com",xa={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Ac={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Uo={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},$u={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Pu={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},C0={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Ule=.1,Fle="event-client",zle=86400,qle="https://pulse.walletconnect.org/batch";function Wle(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var v=0,$=0,_=0,S=m.length;_!==S&&m[_]===0;)_++,v++;for(var A=(S-_)*u+1>>>0,T=new Uint8Array(A);_!==S;){for(var k=m[_],R=0,L=A-1;(k!==0||R<$)&&L!==-1;L--,R++)k+=256*T[L]>>>0,T[L]=k%a>>>0,k=k/a>>>0;if(k!==0)throw new Error("Non-zero carry");$=R,_++}for(var F=A-$;F!==A&&T[F]===0;)F++;for(var B=c.repeat(v);F<A;++F)B+=t.charAt(T[F]);return B}function d(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var v=0;if(m[v]!==" "){for(var $=0,_=0;m[v]===c;)$++,v++;for(var S=(m.length-v)*l+1>>>0,A=new Uint8Array(S);m[v];){var T=r[m.charCodeAt(v)];if(T===255)return;for(var k=0,R=S-1;(T!==0||k<_)&&R!==-1;R--,k++)T+=a*A[R]>>>0,A[R]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");_=k,v++}if(m[v]!==" "){for(var L=S-_;L!==S&&A[L]===0;)L++;for(var F=new Uint8Array($+(S-L)),B=$;L!==S;)F[B++]=A[L++];return F}}}function g(m){var v=d(m);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:g}}var Hle=Wle,Kle=Hle;const kD=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Vle=t=>new TextEncoder().encode(t),Gle=t=>new TextDecoder().decode(t);let Yle=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Qle=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return RD(this,e)}},Zle=class{constructor(e){this.decoders=e}or(e){return RD(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const RD=(t,e)=>new Zle({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Jle=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Yle(e,r,n),this.decoder=new Qle(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const u2=({name:t,prefix:e,encode:r,decode:n})=>new Jle(t,e,r,n),wy=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Kle(r,e);return u2({prefix:t,name:e,encode:n,decode:s=>kD(i(s))})},Xle=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},eue=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Ii=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>u2({prefix:e,name:t,encode(i){return eue(i,n,r)},decode(i){return Xle(i,n,r,t)}}),tue=u2({prefix:"\0",name:"identity",encode:t=>Gle(t),decode:t=>Vle(t)});var rue=Object.freeze({__proto__:null,identity:tue});const nue=Ii({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var iue=Object.freeze({__proto__:null,base2:nue});const sue=Ii({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var oue=Object.freeze({__proto__:null,base8:sue});const aue=wy({prefix:"9",name:"base10",alphabet:"0123456789"});var cue=Object.freeze({__proto__:null,base10:aue});const lue=Ii({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),uue=Ii({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var hue=Object.freeze({__proto__:null,base16:lue,base16upper:uue});const due=Ii({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),fue=Ii({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),pue=Ii({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),gue=Ii({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),mue=Ii({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),yue=Ii({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),wue=Ii({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),bue=Ii({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),vue=Ii({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Eue=Object.freeze({__proto__:null,base32:due,base32upper:fue,base32pad:pue,base32padupper:gue,base32hex:mue,base32hexupper:yue,base32hexpad:wue,base32hexpadupper:bue,base32z:vue});const _ue=wy({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Sue=wy({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var xue=Object.freeze({__proto__:null,base36:_ue,base36upper:Sue});const Iue=wy({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Aue=wy({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Cue=Object.freeze({__proto__:null,base58btc:Iue,base58flickr:Aue});const Nue=Ii({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Mue=Ii({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Tue=Ii({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$ue=Ii({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Pue=Object.freeze({__proto__:null,base64:Nue,base64pad:Mue,base64url:Tue,base64urlpad:$ue});const DD=Array.from(""),Oue=DD.reduce((t,e,r)=>(t[r]=e,t),[]),kue=DD.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Rue(t){return t.reduce((e,r)=>(e+=Oue[r],e),"")}function Due(t){const e=[];for(const r of t){const n=kue[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Lue=u2({prefix:"",name:"base256emoji",encode:Rue,decode:Due});var Bue=Object.freeze({__proto__:null,base256emoji:Lue}),jue=LD,lN=128,Uue=-128,Fue=Math.pow(2,31);function LD(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Fue;)e[r++]=t&255|lN,t/=128;for(;t&Uue;)e[r++]=t&255|lN,t>>>=7;return e[r]=t|0,LD.bytes=r-n+1,e}var zue=p4,que=128,uN=127;function p4(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw p4.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&uN)<<i:(o&uN)*Math.pow(2,i),i+=7}while(o>=que);return p4.bytes=s-n,r}var Wue=Math.pow(2,7),Hue=Math.pow(2,14),Kue=Math.pow(2,21),Vue=Math.pow(2,28),Gue=Math.pow(2,35),Yue=Math.pow(2,42),Que=Math.pow(2,49),Zue=Math.pow(2,56),Jue=Math.pow(2,63),Xue=function(t){return t<Wue?1:t<Hue?2:t<Kue?3:t<Vue?4:t<Gue?5:t<Yue?6:t<Que?7:t<Zue?8:t<Jue?9:10},ehe={encode:jue,decode:zue,encodingLength:Xue},BD=ehe;const hN=(t,e,r=0)=>(BD.encode(t,e,r),e),dN=t=>BD.encodingLength(t),g4=(t,e)=>{const r=e.byteLength,n=dN(t),i=n+dN(r),s=new Uint8Array(i+r);return hN(t,s,0),hN(r,s,n),s.set(e,i),new the(t,r,e,s)};let the=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};const jD=({name:t,code:e,encode:r})=>new rhe(t,e,r);let rhe=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?g4(this.code,r):r.then(n=>g4(this.code,n))}else throw Error("Unknown type, must be binary type")}};const UD=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),nhe=jD({name:"sha2-256",code:18,encode:UD("SHA-256")}),ihe=jD({name:"sha2-512",code:19,encode:UD("SHA-512")});var she=Object.freeze({__proto__:null,sha256:nhe,sha512:ihe});const FD=0,ohe="identity",zD=kD,ahe=t=>g4(FD,zD(t)),che={code:FD,name:ohe,encode:zD,digest:ahe};var lhe=Object.freeze({__proto__:null,identity:che});new TextEncoder,new TextDecoder;const fN={...rue,...iue,...oue,...cue,...hue,...Eue,...xue,...Cue,...Pue,...Bue};({...she,...lhe});function uhe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function qD(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const pN=qD("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),u3=qD("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=uhe(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),hhe={utf8:pN,"utf-8":pN,hex:fN.base16,latin1:u3,ascii:u3,binary:u3,...fN};function dhe(t,e="utf8"){const r=hhe[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var fhe=Object.defineProperty,phe=(t,e,r)=>e in t?fhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ya=(t,e,r)=>phe(t,typeof e!="symbol"?e+"":e,r);let ghe=class{constructor(e,r){this.core=e,this.logger=r,ya(this,"keychain",new Map),ya(this,"name",ple),ya(this,"version",gle),ya(this,"initialized",!1),ya(this,"storagePrefix",qa),ya(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),ya(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),ya(this,"set",async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()}),ya(this,"get",n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=me("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i}),ya(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=Vt(r,this.name)}get context(){return dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,HR(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?KR(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}};var mhe=Object.defineProperty,yhe=(t,e,r)=>e in t?mhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ii=(t,e,r)=>yhe(t,typeof e!="symbol"?e+"":e,r);let whe=class{constructor(e,r,n){this.core=e,this.logger=r,ii(this,"name",dle),ii(this,"keychain"),ii(this,"randomSessionIdentifier",c4()),ii(this,"initialized",!1),ii(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),ii(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),ii(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=jb(i);return QI(s.publicKey)}),ii(this,"generateKeyPair",()=>{this.isInitialized();const i=Iae();return this.setPrivateKey(i.publicKey,i.privateKey)}),ii(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=jb(s),a=this.randomSessionIdentifier;return await G7(a,i,fle,o)}),ii(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=Aae(a,s);return this.setSymKey(c,o)}),ii(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||T1(i);return await this.keychain.set(o,i),o}),ii(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),ii(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),ii(this,"encode",async(i,s,o)=>{this.isInitialized();const a=wD(o),c=Mo(s);if(WC(a))return Mae(c,o==null?void 0:o.encoding);if(qC(a)){const d=a.senderPublicKey,g=a.receiverPublicKey;i=await this.generateSharedKey(d,g)}const l=this.getSymKey(i),{type:u,senderPublicKey:h}=a;return Cae({type:u,symKey:l,message:c,senderPublicKey:h,encoding:o==null?void 0:o.encoding})}),ii(this,"decode",async(i,s,o)=>{this.isInitialized();const a=$ae(s,o);if(WC(a)){const c=Tae(s,o==null?void 0:o.encoding);return la(c)}if(qC(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=Nae({symKey:c,encoded:s,encoding:o==null?void 0:o.encoding});return la(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),ii(this,"getPayloadType",(i,s=Vl)=>{const o=um({encoded:i,encoding:s});return Oh(o.type)}),ii(this,"getPayloadSenderPublicKey",(i,s=Vl)=>{const o=um({encoded:i,encoding:s});return o.senderPublicKey?Kt(o.senderPublicKey,Wi):void 0}),this.core=e,this.logger=Vt(r,this.name),this.keychain=n||new ghe(this.core,this.logger)}get context(){return dr(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(oN)}catch{e=c4(),await this.keychain.set(oN,e)}return dhe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}};var bhe=Object.defineProperty,vhe=(t,e,r)=>e in t?bhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wa=(t,e,r)=>vhe(t,typeof e!="symbol"?e+"":e,r);let Ehe=class extends hJ{constructor(e,r){super(e,r),this.logger=e,this.core=r,wa(this,"messages",new Map),wa(this,"name",mle),wa(this,"version",yle),wa(this,"initialized",!1),wa(this,"storagePrefix",qa),wa(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),wa(this,"set",async(n,i)=>{this.isInitialized();const s=Pc(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s}),wa(this,"get",n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i}),wa(this,"has",(n,i)=>{this.isInitialized();const s=this.get(n),o=Pc(i);return typeof s[o]<"u"}),wa(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()}),this.logger=Vt(e,this.name),this.core=r}get context(){return dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,HR(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?KR(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}};var _he=Object.defineProperty,She=Object.defineProperties,xhe=Object.getOwnPropertyDescriptors,gN=Object.getOwnPropertySymbols,Ihe=Object.prototype.hasOwnProperty,Ahe=Object.prototype.propertyIsEnumerable,m4=(t,e,r)=>e in t?_he(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Sw=(t,e)=>{for(var r in e||(e={}))Ihe.call(e,r)&&m4(t,r,e[r]);if(gN)for(var r of gN(e))Ahe.call(e,r)&&m4(t,r,e[r]);return t},h3=(t,e)=>She(t,xhe(e)),Fo=(t,e,r)=>m4(t,typeof e!="symbol"?e+"":e,r);let Che=class extends dJ{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Fo(this,"events",new Dn.EventEmitter),Fo(this,"name",wle),Fo(this,"queue",new Map),Fo(this,"publishTimeout",J.toMiliseconds(J.ONE_MINUTE)),Fo(this,"initialPublishTimeout",J.toMiliseconds(J.ONE_SECOND*15)),Fo(this,"needsTransportRestart",!1),Fo(this,"publish",async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});const a=(s==null?void 0:s.ttl)||aN,c=Kb(s),l=(s==null?void 0:s.prompt)||!1,u=(s==null?void 0:s.tag)||0,h=(s==null?void 0:s.id)||Hs().toString(),d={topic:n,message:i,opts:{ttl:a,relay:c,prompt:l,tag:u,id:h,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}},g=`Failed to publish payload, please try again. id:${h} tag:${u}`;try{const m=new Promise(async v=>{const $=({id:S})=>{d.opts.id===S&&(this.removeRequestFromQueue(S),this.relayer.events.removeListener(Gn.publish,$),v(d))};this.relayer.events.on(Gn.publish,$);const _=Kl(new Promise((S,A)=>{this.rpcPublish({topic:n,message:i,ttl:a,prompt:l,tag:u,id:h,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}).then(S).catch(T=>{this.logger.warn(T,T==null?void 0:T.message),A(T)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${h} tag:${u}`);try{await _,this.events.removeListener(Gn.publish,$)}catch(S){this.queue.set(h,h3(Sw({},d),{attempt:1})),this.logger.warn(S,S==null?void 0:S.message)}});this.logger.trace({type:"method",method:"publish",params:{id:h,topic:n,message:i,opts:s}}),await Kl(m,this.publishTimeout,g)}catch(m){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(m),(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw m}finally{this.queue.delete(h)}}),Fo(this,"on",(n,i)=>{this.events.on(n,i)}),Fo(this,"once",(n,i)=>{this.events.once(n,i)}),Fo(this,"off",(n,i)=>{this.events.off(n,i)}),Fo(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.relayer=e,this.logger=Vt(r,this.name),this.registerEventListeners()}get context(){return dr(this.logger)}async rpcPublish(e){var r,n,i,s;const{topic:o,message:a,ttl:c=aN,prompt:l,tag:u,id:h,attestation:d,tvf:g}=e,m={method:ig(Kb().protocol).publish,params:Sw({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:d},g),id:h};Ji((r=m.params)==null?void 0:r.prompt)&&((n=m.params)==null||delete n.prompt),Ji((i=m.params)==null?void 0:i.tag)&&((s=m.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:m});const v=await this.relayer.request(m);return this.relayer.events.emit(Gn.publish,e),this.logger.debug("Successfully Published Payload"),v}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const n=e.attempt+1;this.queue.set(r,h3(Sw({},e),{attempt:n}));const{topic:i,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),await this.rpcPublish(h3(Sw({},e),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(da.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Gn.connection_stalled);return}this.checkQueue()}),this.relayer.on(Gn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}};var Nhe=Object.defineProperty,Mhe=(t,e,r)=>e in t?Nhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xd=(t,e,r)=>Mhe(t,typeof e!="symbol"?e+"":e,r);let The=class{constructor(){xd(this,"map",new Map),xd(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),xd(this,"get",e=>this.map.get(e)||[]),xd(this,"exists",(e,r)=>this.get(e).includes(r)),xd(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),xd(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}};var $he=Object.defineProperty,Phe=Object.defineProperties,Ohe=Object.getOwnPropertyDescriptors,mN=Object.getOwnPropertySymbols,khe=Object.prototype.hasOwnProperty,Rhe=Object.prototype.propertyIsEnumerable,y4=(t,e,r)=>e in t?$he(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,N0=(t,e)=>{for(var r in e||(e={}))khe.call(e,r)&&y4(t,r,e[r]);if(mN)for(var r of mN(e))Rhe.call(e,r)&&y4(t,r,e[r]);return t},d3=(t,e)=>Phe(t,Ohe(e)),nr=(t,e,r)=>y4(t,typeof e!="symbol"?e+"":e,r);let Dhe=class extends gJ{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,nr(this,"subscriptions",new Map),nr(this,"topicMap",new The),nr(this,"events",new Dn.EventEmitter),nr(this,"name",Ile),nr(this,"version",Ale),nr(this,"pending",new Map),nr(this,"cached",[]),nr(this,"initialized",!1),nr(this,"pendingSubscriptionWatchLabel","pending_sub_watch_label"),nr(this,"pollingInterval",20),nr(this,"storagePrefix",qa),nr(this,"subscribeTimeout",J.toMiliseconds(J.ONE_MINUTE)),nr(this,"initialSubscribeTimeout",J.toMiliseconds(J.ONE_SECOND*15)),nr(this,"clientId"),nr(this,"batchSubscribeTopicsLimit",500),nr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),nr(this,"subscribe",async(n,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=Kb(i),o={topic:n,relay:s,transportType:i==null?void 0:i.transportType};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),nr(this,"unsubscribe",async(n,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)}),nr(this,"isSubscribed",async n=>{if(this.topics.includes(n))return!0;const i=`${this.pendingSubscriptionWatchLabel}_${n}`;return await new Promise((s,o)=>{const a=new J.Watch;a.start(i);const c=setInterval(()=>{(!this.pending.has(n)&&this.topics.includes(n)||this.cached.some(l=>l.topic===n))&&(clearInterval(c),a.stop(i),s(!0)),a.elapsed(i)>=Cle&&(clearInterval(c),a.stop(i),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)}),nr(this,"on",(n,i)=>{this.events.on(n,i)}),nr(this,"once",(n,i)=>{this.events.once(n,i)}),nr(this,"off",(n,i)=>{this.events.off(n,i)}),nr(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),nr(this,"start",async()=>{await this.onConnect()}),nr(this,"stop",async()=>{await this.onDisconnect()}),nr(this,"restart",async()=>{await this.restore(),await this.onRestart()}),nr(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(i=>{n.push(i)}),await this.batchSubscribe(n)}),nr(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(da.pulse,async()=>{await this.checkPending()}),this.events.on(Ps.created,async n=>{const i=Ps.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()}),this.events.on(Ps.deleted,async n=>{const i=Ps.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()})}),this.relayer=e,this.logger=Vt(r,this.name),this.clientId=""}get context(){return dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=Kb(n);await this.restartToComplete({topic:e,id:r,relay:i}),await this.rpcUnsubscribe(e,r,i);const s=ir("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r,n){var i;(!n||(n==null?void 0:n.transportType)===Br.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const s={method:ig(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=n==null?void 0:n.internal)==null?void 0:i.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((n==null?void 0:n.transportType)===Br.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(u=>this.logger.warn(u))},J.toMiliseconds(J.ONE_SECOND)),a;const c=new Promise(async u=>{const h=d=>{d.topic===e&&(this.events.removeListener(Ps.created,h),u(d.id))};this.events.on(Ps.created,h);try{const d=await Kl(new Promise((g,m)=>{this.relayer.request(s).catch(v=>{this.logger.warn(v,v==null?void 0:v.message),m(v)}).then(g)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ps.created,h),u(d)}catch{}}),l=await Kl(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Gn.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:ig(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Kl(new Promise(i=>{this.relayer.request(n).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Gn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:ig(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await Kl(new Promise((s,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Gn.connection_stalled)}return i}rpcUnsubscribe(e,r,n){const i={method:ig(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,d3(N0({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,N0({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,N0({},r)),this.topicMap.set(r.topic,e),this.events.emit(Ps.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=me("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Ps.deleted,d3(N0({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ps.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Ps.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>d3(N0({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await jse(J.toMiliseconds(J.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Pc(e+await this.getClientId())}};var Lhe=Object.defineProperty,yN=Object.getOwnPropertySymbols,Bhe=Object.prototype.hasOwnProperty,jhe=Object.prototype.propertyIsEnumerable,w4=(t,e,r)=>e in t?Lhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wN=(t,e)=>{for(var r in e||(e={}))Bhe.call(e,r)&&w4(t,r,e[r]);if(yN)for(var r of yN(e))jhe.call(e,r)&&w4(t,r,e[r]);return t},Tt=(t,e,r)=>w4(t,typeof e!="symbol"?e+"":e,r);let Uhe=class extends fJ{constructor(e){super(e),Tt(this,"protocol","wc"),Tt(this,"version",2),Tt(this,"core"),Tt(this,"logger"),Tt(this,"events",new Dn.EventEmitter),Tt(this,"provider"),Tt(this,"messages"),Tt(this,"subscriber"),Tt(this,"publisher"),Tt(this,"name",vle),Tt(this,"transportExplicitlyClosed",!1),Tt(this,"initialized",!1),Tt(this,"connectionAttemptInProgress",!1),Tt(this,"relayUrl"),Tt(this,"projectId"),Tt(this,"packageName"),Tt(this,"bundleId"),Tt(this,"hasExperiencedNetworkDisruption",!1),Tt(this,"pingTimeout"),Tt(this,"heartBeatTimeout",J.toMiliseconds(J.THIRTY_SECONDS+J.FIVE_SECONDS)),Tt(this,"reconnectTimeout"),Tt(this,"connectPromise"),Tt(this,"reconnectInProgress",!1),Tt(this,"requestsInFlight",[]),Tt(this,"connectTimeout",J.toMiliseconds(J.ONE_SECOND*15)),Tt(this,"request",async r=>{var n,i;this.logger.debug("Publishing Request Payload");const s=r.id||Hs().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${s}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),Tt(this,"resetPingTimeout",()=>{if(Wb())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,i;this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null||i.terminate()},this.heartBeatTimeout)}catch(r){this.logger.warn(r,r==null?void 0:r.message)}}),Tt(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),Tt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Gn.connect)}),Tt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Tt(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(Gn.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Tt(this,"registerProviderListeners",()=>{this.provider.on(uo.payload,this.onPayloadHandler),this.provider.on(uo.connect,this.onConnectHandler),this.provider.on(uo.disconnect,this.onDisconnectHandler),this.provider.on(uo.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Vt(e.logger,this.name):Eu(nl({level:e.logger||ble})),this.messages=new Ehe(this.logger,e.core),this.subscriber=new Dhe(this,this.logger),this.publisher=new Che(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||PD,this.projectId=e.projectId,xse()?this.packageName=mC():Ise()&&(this.bundleId=mC()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return dr(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Br.relay})}async subscribe(e,r){var n,i,s;this.isInitialized(),(!(r!=null&&r.transportType)||(r==null?void 0:r.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Ps.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Ps.created,l)}),new Promise(async(u,h)=>{a=await this.subscriber.subscribe(e,wN({internal:{throwOnFailedPublish:o}},r)).catch(d=>{o&&h(d)})||a,u()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Kl(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await JC())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const i=Nn(J.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,s)}this.events.emit(Gn.message,e),await this.recordMessageEvent(e)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(uo.disconnect,s),await Kl(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(uo.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(uo.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(uo.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const i=n;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,J.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,i,s;if(Wb())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Vr(new ND(Mse({sdkVersion:f4,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.warn(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.warn(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Zp(e)){if(!e.method.endsWith(Ele))return;const r=e.params,{topic:n,message:i,publishedAt:s,attestation:o}=r.data,a={topic:n,message:i,publishedAt:s,transportType:Br.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(wN({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else td(e)&&this.events.emit(Gn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Gn.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=xu(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(uo.payload,this.onPayloadHandler),this.provider.off(uo.connect,this.onConnectHandler),this.provider.off(uo.disconnect,this.onDisconnectHandler),this.provider.off(uo.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await JC();wce(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n==null?void 0:n.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Gn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},J.toMiliseconds(_le)))))}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}};var Fhe=Object.defineProperty,bN=Object.getOwnPropertySymbols,zhe=Object.prototype.hasOwnProperty,qhe=Object.prototype.propertyIsEnumerable,b4=(t,e,r)=>e in t?Fhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vN=(t,e)=>{for(var r in e||(e={}))zhe.call(e,r)&&b4(t,r,e[r]);if(bN)for(var r of bN(e))qhe.call(e,r)&&b4(t,r,e[r]);return t},as=(t,e,r)=>b4(t,typeof e!="symbol"?e+"":e,r);let rd=class extends pJ{constructor(e,r,n,i=qa,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,as(this,"map",new Map),as(this,"version",Sle),as(this,"cached",[]),as(this,"initialized",!1),as(this,"getKey"),as(this,"storagePrefix",qa),as(this,"recentlyDeleted",[]),as(this,"recentlyDeletedLimit",200),as(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ji(o)?this.map.set(this.getKey(o),o):Yae(o)?this.map.set(o.id,o):Qae(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),as(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),as(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),as(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>lle(a[c],o[c]))):this.values)),as(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=vN(vN({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),as(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Vt(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:i}=me("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:n}=me("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Whe=Object.defineProperty,Hhe=(t,e,r)=>e in t?Whe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vt=(t,e,r)=>Hhe(t,typeof e!="symbol"?e+"":e,r);let Khe=class{constructor(e,r){this.core=e,this.logger=r,vt(this,"name",Nle),vt(this,"version",Mle),vt(this,"events",new Bp),vt(this,"pairings"),vt(this,"initialized",!1),vt(this,"storagePrefix",qa),vt(this,"ignoredPayloadTypes",[qc]),vt(this,"registeredMethods",[]),vt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),vt(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),vt(this,"create",async n=>{this.isInitialized();const i=c4(),s=await this.core.crypto.setSymKey(i),o=Nn(J.FIVE_MINUTES),a={protocol:$D},c={topic:s,expiry:o,relay:a,active:!1,methods:n==null?void 0:n.methods},l=KC({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(Qu.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:n==null?void 0:n.transportType}),{topic:s,uri:l}}),vt(this,"pair",async n=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[xa.pairing_started]}});this.isValidPair(n,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=HC(n.uri);i.props.properties.topic=s,i.addTrace(xa.pairing_uri_validation_success),i.addTrace(xa.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(xa.existing_pairing),u.active)throw i.setError(Ac.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(xa.pairing_not_expired)}const h=c||Nn(J.FIVE_MINUTES),d={topic:s,relay:a,expiry:h,active:!1,methods:l};this.core.expirer.set(s,h),await this.pairings.set(s,d),i.addTrace(xa.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(Qu.create,d),i.addTrace(xa.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(xa.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(Ac.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(g){throw i.setError(Ac.subscribe_pairing_topic_failure),g}return i.addTrace(xa.subscribe_pairing_topic_success),d}),vt(this,"activate",async({topic:n})=>{this.isInitialized();const i=Nn(J.FIVE_MINUTES);this.core.expirer.set(n,i),await this.pairings.update(n,{active:!0,expiry:i})}),vt(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=qu();this.events.once(Wt("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}}),vt(this,"updateExpiry",async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})}),vt(this,"updateMetadata",async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})}),vt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),vt(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",ir("USER_DISCONNECTED")),await this.deletePairing(i))}),vt(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(i);return KC({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),vt(this,"sendRequest",async(n,i,s)=>{const o=es(i,s),a=await this.core.crypto.encode(n,o),c=A0[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),vt(this,"sendResult",async(n,i,s)=>{const o=xu(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=A0[c].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),vt(this,"sendError",async(n,i,s)=>{const o=Qp(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=A0[c]?A0[c].res:A0.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),vt(this,"deletePairing",async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,ir("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])}),vt(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(i=>$l(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))}),vt(this,"onRelayEventRequest",n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}}),vt(this,"onRelayEventResponse",async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),vt(this,"onPairingPingRequest",async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(Qu.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),vt(this,"onPairingPingResponse",(n,i)=>{const{id:s}=i;setTimeout(()=>{kn(i)?this.events.emit(Wt("pairing_ping",s),{}):ln(i)&&this.events.emit(Wt("pairing_ping",s),{error:i.error})},500)}),vt(this,"onPairingDeleteRequest",async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Qu.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),vt(this,"onUnknownRpcMethodRequest",async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=ir("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}}),vt(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(ir("WC_METHOD_UNSUPPORTED",n))}),vt(this,"isValidPair",(n,i)=>{var s;if(!ps(n)){const{message:a}=me("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError(Ac.malformed_pairing_uri),new Error(a)}if(!Gae(n.uri)){const{message:a}=me("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError(Ac.malformed_pairing_uri),new Error(a)}const o=HC(n==null?void 0:n.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:a}=me("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(Ac.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=me("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(Ac.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&J.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(Ac.pairing_expired);const{message:a}=me("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),vt(this,"isValidPing",async n=>{if(!ps(n)){const{message:s}=me("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),vt(this,"isValidDisconnect",async n=>{if(!ps(n)){const{message:s}=me("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),vt(this,"isValidPairingTopic",async n=>{if(!fn(n,!1)){const{message:i}=me("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=me("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if($l(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=me("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}}),this.core=e,this.logger=Vt(r,this.name),this.pairings=new rd(this.core,this.logger,this.name,this.storagePrefix)}get context(){return dr(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Gn.message,async e=>{const{topic:r,message:n,transportType:i}=e;if(!this.pairings.keys.includes(r)||i===Br.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const s=await this.core.crypto.decode(r,n);try{Zp(s)?(this.core.history.set(r,s),this.onRelayEventRequest({topic:r,payload:s})):td(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id))}catch(o){this.logger.error(o)}})}registerExpirerEvents(){this.core.expirer.on(mo.expired,async e=>{const{topic:r}=GR(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Qu.expire,{topic:r}))})}};var Vhe=Object.defineProperty,Ghe=(t,e,r)=>e in t?Vhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,si=(t,e,r)=>Ghe(t,typeof e!="symbol"?e+"":e,r);let Yhe=class extends uJ{constructor(e,r){super(e,r),this.core=e,this.logger=r,si(this,"records",new Map),si(this,"events",new Dn.EventEmitter),si(this,"name",Tle),si(this,"version",$le),si(this,"cached",[]),si(this,"initialized",!1),si(this,"storagePrefix",qa),si(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),si(this,"set",(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Nn(J.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(jo.created,o)}),si(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=ln(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(jo.updated,i))}),si(this,"get",async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i))),si(this,"delete",(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(jo.deleted,s)}}),this.persist()}),si(this,"exists",async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1)),si(this,"on",(n,i)=>{this.events.on(n,i)}),si(this,"once",(n,i)=>{this.events.once(n,i)}),si(this,"off",(n,i)=>{this.events.off(n,i)}),si(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=Vt(r,this.name)}get context(){return dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:es(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=me("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(jo.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(jo.created,e=>{const r=jo.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(jo.updated,e=>{const r=jo.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(jo.deleted,e=>{const r=jo.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(da.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{J.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(jo.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Qhe=Object.defineProperty,Zhe=(t,e,r)=>e in t?Qhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Di=(t,e,r)=>Zhe(t,typeof e!="symbol"?e+"":e,r);let Jhe=class extends mJ{constructor(e,r){super(e,r),this.core=e,this.logger=r,Di(this,"expirations",new Map),Di(this,"events",new Dn.EventEmitter),Di(this,"name",Ple),Di(this,"version",Ole),Di(this,"cached",[]),Di(this,"initialized",!1),Di(this,"storagePrefix",qa),Di(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Di(this,"has",n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Di(this,"set",(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(mo.created,{target:s,expiration:o})}),Di(this,"get",n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)}),Di(this,"del",n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(mo.deleted,{target:i,expiration:s})}}),Di(this,"on",(n,i)=>{this.events.on(n,i)}),Di(this,"once",(n,i)=>{this.events.once(n,i)}),Di(this,"off",(n,i)=>{this.events.off(n,i)}),Di(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=Vt(r,this.name)}get context(){return dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Tse(e);if(typeof e=="number")return $se(e);const{message:r}=me("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(mo.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=me("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;J.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(mo.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(da.pulse,()=>this.checkExpirations()),this.events.on(mo.created,e=>{const r=mo.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(mo.expired,e=>{const r=mo.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(mo.deleted,e=>{const r=mo.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Xhe=Object.defineProperty,ede=(t,e,r)=>e in t?Xhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wn=(t,e,r)=>ede(t,typeof e!="symbol"?e+"":e,r);let tde=class extends yJ{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,wn(this,"name",kle),wn(this,"abortController"),wn(this,"isDevEnv"),wn(this,"verifyUrlV3",Dle),wn(this,"storagePrefix",qa),wn(this,"version",TD),wn(this,"publicKey"),wn(this,"fetchPromise"),wn(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&J.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),wn(this,"register",async i=>{if(!fy()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=il(),u=this.startAbortTimer(J.ONE_SECOND*5),h=await new Promise((d,g)=>{const m=()=>{window.removeEventListener("message",$),l.body.removeChild(v),g("attestation aborted")};this.abortController.signal.addEventListener("abort",m);const v=l.createElement("iframe");v.src=c,v.style.display="none",v.addEventListener("error",m,{signal:this.abortController.signal});const $=_=>{if(_.data&&typeof _.data=="string")try{const S=JSON.parse(_.data);if(S.type==="verify_attestation"){if(gp(S.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(v),this.abortController.signal.removeEventListener("abort",m),window.removeEventListener("message",$),d(S.attestation===null?"":S.attestation)}}catch(S){this.logger.warn(S)}};l.body.appendChild(v),window.addEventListener("message",$,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",h),h}catch(l){this.logger.warn(l)}return""}),wn(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(gp(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,c)}),wn(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(J.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),wn(this,"getVerifyUrl",i=>{let s=i||Ag;return Lle.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Ag}`),s=Ag),s}),wn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(J.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),wn(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),wn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),wn(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),wn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),wn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),wn(this,"validateAttestation",(i,s)=>{const o=Rae(i,s.publicKey),a={hasExpired:J.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Vt(r,this.name),this.abortController=new AbortController,this.isDevEnv=c5(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return dr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),J.toMiliseconds(e))}};var rde=Object.defineProperty,nde=(t,e,r)=>e in t?rde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,EN=(t,e,r)=>nde(t,typeof e!="symbol"?e+"":e,r);let ide=class extends wJ{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,EN(this,"context",Ble),EN(this,"registerDeviceToken",async n=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=n,c=`${jle}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=Vt(r,this.context)}};var sde=Object.defineProperty,_N=Object.getOwnPropertySymbols,ode=Object.prototype.hasOwnProperty,ade=Object.prototype.propertyIsEnumerable,v4=(t,e,r)=>e in t?sde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,M0=(t,e)=>{for(var r in e||(e={}))ode.call(e,r)&&v4(t,r,e[r]);if(_N)for(var r of _N(e))ade.call(e,r)&&v4(t,r,e[r]);return t},Bn=(t,e,r)=>v4(t,typeof e!="symbol"?e+"":e,r);let cde=class extends bJ{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,Bn(this,"context",Fle),Bn(this,"storagePrefix",qa),Bn(this,"storageVersion",Ule),Bn(this,"events",new Map),Bn(this,"shouldPersist",!1),Bn(this,"init",async()=>{if(!c5())try{const i={eventId:wC(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:WR(this.core.relayer.protocol,this.core.relayer.version,f4)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),Bn(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,l=wC(),u=this.core.projectId||"",h=Date.now(),d=M0({eventId:l,timestamp:h,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,d),this.shouldPersist=!0),d}),Bn(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return M0(M0({},a),this.setMethods(a.eventId))}),Bn(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),Bn(this,"setEventListeners",()=>{this.core.heartbeat.on(da.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{J.fromMiliseconds(Date.now())-J.fromMiliseconds(i.timestamp)>zle&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),Bn(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),Bn(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),Bn(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),Bn(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Bn(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,M0(M0({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),Bn(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),Bn(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${qle}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${f4}${s}`,{method:"POST",body:JSON.stringify(i)})}),Bn(this,"getAppDomain",()=>qR().url),this.logger=Vt(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}};var lde=Object.defineProperty,SN=Object.getOwnPropertySymbols,ude=Object.prototype.hasOwnProperty,hde=Object.prototype.propertyIsEnumerable,E4=(t,e,r)=>e in t?lde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xN=(t,e)=>{for(var r in e||(e={}))ude.call(e,r)&&E4(t,r,e[r]);if(SN)for(var r of SN(e))hde.call(e,r)&&E4(t,r,e[r]);return t},mr=(t,e,r)=>E4(t,typeof e!="symbol"?e+"":e,r);let dde=class WD extends oJ{constructor(e){var r;super(e),mr(this,"protocol",MD),mr(this,"version",TD),mr(this,"name",d4),mr(this,"relayUrl"),mr(this,"projectId"),mr(this,"customStoragePrefix"),mr(this,"events",new Dn.EventEmitter),mr(this,"logger"),mr(this,"heartbeat"),mr(this,"relayer"),mr(this,"crypto"),mr(this,"storage"),mr(this,"history"),mr(this,"expirer"),mr(this,"pairing"),mr(this,"verify"),mr(this,"echoClient"),mr(this,"linkModeSupportedApps"),mr(this,"eventClient"),mr(this,"initialized",!1),mr(this,"logChunkController"),mr(this,"on",(o,a)=>this.events.on(o,a)),mr(this,"once",(o,a)=>this.events.once(o,a)),mr(this,"off",(o,a)=>this.events.off(o,a)),mr(this,"removeListener",(o,a)=>this.events.removeListener(o,a)),mr(this,"dispatchEnvelope",({topic:o,message:a,sessionExists:c})=>{if(!o||!a)return;const l={topic:o,message:a,publishedAt:Date.now(),transportType:Br.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:c})}),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||PD,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const n=nl({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:ule.logger,name:d4}),{logger:i,chunkLoggerController:s}=zI({opts:n,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=s,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,a;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((a=this.logChunkController)==null||a.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Vt(i,this.name),this.heartbeat=new h7,this.crypto=new whe(this,this.logger,e==null?void 0:e.keychain),this.history=new Yhe(this,this.logger),this.expirer=new Jhe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new TZ(xN(xN({},hle),e==null?void 0:e.storageOptions)),this.relayer=new Uhe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Khe(this,this.logger),this.verify=new tde(this,this.logger,this.storage),this.echoClient=new ide(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new cde(this,this.logger,e==null?void 0:e.telemetryEnabled)}static async init(e){const r=new WD(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(xle,n),r}get context(){return dr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(cN,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(cN)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const fde=dde;var pde=Object.defineProperty,gde=(t,e,r)=>e in t?pde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,IN=(t,e,r)=>gde(t,typeof e!="symbol"?e+"":e,r);let mde=class{constructor(e){this.opts=e,IN(this,"protocol","wc"),IN(this,"version",2)}},yde=class{constructor(e){this.client=e}};const HD="wc",KD=2,VD="client",w5=`${HD}@${KD}:${VD}:`,f3={name:VD,logger:"error"},AN="WALLETCONNECT_DEEPLINK_CHOICE",wde="proposal",CN="Proposal expired",bde="session",Id=J.SEVEN_DAYS,vde="engine",jn={wc_sessionPropose:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1104},res:{ttl:J.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1106},res:{ttl:J.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1112},res:{ttl:J.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1114},res:{ttl:J.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:J.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:J.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1119}}},p3={min:J.FIVE_MINUTES,max:J.SEVEN_DAYS},ba={idle:"IDLE",active:"ACTIVE"},NN={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},Ede="request",_de=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Sde="wc",xde="auth",Ide="authKeys",Ade="pairingTopics",Cde="requests",h2=`${Sde}@${1.5}:${xde}:`,$1=`${h2}:PUB_KEY`;var Nde=Object.defineProperty,Mde=Object.defineProperties,Tde=Object.getOwnPropertyDescriptors,MN=Object.getOwnPropertySymbols,$de=Object.prototype.hasOwnProperty,Pde=Object.prototype.propertyIsEnumerable,_4=(t,e,r)=>e in t?Nde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yr=(t,e)=>{for(var r in e||(e={}))$de.call(e,r)&&_4(t,r,e[r]);if(MN)for(var r of MN(e))Pde.call(e,r)&&_4(t,r,e[r]);return t},cs=(t,e)=>Mde(t,Tde(e)),he=(t,e,r)=>_4(t,typeof e!="symbol"?e+"":e,r);let Ode=class extends yde{constructor(e){super(e),he(this,"name",vde),he(this,"events",new Bp),he(this,"initialized",!1),he(this,"requestQueue",{state:ba.idle,queue:[]}),he(this,"sessionRequestQueue",{state:ba.idle,queue:[]}),he(this,"requestQueueDelay",J.ONE_SECOND),he(this,"expectedPairingMethodMap",new Map),he(this,"recentlyDeletedMap",new Map),he(this,"recentlyDeletedLimit",200),he(this,"relayMessageCache",[]),he(this,"pendingSessions",new Map),he(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(jn)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay)))}),he(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=cs(Yr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:c}=n;let l=i,u,h=!1;try{if(l){const k=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=k.active}}catch(k){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),k}if(!l||!h){const{topic:k,uri:R}=await this.client.core.pairing.create();l=k,u=R}if(!l){const{message:k}=me("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(k)}const d=await this.client.core.crypto.generateKeyPair(),g=jn.wc_sessionPropose.req.ttl||J.FIVE_MINUTES,m=Nn(g),v=cs(Yr({requiredNamespaces:s,optionalNamespaces:o,relays:c??[{protocol:$D}],proposer:{publicKey:d,metadata:this.client.metadata},expiryTimestamp:m,pairingTopic:l},a&&{sessionProperties:a}),{id:Vn()}),$=Wt("session_connect",v.id),{reject:_,resolve:S,done:A}=qu(g,CN),T=({id:k})=>{k===v.id&&(this.client.events.off("proposal_expire",T),this.pendingSessions.delete(v.id),this.events.emit($,{error:{message:CN,code:0}}))};return this.client.events.on("proposal_expire",T),this.events.once($,({error:k,session:R})=>{this.client.events.off("proposal_expire",T),k?_(k):R&&S(R)}),await this.sendRequest({topic:l,method:"wc_sessionPropose",params:v,throwOnFailedPublish:!0,clientRpcId:v.id}),await this.setProposal(v.id,v),{uri:u,approval:A}}),he(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),he(this,"approve",async r=>{var n,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r==null?void 0:r.id)==null?void 0:n.toString(),trace:[Uo.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(F){throw o.setError($u.no_internet_connection),F}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(F){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError($u.proposal_not_found),F}try{await this.isValidApprove(r)}catch(F){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError($u.session_approve_namespace_validation_failure),F}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,sessionConfig:h}=r,d=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:g,proposer:m,requiredNamespaces:v,optionalNamespaces:$}=d;let _=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:g});_||(_=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:Uo.session_approve_started,properties:{topic:g,trace:[Uo.session_approve_started,Uo.session_namespaces_validation_success]}}));const S=await this.client.core.crypto.generateKeyPair(),A=m.publicKey,T=await this.client.core.crypto.generateSharedKey(S,A),k=Yr(Yr({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:S,metadata:this.client.metadata},expiry:Nn(Id)},u&&{sessionProperties:u}),h&&{sessionConfig:h}),R=Br.relay;_.addTrace(Uo.subscribing_session_topic);try{await this.client.core.relayer.subscribe(T,{transportType:R})}catch(F){throw _.setError($u.subscribe_session_topic_failure),F}_.addTrace(Uo.subscribe_session_topic_success);const L=cs(Yr({},k),{topic:T,requiredNamespaces:v,optionalNamespaces:$,pairingTopic:g,acknowledged:!1,self:k.controller,peer:{publicKey:m.publicKey,metadata:m.metadata},controller:S,transportType:Br.relay});await this.client.session.set(T,L),_.addTrace(Uo.store_session);try{_.addTrace(Uo.publishing_session_settle),await this.sendRequest({topic:T,method:"wc_sessionSettle",params:k,throwOnFailedPublish:!0}).catch(F=>{throw _==null||_.setError($u.session_settle_publish_failure),F}),_.addTrace(Uo.session_settle_publish_success),_.addTrace(Uo.publishing_session_approve),await this.sendResult({id:a,topic:g,result:{relay:{protocol:c??"irn"},responderPublicKey:S},throwOnFailedPublish:!0}).catch(F=>{throw _==null||_.setError($u.session_approve_publish_failure),F}),_.addTrace(Uo.session_approve_publish_success)}catch(F){throw this.client.logger.error(F),this.client.session.delete(T,ir("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(T),F}return this.client.core.eventClient.deleteEvent({eventId:_.eventId}),await this.client.core.pairing.updateMetadata({topic:g,metadata:m.metadata}),await this.client.proposal.delete(a,ir("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:g}),await this.setExpiry(T,Nn(Id)),{topic:T,acknowledged:()=>Promise.resolve(this.client.session.get(T))}}),he(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:i}=r;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&(await this.sendError({id:n,topic:s,error:i,rpcOpts:jn.wc_sessionPropose.reject}),await this.client.proposal.delete(n,ir("USER_DISCONNECTED")))}),he(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(h){throw this.client.logger.error("update() -> isValidUpdate() failed"),h}const{topic:n,namespaces:i}=r,{done:s,resolve:o,reject:a}=qu(),c=Vn(),l=Hs().toString(),u=this.client.session.get(n).namespaces;return this.events.once(Wt("session_update",c),({error:h})=>{h?a(h):o()}),await this.client.session.update(n,{namespaces:i}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(h=>{this.client.logger.error(h),this.client.session.update(n,{namespaces:u}),a(h)}),{acknowledged:s}}),he(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,i=Vn(),{done:s,resolve:o,reject:a}=qu();return this.events.once(Wt("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,Nn(Id)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),he(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(_){throw this.client.logger.error("request() -> isValidRequest() failed"),_}const{chainId:n,request:i,topic:s,expiry:o=jn.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);(a==null?void 0:a.transportType)===Br.relay&&await this.confirmOnlineStateOrThrow();const c=Vn(),l=Hs().toString(),{done:u,resolve:h,reject:d}=qu(o,"Request expired. Please try again.");this.events.once(Wt("session_request",c),({error:_,result:S})=>{_?d(_):h(S)});const g="wc_sessionRequest",m=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(m)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:g,params:{request:cs(Yr({},i),{expiryTimestamp:Nn(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:m}).catch(_=>d(_)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),await u();const v={request:cs(Yr({},i),{expiryTimestamp:Nn(o)}),chainId:n},$=this.shouldSetTVF(g,v);return await Promise.all([new Promise(async _=>{await this.sendRequest(Yr({clientRpcId:c,relayRpcId:l,topic:s,method:g,params:v,expiry:o,throwOnFailedPublish:!0},$&&{tvf:this.getTVFParams(c,v)})).catch(S=>d(S)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),_()}),new Promise(async _=>{var S;if(!((S=a.sessionConfig)!=null&&S.disableDeepLink)){const A=await Rse(this.client.core.storage,AN);await Pse({id:c,topic:s,wcDeepLink:A})}_()}),u()]).then(_=>_[2])}),he(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i,o=this.client.session.get(n);o.transportType===Br.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);kn(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0,appLink:a}):ln(i)&&await this.sendError({id:s,topic:n,error:i.error,appLink:a}),this.cleanupAfterResponse(r)}),he(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=Vn(),s=Hs().toString(),{done:o,resolve:a,reject:c}=qu();this.events.once(Wt("session_ping",i),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),he(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r,o=Hs().toString(),a=Vn();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),he(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:ir("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=me("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}}),he(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>Kae(n,r)))),he(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),he(this,"authenticate",async(r,n)=>{var i;this.isInitialized(),this.isValidAuthenticate(r);const s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?Br.link_mode:Br.relay;o===Br.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:h,type:d,exp:g,nbf:m,methods:v=[],expiry:$}=r,_=[...r.resources||[]],{topic:S,uri:A}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:S,uri:A}});const T=await this.client.core.crypto.generateKeyPair(),k=T1(T);if(await Promise.all([this.client.auth.authKeys.set($1,{responseTopic:k,publicKey:T}),this.client.auth.pairingTopics.set(k,{topic:k,pairingTopic:S})]),await this.client.core.relayer.subscribe(k,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${S}`),v.length>0){const{namespace:x}=Yf(a[0]);let y=Ioe(x,"request",v);M1(_)&&(y=Coe(y,_.pop())),_.push(y)}const R=$&&$>jn.wc_sessionAuthenticate.req.ttl?$:jn.wc_sessionAuthenticate.req.ttl,L={authPayload:{type:d??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:h,iat:new Date().toISOString(),exp:g,nbf:m,resources:_},requester:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:Nn(R)},F={eip155:{chains:a,methods:[...new Set(["personal_sign",...v])],events:["chainChanged","accountsChanged"]}},B={requiredNamespaces:{},optionalNamespaces:F,relays:[{protocol:"irn"}],pairingTopic:S,proposer:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:Nn(jn.wc_sessionPropose.req.ttl),id:Vn()},{done:q,resolve:D,reject:E}=qu(R,"Request expired"),b=Vn(),f=Wt("session_connect",B.id),p=Wt("session_request",b),w=async({error:x,session:y})=>{this.events.off(p,N),x?E(x):y&&D({session:y})},N=async x=>{var y,C,I;if(await this.deletePendingAuthRequest(b,{message:"fulfilled",code:0}),x.error){const ie=ir("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return x.error.code===ie.code?void 0:(this.events.off(f,w),E(x.error.message))}await this.deleteProposal(B.id),this.events.off(f,w);const{cacaos:j,responder:K}=x.result,V=[],te=[];for(const ie of j){await AC({cacao:ie,projectId:this.client.core.projectId})||(this.client.logger.error(ie,"Signature verification failed"),E(ir("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ve}=ie,Me=M1(ve.resources),Ce=[r4(ve.iss)],et=Hb(ve.iss);if(Me){const tt=CC(Me),Fe=NC(Me);V.push(...tt),Ce.push(...Fe)}for(const tt of Ce)te.push(`${tt}:${et}`)}const se=await this.client.core.crypto.generateSharedKey(T,K.publicKey);let ce;V.length>0&&(ce={topic:se,acknowledged:!0,self:{publicKey:T,metadata:this.client.metadata},peer:K,controller:K.publicKey,expiry:Nn(Id),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:S,namespaces:VC([...new Set(V)],[...new Set(te)]),transportType:o},await this.client.core.relayer.subscribe(se,{transportType:o}),await this.client.session.set(se,ce),S&&await this.client.core.pairing.updateMetadata({topic:S,metadata:K.metadata}),ce=this.client.session.get(se)),(y=this.client.metadata.redirect)!=null&&y.linkMode&&(C=K.metadata.redirect)!=null&&C.linkMode&&(I=K.metadata.redirect)!=null&&I.universal&&n&&(this.client.core.addLinkModeSupportedApp(K.metadata.redirect.universal),this.client.session.update(se,{transportType:Br.link_mode})),D({auths:j,session:ce})};this.events.once(f,w),this.events.once(p,N);let M;try{if(s){const x=es("wc_sessionAuthenticate",L,b);this.client.core.history.set(S,x);const y=await this.client.core.crypto.encode("",x,{type:yy,encoding:x0});M=_w(n,S,y)}else await Promise.all([this.sendRequest({topic:S,method:"wc_sessionAuthenticate",params:L,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:b}),this.sendRequest({topic:S,method:"wc_sessionPropose",params:B,expiry:jn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:B.id})])}catch(x){throw this.events.off(f,w),this.events.off(p,N),x}return await this.setProposal(B.id,B),await this.setAuthRequest(b,{request:cs(Yr({},L),{verifyContext:{}}),pairingTopic:S,transportType:o}),{uri:M??A,response:q}}),he(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:i}=r,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[Pu.authenticated_session_approve_started]}});try{this.isInitialized()}catch($){throw s.setError(C0.no_internet_connection),$}const o=this.getPendingAuthRequest(n);if(!o)throw s.setError(C0.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||Br.relay;a===Br.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=T1(c),h={type:qc,receiverPublicKey:c,senderPublicKey:l},d=[],g=[];for(const $ of i){if(!await AC({cacao:$,projectId:this.client.core.projectId})){s.setError(C0.invalid_cacao);const k=ir("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:u,error:k,encodeOpts:h}),new Error(k.message)}s.addTrace(Pu.cacaos_verified);const{p:_}=$,S=M1(_.resources),A=[r4(_.iss)],T=Hb(_.iss);if(S){const k=CC(S),R=NC(S);d.push(...k),A.push(...R)}for(const k of A)g.push(`${k}:${T}`)}const m=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace(Pu.create_authenticated_session_topic);let v;if((d==null?void 0:d.length)>0){v={topic:m,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Nn(Id),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:VC([...new Set(d)],[...new Set(g)]),transportType:a},s.addTrace(Pu.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(m,{transportType:a})}catch($){throw s.setError(C0.subscribe_authenticated_session_topic_failure),$}s.addTrace(Pu.subscribe_authenticated_session_topic_success),await this.client.session.set(m,v),s.addTrace(Pu.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(Pu.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:n,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch($){throw s.setError(C0.authenticated_session_approve_publish_failure),$}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:v}}),he(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===Br.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=T1(o),l={type:qc,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:i,encodeOpts:l,rpcOpts:jn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,ir("USER_DISCONNECTED"))}),he(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:i}=r;return nD(n,i)}),he(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),he(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),he(this,"deleteSession",async r=>{var n;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,ir("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(AN).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,ir("USER_DISCONNECTED"))}),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=ba.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),he(this,"deleteProposal",async(r,n)=>{if(n)try{const i=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError($u.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,ir("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),he(this,"deletePendingSessionRequest",async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=ba.idle,this.client.events.emit("session_request_expire",{id:r}))}),he(this,"deletePendingAuthRequest",async(r,n,i=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])}),he(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),he(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,Nn(jn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),he(this,"setAuthRequest",async(r,n)=>{const{request:i,pairingTopic:s,transportType:o=Br.relay}=n;this.client.core.expirer.set(r,i.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:r,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),he(this,"setPendingSessionRequest",async r=>{const{id:n,topic:i,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||Nn(jn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o})}),he(this,"sendRequest",async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:h}=r,d=es(i,s,c);let g;const m=!!u;try{const _=m?x0:Vl;g=await this.client.core.crypto.encode(n,d,{encoding:_})}catch(_){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),_}let v;if(_de.includes(i)){const _=Pc(JSON.stringify(d)),S=Pc(g);v=await this.client.core.verify.register({id:S,decryptedId:_})}const $=jn[i].req;if($.attestation=v,o&&($.ttl=o),a&&($.id=a),this.client.core.history.set(n,d),m){const _=_w(u,n,g);await global.Linking.openURL(_,this.client.name)}else{const _=jn[i].req;o&&(_.ttl=o),a&&(_.id=a),_.tvf=cs(Yr({},h),{correlationId:d.id}),l?(_.internal=cs(Yr({},_.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,g,_)):this.client.core.relayer.publish(n,g,_).catch(S=>this.client.logger.error(S))}return d.id}),he(this,"sendResult",async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,l=xu(n,s);let u;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const m=h?x0:Vl;u=await this.client.core.crypto.encode(i,l,cs(Yr({},a||{}),{encoding:m}))}catch(m){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),m}let d,g;try{d=await this.client.core.history.get(i,n);const m=d.request;try{this.shouldSetTVF(m.method,m.params)&&(g=this.getTVFParams(n,m.params,s))}catch(v){this.client.logger.warn("sendResult() -> getTVFParams() failed",v)}}catch(m){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),m}if(h){const m=_w(c,i,u);await global.Linking.openURL(m,this.client.name)}else{const m=d.request.method,v=jn[m].res;v.tvf=cs(Yr({},g),{correlationId:n}),o?(v.internal=cs(Yr({},v.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,v)):this.client.core.relayer.publish(i,u,v).catch($=>this.client.logger.error($))}await this.client.core.history.resolve(l)}),he(this,"sendError",async r=>{const{id:n,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=r,l=Qp(n,s);let u;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=h?x0:Vl;u=await this.client.core.crypto.encode(i,l,cs(Yr({},o||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),g}let d;try{d=await this.client.core.history.get(i,n)}catch(g){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),g}if(h){const g=_w(c,i,u);await global.Linking.openURL(g,this.client.name)}else{const g=d.request.method,m=a||jn[g].res;this.client.core.relayer.publish(i,u,m)}await this.client.core.history.resolve(l)}),he(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;$l(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{$l(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])}),he(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),he(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ba.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ba.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=ba.idle}),he(this,"processRequest",async r=>{const{topic:n,payload:i,attestation:s,transportType:o,encryptedId:a}=r,c=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,i);case"wc_sessionPing":return await this.onSessionPingRequest(n,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),he(this,"onRelayEventResponse",async r=>{const{topic:n,payload:i,transportType:s}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),he(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:i}=me("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),he(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),he(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:i,attestation:s,encryptedId:o}=r,{params:a,id:c}=i;try{const l=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Ac.proposal_listener_not_found)),this.isValidConnect(Yr({},i.params));const u=a.expiryTimestamp||Nn(jn.wc_sessionPropose.req.ttl),h=Yr({id:c,pairingTopic:n,expiryTimestamp:u},a);await this.setProposal(c,h);const d=await this.getVerifyContext({attestationId:s,hash:Pc(JSON.stringify(i)),encryptedId:o,metadata:h.proposer.metadata});l==null||l.addTrace(xa.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:h,verifyContext:d})}catch(l){await this.sendError({id:c,topic:n,error:l,rpcOpts:jn.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),he(this,"onSessionProposeResponse",async(r,n,i)=>{const{id:s}=n;if(kn(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:r,proposalId:s,publicKey:c});const h=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:r})}else if(ln(n)){await this.client.proposal.delete(s,ir("USER_DISCONNECTED"));const o=Wt("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),he(this,"onSessionSettleRequest",async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,sessionConfig:h}=n.params,d=[...this.pendingSessions.values()].find(v=>v.sessionTopic===r);if(!d)return this.client.logger.error(`Pending session not found for topic ${r}`);const g=this.client.proposal.get(d.proposalId),m=cs(Yr(Yr({topic:r,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:d.pairingTopic,requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces,controller:a.publicKey,self:{publicKey:d.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),h&&{sessionConfig:h}),{transportType:Br.relay});await this.client.session.set(m.topic,m),await this.setExpiry(m.topic,m.expiry),await this.client.core.pairing.updateMetadata({topic:d.pairingTopic,metadata:m.peer.metadata}),this.client.events.emit("session_connect",{session:m}),this.events.emit(Wt("session_connect",d.proposalId),{session:m}),this.pendingSessions.delete(d.proposalId),this.deleteProposal(d.proposalId,!1),this.cleanupDuplicatePairings(m),await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),he(this,"onSessionSettleResponse",async(r,n)=>{const{id:i}=n;kn(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Wt("session_approve",i),{})):ln(n)&&(await this.client.session.delete(r,ir("USER_DISCONNECTED")),this.events.emit(Wt("session_approve",i),{error:n.error}))}),he(this,"onSessionUpdateRequest",async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=I0.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:ir("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Yr({topic:r},i));try{I0.set(o,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(c){throw I0.delete(o),c}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),he(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),he(this,"onSessionUpdateResponse",(r,n)=>{const{id:i}=n,s=Wt("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);kn(n)?this.events.emit(Wt("session_update",i),{}):ln(n)&&this.events.emit(Wt("session_update",i),{error:n.error})}),he(this,"onSessionExtendRequest",async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Nn(Id)),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),he(this,"onSessionExtendResponse",(r,n)=>{const{id:i}=n,s=Wt("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);kn(n)?this.events.emit(Wt("session_extend",i),{}):ln(n)&&this.events.emit(Wt("session_extend",i),{error:n.error})}),he(this,"onSessionPingRequest",async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),he(this,"onSessionPingResponse",(r,n)=>{const{id:i}=n,s=Wt("session_ping",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);setTimeout(()=>{kn(n)?this.events.emit(Wt("session_ping",i),{}):ln(n)&&this.events.emit(Wt("session_ping",i),{error:n.error})},500)}),he(this,"onSessionDeleteRequest",async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(Gn.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:ir("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),he(this,"onSessionRequest",async r=>{var n,i,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=r,{id:h,params:d}=a;try{await this.isValidRequest(Yr({topic:o},d));const g=this.client.session.get(o),m=await this.getVerifyContext({attestationId:c,hash:Pc(JSON.stringify(es("wc_sessionRequest",d,h))),encryptedId:l,metadata:g.peer.metadata,transportType:u}),v={id:h,topic:o,params:d,verifyContext:m};await this.setPendingSessionRequest(v),u===Br.link_mode&&(n=g.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=g.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(v):(this.addSessionRequestToSessionRequestQueue(v),this.processSessionRequestQueue())}catch(g){await this.sendError({id:h,topic:o,error:g}),this.client.logger.error(g)}}),he(this,"onSessionRequestResponse",(r,n)=>{const{id:i}=n,s=Wt("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);kn(n)?this.events.emit(Wt("session_request",i),{result:n.result}):ln(n)&&this.events.emit(Wt("session_request",i),{error:n.error})}),he(this,"onSessionEventRequest",async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=I0.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Yr({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),I0.set(o,i)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),he(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),kn(n)?this.events.emit(Wt("session_request",i),{result:n.result}):ln(n)&&this.events.emit(Wt("session_request",i),{error:n.error})}),he(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:l,authPayload:u,expiryTimestamp:h}=s.params,d=await this.getVerifyContext({attestationId:o,hash:Pc(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),g={requester:l,pairingTopic:i,id:s.id,authPayload:u,verifyContext:d,expiryTimestamp:h};await this.setAuthRequest(s.id,{request:g,pairingTopic:i,transportType:c}),c===Br.link_mode&&(n=l.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:d})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),d=this.getAppLinkIfEnabled(s.params.requester.metadata,c),g={type:qc,receiverPublicKey:u,senderPublicKey:h};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:g,rpcOpts:jn.wc_sessionAuthenticate.autoReject,appLink:d})}}),he(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),he(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ba.idle,this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay))}),he(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=Wt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Wt("session_request",s.request.id),{error:n})})}),he(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ba.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ba.active,this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),he(this,"emitSessionRequest",r=>{this.client.events.emit("session_request",r)}),he(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:es("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties},n.id)})}),he(this,"isValidConnect",async r=>{if(!ps(r)){const{message:c}=me("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(Ji(n)||await this.isValidPairingTopic(n),!ice(a)){const{message:c}=me("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(c)}!Ji(i)&&hm(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!Ji(s)&&hm(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Ji(o)||this.validateSessionProps(o,"sessionProperties")}),he(this,"validateNamespaces",(r,n)=>{const i=nce(r,"connect()",n);if(i)throw new Error(i.message)}),he(this,"isValidApprove",async r=>{if(!ps(r))throw new Error(me("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const a=this.client.proposal.get(n),c=c3(i,"approve()");if(c)throw new Error(c.message);const l=QC(a.requiredNamespaces,i,"approve()");if(l)throw new Error(l.message);if(!fn(s,!0)){const{message:u}=me("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(u)}Ji(o)||this.validateSessionProps(o,"sessionProperties")}),he(this,"isValidReject",async r=>{if(!ps(r)){const{message:s}=me("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!oce(i)){const{message:s}=me("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),he(this,"isValidSessionSettleRequest",r=>{if(!ps(r)){const{message:l}=me("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!vD(n)){const{message:l}=me("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=Zae(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=c3(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if($l(o)){const{message:l}=me("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),he(this,"isValidUpdate",async r=>{if(!ps(r)){const{message:c}=me("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=c3(i,"update()");if(o)throw new Error(o.message);const a=QC(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),he(this,"isValidExtend",async r=>{if(!ps(r)){const{message:i}=me("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),he(this,"isValidRequest",async r=>{if(!ps(r)){const{message:c}=me("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!YC(a,s)){const{message:c}=me("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!ace(i)){const{message:c}=me("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!uce(a,s,i.method)){const{message:c}=me("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!pce(o,p3)){const{message:c}=me("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${p3.min} and ${p3.max}`);throw new Error(c)}}),he(this,"isValidRespond",async r=>{var n;if(!ps(r)){const{message:o}=me("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(o){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!cce(s)){const{message:o}=me("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),he(this,"isValidPing",async r=>{if(!ps(r)){const{message:i}=me("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),he(this,"isValidEmit",async r=>{if(!ps(r)){const{message:a}=me("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!YC(o,s)){const{message:a}=me("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!lce(i)){const{message:a}=me("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!hce(o,s,i.name)){const{message:a}=me("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),he(this,"isValidDisconnect",async r=>{if(!ps(r)){const{message:i}=me("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),he(this,"isValidAuthenticate",r=>{const{chains:n,uri:i,domain:s,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!fn(i,!1))throw new Error("uri is required parameter");if(!fn(s,!1))throw new Error("domain is required parameter");if(!fn(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>Yf(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Yf(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),he(this,"getVerifyContext",async r=>{const{attestationId:n,hash:i,encryptedId:s,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||Ag,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Br.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),he(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach(i=>{if(!fn(i,!1)){const{message:s}=me("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}),he(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),he(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),he(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:i}=me("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}}),he(this,"isLinkModeEnabled",(r,n)=>{var i,s,o,a,c,l,u,h,d;return!r||n!==Br.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=r==null?void 0:r.redirect)==null?void 0:u.universal)!==void 0&&((h=r==null?void 0:r.redirect)==null?void 0:h.universal)!==""&&((d=r==null?void 0:r.redirect)==null?void 0:d.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),he(this,"getAppLinkIfEnabled",(r,n)=>{var i;return this.isLinkModeEnabled(r,n)?(i=r==null?void 0:r.redirect)==null?void 0:i.universal:void 0}),he(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=yC(r,"topic")||"",i=decodeURIComponent(yC(r,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:Br.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})}),he(this,"registerLinkModeListeners",async()=>{var r;if(c5()||Su()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),he(this,"shouldSetTVF",(r,n)=>{if(!n||r!=="wc_sessionRequest")return!1;const{request:i}=n;return Object.keys(NN).includes(i.method)}),he(this,"getTVFParams",(r,n,i)=>{var s,o;try{const a=n.request.method,c=this.extractTxHashesFromResult(a,i);return cs(Yr({correlationId:r,rpcMethods:[a],chainId:n.chainId},this.isValidContractData(n.request.params)&&{contractAddresses:[(o=(s=n.request.params)==null?void 0:s[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),he(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const i=(r==null?void 0:r.data)||((n=r==null?void 0:r[0])==null?void 0:n.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),he(this,"extractTxHashesFromResult",(r,n)=>{try{const i=NN[r];if(typeof n=="string")return[n];const s=n[i.key];if(kh(s))return s;if(typeof s=="string")return[s]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Gn.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes($1)?this.client.auth.authKeys.get($1):{publicKey:void 0},a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:s===Br.link_mode?x0:Vl});try{Zp(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a,attestation:i,transportType:s,encryptedId:Pc(n)})):td(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s})}catch(c){this.client.logger.error(c)}}registerExpirerEvents(){this.client.core.expirer.on(mo.expired,async e=>{const{topic:r,id:n}=GR(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,me("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,me("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Qu.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Qu.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!fn(e,!1)){const{message:r}=me("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=me("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if($l(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=me("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!fn(e,!1)){const{message:r}=me("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=me("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if($l(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=me("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=me("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(fn(e,!1)){const{message:r}=me("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=me("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!sce(e)){const{message:r}=me("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=me("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if($l(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=me("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}},kde=class extends rd{constructor(e,r){super(e,r,wde,w5),this.core=e,this.logger=r}},Rde=class extends rd{constructor(e,r){super(e,r,bde,w5),this.core=e,this.logger=r}},Dde=class extends rd{constructor(e,r){super(e,r,Ede,w5,n=>n.id),this.core=e,this.logger=r}},Lde=class extends rd{constructor(e,r){super(e,r,Ide,h2,()=>$1),this.core=e,this.logger=r}},Bde=class extends rd{constructor(e,r){super(e,r,Ade,h2),this.core=e,this.logger=r}},jde=class extends rd{constructor(e,r){super(e,r,Cde,h2,n=>n.id),this.core=e,this.logger=r}};var Ude=Object.defineProperty,Fde=(t,e,r)=>e in t?Ude(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,g3=(t,e,r)=>Fde(t,typeof e!="symbol"?e+"":e,r);let zde=class{constructor(e,r){this.core=e,this.logger=r,g3(this,"authKeys"),g3(this,"pairingTopics"),g3(this,"requests"),this.authKeys=new Lde(this.core,this.logger),this.pairingTopics=new Bde(this.core,this.logger),this.requests=new jde(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}};var qde=Object.defineProperty,Wde=(t,e,r)=>e in t?qde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Et=(t,e,r)=>Wde(t,typeof e!="symbol"?e+"":e,r);let Hde=class GD extends mde{constructor(e){super(e),Et(this,"protocol",HD),Et(this,"version",KD),Et(this,"name",f3.name),Et(this,"metadata"),Et(this,"core"),Et(this,"logger"),Et(this,"events",new Dn.EventEmitter),Et(this,"engine"),Et(this,"session"),Et(this,"proposal"),Et(this,"pendingRequest"),Et(this,"auth"),Et(this,"signConfig"),Et(this,"on",(n,i)=>this.events.on(n,i)),Et(this,"once",(n,i)=>this.events.once(n,i)),Et(this,"off",(n,i)=>this.events.off(n,i)),Et(this,"removeListener",(n,i)=>this.events.removeListener(n,i)),Et(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),Et(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"update",async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"request",async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"find",n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),Et(this,"authenticate",async(n,i)=>{try{return await this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),this.name=(e==null?void 0:e.name)||f3.name,this.metadata=(e==null?void 0:e.metadata)||qR(),this.signConfig=e==null?void 0:e.signConfig;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Eu(nl({level:(e==null?void 0:e.logger)||f3.logger}));this.core=(e==null?void 0:e.core)||new fde(e),this.logger=Vt(r,this.name),this.session=new Rde(this.core,this.logger),this.proposal=new kde(this.core,this.logger),this.pendingRequest=new Dde(this.core,this.logger),this.engine=new Ode(this),this.auth=new zde(this.core,this.logger)}static async init(e){const r=new GD(e);return await r.initialize(),r}get context(){return dr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},J.toMiliseconds(J.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var S4={exports:{}};(function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Sr<"u"&&Sr,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof Sr<"u"&&Sr||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(p){return p&&DataView.prototype.isPrototypeOf(p)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(p){return p&&u.indexOf(Object.prototype.toString.call(p))>-1};function d(p){if(typeof p!="string"&&(p=String(p)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(p)||p==="")throw new TypeError('Invalid character in header field name: "'+p+'"');return p.toLowerCase()}function g(p){return typeof p!="string"&&(p=String(p)),p}function m(p){var w={next:function(){var N=p.shift();return{done:N===void 0,value:N}}};return c.iterable&&(w[Symbol.iterator]=function(){return w}),w}function v(p){this.map={},p instanceof v?p.forEach(function(w,N){this.append(N,w)},this):Array.isArray(p)?p.forEach(function(w){if(w.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+w.length);this.append(w[0],w[1])},this):p&&Object.getOwnPropertyNames(p).forEach(function(w){this.append(w,p[w])},this)}v.prototype.append=function(p,w){p=d(p),w=g(w);var N=this.map[p];this.map[p]=N?N+", "+w:w},v.prototype.delete=function(p){delete this.map[d(p)]},v.prototype.get=function(p){return p=d(p),this.has(p)?this.map[p]:null},v.prototype.has=function(p){return this.map.hasOwnProperty(d(p))},v.prototype.set=function(p,w){this.map[d(p)]=g(w)},v.prototype.forEach=function(p,w){for(var N in this.map)this.map.hasOwnProperty(N)&&p.call(w,this.map[N],N,this)},v.prototype.keys=function(){var p=[];return this.forEach(function(w,N){p.push(N)}),m(p)},v.prototype.values=function(){var p=[];return this.forEach(function(w){p.push(w)}),m(p)},v.prototype.entries=function(){var p=[];return this.forEach(function(w,N){p.push([N,w])}),m(p)},c.iterable&&(v.prototype[Symbol.iterator]=v.prototype.entries);function $(p){if(!p._noBody){if(p.bodyUsed)return Promise.reject(new TypeError("Already read"));p.bodyUsed=!0}}function _(p){return new Promise(function(w,N){p.onload=function(){w(p.result)},p.onerror=function(){N(p.error)}})}function S(p){var w=new FileReader,N=_(w);return w.readAsArrayBuffer(p),N}function A(p){var w=new FileReader,N=_(w),M=/charset=([A-Za-z0-9_-]+)/.exec(p.type),x=M?M[1]:"utf-8";return w.readAsText(p,x),N}function T(p){for(var w=new Uint8Array(p),N=new Array(w.length),M=0;M<w.length;M++)N[M]=String.fromCharCode(w[M]);return N.join("")}function k(p){if(p.slice)return p.slice(0);var w=new Uint8Array(p.byteLength);return w.set(new Uint8Array(p)),w.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(p){this.bodyUsed=this.bodyUsed,this._bodyInit=p,p?typeof p=="string"?this._bodyText=p:c.blob&&Blob.prototype.isPrototypeOf(p)?this._bodyBlob=p:c.formData&&FormData.prototype.isPrototypeOf(p)?this._bodyFormData=p:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)?this._bodyText=p.toString():c.arrayBuffer&&c.blob&&l(p)?(this._bodyArrayBuffer=k(p.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(p)||h(p))?this._bodyArrayBuffer=k(p):this._bodyText=p=Object.prototype.toString.call(p):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof p=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var p=$(this);if(p)return p;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var p=$(this);return p||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(S);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var p=$(this);if(p)return p;if(this._bodyBlob)return A(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(q)}),this.json=function(){return this.text().then(JSON.parse)},this}var L=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function F(p){var w=p.toUpperCase();return L.indexOf(w)>-1?w:p}function B(p,w){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');w=w||{};var N=w.body;if(p instanceof B){if(p.bodyUsed)throw new TypeError("Already read");this.url=p.url,this.credentials=p.credentials,w.headers||(this.headers=new v(p.headers)),this.method=p.method,this.mode=p.mode,this.signal=p.signal,!N&&p._bodyInit!=null&&(N=p._bodyInit,p.bodyUsed=!0)}else this.url=String(p);if(this.credentials=w.credentials||this.credentials||"same-origin",(w.headers||!this.headers)&&(this.headers=new v(w.headers)),this.method=F(w.method||this.method||"GET"),this.mode=w.mode||this.mode||null,this.signal=w.signal||this.signal||function(){if("AbortController"in a){var y=new AbortController;return y.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&N)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(N),(this.method==="GET"||this.method==="HEAD")&&(w.cache==="no-store"||w.cache==="no-cache")){var M=/([?&])_=[^&]*/;if(M.test(this.url))this.url=this.url.replace(M,"$1_="+new Date().getTime());else{var x=/\?/;this.url+=(x.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function q(p){var w=new FormData;return p.trim().split("&").forEach(function(N){if(N){var M=N.split("="),x=M.shift().replace(/\+/g," "),y=M.join("=").replace(/\+/g," ");w.append(decodeURIComponent(x),decodeURIComponent(y))}}),w}function D(p){var w=new v,N=p.replace(/\r?\n[\t ]+/g," ");return N.split("\r").map(function(M){return M.indexOf(`
`)===0?M.substr(1,M.length):M}).forEach(function(M){var x=M.split(":"),y=x.shift().trim();if(y){var C=x.join(":").trim();try{w.append(y,C)}catch(I){console.warn("Response "+I.message)}}}),w}R.call(B.prototype);function E(p,w){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(w||(w={}),this.type="default",this.status=w.status===void 0?200:w.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=w.statusText===void 0?"":""+w.statusText,this.headers=new v(w.headers),this.url=w.url||"",this._initBody(p)}R.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new v(this.headers),url:this.url})},E.error=function(){var p=new E(null,{status:200,statusText:""});return p.ok=!1,p.status=0,p.type="error",p};var b=[301,302,303,307,308];E.redirect=function(p,w){if(b.indexOf(w)===-1)throw new RangeError("Invalid status code");return new E(null,{status:w,headers:{location:p}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(w,N){this.message=w,this.name=N;var M=Error(w);this.stack=M.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function f(p,w){return new Promise(function(N,M){var x=new B(p,w);if(x.signal&&x.signal.aborted)return M(new o.DOMException("Aborted","AbortError"));var y=new XMLHttpRequest;function C(){y.abort()}y.onload=function(){var K={statusText:y.statusText,headers:D(y.getAllResponseHeaders()||"")};x.url.indexOf("file://")===0&&(y.status<200||y.status>599)?K.status=200:K.status=y.status,K.url="responseURL"in y?y.responseURL:K.headers.get("X-Request-URL");var V="response"in y?y.response:y.responseText;setTimeout(function(){N(new E(V,K))},0)},y.onerror=function(){setTimeout(function(){M(new TypeError("Network request failed"))},0)},y.ontimeout=function(){setTimeout(function(){M(new TypeError("Network request timed out"))},0)},y.onabort=function(){setTimeout(function(){M(new o.DOMException("Aborted","AbortError"))},0)};function I(K){try{return K===""&&a.location.href?a.location.href:K}catch{return K}}if(y.open(x.method,I(x.url),!0),x.credentials==="include"?y.withCredentials=!0:x.credentials==="omit"&&(y.withCredentials=!1),"responseType"in y&&(c.blob?y.responseType="blob":c.arrayBuffer&&(y.responseType="arraybuffer")),w&&typeof w.headers=="object"&&!(w.headers instanceof v||a.Headers&&w.headers instanceof a.Headers)){var j=[];Object.getOwnPropertyNames(w.headers).forEach(function(K){j.push(d(K)),y.setRequestHeader(K,g(w.headers[K]))}),x.headers.forEach(function(K,V){j.indexOf(V)===-1&&y.setRequestHeader(V,K)})}else x.headers.forEach(function(K,V){y.setRequestHeader(V,K)});x.signal&&(x.signal.addEventListener("abort",C),y.onreadystatechange=function(){y.readyState===4&&x.signal.removeEventListener("abort",C)}),y.send(typeof x._bodyInit>"u"?null:x._bodyInit)})}return f.polyfill=!0,a.fetch||(a.fetch=f,a.Headers=v,a.Request=B,a.Response=E),o.Headers=v,o.Request=B,o.Response=E,o.fetch=f,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=r.fetch?r:n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(S4,S4.exports);var Kde=S4.exports;const TN=ha(Kde);var Vde=Object.defineProperty,Gde=Object.defineProperties,Yde=Object.getOwnPropertyDescriptors,$N=Object.getOwnPropertySymbols,Qde=Object.prototype.hasOwnProperty,Zde=Object.prototype.propertyIsEnumerable,PN=(t,e,r)=>e in t?Vde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ON=(t,e)=>{for(var r in e||(e={}))Qde.call(e,r)&&PN(t,r,e[r]);if($N)for(var r of $N(e))Zde.call(e,r)&&PN(t,r,e[r]);return t},kN=(t,e)=>Gde(t,Yde(e));const Jde={Accept:"application/json","Content-Type":"application/json"},Xde="POST",RN={headers:Jde,method:Xde},DN=10;let hn=class{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new Dn.EventEmitter,this.isAvailable=!1,this.registering=!1,!rN(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=Mo(e),n=await(await TN(this.url,kN(ON({},RN),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!rN(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=Mo({id:1,jsonrpc:"2.0",method:"test",params:[]});await TN(e,kN(ON({},RN),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?la(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Qp(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return SD(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>DN&&this.events.setMaxListeners(DN)}};const LN="error",efe="wss://relay.walletconnect.org",tfe="wc",rfe="universal_provider",BN=`${tfe}@2:${rfe}:`,YD="https://rpc.walletconnect.org/v1/",lf="generic",nfe=`${YD}bundler`,Oo={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var xw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ife(){this.__data__=[],this.size=0}var sfe=ife;function ofe(t,e){return t===e||t!==t&&e!==e}var d2=ofe,afe=d2;function cfe(t,e){for(var r=t.length;r--;)if(afe(t[r][0],e))return r;return-1}var f2=cfe,lfe=f2,ufe=Array.prototype,hfe=ufe.splice;function dfe(t){var e=this.__data__,r=lfe(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():hfe.call(e,r,1),--this.size,!0}var ffe=dfe,pfe=f2;function gfe(t){var e=this.__data__,r=pfe(e,t);return r<0?void 0:e[r][1]}var mfe=gfe,yfe=f2;function wfe(t){return yfe(this.__data__,t)>-1}var bfe=wfe,vfe=f2;function Efe(t,e){var r=this.__data__,n=vfe(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var _fe=Efe,Sfe=sfe,xfe=ffe,Ife=mfe,Afe=bfe,Cfe=_fe;function uf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}uf.prototype.clear=Sfe,uf.prototype.delete=xfe,uf.prototype.get=Ife,uf.prototype.has=Afe,uf.prototype.set=Cfe;var p2=uf,Nfe=p2;function Mfe(){this.__data__=new Nfe,this.size=0}var Tfe=Mfe;function $fe(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var Pfe=$fe;function Ofe(t){return this.__data__.get(t)}var kfe=Ofe;function Rfe(t){return this.__data__.has(t)}var Dfe=Rfe,Lfe=typeof xw=="object"&&xw&&xw.Object===Object&&xw,QD=Lfe,Bfe=QD,jfe=typeof self=="object"&&self&&self.Object===Object&&self,Ufe=Bfe||jfe||Function("return this")(),Jp=Ufe,Ffe=Jp,zfe=Ffe.Symbol,ZD=zfe,jN=ZD,JD=Object.prototype,qfe=JD.hasOwnProperty,Wfe=JD.toString,T0=jN?jN.toStringTag:void 0;function Hfe(t){var e=qfe.call(t,T0),r=t[T0];try{t[T0]=void 0;var n=!0}catch{}var i=Wfe.call(t);return n&&(e?t[T0]=r:delete t[T0]),i}var Kfe=Hfe,Vfe=Object.prototype,Gfe=Vfe.toString;function Yfe(t){return Gfe.call(t)}var Qfe=Yfe,UN=ZD,Zfe=Kfe,Jfe=Qfe,Xfe="[object Null]",epe="[object Undefined]",FN=UN?UN.toStringTag:void 0;function tpe(t){return t==null?t===void 0?epe:Xfe:FN&&FN in Object(t)?Zfe(t):Jfe(t)}var g2=tpe;function rpe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var nd=rpe,npe=g2,ipe=nd,spe="[object AsyncFunction]",ope="[object Function]",ape="[object GeneratorFunction]",cpe="[object Proxy]";function lpe(t){if(!ipe(t))return!1;var e=npe(t);return e==ope||e==ape||e==spe||e==cpe}var b5=lpe,upe=Jp,hpe=upe["__core-js_shared__"],dpe=hpe,m3=dpe,zN=function(){var t=/[^.]+$/.exec(m3&&m3.keys&&m3.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function fpe(t){return!!zN&&zN in t}var ppe=fpe,gpe=Function.prototype,mpe=gpe.toString;function ype(t){if(t!=null){try{return mpe.call(t)}catch{}try{return t+""}catch{}}return""}var wpe=ype,bpe=b5,vpe=ppe,Epe=nd,_pe=wpe,Spe=/[\\^$.*+?()[\]{}|]/g,xpe=/^\[object .+?Constructor\]$/,Ipe=Function.prototype,Ape=Object.prototype,Cpe=Ipe.toString,Npe=Ape.hasOwnProperty,Mpe=RegExp("^"+Cpe.call(Npe).replace(Spe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Tpe(t){if(!Epe(t)||vpe(t))return!1;var e=bpe(t)?Mpe:xpe;return e.test(_pe(t))}var $pe=Tpe;function Ppe(t,e){return t==null?void 0:t[e]}var Ope=Ppe,kpe=$pe,Rpe=Ope;function Dpe(t,e){var r=Rpe(t,e);return kpe(r)?r:void 0}var v5=Dpe,Lpe=v5,Bpe=Jp,jpe=Lpe(Bpe,"Map"),XD=jpe,Upe=v5,Fpe=Upe(Object,"create"),m2=Fpe,qN=m2;function zpe(){this.__data__=qN?qN(null):{},this.size=0}var qpe=zpe;function Wpe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Hpe=Wpe,Kpe=m2,Vpe="__lodash_hash_undefined__",Gpe=Object.prototype,Ype=Gpe.hasOwnProperty;function Qpe(t){var e=this.__data__;if(Kpe){var r=e[t];return r===Vpe?void 0:r}return Ype.call(e,t)?e[t]:void 0}var Zpe=Qpe,Jpe=m2,Xpe=Object.prototype,e0e=Xpe.hasOwnProperty;function t0e(t){var e=this.__data__;return Jpe?e[t]!==void 0:e0e.call(e,t)}var r0e=t0e,n0e=m2,i0e="__lodash_hash_undefined__";function s0e(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n0e&&e===void 0?i0e:e,this}var o0e=s0e,a0e=qpe,c0e=Hpe,l0e=Zpe,u0e=r0e,h0e=o0e;function hf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}hf.prototype.clear=a0e,hf.prototype.delete=c0e,hf.prototype.get=l0e,hf.prototype.has=u0e,hf.prototype.set=h0e;var d0e=hf,WN=d0e,f0e=p2,p0e=XD;function g0e(){this.size=0,this.__data__={hash:new WN,map:new(p0e||f0e),string:new WN}}var m0e=g0e;function y0e(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var w0e=y0e,b0e=w0e;function v0e(t,e){var r=t.__data__;return b0e(e)?r[typeof e=="string"?"string":"hash"]:r.map}var y2=v0e,E0e=y2;function _0e(t){var e=E0e(this,t).delete(t);return this.size-=e?1:0,e}var S0e=_0e,x0e=y2;function I0e(t){return x0e(this,t).get(t)}var A0e=I0e,C0e=y2;function N0e(t){return C0e(this,t).has(t)}var M0e=N0e,T0e=y2;function $0e(t,e){var r=T0e(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var P0e=$0e,O0e=m0e,k0e=S0e,R0e=A0e,D0e=M0e,L0e=P0e;function df(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}df.prototype.clear=O0e,df.prototype.delete=k0e,df.prototype.get=R0e,df.prototype.has=D0e,df.prototype.set=L0e;var B0e=df,j0e=p2,U0e=XD,F0e=B0e,z0e=200;function q0e(t,e){var r=this.__data__;if(r instanceof j0e){var n=r.__data__;if(!U0e||n.length<z0e-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new F0e(n)}return r.set(t,e),this.size=r.size,this}var W0e=q0e,H0e=p2,K0e=Tfe,V0e=Pfe,G0e=kfe,Y0e=Dfe,Q0e=W0e;function ff(t){var e=this.__data__=new H0e(t);this.size=e.size}ff.prototype.clear=K0e,ff.prototype.delete=V0e,ff.prototype.get=G0e,ff.prototype.has=Y0e,ff.prototype.set=Q0e;var Z0e=ff,J0e=v5,X0e=function(){try{var t=J0e(Object,"defineProperty");return t({},"",{}),t}catch{}}(),eL=X0e,HN=eL;function ege(t,e,r){e=="__proto__"&&HN?HN(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var E5=ege,tge=E5,rge=d2;function nge(t,e,r){(r!==void 0&&!rge(t[e],r)||r===void 0&&!(e in t))&&tge(t,e,r)}var tL=nge;function ige(t){return function(e,r,n){for(var i=-1,s=Object(e),o=n(e),a=o.length;a--;){var c=o[t?a:++i];if(r(s[c],c,s)===!1)break}return e}}var sge=ige,oge=sge,age=oge(),cge=age,x4={exports:{}};(function(t,e){var r=Jp,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,o=s?r.Buffer:void 0,a=o?o.allocUnsafe:void 0;function c(l,u){if(u)return l.slice();var h=l.length,d=a?a(h):new l.constructor(h);return l.copy(d),d}t.exports=c})(x4,x4.exports);var lge=Jp,uge=lge.Uint8Array,hge=uge,KN=hge;function dge(t){var e=new t.constructor(t.byteLength);return new KN(e).set(new KN(t)),e}var fge=dge,pge=fge;function gge(t,e){var r=e?pge(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var mge=gge;function yge(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var wge=yge,bge=nd,VN=Object.create,vge=function(){function t(){}return function(e){if(!bge(e))return{};if(VN)return VN(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Ege=vge;function _ge(t,e){return function(r){return t(e(r))}}var Sge=_ge,xge=Sge,Ige=xge(Object.getPrototypeOf,Object),rL=Ige,Age=Object.prototype;function Cge(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Age;return t===r}var nL=Cge,Nge=Ege,Mge=rL,Tge=nL;function $ge(t){return typeof t.constructor=="function"&&!Tge(t)?Nge(Mge(t)):{}}var Pge=$ge;function Oge(t){return t!=null&&typeof t=="object"}var by=Oge,kge=g2,Rge=by,Dge="[object Arguments]";function Lge(t){return Rge(t)&&kge(t)==Dge}var Bge=Lge,GN=Bge,jge=by,iL=Object.prototype,Uge=iL.hasOwnProperty,Fge=iL.propertyIsEnumerable,zge=GN(function(){return arguments}())?GN:function(t){return jge(t)&&Uge.call(t,"callee")&&!Fge.call(t,"callee")},sL=zge,qge=Array.isArray,oL=qge,Wge=9007199254740991;function Hge(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Wge}var aL=Hge,Kge=b5,Vge=aL;function Gge(t){return t!=null&&Vge(t.length)&&!Kge(t)}var _5=Gge,Yge=_5,Qge=by;function Zge(t){return Qge(t)&&Yge(t)}var Jge=Zge,Yb={exports:{}};function Xge(){return!1}var eme=Xge;(function(t,e){var r=Jp,n=eme,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?r.Buffer:void 0,c=a?a.isBuffer:void 0,l=c||n;t.exports=l})(Yb,Yb.exports);var tme=g2,rme=rL,nme=by,ime="[object Object]",sme=Function.prototype,ome=Object.prototype,cL=sme.toString,ame=ome.hasOwnProperty,cme=cL.call(Object);function lme(t){if(!nme(t)||tme(t)!=ime)return!1;var e=rme(t);if(e===null)return!0;var r=ame.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&cL.call(r)==cme}var ume=lme,hme=g2,dme=aL,fme=by,pme="[object Arguments]",gme="[object Array]",mme="[object Boolean]",yme="[object Date]",wme="[object Error]",bme="[object Function]",vme="[object Map]",Eme="[object Number]",_me="[object Object]",Sme="[object RegExp]",xme="[object Set]",Ime="[object String]",Ame="[object WeakMap]",Cme="[object ArrayBuffer]",Nme="[object DataView]",Mme="[object Float32Array]",Tme="[object Float64Array]",$me="[object Int8Array]",Pme="[object Int16Array]",Ome="[object Int32Array]",kme="[object Uint8Array]",Rme="[object Uint8ClampedArray]",Dme="[object Uint16Array]",Lme="[object Uint32Array]",Lr={};Lr[Mme]=Lr[Tme]=Lr[$me]=Lr[Pme]=Lr[Ome]=Lr[kme]=Lr[Rme]=Lr[Dme]=Lr[Lme]=!0,Lr[pme]=Lr[gme]=Lr[Cme]=Lr[mme]=Lr[Nme]=Lr[yme]=Lr[wme]=Lr[bme]=Lr[vme]=Lr[Eme]=Lr[_me]=Lr[Sme]=Lr[xme]=Lr[Ime]=Lr[Ame]=!1;function Bme(t){return fme(t)&&dme(t.length)&&!!Lr[hme(t)]}var jme=Bme;function Ume(t){return function(e){return t(e)}}var Fme=Ume,I4={exports:{}};(function(t,e){var r=QD,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,o=s&&r.process,a=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(I4,I4.exports);var zme=jme,qme=Fme,YN=I4.exports,QN=YN&&YN.isTypedArray,Wme=QN?qme(QN):zme,lL=Wme;function Hme(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var uL=Hme,Kme=E5,Vme=d2,Gme=Object.prototype,Yme=Gme.hasOwnProperty;function Qme(t,e,r){var n=t[e];(!(Yme.call(t,e)&&Vme(n,r))||r===void 0&&!(e in t))&&Kme(t,e,r)}var Zme=Qme,Jme=Zme,Xme=E5;function eye(t,e,r,n){var i=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=n?n(r[a],t[a],a,r,t):void 0;c===void 0&&(c=t[a]),i?Xme(r,a,c):Jme(r,a,c)}return r}var tye=eye;function rye(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var nye=rye,iye=9007199254740991,sye=/^(?:0|[1-9]\d*)$/;function oye(t,e){var r=typeof t;return e=e??iye,!!e&&(r=="number"||r!="symbol"&&sye.test(t))&&t>-1&&t%1==0&&t<e}var hL=oye,aye=nye,cye=sL,lye=oL,uye=Yb.exports,hye=hL,dye=lL,fye=Object.prototype,pye=fye.hasOwnProperty;function gye(t,e){var r=lye(t),n=!r&&cye(t),i=!r&&!n&&uye(t),s=!r&&!n&&!i&&dye(t),o=r||n||i||s,a=o?aye(t.length,String):[],c=a.length;for(var l in t)(e||pye.call(t,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||hye(l,c)))&&a.push(l);return a}var mye=gye;function yye(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var wye=yye,bye=nd,vye=nL,Eye=wye,_ye=Object.prototype,Sye=_ye.hasOwnProperty;function xye(t){if(!bye(t))return Eye(t);var e=vye(t),r=[];for(var n in t)n=="constructor"&&(e||!Sye.call(t,n))||r.push(n);return r}var Iye=xye,Aye=mye,Cye=Iye,Nye=_5;function Mye(t){return Nye(t)?Aye(t,!0):Cye(t)}var dL=Mye,Tye=tye,$ye=dL;function Pye(t){return Tye(t,$ye(t))}var Oye=Pye,ZN=tL,kye=x4.exports,Rye=mge,Dye=wge,Lye=Pge,JN=sL,XN=oL,Bye=Jge,jye=Yb.exports,Uye=b5,Fye=nd,zye=ume,qye=lL,eM=uL,Wye=Oye;function Hye(t,e,r,n,i,s,o){var a=eM(t,r),c=eM(e,r),l=o.get(c);if(l){ZN(t,r,l);return}var u=s?s(a,c,r+"",t,e,o):void 0,h=u===void 0;if(h){var d=XN(c),g=!d&&jye(c),m=!d&&!g&&qye(c);u=c,d||g||m?XN(a)?u=a:Bye(a)?u=Dye(a):g?(h=!1,u=kye(c,!0)):m?(h=!1,u=Rye(c,!0)):u=[]:zye(c)||JN(c)?(u=a,JN(a)?u=Wye(a):(!Fye(a)||Uye(a))&&(u=Lye(c))):h=!1}h&&(o.set(c,u),i(u,c,n,s,o),o.delete(c)),ZN(t,r,u)}var Kye=Hye,Vye=Z0e,Gye=tL,Yye=cge,Qye=Kye,Zye=nd,Jye=dL,Xye=uL;function fL(t,e,r,n,i){t!==e&&Yye(e,function(s,o){if(i||(i=new Vye),Zye(s))Qye(t,e,o,r,fL,n,i);else{var a=n?n(Xye(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),Gye(t,o,a)}},Jye)}var ewe=fL;function twe(t){return t}var pL=twe;function rwe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var nwe=rwe,iwe=nwe,tM=Math.max;function swe(t,e,r){return e=tM(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=tM(n.length-e,0),o=Array(s);++i<s;)o[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(o),iwe(t,this,a)}}var owe=swe;function awe(t){return function(){return t}}var cwe=awe,lwe=cwe,rM=eL,uwe=pL,hwe=rM?function(t,e){return rM(t,"toString",{configurable:!0,enumerable:!1,value:lwe(e),writable:!0})}:uwe,dwe=hwe,fwe=800,pwe=16,gwe=Date.now;function mwe(t){var e=0,r=0;return function(){var n=gwe(),i=pwe-(n-r);if(r=n,i>0){if(++e>=fwe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var ywe=mwe,wwe=dwe,bwe=ywe,vwe=bwe(wwe),Ewe=vwe,_we=pL,Swe=owe,xwe=Ewe;function Iwe(t,e){return xwe(Swe(t,e,_we),t+"")}var Awe=Iwe,Cwe=d2,Nwe=_5,Mwe=hL,Twe=nd;function $we(t,e,r){if(!Twe(r))return!1;var n=typeof e;return(n=="number"?Nwe(r)&&Mwe(e,r.length):n=="string"&&e in r)?Cwe(r[e],t):!1}var Pwe=$we,Owe=Awe,kwe=Pwe;function Rwe(t){return Owe(function(e,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&kwe(r[0],r[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var a=r[n];a&&t(e,a,n,s)}return e})}var Dwe=Rwe,Lwe=ewe,Bwe=Dwe,jwe=Bwe(function(t,e,r){Lwe(t,e,r)}),Uwe=jwe,Fwe=Object.defineProperty,zwe=Object.defineProperties,qwe=Object.getOwnPropertyDescriptors,nM=Object.getOwnPropertySymbols,Wwe=Object.prototype.hasOwnProperty,Hwe=Object.prototype.propertyIsEnumerable,iM=(t,e,r)=>e in t?Fwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Iw=(t,e)=>{for(var r in e||(e={}))Wwe.call(e,r)&&iM(t,r,e[r]);if(nM)for(var r of nM(e))Hwe.call(e,r)&&iM(t,r,e[r]);return t},Kwe=(t,e)=>zwe(t,qwe(e));function Ys(t,e,r){var n;const i=Yf(t);return((n=e.rpcMap)==null?void 0:n[i.reference])||`${YD}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function id(t){return t.includes(":")?t.split(":")[1]:t}function gL(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Vwe(t,e){const r=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!r.length)return[];const n=[];return r.forEach(i=>{const s=e.namespaces[i].accounts;n.push(...s)}),n}function y3(t={},e={}){const r=sM(t),n=sM(e);return Uwe(r,n)}function sM(t){var e,r,n,i;const s={};if(!hm(t))return s;for(const[o,a]of Object.entries(t)){const c=g5(o)?[o]:a.chains,l=a.methods||[],u=a.events||[],h=a.rpcMap||{},d=sg(o);s[d]=Kwe(Iw(Iw({},s[d]),a),{chains:N1(c,(e=s[d])==null?void 0:e.chains),methods:N1(l,(r=s[d])==null?void 0:r.methods),events:N1(u,(n=s[d])==null?void 0:n.events),rpcMap:Iw(Iw({},h),(i=s[d])==null?void 0:i.rpcMap)})}return s}function Gwe(t){return t.includes(":")?t.split(":")[2]:t}function oM(t){const e={};for(const[r,n]of Object.entries(t)){const i=n.methods||[],s=n.events||[],o=n.accounts||[],a=g5(r)?[r]:n.chains?n.chains:gL(n.accounts);e[r]={chains:a,methods:i,events:s,accounts:o}}return e}function w3(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const mL={},Rt=t=>mL[t],b3=(t,e)=>{mL[t]=e};var Ywe=Object.defineProperty,Qwe=(t,e,r)=>e in t?Ywe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ad=(t,e,r)=>Qwe(t,typeof e!="symbol"?e+"":e,r);class Zwe{constructor(e){Ad(this,"name","polkadot"),Ad(this,"client"),Ad(this,"httpProviders"),Ad(this,"events"),Ad(this,"namespace"),Ad(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=id(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Rt("disableProviderPing")))}}var Jwe=Object.defineProperty,Xwe=Object.defineProperties,e1e=Object.getOwnPropertyDescriptors,aM=Object.getOwnPropertySymbols,t1e=Object.prototype.hasOwnProperty,r1e=Object.prototype.propertyIsEnumerable,A4=(t,e,r)=>e in t?Jwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,cM=(t,e)=>{for(var r in e||(e={}))t1e.call(e,r)&&A4(t,r,e[r]);if(aM)for(var r of aM(e))r1e.call(e,r)&&A4(t,r,e[r]);return t},lM=(t,e)=>Xwe(t,e1e(e)),Cd=(t,e,r)=>A4(t,typeof e!="symbol"?e+"":e,r);class n1e{constructor(e){Cd(this,"name","eip155"),Cd(this,"client"),Cd(this,"chainId"),Cd(this,"namespace"),Cd(this,"httpProviders"),Cd(this,"events"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||Ys(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Rt("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=parseInt(id(r));e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let i=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,i;const s=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0];if(!s)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),a=((i=o==null?void 0:o.sessionProperties)==null?void 0:i.capabilities)||{};if(a!=null&&a[s])return a==null?void 0:a[s];const c=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:lM(cM({},o.sessionProperties||{}),{capabilities:lM(cM({},a||{}),{[s]:c})})})}catch(l){console.warn("Failed to update session with capabilities",l)}return c}async getCallStatus(e){var r,n;const i=this.client.session.get(e.topic),s=(r=i.sessionProperties)==null?void 0:r.bundler_name;if(s){const a=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(n=i.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(es("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,r){return`${nfe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var i1e=Object.defineProperty,s1e=(t,e,r)=>e in t?i1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nd=(t,e,r)=>s1e(t,typeof e!="symbol"?e+"":e,r);class o1e{constructor(e){Nd(this,"name","solana"),Nd(this,"client"),Nd(this,"httpProviders"),Nd(this,"events"),Nd(this,"namespace"),Nd(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=id(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Rt("disableProviderPing")))}}var a1e=Object.defineProperty,c1e=(t,e,r)=>e in t?a1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Md=(t,e,r)=>c1e(t,typeof e!="symbol"?e+"":e,r);class l1e{constructor(e){Md(this,"name","cosmos"),Md(this,"client"),Md(this,"httpProviders"),Md(this,"events"),Md(this,"namespace"),Md(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=id(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Rt("disableProviderPing")))}}var u1e=Object.defineProperty,h1e=(t,e,r)=>e in t?u1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Td=(t,e,r)=>h1e(t,typeof e!="symbol"?e+"":e,r);class d1e{constructor(e){Td(this,"name","algorand"),Td(this,"client"),Td(this,"httpProviders"),Td(this,"events"),Td(this,"namespace"),Td(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||Ys(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Vr(new hn(n,Rt("disableProviderPing")))}}var f1e=Object.defineProperty,p1e=(t,e,r)=>e in t?f1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$d=(t,e,r)=>p1e(t,typeof e!="symbol"?e+"":e,r);class g1e{constructor(e){$d(this,"name","cip34"),$d(this,"client"),$d(this,"httpProviders"),$d(this,"events"),$d(this,"namespace"),$d(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),i=id(r);e[i]=this.createHttpProvider(i,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Rt("disableProviderPing")))}}var m1e=Object.defineProperty,y1e=(t,e,r)=>e in t?m1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pd=(t,e,r)=>y1e(t,typeof e!="symbol"?e+"":e,r);class w1e{constructor(e){Pd(this,"name","elrond"),Pd(this,"client"),Pd(this,"httpProviders"),Pd(this,"events"),Pd(this,"namespace"),Pd(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=id(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Rt("disableProviderPing")))}}var b1e=Object.defineProperty,v1e=(t,e,r)=>e in t?b1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Od=(t,e,r)=>v1e(t,typeof e!="symbol"?e+"":e,r);class E1e{constructor(e){Od(this,"name","multiversx"),Od(this,"client"),Od(this,"httpProviders"),Od(this,"events"),Od(this,"namespace"),Od(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=id(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Rt("disableProviderPing")))}}var _1e=Object.defineProperty,S1e=(t,e,r)=>e in t?_1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kd=(t,e,r)=>S1e(t,typeof e!="symbol"?e+"":e,r);class x1e{constructor(e){kd(this,"name","near"),kd(this,"client"),kd(this,"httpProviders"),kd(this,"events"),kd(this,"namespace"),kd(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Ys(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace);return typeof n>"u"?void 0:new Vr(new hn(n,Rt("disableProviderPing")))}}var I1e=Object.defineProperty,A1e=(t,e,r)=>e in t?I1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Rd=(t,e,r)=>A1e(t,typeof e!="symbol"?e+"":e,r);class C1e{constructor(e){Rd(this,"name","tezos"),Rd(this,"client"),Rd(this,"httpProviders"),Rd(this,"events"),Rd(this,"namespace"),Rd(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Ys(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace);return typeof n>"u"?void 0:new Vr(new hn(n))}}var N1e=Object.defineProperty,M1e=(t,e,r)=>e in t?N1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Dd=(t,e,r)=>M1e(t,typeof e!="symbol"?e+"":e,r);class T1e{constructor(e){Dd(this,"name",lf),Dd(this,"client"),Dd(this,"httpProviders"),Dd(this,"events"),Dd(this,"namespace"),Dd(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(i=>{const s=Yf(i);n[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Rt("disableProviderPing")))}}var $1e=Object.defineProperty,P1e=Object.defineProperties,O1e=Object.getOwnPropertyDescriptors,uM=Object.getOwnPropertySymbols,k1e=Object.prototype.hasOwnProperty,R1e=Object.prototype.propertyIsEnumerable,C4=(t,e,r)=>e in t?$1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Aw=(t,e)=>{for(var r in e||(e={}))k1e.call(e,r)&&C4(t,r,e[r]);if(uM)for(var r of uM(e))R1e.call(e,r)&&C4(t,r,e[r]);return t},v3=(t,e)=>P1e(t,O1e(e)),zo=(t,e,r)=>C4(t,typeof e!="symbol"?e+"":e,r);let D1e=class yL{constructor(e){zo(this,"client"),zo(this,"namespaces"),zo(this,"optionalNamespaces"),zo(this,"sessionProperties"),zo(this,"events",new Bp),zo(this,"rpcProviders",{}),zo(this,"session"),zo(this,"providerOpts"),zo(this,"logger"),zo(this,"uri"),zo(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Eu(nl({level:(e==null?void 0:e.logger)||LN})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new yL(e);return await r.initialize(),r}async request(e,r,n){const[i,s]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:Aw({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,i){const s=new Date().getTime();this.request(e,n,i).then(o=>r(null,xu(s,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:ir("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:i}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const s=await i();if(this.session=s.session,this.session){const o=oM(this.session.namespaces);this.namespaces=y3(this.namespaces,o),this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const i=await n();this.session=i;const s=oM(i.namespaces);return this.namespaces=y3(this.namespaces,s),this.persist("namespaces",this.namespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,i]=this.validateChain(e),s=this.getProvider(n);s.name===lf?s.setDefaultChain(`${n}:${i}`,r):s.setDefaultChain(i,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(kh(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Hde.init({core:this.providerOpts.core,logger:this.providerOpts.logger||LN,relayUrl:this.providerOpts.relayUrl||efe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>sg(r)))];b3("client",this.client),b3("events",this.events),b3("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=Vwe(r,this.session),i=gL(n),s=y3(this.namespaces,this.optionalNamespaces),o=v3(Aw({},s[r]),{accounts:n,chains:i});switch(r){case"eip155":this.rpcProviders[r]=new n1e({namespace:o});break;case"algorand":this.rpcProviders[r]=new d1e({namespace:o});break;case"solana":this.rpcProviders[r]=new o1e({namespace:o});break;case"cosmos":this.rpcProviders[r]=new l1e({namespace:o});break;case"polkadot":this.rpcProviders[r]=new Zwe({namespace:o});break;case"cip34":this.rpcProviders[r]=new g1e({namespace:o});break;case"elrond":this.rpcProviders[r]=new w1e({namespace:o});break;case"multiversx":this.rpcProviders[r]=new E1e({namespace:o});break;case"near":this.rpcProviders[r]=new x1e({namespace:o});break;case"tezos":this.rpcProviders[r]=new C1e({namespace:o});break;default:this.rpcProviders[lf]?this.rpcProviders[lf].updateNamespace(o):this.rpcProviders[lf]=new T1e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:n}=r;if(n.name==="accountsChanged"){const i=n.data;i&&kh(i)&&this.events.emit("accountsChanged",i.map(Gwe))}else if(n.name==="chainChanged"){const i=r.chainId,s=r.event.data,o=sg(i),a=w3(i)!==w3(s)?`${o}:${w3(s)}`:i;this.onChainChanged(a)}else this.events.emit(n.name,n.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n;const{namespaces:i}=r,s=(n=this.client)==null?void 0:n.session.get(e);this.session=v3(Aw({},s),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",v3(Aw({},ir("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Oo.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[lf]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:n,sessionProperties:i}=e;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=i,this.persist("namespaces",r),this.persist("optionalNamespaces",n)}validateChain(e){const[r,n]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>sg(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const i=sg(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,i]=this.validateChain(e);i&&(r||this.getProvider(n).setDefaultChain(i),this.namespaces[n]?this.namespaces[n].defaultChain=i:this.namespaces[`${n}:${i}`]?this.namespaces[`${n}:${i}`].defaultChain=i:this.namespaces[`${n}:${i}`]={defaultChain:i},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",i))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,r){this.client.core.storage.setItem(`${BN}/${e}`,r)}async getFromStore(e){return await this.client.core.storage.getItem(`${BN}/${e}`)}};const L1e=D1e,wL={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(r=>r.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]}};var B1e=20,j1e=1,Rh=1e6,hM=1e6,U1e=-7,F1e=21,z1e=!1,vy="[big.js] ",sd=vy+"Invalid ",w2=sd+"decimal places",q1e=sd+"rounding mode",bL=vy+"Division by zero",tr={},Ba=void 0,W1e=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function vL(){function t(e){var r=this;if(!(r instanceof t))return e===Ba?vL():new t(e);if(e instanceof t)r.s=e.s,r.e=e.e,r.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(sd+"value");e=e===0&&1/e<0?"-0":String(e)}H1e(r,e)}r.constructor=t}return t.prototype=tr,t.DP=B1e,t.RM=j1e,t.NE=U1e,t.PE=F1e,t.strict=z1e,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function H1e(t,e){var r,n,i;if(!W1e.test(e))throw Error(sd+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),i=e.length,n=0;n<i&&e.charAt(n)=="0";)++n;if(n==i)t.c=[t.e=0];else{for(;i>0&&e.charAt(--i)=="0";);for(t.e=r-n-1,t.c=[],r=0;n<=i;)t.c[r++]=+e.charAt(n++)}return t}function od(t,e,r,n){var i=t.c;if(r===Ba&&(r=t.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(q1e);if(e<1)n=r===3&&(n||!!i[0])||e===0&&(r===1&&i[0]>=5||r===2&&(i[0]>5||i[0]===5&&(n||i[1]!==Ba))),i.length=1,n?(t.e=t.e-e+1,i[0]=1):i[0]=t.e=0;else if(e<i.length){if(n=r===1&&i[e]>=5||r===2&&(i[e]>5||i[e]===5&&(n||i[e+1]!==Ba||i[e-1]&1))||r===3&&(n||!!i[0]),i.length=e,n){for(;++i[--e]>9;)if(i[e]=0,e===0){++t.e,i.unshift(1);break}}for(e=i.length;!i[--e];)i.pop()}return t}function ad(t,e,r){var n=t.e,i=t.c.join(""),s=i.length;if(e)i=i.charAt(0)+(s>1?"."+i.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)i="0"+i;i="0."+i}else if(n>0)if(++n>s)for(n-=s;n--;)i+="0";else n<s&&(i=i.slice(0,n)+"."+i.slice(n));else s>1&&(i=i.charAt(0)+"."+i.slice(1));return t.s<0&&r?"-"+i:i}tr.abs=function(){var t=new this.constructor(this);return t.s=1,t};tr.cmp=function(t){var e,r=this,n=r.c,i=(t=new r.constructor(t)).c,s=r.s,o=t.s,a=r.e,c=t.e;if(!n[0]||!i[0])return n[0]?s:i[0]?-o:0;if(s!=o)return s;if(e=s<0,a!=c)return a>c^e?1:-1;for(o=(a=n.length)<(c=i.length)?a:c,s=-1;++s<o;)if(n[s]!=i[s])return n[s]>i[s]^e?1:-1;return a==c?0:a>c^e?1:-1};tr.div=function(t){var e=this,r=e.constructor,n=e.c,i=(t=new r(t)).c,s=e.s==t.s?1:-1,o=r.DP;if(o!==~~o||o<0||o>Rh)throw Error(w2);if(!i[0])throw Error(bL);if(!n[0])return t.s=s,t.c=[t.e=0],t;var a,c,l,u,h,d=i.slice(),g=a=i.length,m=n.length,v=n.slice(0,a),$=v.length,_=t,S=_.c=[],A=0,T=o+(_.e=e.e-t.e)+1;for(_.s=s,s=T<0?0:T,d.unshift(0);$++<a;)v.push(0);do{for(l=0;l<10;l++){if(a!=($=v.length))u=a>$?1:-1;else for(h=-1,u=0;++h<a;)if(i[h]!=v[h]){u=i[h]>v[h]?1:-1;break}if(u<0){for(c=$==a?i:d;$;){if(v[--$]<c[$]){for(h=$;h&&!v[--h];)v[h]=9;--v[h],v[$]+=10}v[$]-=c[$]}for(;!v[0];)v.shift()}else break}S[A++]=u?l:++l,v[0]&&u?v[$]=n[g]||0:v=[n[g]]}while((g++<m||v[0]!==Ba)&&s--);return!S[0]&&A!=1&&(S.shift(),_.e--,T--),A>T&&od(_,T,r.RM,v[0]!==Ba),_};tr.eq=function(t){return this.cmp(t)===0};tr.gt=function(t){return this.cmp(t)>0};tr.gte=function(t){return this.cmp(t)>-1};tr.lt=function(t){return this.cmp(t)<0};tr.lte=function(t){return this.cmp(t)<1};tr.minus=tr.sub=function(t){var e,r,n,i,s=this,o=s.constructor,a=s.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,s.plus(t);var l=s.c.slice(),u=s.e,h=t.c,d=t.e;if(!l[0]||!h[0])return h[0]?t.s=-c:l[0]?t=new o(s):t.s=1,t;if(a=u-d){for((i=a<0)?(a=-a,n=l):(d=u,n=h),n.reverse(),c=a;c--;)n.push(0);n.reverse()}else for(r=((i=l.length<h.length)?l:h).length,a=c=0;c<r;c++)if(l[c]!=h[c]){i=l[c]<h[c];break}if(i&&(n=l,l=h,h=n,t.s=-t.s),(c=(r=h.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;r>a;){if(l[--r]<h[r]){for(e=r;e&&!l[--e];)l[e]=9;--l[e],l[r]+=10}l[r]-=h[r]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--d;return l[0]||(t.s=1,l=[d=0]),t.c=l,t.e=d,t};tr.mod=function(t){var e,r=this,n=r.constructor,i=r.s,s=(t=new n(t)).s;if(!t.c[0])throw Error(bL);return r.s=t.s=1,e=t.cmp(r)==1,r.s=i,t.s=s,e?new n(r):(i=n.DP,s=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=i,n.RM=s,this.minus(r.times(t)))};tr.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};tr.plus=tr.add=function(t){var e,r,n,i=this,s=i.constructor;if(t=new s(t),i.s!=t.s)return t.s=-t.s,i.minus(t);var o=i.e,a=i.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new s(i):t.s=i.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,n=l):(e=-e,n=a),n.reverse();e--;)n.push(0);n.reverse()}for(a.length-l.length<0&&(n=l,l=a,a=n),e=l.length,r=0;e;a[e]%=10)r=(a[--e]=a[e]+l[e]+r)/10|0;for(r&&(a.unshift(r),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};tr.pow=function(t){var e=this,r=new e.constructor("1"),n=r,i=t<0;if(t!==~~t||t<-hM||t>hM)throw Error(sd+"exponent");for(i&&(t=-t);t&1&&(n=n.times(e)),t>>=1,!!t;)e=e.times(e);return i?r.div(n):n};tr.prec=function(t,e){if(t!==~~t||t<1||t>Rh)throw Error(sd+"precision");return od(new this.constructor(this),t,e)};tr.round=function(t,e){if(t===Ba)t=0;else if(t!==~~t||t<-Rh||t>Rh)throw Error(w2);return od(new this.constructor(this),t+this.e+1,e)};tr.sqrt=function(){var t,e,r,n=this,i=n.constructor,s=n.s,o=n.e,a=new i("0.5");if(!n.c[0])return new i(n);if(s<0)throw Error(vy+"No square root");s=Math.sqrt(+ad(n,!0,!0)),s===0||s===1/0?(e=n.c.join(""),e.length+o&1||(e+="0"),s=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new i((s==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+o)):t=new i(s+""),o=t.e+(i.DP+=4);do r=t,t=a.times(r.plus(n.div(r)));while(r.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return od(t,(i.DP-=4)+t.e+1,i.RM)};tr.times=tr.mul=function(t){var e,r=this,n=r.constructor,i=r.c,s=(t=new n(t)).c,o=i.length,a=s.length,c=r.e,l=t.e;if(t.s=r.s==t.s?1:-1,!i[0]||!s[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=i,i=s,s=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+s[c]*i[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};tr.toExponential=function(t,e){var r=this,n=r.c[0];if(t!==Ba){if(t!==~~t||t<0||t>Rh)throw Error(w2);for(r=od(new r.constructor(r),++t,e);r.c.length<t;)r.c.push(0)}return ad(r,!0,!!n)};tr.toFixed=function(t,e){var r=this,n=r.c[0];if(t!==Ba){if(t!==~~t||t<0||t>Rh)throw Error(w2);for(r=od(new r.constructor(r),t+r.e+1,e),t=t+r.e+1;r.c.length<t;)r.c.push(0)}return ad(r,!1,!!n)};tr[Symbol.for("nodejs.util.inspect.custom")]=tr.toJSON=tr.toString=function(){var t=this,e=t.constructor;return ad(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};tr.toNumber=function(){var t=+ad(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(vy+"Imprecise conversion");return t};tr.toPrecision=function(t,e){var r=this,n=r.constructor,i=r.c[0];if(t!==Ba){if(t!==~~t||t<1||t>Rh)throw Error(sd+"precision");for(r=od(new n(r),t,e);r.c.length<t;)r.c.push(0)}return ad(r,t<=r.e||r.e<=n.NE||r.e>=n.PE,!!i)};tr.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(vy+"valueOf disallowed");return ad(t,t.e<=e.NE||t.e>=e.PE,!0)};var $0=vL();const Cw={bigNumber(t){return t?new $0(t):new $0(0)},multiply(t,e){if(t===void 0||e===void 0)return new $0(0);const r=new $0(t),n=new $0(e);return r.times(n)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},K1e=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],V1e=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],G1e=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Ue={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network"},Y1e={getERC20Abi:t=>Ue.USDT_CONTRACT_ADDRESSES.includes(t)?G1e:K1e,getSwapAbi:()=>V1e},El={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[r,n,i]=e;if(!r||!n||!i)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:r,chainId:n,address:i}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[r,n]=e;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:r,chainId:n}}},gt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache"};function E3(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const ct={setItem(t,e){og()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(og())return localStorage.getItem(t)||void 0},removeItem(t){og()&&localStorage.removeItem(t)},clear(){og()&&localStorage.clear()}};function og(){return typeof window<"u"&&typeof localStorage<"u"}function Gl(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const Q1e=Symbol(),dM=Object.getPrototypeOf,N4=new WeakMap,Z1e=t=>t&&(N4.has(t)?N4.get(t):dM(t)===Object.prototype||dM(t)===Array.prototype),J1e=t=>Z1e(t)&&t[Q1e]||null,fM=(t,e=!0)=>{N4.set(t,e)},Qb={},_3=t=>typeof t=="object"&&t!==null,Pl=new WeakMap,ag=new WeakSet,X1e=(t=Object.is,e=(l,u)=>new Proxy(l,u),r=l=>_3(l)&&!ag.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),n=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},i=new WeakMap,s=(l,u,h=n)=>{const d=i.get(l);if((d==null?void 0:d[0])===u)return d[1];const g=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return fM(g,!0),i.set(l,[u,g]),Reflect.ownKeys(l).forEach(m=>{if(Object.getOwnPropertyDescriptor(g,m))return;const v=Reflect.get(l,m),{enumerable:$}=Reflect.getOwnPropertyDescriptor(l,m),_={value:v,enumerable:$,configurable:!0};if(ag.has(v))fM(v,!1);else if(v instanceof Promise)delete _.value,_.get=()=>h(v);else if(Pl.has(v)){const[S,A]=Pl.get(v);_.value=s(S,A(),h)}Object.defineProperty(g,m,_)}),Object.preventExtensions(g)},o=new WeakMap,a=[1,1],c=l=>{if(!_3(l))throw new Error("object required");const u=o.get(l);if(u)return u;let h=a[0];const d=new Set,g=(B,q=++a[0])=>{h!==q&&(h=q,d.forEach(D=>D(B,q)))};let m=a[1];const v=(B=++a[1])=>(m!==B&&!d.size&&(m=B,_.forEach(([q])=>{const D=q[1](B);D>h&&(h=D)})),h),$=B=>(q,D)=>{const E=[...q];E[1]=[B,...E[1]],g(E,D)},_=new Map,S=(B,q)=>{if((Qb?"production":void 0)!=="production"&&_.has(B))throw new Error("prop listener already exists");if(d.size){const D=q[3]($(B));_.set(B,[q,D])}else _.set(B,[q])},A=B=>{var q;const D=_.get(B);D&&(_.delete(B),(q=D[1])==null||q.call(D))},T=B=>(d.add(B),d.size===1&&_.forEach(([D,E],b)=>{if((Qb?"production":void 0)!=="production"&&E)throw new Error("remove already exists");const f=D[3]($(b));_.set(b,[D,f])}),()=>{d.delete(B),d.size===0&&_.forEach(([D,E],b)=>{E&&(E(),_.set(b,[D]))})}),k=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),L=e(k,{deleteProperty(B,q){const D=Reflect.get(B,q);A(q);const E=Reflect.deleteProperty(B,q);return E&&g(["delete",[q],D]),E},set(B,q,D,E){const b=Reflect.has(B,q),f=Reflect.get(B,q,E);if(b&&(t(f,D)||o.has(D)&&t(f,o.get(D))))return!0;A(q),_3(D)&&(D=J1e(D)||D);let p=D;if(D instanceof Promise)D.then(w=>{D.status="fulfilled",D.value=w,g(["resolve",[q],w])}).catch(w=>{D.status="rejected",D.reason=w,g(["reject",[q],w])});else{!Pl.has(D)&&r(D)&&(p=c(D));const w=!ag.has(p)&&Pl.get(p);w&&S(q,w)}return Reflect.set(B,q,p,E),g(["set",[q],D,f]),!0}});o.set(l,L);const F=[k,v,s,T];return Pl.set(L,F),Reflect.ownKeys(l).forEach(B=>{const q=Object.getOwnPropertyDescriptor(l,B);"value"in q&&(L[B]=l[B],delete q.value,delete q.writable),Object.defineProperty(k,B,q)}),L})=>[c,Pl,ag,t,e,r,n,i,s,o,a],[ebe]=X1e();function nn(t={}){return ebe(t)}function ns(t,e,r){const n=Pl.get(t);(Qb?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let i;const s=[],o=n[3];let a=!1;const l=o(u=>{s.push(u),i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,l()}}function fm(t,e){const r=Pl.get(t);(Qb?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");const[n,i,s]=r;return s(n,i(),e)}function Dh(t){return ag.add(t),t}function no(t,e,r,n){let i=t[e];return ns(t,()=>{const s=t[e];Object.is(i,s)||r(i=s)})}function tbe(t){const e=nn({data:Array.from([]),has(r){return this.data.some(n=>n[0]===r)},set(r,n){const i=this.data.find(s=>s[0]===r);return i?i[1]=n:this.data.push([r,n]),this},get(r){var n;return(n=this.data.find(i=>i[0]===r))==null?void 0:n[1]},delete(r){const n=this.data.findIndex(i=>i[0]===r);return n===-1?!1:(this.data.splice(n,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(r){this.data.forEach(n=>{r(n[1],n[0],this)})},keys(){return this.data.map(r=>r[0]).values()},values(){return this.data.map(r=>r[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var pM={};const S3=(typeof process<"u"&&typeof pM<"u"?pM.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",Es={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:S3,SECURE_SITE_DASHBOARD:`${S3}/dashboard`,SECURE_SITE_FAVICON:`${S3}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155","solana"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in a new browser tab"},DEFAULT_FEATURES:{swaps:!0,onramp:!0,receive:!0,send:!0,email:!0,emailShowWallets:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],history:!0,analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Oe={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Oe.getActiveNamespace(),e=Oe.getActiveCaipNetworkId(),r=e?e.split(":")[1]:void 0,n=r?isNaN(Number(r))?r:Number(r):void 0;return{namespace:t,caipNetworkId:e,chainId:n}},setWalletConnectDeepLink({name:t,href:e}){try{ct.setItem(gt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=ct.getItem(gt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{ct.removeItem(gt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{ct.setItem(gt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{ct.setItem(gt.ACTIVE_CAIP_NETWORK_ID,t),Oe.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return ct.getItem(gt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{ct.removeItem(gt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=E3(t);ct.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Oe.getRecentWallets();e.find(n=>n.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),ct.setItem(gt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=ct.getItem(gt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const r=E3(t);ct.setItem(r,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return ct.getItem(gt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=E3(t);return ct.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{ct.setItem(gt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return ct.getItem(gt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{ct.removeItem(gt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return ct.getItem(gt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var r;const t=ct.getItem(gt.ACTIVE_CAIP_NETWORK_ID);return(r=t==null?void 0:t.split(":"))==null?void 0:r[1]},setConnectionStatus(t){try{ct.setItem(gt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return ct.getItem(gt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=ct.getItem(gt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));ct.setItem(gt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Oe.getConnectedNamespaces();e.includes(t)||(e.push(t),Oe.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Oe.getConnectedNamespaces(),r=e.indexOf(t);r>-1&&(e.splice(r,1),Oe.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return ct.getItem(gt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{ct.setItem(gt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{ct.removeItem(gt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=ct.getItem(gt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Oe.getBalanceCache();ct.setItem(gt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const r=Oe.getBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.portfolio))return r.balance;Oe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Oe.getBalanceCache();e[t.caipAddress]=t,ct.setItem(gt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=ct.getItem(gt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Oe.getBalanceCache();ct.setItem(gt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const r=Oe.getNativeBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.nativeBalance))return r;console.info("Discarding cache for address",t),Oe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Oe.getNativeBalanceCache();e[t.caipAddress]=t,ct.setItem(gt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=ct.getItem(gt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const r=Oe.getEnsCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.ens))return r.ens;Oe.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Oe.getEnsCache();e[t.address]=t,ct.setItem(gt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Oe.getEnsCache();ct.setItem(gt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=ct.getItem(gt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const r=Oe.getIdentityCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.identity))return r.identity;Oe.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Oe.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},ct.setItem(gt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Oe.getIdentityCache();ct.setItem(gt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{ct.removeItem(gt.PORTFOLIO_CACHE),ct.removeItem(gt.NATIVE_BALANCE_CACHE),ct.removeItem(gt.ENS_CACHE),ct.removeItem(gt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}}},dt={isMobile(){var t;return this.isClient()?!!((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return dt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Es.TEN_SEC_MS:!0},isAllowedRetry(t,e=Es.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},getPairingExpiry(){return Date.now()+Es.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e){if(dt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},formatUniversalUrl(t,e){if(!dt.isHttpUrl(t))return this.formatNativeUrl(t,e);let r=t;r.endsWith("/")||(r=`${r}/`);const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Oe.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,r){window==null||window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},returnOpenHref(t,e,r){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,dt.wait(2e3)])},formatBalance(t,e){let r="0.000";if(typeof t=="string"){const n=Number(t);if(n){const i=Math.floor(n*1e3)/1e3;i&&(r=i.toString())}}return`${r}${e?` ${e}`:""}`},formatBalance2(t,e){var n;let r;if(t==="0")r="0";else if(typeof t=="string"){const i=Number(t);i&&(r=(n=i.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:n[0])}return{value:r??"0",rest:r==="0"?"000":"",symbol:e}},getApiUrl(){return Ue.W3M_API_URL},getBlockchainApiUrl(){return Ue.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Ue.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,r;return typeof t=="string"?t:typeof((r=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:r.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const r={};return e&&t&&(t.forEach((n,i)=>{r[n]=i}),e.sort((n,i)=>{const s=r[n.id],o=r[i.id];return s!==void 0&&o!==void 0?s-o:s!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const r of t)e+=r.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[r,n]=e.split(".");return{dollars:r,pennies:n}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const r=new Set;return t.filter(n=>{const i=n[e];return r.has(i)?!1:(r.add(i),!0)})},generateSdkVersion(t,e,r){const i=t.length===0?Es.ADAPTER_TYPES.UNIVERSAL:t.map(s=>s.adapterType).join(",");return`${e}-${i}-${r}`},createAccount(t,e,r,n,i){return{namespace:t,address:e,type:r,publicKey:n,path:i}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),r=e[0];return e.filter(Boolean).length===3&&r in Ue.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,r="state=";if(new URL(t).host==="auth.magic.link"){const i="provider_authorization_url=",s=t.substring(t.indexOf(i)+i.length),o=this.injectIntoUrl(decodeURIComponent(s),r,e);return t.replace(s,encodeURIComponent(o))}return this.injectIntoUrl(t,r,e)},injectIntoUrl(t,e,r){const n=t.indexOf(e);if(n===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const i=t.indexOf("&",n),s=e.length,o=i!==-1?i:t.length,a=t.substring(0,n+s),c=t.substring(n+s,o),l=t.substring(i),u=c+r;return a+u+l}};async function P0(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class b2{constructor({baseUrl:e,clientId:r}){this.baseUrl=e,this.clientId=r}async get({headers:e,signal:r,cache:n,...i}){const s=this.createUrl(i);return(await P0(s,{method:"GET",headers:e,signal:r,cache:n})).json()}async getBlob({headers:e,signal:r,...n}){const i=this.createUrl(n);return(await P0(i,{method:"GET",headers:e,signal:r})).blob()}async post({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await P0(s,{method:"POST",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async put({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await P0(s,{method:"PUT",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async delete({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await P0(s,{method:"DELETE",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}createUrl({path:e,params:r}){const n=new URL(e,this.baseUrl);return r&&Object.entries(r).forEach(([i,s])=>{s&&n.searchParams.append(i,s)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}}const rbe={handleSolanaDeeplinkRedirect(t){if(Y.state.activeChain===Ue.CHAIN.SOLANA){const e=window.location.href,r=encodeURIComponent(e);if(t==="Phantom"&&!("phantom"in window)){const n=e.startsWith("https")?"https":"http",i=e.split("/")[2],s=encodeURIComponent(`${n}://${i}`);window.location.href=`https://phantom.app/ul/browse/${r}?ref=${s}`}t==="Coinbase Wallet"&&!("coinbaseSolana"in window)&&(window.location.href=`https://go.cb-w.com/dapp?cb_url=${r}`)}}},Ms=nn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Xo={state:Ms,subscribeNetworkImages(t){return ns(Ms.networkImages,()=>t(Ms.networkImages))},subscribeKey(t,e){return no(Ms,t,e)},subscribe(t){return ns(Ms,()=>t(Ms))},setWalletImage(t,e){Ms.walletImages[t]=e},setNetworkImage(t,e){Ms.networkImages[t]=e},setChainImage(t,e){Ms.chainImages[t]=e},setConnectorImage(t,e){Ms.connectorImages={...Ms.connectorImages,[t]:e}},setTokenImage(t,e){Ms.tokenImages[t]=e},setCurrencyImage(t,e){Ms.currencyImages[t]=e}},nbe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00"},x3=nn({networkImagePromises:{}}),EL={async fetchWalletImage(t){if(t)return await pt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(x3.networkImagePromises[t]||(x3.networkImagePromises[t]=pt._fetchNetworkImage(t)),await x3.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Xo.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Xo.state.walletImages[t.image_id]},getNetworkImage(t){var e,r,n;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(r=t==null?void 0:t.assets)==null?void 0:r.imageUrl;if((n=t==null?void 0:t.assets)!=null&&n.imageId)return Xo.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Xo.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return Xo.state.connectorImages[t.imageId]},getChainImage(t){return Xo.state.networkImages[nbe[t]]}},ibe={getFeatureValue(t,e){const r=e==null?void 0:e[t];return r===void 0?Es.DEFAULT_FEATURES[t]:r},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(dt.isTelegram()){if(dt.isIos())return t.filter(e=>e!=="google");if(dt.isMac())return t.filter(e=>e!=="x");if(dt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Ke=nn({features:Es.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Es.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0}),ge={state:Ke,subscribeKey(t,e){return no(Ke,t,e)},setOptions(t){Object.assign(Ke,t)},setFeatures(t){if(!t)return;Ke.features||(Ke.features=Es.DEFAULT_FEATURES);const e={...Ke.features,...t};Ke.features=e,Ke.features.socials&&(Ke.features.socials=ibe.filterSocialsByPlatform(Ke.features.socials))},setProjectId(t){Ke.projectId=t},setCustomRpcUrls(t){Ke.customRpcUrls=t},setAllWallets(t){Ke.allWallets=t},setIncludeWalletIds(t){Ke.includeWalletIds=t},setExcludeWalletIds(t){Ke.excludeWalletIds=t},setFeaturedWalletIds(t){Ke.featuredWalletIds=t},setTokens(t){Ke.tokens=t},setTermsConditionsUrl(t){Ke.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Ke.privacyPolicyUrl=t},setCustomWallets(t){Ke.customWallets=t},setIsSiweEnabled(t){Ke.isSiweEnabled=t},setIsUniversalProvider(t){Ke.isUniversalProvider=t},setSdkVersion(t){Ke.sdkVersion=t},setMetadata(t){Ke.metadata=t},setDisableAppend(t){Ke.disableAppend=t},setEIP6963Enabled(t){Ke.enableEIP6963=t},setDebug(t){Ke.debug=t},setEnableWalletConnect(t){Ke.enableWalletConnect=t},setEnableWalletGuide(t){Ke.enableWalletGuide=t},setEnableAuthLogger(t){Ke.enableAuthLogger=t},setEnableWallets(t){Ke.enableWallets=t},setHasMultipleAddresses(t){Ke.hasMultipleAddresses=t},setSIWX(t){Ke.siwx=t},setConnectMethodsOrder(t){Ke.features={...Ke.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Ke.features={...Ke.features,walletFeaturesOrder:t}},setSocialsOrder(t){Ke.features={...Ke.features,socials:t}},setCollapseWallets(t){Ke.features={...Ke.features,collapseWallets:t}},setEnableEmbedded(t){Ke.enableEmbedded=t},setAllowUnsupportedChain(t){Ke.allowUnsupportedChain=t},setManualWCControl(t){Ke.manualWCControl=t},setEnableNetworkSwitch(t){Ke.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,r])=>{r&&(Ke.defaultAccountTypes[e]=r)})},setUniversalProviderConfigOverride(t){Ke.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Ke.universalProviderConfigOverride},getSnapshot(){return fm(Ke)}},_l=nn({message:"",variant:"info",open:!1}),P1={state:_l,subscribeKey(t,e){return no(_l,t,e)},open(t,e){const{debug:r}=ge.state,{shortMessage:n,longMessage:i}=t;r&&(_l.message=n,_l.variant=e,_l.open=!0),i&&console.error(typeof i=="function"?i():i)},close(){_l.open=!1,_l.message="",_l.variant="info"}},sbe=dt.getAnalyticsUrl(),obe=new b2({baseUrl:sbe,clientId:null}),abe=["MODAL_CREATED"],Ec=nn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),xr={state:Ec,subscribe(t){return ns(Ec,()=>t(Ec))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=ge.state;return{projectId:t,st:e,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=qe.state.address;if(abe.includes(t.data.event)||typeof window>"u")return;await obe.post({path:"/e",params:xr.getSdkProperties(),body:{eventId:dt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Ec.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Ue.HTTP_STATUS_CODES.FORBIDDEN&&!Ec.reportedErrors.FORBIDDEN&&(P1.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${og()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Ec.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Ec.timestamp=Date.now(),Ec.data=t,(e=ge.state.features)!=null&&e.analytics&&xr._sendAnalyticsEvent(Ec)}},cbe=dt.getApiUrl(),Li=new b2({baseUrl:cbe,clientId:null}),lbe="40",gM="4",ube=20,Qt=nn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),pt={state:Qt,subscribeKey(t,e){return no(Qt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=ge.state;return{projectId:t,st:e||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ge.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Li.baseUrl}/getWalletImage/${t}`,r=await Li.getBlob({path:e,params:pt._getSdkProperties()});Xo.setWalletImage(t,URL.createObjectURL(r))},async _fetchNetworkImage(t){const e=`${Li.baseUrl}/public/getAssetImage/${t}`,r=await Li.getBlob({path:e,params:pt._getSdkProperties()});Xo.setNetworkImage(t,URL.createObjectURL(r))},async _fetchConnectorImage(t){const e=`${Li.baseUrl}/public/getAssetImage/${t}`,r=await Li.getBlob({path:e,params:pt._getSdkProperties()});Xo.setConnectorImage(t,URL.createObjectURL(r))},async _fetchCurrencyImage(t){const e=`${Li.baseUrl}/public/getCurrencyImage/${t}`,r=await Li.getBlob({path:e,params:pt._getSdkProperties()});Xo.setCurrencyImage(t,URL.createObjectURL(r))},async _fetchTokenImage(t){const e=`${Li.baseUrl}/public/getTokenImage/${t}`,r=await Li.getBlob({path:e,params:pt._getSdkProperties()});Xo.setTokenImage(t,URL.createObjectURL(r))},async fetchNetworkImages(){const t=Y.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:r})=>r==null?void 0:r.imageId).filter(Boolean).filter(r=>!EL.getNetworkImageById(r));e&&await Promise.allSettled(e.map(r=>pt._fetchNetworkImage(r)))},async fetchConnectorImages(){const{connectors:t}=ut.state,e=t.map(({imageId:r})=>r).filter(Boolean);await Promise.allSettled(e.map(r=>pt._fetchConnectorImage(r)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>pt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>pt._fetchTokenImage(e)))},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ge.state;if(t!=null&&t.length){const{data:e}=await Li.get({path:"/getWallets",params:{...pt._getSdkProperties(),page:"1",entries:t!=null&&t.length?String(t.length):gM,include:t==null?void 0:t.join(",")}});e.sort((n,i)=>t.indexOf(n.id)-t.indexOf(i.id));const r=e.map(n=>n.image_id).filter(Boolean);await Promise.allSettled(r.map(n=>pt._fetchWalletImage(n))),Qt.featured=e,Qt.allFeatured=e}},async fetchRecommendedWallets(){try{Qt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:r}=ge.state,n=[...e??[],...r??[]].filter(Boolean),i=Y.getRequestedCaipNetworkIds().join(","),{data:s,count:o}=await Li.get({path:"/getWallets",params:{...pt._getSdkProperties(),page:"1",chains:i,entries:gM,include:t==null?void 0:t.join(","),exclude:n==null?void 0:n.join(",")}}),a=Oe.getRecentWallets(),c=s.map(u=>u.image_id).filter(Boolean),l=a.map(u=>u.image_id).filter(Boolean);await Promise.allSettled([...c,...l].map(u=>pt._fetchWalletImage(u))),Qt.recommended=s,Qt.allRecommended=s,Qt.count=o??0}catch{}finally{Qt.isFetchingRecommendedWallets=!1}},async fetchWallets({page:t}){const{includeWalletIds:e,excludeWalletIds:r,featuredWalletIds:n}=ge.state,i=Y.getRequestedCaipNetworkIds().join(","),s=[...Qt.recommended.map(({id:l})=>l),...r??[],...n??[]].filter(Boolean),{data:o,count:a}=await Li.get({path:"/getWallets",params:{...pt._getSdkProperties(),page:String(t),entries:lbe,chains:i,include:e==null?void 0:e.join(","),exclude:s.join(",")}}),c=o.slice(0,ube).map(l=>l.image_id).filter(Boolean);await Promise.allSettled(c.map(l=>pt._fetchWalletImage(l))),Qt.wallets=dt.uniqueBy([...Qt.wallets,...pt._filterOutExtensions(o)],"id"),Qt.count=a>Qt.count?a:Qt.count,Qt.page=t},async initializeExcludedWallets({ids:t}){const e=Y.getRequestedCaipNetworkIds().join(","),{data:r}=await Li.get({path:"/getWallets",params:{...pt._getSdkProperties(),page:"1",entries:String(t.length),chains:e,include:t==null?void 0:t.join(",")}});r&&r.forEach(n=>{n!=null&&n.rdns&&Qt.excludedWallets.push({rdns:n.rdns,name:n.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:r,excludeWalletIds:n}=ge.state;Qt.search=[];const i=Y.getRequestedCaipNetworkIds().join(","),{data:s}=await Li.get({path:"/getWallets",params:{...pt._getSdkProperties(),page:"1",entries:"100",search:t==null?void 0:t.trim(),badge_type:e,chains:i,include:r==null?void 0:r.join(","),exclude:n==null?void 0:n.join(",")}});xr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const o=s.map(a=>a.image_id).filter(Boolean);await Promise.allSettled([...o.map(a=>pt._fetchWalletImage(a)),dt.wait(300)]),Qt.search=pt._filterOutExtensions(s)},initPromise(t,e){const r=Qt.promises[t];return r||(Qt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0}={}){const i=[t&&pt.initPromise("connectorImages",pt.fetchConnectorImages),e&&pt.initPromise("featuredWallets",pt.fetchFeaturedWallets),r&&pt.initPromise("recommendedWallets",pt.fetchRecommendedWallets),n&&pt.initPromise("networkImages",pt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){var t;(t=ge.state.features)!=null&&t.analytics&&pt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Li.get({path:"/getAnalyticsConfig",params:pt._getSdkProperties()});ge.setFeatures({analytics:t})}catch{ge.setFeatures({analytics:!1})}},setFilterByNamespace(t){if(!t){Qt.featured=Qt.allFeatured,Qt.recommended=Qt.allRecommended;return}const e=Y.getRequestedCaipNetworkIds().join(",");Qt.featured=Qt.allFeatured.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(i=>e.includes(i))}),Qt.recommended=Qt.allRecommended.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(i=>e.includes(i))})}},qt=nn({view:"Connect",history:["Connect"],transactionStack:[]}),Xt={state:qt,subscribeKey(t,e){return no(qt,t,e)},pushTransactionStack(t){qt.transactionStack.push(t)},popTransactionStack(t){var r,n;const e=qt.transactionStack.pop();if(e)if(t)this.goBack(),(r=e==null?void 0:e.onCancel)==null||r.call(e);else{if(e.goBack)this.goBack();else if(e.replace){const s=qt.history.indexOf("ConnectingSiwe");s>0?this.goBackToIndex(s-1):(An.close(),qt.history=[])}else e.view&&this.reset(e.view);(n=e==null?void 0:e.onSuccess)==null||n.call(e)}},push(t,e){t!==qt.view&&(qt.view=t,qt.history.push(t),qt.data=e)},reset(t,e){qt.view=t,qt.history=[t],qt.data=e},replace(t,e){qt.history.at(-1)===t||(qt.view=t,qt.history[qt.history.length-1]=t,qt.data=e)},goBack(){var e;const t=!Y.state.activeCaipAddress&&this.state.view==="ConnectingFarcaster";if(qt.history.length>1&&!qt.history.includes("UnsupportedChain")){qt.history.pop();const[r]=qt.history.slice(-1);r&&(qt.view=r)}else An.close();(e=qt.data)!=null&&e.wallet&&(qt.data.wallet=void 0),setTimeout(()=>{var r,n,i;if(t){qe.setFarcasterUrl(void 0,Y.state.activeChain);const s=ut.getAuthConnector();(r=s==null?void 0:s.provider)==null||r.reload();const o=fm(ge.state);(i=(n=s==null?void 0:s.provider)==null?void 0:n.syncDappData)==null||i.call(n,{metadata:o.metadata,sdkVersion:o.sdkVersion,projectId:o.projectId,sdkType:o.sdkType})}},100)},goBackToIndex(t){if(qt.history.length>1){qt.history=qt.history.slice(0,t+1);const[e]=qt.history.slice(-1);e&&(qt.view=e)}}},_c=nn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Qi={state:_c,subscribe(t){return ns(_c,()=>t(_c))},setThemeMode(t){_c.themeMode=t;try{const e=ut.getAuthConnector();if(e){const r=Qi.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:r,w3mThemeVariables:Gl(r,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){_c.themeVariables={..._c.themeVariables,...t};try{const e=ut.getAuthConnector();if(e){const r=Qi.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:r,w3mThemeVariables:Gl(_c.themeVariables,_c.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return fm(_c)}},_L={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},Zt=nn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{..._L}}),ut={state:Zt,subscribe(t){return ns(Zt,()=>{t(Zt)})},subscribeKey(t,e){return no(Zt,t,e)},initialize(t){t.forEach(e=>{const r=Oe.getConnectedConnectorId(e);r&&this.setConnectorId(r,e)})},setActiveConnector(t){t&&(Zt.activeConnector=Dh(t))},setConnectors(t){t.filter(r=>!Zt.allConnectors.some(n=>n.id===r.id&&this.getConnectorName(n.name)===this.getConnectorName(r.name)&&n.chain===r.chain)).forEach(r=>{r.type!=="MULTI_CHAIN"&&Zt.allConnectors.push(Dh(r))}),Zt.connectors=this.mergeMultiChainConnectors(Zt.allConnectors)},removeAdapter(t){Zt.allConnectors=Zt.allConnectors.filter(e=>e.chain!==t),Zt.connectors=this.mergeMultiChainConnectors(Zt.allConnectors)},mergeMultiChainConnectors(t){const e=this.generateConnectorMapByName(t),r=[];return e.forEach(n=>{const i=n[0],s=(i==null?void 0:i.id)===Ue.CONNECTOR_ID.AUTH;n.length>1&&i?r.push({name:i.name,imageUrl:i.imageUrl,imageId:i.imageId,connectors:[...n],type:s?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(i==null?void 0:i.id)||""}):i&&r.push(i)}),r},generateConnectorMapByName(t){const e=new Map;return t.forEach(r=>{const{name:n}=r,i=this.getConnectorName(n);if(!i)return;const s=e.get(i)||[];s.find(a=>a.chain===r.chain)||s.push(r),e.set(i,s)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(r=>{e.find(n=>n.chain===r.chain)||e.push(r)}),e},addConnector(t){var e,r,n;if(t.id===Ue.CONNECTOR_ID.AUTH){const i=t,s=fm(ge.state),o=Qi.getSnapshot().themeMode,a=Qi.getSnapshot().themeVariables;(r=(e=i==null?void 0:i.provider)==null?void 0:e.syncDappData)==null||r.call(e,{metadata:s.metadata,sdkVersion:s.sdkVersion,projectId:s.projectId,sdkType:s.sdkType}),(n=i==null?void 0:i.provider)==null||n.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Gl(a,o)}),this.setConnectors([t])}else this.setConnectors([t])},getAuthConnector(t){var n;const e=t||Y.state.activeChain,r=Zt.connectors.find(i=>i.id===Ue.CONNECTOR_ID.AUTH);if(r)return(n=r==null?void 0:r.connectors)!=null&&n.length?r.connectors.find(s=>s.chain===e):r},getAnnouncedConnectorRdns(){return Zt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return Zt.allConnectors.find(e=>e.id===t)},getConnector(t,e){return Zt.allConnectors.filter(n=>n.chain===Y.state.activeChain).find(n=>{var i;return n.explorerId===t||((i=n.info)==null?void 0:i.rdns)===e})},syncIfAuthConnector(t){var s,o;if(t.id!=="ID_AUTH")return;const e=t,r=fm(ge.state),n=Qi.getSnapshot().themeMode,i=Qi.getSnapshot().themeVariables;(o=(s=e==null?void 0:e.provider)==null?void 0:s.syncDappData)==null||o.call(s,{metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),e.provider.syncTheme({themeMode:n,themeVariables:i,w3mThemeVariables:Gl(i,n)})},getConnectorsByNamespace(t){const e=Zt.allConnectors.filter(r=>r.chain===t);return this.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=ut.getConnector(t.id,t.rdns);Y.state.activeChain===Ue.CHAIN.SOLANA&&rbe.handleSolanaDeeplinkRedirect((e==null?void 0:e.name)||t.name||""),e?Xt.push("ConnectingExternal",{connector:e}):Xt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?this.getConnectorsByNamespace(t):this.mergeMultiChainConnectors(Zt.allConnectors)},setFilterByNamespace(t){Zt.filterByNamespace=t,Zt.connectors=this.getConnectors(t),pt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Zt.activeConnectorIds={...Zt.activeConnectorIds,[e]:t},Oe.setConnectedConnectorId(e,t))},removeConnectorId(t){Zt.activeConnectorIds={...Zt.activeConnectorIds,[t]:void 0},Oe.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Zt.activeConnectorIds[t]},isConnected(t){return t?!!Zt.activeConnectorIds[t]:Object.values(Zt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Zt.activeConnectorIds={..._L}}};function Nw(t,e){return ut.getConnectorId(t)===e}function hbe(t){const e=Array.from(Y.state.chains.keys());let r=[];return t?(r.push([t,Y.state.chains.get(t)]),Nw(t,Ue.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(n=>{n!==t&&Nw(n,Ue.CONNECTOR_ID.WALLET_CONNECT)&&r.push([n,Y.state.chains.get(n)])}):Nw(t,Ue.CONNECTOR_ID.AUTH)&&e.forEach(n=>{n!==t&&Nw(n,Ue.CONNECTOR_ID.AUTH)&&r.push([n,Y.state.chains.get(n)])})):r=Array.from(Y.state.chains.entries()),r}var dbe=Object.defineProperty,fbe=(t,e,r)=>e in t?dbe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mM=(t,e,r)=>fbe(t,typeof e!="symbol"?e+"":e,r);let pbe=class extends to{constructor(e){super(),this.opts=e,mM(this,"protocol","wc"),mM(this,"version",2)}};var gbe=Object.defineProperty,mbe=(t,e,r)=>e in t?gbe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ybe=(t,e,r)=>mbe(t,e+"",r);let wbe=class extends to{constructor(e,r){super(),this.core=e,this.logger=r,ybe(this,"records",new Map)}},bbe=class{constructor(e,r){this.logger=e,this.core=r}},vbe=class extends to{constructor(e,r){super(),this.relayer=e,this.logger=r}},Ebe=class extends to{constructor(e){super()}},_be=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},Sbe=class extends to{constructor(e,r){super(),this.relayer=e,this.logger=r}},xbe=class extends to{constructor(e,r){super(),this.core=e,this.logger=r}},Ibe=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},Abe=class{constructor(e,r){this.projectId=e,this.logger=r}},Cbe=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};var Nbe=Object.defineProperty,Mbe=(t,e,r)=>e in t?Nbe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yM=(t,e,r)=>Mbe(t,typeof e!="symbol"?e+"":e,r);let Tbe=class{constructor(e){this.opts=e,yM(this,"protocol","wc"),yM(this,"version",2)}},$be=class{constructor(e){this.client=e}};const Ol={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Wu=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Cn=nn({...Wu}),gi={state:Cn,subscribeKey(t,e){return no(Cn,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=dt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Cn.message=Wu.message,Cn.variant=Wu.variant,Cn.svg=Wu.svg,Cn.open=Wu.open,Cn.autoClose=Wu.autoClose},_showMessage({message:t,svg:e,variant:r="success",autoClose:n=Wu.autoClose}){Cn.open?(Cn.open=!1,setTimeout(()=>{Cn.message=t,Cn.variant=r,Cn.svg=e,Cn.open=!0,Cn.autoClose=n},150)):(Cn.message=t,Cn.variant=r,Cn.svg=e,Cn.open=!0,Cn.autoClose=n)}},Cg={getSIWX(){return ge.state.siwx},async initializeIfEnabled(){var s;const t=ge.state.siwx,e=Y.getActiveCaipAddress();if(!(t&&e))return;const[r,n,i]=e.split(":");if(Y.checkIfSupportedNetwork(r))try{if((await t.getSessions(`${r}:${n}`,i)).length)return;await An.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),xr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((s=_r._getClient())==null?void 0:s.disconnect().catch(console.error)),Xt.reset("Connect"),gi.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ge.state.siwx,e=dt.getPlainAddress(Y.getActiveCaipAddress()),r=Y.getActiveCaipNetwork(),n=_r._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");if(!n)throw new Error("No ConnectionController client found");try{const i=await t.createMessage({chainId:r.caipNetworkId,accountAddress:e}),s=i.toString();ut.getConnectorId(r.chainNamespace)===Ue.CONNECTOR_ID.AUTH&&Xt.pushTransactionStack({view:null,goBack:!1,replace:!0});const a=await n.signMessage(s);await t.addSession({data:i,message:s,signature:a}),An.close(),xr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(i){const s=this.getSIWXEventProperties();(!An.state.open||Xt.state.view==="ApproveTransaction")&&await An.open({view:"SIWXSignMessage"}),s.isSmartAccount?gi.showError("This application might not support Smart Accounts"):gi.showError("Signature declined"),xr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:s}),console.error("SWIXUtil:requestSignMessage",i)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await _r.disconnect():An.close(),Xt.reset("Connect"),xr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=ge.state.siwx,e=dt.getPlainAddress(Y.getActiveCaipAddress()),r=Y.getActiveCaipNetwork();return t&&e&&r?t.getSessions(r.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const r=Xt.state.view==="ApproveTransaction",n=Xt.state.view==="SIWXSignMessage";if(r||n)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:r}){var a,c,l;const n=Cg.getSIWX(),i=new Set(e.map(u=>u.split(":")[0]));if(!n||i.size!==1||!i.has("eip155"))return!1;const s=await n.createMessage({chainId:((a=Y.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:s.nonce,domain:s.domain,uri:s.uri,exp:s.expirationTime,iat:s.issuedAt,nbf:s.notBefore,requestId:s.requestId,version:s.version,resources:s.resources,statement:s.statement,chainId:s.chainId,methods:r,chains:[s.chainId,...e.filter(u=>u!==s.chainId)]});if(gi.showLoading("Authenticating...",{autoClose:!1}),qe.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(i)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(h=>{const d=t.client.formatAuthMessage({request:h.p,iss:h.p.iss});return{data:{...h.p,accountAddress:h.p.iss.split(":").slice(-1).join(""),chainId:h.p.iss.split(":").slice(2,4).join(":"),uri:h.p.aud,version:h.p.version||s.version,expirationTime:h.p.exp,issuedAt:h.p.iat,notBefore:h.p.nbf},message:d,signature:h.s.s,cacao:h}});try{await n.setSessions(u),xr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Cg.getSIWXEventProperties()})}catch(h){throw console.error("SIWX:universalProviderAuth - failed to set sessions",h),xr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Cg.getSIWXEventProperties()}),await t.disconnect().catch(console.error),h}finally{gi.hide()}}return!0},getSIWXEventProperties(){var t;return{network:((t=Y.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)||"",isSmartAccount:qe.state.preferredAccountType===Ol.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},yr=nn({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Pbe={state:yr,subscribe(t){return ns(yr,()=>t(yr))},setLastNetworkInView(t){yr.lastNetworkInView=t},async fetchTransactions(t,e){var r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");yr.loading=!0;try{const n=await Ge.fetchTransactions({account:t,cursor:yr.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId}),i=this.filterSpamTransactions(n.data),s=this.filterByConnectedChain(i),o=[...yr.transactions,...s];yr.loading=!1,e==="coinbase"?yr.coinbaseTransactions=this.groupTransactionsByYearAndMonth(yr.coinbaseTransactions,n.data):(yr.transactions=o,yr.transactionsByYear=this.groupTransactionsByYearAndMonth(yr.transactionsByYear,s)),yr.empty=o.length===0,yr.next=n.next?n.next:void 0}catch{xr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ge.state.projectId,cursor:yr.next,isSmartAccount:qe.state.preferredAccountType===Ol.ACCOUNT_TYPES.SMART_ACCOUNT}}),gi.showError("Failed to fetch transactions"),yr.loading=!1,yr.empty=!0,yr.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const r=t;return e.forEach(n=>{const i=new Date(n.metadata.minedAt).getFullYear(),s=new Date(n.metadata.minedAt).getMonth(),o=r[i]??{},c=(o[s]??[]).filter(l=>l.id!==n.id);r[i]={...o,[s]:[...c,n].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),r},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(n=>{var i;return((i=n.nft_info)==null?void 0:i.flags.is_spam)===!0}))},filterByConnectedChain(t){var n;const e=(n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId;return t.filter(i=>i.metadata.chain===e)},clearCursor(){yr.next=void 0},resetTransactions(){yr.transactions=[],yr.transactionsByYear={},yr.lastNetworkInView=void 0,yr.loading=!1,yr.empty=!1,yr.next=void 0}},wr=nn({wcError:!1,buffering:!1,status:"disconnected"});let Ld;const _r={state:wr,subscribeKey(t,e){return no(wr,t,e)},_getClient(){return wr._client},setClient(t){wr._client=Dh(t)},async connectWalletConnect(){var t,e,r,n;if(dt.isTelegram()||dt.isSafari()&&dt.isIos()){if(Ld){await Ld,Ld=void 0;return}if(!dt.isPairingExpired(wr==null?void 0:wr.wcPairingExpiry)){const i=wr.wcUri;wr.wcUri=i;return}Ld=(e=(t=this._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),this.state.status="connecting",await Ld,Ld=void 0,wr.wcPairingExpiry=void 0,this.state.status="connected"}else await((n=(r=this._getClient())==null?void 0:r.connectWalletConnect)==null?void 0:n.call(r))},async connectExternal(t,e,r=!0){var n,i;await((i=(n=this._getClient())==null?void 0:n.connectExternal)==null?void 0:i.call(n,t)),r&&Y.setActiveNamespace(e)},async reconnectExternal(t){var r,n;await((n=(r=this._getClient())==null?void 0:r.reconnectExternal)==null?void 0:n.call(r,t));const e=t.chain||Y.state.activeChain;e&&ut.setConnectorId(t.id,e)},async setPreferredAccountType(t){var r;An.setLoading(!0,Y.state.activeChain);const e=ut.getAuthConnector();e&&(await(e==null?void 0:e.provider.setPreferredAccount(t)),await this.reconnectExternal(e),An.setLoading(!1,Y.state.activeChain),xr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=this._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var r;return(r=this._getClient())==null?void 0:r.parseUnits(t,e)},formatUnits(t,e){var r;return(r=this._getClient())==null?void 0:r.formatUnits(t,e)},async sendTransaction(t){var e;return(e=this._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=this._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=this._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=this._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=this._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=this._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=this._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=this._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,r;return((r=(e=this._getClient())==null?void 0:e.checkInstalled)==null?void 0:r.call(e,t))||!1},resetWcConnection(){wr.wcUri=void 0,wr.wcPairingExpiry=void 0,wr.wcLinking=void 0,wr.recentWallet=void 0,wr.status="disconnected",Pbe.resetTransactions(),Oe.deleteWalletConnectDeepLink()},resetUri(){wr.wcUri=void 0,wr.wcPairingExpiry=void 0},finalizeWcConnection(){var r,n;const{wcLinking:t,recentWallet:e}=_r.state;t&&Oe.setWalletConnectDeepLink(t),e&&Oe.setAppKitRecent(e),xr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((n=(r=Xt.state.data)==null?void 0:r.wallet)==null?void 0:n.name)||"Unknown"}})},setWcBasic(t){wr.wcBasic=t},setUri(t){wr.wcUri=t,wr.wcPairingExpiry=dt.getPairingExpiry()},setWcLinking(t){wr.wcLinking=t},setWcError(t){wr.wcError=t,wr.buffering=!1},setRecentWallet(t){wr.recentWallet=t},setBuffering(t){wr.buffering=t},setStatus(t){wr.status=t},async disconnect(t){try{An.setLoading(!0,t),await Cg.clearSessions(),await Y.disconnect(t),An.setLoading(!1,t),ut.setFilterByNamespace(void 0)}catch{throw new Error("Failed to disconnect")}}},O0=nn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Wc={state:O0,subscribe(t){return ns(O0,()=>t(O0))},set(t){Object.assign(O0,{...O0,...t})}};function Obe(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function wM(t){return Obe(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const SL="2.44.4";let k0={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${SL}`},Za=class M4 extends Error{constructor(e,r={}){var a;const n=(()=>{var c;return r.cause instanceof M4?r.cause.details:(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),i=r.cause instanceof M4&&r.cause.docsPath||r.docsPath,s=(a=k0.getDocsUrl)==null?void 0:a.call(k0,{...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...k0.version?[`Version: ${k0.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=SL}walk(e){return xL(this,e)}};function xL(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?xL(t.cause,e):e?null:t}let IL=class extends Za{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}};function S5(t,{dir:e,size:r=32}={}){return typeof t=="string"?kbe(t,{dir:e,size:r}):Rbe(t,{dir:e,size:r})}function kbe(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new IL({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function Rbe(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new IL({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}let Dbe=class extends Za{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}},Lbe=class extends Za{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function AL(t,{size:e}){if(wM(t)>e)throw new Lbe({givenSize:wM(t),maxSize:e})}const Bbe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bM(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ube(t,e):typeof t=="string"?NL(t,e):typeof t=="boolean"?jbe(t,e):CL(t,e)}function jbe(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(AL(r,{size:e.size}),S5(r,{size:e.size})):r}function CL(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=Bbe[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(AL(n,{size:e.size}),S5(n,{dir:"right",size:e.size})):n}function Ube(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new Dbe({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?S5(a,{size:n}):a}const Fbe=new TextEncoder;function NL(t,e={}){const r=Fbe.encode(t);return CL(r,e)}let zbe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const Eh=(t,e,r)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,r);function qbe(t,e){let r=t.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(e,"0");let[i,s]=[r.slice(0,r.length-e),r.slice(r.length-e)];return s=s.replace(/(0+)$/,""),`${n?"-":""}${i||"0"}${s?`.${s}`:""}`}const x5=t=>t;class Ng extends Za{constructor({body:e,cause:r,details:n,headers:i,status:s,url:o}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[s&&`Status: ${s}`,`URL: ${x5(o)}`,e&&`Request body: ${Eh(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=s,this.url=o}}class ML extends Za{constructor({body:e,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${x5(n)}`,`Request body: ${Eh(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data,this.url=n}}class vM extends Za{constructor({body:e,url:r}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${x5(r)}`,`Request body: ${Eh(e)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=r}}const Wbe=-1;class Cs extends Za{constructor(e,{code:r,docsPath:n,metaMessages:i,name:s,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:i||(e==null?void 0:e.metaMessages),name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof ML?e.code:r??Wbe}}class io extends Cs{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class pm extends Cs{constructor(e){super(e,{code:pm.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(pm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class gm extends Cs{constructor(e){super(e,{code:gm.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(gm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class mm extends Cs{constructor(e,{method:r}={}){super(e,{code:mm.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(mm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class ym extends Cs{constructor(e){super(e,{code:ym.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(ym,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Sp extends Cs{constructor(e){super(e,{code:Sp.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Sp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class wm extends Cs{constructor(e){super(e,{code:wm.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(wm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class bm extends Cs{constructor(e){super(e,{code:bm.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(bm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class vm extends Cs{constructor(e){super(e,{code:vm.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(vm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class xp extends Cs{constructor(e){super(e,{code:xp.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(xp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class hh extends Cs{constructor(e,{method:r}={}){super(e,{code:hh.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not supported.`})}}Object.defineProperty(hh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Ip extends Cs{constructor(e){super(e,{code:Ip.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Ip,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Em extends Cs{constructor(e){super(e,{code:Em.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Em,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class _h extends io{constructor(e){super(e,{code:_h.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(_h,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class _m extends io{constructor(e){super(e,{code:_m.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(_m,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Sm extends io{constructor(e,{method:r}={}){super(e,{code:Sm.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty(Sm,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class xm extends io{constructor(e){super(e,{code:xm.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(xm,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Im extends io{constructor(e){super(e,{code:Im.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Im,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Am extends io{constructor(e){super(e,{code:Am.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Am,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Cm extends io{constructor(e){super(e,{code:Cm.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Cm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Nm extends io{constructor(e){super(e,{code:Nm.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Nm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Mm extends io{constructor(e){super(e,{code:Mm.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Mm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Tm extends io{constructor(e){super(e,{code:Tm.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Tm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class $m extends io{constructor(e){super(e,{code:$m.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty($m,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Pm extends io{constructor(e){super(e,{code:Pm.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Pm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Om extends io{constructor(e){super(e,{code:Om.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Om,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Hbe extends Cs{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class I5 extends Za{constructor({cause:e,message:r}={}){var i;const n=(i=r==null?void 0:r.replace("execution reverted: ",""))==null?void 0:i.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(I5,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(I5,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted|gas required exceeds allowance/});function Kbe(){let t=()=>{},e=()=>{};return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}const I3=new Map;function Vbe({fn:t,id:e,shouldSplitBatch:r,wait:n=0,sort:i}){const s=async()=>{const u=c();o();const h=u.map(({args:d})=>d);h.length!==0&&t(h).then(d=>{i&&Array.isArray(d)&&d.sort(i);for(let g=0;g<u.length;g++){const{resolve:m}=u[g];m==null||m([d[g],d])}}).catch(d=>{for(let g=0;g<u.length;g++){const{reject:m}=u[g];m==null||m(d)}})},o=()=>I3.delete(e),a=()=>c().map(({args:u})=>u),c=()=>I3.get(e)||[],l=u=>I3.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:h,resolve:d,reject:g}=Kbe();return(r==null?void 0:r([...a(),u]))&&s(),c().length>0?(l({args:u,resolve:d,reject:g}),h):(l({args:u,resolve:d,reject:g}),setTimeout(s,n),h)}}}async function TL(t){return new Promise(e=>setTimeout(e,t))}function Gbe(t,{delay:e=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((i,s)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await TL(u),o({count:a+1})};try{const l=await t();i(l)}catch(l){if(a<r&&await n({count:a,error:l}))return c({error:l});s(l)}};o()})}const T4=256;let Mw=T4,Tw;function Ybe(t=11){if(!Tw||Mw+t>T4*2){Tw="",Mw=0;for(let e=0;e<T4;e++)Tw+=(256+Math.random()*256|0).toString(16).substring(1)}return Tw.substring(Mw,Mw+++t)}const $w=new zbe(8192);function Qbe(t,{enabled:e=!0,id:r}){if(!e||!r)return t();if($w.get(r))return $w.get(r);const n=t().finally(()=>$w.delete(r));return $w.set(r,n),n}function Zbe(t,e={}){return async(r,n={})=>{var h;const{dedupe:i=!1,methods:s,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...n},{method:l}=r;if((h=s==null?void 0:s.exclude)!=null&&h.includes(l))throw new hh(new Error("method not supported"),{method:l});if(s!=null&&s.include&&!s.include.includes(l))throw new hh(new Error("method not supported"),{method:l});const u=i?NL(`${c}.${Eh(r)}`):void 0;return Qbe(()=>Gbe(async()=>{try{return await t(r)}catch(d){const g=d;switch(g.code){case pm.code:throw new pm(g);case gm.code:throw new gm(g);case mm.code:throw new mm(g,{method:r.method});case ym.code:throw new ym(g);case Sp.code:throw new Sp(g);case wm.code:throw new wm(g);case bm.code:throw new bm(g);case vm.code:throw new vm(g);case xp.code:throw new xp(g);case hh.code:throw new hh(g,{method:r.method});case Ip.code:throw new Ip(g);case Em.code:throw new Em(g);case _h.code:throw new _h(g);case _m.code:throw new _m(g);case Sm.code:throw new Sm(g);case xm.code:throw new xm(g);case Im.code:throw new Im(g);case Am.code:throw new Am(g);case Cm.code:throw new Cm(g);case Nm.code:throw new Nm(g);case Mm.code:throw new Mm(g);case Tm.code:throw new Tm(g);case $m.code:throw new $m(g);case Pm.code:throw new Pm(g);case Om.code:throw new Om(g);case 5e3:throw new _h(g);default:throw d instanceof Za?d:new Hbe(g)}}},{delay:({count:d,error:g})=>{var m;if(g&&g instanceof Ng){const v=(m=g==null?void 0:g.headers)==null?void 0:m.get("Retry-After");if(v!=null&&v.match(/\d/))return Number.parseInt(v,10)*1e3}return~~(1<<d)*o},retryCount:a,shouldRetry:({error:d})=>Jbe(d)}),{enabled:i,id:u})}}function Jbe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Ip.code||t.code===Sp.code:t instanceof Ng&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Xbe(t,{errorInstance:e=new Error("timed out"),timeout:r,signal:n}){return new Promise((i,s)=>{(async()=>{let o;try{const a=new AbortController;r>0&&(o=setTimeout(()=>{n&&a.abort()},r)),i(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&s(e),s(a)}finally{clearTimeout(o)}})()})}function eve(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const EM=eve();function tve(t,e={}){const{url:r,headers:n}=rve(t);return{async request(i){var m;const{body:s,fetchFn:o=e.fetchFn??fetch,onRequest:a=e.onRequest,onResponse:c=e.onResponse,timeout:l=e.timeout??1e4}=i,u={...e.fetchOptions??{},...i.fetchOptions??{}},{headers:h,method:d,signal:g}=u;try{const v=await Xbe(async({signal:_})=>{const S={...u,body:Array.isArray(s)?Eh(s.map(R=>({jsonrpc:"2.0",id:R.id??EM.take(),...R}))):Eh({jsonrpc:"2.0",id:s.id??EM.take(),...s}),headers:{...n,"Content-Type":"application/json",...h},method:d||"POST",signal:g||(l>0?_:null)},A=new Request(r,S),T=await(a==null?void 0:a(A,S))??{...S,url:r};return await o(T.url??r,T)},{errorInstance:new vM({body:s,url:r}),timeout:l,signal:!0});c&&await c(v);let $;if((m=v.headers.get("Content-Type"))!=null&&m.startsWith("application/json"))$=await v.json();else{$=await v.text();try{$=JSON.parse($||"{}")}catch(_){if(v.ok)throw _;$={error:$}}}if(!v.ok)throw new Ng({body:s,details:Eh($.error)||v.statusText,headers:v.headers,status:v.status,url:r});return $}catch(v){throw v instanceof Ng||v instanceof vM?v:new Ng({body:s,cause:v,url:r})}}}}function rve(t){try{const e=new URL(t),r=(()=>{if(e.username){const n=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`;return e.username="",e.password="",{url:e.toString(),headers:{Authorization:`Basic ${btoa(n)}`}}}})();return{url:e.toString(),...r}}catch{return{url:t}}}function $L({key:t,methods:e,name:r,request:n,retryCount:i=3,retryDelay:s=150,timeout:o,type:a},c){const l=Ybe();return{config:{key:t,methods:e,name:r,request:n,retryCount:i,retryDelay:s,timeout:o,type:a},request:Zbe(n,{methods:e,retryCount:i,retryDelay:s,uid:l}),value:c}}function _M(t,e={}){const{key:r="fallback",name:n="Fallback",rank:i=!1,shouldThrow:s=nve,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...h})=>{let d=t,g=()=>{};const m=$L({key:r,name:n,async request({method:v,params:$}){let _;const S=async(A=0)=>{const T=d[A]({...h,chain:c,retryCount:0,timeout:u});try{const k=await T.request({method:v,params:$});return g({method:v,params:$,response:k,transport:T,status:"success"}),k}catch(k){if(g({error:k,method:v,params:$,transport:T,status:"error"}),s(k)||A===d.length-1||(_??(_=d.slice(A+1).some(R=>{const{include:L,exclude:F}=R({chain:c}).config.methods||{};return L?L.includes(v):F?!F.includes(v):!0})),!_))throw k;return S(A+1)}};return S()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:v=>g=v,transports:d.map(v=>v({chain:c,retryCount:0}))});if(i){const v=typeof i=="object"?i:{};ive({chain:c,interval:v.interval??l,onTransports:$=>d=$,ping:v.ping,sampleCount:v.sampleCount,timeout:v.timeout,transports:d,weights:v.weights})}return m}}function nve(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===xp.code||t.code===_h.code||I5.nodeMessage.test(t.message)||t.code===5e3))}function ive({chain:t,interval:e=4e3,onTransports:r,ping:n,sampleCount:i=10,timeout:s=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],h=async()=>{const d=await Promise.all(o.map(async v=>{const $=v({chain:t,retryCount:0,timeout:s}),_=Date.now();let S,A;try{await(n?n({transport:$}):$.request({method:"net_listening"})),A=1}catch{A=0}finally{S=Date.now()}return{latency:S-_,success:A}}));u.push(d),u.length>i&&u.shift();const g=Math.max(...u.map(v=>Math.max(...v.map(({latency:$})=>$)))),m=o.map((v,$)=>{const _=u.map(R=>R[$].latency),A=1-_.reduce((R,L)=>R+L,0)/_.length/g,T=u.map(R=>R[$].success),k=T.reduce((R,L)=>R+L,0)/T.length;return k===0?[0,$]:[l*A+c*k,$]}).sort((v,$)=>$[0]-v[0]);r(m.map(([,v])=>o[v])),await TL(e),h()};h()}class sve extends Za{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function A3(t,e={}){const{batch:r,fetchFn:n,fetchOptions:i,key:s="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:l,retryDelay:u,raw:h}=e;return({chain:d,retryCount:g,timeout:m})=>{const{batchSize:v=1e3,wait:$=0}=typeof r=="object"?r:{},_=e.retryCount??g,S=m??e.timeout??1e4,A=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!A)throw new sve;const T=tve(A,{fetchFn:n,fetchOptions:i,onRequest:c,onResponse:l,timeout:S});return $L({key:s,methods:o,name:a,async request({method:k,params:R}){const L={method:k,params:R},{schedule:F}=Vbe({id:A,wait:$,shouldSplitBatch(E){return E.length>v},fn:E=>T.request({body:E}),sort:(E,b)=>E.id-b.id}),B=async E=>r?F(E):[await T.request({body:E})],[{error:q,result:D}]=await B(L);if(h)return{error:q,result:D};if(q)throw new ML({body:L,error:q,url:A});return D},retryCount:_,retryDelay:u,timeout:S,type:"http"},{fetchOptions:i,url:A})}}const C3={createBalance(t,e){const r={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return qbe(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const r=e[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(r=>this.isValidAsset(r)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},SM={async getMyTokensWithBalance(t){const e=qe.state.address,r=Y.state.activeCaipNetwork;if(!e||!r)return[];if(r.chainNamespace==="eip155"){const i=await this.getEIP155Balances(e,r);if(i)return this.filterLowQualityTokens(i)}const n=await Ge.getBalance(e,r.caipNetworkId,t);return this.filterLowQualityTokens(n.balances)},async getEIP155Balances(t,e){var r,n;try{const i=C3.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),s=await _r.getCapabilities(t);if(!((n=(r=s==null?void 0:s[i])==null?void 0:r.assetDiscovery)!=null&&n.supported))return null;const o=await _r.walletGetAssets({account:t,chainFilter:[i]});return C3.isWalletGetAssetsResponse(o)?(o[i]||[]).map(c=>C3.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Y.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},It=nn({tokenBalances:[],loading:!1}),xM={state:It,subscribe(t){return ns(It,()=>t(It))},subscribeKey(t,e){return no(It,t,e)},setToken(t){t&&(It.token=Dh(t))},setTokenAmount(t){It.sendTokenAmount=t},setReceiverAddress(t){It.receiverAddress=t},setReceiverProfileImageUrl(t){It.receiverProfileImageUrl=t},setReceiverProfileName(t){It.receiverProfileName=t},setGasPrice(t){It.gasPrice=t},setGasPriceInUsd(t){It.gasPriceInUSD=t},setNetworkBalanceInUsd(t){It.networkBalanceInUSD=t},setLoading(t){It.loading=t},sendToken(){var t;switch((t=Y.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":this.sendEvmToken();return;case"solana":this.sendSolanaToken();return;default:throw new Error("Unsupported chain")}},sendEvmToken(){var t,e,r,n,i;(t=this.state.token)!=null&&t.address&&this.state.sendTokenAmount&&this.state.receiverAddress?(xr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:qe.state.preferredAccountType===Ol.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token.address,amount:this.state.sendTokenAmount,network:((e=Y.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||""}}),this.sendERC20Token({receiverAddress:this.state.receiverAddress,tokenAddress:this.state.token.address,sendTokenAmount:this.state.sendTokenAmount,decimals:this.state.token.quantity.decimals})):this.state.receiverAddress&&this.state.sendTokenAmount&&this.state.gasPrice&&((r=this.state.token)!=null&&r.quantity.decimals)&&(xr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:qe.state.preferredAccountType===Ol.ACCOUNT_TYPES.SMART_ACCOUNT,token:(n=this.state.token)==null?void 0:n.symbol,amount:this.state.sendTokenAmount,network:((i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),this.sendNativeToken({receiverAddress:this.state.receiverAddress,sendTokenAmount:this.state.sendTokenAmount,gasPrice:this.state.gasPrice,decimals:this.state.token.quantity.decimals}))},async fetchTokenBalance(t){var s,o;It.loading=!0;const e=(s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId,r=(o=Y.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=Y.state.activeCaipAddress,i=n?dt.getPlainAddress(n):void 0;if(It.lastRetry&&!dt.isAllowedRetry(It.lastRetry,30*Es.ONE_SEC_MS))return It.loading=!1,[];try{if(i&&e&&r){const a=await SM.getMyTokensWithBalance();return It.tokenBalances=a,It.lastRetry=void 0,a}}catch(a){It.lastRetry=Date.now(),t==null||t(a),gi.showError("Token Balance Unavailable")}finally{It.loading=!1}return[]},fetchNetworkBalance(){if(It.tokenBalances.length===0)return;const t=SM.mapBalancesToSwapTokens(It.tokenBalances);if(!t)return;const e=t.find(r=>r.address===Y.getActiveNetworkTokenAddress());e&&(It.networkBalanceInUSD=e?Cw.multiply(e.quantity.numeric,e.price).toString():"0")},isInsufficientNetworkTokenForGas(t,e){const r=e||"0";return Cw.bigNumber(t).eq(0)?!0:Cw.bigNumber(Cw.bigNumber(r)).gt(t)},hasInsufficientGasFunds(){let t=!0;return qe.state.preferredAccountType===Ol.ACCOUNT_TYPES.SMART_ACCOUNT?t=!1:It.networkBalanceInUSD&&(t=this.isInsufficientNetworkTokenForGas(It.networkBalanceInUSD,It.gasPriceInUSD)),t},async sendNativeToken(t){var s,o,a,c;Xt.pushTransactionStack({view:"Account",goBack:!1});const e=t.receiverAddress,r=qe.state.address,n=_r.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),i="0x";try{await _r.sendTransaction({chainNamespace:"eip155",to:e,address:r,data:i,value:n??BigInt(0),gasPrice:t.gasPrice}),gi.showSuccess("Transaction started"),xr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:qe.state.preferredAccountType===Ol.ACCOUNT_TYPES.SMART_ACCOUNT,token:((s=this.state.token)==null?void 0:s.symbol)||"",amount:t.sendTokenAmount,network:((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),this.resetSend()}catch(l){console.error("SendController:sendERC20Token - failed to send native token",l);const u=l instanceof Error?l.message:"Unknown error";xr.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:u,isSmartAccount:qe.state.preferredAccountType===Ol.ACCOUNT_TYPES.SMART_ACCOUNT,token:((a=this.state.token)==null?void 0:a.symbol)||"",amount:t.sendTokenAmount,network:((c=Y.state.activeCaipNetwork)==null?void 0:c.caipNetworkId)||""}}),gi.showError("Something went wrong")}},async sendERC20Token(t){var r,n;Xt.pushTransactionStack({view:"Account",goBack:!1});const e=_r.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));try{if(qe.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const i=dt.getPlainAddress(t.tokenAddress);await _r.writeContract({fromAddress:qe.state.address,tokenAddress:i,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:Y1e.getERC20Abi(i),chainNamespace:"eip155"}),gi.showSuccess("Transaction started"),this.resetSend()}}catch(i){console.error("SendController:sendERC20Token - failed to send erc20 token",i);const s=i instanceof Error?i.message:"Unknown error";xr.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:s,isSmartAccount:qe.state.preferredAccountType===Ol.ACCOUNT_TYPES.SMART_ACCOUNT,token:((r=this.state.token)==null?void 0:r.symbol)||"",amount:t.sendTokenAmount,network:((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)||""}}),gi.showError("Something went wrong")}},sendSolanaToken(){if(!this.state.sendTokenAmount||!this.state.receiverAddress){gi.showError("Please enter a valid amount and receiver address");return}Xt.pushTransactionStack({view:"Account",goBack:!1}),_r.sendTransaction({chainNamespace:"solana",to:this.state.receiverAddress,value:this.state.sendTokenAmount}).then(()=>{this.resetSend(),qe.fetchTokenBalance()}).catch(t=>{gi.showError("Failed to send transaction. Please try again."),console.error("SendController:sendToken - failed to send solana transaction",t)})},resetSend(){It.token=void 0,It.sendTokenAmount=void 0,It.receiverAddress=void 0,It.receiverProfileImageUrl=void 0,It.receiverProfileName=void 0,It.loading=!1,It.tokenBalances=[]}},N3={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},Pw={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},_e=nn({chains:tbe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),Y={state:_e,subscribe(t){return ns(_e,()=>{t(_e)})},subscribeKey(t,e){return no(_e,t,e)},subscribeChainProp(t,e,r){let n;return ns(_e.chains,()=>{var s;const i=r||_e.activeChain;if(i){const o=(s=_e.chains.get(i))==null?void 0:s[t];n!==o&&(n=o,e(o))}})},initialize(t,e,r){const{chainId:n,namespace:i}=Oe.getActiveNetworkProps(),s=e==null?void 0:e.find(l=>l.id.toString()===(n==null?void 0:n.toString())),a=t.find(l=>(l==null?void 0:l.namespace)===i)||(t==null?void 0:t[0]),c=new Set([...(e==null?void 0:e.map(l=>l.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(_e.noAdapters=!0),_e.noAdapters||(_e.activeChain=a==null?void 0:a.namespace,_e.activeCaipNetwork=s,this.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:s}),_e.activeChain&&Wc.set({activeChain:a==null?void 0:a.namespace})),c.forEach(l=>{const u=e==null?void 0:e.filter(h=>h.chainNamespace===l);Y.state.chains.set(l,{namespace:l,networkState:nn({...Pw,caipNetwork:u==null?void 0:u[0]}),accountState:nn(N3),caipNetworks:u??[],...r}),this.setRequestedCaipNetworks(u??[],l)})},removeAdapter(t){var e,r;if(_e.activeChain===t){const n=Array.from(_e.chains.entries()).find(([i])=>i!==t);if(n){const i=(r=(e=n[1])==null?void 0:e.caipNetworks)==null?void 0:r[0];i&&this.setActiveCaipNetwork(i)}}_e.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:r},n){_e.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Pw,caipNetwork:n[0]},accountState:N3,caipNetworks:n,connectionControllerClient:r,networkControllerClient:e}),this.setRequestedCaipNetworks((n==null?void 0:n.filter(i=>i.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var r;const e=_e.chains.get(t.chainNamespace);if(e){const n=[...e.caipNetworks||[]];(r=e.caipNetworks)!=null&&r.find(i=>i.id===t.id)||n.push(t),_e.chains.set(t.chainNamespace,{...e,caipNetworks:n}),this.setRequestedCaipNetworks(n,t.chainNamespace)}},removeNetwork(t,e){var n,i,s;const r=_e.chains.get(t);if(r){const o=((n=_e.activeCaipNetwork)==null?void 0:n.id)===e,a=[...((i=r.caipNetworks)==null?void 0:i.filter(c=>c.id!==e))||[]];o&&((s=r==null?void 0:r.caipNetworks)!=null&&s[0])&&this.setActiveCaipNetwork(r.caipNetworks[0]),_e.chains.set(t,{...r,caipNetworks:a}),this.setRequestedCaipNetworks(a||[],t)}},setAdapterNetworkState(t,e){const r=_e.chains.get(t);r&&(r.networkState={...r.networkState||Pw,...e},_e.chains.set(t,r))},setChainAccountData(t,e,r=!0){if(!t)throw new Error("Chain is required to update chain account data");const n=_e.chains.get(t);if(n){const i={...n.accountState||N3,...e};_e.chains.set(t,{...n,accountState:i}),(_e.chains.size===1||_e.activeChain===t)&&(e.caipAddress&&(_e.activeCaipAddress=e.caipAddress),qe.replaceState(i))}},setChainNetworkData(t,e){if(!t)return;const r=_e.chains.get(t);if(r){const n={...r.networkState||Pw,...e};_e.chains.set(t,{...r,networkState:n})}},setAccountProp(t,e,r,n=!0){this.setChainAccountData(r,{[t]:e},n),t==="status"&&e==="disconnected"&&r&&ut.removeConnectorId(r)},setActiveNamespace(t){var n,i;_e.activeChain=t;const e=t?_e.chains.get(t):void 0,r=(n=e==null?void 0:e.networkState)==null?void 0:n.caipNetwork;r!=null&&r.id&&t&&(_e.activeCaipAddress=(i=e==null?void 0:e.accountState)==null?void 0:i.caipAddress,_e.activeCaipNetwork=r,this.setChainNetworkData(t,{caipNetwork:r}),Oe.setActiveCaipNetworkId(r==null?void 0:r.caipNetworkId),Wc.set({activeChain:t,selectedNetworkId:r==null?void 0:r.caipNetworkId}))},setActiveCaipNetwork(t){var n,i,s;if(!t)return;_e.activeChain!==t.chainNamespace&&this.setIsSwitchingNamespace(!0);const e=_e.chains.get(t.chainNamespace);_e.activeChain=t.chainNamespace,_e.activeCaipNetwork=t,this.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(n=e==null?void 0:e.accountState)!=null&&n.address?_e.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(i=e==null?void 0:e.accountState)==null?void 0:i.address}`:_e.activeCaipAddress=void 0,this.setAccountProp("caipAddress",_e.activeCaipAddress,t.chainNamespace),e&&qe.replaceState(e.accountState),xM.resetSend(),Wc.set({activeChain:_e.activeChain,selectedNetworkId:(s=_e.activeCaipNetwork)==null?void 0:s.caipNetworkId}),Oe.setActiveCaipNetworkId(t.caipNetworkId),!this.checkIfSupportedNetwork(t.chainNamespace)&&ge.state.enableNetworkSwitch&&!ge.state.allowUnsupportedChain&&!_r.state.wcBasic&&this.showUnsupportedChainUI()},addCaipNetwork(t){var r;if(!t)return;const e=_e.chains.get(t.chainNamespace);e&&((r=e==null?void 0:e.caipNetworks)==null||r.push(t))},async switchActiveNamespace(t){var i;if(!t)return;const e=t!==Y.state.activeChain,r=(i=Y.getNetworkData(t))==null?void 0:i.caipNetwork,n=Y.getCaipNetworkByNamespace(t,r==null?void 0:r.id);e&&n&&await Y.switchActiveNetwork(n)},async switchActiveNetwork(t){var i;const e=Y.state.chains.get(Y.state.activeChain);!((i=e==null?void 0:e.caipNetworks)!=null&&i.some(s=>{var o;return s.id===((o=_e.activeCaipNetwork)==null?void 0:o.id)}))&&Xt.goBack();const n=this.getNetworkControllerClient(t.chainNamespace);n&&(await n.switchCaipNetwork(t),xr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}}))},getNetworkControllerClient(t){const e=t||_e.activeChain,r=_e.chains.get(e);if(!r)throw new Error("Chain adapter not found");if(!r.networkControllerClient)throw new Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(t){const e=t||_e.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const r=_e.chains.get(e);if(!(r!=null&&r.connectionControllerClient))throw new Error("ConnectionController client not set");return r.connectionControllerClient},getAccountProp(t,e){var i;let r=_e.activeChain;if(e&&(r=e),!r)return;const n=(i=_e.chains.get(r))==null?void 0:i.accountState;if(n)return n[t]},getNetworkProp(t,e){var n;const r=(n=_e.chains.get(e))==null?void 0:n.networkState;if(r)return r[t]},getRequestedCaipNetworks(t){const e=_e.chains.get(t),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=(e==null?void 0:e.networkState)||{};return dt.sortRequestedNetworks(r,n)},getAllRequestedCaipNetworks(){const t=[];return _e.chains.forEach(e=>{const r=this.getRequestedCaipNetworks(e.namespace);t.push(...r)}),t},setRequestedCaipNetworks(t,e){this.setAdapterNetworkState(e,{requestedCaipNetworks:t})},getAllApprovedCaipNetworkIds(){const t=[];return _e.chains.forEach(e=>{const r=this.getApprovedCaipNetworkIds(e.namespace);t.push(...r)}),t},getActiveCaipNetwork(){return _e.activeCaipNetwork},getActiveCaipAddress(){return _e.activeCaipAddress},getApprovedCaipNetworkIds(t){var n;const e=_e.chains.get(t);return((n=e==null?void 0:e.networkState)==null?void 0:n.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=this.getNetworkControllerClient(),r=await(e==null?void 0:e.getApprovedCaipNetworksData());this.setAdapterNetworkState(t,{approvedCaipNetworkIds:r==null?void 0:r.approvedCaipNetworkIds,supportsAllNetworks:r==null?void 0:r.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const r=e||_e.activeCaipNetwork,n=this.getRequestedCaipNetworks(t);return n.length?n==null?void 0:n.some(i=>i.id===(r==null?void 0:r.id)):!0},checkIfSupportedChainId(t){if(!_e.activeChain)return!0;const e=this.getRequestedCaipNetworks(_e.activeChain);return e==null?void 0:e.some(r=>r.id===t)},setSmartAccountEnabledNetworks(t,e){this.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var n;const t=wL.caipNetworkIdToNumber((n=_e.activeCaipNetwork)==null?void 0:n.caipNetworkId),e=_e.activeChain;if(!e||!t)return!1;const r=this.getNetworkProp("smartAccountEnabledNetworks",e);return!!(r!=null&&r.includes(Number(t)))},getActiveNetworkTokenAddress(){var n,i;const t=((n=_e.activeCaipNetwork)==null?void 0:n.chainNamespace)||"eip155",e=((i=_e.activeCaipNetwork)==null?void 0:i.id)||1,r=Es.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${r}`},showUnsupportedChainUI(){An.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=_e.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Es.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){this.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");_e.activeCaipAddress=void 0,this.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),ut.removeConnectorId(e)},async disconnect(t){const e=hbe(t);try{xM.resetSend();const r=await Promise.allSettled(e.map(async([i,s])=>{var o;try{const{caipAddress:a}=this.getAccountData(i)||{};a&&((o=s.connectionControllerClient)!=null&&o.disconnect)&&await s.connectionControllerClient.disconnect(i),this.resetAccount(i),this.resetNetwork(i)}catch(a){throw new Error(`Failed to disconnect chain ${i}: ${a.message}`)}}));_r.resetWcConnection();const n=r.filter(i=>i.status==="rejected");if(n.length>0)throw new Error(n.map(i=>i.reason.message).join(", "));Oe.deleteConnectedSocialProvider(),t?ut.removeConnectorId(t):ut.resetConnectorIds(),xr.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:t||"all"}})}catch(r){console.error(r.message||"Failed to disconnect chains"),xr.sendEvent({type:"track",event:"DISCONNECT_ERROR",properties:{message:r.message||"Failed to disconnect chains"}})}},setIsSwitchingNamespace(t){_e.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var r,n;const t=[];let e;if(_e.chains.forEach(i=>{Ue.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(s=>s===i.namespace)&&i.namespace&&t.push(i.namespace)}),t.length>0){const i=t[0];return e=i?(n=(r=_e.chains.get(i))==null?void 0:r.caipNetworks)==null?void 0:n[0]:void 0,e}},getAccountData(t){var e;return t?(e=Y.state.chains.get(t))==null?void 0:e.accountState:qe.state},getNetworkData(t){var r;const e=t||_e.activeChain;if(e)return(r=Y.state.chains.get(e))==null?void 0:r.networkState},getCaipNetworkByNamespace(t,e){var i,s,o;if(!t)return;const r=Y.state.chains.get(t),n=(i=r==null?void 0:r.caipNetworks)==null?void 0:i.find(a=>a.id===e);return n||((s=r==null?void 0:r.networkState)==null?void 0:s.caipNetwork)||((o=r==null?void 0:r.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=ut.state.filterByNamespace;return(t?[_e.chains.get(t)]:Array.from(_e.chains.values())).flatMap(r=>(r==null?void 0:r.caipNetworks)||[]).map(r=>r.caipNetworkId)}},ove={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},PL=dt.getBlockchainApiUrl(),Ts=nn({clientId:null,api:new b2({baseUrl:PL,clientId:null}),supportedChains:{http:[],ws:[]}}),Ge={state:Ts,async get(t){const{st:e,sv:r}=Ge.getSdkProperties(),n=ge.state.projectId,i={...t.params||{},st:e,sv:r,projectId:n};return Ts.api.get({...t,params:i})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ge.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Ts.supportedChains.http.length||await Ge.getSupportedNetworks()}catch{return!1}return Ts.supportedChains.http.includes(t)},async getSupportedNetworks(){const t=await Ge.get({path:"v1/supported-chains"});return Ts.supportedChains=t,t},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Ge.isNetworkSupported(e))return{avatar:"",name:""};const n=Oe.getIdentityFromCacheForAddress(t);if(n)return n;const i=await Ge.get({path:`/v1/identity/${t}`,params:{sender:Y.state.activeCaipAddress?dt.getPlainAddress(Y.state.activeCaipAddress):void 0}});return Oe.updateIdentityCache({address:t,identity:i,timestamp:Date.now()}),i},async fetchTransactions({account:t,cursor:e,onramp:r,signal:n,cache:i,chainId:s}){var a;return await Ge.isNetworkSupported((a=Y.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?Ge.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:r,chainId:s},signal:n,cache:i}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:r,to:n,gasPrice:i}){var o;return await Ge.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Ge.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:r,to:n,gasPrice:i}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var r;return await Ge.isNetworkSupported((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ge.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var r;return await Ge.isNetworkSupported((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ts.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ge.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var n;return await Ge.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ge.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var i;const{st:e,sv:r}=Ge.getSdkProperties();if(!await Ge.isNetworkSupported((i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId))throw new Error("Network not supported for Gas Price");return Ge.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:r}})},async generateSwapCalldata({amount:t,from:e,to:r,userAddress:n,disableEstimate:i}){var o;if(!await Ge.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ts.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Es.CONVERT_SLIPPAGE_TOLERANCE},projectId:ge.state.projectId,from:e,to:r,userAddress:n,disableEstimate:i}})},async generateApproveCalldata({from:t,to:e,userAddress:r}){var o;const{st:n,sv:i}=Ge.getSdkProperties();if(!await Ge.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ge.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:t,to:e,st:n,sv:i}})},async getBalance(t,e,r){var l;const{st:n,sv:i}=Ge.getSdkProperties();if(!await Ge.isNetworkSupported((l=Y.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return gi.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Oe.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Ge.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:r,st:n,sv:i}});return Oe.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var r;return await Ge.isNetworkSupported((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ge.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var r;return await Ge.isNetworkSupported((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ge.get({path:`/v1/profile/reverse/${t}`,params:{sender:qe.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var r;return await Ge.isNetworkSupported((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ge.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:r,signature:n}){var s;return await Ge.isNetworkSupported((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Ts.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:r,purchaseAmount:n,paymentAmount:i}){var a;return await Ge.isNetworkSupported((a=Y.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Ts.api.post({path:"/v1/generators/onrampurl",params:{projectId:ge.state.projectId},body:{destinationWallets:t,defaultNetwork:r,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:i}})).url:""},async getOnrampOptions(){var e;if(!await Ge.isNetworkSupported((e=Y.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Ge.get({path:"/v1/onramp/options"})}catch{return ove}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}){var i;try{return await Ge.isNetworkSupported((i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?await Ts.api.post({path:"/v1/onramp/quote",params:{projectId:ge.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}}):null}catch{return{coinbaseFee:{amount:r,currency:e.id},networkFee:{amount:r,currency:e.id},paymentSubtotal:{amount:r,currency:e.id},paymentTotal:{amount:r,currency:e.id},purchaseAmount:{amount:r,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var r;return await Ge.isNetworkSupported((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ge.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,r){var i;return await Ge.isNetworkSupported((i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Ts.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ge.state.projectId},body:{pci:e,signature:r}}):{success:!1}},setClientId(t){Ts.clientId=t,Ts.api=new b2({baseUrl:PL,clientId:t})}},va=nn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),qe={state:va,replaceState(t){t&&Object.assign(va,Dh(t))},subscribe(t){return Y.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,r){let n;return Y.subscribeChainProp("accountState",i=>{if(i){const s=i[t];n!==s&&(n=s,e(s))}},r)},setStatus(t,e){Y.setAccountProp("status",t,e)},getCaipAddress(t){return Y.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const r=t?dt.getPlainAddress(t):void 0;e===Y.state.activeChain&&(Y.state.activeCaipAddress=t),Y.setAccountProp("caipAddress",t,e),Y.setAccountProp("address",r,e)},setBalance(t,e,r){Y.setAccountProp("balance",t,r),Y.setAccountProp("balanceSymbol",e,r)},setProfileName(t,e){Y.setAccountProp("profileName",t,e)},setProfileImage(t,e){Y.setAccountProp("profileImage",t,e)},setUser(t,e){Y.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){Y.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){Y.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){Y.setAccountProp("currentTab",t,Y.state.activeChain)},setTokenBalance(t,e){t&&Y.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){Y.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){Y.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,r){const n=Y.getAccountProp("addressLabels",r)||new Map;n.set(t,e),Y.setAccountProp("addressLabels",n,r)},removeAddressLabel(t,e){const r=Y.getAccountProp("addressLabels",e)||new Map;r.delete(t),Y.setAccountProp("addressLabels",r,e)},setConnectedWalletInfo(t,e){Y.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){Y.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&Y.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){Y.setAccountProp("socialWindow",t?Dh(t):void 0,e)},setFarcasterUrl(t,e){Y.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var s,o;va.balanceLoading=!0;const e=(s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId,r=(o=Y.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=Y.state.activeCaipAddress,i=n?dt.getPlainAddress(n):void 0;if(va.lastRetry&&!dt.isAllowedRetry(va.lastRetry,30*Es.ONE_SEC_MS))return va.balanceLoading=!1,[];try{if(i&&e&&r){const c=(await Ge.getBalance(i,e)).balances.filter(l=>l.quantity.decimals!=="0");return this.setTokenBalance(c,r),va.lastRetry=void 0,va.balanceLoading=!1,c}}catch(a){va.lastRetry=Date.now(),t==null||t(a),gi.showError("Token Balance Unavailable")}finally{va.balanceLoading=!1}return[]},resetAccount(t){Y.resetAccount(t)}},ls=nn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),An={state:ls,subscribe(t){return ns(ls,()=>t(ls))},subscribeKey(t,e){return no(ls,t,e)},async open(t){var i;const e=qe.state.status==="connected";_r.state.wcBasic?pt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await pt.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),t!=null&&t.namespace?(await Y.switchActiveNamespace(t.namespace),An.setLoading(!0,t.namespace)):An.setLoading(!0),ut.setFilterByNamespace(t==null?void 0:t.namespace);const r=(i=Y.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;Y.state.noAdapters&&!r?dt.isMobile()?Xt.reset("AllWallets"):Xt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Xt.reset(t.view):r?Xt.reset("Account"):Xt.reset("Connect"),ls.open=!0,Wc.set({open:!0}),xr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!r}})},close(){const t=ge.state.enableEmbedded,e=!!Y.state.activeCaipAddress;ls.open&&xr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),ls.open=!1,An.clearLoading(),t?e?Xt.replace("Account"):Xt.push("Connect"):Wc.set({open:!1}),_r.resetUri()},setLoading(t,e){e&&ls.loadingNamespaceMap.set(e,t),ls.loading=t,Wc.set({loading:t})},clearLoading(){ls.loadingNamespaceMap.clear(),ls.loading=!1},shake(){ls.shake||(ls.shake=!0,setTimeout(()=>{ls.shake=!1},500))}},IM=2147483648,ave={convertEVMChainIdToCoinType(t){if(t>=IM)throw new Error("Invalid chainId");return(IM|t)>>>0}},ho=nn({suggestions:[],loading:!1}),OL={state:ho,subscribe(t){return ns(ho,()=>t(ho))},subscribeKey(t,e){return no(ho,t,e)},async resolveName(t){var e,r;try{return await Ge.lookupEnsName(t)}catch(n){const i=n;throw new Error(((r=(e=i==null?void 0:i.reasons)==null?void 0:e[0])==null?void 0:r.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Ge.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ho.loading=!0,ho.suggestions=[];const e=await Ge.getEnsNameSuggestions(t);return ho.suggestions=e.suggestions.map(r=>({...r,name:r.name}))||[],ho.suggestions}catch(e){const r=this.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(r)}finally{ho.loading=!1}},async getNamesForAddress(t){try{if(!Y.state.activeCaipNetwork)return[];const r=Oe.getEnsFromCacheForAddress(t);if(r)return r;const n=await Ge.reverseLookupEnsName({address:t});return Oe.updateEnsCache({address:t,ens:n,timestamp:Date.now()}),n}catch(e){const r=this.parseEnsApiError(e,"Error fetching names for address");throw new Error(r)}},async registerName(t){const e=Y.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const r=qe.state.address,n=ut.getAuthConnector();if(!r||!n)throw new Error("Address or auth connector not found");ho.loading=!0;try{const i=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Xt.pushTransactionStack({view:"RegisterAccountNameSuccess",goBack:!1,replace:!0,onCancel(){ho.loading=!1}});const s=await _r.signMessage(i),o=e.id;if(!o)throw new Error("Network not found");const a=ave.convertEVMChainIdToCoinType(Number(o));await Ge.registerEnsName({coinType:a,address:r,signature:s,message:i}),qe.setProfileName(t,e.chainNamespace),Xt.replace("RegisterAccountNameSuccess")}catch(i){const s=this.parseEnsApiError(i,`Error registering name ${t}`);throw Xt.replace("RegisterAccountName"),new Error(s)}finally{ho.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var n,i;const r=t;return((i=(n=r==null?void 0:r.reasons)==null?void 0:n[0])==null?void 0:i.description)||e}};function cve(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function qn(t,...e){try{return cve(t(...e))}catch(r){return Promise.reject(r)}}function lve(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function uve(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function O1(t){if(lve(t))return String(t);if(uve(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return O1(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const $4="base64:";function hve(t){return typeof t=="string"?t:$4+pve(t)}function dve(t){return typeof t!="string"||!t.startsWith($4)?t:fve(t.slice($4.length))}function fve(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function pve(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function fs(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function gve(...t){return fs(t.join(":"))}function Ow(t){return t=fs(t),t?t+":":""}function mve(t,e){if(e===void 0)return!0;let r=0,n=t.indexOf(":");for(;n>-1;)r++,n=t.indexOf(":",n+1);return r<=e}function yve(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const wve="memory",bve=()=>{const t=new Map;return{name:wve,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function vve(t={}){const e={mounts:{"":t.driver||bve()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},n=(l,u)=>e.mountpoints.filter(h=>h.startsWith(l)||u&&l.startsWith(h)).map(h=>({relativeBase:l.length>h.length?l.slice(h.length):void 0,mountpoint:h,driver:e.mounts[h]})),i=(l,u)=>{if(e.watching){u=fs(u);for(const h of e.watchListeners)h(l,u)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await AM(e.mounts[l],i,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,h)=>{const d=new Map,g=m=>{let v=d.get(m.base);return v||(v={driver:m.driver,base:m.base,items:[]},d.set(m.base,v)),v};for(const m of l){const v=typeof m=="string",$=fs(v?m:m.key),_=v?void 0:m.value,S=v||!m.options?u:{...u,...m.options},A=r($);g(A).items.push({key:$,value:_,relativeKey:A.relativeKey,options:S})}return Promise.all([...d.values()].map(m=>h(m))).then(m=>m.flat())},c={hasItem(l,u={}){l=fs(l);const{relativeKey:h,driver:d}=r(l);return qn(d.hasItem,h,u)},getItem(l,u={}){l=fs(l);const{relativeKey:h,driver:d}=r(l);return qn(d.getItem,h,u).then(g=>Wl(g))},getItems(l,u={}){return a(l,u,h=>h.driver.getItems?qn(h.driver.getItems,h.items.map(d=>({key:d.relativeKey,options:d.options})),u).then(d=>d.map(g=>({key:gve(h.base,g.key),value:Wl(g.value)}))):Promise.all(h.items.map(d=>qn(h.driver.getItem,d.relativeKey,d.options).then(g=>({key:d.key,value:Wl(g)})))))},getItemRaw(l,u={}){l=fs(l);const{relativeKey:h,driver:d}=r(l);return d.getItemRaw?qn(d.getItemRaw,h,u):qn(d.getItem,h,u).then(g=>dve(g))},async setItem(l,u,h={}){if(u===void 0)return c.removeItem(l);l=fs(l);const{relativeKey:d,driver:g}=r(l);g.setItem&&(await qn(g.setItem,d,O1(u),h),g.watch||i("update",l))},async setItems(l,u){await a(l,u,async h=>{if(h.driver.setItems)return qn(h.driver.setItems,h.items.map(d=>({key:d.relativeKey,value:O1(d.value),options:d.options})),u);h.driver.setItem&&await Promise.all(h.items.map(d=>qn(h.driver.setItem,d.relativeKey,O1(d.value),d.options)))})},async setItemRaw(l,u,h={}){if(u===void 0)return c.removeItem(l,h);l=fs(l);const{relativeKey:d,driver:g}=r(l);if(g.setItemRaw)await qn(g.setItemRaw,d,u,h);else if(g.setItem)await qn(g.setItem,d,hve(u),h);else return;g.watch||i("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=fs(l);const{relativeKey:h,driver:d}=r(l);d.removeItem&&(await qn(d.removeItem,h,u),(u.removeMeta||u.removeMata)&&await qn(d.removeItem,h+"$",u),d.watch||i("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=fs(l);const{relativeKey:h,driver:d}=r(l),g=Object.create(null);if(d.getMeta&&Object.assign(g,await qn(d.getMeta,h,u)),!u.nativeOnly){const m=await qn(d.getItem,h+"$",u).then(v=>Wl(v));m&&typeof m=="object"&&(typeof m.atime=="string"&&(m.atime=new Date(m.atime)),typeof m.mtime=="string"&&(m.mtime=new Date(m.mtime)),Object.assign(g,m))}return g},setMeta(l,u,h={}){return this.setItem(l+"$",u,h)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var $;l=Ow(l);const h=n(l,!0);let d=[];const g=[];let m=!0;for(const _ of h){($=_.driver.flags)!=null&&$.maxDepth||(m=!1);const S=await qn(_.driver.getKeys,_.relativeBase,u);for(const A of S){const T=_.mountpoint+fs(A);d.some(k=>T.startsWith(k))||g.push(T)}d=[_.mountpoint,...d.filter(A=>!A.startsWith(_.mountpoint))]}const v=u.maxDepth!==void 0&&!m;return g.filter(_=>(!v||mve(_,u.maxDepth))&&yve(_,l))},async clear(l,u={}){l=Ow(l),await Promise.all(n(l,!1).map(async h=>{if(h.driver.clear)return qn(h.driver.clear,h.relativeBase,u);if(h.driver.removeItem){const d=await h.driver.getKeys(h.relativeBase||"",u);return Promise.all(d.map(g=>h.driver.removeItem(g,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>CM(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=Ow(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((h,d)=>d.length-h.length)),e.mounts[l]=u,e.watching&&Promise.resolve(AM(u,i,l)).then(h=>{e.unwatch[l]=h}).catch(console.error),c},async unmount(l,u=!0){var h,d;l=Ow(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((d=(h=e.unwatch)[l])==null||d.call(h),delete e.unwatch[l]),u&&await CM(e.mounts[l]),e.mountpoints=e.mountpoints.filter(g=>g!==l),delete e.mounts[l])},getMount(l=""){l=fs(l)+":";const u=r(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=fs(l),n(l,u.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,h={})=>c.setItem(l,u,h),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function AM(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function CM(t){typeof t.dispose=="function"&&await qn(t.dispose)}const Eve="idb-keyval";var _ve=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i;let n;return t.dbName&&t.storeName&&(n=UI(t.dbName,t.storeName)),{name:Eve,options:t,async hasItem(i){return!(typeof await kb(r(i),n)>"u")},async getItem(i){return await kb(r(i),n)??null},setItem(i,s){return f7(r(i),s,n)},removeItem(i){return p7(r(i),n)},getKeys(){return m7(n)},clear(){return g7(n)}}};const Sve="WALLET_CONNECT_V2_INDEXED_DB",xve="keyvaluestorage";let Ive=class{constructor(){this.indexedDb=vve({driver:_ve({dbName:Sve,storeName:xve})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Mo(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var M3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},k1={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof M3<"u"&&M3.localStorage?k1.exports=M3.localStorage:typeof window<"u"&&window.localStorage?k1.exports=window.localStorage:k1.exports=new e})();function Ave(t){var e;return[t[0],la((e=t[1])!=null?e:"")]}let Cve=class{constructor(){this.localStorage=k1.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Ave)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return la(r)}async setItem(e,r){this.localStorage.setItem(e,Mo(r))}async removeItem(e){this.localStorage.removeItem(e)}};const Nve="wc_storage_version",NM=1,Mve=async(t,e,r)=>{const n=Nve,i=await e.getItem(n);if(i&&i>=NM){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(n,NM),r(e),Tve(t,o)},Tve=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let $ve=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new Cve;this.storage=e;try{const r=new Ive;Mve(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};function km(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function MM(t){return km(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const kL="2.23.2";let R0={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${kL}`};class Lh extends Error{constructor(e,r={}){var a;const n=(()=>{var c;return r.cause instanceof Lh?r.cause.details:(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),i=r.cause instanceof Lh&&r.cause.docsPath||r.docsPath,s=(a=R0.getDocsUrl)==null?void 0:a.call(R0,{...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...R0.version?[`Version: ${R0.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=kL}walk(e){return RL(this,e)}}function RL(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?RL(t.cause,e):e?null:t}class DL extends Lh{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}function Xp(t,{dir:e,size:r=32}={}){return typeof t=="string"?Pve(t,{dir:e,size:r}):Ove(t,{dir:e,size:r})}function Pve(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new DL({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function Ove(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new DL({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}class kve extends Lh{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class Rve extends Lh{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function e0(t,{size:e}){if(MM(t)>e)throw new Rve({givenSize:MM(t),maxSize:e})}function P4(t,e={}){const{signed:r}=e;e.size&&e0(t,{size:e.size});const n=BigInt(t);if(!r)return n;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function Dve(t,e={}){return Number(P4(t,e))}const Lve=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function O4(t,e={}){return typeof t=="number"||typeof t=="bigint"?BL(t,e):typeof t=="string"?Uve(t,e):typeof t=="boolean"?Bve(t,e):LL(t,e)}function Bve(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(e0(r,{size:e.size}),Xp(r,{size:e.size})):r}function LL(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=Lve[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(e0(n,{size:e.size}),Xp(n,{dir:"right",size:e.size})):n}function BL(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new kve({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?Xp(a,{size:n}):a}const jve=new TextEncoder;function Uve(t,e={}){const r=jve.encode(t);return LL(r,e)}const Fve=new TextEncoder;function zve(t,e={}){return typeof t=="number"||typeof t=="bigint"?Wve(t,e):typeof t=="boolean"?qve(t,e):km(t)?jL(t,e):UL(t,e)}function qve(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(e0(r,{size:e.size}),Xp(r,{size:e.size})):r}const Sc={zero:48,nine:57,A:65,F:70,a:97,f:102};function TM(t){if(t>=Sc.zero&&t<=Sc.nine)return t-Sc.zero;if(t>=Sc.A&&t<=Sc.F)return t-(Sc.A-10);if(t>=Sc.a&&t<=Sc.f)return t-(Sc.a-10)}function jL(t,e={}){let r=t;e.size&&(e0(r,{size:e.size}),r=Xp(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=TM(n.charCodeAt(a++)),l=TM(n.charCodeAt(a++));if(c===void 0||l===void 0)throw new Lh(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);s[o]=c*16+l}return s}function Wve(t,e){const r=BL(t,e);return jL(r)}function UL(t,e={}){const r=Fve.encode(t);return typeof e.size=="number"?(e0(r,{size:e.size}),Xp(r,{dir:"right",size:e.size})):r}function Zb(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Hve(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function v2(t,...e){if(!Hve(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ICe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Zb(t.outputLen),Zb(t.blockLen)}function $M(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Kve(t,e){v2(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const kw=BigInt(2**32-1),PM=BigInt(32);function Vve(t,e=!1){return e?{h:Number(t&kw),l:Number(t>>PM&kw)}:{h:Number(t>>PM&kw)|0,l:Number(t&kw)|0}}function Gve(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Vve(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const Yve=(t,e,r)=>t<<r|e>>>32-r,Qve=(t,e,r)=>e<<r|t>>>32-r,Zve=(t,e,r)=>e<<r-32|t>>>64-r,Jve=(t,e,r)=>t<<r-32|e>>>64-r,Bd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Xve(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ACe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function CCe(t,e){return t<<32-e|t>>>e}const OM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function e2e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function kM(t){for(let e=0;e<t.length;e++)t[e]=e2e(t[e])}function t2e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function FL(t){return typeof t=="string"&&(t=t2e(t)),v2(t),t}function NCe(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];v2(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class r2e{clone(){return this._cloneInto()}}function n2e(t){const e=n=>t().update(FL(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function MCe(t=32){if(Bd&&typeof Bd.getRandomValues=="function")return Bd.getRandomValues(new Uint8Array(t));if(Bd&&typeof Bd.randomBytes=="function")return Bd.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const zL=[],qL=[],WL=[],i2e=BigInt(0),D0=BigInt(1),s2e=BigInt(2),o2e=BigInt(7),a2e=BigInt(256),c2e=BigInt(113);for(let t=0,e=D0,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],zL.push(2*(5*n+r)),qL.push((t+1)*(t+2)/2%64);let i=i2e;for(let s=0;s<7;s++)e=(e<<D0^(e>>o2e)*c2e)%a2e,e&s2e&&(i^=D0<<(D0<<BigInt(s))-D0);WL.push(i)}const[l2e,u2e]=Gve(WL,!0),RM=(t,e,r)=>r>32?Zve(t,e,r):Yve(t,e,r),DM=(t,e,r)=>r>32?Jve(t,e,r):Qve(t,e,r);function h2e(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],h=RM(l,u,1)^r[a],d=DM(l,u,1)^r[a+1];for(let g=0;g<50;g+=10)t[o+g]^=h,t[o+g+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=qL[o],c=RM(i,s,a),l=DM(i,s,a),u=zL[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=l2e[n],t[1]^=u2e[n]}r.fill(0)}class A5 extends r2e{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Zb(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Xve(this.state)}keccak(){OM||kM(this.state32),h2e(this.state32,this.rounds),OM||kM(this.state32),this.posOut=0,this.pos=0}update(e){$M(this);const{blockLen:r,state:n}=this;e=FL(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,r&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){$M(this,!1),v2(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Zb(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Kve(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new A5(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const d2e=(t,e,r)=>n2e(()=>new A5(e,t,r)),f2e=d2e(1,136,256/8);function HL(t,e){const r=e||"hex",n=f2e(km(t,{strict:!1})?zve(t):t);return r==="bytes"?n:O4(n)}class p2e extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const T3=new p2e(8192);function g2e(t,e){if(T3.has(`${t}.${e}`))return T3.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=HL(UL(r),"bytes"),i=r.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(n[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return T3.set(`${t}.${e}`,s),s}function m2e(t){const e=HL(`0x${t.substring(4)}`).substring(26);return g2e(`0x${e}`)}async function y2e({hash:t,signature:e}){const r=km(t)?t:O4(t),{secp256k1:n}=await Th(async()=>{const{secp256k1:o}=await import("./secp256k1-D1TjSUvp.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:h,yParity:d}=e,g=Number(d??h),m=LM(g);return new n.Signature(P4(l),P4(u)).addRecoveryBit(m)}const o=km(e)?e:O4(e),a=Dve(`0x${o.slice(130)}`),c=LM(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function LM(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function w2e({hash:t,signature:e}){return m2e(await y2e({hash:t,signature:e}))}function b2e(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),h=u.charCodeAt(0);if(e[h]!==255)throw new TypeError(u+" is ambiguous");e[h]=l}const r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,h=0,d=0;const g=l.length;for(;d!==g&&l[d]===0;)d++,u++;const m=(g-d)*s+1>>>0,v=new Uint8Array(m);for(;d!==g;){let S=l[d],A=0;for(let T=m-1;(S!==0||A<h)&&T!==-1;T--,A++)S+=256*v[T]>>>0,v[T]=S%r>>>0,S=S/r>>>0;if(S!==0)throw new Error("Non-zero carry");h=A,d++}let $=m-h;for(;$!==m&&v[$]===0;)$++;let _=n.repeat(u);for(;$<m;++$)_+=t.charAt(v[$]);return _}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,h=0,d=0;for(;l[u]===n;)h++,u++;const g=(l.length-u)*i+1>>>0,m=new Uint8Array(g);for(;u<l.length;){const S=l.charCodeAt(u);if(S>255)return;let A=e[S];if(A===255)return;let T=0;for(let k=g-1;(A!==0||T<d)&&k!==-1;k--,T++)A+=r*m[k]>>>0,m[k]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");d=T,u++}let v=g-d;for(;v!==g&&m[v]===0;)v++;const $=new Uint8Array(h+(g-v));let _=h;for(;v!==g;)$[_++]=m[v++];return $}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var v2e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const KL=b2e(v2e);var E2e={};const _2e=":";function Qf(t){const[e,r]=t.split(_2e);return{namespace:e,reference:r}}function VL(t,e){return t.includes(":")?[t]:e.chains||[]}const S2e="ReactNative",Ks={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},x2e="js";function Jb(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Iu(){return!il()&&!!ly()&&navigator.product===S2e}function I2e(){return Iu()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function A2e(){return Iu()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Ey(){return!Jb()&&!!ly()&&!!il()}function _y(){return Iu()?Ks.reactNative:Jb()?Ks.node:Ey()?Ks.browser:Ks.unknown}function BM(){var t;try{return Iu()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function C2e(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const i=e[n];i!==void 0&&r.set(n,i)}return r.toString()}function GL(){return XI()||{name:"",description:"",url:"",icons:[""]}}function N2e(){if(_y()===Ks.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=Y7();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function M2e(){var t;const e=_y();return e===Ks.browser?[e,((t=ZI())==null?void 0:t.host)||"unknown"].join(":"):e}function YL(t,e,r){const n=N2e(),i=M2e();return[[t,e].join("-"),[x2e,r].join("-"),n,i].join("/")}function T2e({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=r.split("?"),u=YL(t,e,n),h={auth:i,ua:u,projectId:s,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},d=C2e(l[1]||"",h);return l[0]+"?"+d}function dh(t,e){return t.filter(r=>e.includes(r)).length===t.length}function k4(t){return Object.fromEntries(t.entries())}function R4(t){return new Map(Object.entries(t))}function Hu(t=J.FIVE_MINUTES,e){const r=J.toMiliseconds(t||J.FIVE_MINUTES);let n,i,s,o;return{resolve:a=>{s&&n&&(clearTimeout(s),n(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},r),n=a,i=c})}}function Yl(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function QL(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function $2e(t){return QL("topic",t)}function P2e(t){return QL("id",t)}function ZL(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Mn(t,e){return J.fromMiliseconds(Date.now()+J.toMiliseconds(t))}function kl(t){return Date.now()>=J.toMiliseconds(t)}function Ht(t,e){return`${t}${e?`:${e}`:""}`}function R1(t=[],e=[]){return[...new Set([...t,...e])]}async function O2e({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=k2e(s,t,e),a=_y();if(a===Ks.browser){if(!((n=il())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}R2e(o)}else a===Ks.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function k2e(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${j2e(n,!0)}`}else i=`${i}/wc?${n}`;return i}function R2e(t){let e="_self";B2e()?e="_top":(L2e()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function D2e(t,e){let r="";try{if(Ey()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function jM(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function UM(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function C5(){return typeof process<"u"&&E2e.IS_VITEST==="true"}function L2e(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function B2e(){try{return window.self!==window.top}catch{return!1}}function j2e(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function JL(t){return Buffer.from(t,"base64").toString("utf-8")}function U2e(t){return new Promise(e=>setTimeout(e,t))}function Rm(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function F2e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function E2(t,...e){if(!F2e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function N5(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Rm(t.outputLen),Rm(t.blockLen)}function Ap(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function XL(t,e){E2(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Rw=BigInt(2**32-1),FM=BigInt(32);function z2e(t,e=!1){return e?{h:Number(t&Rw),l:Number(t>>FM&Rw)}:{h:Number(t>>FM&Rw)|0,l:Number(t&Rw)|0}}function q2e(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=z2e(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const W2e=(t,e,r)=>t<<r|e>>>32-r,H2e=(t,e,r)=>e<<r|t>>>32-r,K2e=(t,e,r)=>e<<r-32|t>>>64-r,V2e=(t,e,r)=>t<<r-32|e>>>64-r,jd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function G2e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function $3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ea(t,e){return t<<32-e|t>>>e}const zM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Y2e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function qM(t){for(let e=0;e<t.length;e++)t[e]=Y2e(t[e])}function Q2e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Cp(t){return typeof t=="string"&&(t=Q2e(t)),E2(t),t}let M5=class{clone(){return this._cloneInto()}};function eB(t){const e=n=>t().update(Cp(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Sy(t=32){if(jd&&typeof jd.getRandomValues=="function")return jd.getRandomValues(new Uint8Array(t));if(jd&&typeof jd.randomBytes=="function")return jd.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const tB=[],rB=[],nB=[],Z2e=BigInt(0),L0=BigInt(1),J2e=BigInt(2),X2e=BigInt(7),eEe=BigInt(256),tEe=BigInt(113);for(let t=0,e=L0,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],tB.push(2*(5*n+r)),rB.push((t+1)*(t+2)/2%64);let i=Z2e;for(let s=0;s<7;s++)e=(e<<L0^(e>>X2e)*tEe)%eEe,e&J2e&&(i^=L0<<(L0<<BigInt(s))-L0);nB.push(i)}const[rEe,nEe]=q2e(nB,!0),WM=(t,e,r)=>r>32?K2e(t,e,r):W2e(t,e,r),HM=(t,e,r)=>r>32?V2e(t,e,r):H2e(t,e,r);function iEe(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],h=WM(l,u,1)^r[a],d=HM(l,u,1)^r[a+1];for(let g=0;g<50;g+=10)t[o+g]^=h,t[o+g+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=rB[o],c=WM(i,s,a),l=HM(i,s,a),u=tB[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=rEe[n],t[1]^=nEe[n]}r.fill(0)}let sEe=class iB extends M5{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Rm(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=G2e(this.state)}keccak(){zM||qM(this.state32),iEe(this.state32,this.rounds),zM||qM(this.state32),this.posOut=0,this.pos=0}update(e){Ap(this);const{blockLen:r,state:n}=this;e=Cp(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,r&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Ap(this,!1),E2(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Rm(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(XL(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new iB(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const oEe=(t,e,r)=>eB(()=>new sEe(e,t,r)),aEe=oEe(1,136,256/8),cEe="https://rpc.walletconnect.org/v1";function sB(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(aEe(r)).toString("hex")}async function lEe(t,e,r,n,i,s){switch(r.t){case"eip191":return await uEe(t,e,r.s);case"eip1271":return await hEe(t,e,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function uEe(t,e,r){return(await w2e({hash:sB(e),signature:r})).toLowerCase()===t.toLowerCase()}async function hEe(t,e,r,n,i,s){const o=Qf(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=r.substring(2),h=sB(e).substring(2),d=a+h+c+l+u,g=await fetch(`${s||cEe}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:dEe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:d},"latest"]})}),{result:m}=await g.json();return m?m.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function dEe(){return Date.now()+Math.floor(Math.random()*1e3)}function fEe(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const i=1+n*64;if(r.length<i)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const s=Buffer.from(t,"base64").slice(1,65);return KL.encode(s)}var pEe=Object.defineProperty,gEe=Object.defineProperties,mEe=Object.getOwnPropertyDescriptors,KM=Object.getOwnPropertySymbols,yEe=Object.prototype.hasOwnProperty,wEe=Object.prototype.propertyIsEnumerable,VM=(t,e,r)=>e in t?pEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bEe=(t,e)=>{for(var r in e||(e={}))yEe.call(e,r)&&VM(t,r,e[r]);if(KM)for(var r of KM(e))wEe.call(e,r)&&VM(t,r,e[r]);return t},vEe=(t,e)=>gEe(t,mEe(e));const EEe="did:pkh:",T5=t=>t==null?void 0:t.split(":"),_Ee=t=>{const e=t&&T5(t);if(e)return t.includes(EEe)?e[3]:e[1]},D4=t=>{const e=t&&T5(t);if(e)return e[2]+":"+e[3]},Xb=t=>{const e=t&&T5(t);if(e)return e.pop()};async function GM(t){const{cacao:e,projectId:r}=t,{s:n,p:i}=e,s=oB(i,i.iss),o=Xb(i.iss);return await lEe(o,s,n,D4(i.iss),r)}const oB=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=Xb(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${_Ee(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,h=t.nbf?`Not Before: ${t.nbf}`:void 0,d=t.requestId?`Request ID: ${t.requestId}`:void 0,g=t.resources?`Resources:${t.resources.map(v=>`
- ${v}`).join("")}`:void 0,m=D1(t.resources);if(m){const v=Dm(m);i=$Ee(i,v)}return[r,n,"",i,"",s,o,a,c,l,u,h,d,g].filter(v=>v!=null).join(`
`)};function SEe(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function xEe(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Bh(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{const s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function IEe(t,e,r,n={}){return r==null||r.sort((i,s)=>i.localeCompare(s)),{att:{[t]:AEe(e,r,n)}}}function AEe(t,e,r={}){e=e==null?void 0:e.sort((i,s)=>i.localeCompare(s));const n=e.map(i=>({[`${t}/${i}`]:[r]}));return Object.assign({},...n)}function aB(t){return Bh(t),`urn:recap:${SEe(t).replace(/=/g,"")}`}function Dm(t){const e=xEe(t.replace("urn:recap:",""));return Bh(e),e}function CEe(t,e,r){const n=IEe(t,e,r);return aB(n)}function NEe(t){return t&&t.includes("urn:recap:")}function MEe(t,e){const r=Dm(t),n=Dm(e),i=TEe(r,n);return aB(i)}function TEe(t,e){Bh(t),Bh(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;n.att[i]=vEe(bEe({},n.att[i]),{[a]:((c=t.att[i])==null?void 0:c[a])||((l=e.att[i])==null?void 0:l[a])})})}),n}function $Ee(t="",e){Bh(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let i=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(h=>({ability:h.split("/")[0],action:h.split("/")[1]}));c.sort((h,d)=>h.action.localeCompare(d.action));const l={};c.forEach(h=>{l[h.ability]||(l[h.ability]=[]),l[h.ability].push(h.action)});const u=Object.keys(l).map(h=>(i++,`(${i}) '${h}': '${l[h].join("', '")}' for '${a}'.`));n.push(u.join(", ").replace(".,","."))});const s=n.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function YM(t){var e;const r=Dm(t);Bh(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function QM(t){const e=Dm(t);Bh(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function D1(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return NEe(e)?e:void 0}function P3(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function cB(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function zs(t,...e){if(!cB(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ZM(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function PEe(t,e){zs(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function JM(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const au=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),OEe=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),kEe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!kEe)throw new Error("Non little-endian hardware is not supported");function REe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function L4(t){if(typeof t=="string")t=REe(t);else if(cB(t))t=B4(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function DEe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function LEe(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const BEe=(t,e)=>{function r(n,...i){if(zs(n),t.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?zs(l):zs(l,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&zs(i[1]);const o=e(n,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");zs(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,zs(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(zs(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(r,t),r};function XM(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!jEe(e))throw new Error("invalid output, must be aligned");return e}function eT(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s);t.setUint32(e+4,o,n),t.setUint32(e+0,a,n)}function jEe(t){return t.byteOffset%4===0}function B4(t){return Uint8Array.from(t)}function Np(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const lB=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),UEe=lB("expand 16-byte k"),FEe=lB("expand 32-byte k"),zEe=au(UEe),qEe=au(FEe);function $t(t,e){return t<<e|t>>>32-e}function j4(t){return t.byteOffset%4===0}const Dw=64,WEe=16,uB=2**32-1,tT=new Uint32Array;function HEe(t,e,r,n,i,s,o,a){const c=i.length,l=new Uint8Array(Dw),u=au(l),h=j4(i)&&j4(s),d=h?au(i):tT,g=h?au(s):tT;for(let m=0;m<c;o++){if(t(e,r,n,u,o,a),o>=uB)throw new Error("arx: counter overflow");const v=Math.min(Dw,c-m);if(h&&v===Dw){const $=m/4;if(m%4!==0)throw new Error("arx: invalid block position");for(let _=0,S;_<WEe;_++)S=$+_,g[S]=d[S]^u[_];m+=Dw;continue}for(let $=0,_;$<v;$++)_=m+$,s[_]=i[_]^l[$];m+=v}}function KEe(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=DEe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return P3(i),P3(o),JM(s),JM(r),(a,c,l,u,h=0)=>{zs(a),zs(c),zs(l);const d=l.length;if(u===void 0&&(u=new Uint8Array(d)),zs(u),P3(h),h<0||h>=uB)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const g=[];let m=a.length,v,$;if(m===32)g.push(v=B4(a)),$=qEe;else if(m===16&&r)v=new Uint8Array(32),v.set(a),v.set(a,16),$=zEe,g.push(v);else throw new Error(`arx: invalid 32-byte key, got length=${m}`);j4(c)||g.push(c=B4(c));const _=au(v);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n($,_,au(c.subarray(0,16)),_),c=c.subarray(16)}const S=16-i;if(S!==c.length)throw new Error(`arx: nonce must be ${S} or 16 bytes`);if(S!==12){const T=new Uint8Array(12);T.set(c,s?0:12-c.length),c=T,g.push(c)}const A=au(c);return HEe(t,$,_,A,l,u,h,o),Np(...g),u}}const oi=(t,e)=>t[e++]&255|(t[e++]&255)<<8;let VEe=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=L4(e),zs(e,32);const r=oi(e,0),n=oi(e,2),i=oi(e,4),s=oi(e,6),o=oi(e,8),a=oi(e,10),c=oi(e,12),l=oi(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=oi(e,16+2*u)}process(e,r,n=!1){const i=n?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],h=o[4],d=o[5],g=o[6],m=o[7],v=o[8],$=o[9],_=oi(e,r+0),S=oi(e,r+2),A=oi(e,r+4),T=oi(e,r+6),k=oi(e,r+8),R=oi(e,r+10),L=oi(e,r+12),F=oi(e,r+14);let B=s[0]+(_&8191),q=s[1]+((_>>>13|S<<3)&8191),D=s[2]+((S>>>10|A<<6)&8191),E=s[3]+((A>>>7|T<<9)&8191),b=s[4]+((T>>>4|k<<12)&8191),f=s[5]+(k>>>1&8191),p=s[6]+((k>>>14|R<<2)&8191),w=s[7]+((R>>>11|L<<5)&8191),N=s[8]+((L>>>8|F<<8)&8191),M=s[9]+(F>>>5|i),x=0,y=x+B*a+q*(5*$)+D*(5*v)+E*(5*m)+b*(5*g);x=y>>>13,y&=8191,y+=f*(5*d)+p*(5*h)+w*(5*u)+N*(5*l)+M*(5*c),x+=y>>>13,y&=8191;let C=x+B*c+q*a+D*(5*$)+E*(5*v)+b*(5*m);x=C>>>13,C&=8191,C+=f*(5*g)+p*(5*d)+w*(5*h)+N*(5*u)+M*(5*l),x+=C>>>13,C&=8191;let I=x+B*l+q*c+D*a+E*(5*$)+b*(5*v);x=I>>>13,I&=8191,I+=f*(5*m)+p*(5*g)+w*(5*d)+N*(5*h)+M*(5*u),x+=I>>>13,I&=8191;let j=x+B*u+q*l+D*c+E*a+b*(5*$);x=j>>>13,j&=8191,j+=f*(5*v)+p*(5*m)+w*(5*g)+N*(5*d)+M*(5*h),x+=j>>>13,j&=8191;let K=x+B*h+q*u+D*l+E*c+b*a;x=K>>>13,K&=8191,K+=f*(5*$)+p*(5*v)+w*(5*m)+N*(5*g)+M*(5*d),x+=K>>>13,K&=8191;let V=x+B*d+q*h+D*u+E*l+b*c;x=V>>>13,V&=8191,V+=f*a+p*(5*$)+w*(5*v)+N*(5*m)+M*(5*g),x+=V>>>13,V&=8191;let te=x+B*g+q*d+D*h+E*u+b*l;x=te>>>13,te&=8191,te+=f*c+p*a+w*(5*$)+N*(5*v)+M*(5*m),x+=te>>>13,te&=8191;let se=x+B*m+q*g+D*d+E*h+b*u;x=se>>>13,se&=8191,se+=f*l+p*c+w*a+N*(5*$)+M*(5*v),x+=se>>>13,se&=8191;let ce=x+B*v+q*m+D*g+E*d+b*h;x=ce>>>13,ce&=8191,ce+=f*u+p*l+w*c+N*a+M*(5*$),x+=ce>>>13,ce&=8191;let ie=x+B*$+q*v+D*m+E*g+b*d;x=ie>>>13,ie&=8191,ie+=f*h+p*u+w*l+N*c+M*a,x+=ie>>>13,ie&=8191,x=(x<<2)+x|0,x=x+y|0,y=x&8191,x=x>>>13,C+=x,s[0]=y,s[1]=C,s[2]=I,s[3]=j,s[4]=K,s[5]=V,s[6]=te,s[7]=se,s[8]=ce,s[9]=ie}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)n[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;Np(n)}update(e){ZM(this);const{buffer:r,blockLen:n}=this;e=L4(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o===n){for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){Np(this.h,this.r,this.buffer,this.pad)}digestInto(e){ZM(this),PEe(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=n[o]>>>0,e[s++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}};function GEe(t){const e=(n,i)=>t(i).update(L4(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const YEe=GEe(t=>new VEe(t));function QEe(t,e,r,n,i,s=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],h=e[1],d=e[2],g=e[3],m=e[4],v=e[5],$=e[6],_=e[7],S=i,A=r[0],T=r[1],k=r[2],R=o,L=a,F=c,B=l,q=u,D=h,E=d,b=g,f=m,p=v,w=$,N=_,M=S,x=A,y=T,C=k;for(let j=0;j<s;j+=2)R=R+q|0,M=$t(M^R,16),f=f+M|0,q=$t(q^f,12),R=R+q|0,M=$t(M^R,8),f=f+M|0,q=$t(q^f,7),L=L+D|0,x=$t(x^L,16),p=p+x|0,D=$t(D^p,12),L=L+D|0,x=$t(x^L,8),p=p+x|0,D=$t(D^p,7),F=F+E|0,y=$t(y^F,16),w=w+y|0,E=$t(E^w,12),F=F+E|0,y=$t(y^F,8),w=w+y|0,E=$t(E^w,7),B=B+b|0,C=$t(C^B,16),N=N+C|0,b=$t(b^N,12),B=B+b|0,C=$t(C^B,8),N=N+C|0,b=$t(b^N,7),R=R+D|0,C=$t(C^R,16),w=w+C|0,D=$t(D^w,12),R=R+D|0,C=$t(C^R,8),w=w+C|0,D=$t(D^w,7),L=L+E|0,M=$t(M^L,16),N=N+M|0,E=$t(E^N,12),L=L+E|0,M=$t(M^L,8),N=N+M|0,E=$t(E^N,7),F=F+b|0,x=$t(x^F,16),f=f+x|0,b=$t(b^f,12),F=F+b|0,x=$t(x^F,8),f=f+x|0,b=$t(b^f,7),B=B+q|0,y=$t(y^B,16),p=p+y|0,q=$t(q^p,12),B=B+q|0,y=$t(y^B,8),p=p+y|0,q=$t(q^p,7);let I=0;n[I++]=o+R|0,n[I++]=a+L|0,n[I++]=c+F|0,n[I++]=l+B|0,n[I++]=u+q|0,n[I++]=h+D|0,n[I++]=d+E|0,n[I++]=g+b|0,n[I++]=m+f|0,n[I++]=v+p|0,n[I++]=$+w|0,n[I++]=_+N|0,n[I++]=S+M|0,n[I++]=A+x|0,n[I++]=T+y|0,n[I++]=k+C|0}const ZEe=KEe(QEe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),JEe=new Uint8Array(16),rT=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(JEe.subarray(r))},XEe=new Uint8Array(32);function nT(t,e,r,n,i){const s=t(e,r,XEe),o=YEe.create(s);i&&rT(o,i),rT(o,n);const a=new Uint8Array(16),c=OEe(a);eT(c,0,BigInt(i?i.length:0),!0),eT(c,8,BigInt(n.length),!0),o.update(a);const l=o.digest();return Np(s,a),l}const e3e=t=>(e,r,n)=>({encrypt(i,s){const o=i.length;s=XM(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,r,a,a,1);const c=nT(t,e,r,a,n);return s.set(c,o),Np(c),s},decrypt(i,s){s=XM(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=nT(t,e,r,o,n);if(!LEe(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,r,s,s,1),Np(c),s}}),hB=BEe({blockSize:64,nonceLength:12,tagLength:16},e3e(ZEe));let dB=class extends M5{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,N5(e);const n=Cp(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Ap(this),this.iHash.update(e),this}digestInto(e){Ap(this),E2(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const $5=(t,e,r)=>new dB(t,e).update(r).digest();$5.create=(t,e)=>new dB(t,e);function t3e(t,e,r){return N5(t),r===void 0&&(r=new Uint8Array(t.outputLen)),$5(t,Cp(r),Cp(e))}const O3=new Uint8Array([0]),iT=new Uint8Array;function r3e(t,e,r,n=32){if(N5(t),Rm(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/t.outputLen);r===void 0&&(r=iT);const s=new Uint8Array(i*t.outputLen),o=$5.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<i;l++)O3[0]=l+1,a.update(l===0?iT:c).update(r).update(O3).digestInto(c),s.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),O3.fill(0),s.slice(0,n)}const n3e=(t,e,r,n,i)=>r3e(t,t3e(t,e,r),n,i);function i3e(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function s3e(t,e,r){return t&e^~t&r}function o3e(t,e,r){return t&e^t&r^e&r}class a3e extends M5{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=$3(this.buffer)}update(e){Ap(this);const{view:r,buffer:n,blockLen:i}=this;e=Cp(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=$3(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ap(this),XL(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;i3e(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=$3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}}const c3e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Sl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),xl=new Uint32Array(64);let l3e=class extends a3e{constructor(){super(64,32,8,!1),this.A=Sl[0]|0,this.B=Sl[1]|0,this.C=Sl[2]|0,this.D=Sl[3]|0,this.E=Sl[4]|0,this.F=Sl[5]|0,this.G=Sl[6]|0,this.H=Sl[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,r,n,i,s,o,a,c]}set(e,r,n,i,s,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)xl[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=xl[h-15],g=xl[h-2],m=Ea(d,7)^Ea(d,18)^d>>>3,v=Ea(g,17)^Ea(g,19)^g>>>10;xl[h]=v+xl[h-7]+m+xl[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=Ea(a,6)^Ea(a,11)^Ea(a,25),g=u+d+s3e(a,c,l)+c3e[h]+xl[h]|0,m=(Ea(n,2)^Ea(n,13)^Ea(n,22))+o3e(n,i,s)|0;u=l,l=c,c=a,a=o+g|0,o=s,s=i,i=n,n=g+m|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){xl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const _2=eB(()=>new l3e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fB=BigInt(0);function P5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function pB(t){if(!P5(t))throw new Error("Uint8Array expected")}const u3e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function h3e(t){pB(t);let e="";for(let r=0;r<t.length;r++)e+=u3e[t[r]];return e}function d3e(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?fB:BigInt("0x"+t)}const xc={_0:48,_9:57,A:65,F:70,a:97,f:102};function sT(t){if(t>=xc._0&&t<=xc._9)return t-xc._0;if(t>=xc.A&&t<=xc.F)return t-(xc.A-10);if(t>=xc.a&&t<=xc.f)return t-(xc.a-10)}function gB(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=sT(t.charCodeAt(s)),a=sT(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function oT(t){return pB(t),d3e(h3e(Uint8Array.from(t).reverse()))}function f3e(t,e){return gB(t.toString(16).padStart(e*2,"0"))}function p3e(t,e){return f3e(t,e).reverse()}function aT(t,e,r){let n;if(typeof e=="string")try{n=gB(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(P5(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const k3=t=>typeof t=="bigint"&&fB<=t;function g3e(t,e,r){return k3(t)&&k3(e)&&k3(r)&&e<=t&&t<r}function cT(t,e,r,n){if(!g3e(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}const m3e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||P5(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function y3e(t,e,r={}){const n=(i,s,o)=>{const a=m3e[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const Rf=BigInt(0),Lw=BigInt(1);function mB(t,e){const r=t%e;return r>=Rf?r:e+r}function w3e(t,e,r){if(e<Rf)throw new Error("invalid exponent, negatives unsupported");if(r<=Rf)throw new Error("invalid modulus");if(r===Lw)return Rf;let n=Lw;for(;e>Rf;)e&Lw&&(n=n*t%r),t=t*t%r,e>>=Lw;return n}function Vo(t,e,r){let n=t;for(;e-- >Rf;)n*=n,n%=r;return n}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Ud=BigInt(0),R3=BigInt(1);function b3e(t){return y3e(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function v3e(t){const e=b3e(t),{P:r}=e,n=S=>mB(S,r),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(S=>S),c=e.powPminus2||(S=>w3e(S,r-BigInt(2),r));function l(S,A,T){const k=n(S*(A-T));return A=n(A-k),T=n(T+k),[A,T]}const u=(e.a-BigInt(2))/BigInt(4);function h(S,A){cT("u",S,Ud,r),cT("scalar",A,Ud,r);const T=A,k=S;let R=R3,L=Ud,F=S,B=R3,q=Ud,D;for(let b=BigInt(i-1);b>=Ud;b--){const f=T>>b&R3;q^=f,D=l(q,R,F),R=D[0],F=D[1],D=l(q,L,B),L=D[0],B=D[1],q=f;const p=R+L,w=n(p*p),N=R-L,M=n(N*N),x=w-M,y=F+B,C=F-B,I=n(C*p),j=n(y*N),K=I+j,V=I-j;F=n(K*K),B=n(k*n(V*V)),R=n(w*M),L=n(x*(w+n(u*x)))}D=l(q,R,F),R=D[0],F=D[1],D=l(q,L,B),L=D[0],B=D[1];const E=c(L);return n(R*E)}function d(S){return p3e(n(S),s)}function g(S){const A=aT("u coordinate",S,s);return o===32&&(A[31]&=127),oT(A)}function m(S){const A=aT("scalar",S),T=A.length;if(T!==s&&T!==o){let k=""+s+" or "+o;throw new Error("invalid scalar, expected "+k+" bytes, got "+T)}return oT(a(A))}function v(S,A){const T=g(A),k=m(S),R=h(T,k);if(R===Ud)throw new Error("invalid private or public key received");return d(R)}const $=d(e.Gu);function _(S){return v(S,$)}return{scalarMult:v,scalarMultBase:_,getSharedSecret:(S,A)=>v(S,A),getPublicKey:S=>_(S),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:$}}const U4=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const E3e=BigInt(1),lT=BigInt(2),_3e=BigInt(3),S3e=BigInt(5);BigInt(8);function x3e(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=U4,o=t*t%s*t%s,a=Vo(o,lT,s)*o%s,c=Vo(a,E3e,s)*t%s,l=Vo(c,S3e,s)*c%s,u=Vo(l,e,s)*l%s,h=Vo(u,r,s)*u%s,d=Vo(h,n,s)*h%s,g=Vo(d,i,s)*d%s,m=Vo(g,i,s)*d%s,v=Vo(m,e,s)*l%s;return{pow_p_5_8:Vo(v,lT,s)*t%s,b2:o}}function I3e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const F4=v3e({P:U4,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=U4,{pow_p_5_8:r,b2:n}=x3e(t);return mB(Vo(r,_3e,e)*n,e)},adjustScalarBytes:I3e,randomBytes:Sy}),yB="base10",Hi="base16",Ql="base64pad",B0="base64url",xy="utf8",wB=0,Hc=1,Iy=2,A3e=0,uT=1,Mg=12,O5=32;function C3e(){const t=F4.utils.randomPrivateKey(),e=F4.getPublicKey(t);return{privateKey:Kt(t,Hi),publicKey:Kt(e,Hi)}}function z4(){const t=Sy(O5);return Kt(t,Hi)}function N3e(t,e){const r=F4.getSharedSecret(Kr(t,Hi),Kr(e,Hi)),n=n3e(_2,r,void 0,void 0,O5);return Kt(n,Hi)}function L1(t){const e=_2(Kr(t,Hi));return Kt(e,Hi)}function Ca(t){const e=_2(Kr(t,xy));return Kt(e,Hi)}function bB(t){return Kr(`${t}`,yB)}function jh(t){return Number(Kt(t,yB))}function M3e(t){const e=bB(typeof t.type<"u"?t.type:wB);if(jh(e)===Hc&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Kr(t.senderPublicKey,Hi):void 0,n=typeof t.iv<"u"?Kr(t.iv,Hi):Sy(Mg),i=Kr(t.symKey,Hi),s=hB(i,n).encrypt(Kr(t.message,xy));return vB({type:e,sealed:s,iv:n,senderPublicKey:r,encoding:t.encoding})}function T3e(t){const e=Kr(t.symKey,Hi),{sealed:r,iv:n}=Lm(t),i=hB(e,n).decrypt(r);if(i===null)throw new Error("Failed to decrypt");return Kt(i,xy)}function $3e(t,e){const r=bB(Iy),n=Sy(Mg),i=Kr(t,xy);return vB({type:r,sealed:i,iv:n,encoding:e})}function P3e(t,e){const{sealed:r}=Lm({encoded:t,encoding:e});return Kt(r,xy)}function vB(t){const{encoding:e=Ql}=t;if(jh(t.type)===Iy)return Kt(Gf([t.type,t.sealed]),e);if(jh(t.type)===Hc){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Kt(Gf([t.type,t.senderPublicKey,t.iv,t.sealed]),e)}return Kt(Gf([t.type,t.iv,t.sealed]),e)}function Lm(t){const{encoded:e,encoding:r=Ql}=t,n=Kr(e,r),i=n.slice(A3e,uT),s=uT;if(jh(i)===Hc){const l=s+O5,u=l+Mg,h=n.slice(s,l),d=n.slice(l,u),g=n.slice(u);return{type:i,sealed:g,iv:d,senderPublicKey:h}}if(jh(i)===Iy){const l=n.slice(s),u=Sy(Mg);return{type:i,sealed:l,iv:u}}const o=s+Mg,a=n.slice(s,o),c=n.slice(o);return{type:i,sealed:c,iv:a}}function O3e(t,e){const r=Lm({encoded:t,encoding:e==null?void 0:e.encoding});return EB({type:jh(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Kt(r.senderPublicKey,Hi):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function EB(t){const e=(t==null?void 0:t.type)||wB;if(e===Hc){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function hT(t){return t.type===Hc&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function dT(t){return t.type===Iy}function k3e(t){return new e5.ec("p256").keyFromPublic({x:Buffer.from(t.x,"base64").toString("hex"),y:Buffer.from(t.y,"base64").toString("hex")},"hex")}function R3e(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;return r>0&&(e+="=".repeat(4-r)),e}function D3e(t){return Buffer.from(R3e(t),"base64")}function L3e(t,e){const[r,n,i]=t.split("."),s=D3e(i);if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),c=`${r}.${n}`,l=_2(c),u=k3e(e),h=Kt(l,Hi);if(!u.verify(h,{r:o,s:a}))throw new Error("Invalid signature");return gp(t).payload}const B3e="irn";function ev(t){return(t==null?void 0:t.relay)||{protocol:B3e}}function cg(t){const e=UR[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function j3e(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function fT(t){if(!t.includes("wc:")){const l=JL(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(s),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:U3e(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:j3e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function U3e(t){return t.startsWith("//")?t.substring(2):t}function F3e(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=i,o=r+e+s;t[s]&&(n[o]=t[s])}),n}function pT(t){const e=new URLSearchParams,r=F3e(t.relay);Object.keys(r).sort().forEach(i=>{e.set(i,r[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function Bw(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function t0(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function z3e(t){const e=[];return Object.values(t).forEach(r=>{e.push(...t0(r.accounts))}),e}function q3e(t,e){const r=[];return Object.values(t).forEach(n=>{t0(n.accounts).includes(e)&&r.push(...n.methods)}),r}function W3e(t,e){const r=[];return Object.values(t).forEach(n=>{t0(n.accounts).includes(e)&&r.push(...n.events)}),r}function k5(t){return t.includes(":")}function lg(t){return k5(t)?t.split(":")[0]:t}function H3e(t){const e={};return t==null||t.forEach(r=>{var n;const[i,s]=r.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(r),(n=e[i].chains)==null||n.push(`${i}:${s}`)}),e}function gT(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=H3e(e);for(const[n,i]of Object.entries(r))i.methods?i.methods=R1(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return r}const K3e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},V3e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ye(t,e){const{message:r,code:n}=V3e[t];return{message:e?`${r} ${e}`:r,code:n}}function sr(t,e){const{message:r,code:n}=K3e[t];return{message:e?`${r} ${e}`:r,code:n}}function Uh(t,e){return!!Array.isArray(t)}function Bm(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function mi(t){return typeof t>"u"}function Sn(t,e){return e&&mi(t)?!0:typeof t=="string"&&!!t.trim().length}function R5(t,e){return e&&mi(t)?!0:typeof t=="number"&&!isNaN(t)}function G3e(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return dh(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=t0(a),h=r[o];(!dh(VL(o,h),u)||!dh(h.methods,c)||!dh(h.events,l))&&(s=!1)}),s):!1}function tv(t){return Sn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Y3e(t){if(Sn(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&tv(r)}}return!1}function Q3e(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(Sn(t,!1)){if(e(t))return!0;const r=JL(t);return e(r)}}catch{}return!1}function Z3e(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function J3e(t){return t==null?void 0:t.topic}function X3e(t,e){let r=null;return Sn(t==null?void 0:t.publicKey,!1)||(r=ye("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function mT(t){let e=!0;return Uh(t)?t.length&&(e=t.every(r=>Sn(r,!1))):e=!1,e}function e_e(t,e,r){let n=null;return Uh(e)&&e.length?e.forEach(i=>{n||tv(i)||(n=sr("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):tv(t)||(n=sr("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function t_e(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=e_e(i,VL(i,s),`${e} ${r}`);o&&(n=o)}),n}function r_e(t,e){let r=null;return Uh(t)?t.forEach(n=>{r||Y3e(n)||(r=sr("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=sr("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function n_e(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=r_e(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function i_e(t,e){let r=null;return mT(t==null?void 0:t.methods)?mT(t==null?void 0:t.events)||(r=sr("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=sr("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function _B(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=i_e(n,`${e}, namespace`);i&&(r=i)}),r}function s_e(t,e,r){let n=null;if(t&&Bm(t)){const i=_B(t,e);i&&(n=i);const s=t_e(t,e,r);s&&(n=s)}else n=ye("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function D3(t,e){let r=null;if(t&&Bm(t)){const n=_B(t,e);n&&(r=n);const i=n_e(t,e);i&&(r=i)}else r=ye("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function SB(t){return Sn(t.protocol,!0)}function o_e(t,e){let r=!1;return t?t&&Uh(t)&&t.length&&t.forEach(n=>{r=SB(n)}):r=!0,r}function a_e(t){return typeof t=="number"}function gs(t){return typeof t<"u"&&typeof t!==null}function c_e(t){return!(!t||typeof t!="object"||!t.code||!R5(t.code,!1)||!t.message||!Sn(t.message,!1))}function l_e(t){return!(mi(t)||!Sn(t.method,!1))}function u_e(t){return!(mi(t)||mi(t.result)&&mi(t.error)||!R5(t.id,!1)||!Sn(t.jsonrpc,!1))}function h_e(t){return!(mi(t)||!Sn(t.name,!1))}function yT(t,e){return!(!tv(e)||!z3e(t).includes(e))}function d_e(t,e,r){return Sn(r,!1)?q3e(t,e).includes(r):!1}function f_e(t,e,r){return Sn(r,!1)?W3e(t,e).includes(r):!1}function wT(t,e,r){let n=null;const i=p_e(t),s=g_e(e),o=Object.keys(i),a=Object.keys(s),c=bT(Object.keys(t)),l=bT(Object.keys(e)),u=c.filter(h=>!l.includes(h));return u.length&&(n=ye("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),dh(o,a)||(n=ye("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(h=>{if(!h.includes(":")||n)return;const d=t0(e[h].accounts);d.includes(h)||(n=ye("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${d.toString()}`))}),o.forEach(h=>{n||(dh(i[h].methods,s[h].methods)?dh(i[h].events,s[h].events)||(n=ye("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${h}`)):n=ye("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${h}`))}),n}function p_e(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function bT(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function g_e(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=t0(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function m_e(t,e){return R5(t,!1)&&t<=e.max&&t>=e.min}function vT(){const t=_y();return new Promise(e=>{switch(t){case Ks.browser:e(y_e());break;case Ks.reactNative:e(w_e());break;case Ks.node:e(b_e());break;default:e(!0)}})}function y_e(){return Ey()&&(navigator==null?void 0:navigator.onLine)}async function w_e(){if(Iu()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function b_e(){return!0}function v_e(t){switch(_y()){case Ks.browser:E_e(t);break;case Ks.reactNative:__e(t);break}}function E_e(t){!Iu()&&Ey()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function __e(t){Iu()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const L3={};class j0{static get(e){return L3[e]}static set(e,r){L3[e]=r}static delete(e){delete L3[e]}}const xB="wc",IB=2,q4="core",Wa=`${xB}@2:${q4}:`,S_e={logger:"error"},x_e={database:":memory:"},I_e="crypto",ET="client_ed25519_seed",A_e=J.ONE_DAY,C_e="keychain",N_e="0.3",M_e="messages",T_e="0.3",_T=J.SIX_HOURS,$_e="publisher",AB="irn",P_e="error",CB="wss://relay.walletconnect.org",O_e="relayer",Yn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},k_e="_subscription",fo={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},R_e=.1,W4="2.19.1",jr={link_mode:"link_mode",relay:"relay"},B1={inbound:"inbound",outbound:"outbound"},D_e="0.3",L_e="WALLETCONNECT_CLIENT_ID",ST="WALLETCONNECT_LINK_MODE_APPS",Os={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},B_e="subscription",j_e="0.3",U_e="pairing",F_e="0.3",U0={wc_pairingDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:J.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:J.ONE_DAY,prompt:!1,tag:0},res:{ttl:J.ONE_DAY,prompt:!1,tag:0}}},Zu={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},qo={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},z_e="history",q_e="0.3",W_e="expirer",yo={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},H_e="0.3",K_e="verify-api",V_e="https://verify.walletconnect.com",NB="https://verify.walletconnect.org",Tg=NB,G_e=`${Tg}/v3`,Y_e=[V_e,NB],Q_e="echo",Z_e="https://echo.walletconnect.com",Ia={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Cc={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Wo={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Ou={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},ku={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},F0={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},J_e=.1,X_e="event-client",eSe=86400,tSe="https://pulse.walletconnect.org/batch";function rSe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var v=0,$=0,_=0,S=m.length;_!==S&&m[_]===0;)_++,v++;for(var A=(S-_)*u+1>>>0,T=new Uint8Array(A);_!==S;){for(var k=m[_],R=0,L=A-1;(k!==0||R<$)&&L!==-1;L--,R++)k+=256*T[L]>>>0,T[L]=k%a>>>0,k=k/a>>>0;if(k!==0)throw new Error("Non-zero carry");$=R,_++}for(var F=A-$;F!==A&&T[F]===0;)F++;for(var B=c.repeat(v);F<A;++F)B+=t.charAt(T[F]);return B}function d(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var v=0;if(m[v]!==" "){for(var $=0,_=0;m[v]===c;)$++,v++;for(var S=(m.length-v)*l+1>>>0,A=new Uint8Array(S);m[v];){var T=r[m.charCodeAt(v)];if(T===255)return;for(var k=0,R=S-1;(T!==0||k<_)&&R!==-1;R--,k++)T+=a*A[R]>>>0,A[R]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");_=k,v++}if(m[v]!==" "){for(var L=S-_;L!==S&&A[L]===0;)L++;for(var F=new Uint8Array($+(S-L)),B=$;L!==S;)F[B++]=A[L++];return F}}}function g(m){var v=d(m);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:g}}var nSe=rSe,iSe=nSe;const MB=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},sSe=t=>new TextEncoder().encode(t),oSe=t=>new TextDecoder().decode(t);class aSe{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class cSe{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return TB(this,e)}}class lSe{constructor(e){this.decoders=e}or(e){return TB(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const TB=(t,e)=>new lSe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class uSe{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new aSe(e,r,n),this.decoder=new cSe(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const S2=({name:t,prefix:e,encode:r,decode:n})=>new uSe(t,e,r,n),Ay=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=iSe(r,e);return S2({prefix:t,name:e,encode:n,decode:s=>MB(i(s))})},hSe=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},dSe=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Ai=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>S2({prefix:e,name:t,encode(i){return dSe(i,n,r)},decode(i){return hSe(i,n,r,t)}}),fSe=S2({prefix:"\0",name:"identity",encode:t=>oSe(t),decode:t=>sSe(t)});var pSe=Object.freeze({__proto__:null,identity:fSe});const gSe=Ai({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var mSe=Object.freeze({__proto__:null,base2:gSe});const ySe=Ai({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var wSe=Object.freeze({__proto__:null,base8:ySe});const bSe=Ay({prefix:"9",name:"base10",alphabet:"0123456789"});var vSe=Object.freeze({__proto__:null,base10:bSe});const ESe=Ai({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),_Se=Ai({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var SSe=Object.freeze({__proto__:null,base16:ESe,base16upper:_Se});const xSe=Ai({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ISe=Ai({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ASe=Ai({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),CSe=Ai({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),NSe=Ai({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),MSe=Ai({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),TSe=Ai({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),$Se=Ai({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),PSe=Ai({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var OSe=Object.freeze({__proto__:null,base32:xSe,base32upper:ISe,base32pad:ASe,base32padupper:CSe,base32hex:NSe,base32hexupper:MSe,base32hexpad:TSe,base32hexpadupper:$Se,base32z:PSe});const kSe=Ay({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),RSe=Ay({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var DSe=Object.freeze({__proto__:null,base36:kSe,base36upper:RSe});const LSe=Ay({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),BSe=Ay({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var jSe=Object.freeze({__proto__:null,base58btc:LSe,base58flickr:BSe});const USe=Ai({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),FSe=Ai({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),zSe=Ai({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),qSe=Ai({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var WSe=Object.freeze({__proto__:null,base64:USe,base64pad:FSe,base64url:zSe,base64urlpad:qSe});const $B=Array.from(""),HSe=$B.reduce((t,e,r)=>(t[r]=e,t),[]),KSe=$B.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function VSe(t){return t.reduce((e,r)=>(e+=HSe[r],e),"")}function GSe(t){const e=[];for(const r of t){const n=KSe[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const YSe=S2({prefix:"",name:"base256emoji",encode:VSe,decode:GSe});var QSe=Object.freeze({__proto__:null,base256emoji:YSe}),ZSe=PB,xT=128,JSe=-128,XSe=Math.pow(2,31);function PB(t,e,r){e=e||[],r=r||0;for(var n=r;t>=XSe;)e[r++]=t&255|xT,t/=128;for(;t&JSe;)e[r++]=t&255|xT,t>>>=7;return e[r]=t|0,PB.bytes=r-n+1,e}var e4e=H4,t4e=128,IT=127;function H4(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw H4.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&IT)<<i:(o&IT)*Math.pow(2,i),i+=7}while(o>=t4e);return H4.bytes=s-n,r}var r4e=Math.pow(2,7),n4e=Math.pow(2,14),i4e=Math.pow(2,21),s4e=Math.pow(2,28),o4e=Math.pow(2,35),a4e=Math.pow(2,42),c4e=Math.pow(2,49),l4e=Math.pow(2,56),u4e=Math.pow(2,63),h4e=function(t){return t<r4e?1:t<n4e?2:t<i4e?3:t<s4e?4:t<o4e?5:t<a4e?6:t<c4e?7:t<l4e?8:t<u4e?9:10},d4e={encode:ZSe,decode:e4e,encodingLength:h4e},OB=d4e;const AT=(t,e,r=0)=>(OB.encode(t,e,r),e),CT=t=>OB.encodingLength(t),K4=(t,e)=>{const r=e.byteLength,n=CT(t),i=n+CT(r),s=new Uint8Array(i+r);return AT(t,s,0),AT(r,s,n),s.set(e,i),new f4e(t,r,e,s)};class f4e{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const kB=({name:t,code:e,encode:r})=>new p4e(t,e,r);class p4e{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?K4(this.code,r):r.then(n=>K4(this.code,n))}else throw Error("Unknown type, must be binary type")}}const RB=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),g4e=kB({name:"sha2-256",code:18,encode:RB("SHA-256")}),m4e=kB({name:"sha2-512",code:19,encode:RB("SHA-512")});var y4e=Object.freeze({__proto__:null,sha256:g4e,sha512:m4e});const DB=0,w4e="identity",LB=MB,b4e=t=>K4(DB,LB(t)),v4e={code:DB,name:w4e,encode:LB,digest:b4e};var E4e=Object.freeze({__proto__:null,identity:v4e});new TextEncoder,new TextDecoder;const NT={...pSe,...mSe,...wSe,...vSe,...SSe,...OSe,...DSe,...jSe,...WSe,...QSe};({...y4e,...E4e});function _4e(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function BB(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const MT=BB("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),B3=BB("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=_4e(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),S4e={utf8:MT,"utf-8":MT,hex:NT.base16,latin1:B3,ascii:B3,binary:B3,...NT};function x4e(t,e="utf8"){const r=S4e[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var I4e=Object.defineProperty,A4e=(t,e,r)=>e in t?I4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_a=(t,e,r)=>A4e(t,typeof e!="symbol"?e+"":e,r);class C4e{constructor(e,r){this.core=e,this.logger=r,_a(this,"keychain",new Map),_a(this,"name",C_e),_a(this,"version",N_e),_a(this,"initialized",!1),_a(this,"storagePrefix",Wa),_a(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),_a(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),_a(this,"set",async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()}),_a(this,"get",n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=ye("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i}),_a(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=Vt(r,this.name)}get context(){return dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,k4(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?R4(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var N4e=Object.defineProperty,M4e=(t,e,r)=>e in t?N4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ai=(t,e,r)=>M4e(t,typeof e!="symbol"?e+"":e,r);class T4e{constructor(e,r,n){this.core=e,this.logger=r,ai(this,"name",I_e),ai(this,"keychain"),ai(this,"randomSessionIdentifier",z4()),ai(this,"initialized",!1),ai(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),ai(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),ai(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=jb(i);return QI(s.publicKey)}),ai(this,"generateKeyPair",()=>{this.isInitialized();const i=C3e();return this.setPrivateKey(i.publicKey,i.privateKey)}),ai(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=jb(s),a=this.randomSessionIdentifier;return await G7(a,i,A_e,o)}),ai(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=N3e(a,s);return this.setSymKey(c,o)}),ai(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||L1(i);return await this.keychain.set(o,i),o}),ai(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),ai(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),ai(this,"encode",async(i,s,o)=>{this.isInitialized();const a=EB(o),c=Mo(s);if(dT(a))return $3e(c,o==null?void 0:o.encoding);if(hT(a)){const d=a.senderPublicKey,g=a.receiverPublicKey;i=await this.generateSharedKey(d,g)}const l=this.getSymKey(i),{type:u,senderPublicKey:h}=a;return M3e({type:u,symKey:l,message:c,senderPublicKey:h,encoding:o==null?void 0:o.encoding})}),ai(this,"decode",async(i,s,o)=>{this.isInitialized();const a=O3e(s,o);if(dT(a)){const c=P3e(s,o==null?void 0:o.encoding);return la(c)}if(hT(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=T3e({symKey:c,encoded:s,encoding:o==null?void 0:o.encoding});return la(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),ai(this,"getPayloadType",(i,s=Ql)=>{const o=Lm({encoded:i,encoding:s});return jh(o.type)}),ai(this,"getPayloadSenderPublicKey",(i,s=Ql)=>{const o=Lm({encoded:i,encoding:s});return o.senderPublicKey?Kt(o.senderPublicKey,Hi):void 0}),this.core=e,this.logger=Vt(r,this.name),this.keychain=n||new C4e(this.core,this.logger)}get context(){return dr(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(ET)}catch{e=z4(),await this.keychain.set(ET,e)}return x4e(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var $4e=Object.defineProperty,P4e=Object.defineProperties,O4e=Object.getOwnPropertyDescriptors,TT=Object.getOwnPropertySymbols,k4e=Object.prototype.hasOwnProperty,R4e=Object.prototype.propertyIsEnumerable,V4=(t,e,r)=>e in t?$4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,D4e=(t,e)=>{for(var r in e||(e={}))k4e.call(e,r)&&V4(t,r,e[r]);if(TT)for(var r of TT(e))R4e.call(e,r)&&V4(t,r,e[r]);return t},L4e=(t,e)=>P4e(t,O4e(e)),$s=(t,e,r)=>V4(t,typeof e!="symbol"?e+"":e,r);class B4e extends bbe{constructor(e,r){super(e,r),this.logger=e,this.core=r,$s(this,"messages",new Map),$s(this,"messagesWithoutClientAck",new Map),$s(this,"name",M_e),$s(this,"version",T_e),$s(this,"initialized",!1),$s(this,"storagePrefix",Wa),$s(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),$s(this,"set",async(n,i,s)=>{this.isInitialized();const o=Ca(i);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(n,a),s===B1.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,L4e(D4e({},c),{[o]:i}))}return await this.persist(),o}),$s(this,"get",n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i}),$s(this,"getWithoutAck",n=>{this.isInitialized();const i={};for(const s of n){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),$s(this,"has",(n,i)=>{this.isInitialized();const s=this.get(n),o=Ca(i);return typeof s[o]<"u"}),$s(this,"ack",async(n,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(n);if(typeof s>"u")return;const o=Ca(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,s),await this.persist()}),$s(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=Vt(e,this.name),this.core=r}get context(){return dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,k4(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,k4(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?R4(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?R4(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var j4e=Object.defineProperty,U4e=Object.defineProperties,F4e=Object.getOwnPropertyDescriptors,$T=Object.getOwnPropertySymbols,z4e=Object.prototype.hasOwnProperty,q4e=Object.prototype.propertyIsEnumerable,G4=(t,e,r)=>e in t?j4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,jw=(t,e)=>{for(var r in e||(e={}))z4e.call(e,r)&&G4(t,r,e[r]);if($T)for(var r of $T(e))q4e.call(e,r)&&G4(t,r,e[r]);return t},j3=(t,e)=>U4e(t,F4e(e)),Ho=(t,e,r)=>G4(t,typeof e!="symbol"?e+"":e,r);class W4e extends vbe{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Ho(this,"events",new Dn.EventEmitter),Ho(this,"name",$_e),Ho(this,"queue",new Map),Ho(this,"publishTimeout",J.toMiliseconds(J.ONE_MINUTE)),Ho(this,"initialPublishTimeout",J.toMiliseconds(J.ONE_SECOND*15)),Ho(this,"needsTransportRestart",!1),Ho(this,"publish",async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});const a=(s==null?void 0:s.ttl)||_T,c=ev(s),l=(s==null?void 0:s.prompt)||!1,u=(s==null?void 0:s.tag)||0,h=(s==null?void 0:s.id)||Hs().toString(),d={topic:n,message:i,opts:{ttl:a,relay:c,prompt:l,tag:u,id:h,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}},g=`Failed to publish payload, please try again. id:${h} tag:${u}`;try{const m=new Promise(async v=>{const $=({id:S})=>{d.opts.id===S&&(this.removeRequestFromQueue(S),this.relayer.events.removeListener(Yn.publish,$),v(d))};this.relayer.events.on(Yn.publish,$);const _=Yl(new Promise((S,A)=>{this.rpcPublish({topic:n,message:i,ttl:a,prompt:l,tag:u,id:h,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}).then(S).catch(T=>{this.logger.warn(T,T==null?void 0:T.message),A(T)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${h} tag:${u}`);try{await _,this.events.removeListener(Yn.publish,$)}catch(S){this.queue.set(h,j3(jw({},d),{attempt:1})),this.logger.warn(S,S==null?void 0:S.message)}});this.logger.trace({type:"method",method:"publish",params:{id:h,topic:n,message:i,opts:s}}),await Yl(m,this.publishTimeout,g)}catch(m){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(m),(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw m}finally{this.queue.delete(h)}}),Ho(this,"on",(n,i)=>{this.events.on(n,i)}),Ho(this,"once",(n,i)=>{this.events.once(n,i)}),Ho(this,"off",(n,i)=>{this.events.off(n,i)}),Ho(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.relayer=e,this.logger=Vt(r,this.name),this.registerEventListeners()}get context(){return dr(this.logger)}async rpcPublish(e){var r,n,i,s;const{topic:o,message:a,ttl:c=_T,prompt:l,tag:u,id:h,attestation:d,tvf:g}=e,m={method:cg(ev().protocol).publish,params:jw({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:d},g),id:h};mi((r=m.params)==null?void 0:r.prompt)&&((n=m.params)==null||delete n.prompt),mi((i=m.params)==null?void 0:i.tag)&&((s=m.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:m});const v=await this.relayer.request(m);return this.relayer.events.emit(Yn.publish,e),this.logger.debug("Successfully Published Payload"),v}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const n=e.attempt+1;this.queue.set(r,j3(jw({},e),{attempt:n}));const{topic:i,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),await this.rpcPublish(j3(jw({},e),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(da.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Yn.connection_stalled);return}this.checkQueue()}),this.relayer.on(Yn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var H4e=Object.defineProperty,K4e=(t,e,r)=>e in t?H4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fd=(t,e,r)=>K4e(t,typeof e!="symbol"?e+"":e,r);class V4e{constructor(){Fd(this,"map",new Map),Fd(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),Fd(this,"get",e=>this.map.get(e)||[]),Fd(this,"exists",(e,r)=>this.get(e).includes(r)),Fd(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),Fd(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var G4e=Object.defineProperty,Y4e=Object.defineProperties,Q4e=Object.getOwnPropertyDescriptors,PT=Object.getOwnPropertySymbols,Z4e=Object.prototype.hasOwnProperty,J4e=Object.prototype.propertyIsEnumerable,Y4=(t,e,r)=>e in t?G4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,z0=(t,e)=>{for(var r in e||(e={}))Z4e.call(e,r)&&Y4(t,r,e[r]);if(PT)for(var r of PT(e))J4e.call(e,r)&&Y4(t,r,e[r]);return t},U3=(t,e)=>Y4e(t,Q4e(e)),ur=(t,e,r)=>Y4(t,typeof e!="symbol"?e+"":e,r);class X4e extends Sbe{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,ur(this,"subscriptions",new Map),ur(this,"topicMap",new V4e),ur(this,"events",new Dn.EventEmitter),ur(this,"name",B_e),ur(this,"version",j_e),ur(this,"pending",new Map),ur(this,"cached",[]),ur(this,"initialized",!1),ur(this,"storagePrefix",Wa),ur(this,"subscribeTimeout",J.toMiliseconds(J.ONE_MINUTE)),ur(this,"initialSubscribeTimeout",J.toMiliseconds(J.ONE_SECOND*15)),ur(this,"clientId"),ur(this,"batchSubscribeTopicsLimit",500),ur(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),ur(this,"subscribe",async(n,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=ev(i),o={topic:n,relay:s,transportType:i==null?void 0:i.transportType};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),ur(this,"unsubscribe",async(n,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)}),ur(this,"isSubscribed",n=>new Promise(i=>{i(this.topicMap.topics.includes(n))})),ur(this,"isKnownTopic",n=>new Promise(i=>{i(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(s=>s.topic===n))})),ur(this,"on",(n,i)=>{this.events.on(n,i)}),ur(this,"once",(n,i)=>{this.events.once(n,i)}),ur(this,"off",(n,i)=>{this.events.off(n,i)}),ur(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),ur(this,"start",async()=>{await this.onConnect()}),ur(this,"stop",async()=>{await this.onDisconnect()}),ur(this,"restart",async()=>{await this.restore(),await this.onRestart()}),ur(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(i=>{n.push(i)}),await this.batchSubscribe(n)}),ur(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(da.pulse,async()=>{await this.checkPending()}),this.events.on(Os.created,async n=>{const i=Os.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()}),this.events.on(Os.deleted,async n=>{const i=Os.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()})}),this.relayer=e,this.logger=Vt(r,this.name),this.clientId=""}get context(){return dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=ev(n);await this.restartToComplete({topic:e,id:r,relay:i}),await this.rpcUnsubscribe(e,r,i);const s=sr("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r,n){var i;(!n||(n==null?void 0:n.transportType)===jr.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const s={method:cg(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=n==null?void 0:n.internal)==null?void 0:i.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((n==null?void 0:n.transportType)===jr.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(u=>this.logger.warn(u))},J.toMiliseconds(J.ONE_SECOND)),a;const c=new Promise(async u=>{const h=d=>{d.topic===e&&(this.events.removeListener(Os.created,h),u(d.id))};this.events.on(Os.created,h);try{const d=await Yl(new Promise((g,m)=>{this.relayer.request(s).catch(v=>{this.logger.warn(v,v==null?void 0:v.message),m(v)}).then(g)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Os.created,h),u(d)}catch{}}),l=await Yl(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Yn.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:cg(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Yl(new Promise(i=>{this.relayer.request(n).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Yn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:cg(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await Yl(new Promise((s,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Yn.connection_stalled)}return i}rpcUnsubscribe(e,r,n){const i={method:cg(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,U3(z0({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,z0({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,z0({},r)),this.topicMap.set(r.topic,e),this.events.emit(Os.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Os.deleted,U3(z0({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Os.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Os.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>U3(z0({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await U2e(J.toMiliseconds(J.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Ca(e+await this.getClientId())}}var exe=Object.defineProperty,OT=Object.getOwnPropertySymbols,txe=Object.prototype.hasOwnProperty,rxe=Object.prototype.propertyIsEnumerable,Q4=(t,e,r)=>e in t?exe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kT=(t,e)=>{for(var r in e||(e={}))txe.call(e,r)&&Q4(t,r,e[r]);if(OT)for(var r of OT(e))rxe.call(e,r)&&Q4(t,r,e[r]);return t},Pt=(t,e,r)=>Q4(t,typeof e!="symbol"?e+"":e,r);class nxe extends Ebe{constructor(e){super(e),Pt(this,"protocol","wc"),Pt(this,"version",2),Pt(this,"core"),Pt(this,"logger"),Pt(this,"events",new Dn.EventEmitter),Pt(this,"provider"),Pt(this,"messages"),Pt(this,"subscriber"),Pt(this,"publisher"),Pt(this,"name",O_e),Pt(this,"transportExplicitlyClosed",!1),Pt(this,"initialized",!1),Pt(this,"connectionAttemptInProgress",!1),Pt(this,"relayUrl"),Pt(this,"projectId"),Pt(this,"packageName"),Pt(this,"bundleId"),Pt(this,"hasExperiencedNetworkDisruption",!1),Pt(this,"pingTimeout"),Pt(this,"heartBeatTimeout",J.toMiliseconds(J.THIRTY_SECONDS+J.FIVE_SECONDS)),Pt(this,"reconnectTimeout"),Pt(this,"connectPromise"),Pt(this,"reconnectInProgress",!1),Pt(this,"requestsInFlight",[]),Pt(this,"connectTimeout",J.toMiliseconds(J.ONE_SECOND*15)),Pt(this,"request",async r=>{var n,i;this.logger.debug("Publishing Request Payload");const s=r.id||Hs().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${s}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),Pt(this,"resetPingTimeout",()=>{Jb()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null?void 0:i.terminate)==null||s.call(i)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Pt(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),Pt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Yn.connect)}),Pt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Pt(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(Yn.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Pt(this,"registerProviderListeners",()=>{this.provider.on(fo.payload,this.onPayloadHandler),this.provider.on(fo.connect,this.onConnectHandler),this.provider.on(fo.disconnect,this.onDisconnectHandler),this.provider.on(fo.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Vt(e.logger,this.name):Eu(nl({level:e.logger||P_e})),this.messages=new B4e(this.logger,e.core),this.subscriber=new X4e(this,this.logger),this.publisher=new W4e(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||CB,this.projectId=e.projectId,I2e()?this.packageName=BM():A2e()&&(this.bundleId=BM()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return dr(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:jr.relay},B1.outbound)}async subscribe(e,r){var n,i,s;this.isInitialized(),(!(r!=null&&r.transportType)||(r==null?void 0:r.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Os.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Os.created,l)}),new Promise(async(u,h)=>{a=await this.subscriber.subscribe(e,kT({internal:{throwOnFailedPublish:o}},r)).catch(d=>{o&&h(d)})||a,u()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Yl(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await vT())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const i=Mn(J.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,s)}this.events.emit(Yn.message,e),await this.recordMessageEvent(e,B1.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(fo.disconnect,s),await Yl(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(fo.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(fo.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(fo.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const i=n;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,J.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,i,s;if(Jb())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Vr(new ND(T2e({sdkVersion:W4,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:i}=e;await this.messages.set(n,i,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.warn(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Zp(e)){if(!e.method.endsWith(k_e))return;const r=e.params,{topic:n,message:i,publishedAt:s,attestation:o}=r.data,a={topic:n,message:i,publishedAt:s,transportType:jr.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(kT({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else td(e)&&this.events.emit(Yn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,B1.inbound),this.events.emit(Yn.message,e))}async acknowledgePayload(e){const r=xu(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(fo.payload,this.onPayloadHandler),this.provider.off(fo.connect,this.onConnectHandler),this.provider.off(fo.disconnect,this.onDisconnectHandler),this.provider.off(fo.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await vT();v_e(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n==null?void 0:n.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Yn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},J.toMiliseconds(R_e)))))}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function ixe(){}function RT(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function DT(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function LT(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const sxe="[object RegExp]",oxe="[object String]",axe="[object Number]",cxe="[object Boolean]",BT="[object Arguments]",lxe="[object Symbol]",uxe="[object Date]",hxe="[object Map]",dxe="[object Set]",fxe="[object Array]",pxe="[object Function]",gxe="[object ArrayBuffer]",F3="[object Object]",mxe="[object Error]",yxe="[object DataView]",wxe="[object Uint8Array]",bxe="[object Uint8ClampedArray]",vxe="[object Uint16Array]",Exe="[object Uint32Array]",_xe="[object BigUint64Array]",Sxe="[object Int8Array]",xxe="[object Int16Array]",Ixe="[object Int32Array]",Axe="[object BigInt64Array]",Cxe="[object Float32Array]",Nxe="[object Float64Array]";function Mxe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function Txe(t,e,r){return ug(t,e,void 0,void 0,void 0,void 0,r)}function ug(t,e,r,n,i,s,o){const a=o(t,e,r,n,i,s);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return $g(t,e,s,o)}return $g(t,e,s,o)}function $g(t,e,r,n){if(Object.is(t,e))return!0;let i=LT(t),s=LT(e);if(i===BT&&(i=F3),s===BT&&(s=F3),i!==s)return!1;switch(i){case oxe:return t.toString()===e.toString();case axe:{const c=t.valueOf(),l=e.valueOf();return Mxe(c,l)}case cxe:case uxe:case lxe:return Object.is(t.valueOf(),e.valueOf());case sxe:return t.source===e.source&&t.flags===e.flags;case pxe:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(i){case hxe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!ug(l,e.get(c),c,t,e,r,n))return!1;return!0}case dxe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const h=c[u],d=l.findIndex(g=>ug(h,g,void 0,t,e,r,n));if(d===-1)return!1;l.splice(d,1)}return!0}case fxe:case wxe:case bxe:case vxe:case Exe:case _xe:case Sxe:case xxe:case Ixe:case Axe:case Cxe:case Nxe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!ug(t[c],e[c],c,t,e,r,n))return!1;return!0}case gxe:return t.byteLength!==e.byteLength?!1:$g(new Uint8Array(t),new Uint8Array(e),r,n);case yxe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:$g(new Uint8Array(t),new Uint8Array(e),r,n);case mxe:return t.name===e.name&&t.message===e.message;case F3:{if(!($g(t.constructor,e.constructor,r,n)||RT(t)&&RT(e)))return!1;const c=[...Object.keys(t),...DT(t)],l=[...Object.keys(e),...DT(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const h=c[u],d=t[h];if(!Object.hasOwn(e,h))return!1;const g=e[h];if(!ug(d,g,h,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function $xe(t,e){return Txe(t,e,ixe)}var Pxe=Object.defineProperty,jT=Object.getOwnPropertySymbols,Oxe=Object.prototype.hasOwnProperty,kxe=Object.prototype.propertyIsEnumerable,Z4=(t,e,r)=>e in t?Pxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,UT=(t,e)=>{for(var r in e||(e={}))Oxe.call(e,r)&&Z4(t,r,e[r]);if(jT)for(var r of jT(e))kxe.call(e,r)&&Z4(t,r,e[r]);return t},us=(t,e,r)=>Z4(t,typeof e!="symbol"?e+"":e,r);class cd extends _be{constructor(e,r,n,i=Wa,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,us(this,"map",new Map),us(this,"version",D_e),us(this,"cached",[]),us(this,"initialized",!1),us(this,"getKey"),us(this,"storagePrefix",Wa),us(this,"recentlyDeleted",[]),us(this,"recentlyDeletedLimit",200),us(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!mi(o)?this.map.set(this.getKey(o),o):Z3e(o)?this.map.set(o.id,o):J3e(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),us(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),us(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),us(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>$xe(a[c],o[c]))):this.values)),us(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=UT(UT({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),us(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Vt(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:i}=ye("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:n}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Rxe=Object.defineProperty,Dxe=(t,e,r)=>e in t?Rxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_t=(t,e,r)=>Dxe(t,typeof e!="symbol"?e+"":e,r);class Lxe{constructor(e,r){this.core=e,this.logger=r,_t(this,"name",U_e),_t(this,"version",F_e),_t(this,"events",new Bp),_t(this,"pairings"),_t(this,"initialized",!1),_t(this,"storagePrefix",Wa),_t(this,"ignoredPayloadTypes",[Hc]),_t(this,"registeredMethods",[]),_t(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),_t(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),_t(this,"create",async n=>{this.isInitialized();const i=z4(),s=await this.core.crypto.setSymKey(i),o=Mn(J.FIVE_MINUTES),a={protocol:AB},c={topic:s,expiry:o,relay:a,active:!1,methods:n==null?void 0:n.methods},l=pT({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(Zu.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:n==null?void 0:n.transportType}),{topic:s,uri:l}}),_t(this,"pair",async n=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[Ia.pairing_started]}});this.isValidPair(n,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=fT(n.uri);i.props.properties.topic=s,i.addTrace(Ia.pairing_uri_validation_success),i.addTrace(Ia.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(Ia.existing_pairing),u.active)throw i.setError(Cc.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(Ia.pairing_not_expired)}const h=c||Mn(J.FIVE_MINUTES),d={topic:s,relay:a,expiry:h,active:!1,methods:l};this.core.expirer.set(s,h),await this.pairings.set(s,d),i.addTrace(Ia.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(Zu.create,d),i.addTrace(Ia.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(Ia.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(Cc.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(g){throw i.setError(Cc.subscribe_pairing_topic_failure),g}return i.addTrace(Ia.subscribe_pairing_topic_success),d}),_t(this,"activate",async({topic:n})=>{this.isInitialized();const i=Mn(J.FIVE_MINUTES);this.core.expirer.set(n,i),await this.pairings.update(n,{active:!0,expiry:i})}),_t(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Hu();this.events.once(Ht("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}}),_t(this,"updateExpiry",async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})}),_t(this,"updateMetadata",async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})}),_t(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),_t(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",sr("USER_DISCONNECTED")),await this.deletePairing(i))}),_t(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(i);return pT({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),_t(this,"sendRequest",async(n,i,s)=>{const o=es(i,s),a=await this.core.crypto.encode(n,o),c=U0[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),_t(this,"sendResult",async(n,i,s)=>{const o=xu(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=U0[c].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),_t(this,"sendError",async(n,i,s)=>{const o=Qp(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=U0[c]?U0[c].res:U0.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),_t(this,"deletePairing",async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,sr("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])}),_t(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(i=>kl(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))}),_t(this,"onRelayEventRequest",async n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),_t(this,"onRelayEventResponse",async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),_t(this,"onPairingPingRequest",async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(Zu.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),_t(this,"onPairingPingResponse",(n,i)=>{const{id:s}=i;setTimeout(()=>{kn(i)?this.events.emit(Ht("pairing_ping",s),{}):ln(i)&&this.events.emit(Ht("pairing_ping",s),{error:i.error})},500)}),_t(this,"onPairingDeleteRequest",async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Zu.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),_t(this,"onUnknownRpcMethodRequest",async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=sr("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}}),_t(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(sr("WC_METHOD_UNSUPPORTED",n))}),_t(this,"isValidPair",(n,i)=>{var s;if(!gs(n)){const{message:a}=ye("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError(Cc.malformed_pairing_uri),new Error(a)}if(!Q3e(n.uri)){const{message:a}=ye("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError(Cc.malformed_pairing_uri),new Error(a)}const o=fT(n==null?void 0:n.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:a}=ye("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(Cc.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=ye("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(Cc.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&J.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(Cc.pairing_expired);const{message:a}=ye("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),_t(this,"isValidPing",async n=>{if(!gs(n)){const{message:s}=ye("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),_t(this,"isValidDisconnect",async n=>{if(!gs(n)){const{message:s}=ye("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),_t(this,"isValidPairingTopic",async n=>{if(!Sn(n,!1)){const{message:i}=ye("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=ye("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(kl(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=ye("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}}),this.core=e,this.logger=Vt(r,this.name),this.pairings=new cd(this.core,this.logger,this.name,this.storagePrefix)}get context(){return dr(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Yn.message,async e=>{const{topic:r,message:n,transportType:i}=e;if(this.pairings.keys.includes(r)&&i!==jr.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const s=await this.core.crypto.decode(r,n);Zp(s)?(this.core.history.set(r,s),await this.onRelayEventRequest({topic:r,payload:s})):td(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id)),await this.core.relayer.messages.ack(r,n)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(yo.expired,async e=>{const{topic:r}=ZL(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Zu.expire,{topic:r}))})}}var Bxe=Object.defineProperty,jxe=(t,e,r)=>e in t?Bxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ci=(t,e,r)=>jxe(t,typeof e!="symbol"?e+"":e,r);class Uxe extends wbe{constructor(e,r){super(e,r),this.core=e,this.logger=r,ci(this,"records",new Map),ci(this,"events",new Dn.EventEmitter),ci(this,"name",z_e),ci(this,"version",q_e),ci(this,"cached",[]),ci(this,"initialized",!1),ci(this,"storagePrefix",Wa),ci(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ci(this,"set",(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Mn(J.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(qo.created,o)}),ci(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=ln(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(qo.updated,i))}),ci(this,"get",async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i))),ci(this,"delete",(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(qo.deleted,s)}}),this.persist()}),ci(this,"exists",async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1)),ci(this,"on",(n,i)=>{this.events.on(n,i)}),ci(this,"once",(n,i)=>{this.events.once(n,i)}),ci(this,"off",(n,i)=>{this.events.off(n,i)}),ci(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=Vt(r,this.name)}get context(){return dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:es(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(qo.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(qo.created,e=>{const r=qo.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(qo.updated,e=>{const r=qo.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(qo.deleted,e=>{const r=qo.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(da.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{J.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(qo.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Fxe=Object.defineProperty,zxe=(t,e,r)=>e in t?Fxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bi=(t,e,r)=>zxe(t,typeof e!="symbol"?e+"":e,r);class qxe extends xbe{constructor(e,r){super(e,r),this.core=e,this.logger=r,Bi(this,"expirations",new Map),Bi(this,"events",new Dn.EventEmitter),Bi(this,"name",W_e),Bi(this,"version",H_e),Bi(this,"cached",[]),Bi(this,"initialized",!1),Bi(this,"storagePrefix",Wa),Bi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Bi(this,"has",n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Bi(this,"set",(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(yo.created,{target:s,expiration:o})}),Bi(this,"get",n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)}),Bi(this,"del",n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(yo.deleted,{target:i,expiration:s})}}),Bi(this,"on",(n,i)=>{this.events.on(n,i)}),Bi(this,"once",(n,i)=>{this.events.once(n,i)}),Bi(this,"off",(n,i)=>{this.events.off(n,i)}),Bi(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=Vt(r,this.name)}get context(){return dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return $2e(e);if(typeof e=="number")return P2e(e);const{message:r}=ye("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(yo.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;J.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(yo.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(da.pulse,()=>this.checkExpirations()),this.events.on(yo.created,e=>{const r=yo.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(yo.expired,e=>{const r=yo.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(yo.deleted,e=>{const r=yo.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Wxe=Object.defineProperty,Hxe=(t,e,r)=>e in t?Wxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bn=(t,e,r)=>Hxe(t,typeof e!="symbol"?e+"":e,r);class Kxe extends Ibe{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,bn(this,"name",K_e),bn(this,"abortController"),bn(this,"isDevEnv"),bn(this,"verifyUrlV3",G_e),bn(this,"storagePrefix",Wa),bn(this,"version",IB),bn(this,"publicKey"),bn(this,"fetchPromise"),bn(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&J.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),bn(this,"register",async i=>{if(!Ey()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=il(),u=this.startAbortTimer(J.ONE_SECOND*5),h=await new Promise((d,g)=>{const m=()=>{window.removeEventListener("message",$),l.body.removeChild(v),g("attestation aborted")};this.abortController.signal.addEventListener("abort",m);const v=l.createElement("iframe");v.src=c,v.style.display="none",v.addEventListener("error",m,{signal:this.abortController.signal});const $=_=>{if(_.data&&typeof _.data=="string")try{const S=JSON.parse(_.data);if(S.type==="verify_attestation"){if(gp(S.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(v),this.abortController.signal.removeEventListener("abort",m),window.removeEventListener("message",$),d(S.attestation===null?"":S.attestation)}}catch(S){this.logger.warn(S)}};l.body.appendChild(v),window.addEventListener("message",$,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",h),h}catch(l){this.logger.warn(l)}return""}),bn(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(gp(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,c)}),bn(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(J.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),bn(this,"getVerifyUrl",i=>{let s=i||Tg;return Y_e.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Tg}`),s=Tg),s}),bn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(J.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),bn(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),bn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),bn(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),bn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),bn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),bn(this,"validateAttestation",(i,s)=>{const o=L3e(i,s.publicKey),a={hasExpired:J.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Vt(r,this.name),this.abortController=new AbortController,this.isDevEnv=C5(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return dr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),J.toMiliseconds(e))}}var Vxe=Object.defineProperty,Gxe=(t,e,r)=>e in t?Vxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,FT=(t,e,r)=>Gxe(t,typeof e!="symbol"?e+"":e,r);class Yxe extends Abe{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,FT(this,"context",Q_e),FT(this,"registerDeviceToken",async n=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=n,c=`${Z_e}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=Vt(r,this.context)}}var Qxe=Object.defineProperty,zT=Object.getOwnPropertySymbols,Zxe=Object.prototype.hasOwnProperty,Jxe=Object.prototype.propertyIsEnumerable,J4=(t,e,r)=>e in t?Qxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,q0=(t,e)=>{for(var r in e||(e={}))Zxe.call(e,r)&&J4(t,r,e[r]);if(zT)for(var r of zT(e))Jxe.call(e,r)&&J4(t,r,e[r]);return t},Un=(t,e,r)=>J4(t,typeof e!="symbol"?e+"":e,r);class Xxe extends Cbe{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,Un(this,"context",X_e),Un(this,"storagePrefix",Wa),Un(this,"storageVersion",J_e),Un(this,"events",new Map),Un(this,"shouldPersist",!1),Un(this,"init",async()=>{if(!C5())try{const i={eventId:UM(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:YL(this.core.relayer.protocol,this.core.relayer.version,W4)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),Un(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,l=UM(),u=this.core.projectId||"",h=Date.now(),d=q0({eventId:l,timestamp:h,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,d),this.shouldPersist=!0),d}),Un(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return q0(q0({},a),this.setMethods(a.eventId))}),Un(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),Un(this,"setEventListeners",()=>{this.core.heartbeat.on(da.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{J.fromMiliseconds(Date.now())-J.fromMiliseconds(i.timestamp)>eSe&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),Un(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),Un(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),Un(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),Un(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Un(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,q0(q0({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),Un(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),Un(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${tSe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${W4}${s}`,{method:"POST",body:JSON.stringify(i)})}),Un(this,"getAppDomain",()=>GL().url),this.logger=Vt(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var eIe=Object.defineProperty,qT=Object.getOwnPropertySymbols,tIe=Object.prototype.hasOwnProperty,rIe=Object.prototype.propertyIsEnumerable,X4=(t,e,r)=>e in t?eIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,WT=(t,e)=>{for(var r in e||(e={}))tIe.call(e,r)&&X4(t,r,e[r]);if(qT)for(var r of qT(e))rIe.call(e,r)&&X4(t,r,e[r]);return t},br=(t,e,r)=>X4(t,typeof e!="symbol"?e+"":e,r);let nIe=class jB extends pbe{constructor(e){var r;super(e),br(this,"protocol",xB),br(this,"version",IB),br(this,"name",q4),br(this,"relayUrl"),br(this,"projectId"),br(this,"customStoragePrefix"),br(this,"events",new Dn.EventEmitter),br(this,"logger"),br(this,"heartbeat"),br(this,"relayer"),br(this,"crypto"),br(this,"storage"),br(this,"history"),br(this,"expirer"),br(this,"pairing"),br(this,"verify"),br(this,"echoClient"),br(this,"linkModeSupportedApps"),br(this,"eventClient"),br(this,"initialized",!1),br(this,"logChunkController"),br(this,"on",(o,a)=>this.events.on(o,a)),br(this,"once",(o,a)=>this.events.once(o,a)),br(this,"off",(o,a)=>this.events.off(o,a)),br(this,"removeListener",(o,a)=>this.events.removeListener(o,a)),br(this,"dispatchEnvelope",({topic:o,message:a,sessionExists:c})=>{if(!o||!a)return;const l={topic:o,message:a,publishedAt:Date.now(),transportType:jr.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:c})}),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||CB,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const n=nl({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:S_e.logger,name:q4}),{logger:i,chunkLoggerController:s}=zI({opts:n,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=s,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,a;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((a=this.logChunkController)==null||a.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Vt(i,this.name),this.heartbeat=new h7,this.crypto=new T4e(this,this.logger,e==null?void 0:e.keychain),this.history=new Uxe(this,this.logger),this.expirer=new qxe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new $ve(WT(WT({},x_e),e==null?void 0:e.storageOptions)),this.relayer=new nxe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Lxe(this,this.logger),this.verify=new Kxe(this,this.logger,this.storage),this.echoClient=new Yxe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Xxe(this,this.logger,e==null?void 0:e.telemetryEnabled)}static async init(e){const r=new jB(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(L_e,n),r}get context(){return dr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(ST,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(ST)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const iIe=nIe,UB="wc",FB=2,zB="client",D5=`${UB}@${FB}:${zB}:`,z3={name:zB,logger:"error"},HT="WALLETCONNECT_DEEPLINK_CHOICE",sIe="proposal",KT="Proposal expired",oIe="session",zd=J.SEVEN_DAYS,aIe="engine",Fn={wc_sessionPropose:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1104},res:{ttl:J.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1106},res:{ttl:J.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1112},res:{ttl:J.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1114},res:{ttl:J.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:J.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:J.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1119}}},q3={min:J.FIVE_MINUTES,max:J.SEVEN_DAYS},Sa={idle:"IDLE",active:"ACTIVE"},VT={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},cIe="request",lIe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],uIe="wc",hIe="auth",dIe="authKeys",fIe="pairingTopics",pIe="requests",x2=`${uIe}@${1.5}:${hIe}:`,j1=`${x2}:PUB_KEY`;var gIe=Object.defineProperty,mIe=Object.defineProperties,yIe=Object.getOwnPropertyDescriptors,GT=Object.getOwnPropertySymbols,wIe=Object.prototype.hasOwnProperty,bIe=Object.prototype.propertyIsEnumerable,ex=(t,e,r)=>e in t?gIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hr=(t,e)=>{for(var r in e||(e={}))wIe.call(e,r)&&ex(t,r,e[r]);if(GT)for(var r of GT(e))bIe.call(e,r)&&ex(t,r,e[r]);return t},Gi=(t,e)=>mIe(t,yIe(e)),ue=(t,e,r)=>ex(t,typeof e!="symbol"?e+"":e,r);class vIe extends $be{constructor(e){super(e),ue(this,"name",aIe),ue(this,"events",new Bp),ue(this,"initialized",!1),ue(this,"requestQueue",{state:Sa.idle,queue:[]}),ue(this,"sessionRequestQueue",{state:Sa.idle,queue:[]}),ue(this,"requestQueueDelay",J.ONE_SECOND),ue(this,"expectedPairingMethodMap",new Map),ue(this,"recentlyDeletedMap",new Map),ue(this,"recentlyDeletedLimit",200),ue(this,"relayMessageCache",[]),ue(this,"pendingSessions",new Map),ue(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Fn)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay)))}),ue(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=Gi(hr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=n;let u=i,h,d=!1;try{if(u){const R=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),d=R.active}}catch(R){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),R}if(!u||!d){const{topic:R,uri:L}=await this.client.core.pairing.create();u=R,h=L}if(!u){const{message:R}=ye("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(R)}const g=await this.client.core.crypto.generateKeyPair(),m=Fn.wc_sessionPropose.req.ttl||J.FIVE_MINUTES,v=Mn(m),$=Gi(hr(hr({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:AB}],proposer:{publicKey:g,metadata:this.client.metadata},expiryTimestamp:v,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Vn()}),_=Ht("session_connect",$.id),{reject:S,resolve:A,done:T}=Hu(m,KT),k=({id:R})=>{R===$.id&&(this.client.events.off("proposal_expire",k),this.pendingSessions.delete($.id),this.events.emit(_,{error:{message:KT,code:0}}))};return this.client.events.on("proposal_expire",k),this.events.once(_,({error:R,session:L})=>{this.client.events.off("proposal_expire",k),R?S(R):L&&A(L)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:$,throwOnFailedPublish:!0,clientRpcId:$.id}),await this.setProposal($.id,$),{uri:h,approval:T}}),ue(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),ue(this,"approve",async r=>{var n,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r==null?void 0:r.id)==null?void 0:n.toString(),trace:[Wo.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(B){throw o.setError(Ou.no_internet_connection),B}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(B){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(Ou.proposal_not_found),B}try{await this.isValidApprove(r)}catch(B){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Ou.session_approve_namespace_validation_failure),B}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:h,sessionConfig:d}=r,g=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:m,proposer:v,requiredNamespaces:$,optionalNamespaces:_}=g;let S=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:m});S||(S=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:Wo.session_approve_started,properties:{topic:m,trace:[Wo.session_approve_started,Wo.session_namespaces_validation_success]}}));const A=await this.client.core.crypto.generateKeyPair(),T=v.publicKey,k=await this.client.core.crypto.generateSharedKey(A,T),R=hr(hr(hr({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:A,metadata:this.client.metadata},expiry:Mn(zd)},u&&{sessionProperties:u}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),L=jr.relay;S.addTrace(Wo.subscribing_session_topic);try{await this.client.core.relayer.subscribe(k,{transportType:L})}catch(B){throw S.setError(Ou.subscribe_session_topic_failure),B}S.addTrace(Wo.subscribe_session_topic_success);const F=Gi(hr({},R),{topic:k,requiredNamespaces:$,optionalNamespaces:_,pairingTopic:m,acknowledged:!1,self:R.controller,peer:{publicKey:v.publicKey,metadata:v.metadata},controller:A,transportType:jr.relay});await this.client.session.set(k,F),S.addTrace(Wo.store_session);try{S.addTrace(Wo.publishing_session_settle),await this.sendRequest({topic:k,method:"wc_sessionSettle",params:R,throwOnFailedPublish:!0}).catch(B=>{throw S==null||S.setError(Ou.session_settle_publish_failure),B}),S.addTrace(Wo.session_settle_publish_success),S.addTrace(Wo.publishing_session_approve),await this.sendResult({id:a,topic:m,result:{relay:{protocol:c??"irn"},responderPublicKey:A},throwOnFailedPublish:!0}).catch(B=>{throw S==null||S.setError(Ou.session_approve_publish_failure),B}),S.addTrace(Wo.session_approve_publish_success)}catch(B){throw this.client.logger.error(B),this.client.session.delete(k,sr("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(k),B}return this.client.core.eventClient.deleteEvent({eventId:S.eventId}),await this.client.core.pairing.updateMetadata({topic:m,metadata:v.metadata}),await this.client.proposal.delete(a,sr("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:m}),await this.setExpiry(k,Mn(zd)),{topic:k,acknowledged:()=>Promise.resolve(this.client.session.get(k))}}),ue(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:i}=r;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&(await this.sendError({id:n,topic:s,error:i,rpcOpts:Fn.wc_sessionPropose.reject}),await this.client.proposal.delete(n,sr("USER_DISCONNECTED")))}),ue(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(h){throw this.client.logger.error("update() -> isValidUpdate() failed"),h}const{topic:n,namespaces:i}=r,{done:s,resolve:o,reject:a}=Hu(),c=Vn(),l=Hs().toString(),u=this.client.session.get(n).namespaces;return this.events.once(Ht("session_update",c),({error:h})=>{h?a(h):o()}),await this.client.session.update(n,{namespaces:i}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(h=>{this.client.logger.error(h),this.client.session.update(n,{namespaces:u}),a(h)}),{acknowledged:s}}),ue(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,i=Vn(),{done:s,resolve:o,reject:a}=Hu();return this.events.once(Ht("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,Mn(zd)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),ue(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(_){throw this.client.logger.error("request() -> isValidRequest() failed"),_}const{chainId:n,request:i,topic:s,expiry:o=Fn.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);(a==null?void 0:a.transportType)===jr.relay&&await this.confirmOnlineStateOrThrow();const c=Vn(),l=Hs().toString(),{done:u,resolve:h,reject:d}=Hu(o,"Request expired. Please try again.");this.events.once(Ht("session_request",c),({error:_,result:S})=>{_?d(_):h(S)});const g="wc_sessionRequest",m=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(m)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:g,params:{request:Gi(hr({},i),{expiryTimestamp:Mn(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:m}).catch(_=>d(_)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),await u();const v={request:Gi(hr({},i),{expiryTimestamp:Mn(o)}),chainId:n},$=this.shouldSetTVF(g,v);return await Promise.all([new Promise(async _=>{await this.sendRequest(hr({clientRpcId:c,relayRpcId:l,topic:s,method:g,params:v,expiry:o,throwOnFailedPublish:!0},$&&{tvf:this.getTVFParams(c,v)})).catch(S=>d(S)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),_()}),new Promise(async _=>{var S;if(!((S=a.sessionConfig)!=null&&S.disableDeepLink)){const A=await D2e(this.client.core.storage,HT);await O2e({id:c,topic:s,wcDeepLink:A})}_()}),u()]).then(_=>_[2])}),ue(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i,o=this.client.session.get(n);o.transportType===jr.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);kn(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0,appLink:a}):ln(i)&&await this.sendError({id:s,topic:n,error:i.error,appLink:a}),this.cleanupAfterResponse(r)}),ue(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=Vn(),s=Hs().toString(),{done:o,resolve:a,reject:c}=Hu();this.events.once(Ht("session_ping",i),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),ue(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r,o=Hs().toString(),a=Vn();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),ue(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:sr("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=ye("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}}),ue(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>G3e(n,r)))),ue(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ue(this,"authenticate",async(r,n)=>{var i;this.isInitialized(),this.isValidAuthenticate(r);const s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?jr.link_mode:jr.relay;o===jr.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:h,type:d,exp:g,nbf:m,methods:v=[],expiry:$}=r,_=[...r.resources||[]],{topic:S,uri:A}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:S,uri:A}});const T=await this.client.core.crypto.generateKeyPair(),k=L1(T);if(await Promise.all([this.client.auth.authKeys.set(j1,{responseTopic:k,publicKey:T}),this.client.auth.pairingTopics.set(k,{topic:k,pairingTopic:S})]),await this.client.core.relayer.subscribe(k,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${S}`),v.length>0){const{namespace:x}=Qf(a[0]);let y=CEe(x,"request",v);D1(_)&&(y=MEe(y,_.pop())),_.push(y)}const R=$&&$>Fn.wc_sessionAuthenticate.req.ttl?$:Fn.wc_sessionAuthenticate.req.ttl,L={authPayload:{type:d??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:h,iat:new Date().toISOString(),exp:g,nbf:m,resources:_},requester:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:Mn(R)},F={eip155:{chains:a,methods:[...new Set(["personal_sign",...v])],events:["chainChanged","accountsChanged"]}},B={requiredNamespaces:{},optionalNamespaces:F,relays:[{protocol:"irn"}],pairingTopic:S,proposer:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:Mn(Fn.wc_sessionPropose.req.ttl),id:Vn()},{done:q,resolve:D,reject:E}=Hu(R,"Request expired"),b=Vn(),f=Ht("session_connect",B.id),p=Ht("session_request",b),w=async({error:x,session:y})=>{this.events.off(p,N),x?E(x):y&&D({session:y})},N=async x=>{var y,C,I;if(await this.deletePendingAuthRequest(b,{message:"fulfilled",code:0}),x.error){const ie=sr("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return x.error.code===ie.code?void 0:(this.events.off(f,w),E(x.error.message))}await this.deleteProposal(B.id),this.events.off(f,w);const{cacaos:j,responder:K}=x.result,V=[],te=[];for(const ie of j){await GM({cacao:ie,projectId:this.client.core.projectId})||(this.client.logger.error(ie,"Signature verification failed"),E(sr("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ve}=ie,Me=D1(ve.resources),Ce=[D4(ve.iss)],et=Xb(ve.iss);if(Me){const tt=YM(Me),Fe=QM(Me);V.push(...tt),Ce.push(...Fe)}for(const tt of Ce)te.push(`${tt}:${et}`)}const se=await this.client.core.crypto.generateSharedKey(T,K.publicKey);let ce;V.length>0&&(ce={topic:se,acknowledged:!0,self:{publicKey:T,metadata:this.client.metadata},peer:K,controller:K.publicKey,expiry:Mn(zd),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:S,namespaces:gT([...new Set(V)],[...new Set(te)]),transportType:o},await this.client.core.relayer.subscribe(se,{transportType:o}),await this.client.session.set(se,ce),S&&await this.client.core.pairing.updateMetadata({topic:S,metadata:K.metadata}),ce=this.client.session.get(se)),(y=this.client.metadata.redirect)!=null&&y.linkMode&&(C=K.metadata.redirect)!=null&&C.linkMode&&(I=K.metadata.redirect)!=null&&I.universal&&n&&(this.client.core.addLinkModeSupportedApp(K.metadata.redirect.universal),this.client.session.update(se,{transportType:jr.link_mode})),D({auths:j,session:ce})};this.events.once(f,w),this.events.once(p,N);let M;try{if(s){const x=es("wc_sessionAuthenticate",L,b);this.client.core.history.set(S,x);const y=await this.client.core.crypto.encode("",x,{type:Iy,encoding:B0});M=Bw(n,S,y)}else await Promise.all([this.sendRequest({topic:S,method:"wc_sessionAuthenticate",params:L,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:b}),this.sendRequest({topic:S,method:"wc_sessionPropose",params:B,expiry:Fn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:B.id})])}catch(x){throw this.events.off(f,w),this.events.off(p,N),x}return await this.setProposal(B.id,B),await this.setAuthRequest(b,{request:Gi(hr({},L),{verifyContext:{}}),pairingTopic:S,transportType:o}),{uri:M??A,response:q}}),ue(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:i}=r,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[ku.authenticated_session_approve_started]}});try{this.isInitialized()}catch($){throw s.setError(F0.no_internet_connection),$}const o=this.getPendingAuthRequest(n);if(!o)throw s.setError(F0.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||jr.relay;a===jr.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=L1(c),h={type:Hc,receiverPublicKey:c,senderPublicKey:l},d=[],g=[];for(const $ of i){if(!await GM({cacao:$,projectId:this.client.core.projectId})){s.setError(F0.invalid_cacao);const k=sr("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:u,error:k,encodeOpts:h}),new Error(k.message)}s.addTrace(ku.cacaos_verified);const{p:_}=$,S=D1(_.resources),A=[D4(_.iss)],T=Xb(_.iss);if(S){const k=YM(S),R=QM(S);d.push(...k),A.push(...R)}for(const k of A)g.push(`${k}:${T}`)}const m=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace(ku.create_authenticated_session_topic);let v;if((d==null?void 0:d.length)>0){v={topic:m,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Mn(zd),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:gT([...new Set(d)],[...new Set(g)]),transportType:a},s.addTrace(ku.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(m,{transportType:a})}catch($){throw s.setError(F0.subscribe_authenticated_session_topic_failure),$}s.addTrace(ku.subscribe_authenticated_session_topic_success),await this.client.session.set(m,v),s.addTrace(ku.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(ku.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:n,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch($){throw s.setError(F0.authenticated_session_approve_publish_failure),$}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:v}}),ue(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===jr.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=L1(o),l={type:Hc,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:i,encodeOpts:l,rpcOpts:Fn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,sr("USER_DISCONNECTED"))}),ue(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:i}=r;return oB(n,i)}),ue(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),ue(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),ue(this,"deleteSession",async r=>{var n;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,sr("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(HT).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,sr("USER_DISCONNECTED"))}),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=Sa.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),ue(this,"deleteProposal",async(r,n)=>{if(n)try{const i=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(Ou.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,sr("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),ue(this,"deletePendingSessionRequest",async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=Sa.idle,this.client.events.emit("session_request_expire",{id:r}))}),ue(this,"deletePendingAuthRequest",async(r,n,i=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])}),ue(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),ue(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,Mn(Fn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),ue(this,"setAuthRequest",async(r,n)=>{const{request:i,pairingTopic:s,transportType:o=jr.relay}=n;this.client.core.expirer.set(r,i.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:r,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),ue(this,"setPendingSessionRequest",async r=>{const{id:n,topic:i,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||Mn(Fn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o})}),ue(this,"sendRequest",async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:h}=r,d=es(i,s,c);let g;const m=!!u;try{const _=m?B0:Ql;g=await this.client.core.crypto.encode(n,d,{encoding:_})}catch(_){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),_}let v;if(lIe.includes(i)){const _=Ca(JSON.stringify(d)),S=Ca(g);v=await this.client.core.verify.register({id:S,decryptedId:_})}const $=Fn[i].req;if($.attestation=v,o&&($.ttl=o),a&&($.id=a),this.client.core.history.set(n,d),m){const _=Bw(u,n,g);await global.Linking.openURL(_,this.client.name)}else{const _=Fn[i].req;o&&(_.ttl=o),a&&(_.id=a),_.tvf=Gi(hr({},h),{correlationId:d.id}),l?(_.internal=Gi(hr({},_.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,g,_)):this.client.core.relayer.publish(n,g,_).catch(S=>this.client.logger.error(S))}return d.id}),ue(this,"sendResult",async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,l=xu(n,s);let u;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const m=h?B0:Ql;u=await this.client.core.crypto.encode(i,l,Gi(hr({},a||{}),{encoding:m}))}catch(m){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),m}let d,g;try{d=await this.client.core.history.get(i,n);const m=d.request;try{this.shouldSetTVF(m.method,m.params)&&(g=this.getTVFParams(n,m.params,s))}catch(v){this.client.logger.warn("sendResult() -> getTVFParams() failed",v)}}catch(m){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),m}if(h){const m=Bw(c,i,u);await global.Linking.openURL(m,this.client.name)}else{const m=d.request.method,v=Fn[m].res;v.tvf=Gi(hr({},g),{correlationId:n}),o?(v.internal=Gi(hr({},v.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,v)):this.client.core.relayer.publish(i,u,v).catch($=>this.client.logger.error($))}await this.client.core.history.resolve(l)}),ue(this,"sendError",async r=>{const{id:n,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=r,l=Qp(n,s);let u;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=h?B0:Ql;u=await this.client.core.crypto.encode(i,l,Gi(hr({},o||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),g}let d;try{d=await this.client.core.history.get(i,n)}catch(g){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),g}if(h){const g=Bw(c,i,u);await global.Linking.openURL(g,this.client.name)}else{const g=d.request.method,m=a||Fn[g].res;this.client.core.relayer.publish(i,u,m)}await this.client.core.history.resolve(l)}),ue(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;kl(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{kl(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])}),ue(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),ue(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),ue(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Sa.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Sa.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Sa.idle}),ue(this,"processRequest",async r=>{const{topic:n,payload:i,attestation:s,transportType:o,encryptedId:a}=r,c=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,i);case"wc_sessionPing":return await this.onSessionPingRequest(n,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),ue(this,"onRelayEventResponse",async r=>{const{topic:n,payload:i,transportType:s}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),ue(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:i}=ye("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),ue(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ue(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:i,attestation:s,encryptedId:o}=r,{params:a,id:c}=i;try{const l=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Cc.proposal_listener_not_found)),this.isValidConnect(hr({},i.params));const u=a.expiryTimestamp||Mn(Fn.wc_sessionPropose.req.ttl),h=hr({id:c,pairingTopic:n,expiryTimestamp:u},a);await this.setProposal(c,h);const d=await this.getVerifyContext({attestationId:s,hash:Ca(JSON.stringify(i)),encryptedId:o,metadata:h.proposer.metadata});l==null||l.addTrace(Ia.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:h,verifyContext:d})}catch(l){await this.sendError({id:c,topic:n,error:l,rpcOpts:Fn.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),ue(this,"onSessionProposeResponse",async(r,n,i)=>{const{id:s}=n;if(kn(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:r,proposalId:s,publicKey:c});const h=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:r})}else if(ln(n)){await this.client.proposal.delete(s,sr("USER_DISCONNECTED"));const o=Ht("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),ue(this,"onSessionSettleRequest",async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:h,sessionConfig:d}=n.params,g=[...this.pendingSessions.values()].find($=>$.sessionTopic===r);if(!g)return this.client.logger.error(`Pending session not found for topic ${r}`);const m=this.client.proposal.get(g.proposalId),v=Gi(hr(hr(hr({topic:r,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:g.pairingTopic,requiredNamespaces:m.requiredNamespaces,optionalNamespaces:m.optionalNamespaces,controller:a.publicKey,self:{publicKey:g.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),{transportType:jr.relay});await this.client.session.set(v.topic,v),await this.setExpiry(v.topic,v.expiry),await this.client.core.pairing.updateMetadata({topic:g.pairingTopic,metadata:v.peer.metadata}),this.client.events.emit("session_connect",{session:v}),this.events.emit(Ht("session_connect",g.proposalId),{session:v}),this.pendingSessions.delete(g.proposalId),this.deleteProposal(g.proposalId,!1),this.cleanupDuplicatePairings(v),await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),ue(this,"onSessionSettleResponse",async(r,n)=>{const{id:i}=n;kn(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ht("session_approve",i),{})):ln(n)&&(await this.client.session.delete(r,sr("USER_DISCONNECTED")),this.events.emit(Ht("session_approve",i),{error:n.error}))}),ue(this,"onSessionUpdateRequest",async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=j0.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:sr("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(hr({topic:r},i));try{j0.set(o,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(c){throw j0.delete(o),c}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),ue(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),ue(this,"onSessionUpdateResponse",(r,n)=>{const{id:i}=n,s=Ht("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);kn(n)?this.events.emit(Ht("session_update",i),{}):ln(n)&&this.events.emit(Ht("session_update",i),{error:n.error})}),ue(this,"onSessionExtendRequest",async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Mn(zd)),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),ue(this,"onSessionExtendResponse",(r,n)=>{const{id:i}=n,s=Ht("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);kn(n)?this.events.emit(Ht("session_extend",i),{}):ln(n)&&this.events.emit(Ht("session_extend",i),{error:n.error})}),ue(this,"onSessionPingRequest",async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),ue(this,"onSessionPingResponse",(r,n)=>{const{id:i}=n,s=Ht("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);kn(n)?this.events.emit(Ht("session_ping",i),{}):ln(n)&&this.events.emit(Ht("session_ping",i),{error:n.error})},500)}),ue(this,"onSessionDeleteRequest",async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(Yn.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:sr("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),ue(this,"onSessionRequest",async r=>{var n,i,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=r,{id:h,params:d}=a;try{await this.isValidRequest(hr({topic:o},d));const g=this.client.session.get(o),m=await this.getVerifyContext({attestationId:c,hash:Ca(JSON.stringify(es("wc_sessionRequest",d,h))),encryptedId:l,metadata:g.peer.metadata,transportType:u}),v={id:h,topic:o,params:d,verifyContext:m};await this.setPendingSessionRequest(v),u===jr.link_mode&&(n=g.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=g.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(v):(this.addSessionRequestToSessionRequestQueue(v),this.processSessionRequestQueue())}catch(g){await this.sendError({id:h,topic:o,error:g}),this.client.logger.error(g)}}),ue(this,"onSessionRequestResponse",(r,n)=>{const{id:i}=n,s=Ht("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);kn(n)?this.events.emit(Ht("session_request",i),{result:n.result}):ln(n)&&this.events.emit(Ht("session_request",i),{error:n.error})}),ue(this,"onSessionEventRequest",async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=j0.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(hr({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),j0.set(o,i)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),ue(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),kn(n)?this.events.emit(Ht("session_request",i),{result:n.result}):ln(n)&&this.events.emit(Ht("session_request",i),{error:n.error})}),ue(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:l,authPayload:u,expiryTimestamp:h}=s.params,d=await this.getVerifyContext({attestationId:o,hash:Ca(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),g={requester:l,pairingTopic:i,id:s.id,authPayload:u,verifyContext:d,expiryTimestamp:h};await this.setAuthRequest(s.id,{request:g,pairingTopic:i,transportType:c}),c===jr.link_mode&&(n=l.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:d})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),d=this.getAppLinkIfEnabled(s.params.requester.metadata,c),g={type:Hc,receiverPublicKey:u,senderPublicKey:h};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:g,rpcOpts:Fn.wc_sessionAuthenticate.autoReject,appLink:d})}}),ue(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),ue(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Sa.idle,this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay))}),ue(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=Ht("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Ht("session_request",s.request.id),{error:n})})}),ue(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Sa.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Sa.active,this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),ue(this,"emitSessionRequest",r=>{this.client.events.emit("session_request",r)}),ue(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:es("wc_sessionPropose",Gi(hr({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id)})}),ue(this,"isValidConnect",async r=>{if(!gs(r)){const{message:l}=ye("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(l)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=r;if(mi(n)||await this.isValidPairingTopic(n),!o_e(c)){const{message:l}=ye("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!mi(i)&&Bm(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!mi(s)&&Bm(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),mi(o)||this.validateSessionProps(o,"sessionProperties"),!mi(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),ue(this,"validateNamespaces",(r,n)=>{const i=s_e(r,"connect()",n);if(i)throw new Error(i.message)}),ue(this,"isValidApprove",async r=>{if(!gs(r))throw new Error(ye("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),l=D3(i,"approve()");if(l)throw new Error(l.message);const u=wT(c.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!Sn(s,!0)){const{message:h}=ye("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(h)}if(mi(o)||this.validateSessionProps(o,"sessionProperties"),!mi(a)){this.validateSessionProps(a,"scopedProperties");const h=new Set(Object.keys(i));if(!Object.keys(a).every(d=>h.has(d)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(h).join(", ")}`)}}),ue(this,"isValidReject",async r=>{if(!gs(r)){const{message:s}=ye("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!c_e(i)){const{message:s}=ye("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),ue(this,"isValidSessionSettleRequest",r=>{if(!gs(r)){const{message:l}=ye("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!SB(n)){const{message:l}=ye("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=X3e(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=D3(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(kl(o)){const{message:l}=ye("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),ue(this,"isValidUpdate",async r=>{if(!gs(r)){const{message:c}=ye("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=D3(i,"update()");if(o)throw new Error(o.message);const a=wT(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),ue(this,"isValidExtend",async r=>{if(!gs(r)){const{message:i}=ye("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),ue(this,"isValidRequest",async r=>{if(!gs(r)){const{message:c}=ye("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!yT(a,s)){const{message:c}=ye("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!l_e(i)){const{message:c}=ye("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!d_e(a,s,i.method)){const{message:c}=ye("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!m_e(o,q3)){const{message:c}=ye("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${q3.min} and ${q3.max}`);throw new Error(c)}}),ue(this,"isValidRespond",async r=>{var n;if(!gs(r)){const{message:o}=ye("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(o){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!u_e(s)){const{message:o}=ye("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),ue(this,"isValidPing",async r=>{if(!gs(r)){const{message:i}=ye("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),ue(this,"isValidEmit",async r=>{if(!gs(r)){const{message:a}=ye("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!yT(o,s)){const{message:a}=ye("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!h_e(i)){const{message:a}=ye("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!f_e(o,s,i.name)){const{message:a}=ye("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),ue(this,"isValidDisconnect",async r=>{if(!gs(r)){const{message:i}=ye("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),ue(this,"isValidAuthenticate",r=>{const{chains:n,uri:i,domain:s,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!Sn(i,!1))throw new Error("uri is required parameter");if(!Sn(s,!1))throw new Error("domain is required parameter");if(!Sn(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>Qf(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Qf(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ue(this,"getVerifyContext",async r=>{const{attestationId:n,hash:i,encryptedId:s,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||Tg,validation:"UNKNOWN",origin:o.url||""}};try{if(a===jr.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),ue(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((i,s)=>{if(i==null){const{message:o}=ye("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${i} for key ${Object.keys(r)[s]}`);throw new Error(o)}})}),ue(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),ue(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),ue(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:i}=ye("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}}),ue(this,"isLinkModeEnabled",(r,n)=>{var i,s,o,a,c,l,u,h,d;return!r||n!==jr.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=r==null?void 0:r.redirect)==null?void 0:u.universal)!==void 0&&((h=r==null?void 0:r.redirect)==null?void 0:h.universal)!==""&&((d=r==null?void 0:r.redirect)==null?void 0:d.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),ue(this,"getAppLinkIfEnabled",(r,n)=>{var i;return this.isLinkModeEnabled(r,n)?(i=r==null?void 0:r.redirect)==null?void 0:i.universal:void 0}),ue(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=jM(r,"topic")||"",i=decodeURIComponent(jM(r,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:jr.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})}),ue(this,"registerLinkModeListeners",async()=>{var r;if(C5()||Iu()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),ue(this,"shouldSetTVF",(r,n)=>{if(!n||r!=="wc_sessionRequest")return!1;const{request:i}=n;return Object.keys(VT).includes(i.method)}),ue(this,"getTVFParams",(r,n,i)=>{var s,o;try{const a=n.request.method,c=this.extractTxHashesFromResult(a,i);return Gi(hr({correlationId:r,rpcMethods:[a],chainId:n.chainId},this.isValidContractData(n.request.params)&&{contractAddresses:[(o=(s=n.request.params)==null?void 0:s[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),ue(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const i=(r==null?void 0:r.data)||((n=r==null?void 0:r[0])==null?void 0:n.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),ue(this,"extractTxHashesFromResult",(r,n)=>{try{const i=VT[r];if(typeof n=="string")return[n];const s=n[i.key];if(Uh(s))return r==="solana_signAllTransactions"?s.map(o=>fEe(o)):s;if(typeof s=="string")return[s]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,i]of Object.entries(r))for(const s of i)try{await this.onProviderMessageEvent({topic:n,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${s}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Yn.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(j1)?this.client.auth.authKeys.get(j1):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:s===jr.link_mode?B0:Ql});Zp(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:i,transportType:s,encryptedId:Ca(n)})):td(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s}),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(yo.expired,async e=>{const{topic:r,id:n}=ZL(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,ye("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,ye("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Zu.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Zu.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Sn(e,!1)){const{message:r}=ye("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=ye("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(kl(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=ye("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Sn(e,!1)){const{message:r}=ye("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=ye("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(kl(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=ye("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=ye("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Sn(e,!1)){const{message:r}=ye("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=ye("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!a_e(e)){const{message:r}=ye("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=ye("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(kl(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=ye("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class EIe extends cd{constructor(e,r){super(e,r,sIe,D5),this.core=e,this.logger=r}}let _Ie=class extends cd{constructor(e,r){super(e,r,oIe,D5),this.core=e,this.logger=r}};class SIe extends cd{constructor(e,r){super(e,r,cIe,D5,n=>n.id),this.core=e,this.logger=r}}class xIe extends cd{constructor(e,r){super(e,r,dIe,x2,()=>j1),this.core=e,this.logger=r}}class IIe extends cd{constructor(e,r){super(e,r,fIe,x2),this.core=e,this.logger=r}}class AIe extends cd{constructor(e,r){super(e,r,pIe,x2,n=>n.id),this.core=e,this.logger=r}}var CIe=Object.defineProperty,NIe=(t,e,r)=>e in t?CIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,W3=(t,e,r)=>NIe(t,typeof e!="symbol"?e+"":e,r);class MIe{constructor(e,r){this.core=e,this.logger=r,W3(this,"authKeys"),W3(this,"pairingTopics"),W3(this,"requests"),this.authKeys=new xIe(this.core,this.logger),this.pairingTopics=new IIe(this.core,this.logger),this.requests=new AIe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var TIe=Object.defineProperty,$Ie=(t,e,r)=>e in t?TIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,St=(t,e,r)=>$Ie(t,typeof e!="symbol"?e+"":e,r);let PIe=class qB extends Tbe{constructor(e){super(e),St(this,"protocol",UB),St(this,"version",FB),St(this,"name",z3.name),St(this,"metadata"),St(this,"core"),St(this,"logger"),St(this,"events",new Dn.EventEmitter),St(this,"engine"),St(this,"session"),St(this,"proposal"),St(this,"pendingRequest"),St(this,"auth"),St(this,"signConfig"),St(this,"on",(n,i)=>this.events.on(n,i)),St(this,"once",(n,i)=>this.events.once(n,i)),St(this,"off",(n,i)=>this.events.off(n,i)),St(this,"removeListener",(n,i)=>this.events.removeListener(n,i)),St(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),St(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"update",async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"request",async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"find",n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),St(this,"authenticate",async(n,i)=>{try{return await this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}}),St(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),this.name=(e==null?void 0:e.name)||z3.name,this.metadata=(e==null?void 0:e.metadata)||GL(),this.signConfig=e==null?void 0:e.signConfig;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Eu(nl({level:(e==null?void 0:e.logger)||z3.logger}));this.core=(e==null?void 0:e.core)||new iIe(e),this.logger=Vt(r,this.name),this.session=new _Ie(this.core,this.logger),this.proposal=new EIe(this.core,this.logger),this.pendingRequest=new SIe(this.core,this.logger),this.engine=new vIe(this),this.auth=new MIe(this.core,this.logger)}static async init(e){const r=new qB(e);return await r.initialize(),r}get context(){return dr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},J.toMiliseconds(J.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const YT="error",OIe="wss://relay.walletconnect.org",kIe="wc",RIe="universal_provider",Uw=`${kIe}@2:${RIe}:`,WB="https://rpc.walletconnect.org/v1/",pf="generic",DIe=`${WB}bundler`,ko={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function LIe(){}function L5(t){return t==null||typeof t!="object"&&typeof t!="function"}function B5(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function BIe(t){if(L5(t))return t;if(Array.isArray(t)||B5(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function QT(t){return typeof t=="object"&&t!==null}function HB(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function KB(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const jIe="[object RegExp]",VB="[object String]",GB="[object Number]",YB="[object Boolean]",QB="[object Arguments]",UIe="[object Symbol]",FIe="[object Date]",zIe="[object Map]",qIe="[object Set]",WIe="[object Array]",HIe="[object ArrayBuffer]",KIe="[object Object]",VIe="[object DataView]",GIe="[object Uint8Array]",YIe="[object Uint8ClampedArray]",QIe="[object Uint16Array]",ZIe="[object Uint32Array]",JIe="[object Int8Array]",XIe="[object Int16Array]",e5e="[object Int32Array]",t5e="[object Float32Array]",r5e="[object Float64Array]";function n5e(t,e){return Df(t,void 0,t,new Map,e)}function Df(t,e,r,n=new Map,i=void 0){const s=i==null?void 0:i(t,e,r,n);if(s!=null)return s;if(L5(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=Df(t[a],a,r,n,i);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,c]of t)o.set(a,Df(c,a,r,n,i));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add(Df(a,void 0,r,n,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(B5(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=Df(t[a],a,r,n,i);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),Ju(o,t,r,n,i),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),Ju(o,t,r,n,i),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),Ju(o,t,r,n,i),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Ju(o,t,r,n,i),o}if(typeof t=="object"&&i5e(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),Ju(o,t,r,n,i),o}return t}function Ju(t,e,r=t,n,i){const s=[...Object.keys(e),...HB(e)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Df(e[a],a,r,n,i))}}function i5e(t){switch(KB(t)){case QB:case WIe:case HIe:case VIe:case YB:case FIe:case t5e:case r5e:case JIe:case XIe:case e5e:case zIe:case GB:case KIe:case jIe:case qIe:case VB:case UIe:case GIe:case YIe:case QIe:case ZIe:return!0;default:return!1}}function s5e(t,e){return n5e(t,(r,n,i,s)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case GB:case VB:case YB:{const o=new t.constructor(t==null?void 0:t.valueOf());return Ju(o,t),o}case QB:{const o={};return Ju(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function ZT(t){return s5e(t)}function JT(t){return t!==null&&typeof t=="object"&&KB(t)==="[object Arguments]"}function o5e(t){return B5(t)}function a5e(t){var r;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!((r=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&r.writable)?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function c5e(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let i=t;for(let s=0;s<r.length;s++){const o=r[s];i=tx(i,o,n,new Map)}return i}function tx(t,e,r,n){if(L5(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return BIe(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]=e[s]??void 0}const i=[...Object.keys(e),...HB(e)];for(let s=0;s<i.length;s++){const o=i[s];let a=e[o],c=t[o];if(JT(a)&&(a={...a}),JT(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=ZT(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],h=Reflect.ownKeys(c);for(let d=0;d<h.length;d++){const g=h[d];u[g]=c[g]}c=u}else c=[];const l=r(c,a,o,t,e,n);l!=null?t[o]=l:Array.isArray(a)||QT(c)&&QT(a)?t[o]=tx(c,a,r,n):c==null&&a5e(a)?t[o]=tx({},a,r,n):c==null&&o5e(a)?t[o]=ZT(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function l5e(t,...e){return c5e(t,...e,LIe)}var u5e=Object.defineProperty,h5e=Object.defineProperties,d5e=Object.getOwnPropertyDescriptors,XT=Object.getOwnPropertySymbols,f5e=Object.prototype.hasOwnProperty,p5e=Object.prototype.propertyIsEnumerable,e$=(t,e,r)=>e in t?u5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fw=(t,e)=>{for(var r in e||(e={}))f5e.call(e,r)&&e$(t,r,e[r]);if(XT)for(var r of XT(e))p5e.call(e,r)&&e$(t,r,e[r]);return t},g5e=(t,e)=>h5e(t,d5e(e));function Qs(t,e,r){var n;const i=Qf(t);return((n=e.rpcMap)==null?void 0:n[i.reference])||`${WB}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function ld(t){return t.includes(":")?t.split(":")[1]:t}function ZB(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function m5e(t,e){const r=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!r.length)return[];const n=[];return r.forEach(i=>{const s=e.namespaces[i].accounts;n.push(...s)}),n}function H3(t={},e={}){const r=t$(t),n=t$(e);return l5e(r,n)}function t$(t){var e,r,n,i;const s={};if(!Bm(t))return s;for(const[o,a]of Object.entries(t)){const c=k5(o)?[o]:a.chains,l=a.methods||[],u=a.events||[],h=a.rpcMap||{},d=lg(o);s[d]=g5e(Fw(Fw({},s[d]),a),{chains:R1(c,(e=s[d])==null?void 0:e.chains),methods:R1(l,(r=s[d])==null?void 0:r.methods),events:R1(u,(n=s[d])==null?void 0:n.events),rpcMap:Fw(Fw({},h),(i=s[d])==null?void 0:i.rpcMap)})}return s}function y5e(t){return t.includes(":")?t.split(":")[2]:t}function r$(t){const e={};for(const[r,n]of Object.entries(t)){const i=n.methods||[],s=n.events||[],o=n.accounts||[],a=k5(r)?[r]:n.chains?n.chains:ZB(n.accounts);e[r]={chains:a,methods:i,events:s,accounts:o}}return e}function K3(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const JB={},Dt=t=>JB[t],V3=(t,e)=>{JB[t]=e};var w5e=Object.defineProperty,b5e=(t,e,r)=>e in t?w5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qd=(t,e,r)=>b5e(t,typeof e!="symbol"?e+"":e,r);class v5e{constructor(e){qd(this,"name","polkadot"),qd(this,"client"),qd(this,"httpProviders"),qd(this,"events"),qd(this,"namespace"),qd(this,"chainId"),this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=ld(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Dt("disableProviderPing")))}}var E5e=Object.defineProperty,_5e=Object.defineProperties,S5e=Object.getOwnPropertyDescriptors,n$=Object.getOwnPropertySymbols,x5e=Object.prototype.hasOwnProperty,I5e=Object.prototype.propertyIsEnumerable,rx=(t,e,r)=>e in t?E5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,i$=(t,e)=>{for(var r in e||(e={}))x5e.call(e,r)&&rx(t,r,e[r]);if(n$)for(var r of n$(e))I5e.call(e,r)&&rx(t,r,e[r]);return t},s$=(t,e)=>_5e(t,S5e(e)),Wd=(t,e,r)=>rx(t,typeof e!="symbol"?e+"":e,r);class A5e{constructor(e){Wd(this,"name","eip155"),Wd(this,"client"),Wd(this,"chainId"),Wd(this,"namespace"),Wd(this,"httpProviders"),Wd(this,"events"),this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||Qs(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Dt("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=parseInt(ld(r));e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let i=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,i;const s=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0];if(!s)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),a=((i=o==null?void 0:o.sessionProperties)==null?void 0:i.capabilities)||{};if(a!=null&&a[s])return a==null?void 0:a[s];const c=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:s$(i$({},o.sessionProperties||{}),{capabilities:s$(i$({},a||{}),{[s]:c})})})}catch(l){console.warn("Failed to update session with capabilities",l)}return c}async getCallStatus(e){var r,n;const i=this.client.session.get(e.topic),s=(r=i.sessionProperties)==null?void 0:r.bundler_name;if(s){const a=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(n=i.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(es("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,r){return`${DIe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var C5e=Object.defineProperty,N5e=(t,e,r)=>e in t?C5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Hd=(t,e,r)=>N5e(t,typeof e!="symbol"?e+"":e,r);class M5e{constructor(e){Hd(this,"name","solana"),Hd(this,"client"),Hd(this,"httpProviders"),Hd(this,"events"),Hd(this,"namespace"),Hd(this,"chainId"),this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=ld(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Dt("disableProviderPing")))}}var T5e=Object.defineProperty,$5e=(t,e,r)=>e in t?T5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Kd=(t,e,r)=>$5e(t,typeof e!="symbol"?e+"":e,r);class P5e{constructor(e){Kd(this,"name","cosmos"),Kd(this,"client"),Kd(this,"httpProviders"),Kd(this,"events"),Kd(this,"namespace"),Kd(this,"chainId"),this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=ld(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Dt("disableProviderPing")))}}var O5e=Object.defineProperty,k5e=(t,e,r)=>e in t?O5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vd=(t,e,r)=>k5e(t,typeof e!="symbol"?e+"":e,r);class R5e{constructor(e){Vd(this,"name","algorand"),Vd(this,"client"),Vd(this,"httpProviders"),Vd(this,"events"),Vd(this,"namespace"),Vd(this,"chainId"),this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||Qs(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Vr(new hn(n,Dt("disableProviderPing")))}}var D5e=Object.defineProperty,L5e=(t,e,r)=>e in t?D5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Gd=(t,e,r)=>L5e(t,typeof e!="symbol"?e+"":e,r);class B5e{constructor(e){Gd(this,"name","cip34"),Gd(this,"client"),Gd(this,"httpProviders"),Gd(this,"events"),Gd(this,"namespace"),Gd(this,"chainId"),this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),i=ld(r);e[i]=this.createHttpProvider(i,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Dt("disableProviderPing")))}}var j5e=Object.defineProperty,U5e=(t,e,r)=>e in t?j5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yd=(t,e,r)=>U5e(t,typeof e!="symbol"?e+"":e,r);class F5e{constructor(e){Yd(this,"name","elrond"),Yd(this,"client"),Yd(this,"httpProviders"),Yd(this,"events"),Yd(this,"namespace"),Yd(this,"chainId"),this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=ld(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Dt("disableProviderPing")))}}var z5e=Object.defineProperty,q5e=(t,e,r)=>e in t?z5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qd=(t,e,r)=>q5e(t,typeof e!="symbol"?e+"":e,r);class W5e{constructor(e){Qd(this,"name","multiversx"),Qd(this,"client"),Qd(this,"httpProviders"),Qd(this,"events"),Qd(this,"namespace"),Qd(this,"chainId"),this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=ld(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Dt("disableProviderPing")))}}var H5e=Object.defineProperty,K5e=(t,e,r)=>e in t?H5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zd=(t,e,r)=>K5e(t,typeof e!="symbol"?e+"":e,r);class V5e{constructor(e){Zd(this,"name","near"),Zd(this,"client"),Zd(this,"httpProviders"),Zd(this,"events"),Zd(this,"namespace"),Zd(this,"chainId"),this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Qs(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace);return typeof n>"u"?void 0:new Vr(new hn(n,Dt("disableProviderPing")))}}var G5e=Object.defineProperty,Y5e=(t,e,r)=>e in t?G5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Jd=(t,e,r)=>Y5e(t,typeof e!="symbol"?e+"":e,r);class Q5e{constructor(e){Jd(this,"name","tezos"),Jd(this,"client"),Jd(this,"httpProviders"),Jd(this,"events"),Jd(this,"namespace"),Jd(this,"chainId"),this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Qs(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace);return typeof n>"u"?void 0:new Vr(new hn(n))}}var Z5e=Object.defineProperty,J5e=(t,e,r)=>e in t?Z5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Xd=(t,e,r)=>J5e(t,typeof e!="symbol"?e+"":e,r);class X5e{constructor(e){Xd(this,"name",pf),Xd(this,"client"),Xd(this,"httpProviders"),Xd(this,"events"),Xd(this,"namespace"),Xd(this,"chainId"),this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(i=>{const s=Qf(i);n[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Dt("disableProviderPing")))}}var eAe=Object.defineProperty,tAe=Object.defineProperties,rAe=Object.getOwnPropertyDescriptors,o$=Object.getOwnPropertySymbols,nAe=Object.prototype.hasOwnProperty,iAe=Object.prototype.propertyIsEnumerable,nx=(t,e,r)=>e in t?eAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zw=(t,e)=>{for(var r in e||(e={}))nAe.call(e,r)&&nx(t,r,e[r]);if(o$)for(var r of o$(e))iAe.call(e,r)&&nx(t,r,e[r]);return t},G3=(t,e)=>tAe(t,rAe(e)),po=(t,e,r)=>nx(t,typeof e!="symbol"?e+"":e,r);let sAe=class XB{constructor(e){po(this,"client"),po(this,"namespaces"),po(this,"optionalNamespaces"),po(this,"sessionProperties"),po(this,"scopedProperties"),po(this,"events",new Bp),po(this,"rpcProviders",{}),po(this,"session"),po(this,"providerOpts"),po(this,"logger"),po(this,"uri"),po(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Eu(nl({level:(e==null?void 0:e.logger)||YT})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new XB(e);return await r.initialize(),r}async request(e,r,n){const[i,s]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:zw({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,i){const s=new Date().getTime();this.request(e,n,i).then(o=>r(null,xu(s,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:sr("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:i}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const s=await i();if(this.session=s.session,this.session){const o=r$(this.session.namespaces);this.namespaces=H3(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const i=await n();this.session=i;const s=r$(i.namespaces);return this.namespaces=H3(this.namespaces,s),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,i]=this.validateChain(e),s=this.getProvider(n);s.name===pf?s.setDefaultChain(`${n}:${i}`,r):s.setDefaultChain(i,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Uh(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await PIe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||YT,relayUrl:this.providerOpts.relayUrl||OIe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error("Failed to get session",n),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>lg(r)))];V3("client",this.client),V3("events",this.events),V3("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=m5e(r,this.session),i=ZB(n),s=H3(this.namespaces,this.optionalNamespaces),o=G3(zw({},s[r]),{accounts:n,chains:i});switch(r){case"eip155":this.rpcProviders[r]=new A5e({namespace:o});break;case"algorand":this.rpcProviders[r]=new R5e({namespace:o});break;case"solana":this.rpcProviders[r]=new M5e({namespace:o});break;case"cosmos":this.rpcProviders[r]=new P5e({namespace:o});break;case"polkadot":this.rpcProviders[r]=new v5e({namespace:o});break;case"cip34":this.rpcProviders[r]=new B5e({namespace:o});break;case"elrond":this.rpcProviders[r]=new F5e({namespace:o});break;case"multiversx":this.rpcProviders[r]=new W5e({namespace:o});break;case"near":this.rpcProviders[r]=new V5e({namespace:o});break;case"tezos":this.rpcProviders[r]=new Q5e({namespace:o});break;default:this.rpcProviders[pf]?this.rpcProviders[pf].updateNamespace(o):this.rpcProviders[pf]=new X5e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:i}=e;if(i!==((r=this.session)==null?void 0:r.topic))return;const{event:s}=n;if(s.name==="accountsChanged"){const o=s.data;o&&Uh(o)&&this.events.emit("accountsChanged",o.map(y5e))}else if(s.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=lg(o),l=K3(o)!==K3(a)?`${c}:${K3(a)}`:o;this.onChainChanged(l)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,i;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:s}=r,o=(i=this.client)==null?void 0:i.session.get(e);this.session=G3(zw({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",G3(zw({},sr("USER_DISCONNECTED")),{data:e.topic})))}),this.on(ko.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[pf]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:n,sessionProperties:i,scopedProperties:s}=e;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=i,this.scopedProperties=s}validateChain(e){const[r,n]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>lg(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const i=lg(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,i]=this.validateChain(e);i&&(r||this.getProvider(n).setDefaultChain(i),this.namespaces[n]?this.namespaces[n].defaultChain=i:this.namespaces[`${n}:${i}`]?this.namespaces[`${n}:${i}`].defaultChain=i:this.namespaces[`${n}:${i}`]={defaultChain:i},this.events.emit("chainChanged",i),await this.persist("namespaces",this.namespaces))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const i=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${Uw}/${e}${i}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${Uw}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${Uw}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(Uw)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn("Failed to cleanup storage",r)}}};const Al={EIP155:"eip155",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED"},rv={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Ue.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Ue.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Ue.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Ue.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Ue.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Ue.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Ue.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Ue.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Ue.CONNECTOR_ID.COINBASE]:"Coinbase",[Ue.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Ue.CONNECTOR_ID.LEDGER]:"Ledger",[Ue.CONNECTOR_ID.SAFE]:"Safe"}},ej={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([r,n])=>{e[`${Al.EIP155}:${r}`]=n}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},qw={UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${oAe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},SOCIALS_TIMEOUT:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function oAe(){return typeof window<"u"}const aAe={createLogger(t,e="error"){const r=nl({level:e}),{logger:n}=zI({opts:r});return n.error=(...i)=>{for(const s of i)if(s instanceof Error){t(s,...i);return}t(void 0,...i)},n}},cAe="rpc.walletconnect.org";function lAe(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()}const Y3=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],gf={extendRpcUrlWithProjectId(t,e){let r=!1;try{r=new URL(t).host===cAe}catch{r=!1}if(r){const n=new URL(t);return n.searchParams.has("projectId")||n.searchParams.set("projectId",e),n.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:Ue.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${Ue.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,r){var i,s,o;const n=(o=(s=(i=t.rpcUrls)==null?void 0:i.default)==null?void 0:s.http)==null?void 0:o[0];return Y3.includes(e)?lAe(e,r):n||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){var d,g,m,v,$;const i=this.getChainNamespace(t),s=this.getCaipNetworkId(t),o=(d=t.rpcUrls.default.http)==null?void 0:d[0],a=this.getDefaultRpcUrl(t,s,r),c=((v=(m=(g=t==null?void 0:t.rpcUrls)==null?void 0:g.chainDefault)==null?void 0:m.http)==null?void 0:v[0])||o,l=(($=n==null?void 0:n[s])==null?void 0:$.map(_=>_.url))||[],u=[...l,a],h=[...l];return c&&!h.includes(c)&&h.push(c),{...t,chainNamespace:i,caipNetworkId:s,assets:{imageId:rv.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:h}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){return t.map(i=>gf.extendCaipNetwork(i,{customNetworkImageUrls:e,customRpcUrls:n,projectId:r}))},getViemTransport(t,e,r){const n=[];if(r==null||r.forEach(i=>{n.push(A3(i.url,i.config))}),Y3.includes(t.caipNetworkId)){const i=this.getDefaultRpcUrl(t,t.caipNetworkId,e);n.push(A3(i,{fetchOptions:{headers:{"Content-Type":"text/plain"}}}))}return _M(n)},extendWagmiTransports(t,e,r){if(Y3.includes(t.caipNetworkId)){const n=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return _M([r,A3(n)])}return r},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:Ue.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Oe.getActiveCaipNetworkId(),r=Y.getAllRequestedCaipNetworks(),n=Array.from(((c=Y.state.chains)==null?void 0:c.keys())||[]),i=e==null?void 0:e.split(":")[0],s=i?n.includes(i):!1,o=r==null?void 0:r.find(l=>l.caipNetworkId===e);return s&&!o&&e?this.getUnsupportedNetwork(e):o||t||(r==null?void 0:r[0])}},nv={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},hs=nn({providers:{...nv},providerIds:{...nv}}),Qr={state:hs,subscribeKey(t,e){return no(hs,t,e)},subscribe(t){return ns(hs,()=>{t(hs)})},subscribeProviders(t){return ns(hs.providers,()=>t(hs.providers))},setProvider(t,e){e&&(hs.providers[t]=Dh(e))},getProvider(t){return hs.providers[t]},setProviderId(t,e){e&&(hs.providerIds[t]=e)},getProviderId(t){if(t)return hs.providerIds[t]},reset(){hs.providers={...nv},hs.providerIds={...nv}},resetChain(t){hs.providers[t]=void 0,hs.providerIds[t]=void 0}},uAe={VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},ix={filterOutDuplicatesByRDNS(t){const e=ge.state.enableEIP6963?ut.state.connectors:[],r=Oe.getRecentWallets(),n=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),i=r.map(a=>a.rdns).filter(Boolean),s=n.concat(i);if(s.includes("io.metamask.mobile")&&dt.isMobile()){const a=s.indexOf("io.metamask.mobile");s[a]="io.metamask"}return t.filter(a=>!s.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=ut.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),r=Oe.getRecentWallets(),n=e.map(a=>a.explorerId),i=r.map(a=>a.id),s=n.concat(i);return t.filter(a=>!s.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=ut.state,r=e.filter(s=>s.type==="ANNOUNCED").reduce((s,o)=>{var a;return(a=o.info)!=null&&a.rdns&&(s[o.info.rdns]=!0),s},{});return t.map(s=>({...s,installed:!!s.rdns&&!!r[s.rdns??""]})).sort((s,o)=>Number(o.installed)-Number(s.installed))},getConnectOrderMethod(t,e){var c;const r=(t==null?void 0:t.connectMethodsOrder)||((c=ge.state.features)==null?void 0:c.connectMethodsOrder),n=e||ut.state.connectors;if(r)return r;const{injected:i,announced:s}=U1.getConnectorsByType(n,pt.state.recommended,pt.state.featured),o=i.filter(U1.showConnector),a=s.filter(U1.showConnector);return o.length||a.length?["wallet","email","social"]:uAe.DEFAULT_CONNECT_METHOD_ORDER}},U1={getConnectorsByType(t,e,r){const{customWallets:n}=ge.state,i=Oe.getRecentWallets(),s=ix.filterOutDuplicateWallets(e),o=ix.filterOutDuplicateWallets(r),a=t.filter(h=>h.type==="MULTI_CHAIN"),c=t.filter(h=>h.type==="ANNOUNCED"),l=t.filter(h=>h.type==="INJECTED"),u=t.filter(h=>h.type==="EXTERNAL");return{custom:n,recent:i,external:u,multiChain:a,announced:c,injected:l,recommended:s,featured:o}},showConnector(t){var i;const e=(i=t.info)==null?void 0:i.rdns,r=!!e&&pt.state.excludedWallets.some(s=>s.rdns===e),n=!!t.name&&pt.state.excludedWallets.some(s=>ej.isLowerCaseMatch(s.name,t.name));return!(t.type==="INJECTED"&&(!dt.isMobile()&&t.name==="Browser Wallet"||!e&&!_r.checkInstalled()||r||n)||t.type==="ANNOUNCED"&&(r||n))},getIsConnectedWithWC(){return Array.from(Y.state.chains.values()).some(r=>ut.getConnectorId(r.namespace)===Ue.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:r,recent:n,announced:i,injected:s,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=ge.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=U1.getIsConnectedWithWC(),g=[{type:"walletConnect",isEnabled:ge.state.enableWalletConnect&&!u},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...s,...i,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(_=>_.isEnabled),m=new Set(g.map(_=>_.type)),v=c.filter(_=>m.has(_)).map(_=>({type:_,isEnabled:!0})),$=g.filter(({type:_})=>!v.some(({type:A})=>A===_));return Array.from(new Set([...v,...$].map(({type:_})=>_)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const F1=globalThis,j5=F1.ShadowRoot&&(F1.ShadyCSS===void 0||F1.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,U5=Symbol(),a$=new WeakMap;let tj=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==U5)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(j5&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=a$.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&a$.set(r,e))}return e}toString(){return this.cssText}};const go=t=>new tj(typeof t=="string"?t:t+"",void 0,U5),Zf=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new tj(r,t,U5)},hAe=(t,e)=>{if(j5)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of e){const n=document.createElement("style"),i=F1.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)}},c$=j5?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return go(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:dAe,defineProperty:fAe,getOwnPropertyDescriptor:pAe,getOwnPropertyNames:gAe,getOwnPropertySymbols:mAe,getPrototypeOf:yAe}=Object,cu=globalThis,l$=cu.trustedTypes,wAe=l$?l$.emptyScript:"",Q3=cu.reactiveElementPolyfillSupport,Pg=(t,e)=>t,sx={toAttribute(t,e){switch(e){case Boolean:t=t?wAe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},rj=(t,e)=>!dAe(t,e),u$={attribute:!0,type:String,converter:sx,reflect:!1,useDefault:!1,hasChanged:rj};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),cu.litPropertyMetadata??(cu.litPropertyMetadata=new WeakMap);let mf=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=u$){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),i=this.getPropertyDescriptor(e,n,r);i!==void 0&&fAe(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){const{get:i,set:s}=pAe(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get:i,set(o){const a=i==null?void 0:i.call(this);s==null||s.call(this,o),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??u$}static _$Ei(){if(this.hasOwnProperty(Pg("elementProperties")))return;const e=yAe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Pg("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Pg("properties"))){const r=this.properties,n=[...gAe(r),...mAe(r)];for(const i of n)this.createProperty(i,r[i])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,i]of r)this.elementProperties.set(n,i)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const i=this._$Eu(r,n);i!==void 0&&this._$Eh.set(i,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(c$(i))}else e!==void 0&&r.push(c$(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(r=>r(this))}addController(e){var r;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)==null||r.call(e))}removeController(e){var r;(r=this._$EO)==null||r.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return hAe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostConnected)==null?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostDisconnected)==null?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$ET(e,r){var s;const n=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,n);if(i!==void 0&&n.reflect===!0){const o=(((s=n.converter)==null?void 0:s.toAttribute)!==void 0?n.converter:sx).toAttribute(r,n.type);this._$Em=e,o==null?this.removeAttribute(i):this.setAttribute(i,o),this._$Em=null}}_$AK(e,r){var s,o;const n=this.constructor,i=n._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const a=n.getPropertyOptions(i),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((s=a.converter)==null?void 0:s.fromAttribute)!==void 0?a.converter:sx;this._$Em=i;const l=c.fromAttribute(r,a.type);this[i]=l??((o=this._$Ej)==null?void 0:o.get(i))??l,this._$Em=null}}requestUpdate(e,r,n,i=!1,s){var o;if(e!==void 0){const a=this.constructor;if(i===!1&&(s=this[e]),n??(n=a.getPropertyOptions(e)),!((n.hasChanged??rj)(s,r)||n.useDefault&&n.reflect&&s===((o=this._$Ej)==null?void 0:o.get(e))&&!this.hasAttribute(a._$Eu(e,n))))return;this.C(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:n,reflect:i,wrapped:s},o){n&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??r??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(r=void 0),this._$AL.set(e,r)),i===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var n;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[s,o]of i){const{wrapped:a}=o,c=this[s];a!==!0||this._$AL.has(s)||c===void 0||this.C(s,void 0,o,c)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),(n=this._$EO)==null||n.forEach(i=>{var s;return(s=i.hostUpdate)==null?void 0:s.call(i)}),this.update(r)):this._$EM()}catch(i){throw e=!1,this._$EM(),i}e&&this._$AE(r)}willUpdate(e){}_$AE(e){var r;(r=this._$EO)==null||r.forEach(n=>{var i;return(i=n.hostUpdated)==null?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(r=>this._$ET(r,this[r]))),this._$EM()}updated(e){}firstUpdated(e){}};mf.elementStyles=[],mf.shadowRootOptions={mode:"open"},mf[Pg("elementProperties")]=new Map,mf[Pg("finalized")]=new Map,Q3==null||Q3({ReactiveElement:mf}),(cu.reactiveElementVersions??(cu.reactiveElementVersions=[])).push("2.1.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Og=globalThis,h$=t=>t,iv=Og.trustedTypes,d$=iv?iv.createPolicy("lit-html",{createHTML:t=>t}):void 0,nj="$lit$",Bl=`lit$${Math.random().toFixed(9).slice(2)}$`,ij="?"+Bl,bAe=`<${ij}>`,Fh=document,jm=()=>Fh.createComment(""),Um=t=>t===null||typeof t!="object"&&typeof t!="function",F5=Array.isArray,vAe=t=>F5(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Z3=`[ 	
\f\r]`,W0=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,f$=/-->/g,p$=/>/g,Ru=RegExp(`>|${Z3}(?:([^\\s"'>=/]+)(${Z3}*=${Z3}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),g$=/'/g,m$=/"/g,sj=/^(?:script|style|textarea|title)$/i,oj=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),LCe=oj(1),BCe=oj(2),Mp=Symbol.for("lit-noChange"),Qn=Symbol.for("lit-nothing"),y$=new WeakMap,fh=Fh.createTreeWalker(Fh,129);function aj(t,e){if(!F5(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return d$!==void 0?d$.createHTML(e):e}const EAe=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":e===3?"<math>":"",o=W0;for(let a=0;a<r;a++){const c=t[a];let l,u,h=-1,d=0;for(;d<c.length&&(o.lastIndex=d,u=o.exec(c),u!==null);)d=o.lastIndex,o===W0?u[1]==="!--"?o=f$:u[1]!==void 0?o=p$:u[2]!==void 0?(sj.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=Ru):u[3]!==void 0&&(o=Ru):o===Ru?u[0]===">"?(o=i??W0,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Ru:u[3]==='"'?m$:g$):o===m$||o===g$?o=Ru:o===f$||o===p$?o=W0:(o=Ru,i=void 0);const g=o===Ru&&t[a+1].startsWith("/>")?" ":"";s+=o===W0?c+bAe:h>=0?(n.push(l),c.slice(0,h)+nj+c.slice(h)+Bl+g):c+Bl+(h===-2?a:g)}return[aj(t,s+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class Fm{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[l,u]=EAe(e,r);if(this.el=Fm.createElement(l,n),fh.currentNode=this.el.content,r===2||r===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(i=fh.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const h of i.getAttributeNames())if(h.endsWith(nj)){const d=u[o++],g=i.getAttribute(h).split(Bl),m=/([.?@])?(.*)/.exec(d);c.push({type:1,index:s,name:m[2],strings:g,ctor:m[1]==="."?SAe:m[1]==="?"?xAe:m[1]==="@"?IAe:I2}),i.removeAttribute(h)}else h.startsWith(Bl)&&(c.push({type:6,index:s}),i.removeAttribute(h));if(sj.test(i.tagName)){const h=i.textContent.split(Bl),d=h.length-1;if(d>0){i.textContent=iv?iv.emptyScript:"";for(let g=0;g<d;g++)i.append(h[g],jm()),fh.nextNode(),c.push({type:2,index:++s});i.append(h[d],jm())}}}else if(i.nodeType===8)if(i.data===ij)c.push({type:2,index:s});else{let h=-1;for(;(h=i.data.indexOf(Bl,h+1))!==-1;)c.push({type:7,index:s}),h+=Bl.length-1}s++}}static createElement(e,r){const n=Fh.createElement("template");return n.innerHTML=e,n}}function Tp(t,e,r=t,n){var o,a;if(e===Mp)return e;let i=n!==void 0?(o=r._$Co)==null?void 0:o[n]:r._$Cl;const s=Um(e)?void 0:e._$litDirective$;return(i==null?void 0:i.constructor)!==s&&((a=i==null?void 0:i._$AO)==null||a.call(i,!1),s===void 0?i=void 0:(i=new s(t),i._$AT(t,r,n)),n!==void 0?(r._$Co??(r._$Co=[]))[n]=i:r._$Cl=i),i!==void 0&&(e=Tp(t,i._$AS(t,e.values),i,n)),e}class _Ae{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:n}=this._$AD,i=((e==null?void 0:e.creationScope)??Fh).importNode(r,!0);fh.currentNode=i;let s=fh.nextNode(),o=0,a=0,c=n[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new Cy(s,s.nextSibling,this,e):c.type===1?l=new c.ctor(s,c.name,c.strings,this,e):c.type===6&&(l=new AAe(s,this,e)),this._$AV.push(l),c=n[++a]}o!==(c==null?void 0:c.index)&&(s=fh.nextNode(),o++)}return fh.currentNode=Fh,i}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class Cy{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,r,n,i){this.type=2,this._$AH=Qn,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cv=(i==null?void 0:i.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Tp(this,e,r),Um(e)?e===Qn||e==null||e===""?(this._$AH!==Qn&&this._$AR(),this._$AH=Qn):e!==this._$AH&&e!==Mp&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):vAe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Qn&&Um(this._$AH)?this._$AA.nextSibling.data=e:this.T(Fh.createTextNode(e)),this._$AH=e}$(e){var s;const{values:r,_$litType$:n}=e,i=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=Fm.createElement(aj(n.h,n.h[0]),this.options)),n);if(((s=this._$AH)==null?void 0:s._$AD)===i)this._$AH.p(r);else{const o=new _Ae(i,this),a=o.u(this.options);o.p(r),this.T(a),this._$AH=o}}_$AC(e){let r=y$.get(e.strings);return r===void 0&&y$.set(e.strings,r=new Fm(e)),r}k(e){F5(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new Cy(this.O(jm()),this.O(jm()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)==null?void 0:n.call(this,!1,!0,r);e!==this._$AB;){const i=h$(e).nextSibling;h$(e).remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cv=e,(r=this._$AP)==null||r.call(this,e))}}class I2{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,i,s){this.type=1,this._$AH=Qn,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Qn}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=Tp(this,e,r,0),o=!Um(e)||e!==this._$AH&&e!==Mp,o&&(this._$AH=e);else{const a=e;let c,l;for(e=s[0],c=0;c<s.length-1;c++)l=Tp(this,a[n+c],r,c),l===Mp&&(l=this._$AH[c]),o||(o=!Um(l)||l!==this._$AH[c]),l===Qn?e=Qn:e!==Qn&&(e+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!i&&this.j(e)}j(e){e===Qn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class SAe extends I2{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Qn?void 0:e}}class xAe extends I2{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Qn)}}class IAe extends I2{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){if((e=Tp(this,e,r,0)??Qn)===Mp)return;const n=this._$AH,i=e===Qn&&n!==Qn||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,s=e!==Qn&&(n===Qn||i);i&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,e):this._$AH.handleEvent(e)}}class AAe{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Tp(this,e)}}const J3=Og.litHtmlPolyfillSupport;J3==null||J3(Fm,Cy),(Og.litHtmlVersions??(Og.litHtmlVersions=[])).push("3.3.2");const CAe=(t,e,r)=>{const n=(r==null?void 0:r.renderBefore)??e;let i=n._$litPart$;if(i===void 0){const s=(r==null?void 0:r.renderBefore)??null;n._$litPart$=i=new Cy(e.insertBefore(jm(),s),s,void 0,r??{})}return i._$AI(t),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Sh=globalThis;class z1 extends mf{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const e=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=e.firstChild),e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=CAe(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Mp}}var _$;z1._$litElement$=!0,z1.finalized=!0,(_$=Sh.litElementHydrateSupport)==null||_$.call(Sh,{LitElement:z1});const X3=Sh.litElementPolyfillSupport;X3==null||X3({LitElement:z1});(Sh.litElementVersions??(Sh.litElementVersions=[])).push("4.2.2");let kg,lu,uu;function jCe(t,e){kg=document.createElement("style"),lu=document.createElement("style"),uu=document.createElement("style"),kg.textContent=Jf(t).core.cssText,lu.textContent=Jf(t).dark.cssText,uu.textContent=Jf(t).light.cssText,document.head.appendChild(kg),document.head.appendChild(lu),document.head.appendChild(uu),cj(e)}function cj(t){lu&&uu&&(t==="light"?(lu.removeAttribute("media"),uu.media="enabled"):(uu.removeAttribute("media"),lu.media="enabled"))}function NAe(t){kg&&lu&&uu&&(kg.textContent=Jf(t).core.cssText,lu.textContent=Jf(t).dark.cssText,uu.textContent=Jf(t).light.cssText)}function Jf(t){return{core:Zf`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${go(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${go((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${go((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${go((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${go((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Zf`
      :root {
        --w3m-color-mix: ${go((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${go(Gl(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${go(Gl(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Zf`
      :root {
        --w3m-color-mix: ${go((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${go(Gl(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${go(Gl(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const UCe=Zf`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,FCe=Zf`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,zCe=Zf`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Ww={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603};function Ny(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const ox=Ny({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),ax=Ny({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),MAe=Ny({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Ny({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Ny({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const TAe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},lj={getMethodsByChainNamespace(t){return TAe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const r={...t},n=new Set;if(e.methods&&Object.keys(e.methods).forEach(i=>n.add(i)),e.chains&&Object.keys(e.chains).forEach(i=>n.add(i)),e.events&&Object.keys(e.events).forEach(i=>n.add(i)),e.rpcMap&&Object.keys(e.rpcMap).forEach(i=>{const[s]=i.split(":");s&&n.add(s)}),n.forEach(i=>{r[i]||(r[i]=this.createDefaultNamespace(i))}),e.methods&&Object.entries(e.methods).forEach(([i,s])=>{r[i]&&(r[i].methods=s)}),e.chains&&Object.entries(e.chains).forEach(([i,s])=>{r[i]&&(r[i].chains=s)}),e.events&&Object.entries(e.events).forEach(([i,s])=>{r[i]&&(r[i].events=s)}),e.rpcMap){const i=new Set;Object.entries(e.rpcMap).forEach(([s,o])=>{const[a,c]=s.split(":");!a||!c||!r[a]||(r[a].rpcMap||(r[a].rpcMap={}),i.has(a)||(r[a].rpcMap={},i.add(a)),r[a].rpcMap[c]=o)})}return r},createNamespaces(t,e){const r=t.reduce((n,i)=>{const{id:s,chainNamespace:o,rpcUrls:a}=i,c=a.default.http[0];n[o]||(n[o]=this.createDefaultNamespace(o));const l=`${o}:${s}`,u=n[o];switch(u.chains.push(l),l){case ox.caipNetworkId:u.chains.push(ox.deprecatedCaipNetworkId);break;case ax.caipNetworkId:u.chains.push(ax.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[s]=c),n},{});return this.applyNamespaceOverrides(r,e)},resolveReownName:async t=>{var n;const e=await OL.resolveName(t);return((n=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:n.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const r=e.chains||[],n=e.accounts.map(i=>{const[s,o]=i.split(":");return`${s}:${o}`});return Array.from(new Set([...r,...n]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null}};class uj{constructor({provider:e,caipNetworks:r,namespace:n}){this.id=Ue.CONNECTOR_ID.WALLET_CONNECT,this.name=rv.ConnectorNamesMap[Ue.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=rv.ConnectorImageIds[Ue.CONNECTOR_ID.WALLET_CONNECT],this.caipNetworks=r,this.provider=e,this.chain=n}get chains(){return this.caipNetworks}async connectWalletConnect(){if(!await this.authenticate()){const r=ge.state.universalProviderConfigOverride,n=lj.createNamespaces(this.caipNetworks,r);await this.provider.connect({optionalNamespaces:n})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(r=>r.caipNetworkId);return Cg.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:$Ae})}}const $Ae=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class PAe{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,e&&this.construct(e)}construct(e){this.caipNetworks=e.networks,this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.caipNetworks||[]}setAuthProvider(e){this.addConnector({id:Ue.CONNECTOR_ID.AUTH,type:"AUTH",name:Ue.CONNECTOR_NAMES.AUTH,provider:e,imageId:rv.ConnectorImageIds[Ue.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const r=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>r.has(n.id)?!1:(r.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,r){qe.setStatus(e,r)}on(e,r){var n;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(n=this.eventListeners.get(e))==null||n.add(r)}off(e,r){const n=this.eventListeners.get(e);n&&n.delete(r)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,r){const n=this.eventListeners.get(e);n&&n.forEach(i=>i(r))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:r,providerType:n}=e;if(!e.provider)return;const i="provider"in e.provider?e.provider.provider:e.provider;if(n==="WALLET_CONNECT"){i.setDefaultChain(r.caipNetworkId);return}if(i&&n==="AUTH"){const s=i;await s.switchNetwork(r.caipNetworkId);const o=await s.getUser({chainId:r.caipNetworkId,preferredAccountType:ge.state.defaultAccountTypes[r.chainNamespace]});this.emit("switchNetwork",o)}}getWalletConnectConnector(){const e=this.connectors.find(r=>r instanceof uj);if(!e)throw new Error("WalletConnectConnector not found");return e}}class OAe extends PAe{setUniversalProvider(e){this.addConnector(new uj({provider:e,caipNetworks:this.caipNetworks||[],namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var i,s,o,a;const r=this.provider,n=((a=(o=(s=(i=r==null?void 0:r.session)==null?void 0:i.namespaces)==null?void 0:s[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:n.map(c=>dt.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var s,o,a,c,l;if(!(e.caipNetwork&&Es.BALANCE_SUPPORTED_CHAINS.includes((s=e.caipNetwork)==null?void 0:s.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(qe.state.balanceLoading&&e.chainId===((c=Y.state.activeCaipNetwork)==null?void 0:c.id))return{balance:qe.state.balance||"0.00",symbol:qe.state.balanceSymbol||""};const i=(await qe.fetchTokenBalance()).find(u=>{var h,d;return u.chainId===`${(h=e.caipNetwork)==null?void 0:h.chainNamespace}:${e.chainId}`&&u.symbol===((d=e.caipNetwork)==null?void 0:d.nativeCurrency.symbol)});return{balance:(i==null?void 0:i.quantity.numeric)||"0.00",symbol:(i==null?void 0:i.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:r,message:n,address:i}=e;if(!r)throw new Error("UniversalAdapter:signMessage - provider is undefined");let s="";return((o=Y.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===Ue.CHAIN.SOLANA?s=(await r.request({method:"solana_signMessage",params:{message:KL.encode(new TextEncoder().encode(n)),pubkey:i}},(a=Y.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:s=await r.request({method:"personal_sign",params:[n,i]},(c=Y.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:s}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async getProfile(){return Promise.resolve({profileImage:"",profileName:""})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}async getEnsAddress(){return Promise.resolve({address:!1})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var i,s,o,a,c,l;const{caipNetwork:r}=e,n=this.getWalletConnectConnector();if(r.chainNamespace===Ue.CHAIN.EVM)try{await((i=n.provider)==null?void 0:i.request({method:"wallet_switchEthereumChain",params:[{chainId:bM(r.id)}]}))}catch(u){if(u.code===Ww.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Ww.ERROR_INVALID_CHAIN_ID||u.code===Ww.ERROR_CODE_DEFAULT||((o=(s=u==null?void 0:u.data)==null?void 0:s.originalError)==null?void 0:o.code)===Ww.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=n.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:bM(r.id),rpcUrls:[(a=r==null?void 0:r.rpcUrls.chainDefault)==null?void 0:a.http],chainName:r.name,nativeCurrency:r.nativeCurrency,blockExplorerUrls:[(c=r.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(r.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(n=>n.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}class kAe{constructor(e){var r;this.hasSwitchedToPreferredAccountTypeOnConnect=!1,this.chainNamespaces=[],this.reportedAlertErrors={},this.getCaipNetwork=n=>{var i,s;if(n){const o=(i=Y.getNetworkData(n))==null?void 0:i.caipNetwork;return o||((s=Y.getRequestedCaipNetworks(n).filter(a=>a.chainNamespace===n))==null?void 0:s[0])}return Y.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>Y.getRequestedCaipNetworks(n),this.getActiveChainNamespace=()=>Y.state.activeChain,this.setRequestedCaipNetworks=(n,i)=>{Y.setRequestedCaipNetworks(n,i)},this.getApprovedCaipNetworkIds=()=>Y.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>Y.state.activeChain===n||!n?Y.state.activeCaipAddress:Y.getAccountProp("caipAddress",n),this.setClientId=n=>{Ge.setClientId(n)},this.getProvider=n=>Qr.getProvider(n),this.getProviderType=n=>Qr.getProviderId(n),this.getPreferredAccountType=()=>qe.state.preferredAccountType,this.setCaipAddress=(n,i)=>{qe.setCaipAddress(n,i)},this.setBalance=(n,i,s)=>{qe.setBalance(n,i,s)},this.setProfileName=(n,i)=>{qe.setProfileName(n,i)},this.setProfileImage=(n,i)=>{qe.setProfileImage(n,i)},this.setUser=(n,i)=>{qe.setUser(n,i),ge.state.enableEmbedded&&An.close()},this.resetAccount=n=>{qe.resetAccount(n)},this.setCaipNetwork=n=>{Y.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,i)=>{Y.setChainNetworkData(i,{caipNetwork:n})},this.setAllAccounts=(n,i)=>{qe.setAllAccounts(n,i),ge.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,i)=>{qe.setStatus(n,i),ut.isConnected()?Oe.setConnectionStatus("connected"):Oe.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>Y.getAccountProp("address",n),this.setConnectors=n=>{const i=[...ut.getConnectors(),...n];ut.setConnectors(i)},this.fetchIdentity=n=>Ge.fetchIdentity(n),this.getReownName=n=>OL.getNamesForAddress(n),this.getConnectors=()=>ut.getConnectors(),this.getConnectorImage=n=>EL.getConnectorImage(n),this.setConnectedWalletInfo=(n,i)=>{const s=Qr.getProviderId(i),o=n?{...n,type:s}:void 0;qe.setConnectedWalletInfo(o,i)},this.getIsConnectedState=()=>!!Y.state.activeCaipAddress,this.addAddressLabel=(n,i,s)=>{qe.addAddressLabel(n,i,s)},this.removeAddressLabel=(n,i)=>{qe.removeAddressLabel(n,i)},this.getAddress=n=>Y.state.activeChain===n||!n?qe.state.address:Y.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>Y.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{Y.resetNetwork(n)},this.addConnector=n=>{ut.addConnector(n)},this.resetWcConnection=()=>{_r.resetWcConnection()},this.setAddressExplorerUrl=(n,i)=>{qe.setAddressExplorerUrl(n,i)},this.setSmartAccountDeployed=(n,i)=>{qe.setSmartAccountDeployed(n,i)},this.setSmartAccountEnabledNetworks=(n,i)=>{Y.setSmartAccountEnabledNetworks(n,i)},this.setPreferredAccountType=(n,i)=>{qe.setPreferredAccountType(n,i)},this.setEIP6963Enabled=n=>{ge.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=[...new Set((r=this.caipNetworks)==null?void 0:r.map(n=>n.chainNamespace))],this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.initialize(e),this.sendInitializeEvent(e)}async initialize(e){this.initControllers(e),await this.initChainAdapters(),await this.injectModalUi(),await this.syncExistingConnection(),Wc.set({initialized:!0})}sendInitializeEvent(e){var n;const{...r}=e;delete r.adapters,xr.sendEvent({type:"track",event:"INITIALIZE",properties:{...r,networks:e.networks.map(i=>i.id),siweConfig:{options:((n=e.siweConfig)==null?void 0:n.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Qi.setThemeMode(e.themeMode),e.themeVariables&&Qi.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");Y.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const r=this.getDefaultNetwork();r&&Y.setActiveCaipNetwork(r)}initializeConnectionController(e){_r.setWcBasic(e.basic??!1)}initializeConnectorController(){ut.initialize(this.chainNamespaces)}initializeOptionsController(e){var i;ge.setDebug(e.debug!==!1),ge.setEnableWalletConnect(e.enableWalletConnect!==!1),ge.setEnableWalletGuide(e.enableWalletGuide!==!1),ge.setEnableWallets(e.enableWallets!==!1),ge.setEIP6963Enabled(e.enableEIP6963!==!1),ge.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ge.setEnableAuthLogger(e.enableAuthLogger!==!1),ge.setCustomRpcUrls(e.customRpcUrls),ge.setSdkVersion(e.sdkVersion),ge.setProjectId(e.projectId),ge.setEnableEmbedded(e.enableEmbedded),ge.setAllWallets(e.allWallets),ge.setIncludeWalletIds(e.includeWalletIds),ge.setExcludeWalletIds(e.excludeWalletIds),ge.setFeaturedWalletIds(e.featuredWalletIds),ge.setTokens(e.tokens),ge.setTermsConditionsUrl(e.termsConditionsUrl),ge.setPrivacyPolicyUrl(e.privacyPolicyUrl),ge.setCustomWallets(e.customWallets),ge.setFeatures(e.features),ge.setAllowUnsupportedChain(e.allowUnsupportedChain),ge.setDefaultAccountTypes(e.defaultAccountTypes),ge.setUniversalProviderConfigOverride(e.universalProviderConfigOverride);const r=this.getDefaultMetaData();if(!e.metadata&&r&&(e.metadata=r),ge.setMetadata(e.metadata),ge.setDisableAppend(e.disableAppend),ge.setEnableEmbedded(e.enableEmbedded),ge.setSIWX(e.siwx),!e.projectId){P1.open(qw.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((i=e.adapters)==null?void 0:i.find(s=>s.namespace===Ue.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ge.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,r,n,i;return typeof window<"u"&&typeof document<"u"?{name:((r=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:r.textContent)||"",description:((n=document.querySelector('meta[property="og:description"]'))==null?void 0:n.content)||"",url:window.location.origin,icons:[((i=document.querySelector('link[rel~="icon"]'))==null?void 0:i.href)||""]}:null}setUnsupportedNetwork(e){const r=this.getActiveChainNamespace();if(r){const n=gf.getUnsupportedNetwork(`${r}:${e}`);Y.setActiveCaipNetwork(n)}}getDefaultNetwork(){return gf.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,r){return gf.extendCaipNetwork(e,{customNetworkImageUrls:r.chainImages,projectId:r.projectId})}extendCaipNetworks(e){return gf.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const r=e.networks.find(i=>{var s;return i.id===((s=e.defaultNetwork)==null?void 0:s.id)});return r?gf.extendCaipNetwork(r,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var s;const e=Y.state.activeChain,r=this.getAdapter(e),n=(s=this.getCaipNetwork(e))==null?void 0:s.id;if(!r)throw new Error("Adapter not found");const i=await r.connectWalletConnect(n);this.close(),this.setClientId((i==null?void 0:i.clientId)||null),Oe.setConnectedNamespaces([...Y.state.chains.keys()]),this.chainNamespaces.forEach(o=>{ut.setConnectorId(Al.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:r,type:n,provider:i,chain:s,caipNetwork:o})=>{var g,m,v,$,_,S,A;const a=Y.state.activeChain,c=s||a,l=this.getAdapter(c);if(s&&s!==a&&!o){const T=(g=this.caipNetworks)==null?void 0:g.find(k=>k.chainNamespace===s);T&&this.setCaipNetwork(T)}if(!l)throw new Error("Adapter not found");const u=this.getCaipNetwork(c),h=await l.connect({id:e,info:r,type:n,provider:i,chainId:(o==null?void 0:o.id)||(u==null?void 0:u.id),rpcUrl:(($=(v=(m=o==null?void 0:o.rpcUrls)==null?void 0:m.default)==null?void 0:v.http)==null?void 0:$[0])||((A=(S=(_=u==null?void 0:u.rpcUrls)==null?void 0:_.default)==null?void 0:S.http)==null?void 0:A[0])});if(!h)return;Oe.addConnectedNamespace(c),this.syncProvider({...h,chainNamespace:c}),await this.syncAccount({...h,chainNamespace:c});const{accounts:d}=await l.getAccounts({namespace:c,id:e});this.setAllAccounts(d,c)},reconnectExternal:async({id:e,info:r,type:n,provider:i})=>{var a;const s=Y.state.activeChain,o=this.getAdapter(s);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:r,type:n,provider:i,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Oe.addConnectedNamespace(s))},disconnect:async e=>{const r=e||Y.state.activeChain,n=this.getAdapter(r),i=Qr.getProvider(r),s=Qr.getProviderId(r);await(n==null?void 0:n.disconnect({provider:i,providerType:s})),Oe.removeConnectedNamespace(r),Qr.resetChain(r),this.setUser(void 0,r),this.setStatus("disconnected",r),this.hasSwitchedToPreferredAccountTypeOnConnect=!1},checkInstalled:e=>e?e.some(r=>{var n;return!!((n=window.ethereum)!=null&&n[String(r)])}):!!window.ethereum,signMessage:async e=>{const r=this.getAdapter(Y.state.activeChain),n=await(r==null?void 0:r.signMessage({message:e,address:qe.state.address,provider:Qr.getProvider(Y.state.activeChain)}));return(n==null?void 0:n.signature)||""},sendTransaction:async e=>{if(e.chainNamespace===Ue.CHAIN.EVM){const r=this.getAdapter(Y.state.activeChain),n=Qr.getProvider(Y.state.activeChain),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:n}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===Ue.CHAIN.EVM){const r=this.getAdapter(Y.state.activeChain),n=Qr.getProvider(Y.state.activeChain),i=this.getCaipNetwork();if(!i)throw new Error("CaipNetwork is undefined");const s=await(r==null?void 0:r.estimateGas({...e,provider:n,caipNetwork:i}));return(s==null?void 0:s.gas)||0n}return 0n},getEnsAvatar:async()=>{var n;const e=this.getAdapter(Y.state.activeChain),r=await(e==null?void 0:e.getProfile({address:qe.state.address,chainId:Number((n=this.getCaipNetwork())==null?void 0:n.id)}));return(r==null?void 0:r.profileImage)||!1},getEnsAddress:async e=>{const r=this.getAdapter(Y.state.activeChain),n=this.getCaipNetwork();if(!n)return!1;const i=await(r==null?void 0:r.getEnsAddress({name:e,caipNetwork:n}));return(i==null?void 0:i.address)||!1},writeContract:async e=>{const r=this.getAdapter(Y.state.activeChain),n=this.getCaipNetwork(),i=this.getCaipAddress(),s=Qr.getProvider(Y.state.activeChain);if(!n||!i)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(r==null?void 0:r.writeContract({...e,caipNetwork:n,provider:s,caipAddress:i}));return o==null?void 0:o.hash},parseUnits:(e,r)=>{const n=this.getAdapter(Y.state.activeChain);return(n==null?void 0:n.parseUnits({value:e,decimals:r}))??0n},formatUnits:(e,r)=>{const n=this.getAdapter(Y.state.activeChain);return(n==null?void 0:n.formatUnits({value:e,decimals:r}))??"0"},getCapabilities:async e=>{const r=this.getAdapter(Y.state.activeChain);return await(r==null?void 0:r.getCapabilities(e))},grantPermissions:async e=>{const r=this.getAdapter(Y.state.activeChain);return await(r==null?void 0:r.grantPermissions(e))},revokePermissions:async e=>{const r=this.getAdapter(Y.state.activeChain);return r!=null&&r.revokePermissions?await r.revokePermissions(e):"0x"},walletGetAssets:async e=>{const r=this.getAdapter(Y.state.activeChain);return await(r==null?void 0:r.walletGetAssets(e))??{}}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},_r.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var r,n,i,s,o;if(Qr.getProviderId(Y.state.activeChain)===Al.CONNECTOR_TYPE_WALLET_CONNECT){const a=(n=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:n.namespaces;return{supportsAllNetworks:((o=(s=(i=this.universalProvider)==null?void 0:i.session)==null?void 0:s.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const r=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const i=Qr.getProvider(r),s=Qr.getProviderId(r);if(e.chainNamespace===Y.state.activeChain){const o=this.getAdapter(r);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:i,providerType:s}))}else if(this.setCaipNetwork(e),s===Al.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(r);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:r})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(r=>{const n=r.chains||[],i=r.accounts.map(s=>{const{chainId:o,chainNamespace:a}=El.parseCaipAddress(s);return`${a}:${o}`});return Array.from(new Set([...n,...i]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((r,n)=>{var s;const i=e==null?void 0:e.find(o=>o.namespace===n);return i?(r[n]=i,r[n].namespace=n,r[n].construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.caipNetworks})):r[n]=new OAe({namespace:n,networks:this.caipNetworks}),r},{})}async initChainAdapter(e){var r;this.onConnectors(e),this.listenAdapter(e),(r=this.chainAdapters)==null||r[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const r=this.getAdapter(e);r==null||r.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const r=this.getAdapter(e);if(!r)return;const n=Oe.getConnectionStatus();n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(Oe.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),r.on("switchNetwork",({address:i,chainId:s})=>{var l;const o=(l=this.caipNetworks)==null?void 0:l.find(u=>u.id===s||u.caipNetworkId===s),a=Y.state.activeChain===e,c=Y.getAccountProp("address",e);if(o){const u=a&&i?i:c;u&&this.syncAccount({address:u,chainId:s,chainNamespace:e})}else this.setUnsupportedNetwork(s)}),r.on("disconnect",this.disconnect.bind(this,e)),r.on("pendingTransactions",()=>{const i=qe.state.address,s=Y.state.activeCaipNetwork;!i||!(s!=null&&s.id)||this.updateNativeBalance(i,s.id,s.chainNamespace)}),r.on("accountChanged",({address:i,chainId:s})=>{var a,c;const o=Y.state.activeChain===e;o&&s?this.syncAccount({address:i,chainId:s,chainNamespace:e}):o&&((a=Y.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:i,chainId:(c=Y.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(i,s,e)})}async createUniversalProviderForAdapter(e){var r,n,i;await this.getUniversalProvider(),this.universalProvider&&((i=(n=(r=this.chainAdapters)==null?void 0:r[e])==null?void 0:n.setUniversalProvider)==null||i.call(n,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{const r=ut.getConnectorId(e);switch(this.setStatus("connecting",e),r){case Ue.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case Ue.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(r){console.warn("AppKit couldn't sync existing connection",r),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var o,a,c;const r=this.getAdapter(e),n=ut.getConnectorId(e),i=this.getCaipNetwork(e),s=ut.getConnectors(e).find(l=>l.id===n);try{if(!r||!s)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(i!=null&&i.id))throw new Error("CaipNetwork not found");const l=await(r==null?void 0:r.syncConnection({namespace:e,id:s.id,chainId:i.id,rpcUrl:(c=(a=(o=i==null?void 0:i.rpcUrls)==null?void 0:o.default)==null?void 0:a.http)==null?void 0:c[0]}));if(l){const u=await(r==null?void 0:r.getAccounts({namespace:e,id:s.id}));u&&u.accounts.length>0?this.setAllAccounts(u.accounts,e):this.setAllAccounts([dt.createAccount(e,l.address,"eoa")],e),this.syncProvider({...l,chainNamespace:e}),await this.syncAccount({...l,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async r=>{var a,c,l,u,h;const n=this.getAdapter(r),i=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[r])==null?void 0:u.accounts)||[],s=(h=Y.state.activeCaipNetwork)==null?void 0:h.id,o=i.find(d=>{const{chainId:g}=El.parseCaipAddress(d);return g===(s==null?void 0:s.toString())})||i[0];if(o){const d=El.validateCaipAddress(o),{chainId:g,address:m}=El.parseCaipAddress(d);if(Qr.setProviderId(r,Al.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&Y.state.activeCaipNetwork&&(n==null?void 0:n.namespace)!==Ue.CHAIN.EVM){const v=n==null?void 0:n.getWalletConnectProvider({caipNetworks:this.caipNetworks,provider:this.universalProvider,activeCaipNetwork:Y.state.activeCaipNetwork});Qr.setProvider(r,v)}else Qr.setProvider(r,this.universalProvider);ut.setConnectorId(Ue.CONNECTOR_ID.WALLET_CONNECT,r),Oe.addConnectedNamespace(r),this.syncWalletConnectAccounts(r),await this.syncAccount({address:m,chainId:g,chainNamespace:r})}else this.setStatus("disconnected",r);await Y.setApprovedCaipNetworksData(r)});await Promise.all(e)}syncWalletConnectAccounts(e){var n,i,s,o,a;const r=(a=(o=(s=(i=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:i.namespaces)==null?void 0:s[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=El.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);r&&this.setAllAccounts(r.map(c=>dt.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:r,id:n,chainNamespace:i}){Qr.setProviderId(i,e),Qr.setProvider(i,r),ut.setConnectorId(n,i)}async syncAccount(e){var h,d,g,m,v,$;const r=e.chainNamespace===Y.state.activeChain,n=Y.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:i,chainId:s,chainNamespace:o}=e,{chainId:a}=Oe.getActiveNetworkProps(),c=s||a,l=((h=Y.state.activeCaipNetwork)==null?void 0:h.name)===Ue.UNSUPPORTED_NETWORK_NAME,u=Y.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let _=(d=this.caipNetworks)==null?void 0:d.find(T=>T.id.toString()===c.toString()),S=(g=this.caipNetworks)==null?void 0:g.find(T=>T.chainNamespace===o);if(!u&&!_&&!S){const T=this.getApprovedCaipNetworkIds()||[],k=T.find(L=>{var F;return((F=El.parseCaipNetworkId(L))==null?void 0:F.chainId)===c.toString()}),R=T.find(L=>{var F;return((F=El.parseCaipNetworkId(L))==null?void 0:F.chainNamespace)===o});_=(m=this.caipNetworks)==null?void 0:m.find(L=>L.caipNetworkId===k),S=(v=this.caipNetworks)==null?void 0:v.find(L=>L.caipNetworkId===R||"deprecatedCaipNetworkId"in L&&L.deprecatedCaipNetworkId===R)}const A=_||S;(A==null?void 0:A.chainNamespace)===Y.state.activeChain?ge.state.enableNetworkSwitch&&!ge.state.allowUnsupportedChain&&(($=Y.state.activeCaipNetwork)==null?void 0:$.name)===Ue.UNSUPPORTED_NETWORK_NAME?Y.showUnsupportedChainUI():this.setCaipNetwork(A):r||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o),ej.isLowerCaseMatch(i,qe.state.address)||this.syncAccountInfo(i,A==null?void 0:A.id,o),r?await this.syncBalance({address:i,chainId:A==null?void 0:A.id,chainNamespace:o}):await this.syncBalance({address:i,chainId:n==null?void 0:n.id,chainNamespace:o})}}async syncAccountInfo(e,r,n){const i=this.getCaipAddress(n),s=r||(i==null?void 0:i.split(":")[1]);if(!s)return;const o=`${n}:${s}:${e}`;this.setCaipAddress(o,n),await this.syncIdentity({address:e,chainId:s,chainNamespace:n})}async syncReownName(e,r){try{const n=await this.getReownName(e);if(n[0]){const i=n[0];this.setProfileName(i.name,r)}else this.setProfileName(null,r)}catch{this.setProfileName(null,r)}}syncConnectedWalletInfo(e){var i;const r=ut.getConnectorId(e),n=Qr.getProviderId(e);if(n===Al.CONNECTOR_TYPE_ANNOUNCED||n===Al.CONNECTOR_TYPE_INJECTED){if(r){const s=this.getConnectors().find(o=>o.id===r);if(s){const{info:o,name:a,imageUrl:c}=s,l=c||this.getConnectorImage(s);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(n===Al.CONNECTOR_TYPE_WALLET_CONNECT){const s=Qr.getProvider(e);s!=null&&s.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:(i=s.session.peer.metadata.icons)==null?void 0:i[0]},e)}else if(r)if(r===Ue.CONNECTOR_ID.COINBASE){const s=this.getConnectors().find(o=>o.id===Ue.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(s)},e)}else this.setConnectedWalletInfo({name:r},e)}async syncBalance(e){!wL.getNetworksByNamespace(this.caipNetworks,e.chainNamespace).find(n=>{var i;return n.id.toString()===((i=e.chainId)==null?void 0:i.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async updateNativeBalance(e,r,n){const i=this.getAdapter(n);if(i){const s=await i.getBalance({address:e,chainId:r,caipNetwork:this.getCaipNetwork(n),tokens:this.options.tokens});this.setBalance(s.balance,s.symbol,n)}}async initializeUniversalAdapter(){var n,i,s,o,a,c,l,u,h,d;const e=aAe.createLogger((g,...m)=>{g&&this.handleAlertError(g),console.error(...m)}),r={projectId:(n=this.options)==null?void 0:n.projectId,metadata:{name:(i=this.options)!=null&&i.metadata?(s=this.options)==null?void 0:s.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(h=this.options)==null?void 0:h.metadata.icons:[""]},logger:e};ge.setManualWCControl(!!((d=this.options)!=null&&d.manualWCControl)),this.universalProvider=this.options.universalProvider??await sAe.init(r),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{_r.setUri(e)}),this.universalProvider.on("connect",_r.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),_r.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{var i;const r=(i=this.caipNetworks)==null?void 0:i.find(s=>s.id==e),n=this.getCaipNetwork();if(!r){this.setUnsupportedNetwork(e);return}(n==null?void 0:n.id)!==(r==null?void 0:r.id)&&this.setCaipNetwork(r)}),this.universalProvider.on("session_event",e=>{if(lj.isSessionEventData(e)){const{name:r,data:n}=e.params.event;r==="accountsChanged"&&Array.isArray(n)&&dt.isCaipAddress(n[0])&&this.syncAccount(El.parseCaipAddress(n[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&dt.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){xr.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const r=Object.entries(qw.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,i]=r??[],{message:s,alertErrorKey:o}=i??{};if(n&&s&&!this.reportedAlertErrors[n]){const a=qw.ALERT_ERRORS[o];a&&(P1.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){var r;if(e)return(r=this.chainAdapters)==null?void 0:r[e]}createAdapter(e){var i;if(!e)return;const r=e.namespace;if(!r)return;this.createClients();const n=e;n.namespace=r,n.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.caipNetworks}),this.chainNamespaces.includes(r)||this.chainNamespaces.push(r),this.chainAdapters&&(this.chainAdapters[r]=n)}async open(e){await this.injectModalUi(),e!=null&&e.uri&&_r.setUri(e.uri),await An.open(e)}async close(){await this.injectModalUi(),An.close()}setLoading(e,r){An.setLoading(e,r)}async disconnect(e){await _r.disconnect(e)}getError(){return""}getChainId(){var e;return(e=Y.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){var n;const r=(n=this.caipNetworks)==null?void 0:n.find(i=>i.id===e.id);if(!r){P1.open(qw.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await Y.switchActiveNetwork(r)}getWalletProvider(){return Y.state.activeChain?Qr.state.providers[Y.state.activeChain]:null}getWalletProviderType(){return Qr.getProviderId(Y.state.activeChain)}subscribeProviders(e){return Qr.subscribeProviders(e)}getThemeMode(){return Qi.state.themeMode}getThemeVariables(){return Qi.state.themeVariables}setThemeMode(e){Qi.setThemeMode(e),cj(Qi.state.themeMode)}setTermsConditionsUrl(e){ge.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ge.setPrivacyPolicyUrl(e)}setThemeVariables(e){Qi.setThemeVariables(e),NAe(Qi.state.themeVariables)}subscribeTheme(e){return Qi.subscribe(e)}getWalletInfo(){return qe.state.connectedWalletInfo}getAccount(e){const r=ut.getAuthConnector(e),n=Y.getAccountData(e);if(n)return{allAccounts:n.allAccounts,caipAddress:n.caipAddress,address:dt.getPlainAddress(n.caipAddress),isConnected:!!n.caipAddress,status:n.status,embeddedWalletInfo:r?{user:n.user,authProvider:n.socialProvider||"email",accountType:n.preferredAccountType,isSmartAccountDeployed:!!n.smartAccountDeployed}:void 0}}subscribeAccount(e,r){const n=()=>{const i=this.getAccount(r);i&&e(i)};r?Y.subscribeChainProp("accountState",n,r):Y.subscribe(n),ut.subscribe(n)}subscribeNetwork(e){return Y.subscribe(({activeCaipNetwork:r})=>{e({caipNetwork:r,chainId:r==null?void 0:r.id,caipNetworkId:r==null?void 0:r.caipNetworkId})})}subscribeWalletInfo(e){return qe.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){qe.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){Y.subscribeKey("activeCaipNetwork",e)}getState(){return Wc.state}subscribeState(e){return Wc.subscribe(e)}showErrorMessage(e){gi.showError(e)}showSuccessMessage(e){gi.showSuccess(e)}getEvent(){return{...xr.state}}subscribeEvents(e){return xr.subscribe(e)}replace(e){Xt.replace(e)}redirect(e){Xt.push(e)}popTransactionStack(e){Xt.popTransactionStack(e)}isOpen(){return An.state.open}isTransactionStackEmpty(){return Xt.state.transactionStack.length===0}isTransactionShouldReplaceView(){var e;return(e=Xt.state.transactionStack[Xt.state.transactionStack.length-1])==null?void 0:e.replace}static getInstance(){return this.instance}updateFeatures(e){ge.setFeatures(e)}updateOptions(e){const n={...ge.state||{},...e};ge.setOptions(n)}setConnectMethodsOrder(e){ge.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ge.setWalletFeaturesOrder(e)}setCollapseWallets(e){ge.setCollapseWallets(e)}setSocialsOrder(e){ge.setSocialsOrder(e)}getConnectMethodsOrder(){return ix.getConnectOrderMethod(ge.state.features,ut.getConnectors())}removeAdapter(e){var s;const r=this.getIsConnectedState(),n=this.getAdapter(e);if(!n||!this.chainAdapters||r)return;const i=(s=this.caipNetworks)==null?void 0:s.filter(o=>o.chainNamespace!==e);Y.removeAdapter(e),ut.removeAdapter(e),this.chainNamespaces=this.chainNamespaces.filter(o=>o!==e),this.caipNetworks=i,n.removeAllEventListeners(),Reflect.deleteProperty(this.chainAdapters,e)}addAdapter(e,r){const n=e.namespace;if(!this.connectionControllerClient||!this.networkControllerClient||!this.chainAdapters||!n)return;const i=this.extendCaipNetworks({...this.options,networks:r});this.caipNetworks=[...this.caipNetworks||[],...i],this.createAdapter(e),this.initChainAdapter(n),Y.addAdapter(e,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient},i)}addNetwork(e,r){var i;if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(r,this.options);Y.addNetwork(n),this.caipNetworks&&!((i=this.caipNetworks)!=null&&i.find(s=>s.id===n.id))&&this.caipNetworks.push(n)}removeNetwork(e,r){var s;if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);if(!((s=this.caipNetworks)==null?void 0:s.find(o=>o.id===r)))throw new Error(`Network with ID ${r} not found`);if(!this.caipNetworks)return;const i=this.caipNetworks.filter(o=>o.chainNamespace===e&&o.id!==r);if(!(i!=null&&i.length))throw new Error("Cannot remove last network for a namespace");Y.removeNetwork(e,r),this.caipNetworks=[...i]}}let w$=!1;class RAe extends kAe{async open(e){ut.isConnected()||await super.open(e)}async close(){await super.close(),this.options.manualWCControl&&_r.finalizeWcConnection()}async syncIdentity(e){return Promise.resolve()}async syncBalance(e){return Promise.resolve()}async injectModalUi(){if(!w$&&dt.isClient()){if(await Th(()=>import("./basic-C2fQIivo.js"),__vite__mapDeps([0,1])),await Th(()=>import("./w3m-modal-tHC6yGxT.js"),__vite__mapDeps([2,1])),!document.querySelector("w3m-modal")){const r=document.createElement("w3m-modal");!ge.state.disableAppend&&!ge.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",r)}w$=!0}}}const DAe="1.7.2";function LAe(t){return new RAe({...t,basic:!0,sdkVersion:`html-core-${DAe}`})}function BAe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),h=u.charCodeAt(0);if(e[h]!==255)throw new TypeError(u+" is ambiguous");e[h]=l}const r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,h=0,d=0;const g=l.length;for(;d!==g&&l[d]===0;)d++,u++;const m=(g-d)*s+1>>>0,v=new Uint8Array(m);for(;d!==g;){let S=l[d],A=0;for(let T=m-1;(S!==0||A<h)&&T!==-1;T--,A++)S+=256*v[T]>>>0,v[T]=S%r>>>0,S=S/r>>>0;if(S!==0)throw new Error("Non-zero carry");h=A,d++}let $=m-h;for(;$!==m&&v[$]===0;)$++;let _=n.repeat(u);for(;$<m;++$)_+=t.charAt(v[$]);return _}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,h=0,d=0;for(;l[u]===n;)h++,u++;const g=(l.length-u)*i+1>>>0,m=new Uint8Array(g);for(;u<l.length;){const S=l.charCodeAt(u);if(S>255)return;let A=e[S];if(A===255)return;let T=0;for(let k=g-1;(A!==0||T<d)&&k!==-1;k--,T++)A+=r*m[k]>>>0,m[k]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");d=T,u++}let v=g-d;for(;v!==g&&m[v]===0;)v++;const $=new Uint8Array(h+(g-v));let _=h;for(;v!==g;)$[_++]=m[v++];return $}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var jAe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const e_=BAe(jAe);class Lf extends Error{constructor(){super(),Object.setPrototypeOf(this,Lf.prototype)}}class b$ extends Error{constructor(e){super(`WalletConnect Adapter - Method ${e} is not supported by the wallet`),this.name="WalletConnectFeatureNotSupportedError"}}function UAe(t){let e=[t];return t===$n.Mainnet||t===$n.Deprecated_Mainnet?(e=[$n.Mainnet,$n.Deprecated_Mainnet],t===$n.Deprecated_Mainnet&&console.warn(sv.mainnet)):(t===$n.Deprecated_Devnet||t===$n.Devnet)&&(e=[$n.Devnet,$n.Deprecated_Devnet],console.warn(sv.devnet)),e}const sv={mainnet:`You are using a deprecated chain ID for Solana Mainnet, please use ${$n.Mainnet} instead.`,devnet:`You are using a deprecated chain ID for Solana Devnet, please use ${$n.Devnet} instead.`,wallet:"The connected wallet is using a deprecated chain ID for Solana. Please, contact them to upgrade. You can learn more at https://github.com/ChainAgnostic/namespaces/blob/main/solana/caip10.md#chain-ids"};function v$(t,e){var n;const r=(n=t.namespaces.solana)==null?void 0:n.accounts.map(i=>`solana:${i.split(":")[1]}`);if(e===$n.Mainnet)return r!=null&&r.find(i=>i===$n.Mainnet)?$n.Mainnet:(console.warn(sv.wallet),$n.Deprecated_Mainnet);if(e===$n.Devnet)return r!=null&&r.find(i=>i===$n.Devnet)?$n.Devnet:(console.warn(sv.wallet),$n.Deprecated_Devnet);throw Error("WalletConnect Solana Adapter: Unable to get a default chain from the session.")}function FAe(t){return{optionalNamespaces:{solana:{chains:UAe(t),methods:[bo.signTransaction,bo.signMessage],events:[]}}}}class z5 extends Error{constructor(){super("QR Code Modal was closed by user"),Object.setPrototypeOf(this,z5.prototype),this.name="QRCodeModalError"}}class zAe{constructor(e){ot(this,"_UniversalProvider");ot(this,"_session");ot(this,"_modal");ot(this,"_projectId");ot(this,"_network");ot(this,"_ConnectQueueResolver");if(this.initClient(e.options),this._network=e.network,!e.options.projectId)throw Error("WalletConnect Adapter: Project ID is undefined");this._projectId=e.options.projectId}async connect(){var i,s,o,a,c,l;if(this._UniversalProvider||await new Promise(u=>{this._ConnectQueueResolver=u}),!this._UniversalProvider)throw new Error("WalletConnect Adapter - Universal Provider was undefined while calling 'connect()'");if(this._UniversalProvider.session){this._session=this._UniversalProvider.session;const u=v$(this._session,this._network);return this._network=u,this._UniversalProvider.setDefaultChain(u),{publicKey:this.publicKey}}await this.initModal();const e=FAe(this._network);(i=this._modal)==null||i.open();const r=new AbortController,n=r.signal;(s=this._modal)==null||s.subscribeState(u=>{u.open||r.abort(new z5)});try{const u=await Promise.race([(o=this._UniversalProvider)==null?void 0:o.connect(e),new Promise((d,g)=>{n.addEventListener("abort",()=>{g(n.reason)})})]);if((a=this._modal)==null||a.close(),this._session=u,!u)throw new ca;const h=v$(u,this._network);return this._network=h,(c=this._UniversalProvider)==null||c.setDefaultChain(h),{publicKey:this.publicKey}}catch(u){throw(l=this._modal)==null||l.close(),u}}async disconnect(){var e;if((e=this._UniversalProvider)!=null&&e.session){if(await this.initModal(),!this._modal)throw Error("WalletConnect Adapter -Modal is undefined: unable to disconnect");await this.client.disconnect(),this._session=void 0}else throw new Lf}get client(){if(this._UniversalProvider)return this._UniversalProvider;throw new Lf}get session(){if(!this._session)throw new Lf;return this._session}get publicKey(){var e,r,n;if((e=this._UniversalProvider)!=null&&e.session&&this._session){const{address:i}=Ese(((n=(r=this._session)==null?void 0:r.namespaces.solana)==null?void 0:n.accounts[0])??"");return new Ae(i)}throw new Lf}async signTransaction(e){this.checkIfWalletSupportsMethod(bo.signTransaction);const r=xo(e),n=r?{}:e,{signature:i,transaction:s}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:bo.signTransaction,params:{...n,transaction:this.serialize(e)}}});return s?this.deserialize(s,r):(e.addSignature(this.publicKey,Buffer.from(e_.decode(i))),e)}async signMessage(e){this.checkIfWalletSupportsMethod(bo.signMessage);const{signature:r}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:bo.signMessage,params:{pubkey:this.publicKey.toString(),message:e_.encode(e)}}});return e_.decode(r)}async signAndSendTransaction(e){this.checkIfWalletSupportsMethod(bo.signAndSendTransaction);const{signature:r}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:bo.signAndSendTransaction,params:{transaction:this.serialize(e)}}});return r}async signAllTransactions(e){try{this.checkIfWalletSupportsMethod(bo.signAllTransactions);const r=e.map(i=>this.serialize(i)),{transactions:n}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:bo.signAllTransactions,params:{transactions:r}}});return e.map((i,s)=>xo(i)?this.deserialize(n[s]??"",!0):this.deserialize(n[s]??""))}catch(r){if(r instanceof b$){const n=e.map(s=>this.signTransaction(s));return await Promise.all(n)}throw r}}async initClient(e){const r=await L1e.init(e);this._UniversalProvider=r,this._ConnectQueueResolver&&this._ConnectQueueResolver(!0)}async initModal(){if(!this._modal){if(!this._UniversalProvider)throw new Error("WalletConnect Adapter - cannot init modal when Universal Provider is undefined");this._modal=LAe({projectId:this._projectId,universalProvider:this._UniversalProvider,networks:[ox,ax,MAe],manualWCControl:!0})}}serialize(e){return Buffer.from(e.serialize({verifySignatures:!1})).toString("base64")}deserialize(e,r=!1){return r?lp.deserialize(Buffer.from(e,"base64")):wi.from(Buffer.from(e,"base64"))}checkIfWalletSupportsMethod(e){var r;if(!((r=this.session.namespaces.solana)!=null&&r.methods.includes(e)))throw new b$(e)}}const qAe="WalletConnect";class WAe extends PI{constructor(r){super();ot(this,"name",qAe);ot(this,"url","https://walletconnect.org");ot(this,"icon","data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE4NSIgdmlld0JveD0iMCAwIDMwMCAxODUiIHdpZHRoPSIzMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTYxLjQzODU0MjkgMzYuMjU2MjYxMmM0OC45MTEyMjQxLTQ3Ljg4ODE2NjMgMTI4LjIxMTk4NzEtNDcuODg4MTY2MyAxNzcuMTIzMjA5MSAwbDUuODg2NTQ1IDUuNzYzNDE3NGMyLjQ0NTU2MSAyLjM5NDQwODEgMi40NDU1NjEgNi4yNzY1MTEyIDAgOC42NzA5MjA0bC0yMC4xMzY2OTUgMTkuNzE1NTAzYy0xLjIyMjc4MSAxLjE5NzIwNTEtMy4yMDUzIDEuMTk3MjA1MS00LjQyODA4MSAwbC04LjEwMDU4NC03LjkzMTE0NzljLTM0LjEyMTY5Mi0zMy40MDc5ODE3LTg5LjQ0Mzg4Ni0zMy40MDc5ODE3LTEyMy41NjU1Nzg4IDBsLTguNjc1MDU2MiA4LjQ5MzYwNTFjLTEuMjIyNzgxNiAxLjE5NzIwNDEtMy4yMDUzMDEgMS4xOTcyMDQxLTQuNDI4MDgwNiAwbC0yMC4xMzY2OTQ5LTE5LjcxNTUwMzFjLTIuNDQ1NTYxMi0yLjM5NDQwOTItMi40NDU1NjEyLTYuMjc2NTEyMiAwLTguNjcwOTIwNHptMjE4Ljc2Nzc5NjEgNDAuNzczNzQ0OSAxNy45MjE2OTcgMTcuNTQ2ODk3YzIuNDQ1NTQ5IDIuMzk0Mzk2OSAyLjQ0NTU2MyA2LjI3NjQ3NjkuMDAwMDMxIDguNjcwODg5OWwtODAuODEwMTcxIDc5LjEyMTEzNGMtMi40NDU1NDQgMi4zOTQ0MjYtNi40MTA1ODIgMi4zOTQ0NTMtOC44NTYxNi4wMDAwNjItLjAwMDAxLS4wMDAwMS0uMDAwMDIyLS4wMDAwMjItLjAwMDAzMi0uMDAwMDMybC01Ny4zNTQxNDMtNTYuMTU0NTcyYy0uNjExMzktLjU5ODYwMi0xLjYwMjY1LS41OTg2MDItMi4yMTQwNCAwLS4wMDAwMDQuMDAwMDA0LS4wMDAwMDcuMDAwMDA4LS4wMDAwMTEuMDAwMDExbC01Ny4zNTI5MjEyIDU2LjE1NDUzMWMtMi40NDU1MzY4IDIuMzk0NDMyLTYuNDEwNTc1NSAyLjM5NDQ3Mi04Ljg1NjE2MTIuMDAwMDg3LS4wMDAwMTQzLS4wMDAwMTQtLjAwMDAyOTYtLjAwMDAyOC0uMDAwMDQ0OS0uMDAwMDQ0bC04MC44MTI0MTk0My03OS4xMjIxODVjLTIuNDQ1NTYwMjEtMi4zOTQ0MDgtMi40NDU1NjAyMS02LjI3NjUxMTUgMC04LjY3MDkxOTdsMTcuOTIxNzI5NjMtMTcuNTQ2ODY3M2MyLjQ0NTU2MDItMi4zOTQ0MDgyIDYuNDEwNTk4OS0yLjM5NDQwODIgOC44NTYxNjAyIDBsNTcuMzU0OTc3NSA1Ni4xNTUzNTdjLjYxMTM5MDguNTk4NjAyIDEuNjAyNjQ5LjU5ODYwMiAyLjIxNDAzOTggMCAuMDAwMDA5Mi0uMDAwMDA5LjAwMDAxNzQtLjAwMDAxNy4wMDAwMjY1LS4wMDAwMjRsNTcuMzUyMTAzMS01Ni4xNTUzMzNjMi40NDU1MDUtMi4zOTQ0NjMzIDYuNDEwNTQ0LTIuMzk0NTUzMSA4Ljg1NjE2MS0uMDAwMi4wMDAwMzQuMDAwMDMzNi4wMDAwNjguMDAwMDY3My4wMDAxMDEuMDAwMTAxbDU3LjM1NDkwMiA1Ni4xNTU0MzJjLjYxMTM5LjU5ODYwMSAxLjYwMjY1LjU5ODYwMSAyLjIxNDA0IDBsNTcuMzUzOTc1LTU2LjE1NDMyNDljMi40NDU1NjEtMi4zOTQ0MDkyIDYuNDEwNTk5LTIuMzk0NDA5MiA4Ljg1NjE2IDB6IiBmaWxsPSIjM2I5OWZjIi8+PC9zdmc+");ot(this,"supportedTransactionVersions",new Set(["legacy",0]));ot(this,"_publicKey");ot(this,"_connecting");ot(this,"_wallet");ot(this,"_config");ot(this,"_readyState");ot(this,"_onDisconnect");this._publicKey=null,this._connecting=!1,this._config=r,this._wallet=null,this._readyState=typeof window>"u"?ke.Unsupported:ke.Loadable,this._onDisconnect=this.disconnect.bind(this)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ke.Loadable)throw new aa;this._connecting=!0,this._wallet=new zAe({network:this._config.network===oS.Mainnet?Ob.Mainnet:Ob.Devnet,options:this._config.options});const{publicKey:r}=await this._wallet.connect();this._publicKey=r,this.emit("connect",r),this._wallet.client.on("session_delete",this._onDisconnect)}catch(r){throw r.constructor.name==="QRCodeModalError"||r instanceof Error&&r.name==="QRCodeModalError"?new XK:(this._connecting=!1,r)}finally{this._connecting=!1}}async disconnect(){const r=this._wallet;if(r){r.client.off("session_delete",this._onDisconnect),this._publicKey=null;try{r.client.session&&await r.disconnect()}catch(n){console.error("WalletConnectWalletAdapter: disconnect error",n),this.emit("error",new pu(n==null?void 0:n.message,n))}}this.emit("disconnect")}async signTransaction(r){try{const n=this._wallet;if(!n)throw new Ct;try{return await n.signTransaction(r)}catch(i){throw new mn(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}async signMessage(r){try{const n=this._wallet;if(!n)throw new Ct;try{return await n.signMessage(r)}catch(i){throw new Qh(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}async signAndSendTransaction(r){try{const n=this._wallet;if(!n)throw new Ct;try{return await n.signAndSendTransaction(r)}catch(i){throw new mn(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}async signAllTransactions(r){try{const n=this._wallet;if(!n)throw new Ct;try{return await n.signAllTransactions(r)}catch(i){throw new mn(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}}const HAe="Backpack";class KAe extends ny{constructor(e={}){super(),this.name=HAe,this.url="https://backpack.app",this.icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAbvSURBVHgB7Z1dUtxGEMf/LZH3fU0V4PUJQg4QVj5BnBOAT2BzAsMJAicwPoHJCRDrAxifgLVxVV73ObDqdEtsjKn4C8+0NDv9e7AxprRC85uvnp4RYYW5qKpxCVTcYKsgfiDfGjMwIsZIvh7d/lkmzAiYy5fzhultyZhdlagf1vU5VhjCiiGFXq01zYSJdqWgx/hB5AHN5I/6iuilyFBjxVgZAdqCZ34ORoVIqAzSOhxsvq6PsSIkL4A281LwL2IW/F1UhLKgRz/X9QyJUyBhuuae31gWviLjiPF1wxeX29vPkTjJtgAftrd3GHSMnmHw4eZ0uodESVKAoRT+kpQlSE6Ats/XZv/ONK5vZHC49+B1fYjESG4MUDKfYmCFr0ic4fmHqtpCYiQlgA66QsztIzFi5j+RGMl0AXebfgn0aOTuvGG8owIarZsXOj3ronlRuEYnn84CJLo4Lgi/QL/H/LHmy/RwI6GA0RoS4acFHi8kGieFXS/QhmijFfQXmH3uPy5lSkoLbIkYlfyzhuM4juM4juM4juMMj6TzATQ4JH9tlRqFk8BM2aV9RWHB9K5kzK/KLui0KqliSQmgBa4BIS54cpMD0OeawFye3jk19JdKkWq62OAFkEIfrTXNUxBV1okf38Ot3MGjlFqHwQrQZvQ22Cfw7xjg6t8XkZaBGzpKIXdwcAJojZeCP5SC30HipJBEOigBZLn3qdzSPlKr8V9hyEmkgxCgj8zefuD9jen0AAOidwE0i6ZhfjXgRI+gDK016DUjqE3ubPhNLoWvaDLJouHToaSP9SbA0DJ7LekyiviNPgP0TC9dQM6FfxeZ7eyuT6cv0RPmAmjTx11uXx/MiegEDd425cfcwWV+H4O3+uiO+pTAVIA2uMN8av6QiWr5TQ++JVlTc/tEiF3jOMScZGC43kME0VSA95PJhWXhM+Gt1Phn98nStZa1r9mB2SDQPqefjhayfnDfFG2J5882z84eynVM5u3thlONhRhj0gLc5PRfwAw62JjW+wjE5Xa1L0VkshO4kXt/EPDev4ZJCyBRvlcwggjHG4EfYHc9OoIBBWy3mEUX4H1V7Ur7ZvILaT8qy7FRduleF9jXc4RggOUWs/gtANs0nYquvMXaMaTXlQHlE1ggayLvf5OKY0DUMYDWfmpsBjZa+9enOmiLy+VkcmqxaNW2ZgX9GnsLXNQWoGj4KYzQ2g8LyG5WUDR4hshEE6CN+AFmg5lFiRMYcI0uKRQGyIAwegWKJkBjYO8tzq12C7efQ7CK2I00MomIxOsCiCcwQhaW3sEQ6W7sPi/yIDqKAHp8m2nIF7COoc9ghQw4NU8SkYgiQCmLKXCCUSziPc84XYBh83/DSiWR3qUo2tT4ONdGYDTub73cSzD/PNt0rojdQHAByoXxw0E7XfoFhsjnRduD+DnWIkkXXACJl1cwRoMmf3cbRaOjLRzDXnKZVj9GBIILUJBtbVzyj9HAU19AgR6I9VzDtwCgMXpAo2Yxp0v/Ybi49ennJtIFEPMY/TCKHTvv+aTSUQzBgwrQ92YHbQVi3UN3GAVZhrf/jzECE1SAq/7n4yOJ074KPSBcJoii598vxgwrqAByg70HZJZbr0JJ0G5XZz5Z1e1rYccA5TAicqEk0O5ECl/3LvYys7mLTLHHCEzS7wz6Esv3+nyYTF58rwha63XAl8PG1aCnhesWq6EdOcKM3WvmXRHh+Gvv/tNVTJlJPC4a3RVEK72+sCSZ4+J/FBVhTUS43J7gJqFjrnl33A3sxtCa3nAWhX6bbAT4hJugCsNZ2TGA8224AJnjAmSOC5A5LkDmuACZ4wJkjguQOS5A5rgAmeMCZI4LkDkuQOa4AJnjAmSOC5A5LkDmuACZ4wJkjguQOWEFYJvz85xwBBWgKM1P68oKKsI/36ACdC9nsDlWPTsIJ5t1Hfw01OBjgI1p/YwLegIibw0CwESz9gUYZ2d/wHEcx3Ecx3Ecx3Ecx3HuS5QjfdrXxTHv3JzEkd2xKwHR9xPNuKGjzdf1MSIQXAA9XUsuuw8nKPpK3PWzs+AvrgwqgP1LojOjoEf3fRv6Zy+JgBSLOGfaOx1NE/6o+rCrgeT9fWp4SljmuACZ4wJkjguQOS5A5rgAmeMCZI4LkDkuQOa4AJnjAmSOC5A5LkDmuACZ4wJkjguQOS5A5rgAmeMCZI4LkDkuQOa4AJnj5wRmTlABqHQBohKhggUVYAEEP8fO+UiMgziDCvCwrnU3aw0nOATMQu8LVIIPAq+JdAerdwWBaQ/fjEBwAaQVmMnN7sEJCB3EqP3tlRGJy6qqmPkFMcZw7sucmfZiHQ6hRBNgSXdaCHbA7KeFfBvz9pxlxtl1gcN2XBWRfwHK959XFRG6AgAAAABJRU5ErkJggg==",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ke.Unsupported:ke.NotDetected,this._disconnected=()=>{const r=this._wallet;r&&(r.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new ry),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ke.Unsupported&&Ov(()=>{var r;return(r=window.backpack)!=null&&r.isBackpack?(this._readyState=ke.Installed,this.emit("readyStateChange",this._readyState),!0):!1})}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var e;return!!((e=this._wallet)!=null&&e.isConnected)}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ke.Installed)throw new aa;this._connecting=!0;const e=window.backpack;try{await e.connect()}catch(n){throw new ca(n==null?void 0:n.message,n)}if(!e.publicKey)throw new Uc;let r;try{r=new Ae(e.publicKey.toBytes())}catch(n){throw new Zc(n==null?void 0:n.message,n)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=r,this.emit("connect",r)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(r){this.emit("error",new pu(r==null?void 0:r.message,r))}}this.emit("disconnect")}async sendTransaction(e,r,n={}){try{const i=this._wallet;if(!i)throw new Ct;const{signers:s,...o}=n;try{return await i.send(e,s,o,r,this.publicKey)}catch(a){throw new $a(a==null?void 0:a.message,a)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const r=this._wallet;if(!r)throw new Ct;try{return await r.signTransaction(e,this.publicKey)}catch(n){throw new mn(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}async signAllTransactions(e){try{const r=this._wallet;if(!r)throw new Ct;try{return await r.signAllTransactions(e,this.publicKey)}catch(n){throw new mn(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}async signMessage(e){try{const r=this._wallet;if(!r)throw new Ct;try{return await r.signMessage(e,this.publicKey)}catch(n){throw new Qh(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}}var Hw=hI.Buffer;function VAe(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(g){if((Array.isArray(g)||g instanceof Uint8Array)&&(g=Hw.from(g)),!Hw.isBuffer(g))throw new TypeError("Expected Buffer");if(g.length===0)return"";for(var m=0,v=0,$=0,_=g.length;$!==_&&g[$]===0;)$++,m++;for(var S=(_-$)*l+1>>>0,A=new Uint8Array(S);$!==_;){for(var T=g[$],k=0,R=S-1;(T!==0||k<v)&&R!==-1;R--,k++)T+=256*A[R]>>>0,A[R]=T%o>>>0,T=T/o>>>0;if(T!==0)throw new Error("Non-zero carry");v=k,$++}for(var L=S-v;L!==S&&A[L]===0;)L++;for(var F=a.repeat(m);L<S;++L)F+=t.charAt(A[L]);return F}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return Hw.alloc(0);for(var m=0,v=0,$=0;g[m]===a;)v++,m++;for(var _=(g.length-m)*c+1>>>0,S=new Uint8Array(_);m<g.length;){var A=g.charCodeAt(m);if(A>255)return;var T=e[A];if(T===255)return;for(var k=0,R=_-1;(T!==0||k<$)&&R!==-1;R--,k++)T+=o*S[R]>>>0,S[R]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");$=k,m++}for(var L=_-$;L!==_&&S[L]===0;)L++;var F=Hw.allocUnsafe(v+(_-L));F.fill(0,0,v);for(var B=v;L!==_;)F[B++]=S[L++];return F}function d(g){var m=h(g);if(m)return m;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:h,decode:d}}var GAe=VAe,YAe=GAe,QAe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",ZAe=YAe(QAe);const H0=ha(ZAe),JAe="Slope";class XAe extends ny{constructor(e={}){super(),this.name=JAe,this.url="https://slope.finance",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iNjQiIGZpbGw9IiM2RTY2RkEiLz4KPHBhdGggZD0iTTI3Ljk0NzUgNTIuMTU5Nkw1MS45ODI2IDI4LjA1NzJMNzIuNjA5OCA3LjY1Mzg5QzczLjg3MzQgNi40MDQwMSA3Ni4wMTc4IDcuMjk5MSA3Ni4wMTc4IDkuMDc2NDJMNzYuMDE4NyA1Mi4xNTlMNTEuOTgzNiA3Ni4xMjY4TDI3Ljk0NzUgNTIuMTU5NloiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8zNzk1XzI1NTQzKSIvPgo8cGF0aCBkPSJNMTAwLjA1MyA3NS45OTNMNzYuMDE4IDUxLjk1OEw1MS45ODI5IDc1Ljk5MzFMNTEuOTgyOSAxMTguOTI0QzUxLjk4MjkgMTIwLjcwMyA1NC4xMzEyIDEyMS41OTcgNTUuMzkzNyAxMjAuMzQzTDEwMC4wNTMgNzUuOTkzWiIgZmlsbD0idXJsKCNwYWludDFfbGluZWFyXzM3OTVfMjU1NDMpIi8+CjxwYXRoIGQ9Ik0yNy45NDcgNTIuMTYwMUg0NC42ODM5QzQ4LjcxNDcgNTIuMTYwMSA1MS45ODIyIDU1LjQyNzYgNTEuOTgyMiA1OS40NTgzVjc2LjEyNjlIMzUuMjQ1M0MzMS4yMTQ2IDc2LjEyNjkgMjcuOTQ3IDcyLjg1OTQgMjcuOTQ3IDY4LjgyODdWNTIuMTYwMVoiIGZpbGw9IiNGMUYwRkYiLz4KPHBhdGggZD0iTTc2LjAxNzggNTIuMTYwMUg5Mi43NTQ3Qzk2Ljc4NTUgNTIuMTYwMSAxMDAuMDUzIDU1LjQyNzYgMTAwLjA1MyA1OS40NTgzVjc2LjEyNjlIODMuMzE2MUM3OS4yODU0IDc2LjEyNjkgNzYuMDE3OCA3Mi44NTk0IDc2LjAxNzggNjguODI4N1Y1Mi4xNjAxWiIgZmlsbD0iI0YxRjBGRiIvPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzM3OTVfMjU1NDMiIHgxPSI1MS45ODMxIiB5MT0iNy4wNzE1NSIgeDI9IjUxLjk4MzEiIHkyPSI3Ni4xMjY4IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNBOEFERkYiLz4KPHN0b3Agb2Zmc2V0PSIwLjY0ODU1NiIgc3RvcC1jb2xvcj0id2hpdGUiLz4KPC9saW5lYXJHcmFkaWVudD4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDFfbGluZWFyXzM3OTVfMjU1NDMiIHgxPSI3Ni4wMTgiIHkxPSI1MS45NTgiIHgyPSI3Ni4wMTgiIHkyPSIxMjAuOTI4IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIG9mZnNldD0iMC4yNjA3ODQiIHN0b3AtY29sb3I9IiNCNkJBRkYiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRTRFMkZGIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg==",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ke.Unsupported:ke.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ke.Unsupported&&Ov(()=>typeof window.Slope=="function"||window.slopeApp?(this._readyState=ke.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ke.Installed||typeof window.Slope!="function")throw new aa;this._connecting=!0;const e=new window.Slope;let r;try{({data:r}=await e.connect())}catch(i){throw new ca(i==null?void 0:i.message,i)}if(!r.publicKey)throw new Uc;let n;try{n=new Ae(r.publicKey)}catch(i){throw new Zc(i==null?void 0:i.message,i)}this._wallet=e,this._publicKey=n,this.emit("connect",n)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{let r;try{({msg:r}=await e.disconnect())}catch(n){throw new pu(n==null?void 0:n.message,n)}if(r!=="ok")throw new pu(r)}catch(r){this.emit("error",r)}}this.emit("disconnect")}async signTransaction(e){try{const r=this._wallet;if(!r)throw new Ct;try{const n=H0.encode(e.serializeMessage()),{msg:i,data:s}=await r.signTransaction(n);if(!s.publicKey||!s.signature)throw new mn(i);const o=new Ae(s.publicKey),a=H0.decode(s.signature);return e.addSignature(o,a),e}catch(n){throw n instanceof yn?n:new mn(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}async signAllTransactions(e){var r;try{const n=this._wallet;if(!n)throw new Ct;try{const i=e.map(l=>H0.encode(l.serializeMessage())),{msg:s,data:o}=await n.signAllTransactions(i),a=e.length;if(!o.publicKey||((r=o.signatures)==null?void 0:r.length)!==a)throw new mn(s);const c=new Ae(o.publicKey);for(let l=0;l<a;l++)e[l].addSignature(c,H0.decode(o.signatures[l]));return e}catch(i){throw i instanceof yn?i:new mn(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}async signMessage(e){try{const r=this._wallet;if(!r)throw new Ct;try{const n=await r.signMessage(e);return H0.decode(n.data.signature)}catch(n){throw new Qh(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}}function e6e(){const{publicKey:t,connected:e,connect:r,connecting:n,disconnect:i,wallet:s}=bu(),{setVisible:o}=BI(),[a,c]=ne.useState(null),l=async()=>{try{const u=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",h=/iphone|ipad|android|mobile/.test(u),d=typeof window<"u"?window.solana||window.wallet:null;if(d&&(d.isPhantom||d.isBackpack||d.isSlope||d.isSolflare))try{await d.connect();return}catch(g){console.debug("Inpage wallet connect failed, falling back to modal",g)}o(!0)}catch(u){console.error("Connect click error",u),o(!0)}};return W.jsxs("div",{className:"wallet-card",children:[W.jsxs("div",{className:"wallet-header",children:[W.jsx("span",{className:"wallet-title",children:" WALLET"}),e&&W.jsx("span",{className:"wallet-status-badge",children:" CONNECTED"})]}),e&&t?W.jsx("div",{className:"wallet-connected",children:W.jsxs("div",{className:"wallet-display",children:[W.jsx("div",{className:"wallet-label",children:"Active Wallet"}),W.jsxs("div",{className:"wallet-pk",title:t.toString(),children:[t.toString().slice(0,10),"...",t.toString().slice(-8)]})]})}):W.jsx("div",{style:{padding:"8px 0"},children:W.jsx("div",{style:{fontSize:"11px",color:"var(--text-dim)",marginBottom:"10px",letterSpacing:"0.5px"},children:"Click button to connect real wallet"})}),W.jsxs("div",{style:{marginTop:"10px"},children:[W.jsx("button",{onClick:l,style:{width:"100%",background:"linear-gradient(135deg, var(--info) 0%, #0088cc 100%)",color:"#fff",fontWeight:"700",fontSize:"11px",borderRadius:"3px",padding:"10px",border:"none",cursor:"pointer",fontFamily:"'Courier New', monospace",letterSpacing:"0.5px"},children:e?"Connected":n?"Connecting":"Connect Wallet"}),W.jsx("div",{style:{display:"none"},children:W.jsx(VY,{})})]}),W.jsxs("div",{style:{marginTop:10,fontSize:12,color:"var(--text-dim)"},children:[W.jsxs("div",{children:["User agent: ",W.jsx("span",{style:{color:"#fff"},children:typeof navigator<"u"?navigator.userAgent:"unknown"})]}),W.jsxs("div",{style:{marginTop:6},children:["Injected wallet: ",W.jsx("code",{style:{color:"#fff"},children:typeof window<"u"&&(window.solana?JSON.stringify({isPhantom:!!window.solana.isPhantom,isSolflare:!!window.solana.isSolflare,isBackpack:!!window.solana.isBackpack,isSlope:!!window.solana.isSlope}):"none")})]}),W.jsxs("div",{style:{marginTop:6},children:["Selected adapter: ",W.jsx("code",{style:{color:"#fff"},children:s?s.name||s.adapterName||"unknown":"none"})]}),W.jsxs("div",{style:{marginTop:6},children:["Connected: ",W.jsx("strong",{style:{color:e?"#9ee6b5":"#fda4af"},children:String(e)}),"  Connecting: ",W.jsx("strong",{style:{color:n?"#ffd085":"#9ee6b5"},children:String(n)})]}),W.jsxs("div",{style:{marginTop:8,display:"flex",gap:8},children:[W.jsx("button",{onClick:async()=>{try{c(null),await r()}catch(u){c((u==null?void 0:u.message)||String(u))}},style:{padding:"6px 8px",borderRadius:6},children:"Force Connect"}),W.jsx("button",{onClick:async()=>{try{await i(),c(null)}catch(u){c((u==null?void 0:u.message)||String(u))}},style:{padding:"6px 8px",borderRadius:6},children:"Disconnect"}),W.jsx("button",{onClick:()=>o(!0),style:{padding:"6px 8px",borderRadius:6},children:"Open Modal"})]}),a&&W.jsxs("div",{style:{marginTop:8,color:"#ffb4b4"},children:["Last error: ",String(a)]})]})]})}function t6e(){var f,p,w,N,M;const{publicKey:t,signMessage:e,connected:r}=bu(),{connection:n}=ty(),[i,s]=ne.useState(null),[o,a]=ne.useState(null),[c,l]=ne.useState(""),[u,h]=ne.useState(null),[d,g]=ne.useState(!1),[m,v]=ne.useState(!1),[$,_]=ne.useState(null),[S,A]=ne.useState(null),[T,k]=ne.useState(null),[R,L]=ne.useState(null),[F,B]=ne.useState(null);ne.useEffect(()=>{t&&r&&(q(),D(t.toString()))},[t,r]);const q=async()=>{try{const x=await n.getBalance(t);B((x/1e9).toFixed(2))}catch(x){console.error("Balance check error:",x)}},D=async x=>{var y,C,I,j,K,V,te,se,ce,ie;if(!x){h("Please connect wallet");return}g(!0),h(null),l(" Checking on-chain eligibility..."),_(null),A(null),L(null);try{const ve=await fetch(`http://localhost:8000/api/eligibility?wallet=${encodeURIComponent(x)}`,{method:"GET"});if(!ve.ok)throw new Error(`Server error: ${ve.status}`);const Me=await ve.json();if(Me.eligible){s(!0),a(Me.allocation||0),A(Me),Me.proof&&k(Me.proof),Me.onchain&&L(Me.onchain);const Ce=((C=(y=Me.onchain)==null?void 0:y.reason)==null?void 0:C[0])==="nft_owned"?"NFT Holdings":((j=(I=Me.onchain)==null?void 0:I.reason)==null?void 0:j[0])==="token_value"?"Token Value":"Allocation List";l(` ELIGIBLE!
 Reason: ${Ce}
 Value: $${((te=(V=(K=Me.onchain)==null?void 0:K.details)==null?void 0:V.value_usd)==null?void 0:te.toFixed(2))||"N/A"}`),(se=window.showToast)==null||se.call(window," Wallet is eligible!","success")}else s(!1),a(0),l(" Not eligible for this airdrop"),(ce=window.showToast)==null||ce.call(window,"Not eligible","info")}catch(ve){const Me=ve.message||"Failed to check eligibility";h(Me),l(""),console.error("Eligibility check error:",ve),(ie=window.showToast)==null||ie.call(window,` ${Me}`,"error")}finally{g(!1)}},E=x=>{x.preventDefault(),t&&(q(),D(t.toString()))},b=async()=>{var x,y;if(!t||!e||!i||o===null){h("Missing required data or wallet");return}v(!0),h(null),l(" Requesting wallet signature...");try{const C=`claim|${t.toString()}|${o}|${Date.now()}`,I=new TextEncoder().encode(C),j=await e(I),K=Buffer.from(j).toString("base64");l(" Submitting claim to blockchain...");const V=localStorage.getItem("dojo3_referrer")||null,te=await fetch("http://localhost:8000/api/claim",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet:t.toString(),amount:o,proof:T,signature:K,message:C,referrer:V})});if(!te.ok){const se=await te.json();throw new Error(se.detail||"Claim failed")}_(` Claimed ${o} DOJO tokens!`),l(""),s(!1),(x=window.showToast)==null||x.call(window,` Claimed ${o} tokens!`,"success")}catch(C){const I=C.message||"Claim failed";h(I),l(""),console.error("Claim error:",C),(y=window.showToast)==null||y.call(window,` ${I}`,"error")}finally{v(!1)}};return r?W.jsxs("div",{className:"widget",children:[W.jsx("h3",{children:" CHECK ELIGIBILITY"}),u&&W.jsx("div",{className:"error-banner",children:u}),$&&W.jsx("div",{className:"success-msg",children:$}),W.jsxs("div",{style:{background:"rgba(0,170,255,0.1)",padding:"10px",borderRadius:"3px",marginBottom:"12px",fontSize:"10px"},children:[W.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"4px"},children:"WALLET ADDRESS"}),W.jsxs("div",{style:{fontSize:"9px",fontFamily:"monospace",wordBreak:"break-all",marginBottom:"6px",color:"var(--info)"},children:[t==null?void 0:t.toString().slice(0,16),"...",t==null?void 0:t.toString().slice(-10)]}),F&&W.jsxs("div",{style:{color:"var(--success)"},children:[" SOL Balance: ",F," SOL"]})]}),W.jsx("form",{onSubmit:E,children:W.jsx("button",{type:"submit",className:`btn btn-primary ${d?"btn-loading":""}`,disabled:!t||d||m,style:{width:"100%",marginBottom:"0"},children:d?" CHECKING...":" CHECK ELIGIBILITY"})}),c&&W.jsx("div",{className:"status",style:{whiteSpace:"pre-wrap"},children:c}),i&&R&&W.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border)"},children:[W.jsx("h4",{style:{margin:"0 0 10px",fontSize:"11px",color:"var(--accent)"},children:" ON-CHAIN DETAILS"}),((p=(f=R.details)==null?void 0:f.tokens)==null?void 0:p.length)>0&&W.jsxs("div",{style:{marginBottom:"12px",fontSize:"10px"},children:[W.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"6px"},children:" TOKENS HELD:"}),R.details.tokens.map((x,y)=>W.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"6px",borderRadius:"2px",marginBottom:"4px",fontSize:"9px"},children:[W.jsxs("div",{style:{fontFamily:"monospace",color:"var(--info)"},children:[x.mint.slice(0,8),"..."]}),W.jsxs("div",{children:["Balance: ",parseFloat(x.balance).toFixed(2)]}),x.price&&W.jsxs("div",{children:["Price: $",x.price]}),x.value&&W.jsxs("div",{style:{color:"var(--success)",fontWeight:"bold"},children:["Value: $",parseFloat(x.value).toFixed(2)]})]},y))]}),((N=(w=R.details)==null?void 0:w.nfts)==null?void 0:N.length)>0&&W.jsxs("div",{style:{marginBottom:"12px",fontSize:"10px"},children:[W.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"6px"},children:" NFTs HELD:"}),R.details.nfts.map((x,y)=>W.jsxs("div",{style:{background:x.owns?"rgba(0,221,136,0.1)":"rgba(255,0,0,0.1)",padding:"6px",borderRadius:"2px",marginBottom:"4px",fontSize:"9px",borderLeft:`2px solid ${x.owns?"var(--success)":"var(--warning)"}`},children:[W.jsxs("div",{style:{fontFamily:"monospace",color:"var(--info)"},children:[x.mint.slice(0,8),"..."]}),W.jsx("div",{style:{color:x.owns?"var(--success)":"var(--warning)"},children:x.owns?" OWNED":" NOT OWNED"})]},y))]}),W.jsxs("div",{style:{background:"rgba(255,204,0,0.1)",padding:"8px",borderRadius:"2px",borderLeft:"2px solid var(--accent)",fontSize:"10px"},children:[W.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"4px"},children:"TOTAL VALUE"}),W.jsxs("div",{style:{fontSize:"14px",fontWeight:"bold",color:"var(--accent)"},children:["$",(((M=R.details)==null?void 0:M.value_usd)||0).toFixed(2)," USD"]})]})]}),i&&!$&&W.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border)"},children:[W.jsxs("div",{style:{background:"rgba(0,221,136,0.1)",padding:"12px",borderRadius:"3px",marginBottom:"12px",fontSize:"11px"},children:[W.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"6px",letterSpacing:"0.5px"},children:" ELIGIBLE - AIRDROP ALLOCATION"}),W.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"var(--success)"},children:[o," DOJO"]})]}),W.jsx("button",{onClick:b,className:`btn btn-primary ${m?"btn-loading":""}`,disabled:m,style:{width:"100%",marginBottom:"0"},children:m?" CLAIMING...":" CLAIM TOKENS"})]}),i===!1&&W.jsx("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border)"},children:W.jsxs("div",{className:"warning",children:[W.jsx("strong",{children:" Not Eligible"}),W.jsx("br",{}),"This wallet doesn't qualify yet. To become eligible:",W.jsxs("ul",{style:{margin:"8px 0 0 20px",fontSize:"10px",lineHeight:"1.6"},children:[W.jsx("li",{children:"Hold monitored tokens worth $100+ USD"}),W.jsx("li",{children:"Hold eligible NFT collections"}),W.jsx("li",{children:"Stake 0.5+ SOL for 3+ days"})]})]})})]}):W.jsxs("div",{className:"widget",children:[W.jsx("h3",{children:" CHECK ELIGIBILITY"}),W.jsx("div",{className:"warning",children:"Connect your wallet to check eligibility for the airdrop"})]})}function r6e(){return W.jsxs("div",{id:"project",className:"widget",children:[W.jsx("h3",{children:" TOKENOMICS"}),W.jsxs("div",{style:{background:"rgba(255,204,0,0.05)",padding:"14px",borderRadius:"3px",marginTop:"12px",fontSize:"11px",border:"1px solid var(--border)",lineHeight:"1.8"},children:[W.jsxs("div",{style:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid var(--border)"},children:[W.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"4px",letterSpacing:"0.5px"},children:"TOTAL SUPPLY"}),W.jsx("div",{style:{fontSize:"14px",fontWeight:"bold",color:"var(--accent)"},children:"850,000,000 DOJO"})]}),W.jsxs("div",{style:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid var(--border)"},children:[W.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"6px"},children:"ALLOCATION BREAKDOWN"}),W.jsxs("div",{style:{marginBottom:"4px"},children:[" Airdrop: ",W.jsx("strong",{style:{color:"var(--success)"},children:"60%"})," (510M)"]}),W.jsxs("div",{style:{marginBottom:"4px"},children:[" Public Sale: ",W.jsx("strong",{children:"40%"})]}),W.jsxs("div",{children:[" Referral Bonus: ",W.jsx("strong",{children:"24%"})," of allocation"]})]}),W.jsxs("div",{style:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid var(--border)"},children:[W.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"4px"},children:"VALUATION"}),W.jsxs("div",{children:[W.jsx("strong",{children:"Target Price:"})," $0.00001"]})]}),W.jsxs("div",{children:[W.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"6px",fontSize:"10px"},children:" Secure Contract"}),W.jsx("div",{style:{fontSize:"9px",color:"var(--text-dim)",fontStyle:"italic"},children:" Contract audited and deployed"})]})]}),W.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border)"},children:[W.jsx("h4",{style:{margin:"0 0 10px",fontSize:"12px",color:"var(--accent)",letterSpacing:"0.5px"},children:" ELIGIBILITY RULES"}),W.jsxs("div",{style:{fontSize:"11px",lineHeight:"1.8",color:"var(--text-dim)"},children:[W.jsx("div",{style:{marginBottom:"8px"},children:" Hold $100+ USD in verified tokens"}),W.jsx("div",{style:{marginBottom:"8px"},children:" Own Pudgy Penguins or verified NFTs"}),W.jsx("div",{style:{marginBottom:"8px"},children:" Stake 0.5+ SOL for 3+ days"}),W.jsx("div",{children:" Participate in community events"})]})]}),W.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border)"},children:[W.jsx("h4",{style:{margin:"0 0 10px",fontSize:"12px",color:"var(--accent)",letterSpacing:"0.5px"},children:" STAKING REWARDS"}),W.jsxs("div",{style:{fontSize:"11px",lineHeight:"1.8",color:"var(--text-dim)"},children:[W.jsxs("div",{style:{marginBottom:"8px"},children:[" Minimum: ",W.jsx("strong",{children:"0.5 SOL"})]}),W.jsxs("div",{style:{marginBottom:"8px"},children:[" Lock Period: ",W.jsx("strong",{children:"3 Days"})]}),W.jsxs("div",{style:{marginBottom:"8px"},children:[" Reward: ",W.jsx("strong",{children:"Exclusive Dojo3 Pixel NFT"})]}),W.jsx("div",{children:" Supply: Limited to 999"})]})]})]})}new Ae("HMwy4JHwuLkMMR3q6B3atwZ4oUAGrc3yHtgC7MswWNY1");const n6e="8pSyRMP7R5qDU5BTqR93rESA1R2h5jH6hdPRjXmjnj8u",Du=.5;function i6e(){const t=bu(),{publicKey:e,connected:r}=t,{connection:n}=ty(),[i,s]=ne.useState(!1),[o,a]=ne.useState(""),[c,l]=ne.useState(null),[u,h]=ne.useState(null),[d,g]=ne.useState(0);ne.useEffect(()=>{e&&r&&m()},[e,r,n]);const m=async()=>{try{const $=await n.getBalance(e);g($/wh)}catch($){console.error("Balance check error:",$)}},v=async()=>{var $,_;if(!e||!r){l("Please connect wallet first");return}if(d<Du){l(`Insufficient balance. You need ${Du} SOL`);return}if(!t.sendTransaction){l("Wallet does not support transaction sending");return}s(!0),l(null),a(" Creating transaction...");try{const{blockhash:S}=await n.getLatestBlockhash(),A=new Ae(n6e),T=fu.transfer({fromPubkey:e,toPubkey:A,lamports:Math.floor(Du*wh)}),k=new wi({recentBlockhash:S,feePayer:e});k.add(T),a(" Requesting wallet signature...");const R=await t.sendTransaction(k,n);console.log("Transaction sent:",R),h(R),a(` Confirming transaction... ${R.slice(0,8)}...`);const L=await n.confirmTransaction(R,"confirmed");if(console.log("Confirmation result:",L),L.value.err)throw new Error("Transaction failed on chain");a(` Successfully staked ${Du} SOL! You'll receive an NFT after 3 days.`),($=window.showToast)==null||$.call(window,` Staked ${Du} SOL!`,"success"),setTimeout(m,1e3)}catch(S){const A=(S==null?void 0:S.message)||(S==null?void 0:S.toString())||"Staking failed";console.error("Staking error:",S),l(A),a(""),(_=window.showToast)==null||_.call(window,` ${A}`,"error")}finally{s(!1)}};return r?W.jsxs("div",{className:"widget",children:[W.jsx("h3",{children:" NFT STAKING PROGRAM"}),c&&W.jsx("div",{className:"error-banner",children:c}),o&&W.jsx("div",{className:"status",children:o}),W.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border)"},children:[W.jsxs("div",{style:{background:"rgba(0,170,255,0.1)",padding:"12px",borderRadius:"3px",marginBottom:"14px",fontSize:"11px"},children:[W.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"6px",letterSpacing:"0.5px"},children:"BALANCE"}),W.jsxs("div",{style:{fontSize:"16px",fontWeight:"bold",color:"var(--info)"},children:[d.toFixed(3)," SOL"]})]}),W.jsx("div",{style:{background:"rgba(255,204,0,0.05)",padding:"12px",borderRadius:"3px",marginBottom:"14px",fontSize:"11px",border:"1px solid var(--border)"},children:W.jsxs("div",{style:{marginBottom:"6px",lineHeight:"1.6",color:"var(--text-dim)"},children:[W.jsx("strong",{style:{color:"var(--accent)"},children:"How it works:"}),W.jsx("br",{})," Stake 0.5 SOL or more",W.jsx("br",{})," Lock for minimum 3 days",W.jsx("br",{})," Earn exclusive Dojo3 NFT",W.jsx("br",{})," Withdraw anytime after unlock"]})}),W.jsx("button",{onClick:v,disabled:i||!r||d<Du,className:`btn btn-primary ${i?"btn-loading":""}`,style:{width:"100%",marginBottom:"0"},children:i?" STAKING...":` STAKE ${Du} SOL`}),u&&W.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid var(--border)"},children:[W.jsx("div",{style:{fontSize:"11px",color:"var(--text-dim)",marginBottom:"6px"},children:"Transaction Hash:"}),W.jsx("div",{style:{fontSize:"10px",fontFamily:"monospace",color:"var(--success)",wordBreak:"break-all",background:"rgba(0,0,0,0.2)",padding:"8px",borderRadius:"2px"},children:u})]})]})]}):W.jsxs("div",{className:"widget",children:[W.jsx("h3",{children:" NFT STAKING"}),W.jsx("div",{className:"warning",children:"Connect your wallet to start staking"})]})}const s6e=()=>{const t=document.createElement("canvas");t.width=128,t.height=128;const e=t.getContext("2d"),r=e.createLinearGradient(0,0,128,128);r.addColorStop(0,"#FFD700"),r.addColorStop(.5,"#FFA500"),r.addColorStop(1,"#FF8C00"),e.fillStyle=r,e.fillRect(0,0,128,128);const n=8;return e.fillStyle="#FFD700",e.fillRect(5*n,2*n,6*n,6*n),e.fillStyle="#FF8C00",e.fillRect(4*n,1*n,8*n,2*n),e.fillStyle="#000",e.fillRect(6*n,3*n,1*n,1*n),e.fillRect(9*n,3*n,1*n,1*n),e.fillStyle="#FF4500",e.fillRect(5*n,8*n,6*n,6*n),e.fillStyle="#FFD700",e.fillRect(5*n,8*n,2*n,6*n),e.fillRect(9*n,8*n,2*n,6*n),e.fillStyle="#000",e.fillRect(6*n,14*n,1*n,2*n),e.fillRect(9*n,14*n,1*n,2*n),e.fillStyle="#C0C0C0",e.fillRect(11*n,9*n,1*n,7*n),e.fillStyle="#FFD700",e.fillRect(11*n,9*n,1*n,1*n),t.toDataURL()},o6e=()=>{const t=document.createElement("canvas");t.width=128,t.height=128;const e=t.getContext("2d"),r=e.createLinearGradient(0,0,128,128);r.addColorStop(0,"#9370DB"),r.addColorStop(.5,"#8A2BE2"),r.addColorStop(1,"#4B0082"),e.fillStyle=r,e.fillRect(0,0,128,128);const n=8;return e.fillStyle="#FFD700",e.fillRect(5*n,2*n,6*n,6*n),e.fillStyle="#000",e.fillRect(4*n,2*n,8*n,3*n),e.fillStyle="#FF0000",e.fillRect(6*n,3*n,1*n,1*n),e.fillRect(9*n,3*n,1*n,1*n),e.fillStyle="#1a1a1a",e.fillRect(4*n,8*n,8*n,7*n),e.fillStyle="#FFD700",e.fillRect(4*n,12*n,8*n,1*n),e.fillStyle="#000",e.fillRect(5*n,15*n,1*n,2*n),e.fillRect(10*n,15*n,1*n,2*n),e.fillStyle="#C0C0C0",e.fillRect(12*n,10*n,1*n,2*n),e.fillRect(13*n,9*n,1*n,3*n),e.fillStyle="#000",e.fillRect(14*n,10*n,1*n,1*n),t.toDataURL()},a6e=()=>{const t=document.createElement("canvas");t.width=128,t.height=128;const e=t.getContext("2d"),r=e.createLinearGradient(0,0,128,128);r.addColorStop(0,"#4169E1"),r.addColorStop(.5,"#1E90FF"),r.addColorStop(1,"#0047AB"),e.fillStyle=r,e.fillRect(0,0,128,128);const n=8;return e.fillStyle="#8B0000",e.fillRect(4*n,1*n,8*n,7*n),e.fillStyle="#FFD700",e.fillRect(3*n,0*n,1*n,2*n),e.fillRect(12*n,0*n,1*n,2*n),e.fillStyle="#FF0000",e.fillRect(6*n,2*n,2*n,2*n),e.fillRect(10*n,2*n,2*n,2*n),e.fillStyle="#FFD700",e.fillRect(5*n,5*n,6*n,1*n),e.fillStyle="#FFF",e.fillRect(5*n,6*n,1*n,1*n),e.fillRect(7*n,6*n,1*n,1*n),e.fillRect(9*n,6*n,1*n,1*n),e.fillStyle="#8B0000",e.fillRect(2*n,8*n,12*n,8*n),e.fillStyle="#FFD700",e.fillRect(3*n,7*n,1*n,1*n),e.fillRect(6*n,7*n,1*n,1*n),e.fillRect(9*n,7*n,1*n,1*n),e.fillRect(12*n,7*n,1*n,1*n),e.fillStyle="#8B0000",e.fillRect(13*n,10*n,2*n,3*n),e.fillStyle="#FFD700",e.fillRect(14*n,13*n,1*n,1*n),e.fillStyle="#8B0000",e.fillRect(4*n,16*n,2*n,1*n),e.fillRect(10*n,16*n,2*n,1*n),t.toDataURL()},c6e=({src:t,alt:e,size:r=120})=>W.jsx("div",{style:{position:"relative",width:r,height:r,margin:"0 auto 10px"},children:W.jsx("img",{src:t,alt:e,style:{width:"100%",height:"100%",imageRendering:"pixelated",imageRendering:"crisp-edges",imageRendering:"-webkit-optimize-contrast",border:"2px solid var(--accent)",borderRadius:"2px",backgroundColor:"rgba(0,0,0,0.3)"}})}),l6e=()=>({warrior:s6e(),sniper:o6e(),beast:a6e()}),t_=l6e(),u6e=[{id:"warrior",name:" WARRIOR NFT",rarity:"Legendary",price_eligible:.01,price_regular:.2,supply:333,description:"Fearless warrior ready for battle",attributes:["Power","Speed","Armor","Wisdom"],image:()=>t_.warrior},{id:"sniper",name:" SNIPER NFT",rarity:"Epic",price_eligible:.01,price_regular:.2,supply:333,description:"Precision and accuracy at peak",attributes:["Precision","Focus","Agility","Intel"],image:()=>t_.sniper},{id:"beast",name:" BEAST NFT",rarity:"Rare",price_eligible:.01,price_regular:.2,supply:333,description:"Unstoppable force of nature",attributes:["Strength","Endurance","Bite","Roar"],image:()=>t_.beast}],r_=.01,h6e="8pSyRMP7R5qDU5BTqR93rESA1R2h5jH6hdPRjXmjnj8u";function d6e(){const t=bu(),{publicKey:e,connected:r,sendTransaction:n}=t,{connection:i}=ty(),[s,o]=ne.useState(!1),[a,c]=ne.useState(null),[l,u]=ne.useState(""),[h,d]=ne.useState(null),[g,m]=ne.useState(!1),[v,$]=ne.useState(0);ne.useEffect(()=>{e&&r&&(_(),S())},[e,r,i]);const _=async()=>{try{const T=await i.getBalance(e);$(T/wh)}catch(T){console.error("Balance check error:",T)}},S=async()=>{try{const k=await(await fetch(`http://localhost:8000/api/eligibility?wallet=${e.toString()}`)).json();m(k.eligible||!1)}catch(T){console.error("Eligibility check error:",T)}},A=async T=>{var L,F;if(!e||!r){c("Please connect wallet first");return}if(!n){c("Wallet does not support transactions");return}const R=(g?T.price_eligible:T.price_regular)+r_;if(v<R){c(`Insufficient balance. You need ${R} SOL`);return}d(T.id),o(!0),c(null),u(` Preparing to mint ${T.name}...`);try{const{blockhash:B}=await i.getLatestBlockhash(),q=new Ae(h6e),D=fu.transfer({fromPubkey:e,toPubkey:q,lamports:Math.floor(R*wh)}),E=new wi({recentBlockhash:B,feePayer:e});E.add(D),u(` Requesting wallet signature for ${T.name}...`);const b=await n(E,i);if(console.log("Transaction sent:",b),u(` Confirming payment for ${T.name}... ${b.slice(0,8)}...`),(await i.confirmTransaction(b,"confirmed")).value.err)throw new Error("Payment failed on chain");u(` ${T.name} NFT MINTED!

 Payment: ${R} SOL confirmed
 Rarity: ${T.rarity}
 Traits: ${T.attributes.join(", ")}
 Txn: ${b.slice(0,16)}...

Your NFT is in your wallet!`),(L=window.showToast)==null||L.call(window,` ${T.name} NFT minted!`,"success"),setTimeout(_,1e3),d(null)}catch(B){const q=(B==null?void 0:B.message)||(B==null?void 0:B.toString())||"NFT minting failed";console.error("Minting error:",B),q.includes("User rejected")||q.includes("user rejected")?c("Transaction rejected by user"):q.includes("Insufficient")?c("Insufficient balance"):c(q),u(""),(F=window.showToast)==null||F.call(window,` ${q}`,"error")}finally{o(!1)}};return r?W.jsxs("div",{className:"widget",children:[W.jsx("h3",{children:" NFT COLLECTIONS & MINTING"}),a&&W.jsx("div",{className:"error-banner",children:a}),l&&W.jsx("div",{className:"status",style:{whiteSpace:"pre-wrap"},children:l}),W.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border)"},children:[W.jsxs("div",{style:{background:"rgba(0,170,255,0.1)",padding:"12px",borderRadius:"3px",marginBottom:"14px",fontSize:"11px"},children:[W.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"6px"},children:"YOUR STATUS"}),W.jsxs("div",{style:{marginBottom:"6px"},children:[" Balance: ",W.jsxs("strong",{style:{color:"var(--info)"},children:[v.toFixed(3)," SOL"]})]}),W.jsxs("div",{children:[" Eligibility: ",W.jsx("strong",{style:{color:g?"var(--success)":"var(--warning)"},children:g?"ELIGIBLE (Discount)":"NOT ELIGIBLE (Regular)"})]})]}),W.jsxs("div",{style:{marginBottom:"16px",paddingBottom:"12px",borderBottom:"1px solid var(--border)"},children:[W.jsx("h4",{style:{margin:"0 0 10px",fontSize:"12px",color:"var(--accent)"},children:" PRICING"}),W.jsxs("div",{style:{fontSize:"11px",lineHeight:"1.8",color:"var(--text-dim)"},children:[W.jsxs("div",{style:{marginBottom:"6px"},children:[W.jsx("strong",{children:"Eligible:"})," 0.01 SOL + 0.01 SOL fee = 0.02 SOL total"]}),W.jsxs("div",{style:{marginBottom:"6px"},children:[W.jsx("strong",{children:"Regular:"})," 0.2 SOL + 0.01 SOL fee = 0.21 SOL total"]}),W.jsx("div",{style:{background:"rgba(255,204,0,0.1)",padding:"8px",borderRadius:"2px",border:"1px solid var(--border)"},children:" Stake 0.5+ SOL for 3 days to unlock discount rates!"})]})]}),W.jsxs("div",{children:[W.jsx("h4",{style:{margin:"0 0 12px",fontSize:"12px",color:"var(--accent)"},children:" AVAILABLE COLLECTIONS"}),W.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"12px"},children:u6e.map(T=>{const k=g?T.price_eligible:T.price_regular,R=k+r_,L=v>=R;return W.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",border:"1px solid var(--border)",borderRadius:"4px",padding:"12px"},children:[W.jsx("div",{style:{fontSize:"16px",marginBottom:"8px"},children:W.jsx("strong",{children:T.name})}),W.jsx(c6e,{src:typeof T.image=="function"?T.image():T.image,alt:T.name,size:100}),W.jsxs("div",{style:{fontSize:"10px",color:"var(--text-dim)",marginBottom:"8px"},children:[W.jsxs("div",{style:{marginBottom:"4px"},children:[W.jsx("strong",{children:"Rarity:"})," ",W.jsx("span",{style:{color:T.rarity==="Legendary"?"#FFD700":T.rarity==="Epic"?"#9370DB":"#4169E1"},children:T.rarity})]}),W.jsxs("div",{style:{marginBottom:"4px"},children:[W.jsx("strong",{children:"Supply:"})," ",T.supply," NFTs"]}),W.jsx("div",{style:{marginBottom:"6px",lineHeight:"1.4"},children:T.description}),W.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"6px",borderRadius:"2px",marginBottom:"6px"},children:["Traits: ",T.attributes.join(", ")]})]}),W.jsxs("div",{style:{background:"rgba(255,204,0,0.1)",padding:"8px",borderRadius:"2px",marginBottom:"10px",fontSize:"11px",border:"1px solid var(--border)"},children:[W.jsxs("div",{children:[" NFT: ",k," SOL"]}),W.jsxs("div",{children:["+ Fee: ",r_," SOL"]}),W.jsxs("div",{style:{fontWeight:"bold",color:"var(--accent)",marginTop:"4px"},children:["= ",R," SOL"]})]}),W.jsx("button",{onClick:()=>A(T),disabled:s||h===T.id||!L,style:{width:"100%",padding:"8px",background:L?"var(--accent)":"var(--warning)",border:"none",borderRadius:"3px",color:"#000",fontSize:"11px",fontWeight:"bold",cursor:L?"pointer":"not-allowed",opacity:L?1:.5},children:s&&h===T.id?" MINTING...":L?` MINT (${R} SOL)`:" INSUFFICIENT SOL"})]},T.id)})})]})]})]}):W.jsxs("div",{className:"widget",children:[W.jsx("h3",{children:" NFT COLLECTIONS"}),W.jsx("div",{className:"warning",children:"Connect your wallet to browse and mint NFTs"})]})}const K0=.5,Kw=.1,E$="8pSyRMP7R5qDU5BTqR93rESA1R2h5jH6hdPRjXmjnj8u";function f6e(){const t=bu(),{publicKey:e,connected:r,sendTransaction:n}=t,{connection:i}=ty(),[s,o]=ne.useState([]),[a,c]=ne.useState(!1),[l,u]=ne.useState(null),[h,d]=ne.useState(""),[g,m]=ne.useState(0),[v,$]=ne.useState(!1),[_,S]=ne.useState({name:"",description:"",template:"classic",color:"#4ECDC4"}),[A,T]=ne.useState(null),[k,R]=ne.useState(!1);ne.useEffect(()=>{e&&r&&(L(),F())},[e,r]);const L=async()=>{try{const E=await i.getBalance(e);m((E/wh).toFixed(3))}catch(E){console.error("Balance load error:",E)}},F=async()=>{try{const E=await fetch(`http://localhost:8000/api/sites?wallet=${e.toString()}`);if(E.ok){const b=await E.json();o(b.sites||[])}}catch(E){console.error("Sites load error:",E)}},B=async E=>{var b,f;if(E.preventDefault(),!_.name.trim()){u("Site name is required");return}if(g<K0){u(`Insufficient balance required: ${K0} SOL`);return}R(!0),u(null),d(" Processing payment...");try{const{blockhash:p}=await i.getLatestBlockhash(),w=new Ae(E$),N=fu.transfer({fromPubkey:e,toPubkey:w,lamports:Math.floor(K0*wh)}),M=new wi({recentBlockhash:p,feePayer:e});M.add(N),d(" Requesting wallet signature...");const x=await n(M,i);if(d(" Confirming transaction..."),(await i.confirmTransaction(x,"confirmed")).value.err)throw new Error("Payment confirmation failed on-chain");const I=await fetch("http://localhost:8000/api/sites/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet:e.toString(),name:_.name,description:_.description,template:_.template,color:_.color,txid:x,timestamp:new Date().toISOString()})});if(!I.ok)throw new Error("Failed to save site");const j=await I.json(),V=`http://${e.toString().slice(0,8).toLowerCase()}.dojo3`;d(` Site created successfully!
 Link: ${V}`),S({name:"",description:"",template:"classic",color:"#4ECDC4"}),$(!1),(b=window.showToast)==null||b.call(window," Site created successfully!","success"),setTimeout(()=>{L(),F(),d("")},2e3)}catch(p){const w=(p==null?void 0:p.message)||"Failed to create site";u(w),d(""),(f=window.showToast)==null||f.call(window,` ${w}`,"error")}finally{R(!1)}},q=async E=>{var b,f;if(g<Kw){u(`Insufficient balance required: ${Kw} SOL`);return}R(!0),u(null),d(" Renewing site...");try{const{blockhash:p}=await i.getLatestBlockhash(),w=new Ae(E$),N=fu.transfer({fromPubkey:e,toPubkey:w,lamports:Math.floor(Kw*wh)}),M=new wi({recentBlockhash:p,feePayer:e});M.add(N);const x=await n(M,i);if((await i.confirmTransaction(x,"confirmed")).value.err)throw new Error("Failed to renew site");await fetch("http://localhost:8000/api/sites/renew",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({site_id:E,wallet:e.toString(),txid:x,timestamp:new Date().toISOString()})}),d(" Site renewed successfully!"),(b=window.showToast)==null||b.call(window," Site renewed!","success"),setTimeout(()=>{L(),F(),d("")},2e3)}catch(p){const w=(p==null?void 0:p.message)||"Renewal failed";u(w),d(""),(f=window.showToast)==null||f.call(window,` ${w}`,"error")}finally{R(!1)}},D=async E=>{var b,f;if(confirm("Are you sure you want to permanently delete this site?"))try{if(!(await fetch("http://localhost:8000/api/sites/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({site_id:E,wallet:e.toString()})})).ok)throw new Error("Failed to delete site");(b=window.showToast)==null||b.call(window," Site deleted","success"),F()}catch(p){(f=window.showToast)==null||f.call(window,` ${p.message}`,"error")}};return r?W.jsxs("div",{className:"widget",children:[W.jsx("h3",{children:" SITE MANAGER"}),l&&W.jsx("div",{className:"error-banner",children:l}),h&&W.jsx("div",{className:"status",style:{whiteSpace:"pre-wrap"},children:h}),W.jsxs("div",{style:{background:"rgba(0,170,255,0.1)",padding:"12px",borderRadius:"3px",marginBottom:"16px",fontSize:"11px"},children:[W.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"6px"},children:" BALANCE"}),W.jsxs("div",{style:{fontSize:"14px",fontWeight:"bold",color:"var(--info)",marginBottom:"6px"},children:[g," SOL"]}),W.jsxs("div",{style:{fontSize:"9px",color:"var(--text-dim)",lineHeight:"1.5"},children:[W.jsxs("div",{children:[" Create Site: ",K0," SOL"]}),W.jsxs("div",{children:[" Monthly Renewal: ",Kw," SOL"]})]})]}),v?W.jsxs("form",{onSubmit:B,style:{marginBottom:"16px",paddingBottom:"16px",borderBottom:"1px solid var(--border)"},children:[W.jsx("h4",{style:{margin:"0 0 10px",fontSize:"12px",color:"var(--accent)"},children:" CREATE NEW SITE"}),W.jsx("input",{type:"text",placeholder:"Site Name",value:_.name,onChange:E=>S({..._,name:E.target.value}),style:{width:"100%",padding:"8px",marginBottom:"10px",border:"1px solid var(--border)",borderRadius:"3px",background:"rgba(0,0,0,0.2)",color:"inherit",fontSize:"11px"}}),W.jsx("textarea",{placeholder:"Site Description",value:_.description,onChange:E=>S({..._,description:E.target.value}),style:{width:"100%",padding:"8px",marginBottom:"10px",border:"1px solid var(--border)",borderRadius:"3px",background:"rgba(0,0,0,0.2)",color:"inherit",fontSize:"11px",resize:"vertical",minHeight:"60px"}}),W.jsxs("select",{value:_.template,onChange:E=>S({..._,template:E.target.value}),style:{width:"100%",padding:"8px",marginBottom:"10px",border:"1px solid var(--border)",borderRadius:"3px",background:"rgba(0,0,0,0.2)",color:"inherit",fontSize:"11px"},children:[W.jsx("option",{value:"classic",children:" Classic Template"}),W.jsx("option",{value:"modern",children:" Modern Template"}),W.jsx("option",{value:"minimal",children:" Minimal Template"}),W.jsx("option",{value:"gaming",children:" Gaming Template"})]}),W.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[W.jsx("input",{type:"color",value:_.color,onChange:E=>S({..._,color:E.target.value}),style:{width:"50px",height:"36px",border:"none",borderRadius:"3px",cursor:"pointer"}}),W.jsxs("div",{style:{flex:1,padding:"8px",background:"rgba(0,0,0,0.2)",borderRadius:"3px",fontSize:"11px"},children:["Primary Color: ",_.color]})]}),W.jsxs("div",{style:{background:"rgba(255,204,0,0.1)",padding:"10px",borderRadius:"3px",marginBottom:"10px",fontSize:"10px",border:"1px solid var(--border)"},children:[W.jsx("strong",{children:" Fee:"}),W.jsxs("div",{children:[K0," SOL will be transferred to treasury"]})]}),W.jsxs("div",{style:{display:"flex",gap:"10px"},children:[W.jsx("button",{type:"submit",disabled:k,style:{flex:1,padding:"8px",background:"var(--accent)",border:"none",borderRadius:"3px",color:"#000",fontWeight:"bold",fontSize:"11px",cursor:k?"not-allowed":"pointer",opacity:k?.5:1},children:k?" Processing...":" CREATE SITE"}),W.jsx("button",{type:"button",onClick:()=>$(!1),style:{flex:1,padding:"8px",background:"rgba(255,255,255,0.1)",border:"1px solid var(--border)",borderRadius:"3px",color:"inherit",fontSize:"11px",cursor:"pointer"},children:"CANCEL"})]})]}):W.jsx("button",{onClick:()=>$(!0),style:{width:"100%",padding:"10px",background:"var(--accent)",border:"none",borderRadius:"3px",color:"#000",fontWeight:"bold",fontSize:"12px",cursor:"pointer",marginBottom:"16px"},children:" CREATE NEW SITE"}),s.length>0?W.jsxs("div",{children:[W.jsx("h4",{style:{margin:"0 0 10px",fontSize:"12px",color:"var(--accent)"},children:" YOUR SITES"}),s.map(E=>W.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",padding:"12px",borderRadius:"3px",marginBottom:"10px",border:`2px solid ${E.color}`},children:[W.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"8px"},children:[W.jsxs("div",{children:[W.jsx("div",{style:{fontSize:"13px",fontWeight:"bold",color:E.color},children:E.name}),W.jsx("div",{style:{fontSize:"9px",color:"var(--text-dim)",marginTop:"4px"},children:E.description})]}),W.jsxs("div",{style:{fontSize:"11px",color:"var(--text-dim)",textAlign:"right"},children:[" ",E.template]})]}),W.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"8px",borderRadius:"2px",marginBottom:"10px",fontSize:"9px",fontFamily:"monospace",wordBreak:"break-all"},children:[" ",window.location.origin,"/sites/",E.id]}),W.jsxs("div",{style:{display:"flex",gap:"8px"},children:[W.jsx("button",{onClick:()=>window.open(`/sites/${E.id}`,"_blank"),style:{flex:1,padding:"6px",background:"rgba(76,205,196,0.2)",border:"1px solid var(--border)",borderRadius:"2px",color:"inherit",fontSize:"10px",cursor:"pointer"},children:" VIEW"}),W.jsx("button",{onClick:()=>q(E.id),style:{flex:1,padding:"6px",background:"rgba(255,204,0,0.2)",border:"1px solid var(--border)",borderRadius:"2px",color:"inherit",fontSize:"10px",cursor:"pointer"},children:" RENEW"}),W.jsx("button",{onClick:()=>D(E.id),style:{flex:1,padding:"6px",background:"rgba(255,0,0,0.2)",border:"1px solid var(--border)",borderRadius:"2px",color:"inherit",fontSize:"10px",cursor:"pointer"},children:" DELETE"})]})]},E.id))]}):W.jsxs("div",{style:{background:"rgba(100,100,100,0.1)",padding:"16px",borderRadius:"3px",textAlign:"center",fontSize:"11px",color:"var(--text-dim)"},children:["No sites created yet",W.jsx("br",{}),"Start now and create your first site! "]})]}):W.jsxs("div",{className:"widget",children:[W.jsx("h3",{children:" SITE MANAGER"}),W.jsx("div",{className:"warning",children:"Connect your wallet to create and manage your personal site"})]})}function p6e(){const[t,e]=ne.useState([]);ne.useEffect(()=>(window.showToast=(n,i="info")=>{const s=Date.now()+Math.random(),a=["info","success","error","warning"].includes(i)?i:"info";e(c=>[...c,{id:s,msg:n,type:a}]),setTimeout(()=>{e(c=>c.filter(l=>l.id!==s))},4e3)},()=>{window.showToast=void 0}),[]);const r=n=>{e(i=>i.filter(s=>s.id!==n))};return W.jsx("div",{className:"toast-container",children:t.map(n=>W.jsxs("div",{className:`toast toast-${n.type}`,onClick:()=>r(n.id),role:"alert",children:[W.jsx("span",{className:"toast-content",children:n.msg}),W.jsx("button",{className:"toast-close",onClick:i=>{i.stopPropagation(),r(n.id)},"aria-label":"Close",children:""})]},n.id))})}const g6e=ZK("mainnet-beta");function m6e(){const t=ne.useMemo(()=>{const i="";return[new mQ,new SQ,new pQ,new WAe({projectId:i}),new KAe,new XAe]},[]),e=["Airdrop","Staking","NFTs","Referral Rewards"],[r,n]=ne.useState(0);return ne.useEffect(()=>{const i=setInterval(()=>n(s=>(s+1)%e.length),2200);return()=>clearInterval(i)},[]),W.jsx(JK,{endpoint:g6e,children:W.jsx(jY,{wallets:t,autoConnect:!0,children:W.jsx(HY,{children:W.jsxs("div",{className:"pixel-app",children:[W.jsx(y6e,{}),W.jsxs("header",{className:"pixel-header",children:[W.jsx("div",{className:"brand",children:"DOJO3"}),W.jsx("div",{className:"tag",children:"AIRDROP  STAKING  NFTs  MAINNET"})]}),W.jsx("section",{className:"hero",children:W.jsxs("div",{className:"hero-inner",children:[W.jsx("h1",{style:{marginBottom:8},children:"Welcome to Dojo3"}),W.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[W.jsx("div",{style:{fontSize:14,color:"var(--text-dim)"},children:"Solana "}),W.jsx("div",{className:"hero-feature",style:{fontSize:14,fontWeight:700,color:"var(--accent)"},children:e[r]},r),W.jsx("div",{style:{fontSize:13,color:"var(--text-dim)"},children:" Mainnet"})]}),W.jsx("p",{className:"lead",style:{maxWidth:720},children:"Dojo3 makes token distributions, staking and NFT drops simple and secure."}),W.jsxs("div",{style:{display:"flex",gap:10,marginTop:12,marginBottom:8},children:[W.jsx("div",{style:{background:"rgba(255,255,255,0.04)",padding:"6px 10px",borderRadius:6},children:"Check eligibility"}),W.jsx("div",{style:{background:"rgba(255,255,255,0.04)",padding:"6px 10px",borderRadius:6},children:"Claim tokens"}),W.jsx("div",{style:{background:"rgba(255,255,255,0.04)",padding:"6px 10px",borderRadius:6},children:"Stake NFTs"}),W.jsx("div",{style:{background:"rgba(255,255,255,0.04)",padding:"6px 10px",borderRadius:6},children:"Earn rewards"})]}),W.jsx("div",{className:"cta-row",style:{marginTop:14},children:W.jsx(e6e,{})})]})}),W.jsxs("main",{className:"container",children:[W.jsxs("div",{className:"grid",children:[W.jsx("div",{className:"col",children:W.jsx(t6e,{})}),W.jsx("div",{className:"col",children:W.jsx(r6e,{})})]}),W.jsx("div",{className:"admin-row",children:W.jsx(i6e,{})}),W.jsx("div",{className:"admin-row",children:W.jsx(d6e,{})}),W.jsx("div",{className:"admin-row",children:W.jsx(f6e,{})})]}),W.jsx(p6e,{}),W.jsxs("footer",{className:"pixel-footer",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[W.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[W.jsx("span",{style:{fontSize:16},children:""}),W.jsx("strong",{children:"Dojo3"})]}),W.jsx("a",{href:"https://x.com/Dojo3_",target:"_blank",rel:"noreferrer",style:{background:"#1DA1F2",color:"#fff",padding:"6px 10px",borderRadius:6,textDecoration:"none"},children:"Follow @Dojo3_"})]})]})})})})}function y6e(){const[t,e]=ne.useState(null),[r,n]=ne.useState(null);ne.useEffect(()=>{try{const g=new URLSearchParams(window.location.search),m=g.get("ref")||g.get("r");if(m){localStorage.setItem("dojo3_referrer",m),n(m),e(m);return}const v=localStorage.getItem("dojo3_referrer");v&&e(v)}catch{}},[]);const i=r||t,{publicKey:s,connected:o}=bu(),[a,c]=ne.useState(!1),l=async g=>{try{await navigator.clipboard.writeText(g),c(!0),setTimeout(()=>c(!1),1800)}catch(m){console.error("Copy failed",m)}};if(!i)return null;const u=i.length>24?`${i.slice(0,12)}${i.slice(-8)}`:i,h=o&&s?s.toString():i,d=`${window.location.origin}${window.location.pathname}?ref=${h}`;return W.jsxs("div",{style:{background:"linear-gradient(90deg,#072540,#0b3b5a)",color:"#fff",padding:"10px 14px",textAlign:"center",fontSize:"14px",display:"flex",justifyContent:"center",alignItems:"center",gap:"12px"},children:[W.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[W.jsx("div",{style:{fontSize:13,color:"#BEE3F8"},children:" Referred by"}),W.jsx("div",{style:{fontFamily:"monospace",background:"rgba(255,255,255,0.04)",padding:"6px 10px",borderRadius:6},children:u})]}),W.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[W.jsx("button",{onClick:()=>l(h),style:{padding:"6px 10px",borderRadius:6,border:"none",cursor:"pointer",background:"#0ea5a3",color:"#012"},children:"Copy Pubkey"}),W.jsx("button",{onClick:()=>l(d),style:{padding:"6px 10px",borderRadius:6,border:"1px solid rgba(255,255,255,0.08)",background:"transparent",color:"#fff",cursor:"pointer"},children:"Copy Share Link"}),W.jsx("a",{href:`https://twitter.com/intent/tweet?text=${encodeURIComponent("Claim your Dojo3 airdrop")}&url=${encodeURIComponent(d)}`,target:"_blank",rel:"noreferrer",style:{padding:"6px 10px",borderRadius:6,border:"1px solid rgba(255,255,255,0.08)",background:"transparent",color:"#1DA1F2",textDecoration:"none"},children:"Twitter"}),W.jsx("a",{href:`https://t.me/share/url?url=${encodeURIComponent(d)}&text=${encodeURIComponent("Claim your Dojo3 airdrop")}`,target:"_blank",rel:"noreferrer",style:{padding:"6px 10px",borderRadius:6,border:"1px solid rgba(255,255,255,0.08)",background:"transparent",color:"#26A5E4",textDecoration:"none"},children:"Telegram"}),W.jsx("a",{href:`https://api.whatsapp.com/send?text=${encodeURIComponent("Claim your Dojo3 airdrop: ")+encodeURIComponent(d)}`,target:"_blank",rel:"noreferrer",style:{padding:"6px 10px",borderRadius:6,border:"1px solid rgba(255,255,255,0.08)",background:"transparent",color:"#25D366",textDecoration:"none"},children:"WhatsApp"}),W.jsx("div",{style:{minWidth:80,textAlign:"left",fontSize:12,opacity:.95},children:a?W.jsx("span",{style:{color:"#d1fae5"},children:"Copied "}):W.jsx("span",{style:{color:"#cfefff"},children:"Ready to share"})})]})]})}typeof window<"u"&&!window.Buffer&&(window.Buffer=Xe.Buffer);const w6e=DO(document.getElementById("root"));w6e.render(W.jsx(m6e,{}));export{jCe as $,pt as A,gi as B,Bp as C,N6e as D,xI as E,Es as F,IV as G,BCe as H,Y as I,Qn as J,zCe as K,S1 as L,An as M,nn as N,ge as O,Ae as P,no as Q,Xt as R,Sg as S,wi as T,ns as U,lp as V,ix as W,P1 as X,uAe as Y,Cg as Z,qe as _,XY as a,rj as a0,sx as a1,Mp as a2,Th as a3,nre as a4,h8e as a5,Z8 as a6,nR as a7,Vte as a8,ire as a9,d8e as aa,u8e as ab,Yv as ac,g8e as ad,f8e as ae,r2e as af,ACe as ag,$M as ah,FL as ai,Kve as aj,n2e as ak,CCe as al,ICe as am,v2 as an,MCe as ao,NCe as ap,dS as b,sy as c,T6e as d,M6e as e,C6e as f,ha as g,Zi as h,Wr as i,Rc as j,Zf as k,$6e as l,FCe as m,z1 as n,LCe as o,ut as p,dt as q,UCe as r,xr as s,U1 as t,EL as u,_r as v,Oe as w,Ue as x,Xo as y,Qi as z};
