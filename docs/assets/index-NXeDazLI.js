const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/basic-KQ2SPbfa.js","assets/index-DsoM-gBk.js","assets/w3m-modal-D5HTq3wq.js"])))=>i.map(i=>d[i]);
var TU=Object.defineProperty;var $U=(t,e,r)=>e in t?TU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ot=(t,e,r)=>$U(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var _r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Um(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var w$={exports:{}},rv={},b$={exports:{}},wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jm=Symbol.for("react.element"),PU=Symbol.for("react.portal"),OU=Symbol.for("react.fragment"),kU=Symbol.for("react.strict_mode"),RU=Symbol.for("react.profiler"),DU=Symbol.for("react.provider"),LU=Symbol.for("react.context"),BU=Symbol.for("react.forward_ref"),UU=Symbol.for("react.suspense"),jU=Symbol.for("react.memo"),FU=Symbol.for("react.lazy"),G5=Symbol.iterator;function zU(t){return t===null||typeof t!="object"?null:(t=G5&&t[G5]||t["@@iterator"],typeof t=="function"?t:null)}var v$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E$=Object.assign,_$={};function Mp(t,e,r){this.props=t,this.context=e,this.refs=_$,this.updater=r||v$}Mp.prototype.isReactComponent={};Mp.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mp.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function S$(){}S$.prototype=Mp.prototype;function ix(t,e,r){this.props=t,this.context=e,this.refs=_$,this.updater=r||v$}var sx=ix.prototype=new S$;sx.constructor=ix;E$(sx,Mp.prototype);sx.isPureReactComponent=!0;var Y5=Array.isArray,x$=Object.prototype.hasOwnProperty,ox={current:null},I$={key:!0,ref:!0,__self:!0,__source:!0};function A$(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)x$.call(e,n)&&!I$.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:jm,type:t,key:s,ref:o,props:i,_owner:ox.current}}function qU(t,e){return{$$typeof:jm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ax(t){return typeof t=="object"&&t!==null&&t.$$typeof===jm}function WU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Q5=/\/+/g;function S2(t,e){return typeof t=="object"&&t!==null&&t.key!=null?WU(""+t.key):e.toString(36)}function qw(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case jm:case PU:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+S2(o,0):n,Y5(i)?(r="",t!=null&&(r=t.replace(Q5,"$&/")+"/"),qw(i,e,r,"",function(l){return l})):i!=null&&(ax(i)&&(i=qU(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Q5,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Y5(t))for(var a=0;a<t.length;a++){s=t[a];var c=n+S2(s,a);o+=qw(s,e,r,c,i)}else if(c=zU(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=n+S2(s,a++),o+=qw(s,e,r,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $y(t,e,r){if(t==null)return t;var n=[],i=0;return qw(t,n,"","",function(s){return e.call(r,s,i++)}),n}function HU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var is={current:null},Ww={transition:null},KU={ReactCurrentDispatcher:is,ReactCurrentBatchConfig:Ww,ReactCurrentOwner:ox};function C$(){throw Error("act(...) is not supported in production builds of React.")}wt.Children={map:$y,forEach:function(t,e,r){$y(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return $y(t,function(){e++}),e},toArray:function(t){return $y(t,function(e){return e})||[]},only:function(t){if(!ax(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};wt.Component=Mp;wt.Fragment=OU;wt.Profiler=RU;wt.PureComponent=ix;wt.StrictMode=kU;wt.Suspense=UU;wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KU;wt.act=C$;wt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=E$({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ox.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)x$.call(e,c)&&!I$.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];n.children=a}return{$$typeof:jm,type:t.type,key:i,ref:s,props:n,_owner:o}};wt.createContext=function(t){return t={$$typeof:LU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DU,_context:t},t.Consumer=t};wt.createElement=A$;wt.createFactory=function(t){var e=A$.bind(null,t);return e.type=t,e};wt.createRef=function(){return{current:null}};wt.forwardRef=function(t){return{$$typeof:BU,render:t}};wt.isValidElement=ax;wt.lazy=function(t){return{$$typeof:FU,_payload:{_status:-1,_result:t},_init:HU}};wt.memo=function(t,e){return{$$typeof:jU,type:t,compare:e===void 0?null:e}};wt.startTransition=function(t){var e=Ww.transition;Ww.transition={};try{t()}finally{Ww.transition=e}};wt.unstable_act=C$;wt.useCallback=function(t,e){return is.current.useCallback(t,e)};wt.useContext=function(t){return is.current.useContext(t)};wt.useDebugValue=function(){};wt.useDeferredValue=function(t){return is.current.useDeferredValue(t)};wt.useEffect=function(t,e){return is.current.useEffect(t,e)};wt.useId=function(){return is.current.useId()};wt.useImperativeHandle=function(t,e,r){return is.current.useImperativeHandle(t,e,r)};wt.useInsertionEffect=function(t,e){return is.current.useInsertionEffect(t,e)};wt.useLayoutEffect=function(t,e){return is.current.useLayoutEffect(t,e)};wt.useMemo=function(t,e){return is.current.useMemo(t,e)};wt.useReducer=function(t,e,r){return is.current.useReducer(t,e,r)};wt.useRef=function(t){return is.current.useRef(t)};wt.useState=function(t){return is.current.useState(t)};wt.useSyncExternalStore=function(t,e,r){return is.current.useSyncExternalStore(t,e,r)};wt.useTransition=function(){return is.current.useTransition()};wt.version="18.3.1";b$.exports=wt;var ne=b$.exports;const fe=Fa(ne);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VU=ne,GU=Symbol.for("react.element"),YU=Symbol.for("react.fragment"),QU=Object.prototype.hasOwnProperty,ZU=VU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JU={key:!0,ref:!0,__self:!0,__source:!0};function N$(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)QU.call(e,n)&&!JU.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:GU,type:t,key:s,ref:o,props:i,_owner:ZU.current}}rv.Fragment=YU;rv.jsx=N$;rv.jsxs=N$;w$.exports=rv;var H=w$.exports,M$={exports:{}},Zs={},T$={exports:{}},$$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,S){var y=M.length;M.push(S);e:for(;0<y;){var C=y-1>>>1,I=M[C];if(0<i(I,S))M[C]=S,M[y]=I,y=C;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var S=M[0],y=M.pop();if(y!==S){M[0]=y;e:for(var C=0,I=M.length,U=I>>>1;C<U;){var K=2*(C+1)-1,V=M[K],te=K+1,se=M[te];if(0>i(V,y))te<I&&0>i(se,V)?(M[C]=se,M[te]=y,C=te):(M[C]=V,M[K]=y,C=K);else if(te<I&&0>i(se,y))M[C]=se,M[te]=y,C=te;else break e}}return S}function i(M,S){var y=M.sortIndex-S.sortIndex;return y!==0?y:M.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,h=null,d=3,g=!1,m=!1,v=!1,$=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(M){for(var S=r(l);S!==null;){if(S.callback===null)n(l);else if(S.startTime<=M)n(l),S.sortIndex=S.expirationTime,e(c,S);else break;S=r(l)}}function T(M){if(v=!1,A(M),!m)if(r(c)!==null)m=!0,w(k);else{var S=r(l);S!==null&&N(T,S.startTime-M)}}function k(M,S){m=!1,v&&(v=!1,_(F),F=-1),g=!0;var y=d;try{for(A(S),h=r(c);h!==null&&(!(h.expirationTime>S)||M&&!R());){var C=h.callback;if(typeof C=="function"){h.callback=null,d=h.priorityLevel;var I=C(h.expirationTime<=S);S=t.unstable_now(),typeof I=="function"?h.callback=I:h===r(c)&&n(c),A(S)}else n(c);h=r(c)}if(h!==null)var U=!0;else{var K=r(l);K!==null&&N(T,K.startTime-S),U=!1}return U}finally{h=null,d=y,g=!1}}var D=!1,L=null,F=-1,B=5,q=-1;function R(){return!(t.unstable_now()-q<B)}function E(){if(L!==null){var M=t.unstable_now();q=M;var S=!0;try{S=L(!0,M)}finally{S?b():(D=!1,L=null)}}else D=!1}var b;if(typeof x=="function")b=function(){x(E)};else if(typeof MessageChannel<"u"){var f=new MessageChannel,p=f.port2;f.port1.onmessage=E,b=function(){p.postMessage(null)}}else b=function(){$(E,0)};function w(M){L=M,D||(D=!0,b())}function N(M,S){F=$(function(){M(t.unstable_now())},S)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,w(k))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(M){switch(d){case 1:case 2:case 3:var S=3;break;default:S=d}var y=d;d=S;try{return M()}finally{d=y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,S){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var y=d;d=M;try{return S()}finally{d=y}},t.unstable_scheduleCallback=function(M,S,y){var C=t.unstable_now();switch(typeof y=="object"&&y!==null?(y=y.delay,y=typeof y=="number"&&0<y?C+y:C):y=C,M){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=y+I,M={id:u++,callback:S,priorityLevel:M,startTime:y,expirationTime:I,sortIndex:-1},y>C?(M.sortIndex=y,e(l,M),r(c)===null&&M===r(l)&&(v?(_(F),F=-1):v=!0,N(T,y-C))):(M.sortIndex=I,e(c,M),m||g||(m=!0,w(k))),M},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(M){var S=d;return function(){var y=d;d=S;try{return M.apply(this,arguments)}finally{d=y}}}})($$);T$.exports=$$;var XU=T$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ej=ne,Gs=XU;function de(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var P$=new Set,Pg={};function Fh(t,e){Zf(t,e),Zf(t+"Capture",e)}function Zf(t,e){for(Pg[t]=e,t=0;t<e.length;t++)P$.add(e[t])}var qc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),X_=Object.prototype.hasOwnProperty,tj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Z5={},J5={};function rj(t){return X_.call(J5,t)?!0:X_.call(Z5,t)?!1:tj.test(t)?J5[t]=!0:(Z5[t]=!0,!1)}function nj(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ij(t,e,r,n){if(e===null||typeof e>"u"||nj(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ss(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var vi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vi[t]=new ss(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vi[e]=new ss(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vi[t]=new ss(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vi[t]=new ss(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vi[t]=new ss(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vi[t]=new ss(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vi[t]=new ss(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vi[t]=new ss(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vi[t]=new ss(t,5,!1,t.toLowerCase(),null,!1,!1)});var cx=/[\-:]([a-z])/g;function lx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cx,lx);vi[e]=new ss(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cx,lx);vi[e]=new ss(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cx,lx);vi[e]=new ss(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vi[t]=new ss(t,1,!1,t.toLowerCase(),null,!1,!1)});vi.xlinkHref=new ss("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vi[t]=new ss(t,1,!1,t.toLowerCase(),null,!0,!0)});function ux(t,e,r,n){var i=vi.hasOwnProperty(e)?vi[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ij(e,r,i,n)&&(r=null),n||i===null?rj(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var el=ej.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Py=Symbol.for("react.element"),gf=Symbol.for("react.portal"),mf=Symbol.for("react.fragment"),hx=Symbol.for("react.strict_mode"),e3=Symbol.for("react.profiler"),O$=Symbol.for("react.provider"),k$=Symbol.for("react.context"),dx=Symbol.for("react.forward_ref"),t3=Symbol.for("react.suspense"),r3=Symbol.for("react.suspense_list"),fx=Symbol.for("react.memo"),Il=Symbol.for("react.lazy"),R$=Symbol.for("react.offscreen"),X5=Symbol.iterator;function i0(t){return t===null||typeof t!="object"?null:(t=X5&&t[X5]||t["@@iterator"],typeof t=="function"?t:null)}var tn=Object.assign,x2;function W0(t){if(x2===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);x2=e&&e[1]||""}return`
`+x2+t}var I2=!1;function A2(t,e){if(!t||I2)return"";I2=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{I2=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?W0(t):""}function sj(t){switch(t.tag){case 5:return W0(t.type);case 16:return W0("Lazy");case 13:return W0("Suspense");case 19:return W0("SuspenseList");case 0:case 2:case 15:return t=A2(t.type,!1),t;case 11:return t=A2(t.type.render,!1),t;case 1:return t=A2(t.type,!0),t;default:return""}}function n3(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mf:return"Fragment";case gf:return"Portal";case e3:return"Profiler";case hx:return"StrictMode";case t3:return"Suspense";case r3:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case k$:return(t.displayName||"Context")+".Consumer";case O$:return(t._context.displayName||"Context")+".Provider";case dx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fx:return e=t.displayName||null,e!==null?e:n3(t.type)||"Memo";case Il:e=t._payload,t=t._init;try{return n3(t(e))}catch{}}return null}function oj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return n3(e);case 8:return e===hx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function lu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function D$(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aj(t){var e=D$(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Oy(t){t._valueTracker||(t._valueTracker=aj(t))}function L$(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=D$(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function U1(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function i3(t,e){var r=e.checked;return tn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function e6(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=lu(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function B$(t,e){e=e.checked,e!=null&&ux(t,"checked",e,!1)}function s3(t,e){B$(t,e);var r=lu(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?o3(t,e.type,r):e.hasOwnProperty("defaultValue")&&o3(t,e.type,lu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function t6(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function o3(t,e,r){(e!=="number"||U1(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var H0=Array.isArray;function Df(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+lu(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function a3(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(de(91));return tn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function r6(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(de(92));if(H0(r)){if(1<r.length)throw Error(de(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:lu(r)}}function U$(t,e){var r=lu(e.value),n=lu(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function n6(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function j$(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function c3(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?j$(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ky,F$=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ky=ky||document.createElement("div"),ky.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ky.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Og(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var cg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cj=["Webkit","ms","Moz","O"];Object.keys(cg).forEach(function(t){cj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cg[e]=cg[t]})});function z$(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||cg.hasOwnProperty(t)&&cg[t]?(""+e).trim():e+"px"}function q$(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=z$(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var lj=tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function l3(t,e){if(e){if(lj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(de(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(de(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(de(61))}if(e.style!=null&&typeof e.style!="object")throw Error(de(62))}}function u3(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var h3=null;function px(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var d3=null,Lf=null,Bf=null;function i6(t){if(t=qm(t)){if(typeof d3!="function")throw Error(de(280));var e=t.stateNode;e&&(e=av(e),d3(t.stateNode,t.type,e))}}function W$(t){Lf?Bf?Bf.push(t):Bf=[t]:Lf=t}function H$(){if(Lf){var t=Lf,e=Bf;if(Bf=Lf=null,i6(t),e)for(t=0;t<e.length;t++)i6(e[t])}}function K$(t,e){return t(e)}function V$(){}var C2=!1;function G$(t,e,r){if(C2)return t(e,r);C2=!0;try{return K$(t,e,r)}finally{C2=!1,(Lf!==null||Bf!==null)&&(V$(),H$())}}function kg(t,e){var r=t.stateNode;if(r===null)return null;var n=av(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(de(231,e,typeof r));return r}var f3=!1;if(qc)try{var s0={};Object.defineProperty(s0,"passive",{get:function(){f3=!0}}),window.addEventListener("test",s0,s0),window.removeEventListener("test",s0,s0)}catch{f3=!1}function uj(t,e,r,n,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(r,l)}catch(u){this.onError(u)}}var lg=!1,j1=null,F1=!1,p3=null,hj={onError:function(t){lg=!0,j1=t}};function dj(t,e,r,n,i,s,o,a,c){lg=!1,j1=null,uj.apply(hj,arguments)}function fj(t,e,r,n,i,s,o,a,c){if(dj.apply(this,arguments),lg){if(lg){var l=j1;lg=!1,j1=null}else throw Error(de(198));F1||(F1=!0,p3=l)}}function zh(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Y$(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function s6(t){if(zh(t)!==t)throw Error(de(188))}function pj(t){var e=t.alternate;if(!e){if(e=zh(t),e===null)throw Error(de(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return s6(i),t;if(s===n)return s6(i),e;s=s.sibling}throw Error(de(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(de(189))}}if(r.alternate!==n)throw Error(de(190))}if(r.tag!==3)throw Error(de(188));return r.stateNode.current===r?t:e}function Q$(t){return t=pj(t),t!==null?Z$(t):null}function Z$(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Z$(t);if(e!==null)return e;t=t.sibling}return null}var J$=Gs.unstable_scheduleCallback,o6=Gs.unstable_cancelCallback,gj=Gs.unstable_shouldYield,mj=Gs.unstable_requestPaint,pn=Gs.unstable_now,yj=Gs.unstable_getCurrentPriorityLevel,gx=Gs.unstable_ImmediatePriority,X$=Gs.unstable_UserBlockingPriority,z1=Gs.unstable_NormalPriority,wj=Gs.unstable_LowPriority,eP=Gs.unstable_IdlePriority,nv=null,Na=null;function bj(t){if(Na&&typeof Na.onCommitFiberRoot=="function")try{Na.onCommitFiberRoot(nv,t,void 0,(t.current.flags&128)===128)}catch{}}var ra=Math.clz32?Math.clz32:_j,vj=Math.log,Ej=Math.LN2;function _j(t){return t>>>=0,t===0?32:31-(vj(t)/Ej|0)|0}var Ry=64,Dy=4194304;function K0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function q1(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=K0(a):(s&=o,s!==0&&(n=K0(s)))}else o=r&~i,o!==0?n=K0(o):s!==0&&(n=K0(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ra(e),i=1<<r,n|=t[r],e&=~i;return n}function Sj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xj(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ra(s),a=1<<o,c=i[o];c===-1?(!(a&r)||a&n)&&(i[o]=Sj(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function g3(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function tP(){var t=Ry;return Ry<<=1,!(Ry&4194240)&&(Ry=64),t}function N2(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Fm(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ra(e),t[e]=r}function Ij(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-ra(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function mx(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ra(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Xt=0;function rP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nP,yx,iP,sP,oP,m3=!1,Ly=[],Yl=null,Ql=null,Zl=null,Rg=new Map,Dg=new Map,Ol=[],Aj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function a6(t,e){switch(t){case"focusin":case"focusout":Yl=null;break;case"dragenter":case"dragleave":Ql=null;break;case"mouseover":case"mouseout":Zl=null;break;case"pointerover":case"pointerout":Rg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dg.delete(e.pointerId)}}function o0(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=qm(e),e!==null&&yx(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Cj(t,e,r,n,i){switch(e){case"focusin":return Yl=o0(Yl,t,e,r,n,i),!0;case"dragenter":return Ql=o0(Ql,t,e,r,n,i),!0;case"mouseover":return Zl=o0(Zl,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Rg.set(s,o0(Rg.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Dg.set(s,o0(Dg.get(s)||null,t,e,r,n,i)),!0}return!1}function aP(t){var e=Qu(t.target);if(e!==null){var r=zh(e);if(r!==null){if(e=r.tag,e===13){if(e=Y$(r),e!==null){t.blockedOn=e,oP(t.priority,function(){iP(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hw(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=y3(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);h3=n,r.target.dispatchEvent(n),h3=null}else return e=qm(r),e!==null&&yx(e),t.blockedOn=r,!1;e.shift()}return!0}function c6(t,e,r){Hw(t)&&r.delete(e)}function Nj(){m3=!1,Yl!==null&&Hw(Yl)&&(Yl=null),Ql!==null&&Hw(Ql)&&(Ql=null),Zl!==null&&Hw(Zl)&&(Zl=null),Rg.forEach(c6),Dg.forEach(c6)}function a0(t,e){t.blockedOn===e&&(t.blockedOn=null,m3||(m3=!0,Gs.unstable_scheduleCallback(Gs.unstable_NormalPriority,Nj)))}function Lg(t){function e(i){return a0(i,t)}if(0<Ly.length){a0(Ly[0],t);for(var r=1;r<Ly.length;r++){var n=Ly[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Yl!==null&&a0(Yl,t),Ql!==null&&a0(Ql,t),Zl!==null&&a0(Zl,t),Rg.forEach(e),Dg.forEach(e),r=0;r<Ol.length;r++)n=Ol[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ol.length&&(r=Ol[0],r.blockedOn===null);)aP(r),r.blockedOn===null&&Ol.shift()}var Uf=el.ReactCurrentBatchConfig,W1=!0;function Mj(t,e,r,n){var i=Xt,s=Uf.transition;Uf.transition=null;try{Xt=1,wx(t,e,r,n)}finally{Xt=i,Uf.transition=s}}function Tj(t,e,r,n){var i=Xt,s=Uf.transition;Uf.transition=null;try{Xt=4,wx(t,e,r,n)}finally{Xt=i,Uf.transition=s}}function wx(t,e,r,n){if(W1){var i=y3(t,e,r,n);if(i===null)B2(t,e,n,H1,r),a6(t,n);else if(Cj(i,t,e,r,n))n.stopPropagation();else if(a6(t,n),e&4&&-1<Aj.indexOf(t)){for(;i!==null;){var s=qm(i);if(s!==null&&nP(s),s=y3(t,e,r,n),s===null&&B2(t,e,n,H1,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else B2(t,e,n,null,r)}}var H1=null;function y3(t,e,r,n){if(H1=null,t=px(n),t=Qu(t),t!==null)if(e=zh(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Y$(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return H1=t,null}function cP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yj()){case gx:return 1;case X$:return 4;case z1:case wj:return 16;case eP:return 536870912;default:return 16}default:return 16}}var Ll=null,bx=null,Kw=null;function lP(){if(Kw)return Kw;var t,e=bx,r=e.length,n,i="value"in Ll?Ll.value:Ll.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Kw=i.slice(t,1<n?1-n:void 0)}function Vw(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function By(){return!0}function l6(){return!1}function Js(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?By:l6,this.isPropagationStopped=l6,this}return tn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=By)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=By)},persist:function(){},isPersistent:By}),e}var Tp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vx=Js(Tp),zm=tn({},Tp,{view:0,detail:0}),$j=Js(zm),M2,T2,c0,iv=tn({},zm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ex,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==c0&&(c0&&t.type==="mousemove"?(M2=t.screenX-c0.screenX,T2=t.screenY-c0.screenY):T2=M2=0,c0=t),M2)},movementY:function(t){return"movementY"in t?t.movementY:T2}}),u6=Js(iv),Pj=tn({},iv,{dataTransfer:0}),Oj=Js(Pj),kj=tn({},zm,{relatedTarget:0}),$2=Js(kj),Rj=tn({},Tp,{animationName:0,elapsedTime:0,pseudoElement:0}),Dj=Js(Rj),Lj=tn({},Tp,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bj=Js(Lj),Uj=tn({},Tp,{data:0}),h6=Js(Uj),jj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zj[t])?!!e[t]:!1}function Ex(){return qj}var Wj=tn({},zm,{key:function(t){if(t.key){var e=jj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vw(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ex,charCode:function(t){return t.type==="keypress"?Vw(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vw(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hj=Js(Wj),Kj=tn({},iv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),d6=Js(Kj),Vj=tn({},zm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ex}),Gj=Js(Vj),Yj=tn({},Tp,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qj=Js(Yj),Zj=tn({},iv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Jj=Js(Zj),Xj=[9,13,27,32],_x=qc&&"CompositionEvent"in window,ug=null;qc&&"documentMode"in document&&(ug=document.documentMode);var eF=qc&&"TextEvent"in window&&!ug,uP=qc&&(!_x||ug&&8<ug&&11>=ug),f6=" ",p6=!1;function hP(t,e){switch(t){case"keyup":return Xj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yf=!1;function tF(t,e){switch(t){case"compositionend":return dP(e);case"keypress":return e.which!==32?null:(p6=!0,f6);case"textInput":return t=e.data,t===f6&&p6?null:t;default:return null}}function rF(t,e){if(yf)return t==="compositionend"||!_x&&hP(t,e)?(t=lP(),Kw=bx=Ll=null,yf=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uP&&e.locale!=="ko"?null:e.data;default:return null}}var nF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g6(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nF[t.type]:e==="textarea"}function fP(t,e,r,n){W$(n),e=K1(e,"onChange"),0<e.length&&(r=new vx("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var hg=null,Bg=null;function iF(t){xP(t,0)}function sv(t){var e=vf(t);if(L$(e))return t}function sF(t,e){if(t==="change")return e}var pP=!1;if(qc){var P2;if(qc){var O2="oninput"in document;if(!O2){var m6=document.createElement("div");m6.setAttribute("oninput","return;"),O2=typeof m6.oninput=="function"}P2=O2}else P2=!1;pP=P2&&(!document.documentMode||9<document.documentMode)}function y6(){hg&&(hg.detachEvent("onpropertychange",gP),Bg=hg=null)}function gP(t){if(t.propertyName==="value"&&sv(Bg)){var e=[];fP(e,Bg,t,px(t)),G$(iF,e)}}function oF(t,e,r){t==="focusin"?(y6(),hg=e,Bg=r,hg.attachEvent("onpropertychange",gP)):t==="focusout"&&y6()}function aF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sv(Bg)}function cF(t,e){if(t==="click")return sv(e)}function lF(t,e){if(t==="input"||t==="change")return sv(e)}function uF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sa=typeof Object.is=="function"?Object.is:uF;function Ug(t,e){if(sa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!X_.call(e,i)||!sa(t[i],e[i]))return!1}return!0}function w6(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function b6(t,e){var r=w6(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=w6(r)}}function mP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yP(){for(var t=window,e=U1();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=U1(t.document)}return e}function Sx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hF(t){var e=yP(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&mP(r.ownerDocument.documentElement,r)){if(n!==null&&Sx(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=b6(r,s);var o=b6(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dF=qc&&"documentMode"in document&&11>=document.documentMode,wf=null,w3=null,dg=null,b3=!1;function v6(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;b3||wf==null||wf!==U1(n)||(n=wf,"selectionStart"in n&&Sx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),dg&&Ug(dg,n)||(dg=n,n=K1(w3,"onSelect"),0<n.length&&(e=new vx("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=wf)))}function Uy(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var bf={animationend:Uy("Animation","AnimationEnd"),animationiteration:Uy("Animation","AnimationIteration"),animationstart:Uy("Animation","AnimationStart"),transitionend:Uy("Transition","TransitionEnd")},k2={},wP={};qc&&(wP=document.createElement("div").style,"AnimationEvent"in window||(delete bf.animationend.animation,delete bf.animationiteration.animation,delete bf.animationstart.animation),"TransitionEvent"in window||delete bf.transitionend.transition);function ov(t){if(k2[t])return k2[t];if(!bf[t])return t;var e=bf[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in wP)return k2[t]=e[r];return t}var bP=ov("animationend"),vP=ov("animationiteration"),EP=ov("animationstart"),_P=ov("transitionend"),SP=new Map,E6="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fu(t,e){SP.set(t,e),Fh(e,[t])}for(var R2=0;R2<E6.length;R2++){var D2=E6[R2],fF=D2.toLowerCase(),pF=D2[0].toUpperCase()+D2.slice(1);fu(fF,"on"+pF)}fu(bP,"onAnimationEnd");fu(vP,"onAnimationIteration");fu(EP,"onAnimationStart");fu("dblclick","onDoubleClick");fu("focusin","onFocus");fu("focusout","onBlur");fu(_P,"onTransitionEnd");Zf("onMouseEnter",["mouseout","mouseover"]);Zf("onMouseLeave",["mouseout","mouseover"]);Zf("onPointerEnter",["pointerout","pointerover"]);Zf("onPointerLeave",["pointerout","pointerover"]);Fh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var V0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gF=new Set("cancel close invalid load scroll toggle".split(" ").concat(V0));function _6(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,fj(n,e,void 0,t),t.currentTarget=null}function xP(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;_6(i,a,l),s=c}else for(o=0;o<n.length;o++){if(a=n[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;_6(i,a,l),s=c}}}if(F1)throw t=p3,F1=!1,p3=null,t}function Dr(t,e){var r=e[x3];r===void 0&&(r=e[x3]=new Set);var n=t+"__bubble";r.has(n)||(IP(e,t,2,!1),r.add(n))}function L2(t,e,r){var n=0;e&&(n|=4),IP(r,t,n,e)}var jy="_reactListening"+Math.random().toString(36).slice(2);function jg(t){if(!t[jy]){t[jy]=!0,P$.forEach(function(r){r!=="selectionchange"&&(gF.has(r)||L2(r,!1,t),L2(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jy]||(e[jy]=!0,L2("selectionchange",!1,e))}}function IP(t,e,r,n){switch(cP(e)){case 1:var i=Mj;break;case 4:i=Tj;break;default:i=wx}r=i.bind(null,e,r,t),i=void 0,!f3||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function B2(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Qu(a),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}a=a.parentNode}}n=n.return}G$(function(){var l=s,u=px(r),h=[];e:{var d=SP.get(t);if(d!==void 0){var g=vx,m=t;switch(t){case"keypress":if(Vw(r)===0)break e;case"keydown":case"keyup":g=Hj;break;case"focusin":m="focus",g=$2;break;case"focusout":m="blur",g=$2;break;case"beforeblur":case"afterblur":g=$2;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=u6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Oj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Gj;break;case bP:case vP:case EP:g=Dj;break;case _P:g=Qj;break;case"scroll":g=$j;break;case"wheel":g=Jj;break;case"copy":case"cut":case"paste":g=Bj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=d6}var v=(e&4)!==0,$=!v&&t==="scroll",_=v?d!==null?d+"Capture":null:d;v=[];for(var x=l,A;x!==null;){A=x;var T=A.stateNode;if(A.tag===5&&T!==null&&(A=T,_!==null&&(T=kg(x,_),T!=null&&v.push(Fg(x,T,A)))),$)break;x=x.return}0<v.length&&(d=new g(d,m,null,r,u),h.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",d&&r!==h3&&(m=r.relatedTarget||r.fromElement)&&(Qu(m)||m[Wc]))break e;if((g||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,g?(m=r.relatedTarget||r.toElement,g=l,m=m?Qu(m):null,m!==null&&($=zh(m),m!==$||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=l),g!==m)){if(v=u6,T="onMouseLeave",_="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=d6,T="onPointerLeave",_="onPointerEnter",x="pointer"),$=g==null?d:vf(g),A=m==null?d:vf(m),d=new v(T,x+"leave",g,r,u),d.target=$,d.relatedTarget=A,T=null,Qu(u)===l&&(v=new v(_,x+"enter",m,r,u),v.target=A,v.relatedTarget=$,T=v),$=T,g&&m)t:{for(v=g,_=m,x=0,A=v;A;A=ld(A))x++;for(A=0,T=_;T;T=ld(T))A++;for(;0<x-A;)v=ld(v),x--;for(;0<A-x;)_=ld(_),A--;for(;x--;){if(v===_||_!==null&&v===_.alternate)break t;v=ld(v),_=ld(_)}v=null}else v=null;g!==null&&S6(h,d,g,v,!1),m!==null&&$!==null&&S6(h,$,m,v,!0)}}e:{if(d=l?vf(l):window,g=d.nodeName&&d.nodeName.toLowerCase(),g==="select"||g==="input"&&d.type==="file")var k=sF;else if(g6(d))if(pP)k=lF;else{k=aF;var D=oF}else(g=d.nodeName)&&g.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(k=cF);if(k&&(k=k(t,l))){fP(h,k,r,u);break e}D&&D(t,d,l),t==="focusout"&&(D=d._wrapperState)&&D.controlled&&d.type==="number"&&o3(d,"number",d.value)}switch(D=l?vf(l):window,t){case"focusin":(g6(D)||D.contentEditable==="true")&&(wf=D,w3=l,dg=null);break;case"focusout":dg=w3=wf=null;break;case"mousedown":b3=!0;break;case"contextmenu":case"mouseup":case"dragend":b3=!1,v6(h,r,u);break;case"selectionchange":if(dF)break;case"keydown":case"keyup":v6(h,r,u)}var L;if(_x)e:{switch(t){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else yf?hP(t,r)&&(F="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(F="onCompositionStart");F&&(uP&&r.locale!=="ko"&&(yf||F!=="onCompositionStart"?F==="onCompositionEnd"&&yf&&(L=lP()):(Ll=u,bx="value"in Ll?Ll.value:Ll.textContent,yf=!0)),D=K1(l,F),0<D.length&&(F=new h6(F,t,null,r,u),h.push({event:F,listeners:D}),L?F.data=L:(L=dP(r),L!==null&&(F.data=L)))),(L=eF?tF(t,r):rF(t,r))&&(l=K1(l,"onBeforeInput"),0<l.length&&(u=new h6("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:l}),u.data=L))}xP(h,e)})}function Fg(t,e,r){return{instance:t,listener:e,currentTarget:r}}function K1(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=kg(t,r),s!=null&&n.unshift(Fg(t,s,i)),s=kg(t,e),s!=null&&n.push(Fg(t,s,i))),t=t.return}return n}function ld(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function S6(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,c=a.alternate,l=a.stateNode;if(c!==null&&c===n)break;a.tag===5&&l!==null&&(a=l,i?(c=kg(r,s),c!=null&&o.unshift(Fg(r,c,a))):i||(c=kg(r,s),c!=null&&o.push(Fg(r,c,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var mF=/\r\n?/g,yF=/\u0000|\uFFFD/g;function x6(t){return(typeof t=="string"?t:""+t).replace(mF,`
`).replace(yF,"")}function Fy(t,e,r){if(e=x6(e),x6(t)!==e&&r)throw Error(de(425))}function V1(){}var v3=null,E3=null;function _3(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var S3=typeof setTimeout=="function"?setTimeout:void 0,wF=typeof clearTimeout=="function"?clearTimeout:void 0,I6=typeof Promise=="function"?Promise:void 0,bF=typeof queueMicrotask=="function"?queueMicrotask:typeof I6<"u"?function(t){return I6.resolve(null).then(t).catch(vF)}:S3;function vF(t){setTimeout(function(){throw t})}function U2(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Lg(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Lg(e)}function Jl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function A6(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var $p=Math.random().toString(36).slice(2),Ia="__reactFiber$"+$p,zg="__reactProps$"+$p,Wc="__reactContainer$"+$p,x3="__reactEvents$"+$p,EF="__reactListeners$"+$p,_F="__reactHandles$"+$p;function Qu(t){var e=t[Ia];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Wc]||r[Ia]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=A6(t);t!==null;){if(r=t[Ia])return r;t=A6(t)}return e}t=r,r=t.parentNode}return null}function qm(t){return t=t[Ia]||t[Wc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(de(33))}function av(t){return t[zg]||null}var I3=[],Ef=-1;function pu(t){return{current:t}}function Fr(t){0>Ef||(t.current=I3[Ef],I3[Ef]=null,Ef--)}function xr(t,e){Ef++,I3[Ef]=t.current,t.current=e}var uu={},Hi=pu(uu),_s=pu(!1),_h=uu;function Jf(t,e){var r=t.type.contextTypes;if(!r)return uu;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ss(t){return t=t.childContextTypes,t!=null}function G1(){Fr(_s),Fr(Hi)}function C6(t,e,r){if(Hi.current!==uu)throw Error(de(168));xr(Hi,e),xr(_s,r)}function AP(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(de(108,oj(t)||"Unknown",i));return tn({},r,n)}function Y1(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||uu,_h=Hi.current,xr(Hi,t),xr(_s,_s.current),!0}function N6(t,e,r){var n=t.stateNode;if(!n)throw Error(de(169));r?(t=AP(t,e,_h),n.__reactInternalMemoizedMergedChildContext=t,Fr(_s),Fr(Hi),xr(Hi,t)):Fr(_s),xr(_s,r)}var Ac=null,cv=!1,j2=!1;function CP(t){Ac===null?Ac=[t]:Ac.push(t)}function SF(t){cv=!0,CP(t)}function gu(){if(!j2&&Ac!==null){j2=!0;var t=0,e=Xt;try{var r=Ac;for(Xt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Ac=null,cv=!1}catch(i){throw Ac!==null&&(Ac=Ac.slice(t+1)),J$(gx,gu),i}finally{Xt=e,j2=!1}}return null}var _f=[],Sf=0,Q1=null,Z1=0,Eo=[],_o=0,Sh=null,kc=1,Rc="";function ku(t,e){_f[Sf++]=Z1,_f[Sf++]=Q1,Q1=t,Z1=e}function NP(t,e,r){Eo[_o++]=kc,Eo[_o++]=Rc,Eo[_o++]=Sh,Sh=t;var n=kc;t=Rc;var i=32-ra(n)-1;n&=~(1<<i),r+=1;var s=32-ra(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,kc=1<<32-ra(e)+i|r<<i|n,Rc=s+t}else kc=1<<s|r<<i|n,Rc=t}function xx(t){t.return!==null&&(ku(t,1),NP(t,1,0))}function Ix(t){for(;t===Q1;)Q1=_f[--Sf],_f[Sf]=null,Z1=_f[--Sf],_f[Sf]=null;for(;t===Sh;)Sh=Eo[--_o],Eo[_o]=null,Rc=Eo[--_o],Eo[_o]=null,kc=Eo[--_o],Eo[_o]=null}var Vs=null,qs=null,Hr=!1,Jo=null;function MP(t,e){var r=So(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function M6(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vs=t,qs=Jl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vs=t,qs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Sh!==null?{id:kc,overflow:Rc}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=So(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Vs=t,qs=null,!0):!1;default:return!1}}function A3(t){return(t.mode&1)!==0&&(t.flags&128)===0}function C3(t){if(Hr){var e=qs;if(e){var r=e;if(!M6(t,e)){if(A3(t))throw Error(de(418));e=Jl(r.nextSibling);var n=Vs;e&&M6(t,e)?MP(n,r):(t.flags=t.flags&-4097|2,Hr=!1,Vs=t)}}else{if(A3(t))throw Error(de(418));t.flags=t.flags&-4097|2,Hr=!1,Vs=t}}}function T6(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vs=t}function zy(t){if(t!==Vs)return!1;if(!Hr)return T6(t),Hr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_3(t.type,t.memoizedProps)),e&&(e=qs)){if(A3(t))throw TP(),Error(de(418));for(;e;)MP(t,e),e=Jl(e.nextSibling)}if(T6(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(de(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){qs=Jl(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}qs=null}}else qs=Vs?Jl(t.stateNode.nextSibling):null;return!0}function TP(){for(var t=qs;t;)t=Jl(t.nextSibling)}function Xf(){qs=Vs=null,Hr=!1}function Ax(t){Jo===null?Jo=[t]:Jo.push(t)}var xF=el.ReactCurrentBatchConfig;function l0(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(de(309));var n=r.stateNode}if(!n)throw Error(de(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(de(284));if(!r._owner)throw Error(de(290,t))}return t}function qy(t,e){throw t=Object.prototype.toString.call(e),Error(de(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $6(t){var e=t._init;return e(t._payload)}function $P(t){function e(_,x){if(t){var A=_.deletions;A===null?(_.deletions=[x],_.flags|=16):A.push(x)}}function r(_,x){if(!t)return null;for(;x!==null;)e(_,x),x=x.sibling;return null}function n(_,x){for(_=new Map;x!==null;)x.key!==null?_.set(x.key,x):_.set(x.index,x),x=x.sibling;return _}function i(_,x){return _=ru(_,x),_.index=0,_.sibling=null,_}function s(_,x,A){return _.index=A,t?(A=_.alternate,A!==null?(A=A.index,A<x?(_.flags|=2,x):A):(_.flags|=2,x)):(_.flags|=1048576,x)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,x,A,T){return x===null||x.tag!==6?(x=V2(A,_.mode,T),x.return=_,x):(x=i(x,A),x.return=_,x)}function c(_,x,A,T){var k=A.type;return k===mf?u(_,x,A.props.children,T,A.key):x!==null&&(x.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Il&&$6(k)===x.type)?(T=i(x,A.props),T.ref=l0(_,x,A),T.return=_,T):(T=e1(A.type,A.key,A.props,null,_.mode,T),T.ref=l0(_,x,A),T.return=_,T)}function l(_,x,A,T){return x===null||x.tag!==4||x.stateNode.containerInfo!==A.containerInfo||x.stateNode.implementation!==A.implementation?(x=G2(A,_.mode,T),x.return=_,x):(x=i(x,A.children||[]),x.return=_,x)}function u(_,x,A,T,k){return x===null||x.tag!==7?(x=fh(A,_.mode,T,k),x.return=_,x):(x=i(x,A),x.return=_,x)}function h(_,x,A){if(typeof x=="string"&&x!==""||typeof x=="number")return x=V2(""+x,_.mode,A),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Py:return A=e1(x.type,x.key,x.props,null,_.mode,A),A.ref=l0(_,null,x),A.return=_,A;case gf:return x=G2(x,_.mode,A),x.return=_,x;case Il:var T=x._init;return h(_,T(x._payload),A)}if(H0(x)||i0(x))return x=fh(x,_.mode,A,null),x.return=_,x;qy(_,x)}return null}function d(_,x,A,T){var k=x!==null?x.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return k!==null?null:a(_,x,""+A,T);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Py:return A.key===k?c(_,x,A,T):null;case gf:return A.key===k?l(_,x,A,T):null;case Il:return k=A._init,d(_,x,k(A._payload),T)}if(H0(A)||i0(A))return k!==null?null:u(_,x,A,T,null);qy(_,A)}return null}function g(_,x,A,T,k){if(typeof T=="string"&&T!==""||typeof T=="number")return _=_.get(A)||null,a(x,_,""+T,k);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Py:return _=_.get(T.key===null?A:T.key)||null,c(x,_,T,k);case gf:return _=_.get(T.key===null?A:T.key)||null,l(x,_,T,k);case Il:var D=T._init;return g(_,x,A,D(T._payload),k)}if(H0(T)||i0(T))return _=_.get(A)||null,u(x,_,T,k,null);qy(x,T)}return null}function m(_,x,A,T){for(var k=null,D=null,L=x,F=x=0,B=null;L!==null&&F<A.length;F++){L.index>F?(B=L,L=null):B=L.sibling;var q=d(_,L,A[F],T);if(q===null){L===null&&(L=B);break}t&&L&&q.alternate===null&&e(_,L),x=s(q,x,F),D===null?k=q:D.sibling=q,D=q,L=B}if(F===A.length)return r(_,L),Hr&&ku(_,F),k;if(L===null){for(;F<A.length;F++)L=h(_,A[F],T),L!==null&&(x=s(L,x,F),D===null?k=L:D.sibling=L,D=L);return Hr&&ku(_,F),k}for(L=n(_,L);F<A.length;F++)B=g(L,_,F,A[F],T),B!==null&&(t&&B.alternate!==null&&L.delete(B.key===null?F:B.key),x=s(B,x,F),D===null?k=B:D.sibling=B,D=B);return t&&L.forEach(function(R){return e(_,R)}),Hr&&ku(_,F),k}function v(_,x,A,T){var k=i0(A);if(typeof k!="function")throw Error(de(150));if(A=k.call(A),A==null)throw Error(de(151));for(var D=k=null,L=x,F=x=0,B=null,q=A.next();L!==null&&!q.done;F++,q=A.next()){L.index>F?(B=L,L=null):B=L.sibling;var R=d(_,L,q.value,T);if(R===null){L===null&&(L=B);break}t&&L&&R.alternate===null&&e(_,L),x=s(R,x,F),D===null?k=R:D.sibling=R,D=R,L=B}if(q.done)return r(_,L),Hr&&ku(_,F),k;if(L===null){for(;!q.done;F++,q=A.next())q=h(_,q.value,T),q!==null&&(x=s(q,x,F),D===null?k=q:D.sibling=q,D=q);return Hr&&ku(_,F),k}for(L=n(_,L);!q.done;F++,q=A.next())q=g(L,_,F,q.value,T),q!==null&&(t&&q.alternate!==null&&L.delete(q.key===null?F:q.key),x=s(q,x,F),D===null?k=q:D.sibling=q,D=q);return t&&L.forEach(function(E){return e(_,E)}),Hr&&ku(_,F),k}function $(_,x,A,T){if(typeof A=="object"&&A!==null&&A.type===mf&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Py:e:{for(var k=A.key,D=x;D!==null;){if(D.key===k){if(k=A.type,k===mf){if(D.tag===7){r(_,D.sibling),x=i(D,A.props.children),x.return=_,_=x;break e}}else if(D.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Il&&$6(k)===D.type){r(_,D.sibling),x=i(D,A.props),x.ref=l0(_,D,A),x.return=_,_=x;break e}r(_,D);break}else e(_,D);D=D.sibling}A.type===mf?(x=fh(A.props.children,_.mode,T,A.key),x.return=_,_=x):(T=e1(A.type,A.key,A.props,null,_.mode,T),T.ref=l0(_,x,A),T.return=_,_=T)}return o(_);case gf:e:{for(D=A.key;x!==null;){if(x.key===D)if(x.tag===4&&x.stateNode.containerInfo===A.containerInfo&&x.stateNode.implementation===A.implementation){r(_,x.sibling),x=i(x,A.children||[]),x.return=_,_=x;break e}else{r(_,x);break}else e(_,x);x=x.sibling}x=G2(A,_.mode,T),x.return=_,_=x}return o(_);case Il:return D=A._init,$(_,x,D(A._payload),T)}if(H0(A))return m(_,x,A,T);if(i0(A))return v(_,x,A,T);qy(_,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,x!==null&&x.tag===6?(r(_,x.sibling),x=i(x,A),x.return=_,_=x):(r(_,x),x=V2(A,_.mode,T),x.return=_,_=x),o(_)):r(_,x)}return $}var ep=$P(!0),PP=$P(!1),J1=pu(null),X1=null,xf=null,Cx=null;function Nx(){Cx=xf=X1=null}function Mx(t){var e=J1.current;Fr(J1),t._currentValue=e}function N3(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function jf(t,e){X1=t,Cx=xf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bs=!0),t.firstContext=null)}function Co(t){var e=t._currentValue;if(Cx!==t)if(t={context:t,memoizedValue:e,next:null},xf===null){if(X1===null)throw Error(de(308));xf=t,X1.dependencies={lanes:0,firstContext:t}}else xf=xf.next=t;return e}var Zu=null;function Tx(t){Zu===null?Zu=[t]:Zu.push(t)}function OP(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Tx(e)):(r.next=i.next,i.next=r),e.interleaved=r,Hc(t,n)}function Hc(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Al=!1;function $x(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Uc(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xl(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,At&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Hc(t,r)}return i=n.interleaved,i===null?(e.next=e,Tx(n)):(e.next=i.next,i.next=e),n.interleaved=e,Hc(t,r)}function Gw(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,mx(t,r)}}function P6(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function eb(t,e,r,n){var i=t.updateQueue;Al=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(s!==null){var h=i.baseState;o=0,u=l=c=null,a=s;do{var d=a.lane,g=a.eventTime;if((n&d)===d){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,v=a;switch(d=e,g=r,v.tag){case 1:if(m=v.payload,typeof m=="function"){h=m.call(g,h,d);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,d=typeof m=="function"?m.call(g,h,d):m,d==null)break e;h=tn({},h,d);break e;case 2:Al=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else g={eventTime:g,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=g,c=h):u=u.next=g,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ih|=o,t.lanes=o,t.memoizedState=h}}function O6(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(de(191,i));i.call(n)}}}var Wm={},Ma=pu(Wm),qg=pu(Wm),Wg=pu(Wm);function Ju(t){if(t===Wm)throw Error(de(174));return t}function Px(t,e){switch(xr(Wg,e),xr(qg,t),xr(Ma,Wm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:c3(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=c3(e,t)}Fr(Ma),xr(Ma,e)}function tp(){Fr(Ma),Fr(qg),Fr(Wg)}function RP(t){Ju(Wg.current);var e=Ju(Ma.current),r=c3(e,t.type);e!==r&&(xr(qg,t),xr(Ma,r))}function Ox(t){qg.current===t&&(Fr(Ma),Fr(qg))}var Jr=pu(0);function tb(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var F2=[];function kx(){for(var t=0;t<F2.length;t++)F2[t]._workInProgressVersionPrimary=null;F2.length=0}var Yw=el.ReactCurrentDispatcher,z2=el.ReactCurrentBatchConfig,xh=0,en=null,Tn=null,Hn=null,rb=!1,fg=!1,Hg=0,IF=0;function Ni(){throw Error(de(321))}function Rx(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!sa(t[r],e[r]))return!1;return!0}function Dx(t,e,r,n,i,s){if(xh=s,en=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yw.current=t===null||t.memoizedState===null?MF:TF,t=r(n,i),fg){s=0;do{if(fg=!1,Hg=0,25<=s)throw Error(de(301));s+=1,Hn=Tn=null,e.updateQueue=null,Yw.current=$F,t=r(n,i)}while(fg)}if(Yw.current=nb,e=Tn!==null&&Tn.next!==null,xh=0,Hn=Tn=en=null,rb=!1,e)throw Error(de(300));return t}function Lx(){var t=Hg!==0;return Hg=0,t}function Sa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?en.memoizedState=Hn=t:Hn=Hn.next=t,Hn}function No(){if(Tn===null){var t=en.alternate;t=t!==null?t.memoizedState:null}else t=Tn.next;var e=Hn===null?en.memoizedState:Hn.next;if(e!==null)Hn=e,Tn=t;else{if(t===null)throw Error(de(310));Tn=t,t={memoizedState:Tn.memoizedState,baseState:Tn.baseState,baseQueue:Tn.baseQueue,queue:Tn.queue,next:null},Hn===null?en.memoizedState=Hn=t:Hn=Hn.next=t}return Hn}function Kg(t,e){return typeof e=="function"?e(t):e}function q2(t){var e=No(),r=e.queue;if(r===null)throw Error(de(311));r.lastRenderedReducer=t;var n=Tn,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,c=null,l=s;do{var u=l.lane;if((xh&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:t(n,l.action);else{var h={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=h,o=n):c=c.next=h,en.lanes|=u,Ih|=u}l=l.next}while(l!==null&&l!==s);c===null?o=n:c.next=a,sa(n,e.memoizedState)||(bs=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,en.lanes|=s,Ih|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function W2(t){var e=No(),r=e.queue;if(r===null)throw Error(de(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);sa(s,e.memoizedState)||(bs=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function DP(){}function LP(t,e){var r=en,n=No(),i=e(),s=!sa(n.memoizedState,i);if(s&&(n.memoizedState=i,bs=!0),n=n.queue,Bx(jP.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Hn!==null&&Hn.memoizedState.tag&1){if(r.flags|=2048,Vg(9,UP.bind(null,r,n,i,e),void 0,null),Zn===null)throw Error(de(349));xh&30||BP(r,e,i)}return i}function BP(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=en.updateQueue,e===null?(e={lastEffect:null,stores:null},en.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function UP(t,e,r,n){e.value=r,e.getSnapshot=n,FP(e)&&zP(t)}function jP(t,e,r){return r(function(){FP(e)&&zP(t)})}function FP(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!sa(t,r)}catch{return!0}}function zP(t){var e=Hc(t,1);e!==null&&na(e,t,1,-1)}function k6(t){var e=Sa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kg,lastRenderedState:t},e.queue=t,t=t.dispatch=NF.bind(null,en,t),[e.memoizedState,t]}function Vg(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=en.updateQueue,e===null?(e={lastEffect:null,stores:null},en.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function qP(){return No().memoizedState}function Qw(t,e,r,n){var i=Sa();en.flags|=t,i.memoizedState=Vg(1|e,r,void 0,n===void 0?null:n)}function lv(t,e,r,n){var i=No();n=n===void 0?null:n;var s=void 0;if(Tn!==null){var o=Tn.memoizedState;if(s=o.destroy,n!==null&&Rx(n,o.deps)){i.memoizedState=Vg(e,r,s,n);return}}en.flags|=t,i.memoizedState=Vg(1|e,r,s,n)}function R6(t,e){return Qw(8390656,8,t,e)}function Bx(t,e){return lv(2048,8,t,e)}function WP(t,e){return lv(4,2,t,e)}function HP(t,e){return lv(4,4,t,e)}function KP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function VP(t,e,r){return r=r!=null?r.concat([t]):null,lv(4,4,KP.bind(null,e,t),r)}function Ux(){}function GP(t,e){var r=No();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Rx(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function YP(t,e){var r=No();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Rx(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function QP(t,e,r){return xh&21?(sa(r,e)||(r=tP(),en.lanes|=r,Ih|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bs=!0),t.memoizedState=r)}function AF(t,e){var r=Xt;Xt=r!==0&&4>r?r:4,t(!0);var n=z2.transition;z2.transition={};try{t(!1),e()}finally{Xt=r,z2.transition=n}}function ZP(){return No().memoizedState}function CF(t,e,r){var n=tu(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},JP(t))XP(e,r);else if(r=OP(t,e,r,n),r!==null){var i=ts();na(r,t,n,i),e9(r,e,n)}}function NF(t,e,r){var n=tu(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(JP(t))XP(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,sa(a,o)){var c=e.interleaved;c===null?(i.next=i,Tx(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=OP(t,e,i,n),r!==null&&(i=ts(),na(r,t,n,i),e9(r,e,n))}}function JP(t){var e=t.alternate;return t===en||e!==null&&e===en}function XP(t,e){fg=rb=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function e9(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,mx(t,r)}}var nb={readContext:Co,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useInsertionEffect:Ni,useLayoutEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useMutableSource:Ni,useSyncExternalStore:Ni,useId:Ni,unstable_isNewReconciler:!1},MF={readContext:Co,useCallback:function(t,e){return Sa().memoizedState=[t,e===void 0?null:e],t},useContext:Co,useEffect:R6,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Qw(4194308,4,KP.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Qw(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qw(4,2,t,e)},useMemo:function(t,e){var r=Sa();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Sa();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=CF.bind(null,en,t),[n.memoizedState,t]},useRef:function(t){var e=Sa();return t={current:t},e.memoizedState=t},useState:k6,useDebugValue:Ux,useDeferredValue:function(t){return Sa().memoizedState=t},useTransition:function(){var t=k6(!1),e=t[0];return t=AF.bind(null,t[1]),Sa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=en,i=Sa();if(Hr){if(r===void 0)throw Error(de(407));r=r()}else{if(r=e(),Zn===null)throw Error(de(349));xh&30||BP(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,R6(jP.bind(null,n,s,t),[t]),n.flags|=2048,Vg(9,UP.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Sa(),e=Zn.identifierPrefix;if(Hr){var r=Rc,n=kc;r=(n&~(1<<32-ra(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Hg++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=IF++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},TF={readContext:Co,useCallback:GP,useContext:Co,useEffect:Bx,useImperativeHandle:VP,useInsertionEffect:WP,useLayoutEffect:HP,useMemo:YP,useReducer:q2,useRef:qP,useState:function(){return q2(Kg)},useDebugValue:Ux,useDeferredValue:function(t){var e=No();return QP(e,Tn.memoizedState,t)},useTransition:function(){var t=q2(Kg)[0],e=No().memoizedState;return[t,e]},useMutableSource:DP,useSyncExternalStore:LP,useId:ZP,unstable_isNewReconciler:!1},$F={readContext:Co,useCallback:GP,useContext:Co,useEffect:Bx,useImperativeHandle:VP,useInsertionEffect:WP,useLayoutEffect:HP,useMemo:YP,useReducer:W2,useRef:qP,useState:function(){return W2(Kg)},useDebugValue:Ux,useDeferredValue:function(t){var e=No();return Tn===null?e.memoizedState=t:QP(e,Tn.memoizedState,t)},useTransition:function(){var t=W2(Kg)[0],e=No().memoizedState;return[t,e]},useMutableSource:DP,useSyncExternalStore:LP,useId:ZP,unstable_isNewReconciler:!1};function Yo(t,e){if(t&&t.defaultProps){e=tn({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function M3(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:tn({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var uv={isMounted:function(t){return(t=t._reactInternals)?zh(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=ts(),i=tu(t),s=Uc(n,i);s.payload=e,r!=null&&(s.callback=r),e=Xl(t,s,i),e!==null&&(na(e,t,i,n),Gw(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=ts(),i=tu(t),s=Uc(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Xl(t,s,i),e!==null&&(na(e,t,i,n),Gw(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ts(),n=tu(t),i=Uc(r,n);i.tag=2,e!=null&&(i.callback=e),e=Xl(t,i,n),e!==null&&(na(e,t,n,r),Gw(e,t,n))}};function D6(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ug(r,n)||!Ug(i,s):!0}function t9(t,e,r){var n=!1,i=uu,s=e.contextType;return typeof s=="object"&&s!==null?s=Co(s):(i=Ss(e)?_h:Hi.current,n=e.contextTypes,s=(n=n!=null)?Jf(t,i):uu),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uv,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function L6(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&uv.enqueueReplaceState(e,e.state,null)}function T3(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},$x(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Co(s):(s=Ss(e)?_h:Hi.current,i.context=Jf(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(M3(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&uv.enqueueReplaceState(i,i.state,null),eb(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function rp(t,e){try{var r="",n=e;do r+=sj(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function H2(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function $3(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var PF=typeof WeakMap=="function"?WeakMap:Map;function r9(t,e,r){r=Uc(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){sb||(sb=!0,F3=n),$3(t,e)},r}function n9(t,e,r){r=Uc(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){$3(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){$3(t,e),typeof n!="function"&&(eu===null?eu=new Set([this]):eu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function B6(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new PF;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=KF.bind(null,t,e,r),e.then(t,t))}function U6(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function j6(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Uc(-1,1),e.tag=2,Xl(r,e,1))),r.lanes|=1),t)}var OF=el.ReactCurrentOwner,bs=!1;function Gi(t,e,r,n){e.child=t===null?PP(e,null,r,n):ep(e,t.child,r,n)}function F6(t,e,r,n,i){r=r.render;var s=e.ref;return jf(e,i),n=Dx(t,e,r,n,s,i),r=Lx(),t!==null&&!bs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kc(t,e,i)):(Hr&&r&&xx(e),e.flags|=1,Gi(t,e,n,i),e.child)}function z6(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!Vx(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,i9(t,e,s,n,i)):(t=e1(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Ug,r(o,n)&&t.ref===e.ref)return Kc(t,e,i)}return e.flags|=1,t=ru(s,n),t.ref=e.ref,t.return=e,e.child=t}function i9(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Ug(s,n)&&t.ref===e.ref)if(bs=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(bs=!0);else return e.lanes=t.lanes,Kc(t,e,i)}return P3(t,e,r,n,i)}function s9(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xr(Af,Rs),Rs|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xr(Af,Rs),Rs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,xr(Af,Rs),Rs|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,xr(Af,Rs),Rs|=n;return Gi(t,e,i,r),e.child}function o9(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function P3(t,e,r,n,i){var s=Ss(r)?_h:Hi.current;return s=Jf(e,s),jf(e,i),r=Dx(t,e,r,n,s,i),n=Lx(),t!==null&&!bs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kc(t,e,i)):(Hr&&n&&xx(e),e.flags|=1,Gi(t,e,r,i),e.child)}function q6(t,e,r,n,i){if(Ss(r)){var s=!0;Y1(e)}else s=!1;if(jf(e,i),e.stateNode===null)Zw(t,e),t9(e,r,n),T3(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=r.contextType;typeof l=="object"&&l!==null?l=Co(l):(l=Ss(r)?_h:Hi.current,l=Jf(e,l));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||c!==l)&&L6(e,o,n,l),Al=!1;var d=e.memoizedState;o.state=d,eb(e,n,o,i),c=e.memoizedState,a!==n||d!==c||_s.current||Al?(typeof u=="function"&&(M3(e,r,u,n),c=e.memoizedState),(a=Al||D6(e,r,a,n,d,c,l))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=l,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,kP(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Yo(e.type,a),o.props=l,h=e.pendingProps,d=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Co(c):(c=Ss(r)?_h:Hi.current,c=Jf(e,c));var g=r.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==c)&&L6(e,o,n,c),Al=!1,d=e.memoizedState,o.state=d,eb(e,n,o,i);var m=e.memoizedState;a!==h||d!==m||_s.current||Al?(typeof g=="function"&&(M3(e,r,g,n),m=e.memoizedState),(l=Al||D6(e,r,l,n,d,m,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=c,n=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return O3(t,e,r,n,s,i)}function O3(t,e,r,n,i,s){o9(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&N6(e,r,!1),Kc(t,e,s);n=e.stateNode,OF.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=ep(e,t.child,null,s),e.child=ep(e,null,a,s)):Gi(t,e,a,s),e.memoizedState=n.state,i&&N6(e,r,!0),e.child}function a9(t){var e=t.stateNode;e.pendingContext?C6(t,e.pendingContext,e.pendingContext!==e.context):e.context&&C6(t,e.context,!1),Px(t,e.containerInfo)}function W6(t,e,r,n,i){return Xf(),Ax(i),e.flags|=256,Gi(t,e,r,n),e.child}var k3={dehydrated:null,treeContext:null,retryLane:0};function R3(t){return{baseLanes:t,cachePool:null,transitions:null}}function c9(t,e,r){var n=e.pendingProps,i=Jr.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),xr(Jr,i&1),t===null)return C3(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=fv(o,n,0,null),t=fh(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=R3(r),e.memoizedState=k3,t):jx(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return kF(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=ru(i,c),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ru(a,s):(s=fh(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?R3(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=k3,n}return s=t.child,t=s.sibling,n=ru(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function jx(t,e){return e=fv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wy(t,e,r,n){return n!==null&&Ax(n),ep(e,t.child,null,r),t=jx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kF(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=H2(Error(de(422))),Wy(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=fv({mode:"visible",children:n.children},i,0,null),s=fh(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&ep(e,t.child,null,o),e.child.memoizedState=R3(o),e.memoizedState=k3,s);if(!(e.mode&1))return Wy(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(de(419)),n=H2(s,n,void 0),Wy(t,e,o,n)}if(a=(o&t.childLanes)!==0,bs||a){if(n=Zn,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Hc(t,i),na(n,t,i,-1))}return Kx(),n=H2(Error(de(421))),Wy(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=VF.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,qs=Jl(i.nextSibling),Vs=e,Hr=!0,Jo=null,t!==null&&(Eo[_o++]=kc,Eo[_o++]=Rc,Eo[_o++]=Sh,kc=t.id,Rc=t.overflow,Sh=e),e=jx(e,n.children),e.flags|=4096,e)}function H6(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),N3(t.return,e,r)}function K2(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function l9(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Gi(t,e,n.children,r),n=Jr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&H6(t,r,e);else if(t.tag===19)H6(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(xr(Jr,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&tb(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),K2(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&tb(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}K2(e,!0,r,null,s);break;case"together":K2(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zw(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kc(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ih|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(de(153));if(e.child!==null){for(t=e.child,r=ru(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ru(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function RF(t,e,r){switch(e.tag){case 3:a9(e),Xf();break;case 5:RP(e);break;case 1:Ss(e.type)&&Y1(e);break;case 4:Px(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;xr(J1,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(xr(Jr,Jr.current&1),e.flags|=128,null):r&e.child.childLanes?c9(t,e,r):(xr(Jr,Jr.current&1),t=Kc(t,e,r),t!==null?t.sibling:null);xr(Jr,Jr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return l9(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xr(Jr,Jr.current),n)break;return null;case 22:case 23:return e.lanes=0,s9(t,e,r)}return Kc(t,e,r)}var u9,D3,h9,d9;u9=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};D3=function(){};h9=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Ju(Ma.current);var s=null;switch(r){case"input":i=i3(t,i),n=i3(t,n),s=[];break;case"select":i=tn({},i,{value:void 0}),n=tn({},n,{value:void 0}),s=[];break;case"textarea":i=a3(t,i),n=a3(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=V1)}l3(r,n);var o;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Pg.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in n){var c=n[l];if(a=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(l,r)),r=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Pg.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Dr("scroll",t),s||a===c||(s=[])):(s=s||[]).push(l,c))}r&&(s=s||[]).push("style",r);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};d9=function(t,e,r,n){r!==n&&(e.flags|=4)};function u0(t,e){if(!Hr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Mi(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function DF(t,e,r){var n=e.pendingProps;switch(Ix(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mi(e),null;case 1:return Ss(e.type)&&G1(),Mi(e),null;case 3:return n=e.stateNode,tp(),Fr(_s),Fr(Hi),kx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(zy(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jo!==null&&(W3(Jo),Jo=null))),D3(t,e),Mi(e),null;case 5:Ox(e);var i=Ju(Wg.current);if(r=e.type,t!==null&&e.stateNode!=null)h9(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(de(166));return Mi(e),null}if(t=Ju(Ma.current),zy(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Ia]=e,n[zg]=s,t=(e.mode&1)!==0,r){case"dialog":Dr("cancel",n),Dr("close",n);break;case"iframe":case"object":case"embed":Dr("load",n);break;case"video":case"audio":for(i=0;i<V0.length;i++)Dr(V0[i],n);break;case"source":Dr("error",n);break;case"img":case"image":case"link":Dr("error",n),Dr("load",n);break;case"details":Dr("toggle",n);break;case"input":e6(n,s),Dr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Dr("invalid",n);break;case"textarea":r6(n,s),Dr("invalid",n)}l3(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&Fy(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Fy(n.textContent,a,t),i=["children",""+a]):Pg.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Dr("scroll",n)}switch(r){case"input":Oy(n),t6(n,s,!0);break;case"textarea":Oy(n),n6(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=V1)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=j$(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Ia]=e,t[zg]=n,u9(t,e,!1,!1),e.stateNode=t;e:{switch(o=u3(r,n),r){case"dialog":Dr("cancel",t),Dr("close",t),i=n;break;case"iframe":case"object":case"embed":Dr("load",t),i=n;break;case"video":case"audio":for(i=0;i<V0.length;i++)Dr(V0[i],t);i=n;break;case"source":Dr("error",t),i=n;break;case"img":case"image":case"link":Dr("error",t),Dr("load",t),i=n;break;case"details":Dr("toggle",t),i=n;break;case"input":e6(t,n),i=i3(t,n),Dr("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=tn({},n,{value:void 0}),Dr("invalid",t);break;case"textarea":r6(t,n),i=a3(t,n),Dr("invalid",t);break;default:i=n}l3(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?q$(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&F$(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Og(t,c):typeof c=="number"&&Og(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Pg.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Dr("scroll",t):c!=null&&ux(t,s,c,o))}switch(r){case"input":Oy(t),t6(t,n,!1);break;case"textarea":Oy(t),n6(t);break;case"option":n.value!=null&&t.setAttribute("value",""+lu(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Df(t,!!n.multiple,s,!1):n.defaultValue!=null&&Df(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=V1)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mi(e),null;case 6:if(t&&e.stateNode!=null)d9(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(de(166));if(r=Ju(Wg.current),Ju(Ma.current),zy(e)){if(n=e.stateNode,r=e.memoizedProps,n[Ia]=e,(s=n.nodeValue!==r)&&(t=Vs,t!==null))switch(t.tag){case 3:Fy(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fy(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ia]=e,e.stateNode=n}return Mi(e),null;case 13:if(Fr(Jr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Hr&&qs!==null&&e.mode&1&&!(e.flags&128))TP(),Xf(),e.flags|=98560,s=!1;else if(s=zy(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(de(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(de(317));s[Ia]=e}else Xf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mi(e),s=!1}else Jo!==null&&(W3(Jo),Jo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Jr.current&1?On===0&&(On=3):Kx())),e.updateQueue!==null&&(e.flags|=4),Mi(e),null);case 4:return tp(),D3(t,e),t===null&&jg(e.stateNode.containerInfo),Mi(e),null;case 10:return Mx(e.type._context),Mi(e),null;case 17:return Ss(e.type)&&G1(),Mi(e),null;case 19:if(Fr(Jr),s=e.memoizedState,s===null)return Mi(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)u0(s,!1);else{if(On!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=tb(t),o!==null){for(e.flags|=128,u0(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return xr(Jr,Jr.current&1|2),e.child}t=t.sibling}s.tail!==null&&pn()>np&&(e.flags|=128,n=!0,u0(s,!1),e.lanes=4194304)}else{if(!n)if(t=tb(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),u0(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Hr)return Mi(e),null}else 2*pn()-s.renderingStartTime>np&&r!==1073741824&&(e.flags|=128,n=!0,u0(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pn(),e.sibling=null,r=Jr.current,xr(Jr,n?r&1|2:r&1),e):(Mi(e),null);case 22:case 23:return Hx(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Rs&1073741824&&(Mi(e),e.subtreeFlags&6&&(e.flags|=8192)):Mi(e),null;case 24:return null;case 25:return null}throw Error(de(156,e.tag))}function LF(t,e){switch(Ix(e),e.tag){case 1:return Ss(e.type)&&G1(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return tp(),Fr(_s),Fr(Hi),kx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ox(e),null;case 13:if(Fr(Jr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(de(340));Xf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fr(Jr),null;case 4:return tp(),null;case 10:return Mx(e.type._context),null;case 22:case 23:return Hx(),null;case 24:return null;default:return null}}var Hy=!1,ji=!1,BF=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function If(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){cn(t,e,n)}else r.current=null}function L3(t,e,r){try{r()}catch(n){cn(t,e,n)}}var K6=!1;function UF(t,e){if(v3=W1,t=yP(),Sx(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,c=-1,l=0,u=0,h=t,d=null;t:for(;;){for(var g;h!==r||i!==0&&h.nodeType!==3||(a=o+i),h!==s||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)d=h,h=g;for(;;){if(h===t)break t;if(d===r&&++l===i&&(a=o),d===s&&++u===n&&(c=o),(g=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=g}r=a===-1||c===-1?null:{start:a,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(E3={focusedElem:t,selectionRange:r},W1=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,$=m.memoizedState,_=e.stateNode,x=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:Yo(e.type,v),$);_.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(T){cn(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return m=K6,K6=!1,m}function pg(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&L3(e,r,s)}i=i.next}while(i!==n)}}function hv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function B3(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function f9(t){var e=t.alternate;e!==null&&(t.alternate=null,f9(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ia],delete e[zg],delete e[x3],delete e[EF],delete e[_F])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function p9(t){return t.tag===5||t.tag===3||t.tag===4}function V6(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||p9(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function U3(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=V1));else if(n!==4&&(t=t.child,t!==null))for(U3(t,e,r),t=t.sibling;t!==null;)U3(t,e,r),t=t.sibling}function j3(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(j3(t,e,r),t=t.sibling;t!==null;)j3(t,e,r),t=t.sibling}var ui=null,Zo=!1;function ol(t,e,r){for(r=r.child;r!==null;)g9(t,e,r),r=r.sibling}function g9(t,e,r){if(Na&&typeof Na.onCommitFiberUnmount=="function")try{Na.onCommitFiberUnmount(nv,r)}catch{}switch(r.tag){case 5:ji||If(r,e);case 6:var n=ui,i=Zo;ui=null,ol(t,e,r),ui=n,Zo=i,ui!==null&&(Zo?(t=ui,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ui.removeChild(r.stateNode));break;case 18:ui!==null&&(Zo?(t=ui,r=r.stateNode,t.nodeType===8?U2(t.parentNode,r):t.nodeType===1&&U2(t,r),Lg(t)):U2(ui,r.stateNode));break;case 4:n=ui,i=Zo,ui=r.stateNode.containerInfo,Zo=!0,ol(t,e,r),ui=n,Zo=i;break;case 0:case 11:case 14:case 15:if(!ji&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&L3(r,e,o),i=i.next}while(i!==n)}ol(t,e,r);break;case 1:if(!ji&&(If(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){cn(r,e,a)}ol(t,e,r);break;case 21:ol(t,e,r);break;case 22:r.mode&1?(ji=(n=ji)||r.memoizedState!==null,ol(t,e,r),ji=n):ol(t,e,r);break;default:ol(t,e,r)}}function G6(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new BF),e.forEach(function(n){var i=GF.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Do(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ui=a.stateNode,Zo=!1;break e;case 3:ui=a.stateNode.containerInfo,Zo=!0;break e;case 4:ui=a.stateNode.containerInfo,Zo=!0;break e}a=a.return}if(ui===null)throw Error(de(160));g9(s,o,i),ui=null,Zo=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){cn(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)m9(e,t),e=e.sibling}function m9(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Do(e,t),ua(t),n&4){try{pg(3,t,t.return),hv(3,t)}catch(v){cn(t,t.return,v)}try{pg(5,t,t.return)}catch(v){cn(t,t.return,v)}}break;case 1:Do(e,t),ua(t),n&512&&r!==null&&If(r,r.return);break;case 5:if(Do(e,t),ua(t),n&512&&r!==null&&If(r,r.return),t.flags&32){var i=t.stateNode;try{Og(i,"")}catch(v){cn(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&B$(i,s),u3(a,o);var l=u3(a,s);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?q$(i,h):u==="dangerouslySetInnerHTML"?F$(i,h):u==="children"?Og(i,h):ux(i,u,h,l)}switch(a){case"input":s3(i,s);break;case"textarea":U$(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Df(i,!!s.multiple,g,!1):d!==!!s.multiple&&(s.defaultValue!=null?Df(i,!!s.multiple,s.defaultValue,!0):Df(i,!!s.multiple,s.multiple?[]:"",!1))}i[zg]=s}catch(v){cn(t,t.return,v)}}break;case 6:if(Do(e,t),ua(t),n&4){if(t.stateNode===null)throw Error(de(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){cn(t,t.return,v)}}break;case 3:if(Do(e,t),ua(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Lg(e.containerInfo)}catch(v){cn(t,t.return,v)}break;case 4:Do(e,t),ua(t);break;case 13:Do(e,t),ua(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(qx=pn())),n&4&&G6(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(ji=(l=ji)||u,Do(e,t),ji=l):Do(e,t),ua(t),n&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Ie=t,u=t.child;u!==null;){for(h=Ie=u;Ie!==null;){switch(d=Ie,g=d.child,d.tag){case 0:case 11:case 14:case 15:pg(4,d,d.return);break;case 1:If(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){cn(n,r,v)}}break;case 5:If(d,d.return);break;case 22:if(d.memoizedState!==null){Q6(h);continue}}g!==null?(g.return=d,Ie=g):Q6(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=z$("display",o))}catch(v){cn(t,t.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(v){cn(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Do(e,t),ua(t),n&4&&G6(t);break;case 21:break;default:Do(e,t),ua(t)}}function ua(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(p9(r)){var n=r;break e}r=r.return}throw Error(de(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Og(i,""),n.flags&=-33);var s=V6(t);j3(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=V6(t);U3(t,a,o);break;default:throw Error(de(161))}}catch(c){cn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jF(t,e,r){Ie=t,y9(t)}function y9(t,e,r){for(var n=(t.mode&1)!==0;Ie!==null;){var i=Ie,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Hy;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||ji;a=Hy;var l=ji;if(Hy=o,(ji=c)&&!l)for(Ie=i;Ie!==null;)o=Ie,c=o.child,o.tag===22&&o.memoizedState!==null?Z6(i):c!==null?(c.return=o,Ie=c):Z6(i);for(;s!==null;)Ie=s,y9(s),s=s.sibling;Ie=i,Hy=a,ji=l}Y6(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ie=s):Y6(t)}}function Y6(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ji||hv(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ji)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Yo(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&O6(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}O6(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Lg(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}ji||e.flags&512&&B3(e)}catch(d){cn(e,e.return,d)}}if(e===t){Ie=null;break}if(r=e.sibling,r!==null){r.return=e.return,Ie=r;break}Ie=e.return}}function Q6(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Ie=r;break}Ie=e.return}}function Z6(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{hv(4,e)}catch(c){cn(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){cn(e,i,c)}}var s=e.return;try{B3(e)}catch(c){cn(e,s,c)}break;case 5:var o=e.return;try{B3(e)}catch(c){cn(e,o,c)}}}catch(c){cn(e,e.return,c)}if(e===t){Ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ie=a;break}Ie=e.return}}var FF=Math.ceil,ib=el.ReactCurrentDispatcher,Fx=el.ReactCurrentOwner,Io=el.ReactCurrentBatchConfig,At=0,Zn=null,Sn=null,wi=0,Rs=0,Af=pu(0),On=0,Gg=null,Ih=0,dv=0,zx=0,gg=null,ys=null,qx=0,np=1/0,Ic=null,sb=!1,F3=null,eu=null,Ky=!1,Bl=null,ob=0,mg=0,z3=null,Jw=-1,Xw=0;function ts(){return At&6?pn():Jw!==-1?Jw:Jw=pn()}function tu(t){return t.mode&1?At&2&&wi!==0?wi&-wi:xF.transition!==null?(Xw===0&&(Xw=tP()),Xw):(t=Xt,t!==0||(t=window.event,t=t===void 0?16:cP(t.type)),t):1}function na(t,e,r,n){if(50<mg)throw mg=0,z3=null,Error(de(185));Fm(t,r,n),(!(At&2)||t!==Zn)&&(t===Zn&&(!(At&2)&&(dv|=r),On===4&&kl(t,wi)),xs(t,n),r===1&&At===0&&!(e.mode&1)&&(np=pn()+500,cv&&gu()))}function xs(t,e){var r=t.callbackNode;xj(t,e);var n=q1(t,t===Zn?wi:0);if(n===0)r!==null&&o6(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&o6(r),e===1)t.tag===0?SF(J6.bind(null,t)):CP(J6.bind(null,t)),bF(function(){!(At&6)&&gu()}),r=null;else{switch(rP(n)){case 1:r=gx;break;case 4:r=X$;break;case 16:r=z1;break;case 536870912:r=eP;break;default:r=z1}r=I9(r,w9.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function w9(t,e){if(Jw=-1,Xw=0,At&6)throw Error(de(327));var r=t.callbackNode;if(Ff()&&t.callbackNode!==r)return null;var n=q1(t,t===Zn?wi:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=ab(t,n);else{e=n;var i=At;At|=2;var s=v9();(Zn!==t||wi!==e)&&(Ic=null,np=pn()+500,dh(t,e));do try{WF();break}catch(a){b9(t,a)}while(!0);Nx(),ib.current=s,At=i,Sn!==null?e=0:(Zn=null,wi=0,e=On)}if(e!==0){if(e===2&&(i=g3(t),i!==0&&(n=i,e=q3(t,i))),e===1)throw r=Gg,dh(t,0),kl(t,n),xs(t,pn()),r;if(e===6)kl(t,n);else{if(i=t.current.alternate,!(n&30)&&!zF(i)&&(e=ab(t,n),e===2&&(s=g3(t),s!==0&&(n=s,e=q3(t,s))),e===1))throw r=Gg,dh(t,0),kl(t,n),xs(t,pn()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(de(345));case 2:Ru(t,ys,Ic);break;case 3:if(kl(t,n),(n&130023424)===n&&(e=qx+500-pn(),10<e)){if(q1(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){ts(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=S3(Ru.bind(null,t,ys,Ic),e);break}Ru(t,ys,Ic);break;case 4:if(kl(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-ra(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=pn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*FF(n/1960))-n,10<n){t.timeoutHandle=S3(Ru.bind(null,t,ys,Ic),n);break}Ru(t,ys,Ic);break;case 5:Ru(t,ys,Ic);break;default:throw Error(de(329))}}}return xs(t,pn()),t.callbackNode===r?w9.bind(null,t):null}function q3(t,e){var r=gg;return t.current.memoizedState.isDehydrated&&(dh(t,e).flags|=256),t=ab(t,e),t!==2&&(e=ys,ys=r,e!==null&&W3(e)),t}function W3(t){ys===null?ys=t:ys.push.apply(ys,t)}function zF(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!sa(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kl(t,e){for(e&=~zx,e&=~dv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ra(e),n=1<<r;t[r]=-1,e&=~n}}function J6(t){if(At&6)throw Error(de(327));Ff();var e=q1(t,0);if(!(e&1))return xs(t,pn()),null;var r=ab(t,e);if(t.tag!==0&&r===2){var n=g3(t);n!==0&&(e=n,r=q3(t,n))}if(r===1)throw r=Gg,dh(t,0),kl(t,e),xs(t,pn()),r;if(r===6)throw Error(de(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ru(t,ys,Ic),xs(t,pn()),null}function Wx(t,e){var r=At;At|=1;try{return t(e)}finally{At=r,At===0&&(np=pn()+500,cv&&gu())}}function Ah(t){Bl!==null&&Bl.tag===0&&!(At&6)&&Ff();var e=At;At|=1;var r=Io.transition,n=Xt;try{if(Io.transition=null,Xt=1,t)return t()}finally{Xt=n,Io.transition=r,At=e,!(At&6)&&gu()}}function Hx(){Rs=Af.current,Fr(Af)}function dh(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,wF(r)),Sn!==null)for(r=Sn.return;r!==null;){var n=r;switch(Ix(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&G1();break;case 3:tp(),Fr(_s),Fr(Hi),kx();break;case 5:Ox(n);break;case 4:tp();break;case 13:Fr(Jr);break;case 19:Fr(Jr);break;case 10:Mx(n.type._context);break;case 22:case 23:Hx()}r=r.return}if(Zn=t,Sn=t=ru(t.current,null),wi=Rs=e,On=0,Gg=null,zx=dv=Ih=0,ys=gg=null,Zu!==null){for(e=0;e<Zu.length;e++)if(r=Zu[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Zu=null}return t}function b9(t,e){do{var r=Sn;try{if(Nx(),Yw.current=nb,rb){for(var n=en.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}rb=!1}if(xh=0,Hn=Tn=en=null,fg=!1,Hg=0,Fx.current=null,r===null||r.return===null){On=1,Gg=e,Sn=null;break}e:{var s=t,o=r.return,a=r,c=e;if(e=wi,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=U6(o);if(g!==null){g.flags&=-257,j6(g,o,a,s,e),g.mode&1&&B6(s,l,e),e=g,c=l;var m=e.updateQueue;if(m===null){var v=new Set;v.add(c),e.updateQueue=v}else m.add(c);break e}else{if(!(e&1)){B6(s,l,e),Kx();break e}c=Error(de(426))}}else if(Hr&&a.mode&1){var $=U6(o);if($!==null){!($.flags&65536)&&($.flags|=256),j6($,o,a,s,e),Ax(rp(c,a));break e}}s=c=rp(c,a),On!==4&&(On=2),gg===null?gg=[s]:gg.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=r9(s,c,e);P6(s,_);break e;case 1:a=c;var x=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(eu===null||!eu.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=n9(s,a,e);P6(s,T);break e}}s=s.return}while(s!==null)}_9(r)}catch(k){e=k,Sn===r&&r!==null&&(Sn=r=r.return);continue}break}while(!0)}function v9(){var t=ib.current;return ib.current=nb,t===null?nb:t}function Kx(){(On===0||On===3||On===2)&&(On=4),Zn===null||!(Ih&268435455)&&!(dv&268435455)||kl(Zn,wi)}function ab(t,e){var r=At;At|=2;var n=v9();(Zn!==t||wi!==e)&&(Ic=null,dh(t,e));do try{qF();break}catch(i){b9(t,i)}while(!0);if(Nx(),At=r,ib.current=n,Sn!==null)throw Error(de(261));return Zn=null,wi=0,On}function qF(){for(;Sn!==null;)E9(Sn)}function WF(){for(;Sn!==null&&!gj();)E9(Sn)}function E9(t){var e=x9(t.alternate,t,Rs);t.memoizedProps=t.pendingProps,e===null?_9(t):Sn=e,Fx.current=null}function _9(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=LF(r,e),r!==null){r.flags&=32767,Sn=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{On=6,Sn=null;return}}else if(r=DF(r,e,Rs),r!==null){Sn=r;return}if(e=e.sibling,e!==null){Sn=e;return}Sn=e=t}while(e!==null);On===0&&(On=5)}function Ru(t,e,r){var n=Xt,i=Io.transition;try{Io.transition=null,Xt=1,HF(t,e,r,n)}finally{Io.transition=i,Xt=n}return null}function HF(t,e,r,n){do Ff();while(Bl!==null);if(At&6)throw Error(de(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(de(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Ij(t,s),t===Zn&&(Sn=Zn=null,wi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ky||(Ky=!0,I9(z1,function(){return Ff(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Io.transition,Io.transition=null;var o=Xt;Xt=1;var a=At;At|=4,Fx.current=null,UF(t,r),m9(r,t),hF(E3),W1=!!v3,E3=v3=null,t.current=r,jF(r),mj(),At=a,Xt=o,Io.transition=s}else t.current=r;if(Ky&&(Ky=!1,Bl=t,ob=i),s=t.pendingLanes,s===0&&(eu=null),bj(r.stateNode),xs(t,pn()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(sb)throw sb=!1,t=F3,F3=null,t;return ob&1&&t.tag!==0&&Ff(),s=t.pendingLanes,s&1?t===z3?mg++:(mg=0,z3=t):mg=0,gu(),null}function Ff(){if(Bl!==null){var t=rP(ob),e=Io.transition,r=Xt;try{if(Io.transition=null,Xt=16>t?16:t,Bl===null)var n=!1;else{if(t=Bl,Bl=null,ob=0,At&6)throw Error(de(331));var i=At;for(At|=4,Ie=t.current;Ie!==null;){var s=Ie,o=s.child;if(Ie.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Ie=l;Ie!==null;){var u=Ie;switch(u.tag){case 0:case 11:case 15:pg(8,u,s)}var h=u.child;if(h!==null)h.return=u,Ie=h;else for(;Ie!==null;){u=Ie;var d=u.sibling,g=u.return;if(f9(u),u===l){Ie=null;break}if(d!==null){d.return=g,Ie=d;break}Ie=g}}}var m=s.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var $=v.sibling;v.sibling=null,v=$}while(v!==null)}}Ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ie=o;else e:for(;Ie!==null;){if(s=Ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:pg(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,Ie=_;break e}Ie=s.return}}var x=t.current;for(Ie=x;Ie!==null;){o=Ie;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,Ie=A;else e:for(o=x;Ie!==null;){if(a=Ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hv(9,a)}}catch(k){cn(a,a.return,k)}if(a===o){Ie=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,Ie=T;break e}Ie=a.return}}if(At=i,gu(),Na&&typeof Na.onPostCommitFiberRoot=="function")try{Na.onPostCommitFiberRoot(nv,t)}catch{}n=!0}return n}finally{Xt=r,Io.transition=e}}return!1}function X6(t,e,r){e=rp(r,e),e=r9(t,e,1),t=Xl(t,e,1),e=ts(),t!==null&&(Fm(t,1,e),xs(t,e))}function cn(t,e,r){if(t.tag===3)X6(t,t,r);else for(;e!==null;){if(e.tag===3){X6(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(eu===null||!eu.has(n))){t=rp(r,t),t=n9(e,t,1),e=Xl(e,t,1),t=ts(),e!==null&&(Fm(e,1,t),xs(e,t));break}}e=e.return}}function KF(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=ts(),t.pingedLanes|=t.suspendedLanes&r,Zn===t&&(wi&r)===r&&(On===4||On===3&&(wi&130023424)===wi&&500>pn()-qx?dh(t,0):zx|=r),xs(t,e)}function S9(t,e){e===0&&(t.mode&1?(e=Dy,Dy<<=1,!(Dy&130023424)&&(Dy=4194304)):e=1);var r=ts();t=Hc(t,e),t!==null&&(Fm(t,e,r),xs(t,r))}function VF(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),S9(t,r)}function GF(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(de(314))}n!==null&&n.delete(e),S9(t,r)}var x9;x9=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||_s.current)bs=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return bs=!1,RF(t,e,r);bs=!!(t.flags&131072)}else bs=!1,Hr&&e.flags&1048576&&NP(e,Z1,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Zw(t,e),t=e.pendingProps;var i=Jf(e,Hi.current);jf(e,r),i=Dx(null,e,n,t,i,r);var s=Lx();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ss(n)?(s=!0,Y1(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$x(e),i.updater=uv,e.stateNode=i,i._reactInternals=e,T3(e,n,t,r),e=O3(null,e,n,!0,s,r)):(e.tag=0,Hr&&s&&xx(e),Gi(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Zw(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=QF(n),t=Yo(n,t),i){case 0:e=P3(null,e,n,t,r);break e;case 1:e=q6(null,e,n,t,r);break e;case 11:e=F6(null,e,n,t,r);break e;case 14:e=z6(null,e,n,Yo(n.type,t),r);break e}throw Error(de(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Yo(n,i),P3(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Yo(n,i),q6(t,e,n,i,r);case 3:e:{if(a9(e),t===null)throw Error(de(387));n=e.pendingProps,s=e.memoizedState,i=s.element,kP(t,e),eb(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=rp(Error(de(423)),e),e=W6(t,e,n,r,i);break e}else if(n!==i){i=rp(Error(de(424)),e),e=W6(t,e,n,r,i);break e}else for(qs=Jl(e.stateNode.containerInfo.firstChild),Vs=e,Hr=!0,Jo=null,r=PP(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xf(),n===i){e=Kc(t,e,r);break e}Gi(t,e,n,r)}e=e.child}return e;case 5:return RP(e),t===null&&C3(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,_3(n,i)?o=null:s!==null&&_3(n,s)&&(e.flags|=32),o9(t,e),Gi(t,e,o,r),e.child;case 6:return t===null&&C3(e),null;case 13:return c9(t,e,r);case 4:return Px(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=ep(e,null,n,r):Gi(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Yo(n,i),F6(t,e,n,i,r);case 7:return Gi(t,e,e.pendingProps,r),e.child;case 8:return Gi(t,e,e.pendingProps.children,r),e.child;case 12:return Gi(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,xr(J1,n._currentValue),n._currentValue=o,s!==null)if(sa(s.value,o)){if(s.children===i.children&&!_s.current){e=Kc(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=Uc(-1,r&-r),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),N3(s.return,r,e),a.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(de(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),N3(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Gi(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,jf(e,r),i=Co(i),n=n(i),e.flags|=1,Gi(t,e,n,r),e.child;case 14:return n=e.type,i=Yo(n,e.pendingProps),i=Yo(n.type,i),z6(t,e,n,i,r);case 15:return i9(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Yo(n,i),Zw(t,e),e.tag=1,Ss(n)?(t=!0,Y1(e)):t=!1,jf(e,r),t9(e,n,i),T3(e,n,i,r),O3(null,e,n,!0,t,r);case 19:return l9(t,e,r);case 22:return s9(t,e,r)}throw Error(de(156,e.tag))};function I9(t,e){return J$(t,e)}function YF(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function So(t,e,r,n){return new YF(t,e,r,n)}function Vx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QF(t){if(typeof t=="function")return Vx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===dx)return 11;if(t===fx)return 14}return 2}function ru(t,e){var r=t.alternate;return r===null?(r=So(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function e1(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")Vx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case mf:return fh(r.children,i,s,e);case hx:o=8,i|=8;break;case e3:return t=So(12,r,e,i|2),t.elementType=e3,t.lanes=s,t;case t3:return t=So(13,r,e,i),t.elementType=t3,t.lanes=s,t;case r3:return t=So(19,r,e,i),t.elementType=r3,t.lanes=s,t;case R$:return fv(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case O$:o=10;break e;case k$:o=9;break e;case dx:o=11;break e;case fx:o=14;break e;case Il:o=16,n=null;break e}throw Error(de(130,t==null?t:typeof t,""))}return e=So(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function fh(t,e,r,n){return t=So(7,t,n,e),t.lanes=r,t}function fv(t,e,r,n){return t=So(22,t,n,e),t.elementType=R$,t.lanes=r,t.stateNode={isHidden:!1},t}function V2(t,e,r){return t=So(6,t,null,e),t.lanes=r,t}function G2(t,e,r){return e=So(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ZF(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=N2(0),this.expirationTimes=N2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=N2(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gx(t,e,r,n,i,s,o,a,c){return t=new ZF(t,e,r,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=So(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$x(s),t}function JF(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gf,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function A9(t){if(!t)return uu;t=t._reactInternals;e:{if(zh(t)!==t||t.tag!==1)throw Error(de(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ss(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(de(171))}if(t.tag===1){var r=t.type;if(Ss(r))return AP(t,r,e)}return e}function C9(t,e,r,n,i,s,o,a,c){return t=Gx(r,n,!0,t,i,s,o,a,c),t.context=A9(null),r=t.current,n=ts(),i=tu(r),s=Uc(n,i),s.callback=e??null,Xl(r,s,i),t.current.lanes=i,Fm(t,i,n),xs(t,n),t}function pv(t,e,r,n){var i=e.current,s=ts(),o=tu(i);return r=A9(r),e.context===null?e.context=r:e.pendingContext=r,e=Uc(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Xl(i,e,o),t!==null&&(na(t,i,o,s),Gw(t,i,o)),o}function cb(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function eA(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Yx(t,e){eA(t,e),(t=t.alternate)&&eA(t,e)}function XF(){return null}var N9=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qx(t){this._internalRoot=t}gv.prototype.render=Qx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(de(409));pv(t,e,null,null)};gv.prototype.unmount=Qx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ah(function(){pv(null,t,null,null)}),e[Wc]=null}};function gv(t){this._internalRoot=t}gv.prototype.unstable_scheduleHydration=function(t){if(t){var e=sP();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ol.length&&e!==0&&e<Ol[r].priority;r++);Ol.splice(r,0,t),r===0&&aP(t)}};function Zx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tA(){}function ez(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var l=cb(o);s.call(l)}}var o=C9(e,n,t,0,null,!1,!1,"",tA);return t._reactRootContainer=o,t[Wc]=o.current,jg(t.nodeType===8?t.parentNode:t),Ah(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var l=cb(c);a.call(l)}}var c=Gx(t,0,!1,null,null,!1,!1,"",tA);return t._reactRootContainer=c,t[Wc]=c.current,jg(t.nodeType===8?t.parentNode:t),Ah(function(){pv(e,c,r,n)}),c}function yv(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=cb(o);a.call(c)}}pv(e,o,t,i)}else o=ez(r,e,t,i,n);return cb(o)}nP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=K0(e.pendingLanes);r!==0&&(mx(e,r|1),xs(e,pn()),!(At&6)&&(np=pn()+500,gu()))}break;case 13:Ah(function(){var n=Hc(t,1);if(n!==null){var i=ts();na(n,t,1,i)}}),Yx(t,1)}};yx=function(t){if(t.tag===13){var e=Hc(t,134217728);if(e!==null){var r=ts();na(e,t,134217728,r)}Yx(t,134217728)}};iP=function(t){if(t.tag===13){var e=tu(t),r=Hc(t,e);if(r!==null){var n=ts();na(r,t,e,n)}Yx(t,e)}};sP=function(){return Xt};oP=function(t,e){var r=Xt;try{return Xt=t,e()}finally{Xt=r}};d3=function(t,e,r){switch(e){case"input":if(s3(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=av(n);if(!i)throw Error(de(90));L$(n),s3(n,i)}}}break;case"textarea":U$(t,r);break;case"select":e=r.value,e!=null&&Df(t,!!r.multiple,e,!1)}};K$=Wx;V$=Ah;var tz={usingClientEntryPoint:!1,Events:[qm,vf,av,W$,H$,Wx]},h0={findFiberByHostInstance:Qu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rz={bundleType:h0.bundleType,version:h0.version,rendererPackageName:h0.rendererPackageName,rendererConfig:h0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:el.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Q$(t),t===null?null:t.stateNode},findFiberByHostInstance:h0.findFiberByHostInstance||XF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vy.isDisabled&&Vy.supportsFiber)try{nv=Vy.inject(rz),Na=Vy}catch{}}Zs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tz;Zs.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zx(e))throw Error(de(200));return JF(t,e,null,r)};Zs.createRoot=function(t,e){if(!Zx(t))throw Error(de(299));var r=!1,n="",i=N9;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Gx(t,1,!1,null,null,r,!1,n,i),t[Wc]=e.current,jg(t.nodeType===8?t.parentNode:t),new Qx(e)};Zs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(de(188)):(t=Object.keys(t).join(","),Error(de(268,t)));return t=Q$(e),t=t===null?null:t.stateNode,t};Zs.flushSync=function(t){return Ah(t)};Zs.hydrate=function(t,e,r){if(!mv(e))throw Error(de(200));return yv(null,t,e,!0,r)};Zs.hydrateRoot=function(t,e,r){if(!Zx(t))throw Error(de(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=N9;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=C9(e,null,t,1,r??null,i,!1,s,o),t[Wc]=e.current,jg(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new gv(e)};Zs.render=function(t,e,r){if(!mv(e))throw Error(de(200));return yv(null,t,e,!1,r)};Zs.unmountComponentAtNode=function(t){if(!mv(t))throw Error(de(40));return t._reactRootContainer?(Ah(function(){yv(null,null,t,!1,function(){t._reactRootContainer=null,t[Wc]=null})}),!0):!1};Zs.unstable_batchedUpdates=Wx;Zs.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!mv(r))throw Error(de(200));if(t==null||t._reactInternals===void 0)throw Error(de(38));return yv(t,e,r,!1,n)};Zs.version="18.3.1-next-f1338f8080-20240426";function M9(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(M9)}catch(t){console.error(t)}}M9(),M$.exports=Zs;var T9=M$.exports,$9,rA=T9;$9=rA.createRoot,rA.hydrateRoot;var Xe={},wv={};wv.byteLength=sz;wv.toByteArray=az;wv.fromByteArray=uz;var Aa=[],wo=[],nz=typeof Uint8Array<"u"?Uint8Array:Array,Y2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ud=0,iz=Y2.length;ud<iz;++ud)Aa[ud]=Y2[ud],wo[Y2.charCodeAt(ud)]=ud;wo[45]=62;wo[95]=63;function P9(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function sz(t){var e=P9(t),r=e[0],n=e[1];return(r+n)*3/4-n}function oz(t,e,r){return(e+r)*3/4-r}function az(t){var e,r=P9(t),n=r[0],i=r[1],s=new nz(oz(t,n,i)),o=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=wo[t.charCodeAt(c)]<<18|wo[t.charCodeAt(c+1)]<<12|wo[t.charCodeAt(c+2)]<<6|wo[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=wo[t.charCodeAt(c)]<<2|wo[t.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=wo[t.charCodeAt(c)]<<10|wo[t.charCodeAt(c+1)]<<4|wo[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function cz(t){return Aa[t>>18&63]+Aa[t>>12&63]+Aa[t>>6&63]+Aa[t&63]}function lz(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(cz(n));return i.join("")}function uz(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(lz(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(Aa[e>>2]+Aa[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Aa[e>>10]+Aa[e>>4&63]+Aa[e<<2&63]+"=")),i.join("")}var Jx={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Jx.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,l=c>>1,u=-7,h=r?i-1:0,d=r?-1:1,g=t[e+h];for(h+=d,s=g&(1<<-u)-1,g>>=-u,u+=a;u>0;s=s*256+t[e+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=o*256+t[e+h],h+=d,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(g?-1:1)*o*Math.pow(2,s-n)};Jx.write=function(t,e,r,n,i,s){var o,a,c,l=s*8-i-1,u=(1<<l)-1,h=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:s-1,m=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=d/c:e+=d*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*c-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+g]=a&255,g+=m,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[r+g]=o&255,g+=m,o/=256,l-=8);t[r+g-m]|=v*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=wv,r=Jx,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=x,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const j=new Uint8Array(1),P={foo:function(){return 42}};return Object.setPrototypeOf(P,Uint8Array.prototype),Object.setPrototypeOf(j,P),j.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(j){if(j>i)throw new RangeError('The value "'+j+'" is invalid for option "size"');const P=new Uint8Array(j);return Object.setPrototypeOf(P,a.prototype),P}function a(j,P,O){if(typeof j=="number"){if(typeof P=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(j)}return c(j,P,O)}a.poolSize=8192;function c(j,P,O){if(typeof j=="string")return d(j,P);if(ArrayBuffer.isView(j))return m(j);if(j==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(ft(j,ArrayBuffer)||j&&ft(j.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ft(j,SharedArrayBuffer)||j&&ft(j.buffer,SharedArrayBuffer)))return v(j,P,O);if(typeof j=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const z=j.valueOf&&j.valueOf();if(z!=null&&z!==j)return a.from(z,P,O);const G=$(j);if(G)return G;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof j[Symbol.toPrimitive]=="function")return a.from(j[Symbol.toPrimitive]("string"),P,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}a.from=function(j,P,O){return c(j,P,O)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(j){if(typeof j!="number")throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function u(j,P,O){return l(j),j<=0?o(j):P!==void 0?typeof O=="string"?o(j).fill(P,O):o(j).fill(P):o(j)}a.alloc=function(j,P,O){return u(j,P,O)};function h(j){return l(j),o(j<0?0:_(j)|0)}a.allocUnsafe=function(j){return h(j)},a.allocUnsafeSlow=function(j){return h(j)};function d(j,P){if((typeof P!="string"||P==="")&&(P="utf8"),!a.isEncoding(P))throw new TypeError("Unknown encoding: "+P);const O=A(j,P)|0;let z=o(O);const G=z.write(j,P);return G!==O&&(z=z.slice(0,G)),z}function g(j){const P=j.length<0?0:_(j.length)|0,O=o(P);for(let z=0;z<P;z+=1)O[z]=j[z]&255;return O}function m(j){if(ft(j,Uint8Array)){const P=new Uint8Array(j);return v(P.buffer,P.byteOffset,P.byteLength)}return g(j)}function v(j,P,O){if(P<0||j.byteLength<P)throw new RangeError('"offset" is outside of buffer bounds');if(j.byteLength<P+(O||0))throw new RangeError('"length" is outside of buffer bounds');let z;return P===void 0&&O===void 0?z=new Uint8Array(j):O===void 0?z=new Uint8Array(j,P):z=new Uint8Array(j,P,O),Object.setPrototypeOf(z,a.prototype),z}function $(j){if(a.isBuffer(j)){const P=_(j.length)|0,O=o(P);return O.length===0||j.copy(O,0,0,P),O}if(j.length!==void 0)return typeof j.length!="number"||Ct(j.length)?o(0):g(j);if(j.type==="Buffer"&&Array.isArray(j.data))return g(j.data)}function _(j){if(j>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return j|0}function x(j){return+j!=j&&(j=0),a.alloc(+j)}a.isBuffer=function(P){return P!=null&&P._isBuffer===!0&&P!==a.prototype},a.compare=function(P,O){if(ft(P,Uint8Array)&&(P=a.from(P,P.offset,P.byteLength)),ft(O,Uint8Array)&&(O=a.from(O,O.offset,O.byteLength)),!a.isBuffer(P)||!a.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(P===O)return 0;let z=P.length,G=O.length;for(let Z=0,ee=Math.min(z,G);Z<ee;++Z)if(P[Z]!==O[Z]){z=P[Z],G=O[Z];break}return z<G?-1:G<z?1:0},a.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(P,O){if(!Array.isArray(P))throw new TypeError('"list" argument must be an Array of Buffers');if(P.length===0)return a.alloc(0);let z;if(O===void 0)for(O=0,z=0;z<P.length;++z)O+=P[z].length;const G=a.allocUnsafe(O);let Z=0;for(z=0;z<P.length;++z){let ee=P[z];if(ft(ee,Uint8Array))Z+ee.length>G.length?(a.isBuffer(ee)||(ee=a.from(ee)),ee.copy(G,Z)):Uint8Array.prototype.set.call(G,ee,Z);else if(a.isBuffer(ee))ee.copy(G,Z);else throw new TypeError('"list" argument must be an Array of Buffers');Z+=ee.length}return G};function A(j,P){if(a.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||ft(j,ArrayBuffer))return j.byteLength;if(typeof j!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);const O=j.length,z=arguments.length>2&&arguments[2]===!0;if(!z&&O===0)return 0;let G=!1;for(;;)switch(P){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return Dt(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O*2;case"hex":return O>>>1;case"base64":return Lt(j).length;default:if(G)return z?-1:Dt(j).length;P=(""+P).toLowerCase(),G=!0}}a.byteLength=A;function T(j,P,O){let z=!1;if((P===void 0||P<0)&&(P=0),P>this.length||((O===void 0||O>this.length)&&(O=this.length),O<=0)||(O>>>=0,P>>>=0,O<=P))return"";for(j||(j="utf8");;)switch(j){case"hex":return S(this,P,O);case"utf8":case"utf-8":return f(this,P,O);case"ascii":return N(this,P,O);case"latin1":case"binary":return M(this,P,O);case"base64":return b(this,P,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,P,O);default:if(z)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),z=!0}}a.prototype._isBuffer=!0;function k(j,P,O){const z=j[P];j[P]=j[O],j[O]=z}a.prototype.swap16=function(){const P=this.length;if(P%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let O=0;O<P;O+=2)k(this,O,O+1);return this},a.prototype.swap32=function(){const P=this.length;if(P%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let O=0;O<P;O+=4)k(this,O,O+3),k(this,O+1,O+2);return this},a.prototype.swap64=function(){const P=this.length;if(P%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let O=0;O<P;O+=8)k(this,O,O+7),k(this,O+1,O+6),k(this,O+2,O+5),k(this,O+3,O+4);return this},a.prototype.toString=function(){const P=this.length;return P===0?"":arguments.length===0?f(this,0,P):T.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(P){if(!a.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P?!0:a.compare(this,P)===0},a.prototype.inspect=function(){let P="";const O=t.INSPECT_MAX_BYTES;return P=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(P+=" ... "),"<Buffer "+P+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(P,O,z,G,Z){if(ft(P,Uint8Array)&&(P=a.from(P,P.offset,P.byteLength)),!a.isBuffer(P))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof P);if(O===void 0&&(O=0),z===void 0&&(z=P?P.length:0),G===void 0&&(G=0),Z===void 0&&(Z=this.length),O<0||z>P.length||G<0||Z>this.length)throw new RangeError("out of range index");if(G>=Z&&O>=z)return 0;if(G>=Z)return-1;if(O>=z)return 1;if(O>>>=0,z>>>=0,G>>>=0,Z>>>=0,this===P)return 0;let ee=Z-G,Ce=z-O;const Fe=Math.min(ee,Ce),Se=this.slice(G,Z),qe=P.slice(O,z);for(let Re=0;Re<Fe;++Re)if(Se[Re]!==qe[Re]){ee=Se[Re],Ce=qe[Re];break}return ee<Ce?-1:Ce<ee?1:0};function D(j,P,O,z,G){if(j.length===0)return-1;if(typeof O=="string"?(z=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),O=+O,Ct(O)&&(O=G?0:j.length-1),O<0&&(O=j.length+O),O>=j.length){if(G)return-1;O=j.length-1}else if(O<0)if(G)O=0;else return-1;if(typeof P=="string"&&(P=a.from(P,z)),a.isBuffer(P))return P.length===0?-1:L(j,P,O,z,G);if(typeof P=="number")return P=P&255,typeof Uint8Array.prototype.indexOf=="function"?G?Uint8Array.prototype.indexOf.call(j,P,O):Uint8Array.prototype.lastIndexOf.call(j,P,O):L(j,[P],O,z,G);throw new TypeError("val must be string, number or Buffer")}function L(j,P,O,z,G){let Z=1,ee=j.length,Ce=P.length;if(z!==void 0&&(z=String(z).toLowerCase(),z==="ucs2"||z==="ucs-2"||z==="utf16le"||z==="utf-16le")){if(j.length<2||P.length<2)return-1;Z=2,ee/=2,Ce/=2,O/=2}function Fe(qe,Re){return Z===1?qe[Re]:qe.readUInt16BE(Re*Z)}let Se;if(G){let qe=-1;for(Se=O;Se<ee;Se++)if(Fe(j,Se)===Fe(P,qe===-1?0:Se-qe)){if(qe===-1&&(qe=Se),Se-qe+1===Ce)return qe*Z}else qe!==-1&&(Se-=Se-qe),qe=-1}else for(O+Ce>ee&&(O=ee-Ce),Se=O;Se>=0;Se--){let qe=!0;for(let Re=0;Re<Ce;Re++)if(Fe(j,Se+Re)!==Fe(P,Re)){qe=!1;break}if(qe)return Se}return-1}a.prototype.includes=function(P,O,z){return this.indexOf(P,O,z)!==-1},a.prototype.indexOf=function(P,O,z){return D(this,P,O,z,!0)},a.prototype.lastIndexOf=function(P,O,z){return D(this,P,O,z,!1)};function F(j,P,O,z){O=Number(O)||0;const G=j.length-O;z?(z=Number(z),z>G&&(z=G)):z=G;const Z=P.length;z>Z/2&&(z=Z/2);let ee;for(ee=0;ee<z;++ee){const Ce=parseInt(P.substr(ee*2,2),16);if(Ct(Ce))return ee;j[O+ee]=Ce}return ee}function B(j,P,O,z){return Le(Dt(P,j.length-O),j,O,z)}function q(j,P,O,z){return Le(Ge(P),j,O,z)}function R(j,P,O,z){return Le(Lt(P),j,O,z)}function E(j,P,O,z){return Le(jt(P,j.length-O),j,O,z)}a.prototype.write=function(P,O,z,G){if(O===void 0)G="utf8",z=this.length,O=0;else if(z===void 0&&typeof O=="string")G=O,z=this.length,O=0;else if(isFinite(O))O=O>>>0,isFinite(z)?(z=z>>>0,G===void 0&&(G="utf8")):(G=z,z=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Z=this.length-O;if((z===void 0||z>Z)&&(z=Z),P.length>0&&(z<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");let ee=!1;for(;;)switch(G){case"hex":return F(this,P,O,z);case"utf8":case"utf-8":return B(this,P,O,z);case"ascii":case"latin1":case"binary":return q(this,P,O,z);case"base64":return R(this,P,O,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,P,O,z);default:if(ee)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),ee=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function b(j,P,O){return P===0&&O===j.length?e.fromByteArray(j):e.fromByteArray(j.slice(P,O))}function f(j,P,O){O=Math.min(j.length,O);const z=[];let G=P;for(;G<O;){const Z=j[G];let ee=null,Ce=Z>239?4:Z>223?3:Z>191?2:1;if(G+Ce<=O){let Fe,Se,qe,Re;switch(Ce){case 1:Z<128&&(ee=Z);break;case 2:Fe=j[G+1],(Fe&192)===128&&(Re=(Z&31)<<6|Fe&63,Re>127&&(ee=Re));break;case 3:Fe=j[G+1],Se=j[G+2],(Fe&192)===128&&(Se&192)===128&&(Re=(Z&15)<<12|(Fe&63)<<6|Se&63,Re>2047&&(Re<55296||Re>57343)&&(ee=Re));break;case 4:Fe=j[G+1],Se=j[G+2],qe=j[G+3],(Fe&192)===128&&(Se&192)===128&&(qe&192)===128&&(Re=(Z&15)<<18|(Fe&63)<<12|(Se&63)<<6|qe&63,Re>65535&&Re<1114112&&(ee=Re))}}ee===null?(ee=65533,Ce=1):ee>65535&&(ee-=65536,z.push(ee>>>10&1023|55296),ee=56320|ee&1023),z.push(ee),G+=Ce}return w(z)}const p=4096;function w(j){const P=j.length;if(P<=p)return String.fromCharCode.apply(String,j);let O="",z=0;for(;z<P;)O+=String.fromCharCode.apply(String,j.slice(z,z+=p));return O}function N(j,P,O){let z="";O=Math.min(j.length,O);for(let G=P;G<O;++G)z+=String.fromCharCode(j[G]&127);return z}function M(j,P,O){let z="";O=Math.min(j.length,O);for(let G=P;G<O;++G)z+=String.fromCharCode(j[G]);return z}function S(j,P,O){const z=j.length;(!P||P<0)&&(P=0),(!O||O<0||O>z)&&(O=z);let G="";for(let Z=P;Z<O;++Z)G+=Ke[j[Z]];return G}function y(j,P,O){const z=j.slice(P,O);let G="";for(let Z=0;Z<z.length-1;Z+=2)G+=String.fromCharCode(z[Z]+z[Z+1]*256);return G}a.prototype.slice=function(P,O){const z=this.length;P=~~P,O=O===void 0?z:~~O,P<0?(P+=z,P<0&&(P=0)):P>z&&(P=z),O<0?(O+=z,O<0&&(O=0)):O>z&&(O=z),O<P&&(O=P);const G=this.subarray(P,O);return Object.setPrototypeOf(G,a.prototype),G};function C(j,P,O){if(j%1!==0||j<0)throw new RangeError("offset is not uint");if(j+P>O)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(P,O,z){P=P>>>0,O=O>>>0,z||C(P,O,this.length);let G=this[P],Z=1,ee=0;for(;++ee<O&&(Z*=256);)G+=this[P+ee]*Z;return G},a.prototype.readUintBE=a.prototype.readUIntBE=function(P,O,z){P=P>>>0,O=O>>>0,z||C(P,O,this.length);let G=this[P+--O],Z=1;for(;O>0&&(Z*=256);)G+=this[P+--O]*Z;return G},a.prototype.readUint8=a.prototype.readUInt8=function(P,O){return P=P>>>0,O||C(P,1,this.length),this[P]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(P,O){return P=P>>>0,O||C(P,2,this.length),this[P]|this[P+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(P,O){return P=P>>>0,O||C(P,2,this.length),this[P]<<8|this[P+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(P,O){return P=P>>>0,O||C(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+this[P+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(P,O){return P=P>>>0,O||C(P,4,this.length),this[P]*16777216+(this[P+1]<<16|this[P+2]<<8|this[P+3])},a.prototype.readBigUInt64LE=mt(function(P){P=P>>>0,et(P,"offset");const O=this[P],z=this[P+7];(O===void 0||z===void 0)&&tt(P,this.length-8);const G=O+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24,Z=this[++P]+this[++P]*2**8+this[++P]*2**16+z*2**24;return BigInt(G)+(BigInt(Z)<<BigInt(32))}),a.prototype.readBigUInt64BE=mt(function(P){P=P>>>0,et(P,"offset");const O=this[P],z=this[P+7];(O===void 0||z===void 0)&&tt(P,this.length-8);const G=O*2**24+this[++P]*2**16+this[++P]*2**8+this[++P],Z=this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+z;return(BigInt(G)<<BigInt(32))+BigInt(Z)}),a.prototype.readIntLE=function(P,O,z){P=P>>>0,O=O>>>0,z||C(P,O,this.length);let G=this[P],Z=1,ee=0;for(;++ee<O&&(Z*=256);)G+=this[P+ee]*Z;return Z*=128,G>=Z&&(G-=Math.pow(2,8*O)),G},a.prototype.readIntBE=function(P,O,z){P=P>>>0,O=O>>>0,z||C(P,O,this.length);let G=O,Z=1,ee=this[P+--G];for(;G>0&&(Z*=256);)ee+=this[P+--G]*Z;return Z*=128,ee>=Z&&(ee-=Math.pow(2,8*O)),ee},a.prototype.readInt8=function(P,O){return P=P>>>0,O||C(P,1,this.length),this[P]&128?(255-this[P]+1)*-1:this[P]},a.prototype.readInt16LE=function(P,O){P=P>>>0,O||C(P,2,this.length);const z=this[P]|this[P+1]<<8;return z&32768?z|4294901760:z},a.prototype.readInt16BE=function(P,O){P=P>>>0,O||C(P,2,this.length);const z=this[P+1]|this[P]<<8;return z&32768?z|4294901760:z},a.prototype.readInt32LE=function(P,O){return P=P>>>0,O||C(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},a.prototype.readInt32BE=function(P,O){return P=P>>>0,O||C(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},a.prototype.readBigInt64LE=mt(function(P){P=P>>>0,et(P,"offset");const O=this[P],z=this[P+7];(O===void 0||z===void 0)&&tt(P,this.length-8);const G=this[P+4]+this[P+5]*2**8+this[P+6]*2**16+(z<<24);return(BigInt(G)<<BigInt(32))+BigInt(O+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24)}),a.prototype.readBigInt64BE=mt(function(P){P=P>>>0,et(P,"offset");const O=this[P],z=this[P+7];(O===void 0||z===void 0)&&tt(P,this.length-8);const G=(O<<24)+this[++P]*2**16+this[++P]*2**8+this[++P];return(BigInt(G)<<BigInt(32))+BigInt(this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+z)}),a.prototype.readFloatLE=function(P,O){return P=P>>>0,O||C(P,4,this.length),r.read(this,P,!0,23,4)},a.prototype.readFloatBE=function(P,O){return P=P>>>0,O||C(P,4,this.length),r.read(this,P,!1,23,4)},a.prototype.readDoubleLE=function(P,O){return P=P>>>0,O||C(P,8,this.length),r.read(this,P,!0,52,8)},a.prototype.readDoubleBE=function(P,O){return P=P>>>0,O||C(P,8,this.length),r.read(this,P,!1,52,8)};function I(j,P,O,z,G,Z){if(!a.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(P>G||P<Z)throw new RangeError('"value" argument is out of bounds');if(O+z>j.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(P,O,z,G){if(P=+P,O=O>>>0,z=z>>>0,!G){const Ce=Math.pow(2,8*z)-1;I(this,P,O,z,Ce,0)}let Z=1,ee=0;for(this[O]=P&255;++ee<z&&(Z*=256);)this[O+ee]=P/Z&255;return O+z},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(P,O,z,G){if(P=+P,O=O>>>0,z=z>>>0,!G){const Ce=Math.pow(2,8*z)-1;I(this,P,O,z,Ce,0)}let Z=z-1,ee=1;for(this[O+Z]=P&255;--Z>=0&&(ee*=256);)this[O+Z]=P/ee&255;return O+z},a.prototype.writeUint8=a.prototype.writeUInt8=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,1,255,0),this[O]=P&255,O+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,2,65535,0),this[O]=P&255,this[O+1]=P>>>8,O+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,2,65535,0),this[O]=P>>>8,this[O+1]=P&255,O+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,4,4294967295,0),this[O+3]=P>>>24,this[O+2]=P>>>16,this[O+1]=P>>>8,this[O]=P&255,O+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,4,4294967295,0),this[O]=P>>>24,this[O+1]=P>>>16,this[O+2]=P>>>8,this[O+3]=P&255,O+4};function U(j,P,O,z,G){Ae(P,z,G,j,O,7);let Z=Number(P&BigInt(4294967295));j[O++]=Z,Z=Z>>8,j[O++]=Z,Z=Z>>8,j[O++]=Z,Z=Z>>8,j[O++]=Z;let ee=Number(P>>BigInt(32)&BigInt(4294967295));return j[O++]=ee,ee=ee>>8,j[O++]=ee,ee=ee>>8,j[O++]=ee,ee=ee>>8,j[O++]=ee,O}function K(j,P,O,z,G){Ae(P,z,G,j,O,7);let Z=Number(P&BigInt(4294967295));j[O+7]=Z,Z=Z>>8,j[O+6]=Z,Z=Z>>8,j[O+5]=Z,Z=Z>>8,j[O+4]=Z;let ee=Number(P>>BigInt(32)&BigInt(4294967295));return j[O+3]=ee,ee=ee>>8,j[O+2]=ee,ee=ee>>8,j[O+1]=ee,ee=ee>>8,j[O]=ee,O+8}a.prototype.writeBigUInt64LE=mt(function(P,O=0){return U(this,P,O,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=mt(function(P,O=0){return K(this,P,O,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(P,O,z,G){if(P=+P,O=O>>>0,!G){const Fe=Math.pow(2,8*z-1);I(this,P,O,z,Fe-1,-Fe)}let Z=0,ee=1,Ce=0;for(this[O]=P&255;++Z<z&&(ee*=256);)P<0&&Ce===0&&this[O+Z-1]!==0&&(Ce=1),this[O+Z]=(P/ee>>0)-Ce&255;return O+z},a.prototype.writeIntBE=function(P,O,z,G){if(P=+P,O=O>>>0,!G){const Fe=Math.pow(2,8*z-1);I(this,P,O,z,Fe-1,-Fe)}let Z=z-1,ee=1,Ce=0;for(this[O+Z]=P&255;--Z>=0&&(ee*=256);)P<0&&Ce===0&&this[O+Z+1]!==0&&(Ce=1),this[O+Z]=(P/ee>>0)-Ce&255;return O+z},a.prototype.writeInt8=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,1,127,-128),P<0&&(P=255+P+1),this[O]=P&255,O+1},a.prototype.writeInt16LE=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,2,32767,-32768),this[O]=P&255,this[O+1]=P>>>8,O+2},a.prototype.writeInt16BE=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,2,32767,-32768),this[O]=P>>>8,this[O+1]=P&255,O+2},a.prototype.writeInt32LE=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,4,2147483647,-2147483648),this[O]=P&255,this[O+1]=P>>>8,this[O+2]=P>>>16,this[O+3]=P>>>24,O+4},a.prototype.writeInt32BE=function(P,O,z){return P=+P,O=O>>>0,z||I(this,P,O,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),this[O]=P>>>24,this[O+1]=P>>>16,this[O+2]=P>>>8,this[O+3]=P&255,O+4},a.prototype.writeBigInt64LE=mt(function(P,O=0){return U(this,P,O,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=mt(function(P,O=0){return K(this,P,O,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function V(j,P,O,z,G,Z){if(O+z>j.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function te(j,P,O,z,G){return P=+P,O=O>>>0,G||V(j,P,O,4),r.write(j,P,O,z,23,4),O+4}a.prototype.writeFloatLE=function(P,O,z){return te(this,P,O,!0,z)},a.prototype.writeFloatBE=function(P,O,z){return te(this,P,O,!1,z)};function se(j,P,O,z,G){return P=+P,O=O>>>0,G||V(j,P,O,8),r.write(j,P,O,z,52,8),O+8}a.prototype.writeDoubleLE=function(P,O,z){return se(this,P,O,!0,z)},a.prototype.writeDoubleBE=function(P,O,z){return se(this,P,O,!1,z)},a.prototype.copy=function(P,O,z,G){if(!a.isBuffer(P))throw new TypeError("argument should be a Buffer");if(z||(z=0),!G&&G!==0&&(G=this.length),O>=P.length&&(O=P.length),O||(O=0),G>0&&G<z&&(G=z),G===z||P.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),P.length-O<G-z&&(G=P.length-O+z);const Z=G-z;return this===P&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(O,z,G):Uint8Array.prototype.set.call(P,this.subarray(z,G),O),Z},a.prototype.fill=function(P,O,z,G){if(typeof P=="string"){if(typeof O=="string"?(G=O,O=0,z=this.length):typeof z=="string"&&(G=z,z=this.length),G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!a.isEncoding(G))throw new TypeError("Unknown encoding: "+G);if(P.length===1){const ee=P.charCodeAt(0);(G==="utf8"&&ee<128||G==="latin1")&&(P=ee)}}else typeof P=="number"?P=P&255:typeof P=="boolean"&&(P=Number(P));if(O<0||this.length<O||this.length<z)throw new RangeError("Out of range index");if(z<=O)return this;O=O>>>0,z=z===void 0?this.length:z>>>0,P||(P=0);let Z;if(typeof P=="number")for(Z=O;Z<z;++Z)this[Z]=P;else{const ee=a.isBuffer(P)?P:a.from(P,G),Ce=ee.length;if(Ce===0)throw new TypeError('The value "'+P+'" is invalid for argument "value"');for(Z=0;Z<z-O;++Z)this[Z+O]=ee[Z%Ce]}return this};const ce={};function ie(j,P,O){ce[j]=class extends O{constructor(){super(),Object.defineProperty(this,"message",{value:P.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${j}]`,this.stack,delete this.name}get code(){return j}set code(G){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:G,writable:!0})}toString(){return`${this.name} [${j}]: ${this.message}`}}}ie("ERR_BUFFER_OUT_OF_BOUNDS",function(j){return j?`${j} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function(j,P){return`The "${j}" argument must be of type number. Received type ${typeof P}`},TypeError),ie("ERR_OUT_OF_RANGE",function(j,P,O){let z=`The value of "${j}" is out of range.`,G=O;return Number.isInteger(O)&&Math.abs(O)>2**32?G=ve(String(O)):typeof O=="bigint"&&(G=String(O),(O>BigInt(2)**BigInt(32)||O<-(BigInt(2)**BigInt(32)))&&(G=ve(G)),G+="n"),z+=` It must be ${P}. Received ${G}`,z},RangeError);function ve(j){let P="",O=j.length;const z=j[0]==="-"?1:0;for(;O>=z+4;O-=3)P=`_${j.slice(O-3,O)}${P}`;return`${j.slice(0,O)}${P}`}function Ne(j,P,O){et(P,"offset"),(j[P]===void 0||j[P+O]===void 0)&&tt(P,j.length-(O+1))}function Ae(j,P,O,z,G,Z){if(j>O||j<P){const ee=typeof P=="bigint"?"n":"";let Ce;throw P===0||P===BigInt(0)?Ce=`>= 0${ee} and < 2${ee} ** ${(Z+1)*8}${ee}`:Ce=`>= -(2${ee} ** ${(Z+1)*8-1}${ee}) and < 2 ** ${(Z+1)*8-1}${ee}`,new ce.ERR_OUT_OF_RANGE("value",Ce,j)}Ne(z,G,Z)}function et(j,P){if(typeof j!="number")throw new ce.ERR_INVALID_ARG_TYPE(P,"number",j)}function tt(j,P,O){throw Math.floor(j)!==j?(et(j,O),new ce.ERR_OUT_OF_RANGE("offset","an integer",j)):P<0?new ce.ERR_BUFFER_OUT_OF_BOUNDS:new ce.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${P}`,j)}const je=/[^+/0-9A-Za-z-_]/g;function Vt(j){if(j=j.split("=")[0],j=j.trim().replace(je,""),j.length<2)return"";for(;j.length%4!==0;)j=j+"=";return j}function Dt(j,P){P=P||1/0;let O;const z=j.length;let G=null;const Z=[];for(let ee=0;ee<z;++ee){if(O=j.charCodeAt(ee),O>55295&&O<57344){if(!G){if(O>56319){(P-=3)>-1&&Z.push(239,191,189);continue}else if(ee+1===z){(P-=3)>-1&&Z.push(239,191,189);continue}G=O;continue}if(O<56320){(P-=3)>-1&&Z.push(239,191,189),G=O;continue}O=(G-55296<<10|O-56320)+65536}else G&&(P-=3)>-1&&Z.push(239,191,189);if(G=null,O<128){if((P-=1)<0)break;Z.push(O)}else if(O<2048){if((P-=2)<0)break;Z.push(O>>6|192,O&63|128)}else if(O<65536){if((P-=3)<0)break;Z.push(O>>12|224,O>>6&63|128,O&63|128)}else if(O<1114112){if((P-=4)<0)break;Z.push(O>>18|240,O>>12&63|128,O>>6&63|128,O&63|128)}else throw new Error("Invalid code point")}return Z}function Ge(j){const P=[];for(let O=0;O<j.length;++O)P.push(j.charCodeAt(O)&255);return P}function jt(j,P){let O,z,G;const Z=[];for(let ee=0;ee<j.length&&!((P-=2)<0);++ee)O=j.charCodeAt(ee),z=O>>8,G=O%256,Z.push(G),Z.push(z);return Z}function Lt(j){return e.toByteArray(Vt(j))}function Le(j,P,O,z){let G;for(G=0;G<z&&!(G+O>=P.length||G>=j.length);++G)P[G+O]=j[G];return G}function ft(j,P){return j instanceof P||j!=null&&j.constructor!=null&&j.constructor.name!=null&&j.constructor.name===P.name}function Ct(j){return j!==j}const Ke=function(){const j="0123456789abcdef",P=new Array(256);for(let O=0;O<16;++O){const z=O*16;for(let G=0;G<16;++G)P[z+G]=j[O]+j[G]}return P}();function mt(j){return typeof BigInt>"u"?Ft:j}function Ft(){throw new Error("BigInt not supported")}})(Xe);const hd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Hm(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function H3(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function qh(t,...e){if(!Hm(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function O9(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");H3(t.outputLen),H3(t.blockLen)}function lb(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function hz(t,e){qh(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function ip(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Q2(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ha(t,e){return t<<32-e|t>>>e}const k9=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",dz=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ph(t){if(qh(t),k9)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=dz[t[r]];return e}const uc={_0:48,_9:57,A:65,F:70,a:97,f:102};function nA(t){if(t>=uc._0&&t<=uc._9)return t-uc._0;if(t>=uc.A&&t<=uc.F)return t-(uc.A-10);if(t>=uc.a&&t<=uc.f)return t-(uc.a-10)}function ub(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(k9)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=nA(t.charCodeAt(s)),a=nA(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function fz(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Xx(t){return typeof t=="string"&&(t=fz(t)),qh(t),t}function Ca(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];qh(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}let R9=class{};function D9(t){const e=n=>t().update(Xx(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function eI(t=32){if(hd&&typeof hd.getRandomValues=="function")return hd.getRandomValues(new Uint8Array(t));if(hd&&typeof hd.randomBytes=="function")return Uint8Array.from(hd.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function pz(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function gz(t,e,r){return t&e^~t&r}function mz(t,e,r){return t&e^t&r^e&r}class L9 extends R9{constructor(e,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Q2(this.buffer)}update(e){lb(this),e=Xx(e),qh(e);const{view:r,buffer:n,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Q2(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){lb(this),hz(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,ip(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;pz(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=Q2(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const al=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ti=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Gy=BigInt(2**32-1),iA=BigInt(32);function yz(t,e=!1){return e?{h:Number(t&Gy),l:Number(t>>iA&Gy)}:{h:Number(t>>iA&Gy)|0,l:Number(t&Gy)|0}}function wz(t,e=!1){const r=t.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let s=0;s<r;s++){const{h:o,l:a}=yz(t[s],e);[n[s],i[s]]=[o,a]}return[n,i]}const sA=(t,e,r)=>t>>>r,oA=(t,e,r)=>t<<32-r|e>>>r,dd=(t,e,r)=>t>>>r|e<<32-r,fd=(t,e,r)=>t<<32-r|e>>>r,Yy=(t,e,r)=>t<<64-r|e>>>r-32,Qy=(t,e,r)=>t>>>r-32|e<<64-r;function hc(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const bz=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),vz=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Ez=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),_z=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,Sz=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),xz=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,Iz=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),cl=new Uint32Array(64);let Az=class extends L9{constructor(e=32){super(64,e,8,!1),this.A=al[0]|0,this.B=al[1]|0,this.C=al[2]|0,this.D=al[3]|0,this.E=al[4]|0,this.F=al[5]|0,this.G=al[6]|0,this.H=al[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,r,n,i,s,o,a,c]}set(e,r,n,i,s,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)cl[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=cl[h-15],g=cl[h-2],m=ha(d,7)^ha(d,18)^d>>>3,v=ha(g,17)^ha(g,19)^g>>>10;cl[h]=v+cl[h-7]+m+cl[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=ha(a,6)^ha(a,11)^ha(a,25),g=u+d+gz(a,c,l)+Iz[h]+cl[h]|0,v=(ha(n,2)^ha(n,13)^ha(n,22))+mz(n,i,s)|0;u=l,l=c,c=a,a=o+g|0,o=s,s=i,i=n,n=g+v|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){ip(cl)}destroy(){this.set(0,0,0,0,0,0,0,0),ip(this.buffer)}};const B9=wz(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Cz=B9[0],Nz=B9[1],ll=new Uint32Array(80),ul=new Uint32Array(80);let Mz=class extends L9{constructor(e=64){super(128,e,16,!1),this.Ah=Ti[0]|0,this.Al=Ti[1]|0,this.Bh=Ti[2]|0,this.Bl=Ti[3]|0,this.Ch=Ti[4]|0,this.Cl=Ti[5]|0,this.Dh=Ti[6]|0,this.Dl=Ti[7]|0,this.Eh=Ti[8]|0,this.El=Ti[9]|0,this.Fh=Ti[10]|0,this.Fl=Ti[11]|0,this.Gh=Ti[12]|0,this.Gl=Ti[13]|0,this.Hh=Ti[14]|0,this.Hl=Ti[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:d,Gh:g,Gl:m,Hh:v,Hl:$}=this;return[e,r,n,i,s,o,a,c,l,u,h,d,g,m,v,$]}set(e,r,n,i,s,o,a,c,l,u,h,d,g,m,v,$){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=d|0,this.Gh=g|0,this.Gl=m|0,this.Hh=v|0,this.Hl=$|0}process(e,r){for(let A=0;A<16;A++,r+=4)ll[A]=e.getUint32(r),ul[A]=e.getUint32(r+=4);for(let A=16;A<80;A++){const T=ll[A-15]|0,k=ul[A-15]|0,D=dd(T,k,1)^dd(T,k,8)^sA(T,k,7),L=fd(T,k,1)^fd(T,k,8)^oA(T,k,7),F=ll[A-2]|0,B=ul[A-2]|0,q=dd(F,B,19)^Yy(F,B,61)^sA(F,B,6),R=fd(F,B,19)^Qy(F,B,61)^oA(F,B,6),E=Ez(L,R,ul[A-7],ul[A-16]),b=_z(E,D,q,ll[A-7],ll[A-16]);ll[A]=b|0,ul[A]=E|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:d,Fh:g,Fl:m,Gh:v,Gl:$,Hh:_,Hl:x}=this;for(let A=0;A<80;A++){const T=dd(h,d,14)^dd(h,d,18)^Yy(h,d,41),k=fd(h,d,14)^fd(h,d,18)^Qy(h,d,41),D=h&g^~h&v,L=d&m^~d&$,F=Sz(x,k,L,Nz[A],ul[A]),B=xz(F,_,T,D,Cz[A],ll[A]),q=F|0,R=dd(n,i,28)^Yy(n,i,34)^Yy(n,i,39),E=fd(n,i,28)^Qy(n,i,34)^Qy(n,i,39),b=n&s^n&a^s&a,f=i&o^i&c^o&c;_=v|0,x=$|0,v=g|0,$=m|0,g=h|0,m=d|0,{h,l:d}=hc(l|0,u|0,B|0,q|0),l=a|0,u=c|0,a=s|0,c=o|0,s=n|0,o=i|0;const p=bz(q,E,f);n=vz(p,B,R,b),i=p|0}({h:n,l:i}=hc(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=hc(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=hc(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=hc(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:d}=hc(this.Eh|0,this.El|0,h|0,d|0),{h:g,l:m}=hc(this.Fh|0,this.Fl|0,g|0,m|0),{h:v,l:$}=hc(this.Gh|0,this.Gl|0,v|0,$|0),{h:_,l:x}=hc(this.Hh|0,this.Hl|0,_|0,x|0),this.set(n,i,s,o,a,c,l,u,h,d,g,m,v,$,_,x)}roundClean(){ip(ll,ul)}destroy(){ip(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const U9=D9(()=>new Az),Tz=D9(()=>new Mz);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tI=BigInt(0),K3=BigInt(1);function Ch(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function ea(t,e,r=""){const n=Hm(t),i=t==null?void 0:t.length,s=e!==void 0;if(!n||s&&i!==e){const o=r&&`"${r}" `,a=s?` of length ${e}`:"",c=n?`length=${i}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function Zy(t){const e=t.toString(16);return e.length&1?"0"+e:e}function j9(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?tI:BigInt("0x"+t)}function bv(t){return j9(ph(t))}function Yg(t){return qh(t),j9(ph(Uint8Array.from(t).reverse()))}function rI(t,e){return ub(t.toString(16).padStart(e*2,"0"))}function F9(t,e){return rI(t,e).reverse()}function an(t,e,r){let n;if(typeof e=="string")try{n=ub(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Hm(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function aA(t){return Uint8Array.from(t)}const Z2=t=>typeof t=="bigint"&&tI<=t;function $z(t,e,r){return Z2(t)&&Z2(e)&&Z2(r)&&e<=t&&t<r}function V3(t,e,r,n){if(!$z(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function z9(t){let e;for(e=0;t>tI;t>>=K3,e+=1);return e}const Km=t=>(K3<<BigInt(t))-K3;function Pz(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=g=>new Uint8Array(g),i=g=>Uint8Array.of(g);let s=n(t),o=n(t),a=0;const c=()=>{s.fill(1),o.fill(0),a=0},l=(...g)=>r(o,s,...g),u=(g=n(0))=>{o=l(i(0),g),s=l(),g.length!==0&&(o=l(i(1),g),s=l())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const m=[];for(;g<e;){s=l();const v=s.slice();m.push(v),g+=s.length}return Ca(...m)};return(g,m)=>{c(),u(g);let v;for(;!(v=m(h()));)u();return c(),v}}function Vm(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(i,s,o){const a=t[i];if(o&&a===void 0)return;const c=typeof a;if(c!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${c}`)}Object.entries(e).forEach(([i,s])=>n(i,s,!1)),Object.entries(r).forEach(([i,s])=>n(i,s,!0))}function hb(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vs=BigInt(0),bi=BigInt(1),Xu=BigInt(2),q9=BigInt(3),W9=BigInt(4),H9=BigInt(5),Oz=BigInt(7),K9=BigInt(8),kz=BigInt(9),V9=BigInt(16);function vn(t,e){const r=t%e;return r>=vs?r:e+r}function on(t,e,r){let n=t;for(;e-- >vs;)n*=n,n%=r;return n}function cA(t,e){if(t===vs)throw new Error("invert: expected non-zero number");if(e<=vs)throw new Error("invert: expected positive modulus, got "+e);let r=vn(t,e),n=e,i=vs,s=bi;for(;r!==vs;){const a=n/r,c=n%r,l=i-s*a;n=r,r=c,i=s,s=l}if(n!==bi)throw new Error("invert: does not exist");return vn(i,e)}function nI(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function G9(t,e){const r=(t.ORDER+bi)/W9,n=t.pow(e,r);return nI(t,n,e),n}function Rz(t,e){const r=(t.ORDER-H9)/K9,n=t.mul(e,Xu),i=t.pow(n,r),s=t.mul(e,i),o=t.mul(t.mul(s,Xu),i),a=t.mul(s,t.sub(o,t.ONE));return nI(t,a,e),a}function Dz(t){const e=Wh(t),r=Y9(t),n=r(e,e.neg(e.ONE)),i=r(e,n),s=r(e,e.neg(n)),o=(t+Oz)/V9;return(a,c)=>{let l=a.pow(c,o),u=a.mul(l,n);const h=a.mul(l,i),d=a.mul(l,s),g=a.eql(a.sqr(u),c),m=a.eql(a.sqr(h),c);l=a.cmov(l,u,g),u=a.cmov(d,h,m);const v=a.eql(a.sqr(u),c),$=a.cmov(l,u,v);return nI(a,$,c),$}}function Y9(t){if(t<q9)throw new Error("sqrt is not defined for small field");let e=t-bi,r=0;for(;e%Xu===vs;)e/=Xu,r++;let n=Xu;const i=Wh(t);for(;lA(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return G9;let s=i.pow(n,e);const o=(e+bi)/Xu;return function(c,l){if(c.is0(l))return l;if(lA(c,l)!==1)throw new Error("Cannot find square root");let u=r,h=c.mul(c.ONE,s),d=c.pow(l,e),g=c.pow(l,o);for(;!c.eql(d,c.ONE);){if(c.is0(d))return c.ZERO;let m=1,v=c.sqr(d);for(;!c.eql(v,c.ONE);)if(m++,v=c.sqr(v),m===u)throw new Error("Cannot find square root");const $=bi<<BigInt(u-m-1),_=c.pow(h,$);u=m,h=c.sqr(_),d=c.mul(d,h),g=c.mul(g,_)}return g}}function Lz(t){return t%W9===q9?G9:t%K9===H9?Rz:t%V9===kz?Dz(t):Y9(t)}const Bz=(t,e)=>(vn(t,e)&bi)===bi,Uz=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function jz(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=Uz.reduce((n,i)=>(n[i]="function",n),e);return Vm(t,r),t}function Fz(t,e,r){if(r<vs)throw new Error("invalid exponent, negatives unsupported");if(r===vs)return t.ONE;if(r===bi)return e;let n=t.ONE,i=e;for(;r>vs;)r&bi&&(n=t.mul(n,i)),i=t.sqr(i),r>>=bi;return n}function Q9(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((o,a,c)=>t.is0(a)?o:(n[c]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,c)=>t.is0(a)?o:(n[c]=t.mul(o,n[c]),t.mul(o,a)),s),n}function lA(t,e){const r=(t.ORDER-bi)/Xu,n=t.pow(e,r),i=t.eql(n,t.ONE),s=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function Z9(t,e){e!==void 0&&H3(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Wh(t,e,r=!1,n={}){if(t<=vs)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s,o=!1,a;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const d=e;d.BITS&&(i=d.BITS),d.sqrt&&(s=d.sqrt),typeof d.isLE=="boolean"&&(r=d.isLE),typeof d.modFromBytes=="boolean"&&(o=d.modFromBytes),a=d.allowedLengths}else typeof e=="number"&&(i=e),n.sqrt&&(s=n.sqrt);const{nBitLength:c,nByteLength:l}=Z9(t,i);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const h=Object.freeze({ORDER:t,isLE:r,BITS:c,BYTES:l,MASK:Km(c),ZERO:vs,ONE:bi,allowedLengths:a,create:d=>vn(d,t),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return vs<=d&&d<t},is0:d=>d===vs,isValidNot0:d=>!h.is0(d)&&h.isValid(d),isOdd:d=>(d&bi)===bi,neg:d=>vn(-d,t),eql:(d,g)=>d===g,sqr:d=>vn(d*d,t),add:(d,g)=>vn(d+g,t),sub:(d,g)=>vn(d-g,t),mul:(d,g)=>vn(d*g,t),pow:(d,g)=>Fz(h,d,g),div:(d,g)=>vn(d*cA(g,t),t),sqrN:d=>d*d,addN:(d,g)=>d+g,subN:(d,g)=>d-g,mulN:(d,g)=>d*g,inv:d=>cA(d,t),sqrt:s||(d=>(u||(u=Lz(t)),u(h,d))),toBytes:d=>r?F9(d,l):rI(d,l),fromBytes:(d,g=!0)=>{if(a){if(!a.includes(d.length)||d.length>l)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+d.length);const v=new Uint8Array(l);v.set(d,r?0:v.length-d.length),d=v}if(d.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+d.length);let m=r?Yg(d):bv(d);if(o&&(m=vn(m,t)),!g&&!h.isValid(m))throw new Error("invalid field element: outside of range 0..ORDER");return m},invertBatch:d=>Q9(h,d),cmov:(d,g,m)=>m?g:d});return Object.freeze(h)}function J9(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function X9(t){const e=J9(t);return e+Math.ceil(e/2)}function zz(t,e,r=!1){const n=t.length,i=J9(e),s=X9(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?Yg(t):bv(t),a=vn(o,e-bi)+bi;return r?F9(a,i):rI(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sp=BigInt(0),eh=BigInt(1);function db(t,e){const r=e.negate();return t?r:e}function th(t,e){const r=Q9(t.Fp,e.map(n=>n.Z));return e.map((n,i)=>t.fromAffine(n.toAffine(r[i])))}function eO(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function J2(t,e){eO(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,s=Km(t),o=BigInt(t);return{windows:r,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function uA(t,e,r){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=r;let a=Number(t&i),c=t>>o;a>n&&(a-=s,c+=eh);const l=e*n,u=l+Math.abs(a)-1,h=a===0,d=a<0,g=e%2!==0;return{nextN:c,offset:u,isZero:h,isNeg:d,isNegF:g,offsetF:l}}function qz(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Wz(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const X2=new WeakMap,tO=new WeakMap;function eE(t){return tO.get(t)||1}function hA(t){if(t!==sp)throw new Error("invalid wNAF")}class rO{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let i=e;for(;r>sp;)r&eh&&(n=n.add(i)),i=i.double(),r>>=eh;return n}precomputeWindow(e,r){const{windows:n,windowSize:i}=J2(r,this.bits),s=[];let o=e,a=o;for(let c=0;c<n;c++){a=o,s.push(a);for(let l=1;l<i;l++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=J2(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:l,isZero:u,isNeg:h,isNegF:d,offsetF:g}=uA(n,a,o);n=c,u?s=s.add(db(d,r[g])):i=i.add(db(h,r[l]))}return hA(n),{p:i,f:s}}wNAFUnsafe(e,r,n,i=this.ZERO){const s=J2(e,this.bits);for(let o=0;o<s.windows&&n!==sp;o++){const{nextN:a,offset:c,isZero:l,isNeg:u}=uA(n,o,s);if(n=a,!l){const h=r[c];i=i.add(u?h.negate():h)}}return hA(n),i}getPrecomputes(e,r,n){let i=X2.get(r);return i||(i=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(i=n(i)),X2.set(r,i))),i}cached(e,r,n){const i=eE(e);return this.wNAF(i,this.getPrecomputes(i,e,n),r)}unsafe(e,r,n,i){const s=eE(e);return s===1?this._unsafeLadder(e,r,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),r,i)}createCache(e,r){eO(r,this.bits),tO.set(e,r),X2.delete(e)}hasCache(e){return eE(e)!==1}}function Hz(t,e,r,n){let i=e,s=t.ZERO,o=t.ZERO;for(;r>sp||n>sp;)r&eh&&(s=s.add(i)),n&eh&&(o=o.add(i)),i=i.double(),r>>=eh,n>>=eh;return{p1:s,p2:o}}function nO(t,e,r,n){qz(r,t),Wz(n,e);const i=r.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=z9(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=Km(c),u=new Array(Number(l)+1).fill(o),h=Math.floor((e.BITS-1)/c)*c;let d=o;for(let g=h;g>=0;g-=c){u.fill(o);for(let v=0;v<s;v++){const $=n[v],_=Number($>>BigInt(g)&l);u[_]=u[_].add(r[v])}let m=o;for(let v=u.length-1,$=o;v>0;v--)$=$.add(u[v]),m=m.add($);if(d=d.add(m),g!==0)for(let v=0;v<c;v++)d=d.double()}return d}function dA(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return jz(e),e}else return Wh(t,{isLE:r})}function iO(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const l=e[c];if(!(typeof l=="bigint"&&l>sp))throw new Error(`CURVE.${c} must be positive bigint`)}const i=dA(e.p,r.Fp,n),s=dA(e.n,r.Fn,n),a=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const c of a)if(!i.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hl=BigInt(0),Wn=BigInt(1),tE=BigInt(2),Kz=BigInt(8);function Vz(t,e,r,n){const i=t.sqr(r),s=t.sqr(n),o=t.add(t.mul(e.a,i),s),a=t.add(t.ONE,t.mul(e.d,t.mul(i,s)));return t.eql(o,a)}function Gz(t,e={}){const r=iO("edwards",t,e,e.FpFnLE),{Fp:n,Fn:i}=r;let s=r.CURVE;const{h:o}=s;Vm(e,{},{uvRatio:"function"});const a=tE<<BigInt(i.BYTES*8)-Wn,c=$=>n.create($),l=e.uvRatio||(($,_)=>{try{return{isValid:!0,value:n.sqrt(n.div($,_))}}catch{return{isValid:!1,value:hl}}});if(!Vz(n,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function u($,_,x=!1){const A=x?Wn:hl;return V3("coordinate "+$,_,A,a),_}function h($){if(!($ instanceof m))throw new Error("ExtendedPoint expected")}const d=hb(($,_)=>{const{X:x,Y:A,Z:T}=$,k=$.is0();_==null&&(_=k?Kz:n.inv(T));const D=c(x*_),L=c(A*_),F=n.mul(T,_);if(k)return{x:hl,y:Wn};if(F!==Wn)throw new Error("invZ was invalid");return{x:D,y:L}}),g=hb($=>{const{a:_,d:x}=s;if($.is0())throw new Error("bad point: ZERO");const{X:A,Y:T,Z:k,T:D}=$,L=c(A*A),F=c(T*T),B=c(k*k),q=c(B*B),R=c(L*_),E=c(B*c(R+F)),b=c(q+c(x*c(L*F)));if(E!==b)throw new Error("bad point: equation left != right (1)");const f=c(A*T),p=c(k*D);if(f!==p)throw new Error("bad point: equation left != right (2)");return!0});class m{constructor(_,x,A,T){this.X=u("x",_),this.Y=u("y",x),this.Z=u("z",A,!0),this.T=u("t",T),Object.freeze(this)}static CURVE(){return s}static fromAffine(_){if(_ instanceof m)throw new Error("extended point not allowed");const{x,y:A}=_||{};return u("x",x),u("y",A),new m(x,A,Wn,c(x*A))}static fromBytes(_,x=!1){const A=n.BYTES,{a:T,d:k}=s;_=aA(ea(_,A,"point")),Ch(x,"zip215");const D=aA(_),L=_[A-1];D[A-1]=L&-129;const F=Yg(D),B=x?a:n.ORDER;V3("point.y",F,hl,B);const q=c(F*F),R=c(q-Wn),E=c(k*q-T);let{isValid:b,value:f}=l(R,E);if(!b)throw new Error("bad point: invalid y coordinate");const p=(f&Wn)===Wn,w=(L&128)!==0;if(!x&&f===hl&&w)throw new Error("bad point: x=0 and x_0=1");return w!==p&&(f=c(-f)),m.fromAffine({x:f,y:F})}static fromHex(_,x=!1){return m.fromBytes(an("point",_),x)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(_=8,x=!0){return v.createCache(this,_),x||this.multiply(tE),this}assertValidity(){g(this)}equals(_){h(_);const{X:x,Y:A,Z:T}=this,{X:k,Y:D,Z:L}=_,F=c(x*L),B=c(k*T),q=c(A*L),R=c(D*T);return F===B&&q===R}is0(){return this.equals(m.ZERO)}negate(){return new m(c(-this.X),this.Y,this.Z,c(-this.T))}double(){const{a:_}=s,{X:x,Y:A,Z:T}=this,k=c(x*x),D=c(A*A),L=c(tE*c(T*T)),F=c(_*k),B=x+A,q=c(c(B*B)-k-D),R=F+D,E=R-L,b=F-D,f=c(q*E),p=c(R*b),w=c(q*b),N=c(E*R);return new m(f,p,N,w)}add(_){h(_);const{a:x,d:A}=s,{X:T,Y:k,Z:D,T:L}=this,{X:F,Y:B,Z:q,T:R}=_,E=c(T*F),b=c(k*B),f=c(L*A*R),p=c(D*q),w=c((T+k)*(F+B)-E-b),N=p-f,M=p+f,S=c(b-x*E),y=c(w*N),C=c(M*S),I=c(w*S),U=c(N*M);return new m(y,C,U,I)}subtract(_){return this.add(_.negate())}multiply(_){if(!i.isValidNot0(_))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:x,f:A}=v.cached(this,_,T=>th(m,T));return th(m,[x,A])[0]}multiplyUnsafe(_,x=m.ZERO){if(!i.isValid(_))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return _===hl?m.ZERO:this.is0()||_===Wn?this:v.unsafe(this,_,A=>th(m,A),x)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return v.unsafe(this,s.n).is0()}toAffine(_){return d(this,_)}clearCofactor(){return o===Wn?this:this.multiplyUnsafe(o)}toBytes(){const{x:_,y:x}=this.toAffine(),A=n.toBytes(x);return A[A.length-1]|=_&Wn?128:0,A}toHex(){return ph(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(_){return th(m,_)}static msm(_,x){return nO(m,i,_,x)}_setWindowSize(_){this.precompute(_)}toRawBytes(){return this.toBytes()}}m.BASE=new m(s.Gx,s.Gy,Wn,c(s.Gx*s.Gy)),m.ZERO=new m(hl,Wn,Wn,hl),m.Fp=n,m.Fn=i;const v=new rO(m,i.BITS);return m.BASE.precompute(8),m}function Yz(t,e,r={}){if(typeof e!="function")throw new Error('"hash" function param is required');Vm(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=r,{BASE:i,Fp:s,Fn:o}=t,a=r.randomBytes||eI,c=r.adjustScalarBytes||(B=>B),l=r.domain||((B,q,R)=>{if(Ch(R,"phflag"),q.length||R)throw new Error("Contexts/pre-hash are not supported");return B});function u(B){return o.create(Yg(B))}function h(B){const q=A.secretKey;B=an("private key",B,q);const R=an("hashed private key",e(B),2*q),E=c(R.slice(0,q)),b=R.slice(q,2*q),f=u(E);return{head:E,prefix:b,scalar:f}}function d(B){const{head:q,prefix:R,scalar:E}=h(B),b=i.multiply(E),f=b.toBytes();return{head:q,prefix:R,scalar:E,point:b,pointBytes:f}}function g(B){return d(B).pointBytes}function m(B=Uint8Array.of(),...q){const R=Ca(...q);return u(e(l(R,an("context",B),!!n)))}function v(B,q,R={}){B=an("message",B),n&&(B=n(B));const{prefix:E,scalar:b,pointBytes:f}=d(q),p=m(R.context,E,B),w=i.multiply(p).toBytes(),N=m(R.context,w,f,B),M=o.create(p+N*b);if(!o.isValid(M))throw new Error("sign failed: invalid s");const S=Ca(w,o.toBytes(M));return ea(S,A.signature,"result")}const $={zip215:!0};function _(B,q,R,E=$){const{context:b,zip215:f}=E,p=A.signature;B=an("signature",B,p),q=an("message",q),R=an("publicKey",R,A.publicKey),f!==void 0&&Ch(f,"zip215"),n&&(q=n(q));const w=p/2,N=B.subarray(0,w),M=Yg(B.subarray(w,p));let S,y,C;try{S=t.fromBytes(R,f),y=t.fromBytes(N,f),C=i.multiplyUnsafe(M)}catch{return!1}if(!f&&S.isSmallOrder())return!1;const I=m(b,y.toBytes(),S.toBytes(),q);return y.add(S.multiplyUnsafe(I)).subtract(C).clearCofactor().is0()}const x=s.BYTES,A={secretKey:x,publicKey:x,signature:2*x,seed:x};function T(B=a(A.seed)){return ea(B,A.seed,"seed")}function k(B){const q=F.randomSecretKey(B);return{secretKey:q,publicKey:g(q)}}function D(B){return Hm(B)&&B.length===o.BYTES}function L(B,q){try{return!!t.fromBytes(B,q)}catch{return!1}}const F={getExtendedPublicKey:d,randomSecretKey:T,isValidSecretKey:D,isValidPublicKey:L,toMontgomery(B){const{y:q}=t.fromBytes(B),R=A.publicKey,E=R===32;if(!E&&R!==57)throw new Error("only defined for 25519 and 448");const b=E?s.div(Wn+q,Wn-q):s.div(q-Wn,q+Wn);return s.toBytes(b)},toMontgomerySecret(B){const q=A.secretKey;ea(B,q);const R=e(B.subarray(0,q));return c(R).subarray(0,q)},randomPrivateKey:T,precompute(B=8,q=t.BASE){return q.precompute(B,!1)}};return Object.freeze({keygen:k,getPublicKey:g,sign:v,verify:_,utils:F,Point:t,lengths:A})}function Qz(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=Wh(e.n,t.nBitLength,!0),i={Fp:r,Fn:n,uvRatio:t.uvRatio},s={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:i,hash:t.hash,eddsaOpts:s}}function Zz(t,e){const r=e.Point;return Object.assign({},e,{ExtendedPoint:r,CURVE:t,nBitLength:r.Fn.BITS,nByteLength:r.Fn.BYTES})}function Jz(t){const{CURVE:e,curveOpts:r,hash:n,eddsaOpts:i}=Qz(t),s=Gz(e,r),o=Yz(s,n,i);return Zz(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xz=BigInt(1),fA=BigInt(2);BigInt(3);const eq=BigInt(5),tq=BigInt(8),iI=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),sO={p:iI,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:tq,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function rq(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=iI,a=t*t%s*t%s,c=on(a,fA,s)*a%s,l=on(c,Xz,s)*t%s,u=on(l,eq,s)*l%s,h=on(u,e,s)*u%s,d=on(h,r,s)*h%s,g=on(d,n,s)*d%s,m=on(g,i,s)*g%s,v=on(m,i,s)*g%s,$=on(v,e,s)*u%s;return{pow_p_5_8:on($,fA,s)*t%s,b2:a}}function nq(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const pA=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function iq(t,e){const r=iI,n=vn(e*e*e,r),i=vn(n*n*e,r),s=rq(t*i).pow_p_5_8;let o=vn(t*n*s,r);const a=vn(e*o*o,r),c=o,l=vn(o*pA,r),u=a===t,h=a===vn(-t,r),d=a===vn(-t*pA,r);return u&&(o=c),(h||d)&&(o=l),Bz(o,r)&&(o=vn(-o,r)),{isValid:u||h,value:o}}const sq=Wh(sO.p,{isLE:!0}),oq={...sO,Fp:sq,hash:Tz,adjustScalarBytes:nq,uvRatio:iq},Gm=Jz(oq);var sI={exports:{}};const aq={},cq=Object.freeze(Object.defineProperty({__proto__:null,default:aq},Symbol.toStringTag,{value:"Module"})),oI=Um(cq);sI.exports;(function(t){(function(e,r){function n(b,f){if(!b)throw new Error(f||"Assertion failed")}function i(b,f){b.super_=f;var p=function(){};p.prototype=f.prototype,b.prototype=new p,b.prototype.constructor=b}function s(b,f,p){if(s.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&((f==="le"||f==="be")&&(p=f,f=10),this._init(b||0,f||10,p||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=oI.Buffer}catch{}s.isBN=function(f){return f instanceof s?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===s.wordSize&&Array.isArray(f.words)},s.max=function(f,p){return f.cmp(p)>0?f:p},s.min=function(f,p){return f.cmp(p)<0?f:p},s.prototype._init=function(f,p,w){if(typeof f=="number")return this._initNumber(f,p,w);if(typeof f=="object")return this._initArray(f,p,w);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),f=f.toString().replace(/\s+/g,"");var N=0;f[0]==="-"&&(N++,this.negative=1),N<f.length&&(p===16?this._parseHex(f,N,w):(this._parseBase(f,p,N),w==="le"&&this._initArray(this.toArray(),p,w)))},s.prototype._initNumber=function(f,p,w){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(n(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),p,w)},s.prototype._initArray=function(f,p,w){if(n(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var M,S,y=0;if(w==="be")for(N=f.length-1,M=0;N>=0;N-=3)S=f[N]|f[N-1]<<8|f[N-2]<<16,this.words[M]|=S<<y&67108863,this.words[M+1]=S>>>26-y&67108863,y+=24,y>=26&&(y-=26,M++);else if(w==="le")for(N=0,M=0;N<f.length;N+=3)S=f[N]|f[N+1]<<8|f[N+2]<<16,this.words[M]|=S<<y&67108863,this.words[M+1]=S>>>26-y&67108863,y+=24,y>=26&&(y-=26,M++);return this._strip()};function a(b,f){var p=b.charCodeAt(f);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;n(!1,"Invalid character in "+b)}function c(b,f,p){var w=a(b,p);return p-1>=f&&(w|=a(b,p-1)<<4),w}s.prototype._parseHex=function(f,p,w){this.length=Math.ceil((f.length-p)/6),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var M=0,S=0,y;if(w==="be")for(N=f.length-1;N>=p;N-=2)y=c(f,p,N)<<M,this.words[S]|=y&67108863,M>=18?(M-=18,S+=1,this.words[S]|=y>>>26):M+=8;else{var C=f.length-p;for(N=C%2===0?p+1:p;N<f.length;N+=2)y=c(f,p,N)<<M,this.words[S]|=y&67108863,M>=18?(M-=18,S+=1,this.words[S]|=y>>>26):M+=8}this._strip()};function l(b,f,p,w){for(var N=0,M=0,S=Math.min(b.length,p),y=f;y<S;y++){var C=b.charCodeAt(y)-48;N*=w,C>=49?M=C-49+10:C>=17?M=C-17+10:M=C,n(C>=0&&M<w,"Invalid character"),N+=M}return N}s.prototype._parseBase=function(f,p,w){this.words=[0],this.length=1;for(var N=0,M=1;M<=67108863;M*=p)N++;N--,M=M/p|0;for(var S=f.length-w,y=S%N,C=Math.min(S,S-y)+w,I=0,U=w;U<C;U+=N)I=l(f,U,U+N,p),this.imuln(M),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(y!==0){var K=1;for(I=l(f,U,f.length,p),U=0;U<y;U++)K*=p;this.imuln(K),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}this._strip()},s.prototype.copy=function(f){f.words=new Array(this.length);for(var p=0;p<this.length;p++)f.words[p]=this.words[p];f.length=this.length,f.negative=this.negative,f.red=this.red};function u(b,f){b.words=f.words,b.length=f.length,b.negative=f.negative,b.red=f.red}if(s.prototype._move=function(f){u(f,this)},s.prototype.clone=function(){var f=new s(null);return this.copy(f),f},s.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(f,p){f=f||10,p=p|0||1;var w;if(f===16||f==="hex"){w="";for(var N=0,M=0,S=0;S<this.length;S++){var y=this.words[S],C=((y<<N|M)&16777215).toString(16);M=y>>>24-N&16777215,N+=2,N>=26&&(N-=26,S--),M!==0||S!==this.length-1?w=d[6-C.length]+C+w:w=C+w}for(M!==0&&(w=M.toString(16)+w);w.length%p!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(f===(f|0)&&f>=2&&f<=36){var I=g[f],U=m[f];w="";var K=this.clone();for(K.negative=0;!K.isZero();){var V=K.modrn(U).toString(f);K=K.idivn(U),K.isZero()?w=V+w:w=d[I-V.length]+V+w}for(this.isZero()&&(w="0"+w);w.length%p!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(f,p){return this.toArrayLike(o,f,p)}),s.prototype.toArray=function(f,p){return this.toArrayLike(Array,f,p)};var v=function(f,p){return f.allocUnsafe?f.allocUnsafe(p):new f(p)};s.prototype.toArrayLike=function(f,p,w){this._strip();var N=this.byteLength(),M=w||Math.max(1,N);n(N<=M,"byte array longer than desired length"),n(M>0,"Requested array length <= 0");var S=v(f,M),y=p==="le"?"LE":"BE";return this["_toArrayLike"+y](S,N),S},s.prototype._toArrayLikeLE=function(f,p){for(var w=0,N=0,M=0,S=0;M<this.length;M++){var y=this.words[M]<<S|N;f[w++]=y&255,w<f.length&&(f[w++]=y>>8&255),w<f.length&&(f[w++]=y>>16&255),S===6?(w<f.length&&(f[w++]=y>>24&255),N=0,S=0):(N=y>>>24,S+=2)}if(w<f.length)for(f[w++]=N;w<f.length;)f[w++]=0},s.prototype._toArrayLikeBE=function(f,p){for(var w=f.length-1,N=0,M=0,S=0;M<this.length;M++){var y=this.words[M]<<S|N;f[w--]=y&255,w>=0&&(f[w--]=y>>8&255),w>=0&&(f[w--]=y>>16&255),S===6?(w>=0&&(f[w--]=y>>24&255),N=0,S=0):(N=y>>>24,S+=2)}if(w>=0)for(f[w--]=N;w>=0;)f[w--]=0},Math.clz32?s.prototype._countBits=function(f){return 32-Math.clz32(f)}:s.prototype._countBits=function(f){var p=f,w=0;return p>=4096&&(w+=13,p>>>=13),p>=64&&(w+=7,p>>>=7),p>=8&&(w+=4,p>>>=4),p>=2&&(w+=2,p>>>=2),w+p},s.prototype._zeroBits=function(f){if(f===0)return 26;var p=f,w=0;return p&8191||(w+=13,p>>>=13),p&127||(w+=7,p>>>=7),p&15||(w+=4,p>>>=4),p&3||(w+=2,p>>>=2),p&1||w++,w},s.prototype.bitLength=function(){var f=this.words[this.length-1],p=this._countBits(f);return(this.length-1)*26+p};function $(b){for(var f=new Array(b.bitLength()),p=0;p<f.length;p++){var w=p/26|0,N=p%26;f[p]=b.words[w]>>>N&1}return f}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,p=0;p<this.length;p++){var w=this._zeroBits(this.words[p]);if(f+=w,w!==26)break}return f},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},s.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var p=0;p<f.length;p++)this.words[p]=this.words[p]|f.words[p];return this._strip()},s.prototype.ior=function(f){return n((this.negative|f.negative)===0),this.iuor(f)},s.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},s.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},s.prototype.iuand=function(f){var p;this.length>f.length?p=f:p=this;for(var w=0;w<p.length;w++)this.words[w]=this.words[w]&f.words[w];return this.length=p.length,this._strip()},s.prototype.iand=function(f){return n((this.negative|f.negative)===0),this.iuand(f)},s.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},s.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},s.prototype.iuxor=function(f){var p,w;this.length>f.length?(p=this,w=f):(p=f,w=this);for(var N=0;N<w.length;N++)this.words[N]=p.words[N]^w.words[N];if(this!==p)for(;N<p.length;N++)this.words[N]=p.words[N];return this.length=p.length,this._strip()},s.prototype.ixor=function(f){return n((this.negative|f.negative)===0),this.iuxor(f)},s.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},s.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},s.prototype.inotn=function(f){n(typeof f=="number"&&f>=0);var p=Math.ceil(f/26)|0,w=f%26;this._expand(p),w>0&&p--;for(var N=0;N<p;N++)this.words[N]=~this.words[N]&67108863;return w>0&&(this.words[N]=~this.words[N]&67108863>>26-w),this._strip()},s.prototype.notn=function(f){return this.clone().inotn(f)},s.prototype.setn=function(f,p){n(typeof f=="number"&&f>=0);var w=f/26|0,N=f%26;return this._expand(w+1),p?this.words[w]=this.words[w]|1<<N:this.words[w]=this.words[w]&~(1<<N),this._strip()},s.prototype.iadd=function(f){var p;if(this.negative!==0&&f.negative===0)return this.negative=0,p=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,p=this.isub(f),f.negative=1,p._normSign();var w,N;this.length>f.length?(w=this,N=f):(w=f,N=this);for(var M=0,S=0;S<N.length;S++)p=(w.words[S]|0)+(N.words[S]|0)+M,this.words[S]=p&67108863,M=p>>>26;for(;M!==0&&S<w.length;S++)p=(w.words[S]|0)+M,this.words[S]=p&67108863,M=p>>>26;if(this.length=w.length,M!==0)this.words[this.length]=M,this.length++;else if(w!==this)for(;S<w.length;S++)this.words[S]=w.words[S];return this},s.prototype.add=function(f){var p;return f.negative!==0&&this.negative===0?(f.negative=0,p=this.sub(f),f.negative^=1,p):f.negative===0&&this.negative!==0?(this.negative=0,p=f.sub(this),this.negative=1,p):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},s.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var p=this.iadd(f);return f.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var w=this.cmp(f);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var N,M;w>0?(N=this,M=f):(N=f,M=this);for(var S=0,y=0;y<M.length;y++)p=(N.words[y]|0)-(M.words[y]|0)+S,S=p>>26,this.words[y]=p&67108863;for(;S!==0&&y<N.length;y++)p=(N.words[y]|0)+S,S=p>>26,this.words[y]=p&67108863;if(S===0&&y<N.length&&N!==this)for(;y<N.length;y++)this.words[y]=N.words[y];return this.length=Math.max(this.length,y),N!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(f){return this.clone().isub(f)};function _(b,f,p){p.negative=f.negative^b.negative;var w=b.length+f.length|0;p.length=w,w=w-1|0;var N=b.words[0]|0,M=f.words[0]|0,S=N*M,y=S&67108863,C=S/67108864|0;p.words[0]=y;for(var I=1;I<w;I++){for(var U=C>>>26,K=C&67108863,V=Math.min(I,f.length-1),te=Math.max(0,I-b.length+1);te<=V;te++){var se=I-te|0;N=b.words[se]|0,M=f.words[te]|0,S=N*M+K,U+=S/67108864|0,K=S&67108863}p.words[I]=K|0,C=U|0}return C!==0?p.words[I]=C|0:p.length--,p._strip()}var x=function(f,p,w){var N=f.words,M=p.words,S=w.words,y=0,C,I,U,K=N[0]|0,V=K&8191,te=K>>>13,se=N[1]|0,ce=se&8191,ie=se>>>13,ve=N[2]|0,Ne=ve&8191,Ae=ve>>>13,et=N[3]|0,tt=et&8191,je=et>>>13,Vt=N[4]|0,Dt=Vt&8191,Ge=Vt>>>13,jt=N[5]|0,Lt=jt&8191,Le=jt>>>13,ft=N[6]|0,Ct=ft&8191,Ke=ft>>>13,mt=N[7]|0,Ft=mt&8191,j=mt>>>13,P=N[8]|0,O=P&8191,z=P>>>13,G=N[9]|0,Z=G&8191,ee=G>>>13,Ce=M[0]|0,Fe=Ce&8191,Se=Ce>>>13,qe=M[1]|0,Re=qe&8191,We=qe>>>13,dr=M[2]|0,Cr=dr&8191,rt=dr>>>13,sr=M[3]|0,Gt=sr&8191,Qe=sr>>>13,or=M[4]|0,ar=or&8191,Ye=or>>>13,Nr=M[5]|0,Mr=Nr&8191,nt=Nr>>>13,Tr=M[6]|0,$r=Tr&8191,Je=Tr>>>13,cr=M[7]|0,Bt=cr&8191,it=cr>>>13,Pr=M[8]|0,Or=Pr&8191,st=Pr>>>13,kr=M[9]|0,xt=kr&8191,fr=kr>>>13;w.negative=f.negative^p.negative,w.length=19,C=Math.imul(V,Fe),I=Math.imul(V,Se),I=I+Math.imul(te,Fe)|0,U=Math.imul(te,Se);var Ya=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(Ya>>>26)|0,Ya&=67108863,C=Math.imul(ce,Fe),I=Math.imul(ce,Se),I=I+Math.imul(ie,Fe)|0,U=Math.imul(ie,Se),C=C+Math.imul(V,Re)|0,I=I+Math.imul(V,We)|0,I=I+Math.imul(te,Re)|0,U=U+Math.imul(te,We)|0;var Qa=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(Qa>>>26)|0,Qa&=67108863,C=Math.imul(Ne,Fe),I=Math.imul(Ne,Se),I=I+Math.imul(Ae,Fe)|0,U=Math.imul(Ae,Se),C=C+Math.imul(ce,Re)|0,I=I+Math.imul(ce,We)|0,I=I+Math.imul(ie,Re)|0,U=U+Math.imul(ie,We)|0,C=C+Math.imul(V,Cr)|0,I=I+Math.imul(V,rt)|0,I=I+Math.imul(te,Cr)|0,U=U+Math.imul(te,rt)|0;var Za=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(Za>>>26)|0,Za&=67108863,C=Math.imul(tt,Fe),I=Math.imul(tt,Se),I=I+Math.imul(je,Fe)|0,U=Math.imul(je,Se),C=C+Math.imul(Ne,Re)|0,I=I+Math.imul(Ne,We)|0,I=I+Math.imul(Ae,Re)|0,U=U+Math.imul(Ae,We)|0,C=C+Math.imul(ce,Cr)|0,I=I+Math.imul(ce,rt)|0,I=I+Math.imul(ie,Cr)|0,U=U+Math.imul(ie,rt)|0,C=C+Math.imul(V,Gt)|0,I=I+Math.imul(V,Qe)|0,I=I+Math.imul(te,Gt)|0,U=U+Math.imul(te,Qe)|0;var Ja=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(Ja>>>26)|0,Ja&=67108863,C=Math.imul(Dt,Fe),I=Math.imul(Dt,Se),I=I+Math.imul(Ge,Fe)|0,U=Math.imul(Ge,Se),C=C+Math.imul(tt,Re)|0,I=I+Math.imul(tt,We)|0,I=I+Math.imul(je,Re)|0,U=U+Math.imul(je,We)|0,C=C+Math.imul(Ne,Cr)|0,I=I+Math.imul(Ne,rt)|0,I=I+Math.imul(Ae,Cr)|0,U=U+Math.imul(Ae,rt)|0,C=C+Math.imul(ce,Gt)|0,I=I+Math.imul(ce,Qe)|0,I=I+Math.imul(ie,Gt)|0,U=U+Math.imul(ie,Qe)|0,C=C+Math.imul(V,ar)|0,I=I+Math.imul(V,Ye)|0,I=I+Math.imul(te,ar)|0,U=U+Math.imul(te,Ye)|0;var Ki=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(Ki>>>26)|0,Ki&=67108863,C=Math.imul(Lt,Fe),I=Math.imul(Lt,Se),I=I+Math.imul(Le,Fe)|0,U=Math.imul(Le,Se),C=C+Math.imul(Dt,Re)|0,I=I+Math.imul(Dt,We)|0,I=I+Math.imul(Ge,Re)|0,U=U+Math.imul(Ge,We)|0,C=C+Math.imul(tt,Cr)|0,I=I+Math.imul(tt,rt)|0,I=I+Math.imul(je,Cr)|0,U=U+Math.imul(je,rt)|0,C=C+Math.imul(Ne,Gt)|0,I=I+Math.imul(Ne,Qe)|0,I=I+Math.imul(Ae,Gt)|0,U=U+Math.imul(Ae,Qe)|0,C=C+Math.imul(ce,ar)|0,I=I+Math.imul(ce,Ye)|0,I=I+Math.imul(ie,ar)|0,U=U+Math.imul(ie,Ye)|0,C=C+Math.imul(V,Mr)|0,I=I+Math.imul(V,nt)|0,I=I+Math.imul(te,Mr)|0,U=U+Math.imul(te,nt)|0;var Xa=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(Xa>>>26)|0,Xa&=67108863,C=Math.imul(Ct,Fe),I=Math.imul(Ct,Se),I=I+Math.imul(Ke,Fe)|0,U=Math.imul(Ke,Se),C=C+Math.imul(Lt,Re)|0,I=I+Math.imul(Lt,We)|0,I=I+Math.imul(Le,Re)|0,U=U+Math.imul(Le,We)|0,C=C+Math.imul(Dt,Cr)|0,I=I+Math.imul(Dt,rt)|0,I=I+Math.imul(Ge,Cr)|0,U=U+Math.imul(Ge,rt)|0,C=C+Math.imul(tt,Gt)|0,I=I+Math.imul(tt,Qe)|0,I=I+Math.imul(je,Gt)|0,U=U+Math.imul(je,Qe)|0,C=C+Math.imul(Ne,ar)|0,I=I+Math.imul(Ne,Ye)|0,I=I+Math.imul(Ae,ar)|0,U=U+Math.imul(Ae,Ye)|0,C=C+Math.imul(ce,Mr)|0,I=I+Math.imul(ce,nt)|0,I=I+Math.imul(ie,Mr)|0,U=U+Math.imul(ie,nt)|0,C=C+Math.imul(V,$r)|0,I=I+Math.imul(V,Je)|0,I=I+Math.imul(te,$r)|0,U=U+Math.imul(te,Je)|0;var ec=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(ec>>>26)|0,ec&=67108863,C=Math.imul(Ft,Fe),I=Math.imul(Ft,Se),I=I+Math.imul(j,Fe)|0,U=Math.imul(j,Se),C=C+Math.imul(Ct,Re)|0,I=I+Math.imul(Ct,We)|0,I=I+Math.imul(Ke,Re)|0,U=U+Math.imul(Ke,We)|0,C=C+Math.imul(Lt,Cr)|0,I=I+Math.imul(Lt,rt)|0,I=I+Math.imul(Le,Cr)|0,U=U+Math.imul(Le,rt)|0,C=C+Math.imul(Dt,Gt)|0,I=I+Math.imul(Dt,Qe)|0,I=I+Math.imul(Ge,Gt)|0,U=U+Math.imul(Ge,Qe)|0,C=C+Math.imul(tt,ar)|0,I=I+Math.imul(tt,Ye)|0,I=I+Math.imul(je,ar)|0,U=U+Math.imul(je,Ye)|0,C=C+Math.imul(Ne,Mr)|0,I=I+Math.imul(Ne,nt)|0,I=I+Math.imul(Ae,Mr)|0,U=U+Math.imul(Ae,nt)|0,C=C+Math.imul(ce,$r)|0,I=I+Math.imul(ce,Je)|0,I=I+Math.imul(ie,$r)|0,U=U+Math.imul(ie,Je)|0,C=C+Math.imul(V,Bt)|0,I=I+Math.imul(V,it)|0,I=I+Math.imul(te,Bt)|0,U=U+Math.imul(te,it)|0;var tc=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(tc>>>26)|0,tc&=67108863,C=Math.imul(O,Fe),I=Math.imul(O,Se),I=I+Math.imul(z,Fe)|0,U=Math.imul(z,Se),C=C+Math.imul(Ft,Re)|0,I=I+Math.imul(Ft,We)|0,I=I+Math.imul(j,Re)|0,U=U+Math.imul(j,We)|0,C=C+Math.imul(Ct,Cr)|0,I=I+Math.imul(Ct,rt)|0,I=I+Math.imul(Ke,Cr)|0,U=U+Math.imul(Ke,rt)|0,C=C+Math.imul(Lt,Gt)|0,I=I+Math.imul(Lt,Qe)|0,I=I+Math.imul(Le,Gt)|0,U=U+Math.imul(Le,Qe)|0,C=C+Math.imul(Dt,ar)|0,I=I+Math.imul(Dt,Ye)|0,I=I+Math.imul(Ge,ar)|0,U=U+Math.imul(Ge,Ye)|0,C=C+Math.imul(tt,Mr)|0,I=I+Math.imul(tt,nt)|0,I=I+Math.imul(je,Mr)|0,U=U+Math.imul(je,nt)|0,C=C+Math.imul(Ne,$r)|0,I=I+Math.imul(Ne,Je)|0,I=I+Math.imul(Ae,$r)|0,U=U+Math.imul(Ae,Je)|0,C=C+Math.imul(ce,Bt)|0,I=I+Math.imul(ce,it)|0,I=I+Math.imul(ie,Bt)|0,U=U+Math.imul(ie,it)|0,C=C+Math.imul(V,Or)|0,I=I+Math.imul(V,st)|0,I=I+Math.imul(te,Or)|0,U=U+Math.imul(te,st)|0;var rc=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(rc>>>26)|0,rc&=67108863,C=Math.imul(Z,Fe),I=Math.imul(Z,Se),I=I+Math.imul(ee,Fe)|0,U=Math.imul(ee,Se),C=C+Math.imul(O,Re)|0,I=I+Math.imul(O,We)|0,I=I+Math.imul(z,Re)|0,U=U+Math.imul(z,We)|0,C=C+Math.imul(Ft,Cr)|0,I=I+Math.imul(Ft,rt)|0,I=I+Math.imul(j,Cr)|0,U=U+Math.imul(j,rt)|0,C=C+Math.imul(Ct,Gt)|0,I=I+Math.imul(Ct,Qe)|0,I=I+Math.imul(Ke,Gt)|0,U=U+Math.imul(Ke,Qe)|0,C=C+Math.imul(Lt,ar)|0,I=I+Math.imul(Lt,Ye)|0,I=I+Math.imul(Le,ar)|0,U=U+Math.imul(Le,Ye)|0,C=C+Math.imul(Dt,Mr)|0,I=I+Math.imul(Dt,nt)|0,I=I+Math.imul(Ge,Mr)|0,U=U+Math.imul(Ge,nt)|0,C=C+Math.imul(tt,$r)|0,I=I+Math.imul(tt,Je)|0,I=I+Math.imul(je,$r)|0,U=U+Math.imul(je,Je)|0,C=C+Math.imul(Ne,Bt)|0,I=I+Math.imul(Ne,it)|0,I=I+Math.imul(Ae,Bt)|0,U=U+Math.imul(Ae,it)|0,C=C+Math.imul(ce,Or)|0,I=I+Math.imul(ce,st)|0,I=I+Math.imul(ie,Or)|0,U=U+Math.imul(ie,st)|0,C=C+Math.imul(V,xt)|0,I=I+Math.imul(V,fr)|0,I=I+Math.imul(te,xt)|0,U=U+Math.imul(te,fr)|0;var nc=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(nc>>>26)|0,nc&=67108863,C=Math.imul(Z,Re),I=Math.imul(Z,We),I=I+Math.imul(ee,Re)|0,U=Math.imul(ee,We),C=C+Math.imul(O,Cr)|0,I=I+Math.imul(O,rt)|0,I=I+Math.imul(z,Cr)|0,U=U+Math.imul(z,rt)|0,C=C+Math.imul(Ft,Gt)|0,I=I+Math.imul(Ft,Qe)|0,I=I+Math.imul(j,Gt)|0,U=U+Math.imul(j,Qe)|0,C=C+Math.imul(Ct,ar)|0,I=I+Math.imul(Ct,Ye)|0,I=I+Math.imul(Ke,ar)|0,U=U+Math.imul(Ke,Ye)|0,C=C+Math.imul(Lt,Mr)|0,I=I+Math.imul(Lt,nt)|0,I=I+Math.imul(Le,Mr)|0,U=U+Math.imul(Le,nt)|0,C=C+Math.imul(Dt,$r)|0,I=I+Math.imul(Dt,Je)|0,I=I+Math.imul(Ge,$r)|0,U=U+Math.imul(Ge,Je)|0,C=C+Math.imul(tt,Bt)|0,I=I+Math.imul(tt,it)|0,I=I+Math.imul(je,Bt)|0,U=U+Math.imul(je,it)|0,C=C+Math.imul(Ne,Or)|0,I=I+Math.imul(Ne,st)|0,I=I+Math.imul(Ae,Or)|0,U=U+Math.imul(Ae,st)|0,C=C+Math.imul(ce,xt)|0,I=I+Math.imul(ce,fr)|0,I=I+Math.imul(ie,xt)|0,U=U+Math.imul(ie,fr)|0;var so=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(so>>>26)|0,so&=67108863,C=Math.imul(Z,Cr),I=Math.imul(Z,rt),I=I+Math.imul(ee,Cr)|0,U=Math.imul(ee,rt),C=C+Math.imul(O,Gt)|0,I=I+Math.imul(O,Qe)|0,I=I+Math.imul(z,Gt)|0,U=U+Math.imul(z,Qe)|0,C=C+Math.imul(Ft,ar)|0,I=I+Math.imul(Ft,Ye)|0,I=I+Math.imul(j,ar)|0,U=U+Math.imul(j,Ye)|0,C=C+Math.imul(Ct,Mr)|0,I=I+Math.imul(Ct,nt)|0,I=I+Math.imul(Ke,Mr)|0,U=U+Math.imul(Ke,nt)|0,C=C+Math.imul(Lt,$r)|0,I=I+Math.imul(Lt,Je)|0,I=I+Math.imul(Le,$r)|0,U=U+Math.imul(Le,Je)|0,C=C+Math.imul(Dt,Bt)|0,I=I+Math.imul(Dt,it)|0,I=I+Math.imul(Ge,Bt)|0,U=U+Math.imul(Ge,it)|0,C=C+Math.imul(tt,Or)|0,I=I+Math.imul(tt,st)|0,I=I+Math.imul(je,Or)|0,U=U+Math.imul(je,st)|0,C=C+Math.imul(Ne,xt)|0,I=I+Math.imul(Ne,fr)|0,I=I+Math.imul(Ae,xt)|0,U=U+Math.imul(Ae,fr)|0;var ic=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(ic>>>26)|0,ic&=67108863,C=Math.imul(Z,Gt),I=Math.imul(Z,Qe),I=I+Math.imul(ee,Gt)|0,U=Math.imul(ee,Qe),C=C+Math.imul(O,ar)|0,I=I+Math.imul(O,Ye)|0,I=I+Math.imul(z,ar)|0,U=U+Math.imul(z,Ye)|0,C=C+Math.imul(Ft,Mr)|0,I=I+Math.imul(Ft,nt)|0,I=I+Math.imul(j,Mr)|0,U=U+Math.imul(j,nt)|0,C=C+Math.imul(Ct,$r)|0,I=I+Math.imul(Ct,Je)|0,I=I+Math.imul(Ke,$r)|0,U=U+Math.imul(Ke,Je)|0,C=C+Math.imul(Lt,Bt)|0,I=I+Math.imul(Lt,it)|0,I=I+Math.imul(Le,Bt)|0,U=U+Math.imul(Le,it)|0,C=C+Math.imul(Dt,Or)|0,I=I+Math.imul(Dt,st)|0,I=I+Math.imul(Ge,Or)|0,U=U+Math.imul(Ge,st)|0,C=C+Math.imul(tt,xt)|0,I=I+Math.imul(tt,fr)|0,I=I+Math.imul(je,xt)|0,U=U+Math.imul(je,fr)|0;var sc=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(sc>>>26)|0,sc&=67108863,C=Math.imul(Z,ar),I=Math.imul(Z,Ye),I=I+Math.imul(ee,ar)|0,U=Math.imul(ee,Ye),C=C+Math.imul(O,Mr)|0,I=I+Math.imul(O,nt)|0,I=I+Math.imul(z,Mr)|0,U=U+Math.imul(z,nt)|0,C=C+Math.imul(Ft,$r)|0,I=I+Math.imul(Ft,Je)|0,I=I+Math.imul(j,$r)|0,U=U+Math.imul(j,Je)|0,C=C+Math.imul(Ct,Bt)|0,I=I+Math.imul(Ct,it)|0,I=I+Math.imul(Ke,Bt)|0,U=U+Math.imul(Ke,it)|0,C=C+Math.imul(Lt,Or)|0,I=I+Math.imul(Lt,st)|0,I=I+Math.imul(Le,Or)|0,U=U+Math.imul(Le,st)|0,C=C+Math.imul(Dt,xt)|0,I=I+Math.imul(Dt,fr)|0,I=I+Math.imul(Ge,xt)|0,U=U+Math.imul(Ge,fr)|0;var Ai=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(Ai>>>26)|0,Ai&=67108863,C=Math.imul(Z,Mr),I=Math.imul(Z,nt),I=I+Math.imul(ee,Mr)|0,U=Math.imul(ee,nt),C=C+Math.imul(O,$r)|0,I=I+Math.imul(O,Je)|0,I=I+Math.imul(z,$r)|0,U=U+Math.imul(z,Je)|0,C=C+Math.imul(Ft,Bt)|0,I=I+Math.imul(Ft,it)|0,I=I+Math.imul(j,Bt)|0,U=U+Math.imul(j,it)|0,C=C+Math.imul(Ct,Or)|0,I=I+Math.imul(Ct,st)|0,I=I+Math.imul(Ke,Or)|0,U=U+Math.imul(Ke,st)|0,C=C+Math.imul(Lt,xt)|0,I=I+Math.imul(Lt,fr)|0,I=I+Math.imul(Le,xt)|0,U=U+Math.imul(Le,fr)|0;var oc=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(oc>>>26)|0,oc&=67108863,C=Math.imul(Z,$r),I=Math.imul(Z,Je),I=I+Math.imul(ee,$r)|0,U=Math.imul(ee,Je),C=C+Math.imul(O,Bt)|0,I=I+Math.imul(O,it)|0,I=I+Math.imul(z,Bt)|0,U=U+Math.imul(z,it)|0,C=C+Math.imul(Ft,Or)|0,I=I+Math.imul(Ft,st)|0,I=I+Math.imul(j,Or)|0,U=U+Math.imul(j,st)|0,C=C+Math.imul(Ct,xt)|0,I=I+Math.imul(Ct,fr)|0,I=I+Math.imul(Ke,xt)|0,U=U+Math.imul(Ke,fr)|0;var ac=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(ac>>>26)|0,ac&=67108863,C=Math.imul(Z,Bt),I=Math.imul(Z,it),I=I+Math.imul(ee,Bt)|0,U=Math.imul(ee,it),C=C+Math.imul(O,Or)|0,I=I+Math.imul(O,st)|0,I=I+Math.imul(z,Or)|0,U=U+Math.imul(z,st)|0,C=C+Math.imul(Ft,xt)|0,I=I+Math.imul(Ft,fr)|0,I=I+Math.imul(j,xt)|0,U=U+Math.imul(j,fr)|0;var cc=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(cc>>>26)|0,cc&=67108863,C=Math.imul(Z,Or),I=Math.imul(Z,st),I=I+Math.imul(ee,Or)|0,U=Math.imul(ee,st),C=C+Math.imul(O,xt)|0,I=I+Math.imul(O,fr)|0,I=I+Math.imul(z,xt)|0,U=U+Math.imul(z,fr)|0;var e0=(y+C|0)+((I&8191)<<13)|0;y=(U+(I>>>13)|0)+(e0>>>26)|0,e0&=67108863,C=Math.imul(Z,xt),I=Math.imul(Z,fr),I=I+Math.imul(ee,xt)|0,U=Math.imul(ee,fr);var t0=(y+C|0)+((I&8191)<<13)|0;return y=(U+(I>>>13)|0)+(t0>>>26)|0,t0&=67108863,S[0]=Ya,S[1]=Qa,S[2]=Za,S[3]=Ja,S[4]=Ki,S[5]=Xa,S[6]=ec,S[7]=tc,S[8]=rc,S[9]=nc,S[10]=so,S[11]=ic,S[12]=sc,S[13]=Ai,S[14]=oc,S[15]=ac,S[16]=cc,S[17]=e0,S[18]=t0,y!==0&&(S[19]=y,w.length++),w};Math.imul||(x=_);function A(b,f,p){p.negative=f.negative^b.negative,p.length=b.length+f.length;for(var w=0,N=0,M=0;M<p.length-1;M++){var S=N;N=0;for(var y=w&67108863,C=Math.min(M,f.length-1),I=Math.max(0,M-b.length+1);I<=C;I++){var U=M-I,K=b.words[U]|0,V=f.words[I]|0,te=K*V,se=te&67108863;S=S+(te/67108864|0)|0,se=se+y|0,y=se&67108863,S=S+(se>>>26)|0,N+=S>>>26,S&=67108863}p.words[M]=y,w=S,S=N}return w!==0?p.words[M]=w:p.length--,p._strip()}function T(b,f,p){return A(b,f,p)}s.prototype.mulTo=function(f,p){var w,N=this.length+f.length;return this.length===10&&f.length===10?w=x(this,f,p):N<63?w=_(this,f,p):N<1024?w=A(this,f,p):w=T(this,f,p),w},s.prototype.mul=function(f){var p=new s(null);return p.words=new Array(this.length+f.length),this.mulTo(f,p)},s.prototype.mulf=function(f){var p=new s(null);return p.words=new Array(this.length+f.length),T(this,f,p)},s.prototype.imul=function(f){return this.clone().mulTo(f,this)},s.prototype.imuln=function(f){var p=f<0;p&&(f=-f),n(typeof f=="number"),n(f<67108864);for(var w=0,N=0;N<this.length;N++){var M=(this.words[N]|0)*f,S=(M&67108863)+(w&67108863);w>>=26,w+=M/67108864|0,w+=S>>>26,this.words[N]=S&67108863}return w!==0&&(this.words[N]=w,this.length++),this.length=f===0?1:this.length,p?this.ineg():this},s.prototype.muln=function(f){return this.clone().imuln(f)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(f){var p=$(f);if(p.length===0)return new s(1);for(var w=this,N=0;N<p.length&&p[N]===0;N++,w=w.sqr());if(++N<p.length)for(var M=w.sqr();N<p.length;N++,M=M.sqr())p[N]!==0&&(w=w.mul(M));return w},s.prototype.iushln=function(f){n(typeof f=="number"&&f>=0);var p=f%26,w=(f-p)/26,N=67108863>>>26-p<<26-p,M;if(p!==0){var S=0;for(M=0;M<this.length;M++){var y=this.words[M]&N,C=(this.words[M]|0)-y<<p;this.words[M]=C|S,S=y>>>26-p}S&&(this.words[M]=S,this.length++)}if(w!==0){for(M=this.length-1;M>=0;M--)this.words[M+w]=this.words[M];for(M=0;M<w;M++)this.words[M]=0;this.length+=w}return this._strip()},s.prototype.ishln=function(f){return n(this.negative===0),this.iushln(f)},s.prototype.iushrn=function(f,p,w){n(typeof f=="number"&&f>=0);var N;p?N=(p-p%26)/26:N=0;var M=f%26,S=Math.min((f-M)/26,this.length),y=67108863^67108863>>>M<<M,C=w;if(N-=S,N=Math.max(0,N),C){for(var I=0;I<S;I++)C.words[I]=this.words[I];C.length=S}if(S!==0)if(this.length>S)for(this.length-=S,I=0;I<this.length;I++)this.words[I]=this.words[I+S];else this.words[0]=0,this.length=1;var U=0;for(I=this.length-1;I>=0&&(U!==0||I>=N);I--){var K=this.words[I]|0;this.words[I]=U<<26-M|K>>>M,U=K&y}return C&&U!==0&&(C.words[C.length++]=U),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(f,p,w){return n(this.negative===0),this.iushrn(f,p,w)},s.prototype.shln=function(f){return this.clone().ishln(f)},s.prototype.ushln=function(f){return this.clone().iushln(f)},s.prototype.shrn=function(f){return this.clone().ishrn(f)},s.prototype.ushrn=function(f){return this.clone().iushrn(f)},s.prototype.testn=function(f){n(typeof f=="number"&&f>=0);var p=f%26,w=(f-p)/26,N=1<<p;if(this.length<=w)return!1;var M=this.words[w];return!!(M&N)},s.prototype.imaskn=function(f){n(typeof f=="number"&&f>=0);var p=f%26,w=(f-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(p!==0&&w++,this.length=Math.min(w,this.length),p!==0){var N=67108863^67108863>>>p<<p;this.words[this.length-1]&=N}return this._strip()},s.prototype.maskn=function(f){return this.clone().imaskn(f)},s.prototype.iaddn=function(f){return n(typeof f=="number"),n(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<=f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},s.prototype._iaddn=function(f){this.words[0]+=f;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(f){if(n(typeof f=="number"),n(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},s.prototype.addn=function(f){return this.clone().iaddn(f)},s.prototype.subn=function(f){return this.clone().isubn(f)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(f,p,w){var N=f.length+w,M;this._expand(N);var S,y=0;for(M=0;M<f.length;M++){S=(this.words[M+w]|0)+y;var C=(f.words[M]|0)*p;S-=C&67108863,y=(S>>26)-(C/67108864|0),this.words[M+w]=S&67108863}for(;M<this.length-w;M++)S=(this.words[M+w]|0)+y,y=S>>26,this.words[M+w]=S&67108863;if(y===0)return this._strip();for(n(y===-1),y=0,M=0;M<this.length;M++)S=-(this.words[M]|0)+y,y=S>>26,this.words[M]=S&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(f,p){var w=this.length-f.length,N=this.clone(),M=f,S=M.words[M.length-1]|0,y=this._countBits(S);w=26-y,w!==0&&(M=M.ushln(w),N.iushln(w),S=M.words[M.length-1]|0);var C=N.length-M.length,I;if(p!=="mod"){I=new s(null),I.length=C+1,I.words=new Array(I.length);for(var U=0;U<I.length;U++)I.words[U]=0}var K=N.clone()._ishlnsubmul(M,1,C);K.negative===0&&(N=K,I&&(I.words[C]=1));for(var V=C-1;V>=0;V--){var te=(N.words[M.length+V]|0)*67108864+(N.words[M.length+V-1]|0);for(te=Math.min(te/S|0,67108863),N._ishlnsubmul(M,te,V);N.negative!==0;)te--,N.negative=0,N._ishlnsubmul(M,1,V),N.isZero()||(N.negative^=1);I&&(I.words[V]=te)}return I&&I._strip(),N._strip(),p!=="div"&&w!==0&&N.iushrn(w),{div:I||null,mod:N}},s.prototype.divmod=function(f,p,w){if(n(!f.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var N,M,S;return this.negative!==0&&f.negative===0?(S=this.neg().divmod(f,p),p!=="mod"&&(N=S.div.neg()),p!=="div"&&(M=S.mod.neg(),w&&M.negative!==0&&M.iadd(f)),{div:N,mod:M}):this.negative===0&&f.negative!==0?(S=this.divmod(f.neg(),p),p!=="mod"&&(N=S.div.neg()),{div:N,mod:S.mod}):this.negative&f.negative?(S=this.neg().divmod(f.neg(),p),p!=="div"&&(M=S.mod.neg(),w&&M.negative!==0&&M.isub(f)),{div:S.div,mod:M}):f.length>this.length||this.cmp(f)<0?{div:new s(0),mod:this}:f.length===1?p==="div"?{div:this.divn(f.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modrn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new s(this.modrn(f.words[0]))}:this._wordDiv(f,p)},s.prototype.div=function(f){return this.divmod(f,"div",!1).div},s.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},s.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},s.prototype.divRound=function(f){var p=this.divmod(f);if(p.mod.isZero())return p.div;var w=p.div.negative!==0?p.mod.isub(f):p.mod,N=f.ushrn(1),M=f.andln(1),S=w.cmp(N);return S<0||M===1&&S===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modrn=function(f){var p=f<0;p&&(f=-f),n(f<=67108863);for(var w=(1<<26)%f,N=0,M=this.length-1;M>=0;M--)N=(w*N+(this.words[M]|0))%f;return p?-N:N},s.prototype.modn=function(f){return this.modrn(f)},s.prototype.idivn=function(f){var p=f<0;p&&(f=-f),n(f<=67108863);for(var w=0,N=this.length-1;N>=0;N--){var M=(this.words[N]|0)+w*67108864;this.words[N]=M/f|0,w=M%f}return this._strip(),p?this.ineg():this},s.prototype.divn=function(f){return this.clone().idivn(f)},s.prototype.egcd=function(f){n(f.negative===0),n(!f.isZero());var p=this,w=f.clone();p.negative!==0?p=p.umod(f):p=p.clone();for(var N=new s(1),M=new s(0),S=new s(0),y=new s(1),C=0;p.isEven()&&w.isEven();)p.iushrn(1),w.iushrn(1),++C;for(var I=w.clone(),U=p.clone();!p.isZero();){for(var K=0,V=1;!(p.words[0]&V)&&K<26;++K,V<<=1);if(K>0)for(p.iushrn(K);K-- >0;)(N.isOdd()||M.isOdd())&&(N.iadd(I),M.isub(U)),N.iushrn(1),M.iushrn(1);for(var te=0,se=1;!(w.words[0]&se)&&te<26;++te,se<<=1);if(te>0)for(w.iushrn(te);te-- >0;)(S.isOdd()||y.isOdd())&&(S.iadd(I),y.isub(U)),S.iushrn(1),y.iushrn(1);p.cmp(w)>=0?(p.isub(w),N.isub(S),M.isub(y)):(w.isub(p),S.isub(N),y.isub(M))}return{a:S,b:y,gcd:w.iushln(C)}},s.prototype._invmp=function(f){n(f.negative===0),n(!f.isZero());var p=this,w=f.clone();p.negative!==0?p=p.umod(f):p=p.clone();for(var N=new s(1),M=new s(0),S=w.clone();p.cmpn(1)>0&&w.cmpn(1)>0;){for(var y=0,C=1;!(p.words[0]&C)&&y<26;++y,C<<=1);if(y>0)for(p.iushrn(y);y-- >0;)N.isOdd()&&N.iadd(S),N.iushrn(1);for(var I=0,U=1;!(w.words[0]&U)&&I<26;++I,U<<=1);if(I>0)for(w.iushrn(I);I-- >0;)M.isOdd()&&M.iadd(S),M.iushrn(1);p.cmp(w)>=0?(p.isub(w),N.isub(M)):(w.isub(p),M.isub(N))}var K;return p.cmpn(1)===0?K=N:K=M,K.cmpn(0)<0&&K.iadd(f),K},s.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var p=this.clone(),w=f.clone();p.negative=0,w.negative=0;for(var N=0;p.isEven()&&w.isEven();N++)p.iushrn(1),w.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;w.isEven();)w.iushrn(1);var M=p.cmp(w);if(M<0){var S=p;p=w,w=S}else if(M===0||w.cmpn(1)===0)break;p.isub(w)}while(!0);return w.iushln(N)},s.prototype.invm=function(f){return this.egcd(f).a.umod(f)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(f){return this.words[0]&f},s.prototype.bincn=function(f){n(typeof f=="number");var p=f%26,w=(f-p)/26,N=1<<p;if(this.length<=w)return this._expand(w+1),this.words[w]|=N,this;for(var M=N,S=w;M!==0&&S<this.length;S++){var y=this.words[S]|0;y+=M,M=y>>>26,y&=67108863,this.words[S]=y}return M!==0&&(this.words[S]=M,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(f){var p=f<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var w;if(this.length>1)w=1;else{p&&(f=-f),n(f<=67108863,"Number is too big");var N=this.words[0]|0;w=N===f?0:N<f?-1:1}return this.negative!==0?-w|0:w},s.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var p=this.ucmp(f);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var p=0,w=this.length-1;w>=0;w--){var N=this.words[w]|0,M=f.words[w]|0;if(N!==M){N<M?p=-1:N>M&&(p=1);break}}return p},s.prototype.gtn=function(f){return this.cmpn(f)===1},s.prototype.gt=function(f){return this.cmp(f)===1},s.prototype.gten=function(f){return this.cmpn(f)>=0},s.prototype.gte=function(f){return this.cmp(f)>=0},s.prototype.ltn=function(f){return this.cmpn(f)===-1},s.prototype.lt=function(f){return this.cmp(f)===-1},s.prototype.lten=function(f){return this.cmpn(f)<=0},s.prototype.lte=function(f){return this.cmp(f)<=0},s.prototype.eqn=function(f){return this.cmpn(f)===0},s.prototype.eq=function(f){return this.cmp(f)===0},s.red=function(f){return new R(f)},s.prototype.toRed=function(f){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(f){return this.red=f,this},s.prototype.forceRed=function(f){return n(!this.red,"Already a number in reduction context"),this._forceRed(f)},s.prototype.redAdd=function(f){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},s.prototype.redIAdd=function(f){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},s.prototype.redSub=function(f){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},s.prototype.redISub=function(f){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},s.prototype.redShl=function(f){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},s.prototype.redMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},s.prototype.redIMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(f){return n(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var k={k256:null,p224:null,p192:null,p25519:null};function D(b,f){this.name=b,this.p=new s(f,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}D.prototype._tmp=function(){var f=new s(null);return f.words=new Array(Math.ceil(this.n/13)),f},D.prototype.ireduce=function(f){var p=f,w;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),w=p.bitLength();while(w>this.n);var N=w<this.n?-1:p.ucmp(this.p);return N===0?(p.words[0]=0,p.length=1):N>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},D.prototype.split=function(f,p){f.iushrn(this.n,0,p)},D.prototype.imulK=function(f){return f.imul(this.k)};function L(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(L,D),L.prototype.split=function(f,p){for(var w=4194303,N=Math.min(f.length,9),M=0;M<N;M++)p.words[M]=f.words[M];if(p.length=N,f.length<=9){f.words[0]=0,f.length=1;return}var S=f.words[9];for(p.words[p.length++]=S&w,M=10;M<f.length;M++){var y=f.words[M]|0;f.words[M-10]=(y&w)<<4|S>>>22,S=y}S>>>=22,f.words[M-10]=S,S===0&&f.length>10?f.length-=10:f.length-=9},L.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var p=0,w=0;w<f.length;w++){var N=f.words[w]|0;p+=N*977,f.words[w]=p&67108863,p=N*64+(p/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function F(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(F,D);function B(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(B,D);function q(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(q,D),q.prototype.imulK=function(f){for(var p=0,w=0;w<f.length;w++){var N=(f.words[w]|0)*19+p,M=N&67108863;N>>>=26,f.words[w]=M,p=N}return p!==0&&(f.words[f.length++]=p),f},s._prime=function(f){if(k[f])return k[f];var p;if(f==="k256")p=new L;else if(f==="p224")p=new F;else if(f==="p192")p=new B;else if(f==="p25519")p=new q;else throw new Error("Unknown prime "+f);return k[f]=p,p};function R(b){if(typeof b=="string"){var f=s._prime(b);this.m=f.p,this.prime=f}else n(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}R.prototype._verify1=function(f){n(f.negative===0,"red works only with positives"),n(f.red,"red works only with red numbers")},R.prototype._verify2=function(f,p){n((f.negative|p.negative)===0,"red works only with positives"),n(f.red&&f.red===p.red,"red works only with red numbers")},R.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):(u(f,f.umod(this.m)._forceRed(this)),f)},R.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},R.prototype.add=function(f,p){this._verify2(f,p);var w=f.add(p);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},R.prototype.iadd=function(f,p){this._verify2(f,p);var w=f.iadd(p);return w.cmp(this.m)>=0&&w.isub(this.m),w},R.prototype.sub=function(f,p){this._verify2(f,p);var w=f.sub(p);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},R.prototype.isub=function(f,p){this._verify2(f,p);var w=f.isub(p);return w.cmpn(0)<0&&w.iadd(this.m),w},R.prototype.shl=function(f,p){return this._verify1(f),this.imod(f.ushln(p))},R.prototype.imul=function(f,p){return this._verify2(f,p),this.imod(f.imul(p))},R.prototype.mul=function(f,p){return this._verify2(f,p),this.imod(f.mul(p))},R.prototype.isqr=function(f){return this.imul(f,f.clone())},R.prototype.sqr=function(f){return this.mul(f,f)},R.prototype.sqrt=function(f){if(f.isZero())return f.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var w=this.m.add(new s(1)).iushrn(2);return this.pow(f,w)}for(var N=this.m.subn(1),M=0;!N.isZero()&&N.andln(1)===0;)M++,N.iushrn(1);n(!N.isZero());var S=new s(1).toRed(this),y=S.redNeg(),C=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new s(2*I*I).toRed(this);this.pow(I,C).cmp(y)!==0;)I.redIAdd(y);for(var U=this.pow(I,N),K=this.pow(f,N.addn(1).iushrn(1)),V=this.pow(f,N),te=M;V.cmp(S)!==0;){for(var se=V,ce=0;se.cmp(S)!==0;ce++)se=se.redSqr();n(ce<te);var ie=this.pow(U,new s(1).iushln(te-ce-1));K=K.redMul(ie),U=ie.redSqr(),V=V.redMul(U),te=ce}return K},R.prototype.invm=function(f){var p=f._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},R.prototype.pow=function(f,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return f.clone();var w=4,N=new Array(1<<w);N[0]=new s(1).toRed(this),N[1]=f;for(var M=2;M<N.length;M++)N[M]=this.mul(N[M-1],f);var S=N[0],y=0,C=0,I=p.bitLength()%26;for(I===0&&(I=26),M=p.length-1;M>=0;M--){for(var U=p.words[M],K=I-1;K>=0;K--){var V=U>>K&1;if(S!==N[0]&&(S=this.sqr(S)),V===0&&y===0){C=0;continue}y<<=1,y|=V,C++,!(C!==w&&(M!==0||K!==0))&&(S=this.mul(S,N[y]),C=0,y=0)}I=26}return S},R.prototype.convertTo=function(f){var p=f.umod(this.m);return p===f?p.clone():p},R.prototype.convertFrom=function(f){var p=f.clone();return p.red=null,p},s.mont=function(f){return new E(f)};function E(b){R.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(E,R),E.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},E.prototype.convertFrom=function(f){var p=this.imod(f.mul(this.rinv));return p.red=null,p},E.prototype.imul=function(f,p){if(f.isZero()||p.isZero())return f.words[0]=0,f.length=1,f;var w=f.imul(p),N=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=w.isub(N).iushrn(this.shift),S=M;return M.cmp(this.m)>=0?S=M.isub(this.m):M.cmpn(0)<0&&(S=M.iadd(this.m)),S._forceRed(this)},E.prototype.mul=function(f,p){if(f.isZero()||p.isZero())return new s(0)._forceRed(this);var w=f.mul(p),N=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=w.isub(N).iushrn(this.shift),S=M;return M.cmp(this.m)>=0?S=M.isub(this.m):M.cmpn(0)<0&&(S=M.iadd(this.m)),S._forceRed(this)},E.prototype.invm=function(f){var p=this.imod(f._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(t,_r)})(sI);var oO=sI.exports;const gA=Fa(oO);var G3={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Xe,n=r.Buffer;function i(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s);function s(o,a,c){return n(o,a,c)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},s.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=n(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(G3,G3.exports);var aO=G3.exports,Jy=aO.Buffer;function lq(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(g){if((Array.isArray(g)||g instanceof Uint8Array)&&(g=Jy.from(g)),!Jy.isBuffer(g))throw new TypeError("Expected Buffer");if(g.length===0)return"";for(var m=0,v=0,$=0,_=g.length;$!==_&&g[$]===0;)$++,m++;for(var x=(_-$)*l+1>>>0,A=new Uint8Array(x);$!==_;){for(var T=g[$],k=0,D=x-1;(T!==0||k<v)&&D!==-1;D--,k++)T+=256*A[D]>>>0,A[D]=T%o>>>0,T=T/o>>>0;if(T!==0)throw new Error("Non-zero carry");v=k,$++}for(var L=x-v;L!==x&&A[L]===0;)L++;for(var F=a.repeat(m);L<x;++L)F+=t.charAt(A[L]);return F}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return Jy.alloc(0);for(var m=0,v=0,$=0;g[m]===a;)v++,m++;for(var _=(g.length-m)*c+1>>>0,x=new Uint8Array(_);m<g.length;){var A=g.charCodeAt(m);if(A>255)return;var T=e[A];if(T===255)return;for(var k=0,D=_-1;(T!==0||k<$)&&D!==-1;D--,k++)T+=o*x[D]>>>0,x[D]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");$=k,m++}for(var L=_-$;L!==_&&x[L]===0;)L++;var F=Jy.allocUnsafe(v+(_-L));F.fill(0,0,v);for(var B=v;L!==_;)F[B++]=x[L++];return F}function d(g){var m=h(g);if(m)return m;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:h,decode:d}}var uq=lq,hq=uq,dq="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",fq=hq(dq);const mi=Fa(fq),mA=U9;var fi={},Xy=aO.Buffer;function pq(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(g){if((Array.isArray(g)||g instanceof Uint8Array)&&(g=Xy.from(g)),!Xy.isBuffer(g))throw new TypeError("Expected Buffer");if(g.length===0)return"";for(var m=0,v=0,$=0,_=g.length;$!==_&&g[$]===0;)$++,m++;for(var x=(_-$)*l+1>>>0,A=new Uint8Array(x);$!==_;){for(var T=g[$],k=0,D=x-1;(T!==0||k<v)&&D!==-1;D--,k++)T+=256*A[D]>>>0,A[D]=T%o>>>0,T=T/o>>>0;if(T!==0)throw new Error("Non-zero carry");v=k,$++}for(var L=x-v;L!==x&&A[L]===0;)L++;for(var F=a.repeat(m);L<x;++L)F+=t.charAt(A[L]);return F}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return Xy.alloc(0);for(var m=0,v=0,$=0;g[m]===a;)v++,m++;for(var _=(g.length-m)*c+1>>>0,x=new Uint8Array(_);m<g.length;){var A=g.charCodeAt(m);if(A>255)return;var T=e[A];if(T===255)return;for(var k=0,D=_-1;(T!==0||k<$)&&D!==-1;D--,k++)T+=o*x[D]>>>0,x[D]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");$=k,m++}for(var L=_-$;L!==_&&x[L]===0;)L++;var F=Xy.allocUnsafe(v+(_-L));F.fill(0,0,v);for(var B=v;L!==_;)F[B++]=x[L++];return F}function d(g){var m=h(g);if(m)return m;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:h,decode:d}}var gq=pq,mq=gq,yq="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",wq=mq(yq);function Tc(t,e,r){return e<=t&&t<=r}function vv(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function bq(t){for(var e=String(t),r=e.length,n=0,i=[];n<r;){var s=e.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===r-1)i.push(65533);else{var o=t.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=s&1023,c=o&1023;i.push(65536+(a<<10)+c),n+=1}else i.push(65533)}n+=1}return i}function vq(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var fb=-1;function aI(t){this.tokens=[].slice.call(t)}aI.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():fb},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var op=-1;function rE(t,e){if(t)throw TypeError("Decoder error");return e||65533}var pb="utf-8";function gb(t,e){if(!(this instanceof gb))return new gb(t,e);if(t=t!==void 0?String(t).toLowerCase():pb,t!==pb)throw new Error("Encoding not supported. Only utf-8 is supported");e=vv(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}gb.prototype={decode:function(e,r){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),r=vv(r),this._streaming||(this._decoder=new Eq({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var i=new aI(n),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==op);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===op)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),vq(s)}};function mb(t,e){if(!(this instanceof mb))return new mb(t,e);if(t=t!==void 0?String(t).toLowerCase():pb,t!==pb)throw new Error("Encoding not supported. Only utf-8 is supported");e=vv(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}mb.prototype={encode:function(e,r){e=e?String(e):"",r=vv(r),this._streaming||(this._encoder=new _q(this._options)),this._streaming=!!r.stream;for(var n=[],i=new aI(bq(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==op);)Array.isArray(s)?n.push.apply(n,s):n.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==op;)Array.isArray(s)?n.push.apply(n,s):n.push(s);this._encoder=null}return new Uint8Array(n)}};function Eq(t){var e=t.fatal,r=0,n=0,i=0,s=128,o=191;this.handler=function(a,c){if(c===fb&&i!==0)return i=0,rE(e);if(c===fb)return op;if(i===0){if(Tc(c,0,127))return c;if(Tc(c,194,223))i=1,r=c-192;else if(Tc(c,224,239))c===224&&(s=160),c===237&&(o=159),i=2,r=c-224;else if(Tc(c,240,244))c===240&&(s=144),c===244&&(o=143),i=3,r=c-240;else return rE(e);return r=r<<6*i,null}if(!Tc(c,s,o))return r=i=n=0,s=128,o=191,a.prepend(c),rE(e);if(s=128,o=191,n+=1,r+=c-128<<6*(i-n),n!==i)return null;var l=r;return r=i=n=0,l}}function _q(t){t.fatal,this.handler=function(e,r){if(r===fb)return op;if(Tc(r,0,127))return r;var n,i;Tc(r,128,2047)?(n=1,i=192):Tc(r,2048,65535)?(n=2,i=224):Tc(r,65536,1114111)&&(n=3,i=240);for(var s=[(r>>6*n)+i];n>0;){var o=r>>6*(n-1);s.push(128|o&63),n-=1}return s}}const Sq=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:gb,TextEncoder:mb},Symbol.toStringTag,{value:"Module"})),xq=Um(Sq);var Iq=_r&&_r.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Aq=_r&&_r.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),za=_r&&_r.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},Cq=_r&&_r.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&Iq(e,t,r);return Aq(e,t),e},cO=_r&&_r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fi,"__esModule",{value:!0});var lO=fi.deserializeUnchecked=gO=fi.deserialize=pO=fi.serialize=fi.BinaryReader=fi.BinaryWriter=fi.BorshError=fi.baseDecode=fi.baseEncode=void 0;const Ul=cO(oO),uO=cO(wq),Nq=Cq(xq),Mq=typeof TextDecoder!="function"?Nq.TextDecoder:TextDecoder,Tq=new Mq("utf-8",{fatal:!0});function $q(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),uO.default.encode(Buffer.from(t))}fi.baseEncode=$q;function Pq(t){return Buffer.from(uO.default.decode(t))}fi.baseDecode=Pq;const nE=1024;class Ji extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}fi.BorshError=Ji;class hO{constructor(){this.buf=Buffer.alloc(nE),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(nE)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ul.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ul.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ul.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ul.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(nE)]),this.length+=e.length}writeString(e){this.maybeResize();const r=Buffer.from(e,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,r){this.maybeResize(),this.writeU32(e.length);for(const n of e)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}}fi.BinaryWriter=hO;function qa(t,e,r){const n=r.value;r.value=function(...i){try{return n.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Ji("Reached the end of buffer when deserializing")}throw s}}}class Xs{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Ul.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Ul.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Ul.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Ul.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Ji(`Expected buffer length ${e} isn't within bounds`);const r=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,r}readString(){const e=this.readU32(),r=this.readBuffer(e);try{return Tq.decode(r)}catch(n){throw new Ji(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const r=this.readU32(),n=Array();for(let i=0;i<r;++i)n.push(e());return n}}za([qa],Xs.prototype,"readU8",null);za([qa],Xs.prototype,"readU16",null);za([qa],Xs.prototype,"readU32",null);za([qa],Xs.prototype,"readU64",null);za([qa],Xs.prototype,"readU128",null);za([qa],Xs.prototype,"readU256",null);za([qa],Xs.prototype,"readU512",null);za([qa],Xs.prototype,"readString",null);za([qa],Xs.prototype,"readFixedArray",null);za([qa],Xs.prototype,"readArray",null);fi.BinaryReader=Xs;function dO(t){return t.charAt(0).toUpperCase()+t.slice(1)}function qu(t,e,r,n,i){try{if(typeof n=="string")i[`write${dO(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new Ji(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new Ji(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let s=0;s<n[1];s++)qu(t,null,r[s],n[0],i)}else i.writeArray(r,s=>{qu(t,e,s,n[0],i)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?i.writeU8(0):(i.writeU8(1),qu(t,e,r,n.type,i));break}case"map":{i.writeU32(r.size),r.forEach((s,o)=>{qu(t,e,o,n.key,i),qu(t,e,s,n.value,i)});break}default:throw new Ji(`FieldType ${n} unrecognized`)}else fO(t,r,i)}catch(s){throw s instanceof Ji&&s.addToFieldPath(e),s}}function fO(t,e,r){if(typeof e.borshSerialize=="function"){e.borshSerialize(r);return}const n=t.get(e.constructor);if(!n)throw new Ji(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([i,s])=>{qu(t,i,e[i],s,r)});else if(n.kind==="enum"){const i=e[n.field];for(let s=0;s<n.values.length;++s){const[o,a]=n.values[s];if(o===i){r.writeU8(s),qu(t,o,e[o],a,r);break}}}else throw new Ji(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function Oq(t,e,r=hO){const n=new r;return fO(t,e,n),n.toArray()}var pO=fi.serialize=Oq;function Wu(t,e,r,n){try{if(typeof r=="string")return n[`read${dO(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){const i=[];for(let s=0;s<r[1];s++)i.push(Wu(t,null,r[0],n));return i}else return n.readArray(()=>Wu(t,e,r[0],n))}if(r.kind==="option")return n.readU8()?Wu(t,e,r.type,n):void 0;if(r.kind==="map"){let i=new Map;const s=n.readU32();for(let o=0;o<s;o++){const a=Wu(t,e,r.key,n),c=Wu(t,e,r.value,n);i.set(a,c)}return i}return cI(t,r,n)}catch(i){throw i instanceof Ji&&i.addToFieldPath(e),i}}function cI(t,e,r){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(r);const n=t.get(e);if(!n)throw new Ji(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){const i={};for(const[s,o]of t.get(e).fields)i[s]=Wu(t,s,o,r);return new e(i)}if(n.kind==="enum"){const i=r.readU8();if(i>=n.values.length)throw new Ji(`Enum index: ${i} is out of range`);const[s,o]=n.values[i],a=Wu(t,s,o,r);return new e({[s]:a})}throw new Ji(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function kq(t,e,r,n=Xs){const i=new n(r),s=cI(t,e,i);if(i.offset<r.length)throw new Ji(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return s}var gO=fi.deserialize=kq;function Rq(t,e,r,n=Xs){const i=new n(r);return cI(t,e,i)}lO=fi.deserializeUnchecked=Rq;var re={};Object.defineProperty(re,"__esModule",{value:!0});re.s16=re.s8=re.nu64be=re.u48be=re.u40be=re.u32be=re.u24be=re.u16be=li=re.nu64=re.u48=re.u40=De=re.u32=re.u24=vo=re.u16=Ut=re.u8=gh=re.offset=re.greedy=re.Constant=re.UTF8=re.CString=re.Blob=re.Boolean=re.BitField=re.BitStructure=re.VariantLayout=re.Union=re.UnionLayoutDiscriminator=re.UnionDiscriminator=re.Structure=re.Sequence=re.DoubleBE=re.Double=re.FloatBE=re.Float=re.NearInt64BE=re.NearInt64=re.NearUInt64BE=re.NearUInt64=re.IntBE=re.Int=re.UIntBE=re.UInt=re.OffsetLayout=re.GreedyCount=re.ExternalLayout=re.bindConstructorLayout=re.nameWithProperty=re.Layout=re.uint8ArrayToBuffer=re.checkUint8Array=void 0;re.constant=re.utf8=re.cstr=jr=re.blob=re.unionLayoutDiscriminator=re.union=Fi=re.seq=re.bits=Me=re.struct=re.f64be=re.f64=re.f32be=re.f32=re.ns64be=re.s48be=re.s40be=re.s32be=re.s24be=re.s16be=Ls=re.ns64=re.s48=re.s40=re.s32=re.s24=void 0;const lI=Xe;function Pp(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}re.checkUint8Array=Pp;function Ot(t){return Pp(t),lI.Buffer.from(t.buffer,t.byteOffset,t.length)}re.uint8ArrayToBuffer=Ot;class tr{constructor(e,r){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=r}makeDestinationObject(){return{}}getSpan(e,r){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const r=Object.create(this.constructor.prototype);return Object.assign(r,this),r.property=e,r}fromArray(e){}}re.Layout=tr;function uI(t,e){return e.property?t+"["+e.property+"]":t}re.nameWithProperty=uI;function Dq(t,e){if(typeof t!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof tr))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(r,n){return e.encode(this,r,n)},writable:!0}),Object.defineProperty(t,"decode",{value(r,n){return e.decode(r,n)},writable:!0})}re.bindConstructorLayout=Dq;class ws extends tr{isCount(){throw new Error("ExternalLayout is abstract")}}re.ExternalLayout=ws;class mO extends ws{constructor(e=1,r){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,r),this.elementSpan=e}isCount(){return!0}decode(e,r=0){Pp(e);const n=e.length-r;return Math.floor(n/this.elementSpan)}encode(e,r,n){return 0}}re.GreedyCount=mO;class hI extends ws{constructor(e,r=0,n){if(!(e instanceof tr))throw new TypeError("layout must be a Layout");if(!Number.isInteger(r))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=r}isCount(){return this.layout instanceof Ao||this.layout instanceof ia}decode(e,r=0){return this.layout.decode(e,r+this.offset)}encode(e,r,n=0){return this.layout.encode(e,r,n+this.offset)}}re.OffsetLayout=hI;class Ao extends tr{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return Ot(e).readUIntLE(r,this.span)}encode(e,r,n=0){return Ot(r).writeUIntLE(e,n,this.span),this.span}}re.UInt=Ao;class ia extends tr{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return Ot(e).readUIntBE(r,this.span)}encode(e,r,n=0){return Ot(r).writeUIntBE(e,n,this.span),this.span}}re.UIntBE=ia;class Hh extends tr{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return Ot(e).readIntLE(r,this.span)}encode(e,r,n=0){return Ot(r).writeIntLE(e,n,this.span),this.span}}re.Int=Hh;class Op extends tr{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return Ot(e).readIntBE(r,this.span)}encode(e,r,n=0){return Ot(r).writeIntBE(e,n,this.span),this.span}}re.IntBE=Op;const Y3=Math.pow(2,32);function Ev(t){const e=Math.floor(t/Y3),r=t-e*Y3;return{hi32:e,lo32:r}}function _v(t,e){return t*Y3+e}class yO extends tr{constructor(e){super(8,e)}decode(e,r=0){const n=Ot(e),i=n.readUInt32LE(r),s=n.readUInt32LE(r+4);return _v(s,i)}encode(e,r,n=0){const i=Ev(e),s=Ot(r);return s.writeUInt32LE(i.lo32,n),s.writeUInt32LE(i.hi32,n+4),8}}re.NearUInt64=yO;class wO extends tr{constructor(e){super(8,e)}decode(e,r=0){const n=Ot(e),i=n.readUInt32BE(r),s=n.readUInt32BE(r+4);return _v(i,s)}encode(e,r,n=0){const i=Ev(e),s=Ot(r);return s.writeUInt32BE(i.hi32,n),s.writeUInt32BE(i.lo32,n+4),8}}re.NearUInt64BE=wO;class bO extends tr{constructor(e){super(8,e)}decode(e,r=0){const n=Ot(e),i=n.readUInt32LE(r),s=n.readInt32LE(r+4);return _v(s,i)}encode(e,r,n=0){const i=Ev(e),s=Ot(r);return s.writeUInt32LE(i.lo32,n),s.writeInt32LE(i.hi32,n+4),8}}re.NearInt64=bO;class vO extends tr{constructor(e){super(8,e)}decode(e,r=0){const n=Ot(e),i=n.readInt32BE(r),s=n.readUInt32BE(r+4);return _v(i,s)}encode(e,r,n=0){const i=Ev(e),s=Ot(r);return s.writeInt32BE(i.hi32,n),s.writeUInt32BE(i.lo32,n+4),8}}re.NearInt64BE=vO;class EO extends tr{constructor(e){super(4,e)}decode(e,r=0){return Ot(e).readFloatLE(r)}encode(e,r,n=0){return Ot(r).writeFloatLE(e,n),4}}re.Float=EO;class _O extends tr{constructor(e){super(4,e)}decode(e,r=0){return Ot(e).readFloatBE(r)}encode(e,r,n=0){return Ot(r).writeFloatBE(e,n),4}}re.FloatBE=_O;class SO extends tr{constructor(e){super(8,e)}decode(e,r=0){return Ot(e).readDoubleLE(r)}encode(e,r,n=0){return Ot(r).writeDoubleLE(e,n),8}}re.Double=SO;class xO extends tr{constructor(e){super(8,e)}decode(e,r=0){return Ot(e).readDoubleBE(r)}encode(e,r,n=0){return Ot(r).writeDoubleBE(e,n),8}}re.DoubleBE=xO;class IO extends tr{constructor(e,r,n){if(!(e instanceof tr))throw new TypeError("elementLayout must be a Layout");if(!(r instanceof ws&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(r instanceof ws)&&0<e.span&&(i=r*e.span),super(i,n),this.elementLayout=e,this.count=r}getSpan(e,r=0){if(0<=this.span)return this.span;let n=0,i=this.count;if(i instanceof ws&&(i=i.decode(e,r)),0<this.elementLayout.span)n=i*this.elementLayout.span;else{let s=0;for(;s<i;)n+=this.elementLayout.getSpan(e,r+n),++s}return n}decode(e,r=0){const n=[];let i=0,s=this.count;for(s instanceof ws&&(s=s.decode(e,r));i<s;)n.push(this.elementLayout.decode(e,r)),r+=this.elementLayout.getSpan(e,r),i+=1;return n}encode(e,r,n=0){const i=this.elementLayout,s=e.reduce((o,a)=>o+i.encode(a,r,n+o),0);return this.count instanceof ws&&this.count.encode(e.length,r,n),s}}re.Sequence=IO;class AO extends tr{constructor(e,r,n){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof tr,!0)))throw new TypeError("fields must be array of Layout instances");typeof r=="boolean"&&n===void 0&&(n=r,r=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,r),this.fields=e,this.decodePrefixes=!!n}getSpan(e,r=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((i,s)=>{const o=s.getSpan(e,r);return r+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,r=0){Pp(e);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,r)),r+=i.getSpan(e,r),this.decodePrefixes&&e.length===r)break;return n}encode(e,r,n=0){const i=n;let s=0,o=0;for(const a of this.fields){let c=a.span;if(o=0<c?c:0,a.property!==void 0){const l=e[a.property];l!==void 0&&(o=a.encode(l,r,n),0>c&&(c=a.getSpan(r,n)))}s=n,n+=c}return s+o-i}fromArray(e){const r=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(r[n.property]=e.shift());return r}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const r of this.fields)if(r.property===e)return r}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let r=0;for(const n of this.fields){if(n.property===e)return r;0>n.span?r=-1:0<=r&&(r+=n.span)}}}re.Structure=AO;class dI{constructor(e){this.property=e}decode(e,r){throw new Error("UnionDiscriminator is abstract")}encode(e,r,n){throw new Error("UnionDiscriminator is abstract")}}re.UnionDiscriminator=dI;class yb extends dI{constructor(e,r){if(!(e instanceof ws&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(r||e.property||"variant"),this.layout=e}decode(e,r){return this.layout.decode(e,r)}encode(e,r,n){return this.layout.encode(e,r,n)}}re.UnionLayoutDiscriminator=yb;class fI extends tr{constructor(e,r,n){let i;if(e instanceof Ao||e instanceof ia)i=new yb(new hI(e));else if(e instanceof ws&&e.isCount())i=new yb(e);else if(e instanceof dI)i=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(r===void 0&&(r=null),!(r===null||r instanceof tr))throw new TypeError("defaultLayout must be null or a Layout");if(r!==null){if(0>r.span)throw new Error("defaultLayout must have constant span");r.property===void 0&&(r=r.replicate("content"))}let s=-1;r&&(s=r.span,0<=s&&(e instanceof Ao||e instanceof ia)&&(s+=i.layout.span)),super(s,n),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof Ao||e instanceof ia,this.defaultLayout=r,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,r=0){if(0<=this.span)return this.span;const n=this.getVariant(e,r);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,r)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const r=this.registry[e[this.discriminator.property]];if(r&&(!r.layout||r.property&&Object.prototype.hasOwnProperty.call(e,r.property)))return r}else for(const r in this.registry){const n=this.registry[r];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e,r=0){let n;const i=this.discriminator,s=i.decode(e,r),o=this.registry[s];if(o===void 0){const a=this.defaultLayout;let c=0;this.usesPrefixDiscriminator&&(c=i.layout.span),n=this.makeDestinationObject(),n[i.property]=s,n[a.property]=a.decode(e,r+c)}else n=o.decode(e,r);return n}encode(e,r,n=0){const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(e[s.property],r,n),a+o.encode(e[o.property],r,n+a)}return i.encode(e,r,n)}addVariant(e,r,n){const i=new CO(this,e,r,n);return this.registry[e]=i,i}getVariant(e,r=0){let n;return e instanceof Uint8Array?n=this.discriminator.decode(e,r):n=e,this.registry[n]}}re.Union=fI;class CO extends tr{constructor(e,r,n,i){if(!(e instanceof fI))throw new TypeError("union must be a Union");if(!Number.isInteger(r)||0>r)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof tr))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=n?n.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=r,this.layout=n||null}getSpan(e,r=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,r+n)),n+i}decode(e,r=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(e,r))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,r+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,r,n=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,r,n);let s=i;if(this.layout&&(this.layout.encode(e[this.property],r,n+i),s+=this.layout.getSpan(r,n+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}re.VariantLayout=CO;function Jd(t){return 0>t&&(t+=4294967296),t}class pI extends tr{constructor(e,r,n){if(!(e instanceof Ao||e instanceof ia))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof r=="string"&&n===void 0&&(n=r,r=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!r,this.fields=[];let i=0;this._packedSetValue=function(s){return i=Jd(s),this},this._packedGetValue=function(){return i}}decode(e,r=0){const n=this.makeDestinationObject(),i=this.word.decode(e,r);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(n[s.property]=s.decode(e));return n}encode(e,r,n=0){const i=this.word.decode(r,n);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const o=e[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),r,n)}addField(e,r){const n=new gI(this,e,r);return this.fields.push(n),n}addBoolean(e){const r=new NO(this,e);return this.fields.push(r),r}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const r of this.fields)if(r.property===e)return r}}re.BitStructure=pI;class gI{constructor(e,r,n){if(!(e instanceof pI))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(r)||0>=r)throw new TypeError("bits must be positive integer");const i=8*e.span,s=e.fields.reduce((o,a)=>o+a.bits,0);if(r+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=e,this.bits=r,this.valueMask=(1<<r)-1,r===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-r),this.wordMask=Jd(this.valueMask<<this.start),this.property=n}decode(e,r){const n=this.container._packedGetValue();return Jd(n&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==Jd(e&this.valueMask))throw new TypeError(uI("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const r=this.container._packedGetValue(),n=Jd(e<<this.start);this.container._packedSetValue(Jd(r&~this.wordMask)|n)}}re.BitField=gI;let NO=class extends gI{constructor(e,r){super(e,1,r)}decode(e,r){return!!super.decode(e,r)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};re.Boolean=NO;let MO=class extends tr{constructor(e,r){if(!(e instanceof ws&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof ws||(n=e),super(n,r),this.length=e}getSpan(e,r){let n=this.span;return 0>n&&(n=this.length.decode(e,r)),n}decode(e,r=0){let n=this.span;return 0>n&&(n=this.length.decode(e,r)),Ot(e).slice(r,r+n)}encode(e,r,n){let i=this.length;if(this.length instanceof ws&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(uI("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(n+i>r.length)throw new RangeError("encoding overruns Uint8Array");const s=Ot(e);return Ot(r).write(s.toString("hex"),n,i,"hex"),this.length instanceof ws&&this.length.encode(i,r,n),i}};re.Blob=MO;class TO extends tr{constructor(e){super(-1,e)}getSpan(e,r=0){Pp(e);let n=r;for(;n<e.length&&e[n]!==0;)n+=1;return 1+n-r}decode(e,r=0){const n=this.getSpan(e,r);return Ot(e).slice(r,r+n-1).toString("utf-8")}encode(e,r,n=0){typeof e!="string"&&(e=String(e));const i=lI.Buffer.from(e,"utf8"),s=i.length;if(n+s>r.length)throw new RangeError("encoding overruns Buffer");const o=Ot(r);return i.copy(o,n),o[n+s]=0,s+1}}re.CString=TO;class $O extends tr{constructor(e,r){if(typeof e=="string"&&r===void 0&&(r=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,r),this.maxSpan=e}getSpan(e,r=0){return Pp(e),e.length-r}decode(e,r=0){const n=this.getSpan(e,r);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return Ot(e).slice(r,r+n).toString("utf-8")}encode(e,r,n=0){typeof e!="string"&&(e=String(e));const i=lI.Buffer.from(e,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(n+s>r.length)throw new RangeError("encoding overruns Buffer");return i.copy(Ot(r),n),s}}re.UTF8=$O;class PO extends tr{constructor(e,r){super(0,r),this.value=e}decode(e,r){return this.value}encode(e,r,n){return 0}}re.Constant=PO;re.greedy=(t,e)=>new mO(t,e);var gh=re.offset=(t,e,r)=>new hI(t,e,r),Ut=re.u8=t=>new Ao(1,t),vo=re.u16=t=>new Ao(2,t);re.u24=t=>new Ao(3,t);var De=re.u32=t=>new Ao(4,t);re.u40=t=>new Ao(5,t);re.u48=t=>new Ao(6,t);var li=re.nu64=t=>new yO(t);re.u16be=t=>new ia(2,t);re.u24be=t=>new ia(3,t);re.u32be=t=>new ia(4,t);re.u40be=t=>new ia(5,t);re.u48be=t=>new ia(6,t);re.nu64be=t=>new wO(t);re.s8=t=>new Hh(1,t);re.s16=t=>new Hh(2,t);re.s24=t=>new Hh(3,t);re.s32=t=>new Hh(4,t);re.s40=t=>new Hh(5,t);re.s48=t=>new Hh(6,t);var Ls=re.ns64=t=>new bO(t);re.s16be=t=>new Op(2,t);re.s24be=t=>new Op(3,t);re.s32be=t=>new Op(4,t);re.s40be=t=>new Op(5,t);re.s48be=t=>new Op(6,t);re.ns64be=t=>new vO(t);re.f32=t=>new EO(t);re.f32be=t=>new _O(t);re.f64=t=>new SO(t);re.f64be=t=>new xO(t);var Me=re.struct=(t,e,r)=>new AO(t,e,r);re.bits=(t,e,r)=>new pI(t,e,r);var Fi=re.seq=(t,e,r)=>new IO(t,e,r);re.union=(t,e,r)=>new fI(t,e,r);re.unionLayoutDiscriminator=(t,e)=>new yb(t,e);var jr=re.blob=(t,e)=>new MO(t,e);re.cstr=t=>new TO(t);re.utf8=(t,e)=>new $O(t,e);re.constant=(t,e)=>new PO(t,e);var Lq=8078e3,Bq=8078001,Uq=8078004,jq=8078005,Fq=8078006,zq=8078011;function OO(t){return Array.isArray(t)?"%5B"+t.map(OO).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function qq([t,e]){return`${t}=${OO(e)}`}function Wq(t){const e=Object.entries(t).map(qq).join("&");return btoa(e)}function Hq(t,e={}){{let r=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(r+=` '${Wq(e)}'`),`${r}\``}}var zf=class extends Error{constructor(...[e,r]){let n,i;if(r){const{cause:o,...a}=r;o&&(i={cause:o}),Object.keys(a).length>0&&(n=a)}const s=Hq(e,n);super(s,i);ot(this,"cause",this.cause);ot(this,"context");this.context={__code:e,...n},this.name="SolanaError"}};function Kq(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function Vq(t){return Object.freeze({...t,encode:e=>{const r=new Uint8Array(Kq(e,t));return t.write(e,r,0),r}})}function Gq(t){return Object.freeze({...t,decode:(e,r=0)=>t.read(e,r)[0]})}function pd(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function Yq(t,e){if(pd(t)!==pd(e))throw new zf(Uq);if(pd(t)&&pd(e)&&t.fixedSize!==e.fixedSize)throw new zf(jq,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!pd(t)&&!pd(e)&&t.maxSize!==e.maxSize)throw new zf(Fq,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function Qq(t,e,r=0){if(e.length-r<=0)throw new zf(Lq,{codecDescription:t})}function Zq(t,e,r,n=0){const i=r.length-n;if(i<e)throw new zf(Bq,{bytesLength:i,codecDescription:t,expected:e})}function Jq(t,e,r,n){if(n<e||n>r)throw new zf(zq,{codecDescription:t,max:r,min:e,value:n})}function kO(t){return(t==null?void 0:t.endian)!==1}function Xq(t){return Vq({fixedSize:t.size,write(e,r,n){t.range&&Jq(t.name,t.range[0],t.range[1],e);const i=new ArrayBuffer(t.size);return t.set(new DataView(i),e,kO(t.config)),r.set(new Uint8Array(i),n),n+t.size}})}function eW(t){return Gq({fixedSize:t.size,read(e,r=0){Qq(t.name,e,r),Zq(t.name,t.size,e,r);const n=new DataView(tW(e,r,t.size));return[t.get(n,kO(t.config)),r+t.size]}})}function tW(t,e,r){const n=t.byteOffset+(e??0),i=r??t.byteLength;return t.buffer.slice(n,n+i)}var rW=(t={})=>Xq({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,r,n)=>e.setBigUint64(0,BigInt(r),n),size:8}),nW=(t={})=>eW({config:t,get:(e,r)=>e.getBigUint64(0,r),name:"u64",size:8}),iW=(t={})=>Yq(rW(t),nW(t));class sW extends TypeError{constructor(e,r){let n;const{message:i,explanation:s,...o}=e,{path:a}=e,c=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??c),s!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...r()])}}function oW(t){return Ym(t)&&typeof t[Symbol.iterator]=="function"}function Ym(t){return typeof t=="object"&&t!=null}function wb(t){return Ym(t)&&!Array.isArray(t)}function oa(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function aW(t){const{done:e,value:r}=t.next();return e?void 0:r}function cW(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=r,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${oa(n)}\``}=t;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:c}}function*yA(t,e,r,n){oW(t)||(t=[t]);for(const i of t){const s=cW(i,e,r,n);s&&(yield s)}}function*mI(t,e,r={}){const{path:n=[],branch:i=[t],coerce:s=!1,mask:o=!1}=r,a={path:n,branch:i,mask:o};s&&(t=e.coercer(t,a));let c="valid";for(const l of e.validator(t,a))l.explanation=r.message,c="not_valid",yield[l,void 0];for(let[l,u,h]of e.entries(t,a)){const d=mI(u,h,{path:l===void 0?n:[...n,l],branch:l===void 0?i:[...i,u],coerce:s,mask:o,message:r.message});for(const g of d)g[0]?(c=g[0].refinement!=null?"not_refined":"not_valid",yield[g[0],void 0]):s&&(u=g[1],l===void 0?t=u:t instanceof Map?t.set(l,u):t instanceof Set?t.add(u):Ym(t)&&(u!==void 0||l in t)&&(t[l]=u))}if(c!=="not_valid")for(const l of e.refiner(t,a))l.explanation=r.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,t])}let Wa=class{constructor(e){const{type:r,schema:n,validator:i,refiner:s,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=r,this.schema=n,this.entries=a,this.coercer=o,i?this.validator=(c,l)=>{const u=i(c,l);return yA(u,l,this,c)}:this.validator=()=>[],s?this.refiner=(c,l)=>{const u=s(c,l);return yA(u,l,this,c)}:this.refiner=()=>[]}assert(e,r){return lW(e,this,r)}create(e,r){return we(e,this,r)}is(e){return RO(e,this)}mask(e,r){return uW(e,this,r)}validate(e,r={}){return Qm(e,this,r)}};function lW(t,e,r){const n=Qm(t,e,{message:r});if(n[0])throw n[0]}function we(t,e,r){const n=Qm(t,e,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function uW(t,e,r){const n=Qm(t,e,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function RO(t,e){return!Qm(t,e)[0]}function Qm(t,e,r={}){const n=mI(t,e,r),i=aW(n);return i[0]?[new sW(i[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Kh(t,e){return new Wa({type:t,schema:null,validator:e})}function hW(){return Kh("any",()=>!0)}function be(t){return new Wa({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${oa(e)}`}})}function Ra(){return Kh("boolean",t=>typeof t=="boolean")}function yI(t){return Kh("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${oa(e)}`)}function Xr(t){const e=oa(t),r=typeof t;return new Wa({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${oa(n)}`}})}function dW(){return Kh("never",()=>!1)}function Ee(t){return new Wa({...t,validator:(e,r)=>e===null||t.validator(e,r),refiner:(e,r)=>e===null||t.refiner(e,r)})}function X(){return Kh("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${oa(t)}`)}function ke(t){return new Wa({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function DO(t,e){return new Wa({type:"record",schema:null,*entries(r){if(Ym(r))for(const n in r){const i=r[n];yield[n,n,t],yield[n,i,e]}},validator(r){return wb(r)||`Expected an object, but received: ${oa(r)}`},coercer(r){return wb(r)?{...r}:r}})}function pe(){return Kh("string",t=>typeof t=="string"||`Expected a string, but received: ${oa(t)}`)}function wI(t){const e=dW();return new Wa({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],t[i]||e]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${oa(r)}`},coercer(r){return Array.isArray(r)?r.slice():r}})}function le(t){const e=Object.keys(t);return new Wa({type:"type",schema:t,*entries(r){if(Ym(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return wb(r)||`Expected an object, but received: ${oa(r)}`},coercer(r){return wb(r)?{...r}:r}})}function rs(t){const e=t.map(r=>r.type).join(" | ");return new Wa({type:"union",schema:null,coercer(r,n){for(const i of t){const[s,o]=i.validate(r,{coerce:!0,mask:n.mask});if(!s)return o}return r},validator(r,n){const i=[];for(const s of t){const[...o]=mI(r,s,n),[a]=o;if(a[0])for(const[c]of o)c&&i.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${oa(r)}`,...i]}})}function kp(){return Kh("unknown",()=>!0)}function Zm(t,e,r){return new Wa({...t,coercer:(n,i)=>RO(n,e)?t.coercer(r(n,i),i):t.coercer(n,i)})}var ew,fW=new Uint8Array(16);function LO(){if(!ew&&(ew=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ew))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ew(fW)}const pW=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Sv(t){return typeof t=="string"&&pW.test(t)}var ci=[];for(var iE=0;iE<256;++iE)ci.push((iE+256).toString(16).substr(1));function xv(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(ci[t[e+0]]+ci[t[e+1]]+ci[t[e+2]]+ci[t[e+3]]+"-"+ci[t[e+4]]+ci[t[e+5]]+"-"+ci[t[e+6]]+ci[t[e+7]]+"-"+ci[t[e+8]]+ci[t[e+9]]+"-"+ci[t[e+10]]+ci[t[e+11]]+ci[t[e+12]]+ci[t[e+13]]+ci[t[e+14]]+ci[t[e+15]]).toLowerCase();if(!Sv(r))throw TypeError("Stringified UUID is invalid");return r}var wA,sE,oE=0,aE=0;function gW(t,e,r){var n=e&&r||0,i=e||new Array(16);t=t||{};var s=t.node||wA,o=t.clockseq!==void 0?t.clockseq:sE;if(s==null||o==null){var a=t.random||(t.rng||LO)();s==null&&(s=wA=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=sE=(a[6]<<8|a[7])&16383)}var c=t.msecs!==void 0?t.msecs:Date.now(),l=t.nsecs!==void 0?t.nsecs:aE+1,u=c-oE+(l-aE)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||c>oE)&&t.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");oE=c,aE=l,sE=o,c+=122192928e5;var h=((c&268435455)*1e4+l)%4294967296;i[n++]=h>>>24&255,i[n++]=h>>>16&255,i[n++]=h>>>8&255,i[n++]=h&255;var d=c/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=d&255,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(var g=0;g<6;++g)i[n+g]=s[g];return e||xv(i)}function BO(t){if(!Sv(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function mW(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var yW="6ba7b810-9dad-11d1-80b4-00c04fd430c8",wW="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function UO(t,e,r){function n(i,s,o,a){if(typeof i=="string"&&(i=mW(i)),typeof s=="string"&&(s=BO(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+i.length);if(c.set(s),c.set(i,s.length),c=r(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var l=0;l<16;++l)o[a+l]=c[l];return o}return xv(c)}try{n.name=t}catch{}return n.DNS=yW,n.URL=wW,n}function bW(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return vW(EW(_W(t),t.length*8))}function vW(t){for(var e=[],r=t.length*32,n="0123456789abcdef",i=0;i<r;i+=8){var s=t[i>>5]>>>i%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(o)}return e}function jO(t){return(t+64>>>9<<4)+14+1}function EW(t,e){t[e>>5]|=128<<e%32,t[jO(e)-1]=e;for(var r=1732584193,n=-271733879,i=-1732584194,s=271733878,o=0;o<t.length;o+=16){var a=r,c=n,l=i,u=s;r=$i(r,n,i,s,t[o],7,-680876936),s=$i(s,r,n,i,t[o+1],12,-389564586),i=$i(i,s,r,n,t[o+2],17,606105819),n=$i(n,i,s,r,t[o+3],22,-1044525330),r=$i(r,n,i,s,t[o+4],7,-176418897),s=$i(s,r,n,i,t[o+5],12,1200080426),i=$i(i,s,r,n,t[o+6],17,-1473231341),n=$i(n,i,s,r,t[o+7],22,-45705983),r=$i(r,n,i,s,t[o+8],7,1770035416),s=$i(s,r,n,i,t[o+9],12,-1958414417),i=$i(i,s,r,n,t[o+10],17,-42063),n=$i(n,i,s,r,t[o+11],22,-1990404162),r=$i(r,n,i,s,t[o+12],7,1804603682),s=$i(s,r,n,i,t[o+13],12,-40341101),i=$i(i,s,r,n,t[o+14],17,-1502002290),n=$i(n,i,s,r,t[o+15],22,1236535329),r=Pi(r,n,i,s,t[o+1],5,-165796510),s=Pi(s,r,n,i,t[o+6],9,-1069501632),i=Pi(i,s,r,n,t[o+11],14,643717713),n=Pi(n,i,s,r,t[o],20,-373897302),r=Pi(r,n,i,s,t[o+5],5,-701558691),s=Pi(s,r,n,i,t[o+10],9,38016083),i=Pi(i,s,r,n,t[o+15],14,-660478335),n=Pi(n,i,s,r,t[o+4],20,-405537848),r=Pi(r,n,i,s,t[o+9],5,568446438),s=Pi(s,r,n,i,t[o+14],9,-1019803690),i=Pi(i,s,r,n,t[o+3],14,-187363961),n=Pi(n,i,s,r,t[o+8],20,1163531501),r=Pi(r,n,i,s,t[o+13],5,-1444681467),s=Pi(s,r,n,i,t[o+2],9,-51403784),i=Pi(i,s,r,n,t[o+7],14,1735328473),n=Pi(n,i,s,r,t[o+12],20,-1926607734),r=Oi(r,n,i,s,t[o+5],4,-378558),s=Oi(s,r,n,i,t[o+8],11,-2022574463),i=Oi(i,s,r,n,t[o+11],16,1839030562),n=Oi(n,i,s,r,t[o+14],23,-35309556),r=Oi(r,n,i,s,t[o+1],4,-1530992060),s=Oi(s,r,n,i,t[o+4],11,1272893353),i=Oi(i,s,r,n,t[o+7],16,-155497632),n=Oi(n,i,s,r,t[o+10],23,-1094730640),r=Oi(r,n,i,s,t[o+13],4,681279174),s=Oi(s,r,n,i,t[o],11,-358537222),i=Oi(i,s,r,n,t[o+3],16,-722521979),n=Oi(n,i,s,r,t[o+6],23,76029189),r=Oi(r,n,i,s,t[o+9],4,-640364487),s=Oi(s,r,n,i,t[o+12],11,-421815835),i=Oi(i,s,r,n,t[o+15],16,530742520),n=Oi(n,i,s,r,t[o+2],23,-995338651),r=ki(r,n,i,s,t[o],6,-198630844),s=ki(s,r,n,i,t[o+7],10,1126891415),i=ki(i,s,r,n,t[o+14],15,-1416354905),n=ki(n,i,s,r,t[o+5],21,-57434055),r=ki(r,n,i,s,t[o+12],6,1700485571),s=ki(s,r,n,i,t[o+3],10,-1894986606),i=ki(i,s,r,n,t[o+10],15,-1051523),n=ki(n,i,s,r,t[o+1],21,-2054922799),r=ki(r,n,i,s,t[o+8],6,1873313359),s=ki(s,r,n,i,t[o+15],10,-30611744),i=ki(i,s,r,n,t[o+6],15,-1560198380),n=ki(n,i,s,r,t[o+13],21,1309151649),r=ki(r,n,i,s,t[o+4],6,-145523070),s=ki(s,r,n,i,t[o+11],10,-1120210379),i=ki(i,s,r,n,t[o+2],15,718787259),n=ki(n,i,s,r,t[o+9],21,-343485551),r=jl(r,a),n=jl(n,c),i=jl(i,l),s=jl(s,u)}return[r,n,i,s]}function _W(t){if(t.length===0)return[];for(var e=t.length*8,r=new Uint32Array(jO(e)),n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function jl(t,e){var r=(t&65535)+(e&65535),n=(t>>16)+(e>>16)+(r>>16);return n<<16|r&65535}function SW(t,e){return t<<e|t>>>32-e}function Iv(t,e,r,n,i,s){return jl(SW(jl(jl(e,t),jl(n,s)),i),r)}function $i(t,e,r,n,i,s,o){return Iv(e&r|~e&n,t,e,i,s,o)}function Pi(t,e,r,n,i,s,o){return Iv(e&n|r&~n,t,e,i,s,o)}function Oi(t,e,r,n,i,s,o){return Iv(e^r^n,t,e,i,s,o)}function ki(t,e,r,n,i,s,o){return Iv(r^(e|~n),t,e,i,s,o)}var xW=UO("v3",48,bW);function IW(t,e,r){t=t||{};var n=t.random||(t.rng||LO)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return xv(n)}function AW(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function cE(t,e){return t<<e|t>>>32-e}function CW(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=[];for(var i=0;i<n.length;++i)t.push(n.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),a=new Array(o),c=0;c<o;++c){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=t[c*64+u*4]<<24|t[c*64+u*4+1]<<16|t[c*64+u*4+2]<<8|t[c*64+u*4+3];a[c]=l}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var h=0;h<o;++h){for(var d=new Uint32Array(80),g=0;g<16;++g)d[g]=a[h][g];for(var m=16;m<80;++m)d[m]=cE(d[m-3]^d[m-8]^d[m-14]^d[m-16],1);for(var v=r[0],$=r[1],_=r[2],x=r[3],A=r[4],T=0;T<80;++T){var k=Math.floor(T/20),D=cE(v,5)+AW(k,$,_,x)+A+e[k]+d[T]>>>0;A=x,x=_,_=cE($,30)>>>0,$=v,v=D}r[0]=r[0]+v>>>0,r[1]=r[1]+$>>>0,r[2]=r[2]+_>>>0,r[3]=r[3]+x>>>0,r[4]=r[4]+A>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var NW=UO("v5",80,CW);const MW="00000000-0000-0000-0000-000000000000";function TW(t){if(!Sv(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const $W=Object.freeze(Object.defineProperty({__proto__:null,NIL:MW,parse:BO,stringify:xv,v1:gW,v3:xW,v4:IW,v5:NW,validate:Sv,version:TW},Symbol.toStringTag,{value:"Module"})),FO=Um($W),PW=FO.v4,OW=function(t,e,r,n){if(typeof t!="string")throw new TypeError(t+" must be a string");n=n||{};const i=typeof n.version=="number"?n.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:t};if(i===2&&(s.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");s.params=e}if(typeof r>"u"){const o=typeof n.generator=="function"?n.generator:function(){return PW()};s.id=o(s,n)}else i===2&&r===null?n.notificationIdNull&&(s.id=null):s.id=r;return s};var kW=OW;const RW=FO.v4,DW=kW,Qg=function(t,e){if(!(this instanceof Qg))return new Qg(t,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return RW()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=t};var LW=Qg;Qg.prototype.request=function(t,e,r,n){const i=this;let s=null;const o=Array.isArray(t)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&t&&typeof t=="object"&&typeof e=="function")n=e,s=t;else{typeof r=="function"&&(n=r,r=void 0);const l=typeof n=="function";try{s=DW(t,e,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(u){if(l){n(u);return}throw u}if(!l)return s}let c;try{c=JSON.stringify(s,this.options.replacer)}catch(l){n(l);return}return this.callServer(c,function(l,u){i._parseResponse(l,u,n)}),s};Qg.prototype._parseResponse=function(t,e,r){if(t){r(t);return}if(!e){r();return}let n;try{n=JSON.parse(e,this.options.reviver)}catch(i){r(i);return}if(r.length===3)if(Array.isArray(n)){const i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};r(null,n.filter(i),n.filter(s));return}else{r(null,n.error,n.result);return}r(null,n)};const BW=Fa(LW);var zO={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function s(c,l,u,h,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new i(u,h||c,d),m=r?r+l:l;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],g]:c._events[m].push(g):(c._events[m]=g,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new n:delete c._events[l]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,h;if(this._eventsCount===0)return l;for(h in u=this._events)e.call(u,h)&&l.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=r?r+l:l,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var d=0,g=h.length,m=new Array(g);d<g;d++)m[d]=h[d].fn;return m},a.prototype.listenerCount=function(l){var u=r?r+l:l,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(l,u,h,d,g,m){var v=r?r+l:l;if(!this._events[v])return!1;var $=this._events[v],_=arguments.length,x,A;if($.fn){switch($.once&&this.removeListener(l,$.fn,void 0,!0),_){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,u),!0;case 3:return $.fn.call($.context,u,h),!0;case 4:return $.fn.call($.context,u,h,d),!0;case 5:return $.fn.call($.context,u,h,d,g),!0;case 6:return $.fn.call($.context,u,h,d,g,m),!0}for(A=1,x=new Array(_-1);A<_;A++)x[A-1]=arguments[A];$.fn.apply($.context,x)}else{var T=$.length,k;for(A=0;A<T;A++)switch($[A].once&&this.removeListener(l,$[A].fn,void 0,!0),_){case 1:$[A].fn.call($[A].context);break;case 2:$[A].fn.call($[A].context,u);break;case 3:$[A].fn.call($[A].context,u,h);break;case 4:$[A].fn.call($[A].context,u,h,d);break;default:if(!x)for(k=1,x=new Array(_-1);k<_;k++)x[k-1]=arguments[k];$[A].fn.apply($[A].context,x)}}return!0},a.prototype.on=function(l,u,h){return s(this,l,u,h,!1)},a.prototype.once=function(l,u,h){return s(this,l,u,h,!0)},a.prototype.removeListener=function(l,u,h,d){var g=r?r+l:l;if(!this._events[g])return this;if(!u)return o(this,g),this;var m=this._events[g];if(m.fn)m.fn===u&&(!d||m.once)&&(!h||m.context===h)&&o(this,g);else{for(var v=0,$=[],_=m.length;v<_;v++)(m[v].fn!==u||d&&!m[v].once||h&&m[v].context!==h)&&$.push(m[v]);$.length?this._events[g]=$.length===1?$[0]:$:o(this,g)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=r?r+l:l,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(zO);var UW=zO.exports;const bI=Fa(UW);var jW=class extends bI{constructor(e,r){super();ot(this,"socket");this.socket=new window.WebSocket(e,r.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=n=>this.emit("message",n.data),this.socket.onerror=n=>this.emit("error",n),this.socket.onclose=n=>{this.emit("close",n.code,n.reason)}}send(e,r,n){const i=n||r;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,r){this.socket.close(e,r)}addEventListener(e,r,n){this.socket.addEventListener(e,r,n)}};function FW(t,e){return new jW(t,e)}var zW=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},qW=class extends bI{constructor(e,r="ws://localhost:8080",{autoconnect:n=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},c,l){super();ot(this,"address");ot(this,"rpc_id");ot(this,"queue");ot(this,"options");ot(this,"autoconnect");ot(this,"ready");ot(this,"reconnect");ot(this,"reconnect_timer_id");ot(this,"reconnect_interval");ot(this,"max_reconnects");ot(this,"rest_options");ot(this,"current_reconnects");ot(this,"generate_request_id");ot(this,"socket");ot(this,"webSocketFactory");ot(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=r,this.autoconnect=n,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),l?this.dataPack=l:this.dataPack=new zW,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,r,n,i){return!i&&typeof n=="object"&&(i=n,n=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,r),c={jsonrpc:"2.0",method:e,params:r||void 0,id:a};this.socket.send(this.dataPack.encode(c),i,l=>{if(l)return o(l);this.queue[a]={promise:[s,o]},n&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},n))})})}async login(e){const r=await this.call("rpc.login",e);if(!r)throw new Error("authentication failed");return r}async listMethods(){return await this.call("__listMethods")}notify(e,r){return new Promise((n,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:r};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);n()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const r=await this.call("rpc.on",e);if(typeof e=="string"&&r[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+r[e]);return r}async unsubscribe(e){typeof e=="string"&&(e=[e]);const r=await this.call("rpc.off",e);if(typeof e=="string"&&r[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+r);return r}close(e,r){this.socket&&this.socket.close(e||1e3,r)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(e,r){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,r),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=Xe.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const i=[n.notification];if(n.params.constructor===Object)i.push(n.params);else for(let s=0;s<n.params.length;s++)i.push(n.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",n,i),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,r),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",n,i),1))})}};class qO extends R9{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,O9(e);const n=Xx(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),ip(s)}update(e){return lb(this),this.iHash.update(e),this}digestInto(e){lb(this),qh(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const WO=(t,e,r)=>new qO(t,e).update(r).digest();WO.create=(t,e)=>new qO(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bA=(t,e)=>(t+(t>=0?e:-e)/HO)/e;function WW(t,e,r){const[[n,i],[s,o]]=e,a=bA(o*t,r),c=bA(-i*t,r);let l=t-a*n-c*s,u=-a*i-c*o;const h=l<Dc,d=u<Dc;h&&(l=-l),d&&(u=-u);const g=Km(Math.ceil(z9(r)/2))+qf;if(l<Dc||l>=g||u<Dc||u>=g)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:h,k1:l,k2neg:d,k2:u}}function Q3(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function lE(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return Ch(r.lowS,"lowS"),Ch(r.prehash,"prehash"),r.format!==void 0&&Q3(r.format),r}class HW extends Error{constructor(e=""){super(e)}}const Cc={Err:HW,_tlv:{encode:(t,e)=>{const{Err:r}=Cc;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=Zy(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?Zy(i.length/2|128):"";return Zy(t)+s+i+e},decode(t,e){const{Err:r}=Cc;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+c);if(l.length!==c)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=Cc;if(t<Dc)throw new e("integer: negative integers are not allowed");let r=Zy(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Cc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return bv(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Cc,i=an("signature",t),{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(t){const{_tlv:e,_int:r}=Cc,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}},Dc=BigInt(0),qf=BigInt(1),HO=BigInt(2),tw=BigInt(3),KW=BigInt(4);function Cf(t,e){const{BYTES:r}=t;let n;if(typeof e=="bigint")n=e;else{let i=an("private key",e);try{n=t.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function VW(t,e={}){const r=iO("weierstrass",t,e),{Fp:n,Fn:i}=r;let s=r.CURVE;const{h:o,n:a}=s;Vm(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!n.is0(s.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const l=VO(n,i);function u(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function h(E,b,f){const{x:p,y:w}=b.toAffine(),N=n.toBytes(p);if(Ch(f,"isCompressed"),f){u();const M=!n.isOdd(w);return Ca(KO(M),N)}else return Ca(Uint8Array.of(4),N,n.toBytes(w))}function d(E){ea(E,void 0,"Point");const{publicKey:b,publicKeyUncompressed:f}=l,p=E.length,w=E[0],N=E.subarray(1);if(p===b&&(w===2||w===3)){const M=n.fromBytes(N);if(!n.isValid(M))throw new Error("bad point: is not on curve, wrong x");const S=v(M);let y;try{y=n.sqrt(S)}catch(U){const K=U instanceof Error?": "+U.message:"";throw new Error("bad point: is not on curve, sqrt error"+K)}u();const C=n.isOdd(y);return(w&1)===1!==C&&(y=n.neg(y)),{x:M,y}}else if(p===f&&w===4){const M=n.BYTES,S=n.fromBytes(N.subarray(0,M)),y=n.fromBytes(N.subarray(M,M*2));if(!$(S,y))throw new Error("bad point: is not on curve");return{x:S,y}}else throw new Error(`bad point: got length ${p}, expected compressed=${b} or uncompressed=${f}`)}const g=e.toBytes||h,m=e.fromBytes||d;function v(E){const b=n.sqr(E),f=n.mul(b,E);return n.add(n.add(f,n.mul(E,s.a)),s.b)}function $(E,b){const f=n.sqr(b),p=v(E);return n.eql(f,p)}if(!$(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const _=n.mul(n.pow(s.a,tw),KW),x=n.mul(n.sqr(s.b),BigInt(27));if(n.is0(n.add(_,x)))throw new Error("bad curve params: a or b");function A(E,b,f=!1){if(!n.isValid(b)||f&&n.is0(b))throw new Error(`bad point coordinate ${E}`);return b}function T(E){if(!(E instanceof B))throw new Error("ProjectivePoint expected")}function k(E){if(!c||!c.basises)throw new Error("no endo");return WW(E,c.basises,i.ORDER)}const D=hb((E,b)=>{const{X:f,Y:p,Z:w}=E;if(n.eql(w,n.ONE))return{x:f,y:p};const N=E.is0();b==null&&(b=N?n.ONE:n.inv(w));const M=n.mul(f,b),S=n.mul(p,b),y=n.mul(w,b);if(N)return{x:n.ZERO,y:n.ZERO};if(!n.eql(y,n.ONE))throw new Error("invZ was invalid");return{x:M,y:S}}),L=hb(E=>{if(E.is0()){if(e.allowInfinityPoint&&!n.is0(E.Y))return;throw new Error("bad point: ZERO")}const{x:b,y:f}=E.toAffine();if(!n.isValid(b)||!n.isValid(f))throw new Error("bad point: x or y not field elements");if(!$(b,f))throw new Error("bad point: equation left != right");if(!E.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function F(E,b,f,p,w){return f=new B(n.mul(f.X,E),f.Y,f.Z),b=db(p,b),f=db(w,f),b.add(f)}class B{constructor(b,f,p){this.X=A("x",b),this.Y=A("y",f,!0),this.Z=A("z",p),Object.freeze(this)}static CURVE(){return s}static fromAffine(b){const{x:f,y:p}=b||{};if(!b||!n.isValid(f)||!n.isValid(p))throw new Error("invalid affine point");if(b instanceof B)throw new Error("projective point not allowed");return n.is0(f)&&n.is0(p)?B.ZERO:new B(f,p,n.ONE)}static fromBytes(b){const f=B.fromAffine(m(ea(b,void 0,"point")));return f.assertValidity(),f}static fromHex(b){return B.fromBytes(an("pointHex",b))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(b=8,f=!0){return R.createCache(this,b),f||this.multiply(tw),this}assertValidity(){L(this)}hasEvenY(){const{y:b}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(b)}equals(b){T(b);const{X:f,Y:p,Z:w}=this,{X:N,Y:M,Z:S}=b,y=n.eql(n.mul(f,S),n.mul(N,w)),C=n.eql(n.mul(p,S),n.mul(M,w));return y&&C}negate(){return new B(this.X,n.neg(this.Y),this.Z)}double(){const{a:b,b:f}=s,p=n.mul(f,tw),{X:w,Y:N,Z:M}=this;let S=n.ZERO,y=n.ZERO,C=n.ZERO,I=n.mul(w,w),U=n.mul(N,N),K=n.mul(M,M),V=n.mul(w,N);return V=n.add(V,V),C=n.mul(w,M),C=n.add(C,C),S=n.mul(b,C),y=n.mul(p,K),y=n.add(S,y),S=n.sub(U,y),y=n.add(U,y),y=n.mul(S,y),S=n.mul(V,S),C=n.mul(p,C),K=n.mul(b,K),V=n.sub(I,K),V=n.mul(b,V),V=n.add(V,C),C=n.add(I,I),I=n.add(C,I),I=n.add(I,K),I=n.mul(I,V),y=n.add(y,I),K=n.mul(N,M),K=n.add(K,K),I=n.mul(K,V),S=n.sub(S,I),C=n.mul(K,U),C=n.add(C,C),C=n.add(C,C),new B(S,y,C)}add(b){T(b);const{X:f,Y:p,Z:w}=this,{X:N,Y:M,Z:S}=b;let y=n.ZERO,C=n.ZERO,I=n.ZERO;const U=s.a,K=n.mul(s.b,tw);let V=n.mul(f,N),te=n.mul(p,M),se=n.mul(w,S),ce=n.add(f,p),ie=n.add(N,M);ce=n.mul(ce,ie),ie=n.add(V,te),ce=n.sub(ce,ie),ie=n.add(f,w);let ve=n.add(N,S);return ie=n.mul(ie,ve),ve=n.add(V,se),ie=n.sub(ie,ve),ve=n.add(p,w),y=n.add(M,S),ve=n.mul(ve,y),y=n.add(te,se),ve=n.sub(ve,y),I=n.mul(U,ie),y=n.mul(K,se),I=n.add(y,I),y=n.sub(te,I),I=n.add(te,I),C=n.mul(y,I),te=n.add(V,V),te=n.add(te,V),se=n.mul(U,se),ie=n.mul(K,ie),te=n.add(te,se),se=n.sub(V,se),se=n.mul(U,se),ie=n.add(ie,se),V=n.mul(te,ie),C=n.add(C,V),V=n.mul(ve,ie),y=n.mul(ce,y),y=n.sub(y,V),V=n.mul(ce,te),I=n.mul(ve,I),I=n.add(I,V),new B(y,C,I)}subtract(b){return this.add(b.negate())}is0(){return this.equals(B.ZERO)}multiply(b){const{endo:f}=e;if(!i.isValidNot0(b))throw new Error("invalid scalar: out of range");let p,w;const N=M=>R.cached(this,M,S=>th(B,S));if(f){const{k1neg:M,k1:S,k2neg:y,k2:C}=k(b),{p:I,f:U}=N(S),{p:K,f:V}=N(C);w=U.add(V),p=F(f.beta,I,K,M,y)}else{const{p:M,f:S}=N(b);p=M,w=S}return th(B,[p,w])[0]}multiplyUnsafe(b){const{endo:f}=e,p=this;if(!i.isValid(b))throw new Error("invalid scalar: out of range");if(b===Dc||p.is0())return B.ZERO;if(b===qf)return p;if(R.hasCache(this))return this.multiply(b);if(f){const{k1neg:w,k1:N,k2neg:M,k2:S}=k(b),{p1:y,p2:C}=Hz(B,p,N,S);return F(f.beta,y,C,w,M)}else return R.unsafe(p,b)}multiplyAndAddUnsafe(b,f,p){const w=this.multiplyUnsafe(f).add(b.multiplyUnsafe(p));return w.is0()?void 0:w}toAffine(b){return D(this,b)}isTorsionFree(){const{isTorsionFree:b}=e;return o===qf?!0:b?b(B,this):R.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:b}=e;return o===qf?this:b?b(B,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(b=!0){return Ch(b,"isCompressed"),this.assertValidity(),g(B,this,b)}toHex(b=!0){return ph(this.toBytes(b))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(b=!0){return this.toBytes(b)}_setWindowSize(b){this.precompute(b)}static normalizeZ(b){return th(B,b)}static msm(b,f){return nO(B,i,b,f)}static fromPrivateKey(b){return B.BASE.multiply(Cf(i,b))}}B.BASE=new B(s.Gx,s.Gy,n.ONE),B.ZERO=new B(n.ZERO,n.ONE,n.ZERO),B.Fp=n,B.Fn=i;const q=i.BITS,R=new rO(B,e.endo?Math.ceil(q/2):q);return B.BASE.precompute(8),B}function KO(t){return Uint8Array.of(t?2:3)}function VO(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function GW(t,e={}){const{Fn:r}=t,n=e.randomBytes||eI,i=Object.assign(VO(t.Fp,r),{seed:X9(r.ORDER)});function s(g){try{return!!Cf(r,g)}catch{return!1}}function o(g,m){const{publicKey:v,publicKeyUncompressed:$}=i;try{const _=g.length;return m===!0&&_!==v||m===!1&&_!==$?!1:!!t.fromBytes(g)}catch{return!1}}function a(g=n(i.seed)){return zz(ea(g,i.seed,"seed"),r.ORDER)}function c(g,m=!0){return t.BASE.multiply(Cf(r,g)).toBytes(m)}function l(g){const m=a(g);return{secretKey:m,publicKey:c(m)}}function u(g){if(typeof g=="bigint")return!1;if(g instanceof t)return!0;const{secretKey:m,publicKey:v,publicKeyUncompressed:$}=i;if(r.allowedLengths||m===v)return;const _=an("key",g).length;return _===v||_===$}function h(g,m,v=!0){if(u(g)===!0)throw new Error("first arg must be private key");if(u(m)===!1)throw new Error("second arg must be public key");const $=Cf(r,g);return t.fromHex(m).multiply($).toBytes(v)}return Object.freeze({getPublicKey:c,getSharedSecret:h,keygen:l,Point:t,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:g=>Cf(r,g),precompute(g=8,m=t.BASE){return m.precompute(g,!1)}},lengths:i})}function YW(t,e,r={}){O9(e),Vm(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||eI,i=r.hmac||((f,...p)=>WO(e,f,Ca(...p))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:l,getPublicKey:u,getSharedSecret:h,utils:d,lengths:g}=GW(t,r),m={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},v="compact";function $(f){const p=a>>qf;return f>p}function _(f,p){if(!o.isValidNot0(p))throw new Error(`invalid signature ${f}: out of range 1..Point.Fn.ORDER`);return p}function x(f,p){Q3(p);const w=g.signature,N=p==="compact"?w:p==="recovered"?w+1:void 0;return ea(f,N,`${p} signature`)}class A{constructor(p,w,N){this.r=_("r",p),this.s=_("s",w),N!=null&&(this.recovery=N),Object.freeze(this)}static fromBytes(p,w=v){x(p,w);let N;if(w==="der"){const{r:C,s:I}=Cc.toSig(ea(p));return new A(C,I)}w==="recovered"&&(N=p[0],w="compact",p=p.subarray(1));const M=o.BYTES,S=p.subarray(0,M),y=p.subarray(M,M*2);return new A(o.fromBytes(S),o.fromBytes(y),N)}static fromHex(p,w){return this.fromBytes(ub(p),w)}addRecoveryBit(p){return new A(this.r,this.s,p)}recoverPublicKey(p){const w=s.ORDER,{r:N,s:M,recovery:S}=this;if(S==null||![0,1,2,3].includes(S))throw new Error("recovery id invalid");if(a*HO<w&&S>1)throw new Error("recovery id is ambiguous for h>1 curve");const C=S===2||S===3?N+a:N;if(!s.isValid(C))throw new Error("recovery id 2 or 3 invalid");const I=s.toBytes(C),U=t.fromBytes(Ca(KO((S&1)===0),I)),K=o.inv(C),V=k(an("msgHash",p)),te=o.create(-V*K),se=o.create(M*K),ce=t.BASE.multiplyUnsafe(te).add(U.multiplyUnsafe(se));if(ce.is0())throw new Error("point at infinify");return ce.assertValidity(),ce}hasHighS(){return $(this.s)}toBytes(p=v){if(Q3(p),p==="der")return ub(Cc.hexFromSig(this));const w=o.toBytes(this.r),N=o.toBytes(this.s);if(p==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Ca(Uint8Array.of(this.recovery),w,N)}return Ca(w,N)}toHex(p){return ph(this.toBytes(p))}assertValidity(){}static fromCompact(p){return A.fromBytes(an("sig",p),"compact")}static fromDER(p){return A.fromBytes(an("sig",p),"der")}normalizeS(){return this.hasHighS()?new A(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return ph(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return ph(this.toBytes("compact"))}}const T=r.bits2int||function(p){if(p.length>8192)throw new Error("input is too large");const w=bv(p),N=p.length*8-c;return N>0?w>>BigInt(N):w},k=r.bits2int_modN||function(p){return o.create(T(p))},D=Km(c);function L(f){return V3("num < 2^"+c,f,Dc,D),o.toBytes(f)}function F(f,p){return ea(f,void 0,"message"),p?ea(e(f),void 0,"prehashed message"):f}function B(f,p,w){if(["recovered","canonical"].some(te=>te in w))throw new Error("sign() legacy options not supported");const{lowS:N,prehash:M,extraEntropy:S}=lE(w,m);f=F(f,M);const y=k(f),C=Cf(o,p),I=[L(C),L(y)];if(S!=null&&S!==!1){const te=S===!0?n(g.secretKey):S;I.push(an("extraEntropy",te))}const U=Ca(...I),K=y;function V(te){const se=T(te);if(!o.isValidNot0(se))return;const ce=o.inv(se),ie=t.BASE.multiply(se).toAffine(),ve=o.create(ie.x);if(ve===Dc)return;const Ne=o.create(ce*o.create(K+ve*C));if(Ne===Dc)return;let Ae=(ie.x===ve?0:2)|Number(ie.y&qf),et=Ne;return N&&$(Ne)&&(et=o.neg(Ne),Ae^=1),new A(ve,et,Ae)}return{seed:U,k2sig:V}}function q(f,p,w={}){f=an("message",f);const{seed:N,k2sig:M}=B(f,p,w);return Pz(e.outputLen,o.BYTES,i)(N,M)}function R(f){let p;const w=typeof f=="string"||Hm(f),N=!w&&f!==null&&typeof f=="object"&&typeof f.r=="bigint"&&typeof f.s=="bigint";if(!w&&!N)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(N)p=new A(f.r,f.s);else if(w){try{p=A.fromBytes(an("sig",f),"der")}catch(M){if(!(M instanceof Cc.Err))throw M}if(!p)try{p=A.fromBytes(an("sig",f),"compact")}catch{return!1}}return p||!1}function E(f,p,w,N={}){const{lowS:M,prehash:S,format:y}=lE(N,m);if(w=an("publicKey",w),p=F(an("message",p),S),"strict"in N)throw new Error("options.strict was renamed to lowS");const C=y===void 0?R(f):A.fromBytes(an("sig",f),y);if(C===!1)return!1;try{const I=t.fromBytes(w);if(M&&C.hasHighS())return!1;const{r:U,s:K}=C,V=k(p),te=o.inv(K),se=o.create(V*te),ce=o.create(U*te),ie=t.BASE.multiplyUnsafe(se).add(I.multiplyUnsafe(ce));return ie.is0()?!1:o.create(ie.x)===U}catch{return!1}}function b(f,p,w={}){const{prehash:N}=lE(w,m);return p=F(p,N),A.fromBytes(f,"recovered").recoverPublicKey(p).toBytes()}return Object.freeze({keygen:l,getPublicKey:u,getSharedSecret:h,utils:d,lengths:g,Point:t,sign:q,verify:E,recoverPublicKey:b,Signature:A,hash:e})}function QW(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=Wh(e.n,{BITS:t.nBitLength,allowedLengths:n,modFromBytes:t.wrapPrivateKey}),s={Fp:r,Fn:i,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function ZW(t){const{CURVE:e,curveOpts:r}=QW(t),n={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:n}}function JW(t,e){const r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,Z9(r.Fn.ORDER,r.Fn.BITS))})}function XW(t){const{CURVE:e,curveOpts:r,hash:n,ecdsaOpts:i}=ZW(t),s=VW(e,r),o=YW(s,n,i);return JW(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function eH(t,e){const r=n=>XW({...t,hash:n});return{...r(e),create:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vI={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},tH={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},vA=BigInt(2);function rH(t){const e=vI.p,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,h=on(u,r,e)*u%e,d=on(h,r,e)*u%e,g=on(d,vA,e)*l%e,m=on(g,i,e)*g%e,v=on(m,s,e)*m%e,$=on(v,a,e)*v%e,_=on($,c,e)*$%e,x=on(_,a,e)*v%e,A=on(x,r,e)*u%e,T=on(A,o,e)*m%e,k=on(T,n,e)*l%e,D=on(k,vA,e);if(!Z3.eql(Z3.sqr(D),t))throw new Error("Cannot find square root");return D}const Z3=Wh(vI.p,{sqrt:rH}),nH=eH({...vI,Fp:Z3,lowS:!0,endo:tH},U9);Gm.utils.randomPrivateKey;Gm.getPublicKey;function EA(t){try{return Gm.ExtendedPoint.fromHex(t),!0}catch{return!1}}const GO=(t,e)=>Gm.sign(t,e.slice(0,32)),iH=Gm.verify,hi=t=>Xe.Buffer.isBuffer(t)?t:t instanceof Uint8Array?Xe.Buffer.from(t.buffer,t.byteOffset,t.byteLength):Xe.Buffer.from(t);class sH{constructor(e){Object.assign(this,e)}encode(){return Xe.Buffer.from(pO(t1,this))}static decode(e){return gO(t1,this,e)}static decodeUnchecked(e){return lO(t1,this,e)}}const t1=new Map;var YO;const oH=32,nu=32;function aH(t){return t._bn!==void 0}let _A=1;class Te extends sH{constructor(e){if(super({}),this._bn=void 0,aH(e))this._bn=e._bn;else{if(typeof e=="string"){const r=mi.decode(e);if(r.length!=nu)throw new Error("Invalid public key input");this._bn=new gA(r)}else this._bn=new gA(e);if(this._bn.byteLength()>nu)throw new Error("Invalid public key input")}}static unique(){const e=new Te(_A);return _A+=1,new Te(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return mi.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(Xe.Buffer);if(e.length===nu)return e;const r=Xe.Buffer.alloc(32);return e.copy(r,32-e.length),r}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,r,n){const i=Xe.Buffer.concat([e.toBuffer(),Xe.Buffer.from(r),n.toBuffer()]),s=mA(i);return new Te(s)}static createProgramAddressSync(e,r){let n=Xe.Buffer.alloc(0);e.forEach(function(s){if(s.length>oH)throw new TypeError("Max seed length exceeded");n=Xe.Buffer.concat([n,hi(s)])}),n=Xe.Buffer.concat([n,r.toBuffer(),Xe.Buffer.from("ProgramDerivedAddress")]);const i=mA(n);if(EA(i))throw new Error("Invalid seeds, address must fall off the curve");return new Te(i)}static async createProgramAddress(e,r){return this.createProgramAddressSync(e,r)}static findProgramAddressSync(e,r){let n=255,i;for(;n!=0;){try{const s=e.concat(Xe.Buffer.from([n]));i=this.createProgramAddressSync(s,r)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,r){return this.findProgramAddressSync(e,r)}static isOnCurve(e){const r=new Te(e);return EA(r.toBytes())}}YO=Te;Te.default=new YO("11111111111111111111111111111111");t1.set(Te,{kind:"struct",fields:[["_bn","u256"]]});new Te("BPFLoader1111111111111111111111111111111111");const Wf=1232,EI=127,bb=64;class QO extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(QO.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class ZO extends Error{constructor(e,r){super(`Transaction was not confirmed in ${r.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ZO.prototype,"name",{value:"TransactionExpiredTimeoutError"});class G0 extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(G0.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class vb{constructor(e,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=r}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const r of this.keySegments()){if(e<r.length)return r[e];e-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,o)=>{n.set(s.toBase58(),o)});const i=s=>{const o=n.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const yt=(t="publicKey")=>jr(32,t),cH=(t="signature")=>jr(64,t),Nf=(t="string")=>{const e=Me([De("length"),De("lengthPadding"),jr(gh(De(),-8),"chars")],t),r=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,o)=>r(s,o).chars.toString(),i.encode=(s,o,a)=>{const c={chars:Xe.Buffer.from(s,"utf8")};return n(c,o,a)},i.alloc=s=>De().span+De().span+Xe.Buffer.from(s,"utf8").length,i},lH=(t="authorized")=>Me([yt("staker"),yt("withdrawer")],t),uH=(t="lockup")=>Me([Ls("unixTimestamp"),Ls("epoch"),yt("custodian")],t),hH=(t="voteInit")=>Me([yt("nodePubkey"),yt("authorizedVoter"),yt("authorizedWithdrawer"),Ut("commission")],t),dH=(t="voteAuthorizeWithSeedArgs")=>Me([De("voteAuthorizationType"),yt("currentAuthorityDerivedKeyOwnerPubkey"),Nf("currentAuthorityDerivedKeySeed"),yt("newAuthorized")],t);function JO(t,e){const r=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*r(i.elementLayout)}else if("fields"in i)return JO({layout:i},e[i.property]);return 0};let n=0;return t.layout.fields.forEach(i=>{n+=r(i)}),n}function Bs(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(n&127)<<r*7,r+=1,!(n&128))break}return e}function Us(t,e){let r=e;for(;;){let n=r&127;if(r>>=7,r==0){t.push(n);break}else n|=128,t.push(n)}}function qr(t,e){if(!t)throw new Error(e||"Assertion failed")}class Av{constructor(e,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=r}static compile(e,r){const n=new Map,i=o=>{const a=o.toBase58();let c=n.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,c)),c},s=i(r);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const c=i(a.pubkey);c.isSigner||(c.isSigner=a.isSigner),c.isWritable||(c.isWritable=a.isWritable)}}return new Av(r,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];qr(e.length<=256,"Max static account keys length exceeded");const r=e.filter(([,c])=>c.isSigner&&c.isWritable),n=e.filter(([,c])=>c.isSigner&&!c.isWritable),i=e.filter(([,c])=>!c.isSigner&&c.isWritable),s=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:r.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{qr(r.length>0,"Expected at least one writable signer key");const[c]=r[0];qr(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...r.map(([c])=>new Te(c)),...n.map(([c])=>new Te(c)),...i.map(([c])=>new Te(c)),...s.map(([c])=>new Te(c))];return[o,a]}extractTableLookup(e){const[r,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(r.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:r,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,r){const n=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(r(o)){const a=new Te(s),c=e.findIndex(l=>l.equals(a));c>=0&&(qr(c<256,"Max lookup table index exceeded"),n.push(c),i.push(a),this.keyMetaMap.delete(s))}return[n,i]}}const XO="Reached end of buffer unexpectedly";function $c(t){if(t.length===0)throw new Error(XO);return t.shift()}function js(t,...e){const[r]=e;if(e.length===2?r+(e[1]??0)>t.length:r>=t.length)throw new Error(XO);return t.splice(...e)}class Vc{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(r=>new Te(r)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:mi.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new vb(this.staticAccountKeys)}static compile(e){const r=Av.compile(e.instructions,e.payerKey),[n,i]=r.getMessageComponents(),o=new vb(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:mi.encode(a.data)}));return new Vc({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-r,s=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=r-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,r)=>!this.isProgramId(r))}serialize(){const e=this.accountKeys.length;let r=[];Us(r,e);const n=this.instructions.map(h=>{const{accounts:d,programIdIndex:g}=h,m=Array.from(mi.decode(h.data));let v=[];Us(v,d.length);let $=[];return Us($,m.length),{programIdIndex:g,keyIndicesCount:Xe.Buffer.from(v),keyIndices:d,dataLength:Xe.Buffer.from($),data:m}});let i=[];Us(i,n.length);let s=Xe.Buffer.alloc(Wf);Xe.Buffer.from(i).copy(s);let o=i.length;n.forEach(h=>{const g=Me([Ut("programIdIndex"),jr(h.keyIndicesCount.length,"keyIndicesCount"),Fi(Ut("keyIndex"),h.keyIndices.length,"keyIndices"),jr(h.dataLength.length,"dataLength"),Fi(Ut("userdatum"),h.data.length,"data")]).encode(h,s,o);o+=g}),s=s.slice(0,o);const a=Me([jr(1,"numRequiredSignatures"),jr(1,"numReadonlySignedAccounts"),jr(1,"numReadonlyUnsignedAccounts"),jr(r.length,"keyCount"),Fi(yt("key"),e,"keys"),yt("recentBlockhash")]),c={numRequiredSignatures:Xe.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Xe.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Xe.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Xe.Buffer.from(r),keys:this.accountKeys.map(h=>hi(h.toBytes())),recentBlockhash:mi.decode(this.recentBlockhash)};let l=Xe.Buffer.alloc(2048);const u=a.encode(c,l);return s.copy(l,u),l.slice(0,u+s.length)}static from(e){let r=[...e];const n=$c(r);if(n!==(n&EI))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=$c(r),s=$c(r),o=Bs(r);let a=[];for(let d=0;d<o;d++){const g=js(r,0,nu);a.push(new Te(Xe.Buffer.from(g)))}const c=js(r,0,nu),l=Bs(r);let u=[];for(let d=0;d<l;d++){const g=$c(r),m=Bs(r),v=js(r,0,m),$=Bs(r),_=js(r,0,$),x=mi.encode(Xe.Buffer.from(_));u.push({programIdIndex:g,accounts:v,data:x})}const h={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:mi.encode(Xe.Buffer.from(c)),accountKeys:a,instructions:u};return new Vc(h)}}class Zg{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const r of this.addressTableLookups)e+=r.readonlyIndexes.length+r.writableIndexes.length;return e}getAccountKeys(e){let r;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)r=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new vb(this.staticAccountKeys,r)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-r,o=n-r-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=r-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const r={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)r.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)r.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return r}static compile(e){const r=Av.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const u of s){const h=r.extractTableLookup(u);if(h!==void 0){const[d,{writable:g,readonly:m}]=h;n.push(d),i.writable.push(...g),i.readonly.push(...m)}}const[o,a]=r.getMessageComponents(),l=new vb(a,i).compileInstructions(e.instructions);return new Zg({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:l,addressTableLookups:n})}serialize(){const e=Array();Us(e,this.staticAccountKeys.length);const r=this.serializeInstructions(),n=Array();Us(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Us(s,this.addressTableLookups.length);const o=Me([Ut("prefix"),Me([Ut("numRequiredSignatures"),Ut("numReadonlySignedAccounts"),Ut("numReadonlyUnsignedAccounts")],"header"),jr(e.length,"staticAccountKeysLength"),Fi(yt(),this.staticAccountKeys.length,"staticAccountKeys"),yt("recentBlockhash"),jr(n.length,"instructionsLength"),jr(r.length,"serializedInstructions"),jr(s.length,"addressTableLookupsLength"),jr(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(Wf),l=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(u=>u.toBytes()),recentBlockhash:mi.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,l)}serializeInstructions(){let e=0;const r=new Uint8Array(Wf);for(const n of this.compiledInstructions){const i=Array();Us(i,n.accountKeyIndexes.length);const s=Array();Us(s,n.data.length);const o=Me([Ut("programIdIndex"),jr(i.length,"encodedAccountKeyIndexesLength"),Fi(Ut(),n.accountKeyIndexes.length,"accountKeyIndexes"),jr(s.length,"encodedDataLength"),jr(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},r,e)}return r.slice(0,e)}serializeAddressTableLookups(){let e=0;const r=new Uint8Array(Wf);for(const n of this.addressTableLookups){const i=Array();Us(i,n.writableIndexes.length);const s=Array();Us(s,n.readonlyIndexes.length);const o=Me([yt("accountKey"),jr(i.length,"encodedWritableIndexesLength"),Fi(Ut(),n.writableIndexes.length,"writableIndexes"),jr(s.length,"encodedReadonlyIndexesLength"),Fi(Ut(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},r,e)}return r.slice(0,e)}static deserialize(e){let r=[...e];const n=$c(r),i=n&EI;qr(n!==i,"Expected versioned message but received legacy message");const s=i;qr(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:$c(r),numReadonlySignedAccounts:$c(r),numReadonlyUnsignedAccounts:$c(r)},a=[],c=Bs(r);for(let m=0;m<c;m++)a.push(new Te(js(r,0,nu)));const l=mi.encode(js(r,0,nu)),u=Bs(r),h=[];for(let m=0;m<u;m++){const v=$c(r),$=Bs(r),_=js(r,0,$),x=Bs(r),A=new Uint8Array(js(r,0,x));h.push({programIdIndex:v,accountKeyIndexes:_,data:A})}const d=Bs(r),g=[];for(let m=0;m<d;m++){const v=new Te(js(r,0,nu)),$=Bs(r),_=js(r,0,$),x=Bs(r),A=js(r,0,x);g.push({accountKey:v,writableIndexes:_,readonlyIndexes:A})}return new Zg({header:o,staticAccountKeys:a,recentBlockhash:l,compiledInstructions:h,addressTableLookups:g})}}const _I={deserializeMessageVersion(t){const e=t[0],r=e&EI;return r===e?"legacy":r},deserialize:t=>{const e=_I.deserializeMessageVersion(t);if(e==="legacy")return Vc.from(t);if(e===0)return Zg.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let dl=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const fH=Xe.Buffer.alloc(bb).fill(0);class Go{constructor(e){this.keys=void 0,this.programId=void 0,this.data=Xe.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:r,isWritable:n})=>({pubkey:e.toJSON(),isSigner:r,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class yi{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:r,nonceInfo:n}=e;this.minNonceContextSlot=r,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:r,lastValidBlockHeight:n}=e;this.recentBlockhash=r,this.lastValidBlockHeight=n}else{const{recentBlockhash:r,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=r}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(r=>{"instructions"in r?this.instructions=this.instructions.concat(r.instructions):"data"in r&&"programId"in r&&"keys"in r?this.instructions.push(r):this.instructions.push(new Go(r))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?r=[this.nonceInfo.nonceInstruction,...this.instructions]:r=this.instructions):(e=this.recentBlockhash,r=this.instructions),!e)throw new Error("Transaction recentBlockhash required");r.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let v=0;v<r.length;v++)if(r[v].programId===void 0)throw new Error(`Transaction instruction index ${v} has undefined program id`);const i=[],s=[];r.forEach(v=>{v.keys.forEach(_=>{s.push({..._})});const $=v.programId.toString();i.includes($)||i.push($)}),i.forEach(v=>{s.push({pubkey:new Te(v),isSigner:!1,isWritable:!1})});const o=[];s.forEach(v=>{const $=v.pubkey.toString(),_=o.findIndex(x=>x.pubkey.toString()===$);_>-1?(o[_].isWritable=o[_].isWritable||v.isWritable,o[_].isSigner=o[_].isSigner||v.isSigner):o.push(v)}),o.sort(function(v,$){if(v.isSigner!==$.isSigner)return v.isSigner?-1:1;if(v.isWritable!==$.isWritable)return v.isWritable?-1:1;const _={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return v.pubkey.toBase58().localeCompare($.pubkey.toBase58(),"en",_)});const a=o.findIndex(v=>v.pubkey.equals(n));if(a>-1){const[v]=o.splice(a,1);v.isSigner=!0,v.isWritable=!0,o.unshift(v)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const v of this.signatures){const $=o.findIndex(_=>_.pubkey.equals(v.publicKey));if($>-1)o[$].isSigner||(o[$].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${v.publicKey.toString()}`)}let c=0,l=0,u=0;const h=[],d=[];o.forEach(({pubkey:v,isSigner:$,isWritable:_})=>{$?(h.push(v.toString()),c+=1,_||(l+=1)):(d.push(v.toString()),_||(u+=1))});const g=h.concat(d),m=r.map(v=>{const{data:$,programId:_}=v;return{programIdIndex:g.indexOf(_.toString()),accounts:v.keys.map(x=>g.indexOf(x.pubkey.toString())),data:mi.encode($)}});return m.forEach(v=>{qr(v.programIdIndex>=0),v.accounts.forEach($=>qr($>=0))}),new Vc({header:{numRequiredSignatures:c,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:u},accountKeys:g,recentBlockhash:e,instructions:m})}_compile(){const e=this.compileMessage(),r=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===r.length&&this.signatures.every((i,s)=>r[s].equals(i.publicKey))||(this.signatures=r.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const r=new Set;this.signatures=e.filter(n=>{const i=n.toString();return r.has(i)?!1:(r.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,n=[];for(const s of e){const o=s.publicKey.toString();r.has(o)||(r.add(o),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,n=[];for(const s of e){const o=s.publicKey.toString();r.has(o)||(r.add(o),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...r){const n=e.serialize();r.forEach(i=>{const s=GO(n,i.secretKey);this._addSignature(i.publicKey,hi(s))})}addSignature(e,r){this._compile(),this._addSignature(e,r)}_addSignature(e,r){qr(r.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=Xe.Buffer.from(r)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,r){const n={};for(const{signature:i,publicKey:s}of this.signatures)i===null?r&&(n.missing||(n.missing=[])).push(s):iH(i,e,s.toBytes())||(n.invalid||(n.invalid=[])).push(s);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:r,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n){const s=this._getMessageSignednessErrors(i,r);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:r}=this,n=[];Us(n,r.length);const i=n.length+r.length*64+e.length,s=Xe.Buffer.alloc(i);return qr(r.length<256),Xe.Buffer.from(n).copy(s,0),r.forEach(({signature:o},a)=>{o!==null&&(qr(o.length===64,"signature has invalid length"),Xe.Buffer.from(o).copy(s,n.length+a*64))}),e.copy(s,n.length+r.length*64),qr(s.length<=Wf,`Transaction too large: ${s.length} > ${Wf}`),s}get keys(){return qr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return qr(this.instructions.length===1),this.instructions[0].programId}get data(){return qr(this.instructions.length===1),this.instructions[0].data}static from(e){let r=[...e];const n=Bs(r);let i=[];for(let s=0;s<n;s++){const o=js(r,0,bb);i.push(mi.encode(Xe.Buffer.from(o)))}return yi.populate(Vc.from(r),i)}static populate(e,r=[]){const n=new yi;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),r.forEach((i,s)=>{const o={signature:i==mi.encode(fH)?null:mi.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new Go({keys:s,programId:e.accountKeys[i.programIdIndex],data:mi.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class ap{get version(){return this.message.version}constructor(e,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)qr(r.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(bb));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),r=Array();Us(r,this.signatures.length);const n=Me([jr(r.length,"encodedSignaturesLength"),Fi(cH(),this.signatures.length,"signatures"),jr(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let r=[...e];const n=[],i=Bs(r);for(let o=0;o<i;o++)n.push(new Uint8Array(js(r,0,bb)));const s=_I.deserialize(new Uint8Array(r));return new ap(s,n)}sign(e){const r=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(o=>o.equals(i.publicKey));qr(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=GO(r,i.secretKey)}}addSignature(e,r){qr(r.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));qr(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=r}}const pH=160,gH=64,mH=pH/gH,yH=1e3/mH;new Te("SysvarC1ock11111111111111111111111111111111");new Te("SysvarEpochSchedu1e111111111111111111111111");new Te("Sysvar1nstructions1111111111111111111111111");const uE=new Te("SysvarRecentB1ockHashes11111111111111111111"),SA=new Te("SysvarRent111111111111111111111111111111111");new Te("SysvarRewards111111111111111111111111111111");new Te("SysvarS1otHashes111111111111111111111111111");new Te("SysvarS1otHistory11111111111111111111111111");new Te("SysvarStakeHistory1111111111111111111111111");class xA extends Error{constructor({action:e,signature:r,transactionMessage:n,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${r} resulted in an error. 
${n}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+s+o;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=r,this.transactionMessage=n,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((r,n)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,r(s)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class Pe extends Error{constructor({code:e,message:r,data:n},i){super(i!=null?`${i}: ${r}`:r),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}function Xd(t){return new Promise(e=>setTimeout(e,t))}function co(t,e){const r=t.layout.span>=0?t.layout.span:JO(t,e),n=Xe.Buffer.alloc(r),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,n),n}const wH=li("lamportsPerSignature"),ek=Me([De("version"),De("state"),yt("authorizedPubkey"),yt("nonce"),Me([wH],"feeCalculator")]),IA=ek.span;class SI{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const r=ek.decode(hi(e),0);return new SI({authorizedPubkey:new Te(r.authorizedPubkey),nonce:new Te(r.nonce).toString(),feeCalculator:r.feeCalculator})}}function cp(t){const e=jr(8,t),r=e.decode.bind(e),n=e.encode.bind(e),i=e,s=iW();return i.decode=(o,a)=>{const c=r(o,a);return s.decode(c)},i.encode=(o,a,c)=>{const l=s.encode(o);return n(l,a,c)},i}const lo=Object.freeze({Create:{index:0,layout:Me([De("instruction"),Ls("lamports"),Ls("space"),yt("programId")])},Assign:{index:1,layout:Me([De("instruction"),yt("programId")])},Transfer:{index:2,layout:Me([De("instruction"),cp("lamports")])},CreateWithSeed:{index:3,layout:Me([De("instruction"),yt("base"),Nf("seed"),Ls("lamports"),Ls("space"),yt("programId")])},AdvanceNonceAccount:{index:4,layout:Me([De("instruction")])},WithdrawNonceAccount:{index:5,layout:Me([De("instruction"),Ls("lamports")])},InitializeNonceAccount:{index:6,layout:Me([De("instruction"),yt("authorized")])},AuthorizeNonceAccount:{index:7,layout:Me([De("instruction"),yt("authorized")])},Allocate:{index:8,layout:Me([De("instruction"),Ls("space")])},AllocateWithSeed:{index:9,layout:Me([De("instruction"),yt("base"),Nf("seed"),Ls("space"),yt("programId")])},AssignWithSeed:{index:10,layout:Me([De("instruction"),yt("base"),Nf("seed"),yt("programId")])},TransferWithSeed:{index:11,layout:Me([De("instruction"),cp("lamports"),Nf("seed"),yt("programId")])},UpgradeNonceAccount:{index:12,layout:Me([De("instruction")])}});class hu{constructor(){}static createAccount(e){const r=lo.Create,n=co(r,{lamports:e.lamports,space:e.space,programId:hi(e.programId.toBuffer())});return new Go({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let r,n;if("basePubkey"in e){const i=lo.TransferWithSeed;r=co(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:hi(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=lo.Transfer;r=co(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Go({keys:n,programId:this.programId,data:r})}static assign(e){let r,n;if("basePubkey"in e){const i=lo.AssignWithSeed;r=co(i,{base:hi(e.basePubkey.toBuffer()),seed:e.seed,programId:hi(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=lo.Assign;r=co(i,{programId:hi(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Go({keys:n,programId:this.programId,data:r})}static createAccountWithSeed(e){const r=lo.CreateWithSeed,n=co(r,{base:hi(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:hi(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Go({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const r=new yi;"basePubkey"in e&&"seed"in e?r.add(hu.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:IA,programId:this.programId})):r.add(hu.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:IA,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}static nonceInitialize(e){const r=lo.InitializeNonceAccount,n=co(r,{authorized:hi(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:uE,isSigner:!1,isWritable:!1},{pubkey:SA,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Go(i)}static nonceAdvance(e){const r=lo.AdvanceNonceAccount,n=co(r),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:uE,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Go(i)}static nonceWithdraw(e){const r=lo.WithdrawNonceAccount,n=co(r,{lamports:e.lamports});return new Go({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:uE,isSigner:!1,isWritable:!1},{pubkey:SA,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const r=lo.AuthorizeNonceAccount,n=co(r,{authorized:hi(e.newAuthorizedPubkey.toBuffer())});return new Go({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let r,n;if("basePubkey"in e){const i=lo.AllocateWithSeed;r=co(i,{base:hi(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:hi(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=lo.Allocate;r=co(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Go({keys:n,programId:this.programId,data:r})}}hu.programId=new Te("11111111111111111111111111111111");new Te("BPFLoader2111111111111111111111111111111111");function bH(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hE,AA;function vH(){if(AA)return hE;AA=1;var t=Object.prototype.toString,e=Object.keys||function(n){var i=[];for(var s in n)i.push(s);return i};function r(n,i){var s,o,a,c,l,u,h;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return r(n.toJSON(),i);if(h=t.call(n),h==="[object Array]"){for(a="[",o=n.length-1,s=0;s<o;s++)a+=r(n[s],!0)+",";return o>-1&&(a+=r(n[s],!0)),a+"]"}else if(h==="[object Object]"){for(c=e(n).sort(),o=c.length,a="",s=0;s<o;)l=c[s],u=r(n[l],!1),u!==void 0&&(a&&(a+=","),a+=JSON.stringify(l)+":"+u),s++;return"{"+a+"}"}else return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return hE=function(n){var i=r(n,!1);if(i!==void 0)return""+i},hE}var EH=vH(),CA=bH(EH);const d0=32;function dE(t){let e=0;for(;t>1;)t/=2,e++;return e}function _H(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class SH{constructor(e,r,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=r,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const r=dE(_H(e+d0+1))-dE(d0)-1,n=this.getSlotsInEpoch(r),i=e-(n-d0);return[r,i]}else{const r=e-this.firstNormalSlot,n=Math.floor(r/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=r%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*d0:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+dE(d0)):this.slotsPerEpoch}}var xH=globalThis.fetch;class IH extends qW{constructor(e,r,n){const i=s=>{const o=FW(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...r});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,r,n),this.underlyingSocket=void 0}call(...e){var n;const r=(n=this.underlyingSocket)==null?void 0:n.readyState;return r===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...e){var n;const r=(n=this.underlyingSocket)==null?void 0:n.readyState;return r===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}}function AH(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${t.index}`);return r}const NA=56;class MA{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const r=AH(CH,e),n=e.length-NA;qr(n>=0,"lookup table is invalid"),qr(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=Me([Fi(yt(),i,"addresses")]).decode(e.slice(NA));return{deactivationSlot:r.deactivationSlot,lastExtendedSlot:r.lastExtendedSlot,lastExtendedSlotStartIndex:r.lastExtendedStartIndex,authority:r.authority.length!==0?new Te(r.authority[0]):void 0,addresses:s.map(o=>new Te(o))}}}const CH={index:1,layout:Me([De("typeIndex"),cp("deactivationSlot"),li("lastExtendedSlot"),Ut("lastExtendedStartIndex"),Ut(),Fi(yt(),gh(Ut(),-1),"authority")])},NH=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function MH(t){const e=t.match(NH);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[r,n,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${n}${c}${s}`}const rn=Zm(yI(Te),pe(),t=>new Te(t)),tk=wI([pe(),Xr("base64")]),xI=Zm(yI(Xe.Buffer),tk,t=>Xe.Buffer.from(t[0],"base64")),TH=30*1e3;function $H(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function pr(t){let e,r;if(typeof t=="string")e=t;else if(t){const{commitment:n,...i}=t;e=n,r=i}return{commitment:e,config:r}}function TA(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function rk(t){return rs([le({jsonrpc:Xr("2.0"),id:pe(),result:t}),le({jsonrpc:Xr("2.0"),id:pe(),error:le({code:kp(),message:pe(),data:ke(hW())})})])}const PH=rk(kp());function ht(t){return Zm(rk(t),PH,e=>"error"in e?e:{...e,result:we(e.result,t)})}function dn(t){return ht(le({context:le({slot:X()}),value:t}))}function Cv(t){return le({context:le({slot:X()}),value:t})}function fE(t,e){return t===0?new Zg({header:e.header,staticAccountKeys:e.accountKeys.map(r=>new Te(r)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(r=>({programIdIndex:r.programIdIndex,accountKeyIndexes:r.accounts,data:mi.decode(r.data)})),addressTableLookups:e.addressTableLookups}):new Vc(e)}const OH=le({foundation:X(),foundationTerm:X(),initial:X(),taper:X(),terminal:X()}),kH=ht(be(Ee(le({epoch:X(),effectiveSlot:X(),amount:X(),postBalance:X(),commission:ke(Ee(X()))})))),RH=be(le({slot:X(),prioritizationFee:X()})),DH=le({total:X(),validator:X(),foundation:X(),epoch:X()}),LH=le({epoch:X(),slotIndex:X(),slotsInEpoch:X(),absoluteSlot:X(),blockHeight:ke(X()),transactionCount:ke(X())}),BH=le({slotsPerEpoch:X(),leaderScheduleSlotOffset:X(),warmup:Ra(),firstNormalEpoch:X(),firstNormalSlot:X()}),UH=DO(pe(),be(X())),Vh=Ee(rs([le({}),pe()])),jH=le({err:Vh}),FH=Xr("receivedSignature"),zH=le({"solana-core":pe(),"feature-set":ke(X())}),qH=le({program:pe(),programId:rn,parsed:kp()}),WH=le({programId:rn,accounts:be(rn),data:pe()}),$A=dn(le({err:Ee(rs([le({}),pe()])),logs:Ee(be(pe())),accounts:ke(Ee(be(Ee(le({executable:Ra(),owner:pe(),lamports:X(),data:be(pe()),rentEpoch:ke(X())}))))),unitsConsumed:ke(X()),returnData:ke(Ee(le({programId:pe(),data:wI([pe(),Xr("base64")])}))),innerInstructions:ke(Ee(be(le({index:X(),instructions:be(rs([qH,WH]))}))))})),HH=dn(le({byIdentity:DO(pe(),be(X())),range:le({firstSlot:X(),lastSlot:X()})}));function KH(t,e,r,n,i,s){const o=r||xH;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(u,h)=>{const d=await new Promise((g,m)=>{try{n(u,h,(v,$)=>g([v,$]))}catch(v){m(v)}});return await o(...d)}),new BW(async(u,h)=>{const d={method:"POST",body:u,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},KK)};try{let g=5,m,v=500;for(;c?m=await c(t,d):m=await o(t,d),!(m.status!==429||i===!0||(g-=1,g===0));)console.error(`Server responded with ${m.status} ${m.statusText}.  Retrying after ${v}ms delay...`),await Xd(v),v*=2;const $=await m.text();m.ok?h(null,$):h(new Error(`${m.status} ${m.statusText}: ${$}`))}catch(g){g instanceof Error&&h(g)}},{})}function VH(t){return(e,r)=>new Promise((n,i)=>{t.request(e,r,(s,o)=>{if(s){i(s);return}n(o)})})}function GH(t){return e=>new Promise((r,n)=>{e.length===0&&r([]);const i=e.map(s=>t.request(s.methodName,s.args));t.request(i,(s,o)=>{if(s){n(s);return}r(o)})})}const YH=ht(OH),QH=ht(DH),ZH=ht(RH),JH=ht(LH),XH=ht(BH),eK=ht(UH),tK=ht(X()),rK=dn(le({total:X(),circulating:X(),nonCirculating:X(),nonCirculatingAccounts:be(rn)})),J3=le({amount:pe(),uiAmount:Ee(X()),decimals:X(),uiAmountString:ke(pe())}),nK=dn(be(le({address:rn,amount:pe(),uiAmount:Ee(X()),decimals:X(),uiAmountString:ke(pe())}))),iK=dn(be(le({pubkey:rn,account:le({executable:Ra(),owner:rn,lamports:X(),data:xI,rentEpoch:X()})}))),X3=le({program:pe(),parsed:kp(),space:X()}),sK=dn(be(le({pubkey:rn,account:le({executable:Ra(),owner:rn,lamports:X(),data:X3,rentEpoch:X()})}))),oK=dn(be(le({lamports:X(),address:rn}))),Jg=le({executable:Ra(),owner:rn,lamports:X(),data:xI,rentEpoch:X()}),aK=le({pubkey:rn,account:Jg}),cK=Zm(rs([yI(Xe.Buffer),X3]),rs([tk,X3]),t=>Array.isArray(t)?we(t,xI):t),eS=le({executable:Ra(),owner:rn,lamports:X(),data:cK,rentEpoch:X()}),lK=le({pubkey:rn,account:eS}),uK=le({state:rs([Xr("active"),Xr("inactive"),Xr("activating"),Xr("deactivating")]),active:X(),inactive:X()}),hK=ht(be(le({signature:pe(),slot:X(),err:Vh,memo:Ee(pe()),blockTime:ke(Ee(X()))}))),dK=ht(be(le({signature:pe(),slot:X(),err:Vh,memo:Ee(pe()),blockTime:ke(Ee(X()))}))),fK=le({subscription:X(),result:Cv(Jg)}),pK=le({pubkey:rn,account:Jg}),gK=le({subscription:X(),result:Cv(pK)}),mK=le({parent:X(),slot:X(),root:X()}),yK=le({subscription:X(),result:mK}),wK=rs([le({type:rs([Xr("firstShredReceived"),Xr("completed"),Xr("optimisticConfirmation"),Xr("root")]),slot:X(),timestamp:X()}),le({type:Xr("createdBank"),parent:X(),slot:X(),timestamp:X()}),le({type:Xr("frozen"),slot:X(),timestamp:X(),stats:le({numTransactionEntries:X(),numSuccessfulTransactions:X(),numFailedTransactions:X(),maxTransactionsPerEntry:X()})}),le({type:Xr("dead"),slot:X(),timestamp:X(),err:pe()})]),bK=le({subscription:X(),result:wK}),vK=le({subscription:X(),result:Cv(rs([jH,FH]))}),EK=le({subscription:X(),result:X()}),_K=le({pubkey:pe(),gossip:Ee(pe()),tpu:Ee(pe()),rpc:Ee(pe()),version:Ee(pe())}),PA=le({votePubkey:pe(),nodePubkey:pe(),activatedStake:X(),epochVoteAccount:Ra(),epochCredits:be(wI([X(),X(),X()])),commission:X(),lastVote:X(),rootSlot:Ee(X())}),SK=ht(le({current:be(PA),delinquent:be(PA)})),xK=rs([Xr("processed"),Xr("confirmed"),Xr("finalized")]),IK=le({slot:X(),confirmations:Ee(X()),err:Vh,confirmationStatus:ke(xK)}),AK=dn(be(Ee(IK))),CK=ht(X()),nk=le({accountKey:rn,writableIndexes:be(X()),readonlyIndexes:be(X())}),II=le({signatures:be(pe()),message:le({accountKeys:be(pe()),header:le({numRequiredSignatures:X(),numReadonlySignedAccounts:X(),numReadonlyUnsignedAccounts:X()}),instructions:be(le({accounts:be(X()),data:pe(),programIdIndex:X()})),recentBlockhash:pe(),addressTableLookups:ke(be(nk))})}),ik=le({pubkey:rn,signer:Ra(),writable:Ra(),source:ke(rs([Xr("transaction"),Xr("lookupTable")]))}),sk=le({accountKeys:be(ik),signatures:be(pe())}),ok=le({parsed:kp(),program:pe(),programId:rn}),ak=le({accounts:be(rn),data:pe(),programId:rn}),NK=rs([ak,ok]),MK=rs([le({parsed:kp(),program:pe(),programId:pe()}),le({accounts:be(pe()),data:pe(),programId:pe()})]),ck=Zm(NK,MK,t=>"accounts"in t?we(t,ak):we(t,ok)),lk=le({signatures:be(pe()),message:le({accountKeys:be(ik),instructions:be(ck),recentBlockhash:pe(),addressTableLookups:ke(Ee(be(nk)))})}),Eb=le({accountIndex:X(),mint:pe(),owner:ke(pe()),programId:ke(pe()),uiTokenAmount:J3}),uk=le({writable:be(rn),readonly:be(rn)}),Nv=le({err:Vh,fee:X(),innerInstructions:ke(Ee(be(le({index:X(),instructions:be(le({accounts:be(X()),data:pe(),programIdIndex:X()}))})))),preBalances:be(X()),postBalances:be(X()),logMessages:ke(Ee(be(pe()))),preTokenBalances:ke(Ee(be(Eb))),postTokenBalances:ke(Ee(be(Eb))),loadedAddresses:ke(uk),computeUnitsConsumed:ke(X()),costUnits:ke(X())}),AI=le({err:Vh,fee:X(),innerInstructions:ke(Ee(be(le({index:X(),instructions:be(ck)})))),preBalances:be(X()),postBalances:be(X()),logMessages:ke(Ee(be(pe()))),preTokenBalances:ke(Ee(be(Eb))),postTokenBalances:ke(Ee(be(Eb))),loadedAddresses:ke(uk),computeUnitsConsumed:ke(X()),costUnits:ke(X())}),Rp=rs([Xr(0),Xr("legacy")]),Gh=le({pubkey:pe(),lamports:X(),postBalance:Ee(X()),rewardType:Ee(pe()),commission:ke(Ee(X()))}),TK=ht(Ee(le({blockhash:pe(),previousBlockhash:pe(),parentSlot:X(),transactions:be(le({transaction:II,meta:Ee(Nv),version:ke(Rp)})),rewards:ke(be(Gh)),blockTime:Ee(X()),blockHeight:Ee(X())}))),$K=ht(Ee(le({blockhash:pe(),previousBlockhash:pe(),parentSlot:X(),rewards:ke(be(Gh)),blockTime:Ee(X()),blockHeight:Ee(X())}))),PK=ht(Ee(le({blockhash:pe(),previousBlockhash:pe(),parentSlot:X(),transactions:be(le({transaction:sk,meta:Ee(Nv),version:ke(Rp)})),rewards:ke(be(Gh)),blockTime:Ee(X()),blockHeight:Ee(X())}))),OK=ht(Ee(le({blockhash:pe(),previousBlockhash:pe(),parentSlot:X(),transactions:be(le({transaction:lk,meta:Ee(AI),version:ke(Rp)})),rewards:ke(be(Gh)),blockTime:Ee(X()),blockHeight:Ee(X())}))),kK=ht(Ee(le({blockhash:pe(),previousBlockhash:pe(),parentSlot:X(),transactions:be(le({transaction:sk,meta:Ee(AI),version:ke(Rp)})),rewards:ke(be(Gh)),blockTime:Ee(X()),blockHeight:Ee(X())}))),RK=ht(Ee(le({blockhash:pe(),previousBlockhash:pe(),parentSlot:X(),rewards:ke(be(Gh)),blockTime:Ee(X()),blockHeight:Ee(X())}))),DK=ht(Ee(le({blockhash:pe(),previousBlockhash:pe(),parentSlot:X(),transactions:be(le({transaction:II,meta:Ee(Nv)})),rewards:ke(be(Gh)),blockTime:Ee(X())}))),OA=ht(Ee(le({blockhash:pe(),previousBlockhash:pe(),parentSlot:X(),signatures:be(pe()),blockTime:Ee(X())}))),pE=ht(Ee(le({slot:X(),meta:Ee(Nv),blockTime:ke(Ee(X())),transaction:II,version:ke(Rp)}))),rw=ht(Ee(le({slot:X(),transaction:lk,meta:Ee(AI),blockTime:ke(Ee(X())),version:ke(Rp)}))),LK=dn(le({blockhash:pe(),lastValidBlockHeight:X()})),BK=dn(Ra()),UK=le({slot:X(),numTransactions:X(),numSlots:X(),samplePeriodSecs:X()}),jK=ht(be(UK)),FK=dn(Ee(le({feeCalculator:le({lamportsPerSignature:X()})}))),zK=ht(pe()),qK=ht(pe()),WK=le({err:Vh,logs:be(pe()),signature:pe()}),HK=le({result:Cv(WK),subscription:X()}),KK={"solana-client":"js/1.0.0-maintenance"};class VK{constructor(e,r){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const l={};return async u=>{const{commitment:h,config:d}=pr(u),g=this._buildArgs([],h,void 0,d),m=CA(g);return l[m]=l[m]??(async()=>{try{const v=await this._rpcRequest("getBlockHeight",g),$=we(v,ht(X()));if("error"in $)throw new Pe($.error,"failed to get block height information");return $.result}finally{delete l[m]}})(),await l[m]}})();let n,i,s,o,a,c;r&&typeof r=="string"?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,n=r.wsEndpoint,i=r.httpHeaders,s=r.fetch,o=r.fetchMiddleware,a=r.disableRetryOnRateLimit,c=r.httpAgent),this._rpcEndpoint=$H(e),this._rpcWsEndpoint=n||MH(e),this._rpcClient=KH(e,i,s,o,a,c),this._rpcRequest=VH(this._rpcClient),this._rpcBatchRequest=GH(this._rpcClient),this._rpcWebSocket=new IH(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,r){const{commitment:n,config:i}=pr(r),s=this._buildArgs([e.toBase58()],n,void 0,i),o=await this._rpcRequest("getBalance",s),a=we(o,dn(X()));if("error"in a)throw new Pe(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,r){return await this.getBalanceAndContext(e,r).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const r=await this._rpcRequest("getBlockTime",[e]),n=we(r,ht(Ee(X())));if("error"in n)throw new Pe(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),r=we(e,ht(X()));if("error"in r)throw new Pe(r.error,"failed to get minimum ledger slot");return r.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),r=we(e,tK);if("error"in r)throw new Pe(r.error,"failed to get first available block");return r.result}async getSupply(e){let r={};typeof e=="string"?r={commitment:e}:e?r={...e,commitment:e&&e.commitment||this.commitment}:r={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[r]),i=we(n,rK);if("error"in i)throw new Pe(i.error,"failed to get supply");return i.result}async getTokenSupply(e,r){const n=this._buildArgs([e.toBase58()],r),i=await this._rpcRequest("getTokenSupply",n),s=we(i,dn(J3));if("error"in s)throw new Pe(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,r){const n=this._buildArgs([e.toBase58()],r),i=await this._rpcRequest("getTokenAccountBalance",n),s=we(i,dn(J3));if("error"in s)throw new Pe(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,r,n){const{commitment:i,config:s}=pr(n);let o=[e.toBase58()];"mint"in r?o.push({mint:r.mint.toBase58()}):o.push({programId:r.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),c=await this._rpcRequest("getTokenAccountsByOwner",a),l=we(c,iK);if("error"in l)throw new Pe(l.error,`failed to get token accounts owned by account ${e.toBase58()}`);return l.result}async getParsedTokenAccountsByOwner(e,r,n){let i=[e.toBase58()];"mint"in r?i.push({mint:r.mint.toBase58()}):i.push({programId:r.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=we(o,sK);if("error"in a)throw new Pe(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const r={...e,commitment:e&&e.commitment||this.commitment},n=r.filter||r.commitment?[r]:[],i=await this._rpcRequest("getLargestAccounts",n),s=we(i,oK);if("error"in s)throw new Pe(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,r){const n=this._buildArgs([e.toBase58()],r),i=await this._rpcRequest("getTokenLargestAccounts",n),s=we(i,nK);if("error"in s)throw new Pe(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,r){const{commitment:n,config:i}=pr(r),s=this._buildArgs([e.toBase58()],n,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=we(o,dn(Ee(Jg)));if("error"in a)throw new Pe(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,r){const{commitment:n,config:i}=pr(r),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=we(o,dn(Ee(eS)));if("error"in a)throw new Pe(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,r){try{return(await this.getAccountInfoAndContext(e,r)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,r){const{commitment:n,config:i}=pr(r),s=e.map(l=>l.toBase58()),o=this._buildArgs([s],n,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),c=we(a,dn(be(Ee(eS))));if("error"in c)throw new Pe(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfoAndContext(e,r){const{commitment:n,config:i}=pr(r),s=e.map(l=>l.toBase58()),o=this._buildArgs([s],n,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),c=we(a,dn(be(Ee(Jg))));if("error"in c)throw new Pe(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfo(e,r){return(await this.getMultipleAccountsInfoAndContext(e,r)).value}async getStakeActivation(e,r,n){const{commitment:i,config:s}=pr(r),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),c=we(a,ht(uK));if("error"in c)throw new Pe(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,r){const{commitment:n,config:i}=pr(r),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],n,s||"base64",{...o,...o.filters?{filters:TA(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),l=be(aK),u=o.withContext===!0?we(c,dn(l)):we(c,ht(l));if("error"in u)throw new Pe(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,r){const{commitment:n,config:i}=pr(r),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=we(o,ht(be(lK)));if("error"in a)throw new Pe(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,r){var s;let n;if(typeof e=="string")n=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let i;try{i=mi.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return qr(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:r||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:r||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:r||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((r,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:r}){let n,i,s=!1;const o=new Promise((c,l)=>{try{n=this.onSignature(r,(h,d)=>{n=void 0;const g={context:d,value:h};c({__type:dl.PROCESSED,response:g})},e);const u=new Promise(h=>{n==null?h():i=this._onSubscriptionStateChange(n,d=>{d==="subscribed"&&h()})});(async()=>{if(await u,s)return;const h=await this.getSignatureStatus(r);if(s||h==null)return;const{context:d,value:g}=h;if(g!=null)if(g!=null&&g.err)l(g.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(g.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(g.confirmationStatus==="processed"||g.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,c({__type:dl.PROCESSED,response:{context:d,value:g}})}})()}catch(u){l(u)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:r,lastValidBlockHeight:n,signature:i}}){let s=!1;const o=new Promise(h=>{const d=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let g=await d();if(!s){for(;g<=n;)if(await Xd(1e3),s||(g=await d(),s))return;h({__type:dl.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),l=this.getCancellationPromise(r);let u;try{const h=await Promise.race([l,c,o]);if(h.__type===dl.PROCESSED)u=h.response;else throw new QO(i)}finally{s=!0,a()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:r,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const c=new Promise(g=>{let m=s,v=null;const $=async()=>{try{const{context:_,value:x}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return v=_.slot,x==null?void 0:x.nonce}catch{return m}};(async()=>{if(m=await $(),!a)for(;;){if(s!==m){g({__type:dl.NONCE_INVALID,slotInWhichNonceDidAdvance:v});return}if(await Xd(2e3),a||(m=await $(),a))return}})()}),{abortConfirmation:l,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),h=this.getCancellationPromise(r);let d;try{const g=await Promise.race([h,u,c]);if(g.__type===dl.PROCESSED)d=g.response;else{let m;for(;;){const v=await this.getSignatureStatus(o);if(v==null)break;if(v.context.slot<(g.slotInWhichNonceDidAdvance??n)){await Xd(400);continue}m=v;break}if(m!=null&&m.value){const v=e||"finalized",{confirmationStatus:$}=m.value;switch(v){case"processed":case"recent":if($!=="processed"&&$!=="confirmed"&&$!=="finalized")throw new G0(o);break;case"confirmed":case"single":case"singleGossip":if($!=="confirmed"&&$!=="finalized")throw new G0(o);break;case"finalized":case"max":case"root":if($!=="finalized")throw new G0(o);break;default:}d={context:m.context,value:{err:m.value.err}}}else throw new G0(o)}}finally{a=!0,l()}return d}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:r}){let n;const i=new Promise(c=>{let l=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{l=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:dl.TIMED_OUT,timeoutMs:l}),l)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:r});let a;try{const c=await Promise.race([o,i]);if(c.__type===dl.PROCESSED)a=c.response;else throw new ZO(r,c.timeoutMs/1e3)}finally{clearTimeout(n),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),r=we(e,ht(be(_K)));if("error"in r)throw new Pe(r.error,"failed to get cluster nodes");return r.result}async getVoteAccounts(e){const r=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",r),i=we(n,SK);if("error"in i)throw new Pe(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:r,config:n}=pr(e),i=this._buildArgs([],r,void 0,n),s=await this._rpcRequest("getSlot",i),o=we(s,ht(X()));if("error"in o)throw new Pe(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:r,config:n}=pr(e),i=this._buildArgs([],r,void 0,n),s=await this._rpcRequest("getSlotLeader",i),o=we(s,ht(pe()));if("error"in o)throw new Pe(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,r){const n=[e,r],i=await this._rpcRequest("getSlotLeaders",n),s=we(i,ht(be(rn)));if("error"in s)throw new Pe(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,r){const{context:n,value:i}=await this.getSignatureStatuses([e],r);qr(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,r){const n=[e];r&&n.push(r);const i=await this._rpcRequest("getSignatureStatuses",n),s=we(i,AK);if("error"in s)throw new Pe(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:r,config:n}=pr(e),i=this._buildArgs([],r,void 0,n),s=await this._rpcRequest("getTransactionCount",i),o=we(s,ht(X()));if("error"in o)throw new Pe(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const r=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",r),i=we(n,YH);if("error"in i)throw new Pe(i.error,"failed to get inflation");return i.result}async getInflationReward(e,r,n){const{commitment:i,config:s}=pr(n),o=this._buildArgs([e.map(l=>l.toBase58())],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),c=we(a,kH);if("error"in c)throw new Pe(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),r=we(e,QH);if("error"in r)throw new Pe(r.error,"failed to get inflation rate");return r.result}async getEpochInfo(e){const{commitment:r,config:n}=pr(e),i=this._buildArgs([],r,void 0,n),s=await this._rpcRequest("getEpochInfo",i),o=we(s,JH);if("error"in o)throw new Pe(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),r=we(e,XH);if("error"in r)throw new Pe(r.error,"failed to get epoch schedule");const n=r.result;return new SH(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),r=we(e,eK);if("error"in r)throw new Pe(r.error,"failed to get leader schedule");return r.result}async getMinimumBalanceForRentExemption(e,r){const n=this._buildArgs([e],r),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=we(i,CK);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:r,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:r,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const r=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=we(r,jK);if("error"in n)throw new Pe(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,r){const n=this._buildArgs([e],r),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=we(i,FK);if("error"in s)throw new Pe(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,r){const n=hi(e.serialize()).toString("base64"),i=this._buildArgs([n],r),s=await this._rpcRequest("getFeeForMessage",i),o=we(s,dn(Ee(X())));if("error"in o)throw new Pe(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const r=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),n=r!=null&&r.length?[r]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=we(i,ZH);if("error"in s)throw new Pe(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhashAndContext(e){const{commitment:r,config:n}=pr(e),i=this._buildArgs([],r,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),o=we(s,LK);if("error"in o)throw new Pe(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,r){const{commitment:n,config:i}=pr(r),s=this._buildArgs([e],n,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=we(o,BK);if("error"in a)throw new Pe(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),r=we(e,ht(zH));if("error"in r)throw new Pe(r.error,"failed to get version");return r.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),r=we(e,ht(pe()));if("error"in r)throw new Pe(r.error,"failed to get genesis hash");return r.result}async getBlock(e,r){const{commitment:n,config:i}=pr(r),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=we(o,PK);if("error"in a)throw a.error;return a.result}case"none":{const a=we(o,$K);if("error"in a)throw a.error;return a.result}default:{const a=we(o,TK);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:l,meta:u,version:h})=>({meta:u,transaction:{...l,message:fE(h,l.message)},version:h}))}:null}}}catch(a){throw new Pe(a,"failed to get confirmed block")}}async getParsedBlock(e,r){const{commitment:n,config:i}=pr(r),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=we(o,kK);if("error"in a)throw a.error;return a.result}case"none":{const a=we(o,RK);if("error"in a)throw a.error;return a.result}default:{const a=we(o,OK);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Pe(a,"failed to get block")}}async getBlockProduction(e){let r,n;if(typeof e=="string")n=e;else if(e){const{commitment:a,...c}=e;n=a,r=c}const i=this._buildArgs([],n,"base64",r),s=await this._rpcRequest("getBlockProduction",i),o=we(s,HH);if("error"in o)throw new Pe(o.error,"failed to get block production information");return o.result}async getTransaction(e,r){const{commitment:n,config:i}=pr(r),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getTransaction",s),a=we(o,pE);if("error"in a)throw new Pe(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:fE(c.version,c.transaction.message)}}}async getParsedTransaction(e,r){const{commitment:n,config:i}=pr(r),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=we(o,rw);if("error"in a)throw new Pe(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,r){const{commitment:n,config:i}=pr(r),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(c=>{const l=we(c,rw);if("error"in l)throw new Pe(l.error,"failed to get transactions");return l.result})}async getTransactions(e,r){const{commitment:n,config:i}=pr(r),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,i)}));return(await this._rpcBatchRequest(s)).map(c=>{const l=we(c,pE);if("error"in l)throw new Pe(l.error,"failed to get transactions");const u=l.result;return u&&{...u,transaction:{...u.transaction,message:fE(u.version,u.transaction.message)}}})}async getConfirmedBlock(e,r){const n=this._buildArgsAtLeastConfirmed([e],r),i=await this._rpcRequest("getBlock",n),s=we(i,DK);if("error"in s)throw new Pe(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:l})=>{const u=new Vc(c.message);return{meta:l,transaction:{...c,message:u}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:l})=>({meta:l,transaction:yi.populate(c.message,c.signatures)}))}}async getBlocks(e,r,n){const i=this._buildArgsAtLeastConfirmed(r!==void 0?[e,r]:[e],n),s=await this._rpcRequest("getBlocks",i),o=we(s,ht(be(X())));if("error"in o)throw new Pe(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,r){const n=this._buildArgsAtLeastConfirmed([e],r,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=we(i,OA);if("error"in s)throw new Pe(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,r){const n=this._buildArgsAtLeastConfirmed([e],r,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=we(i,OA);if("error"in s)throw new Pe(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,r){const n=this._buildArgsAtLeastConfirmed([e],r),i=await this._rpcRequest("getTransaction",n),s=we(i,pE);if("error"in s)throw new Pe(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new Vc(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:yi.populate(a,c)}}async getParsedConfirmedTransaction(e,r){const n=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed"),i=await this._rpcRequest("getTransaction",n),s=we(i,rw);if("error"in s)throw new Pe(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,r){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],r,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=we(o,rw);if("error"in a)throw new Pe(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,r,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(r--,!(r<=0||r<s));)try{const c=await this.getConfirmedBlockSignatures(r,"finalized");c.signatures.length>0&&(i.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>o));)try{const c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(i.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,r,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,r),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=we(s,hK);if("error"in o)throw new Pe(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,r,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,r),s=await this._rpcRequest("getSignaturesForAddress",i),o=we(s,dK);if("error"in o)throw new Pe(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,r){const{context:n,value:i}=await this.getAccountInfoAndContext(e,r);let s=null;return i!==null&&(s=new MA({key:e,state:MA.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,r){const{context:n,value:i}=await this.getAccountInfoAndContext(e,r);let s=null;return i!==null&&(s=SI.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,r){return await this.getNonceAndContext(e,r).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,r){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),r]),i=we(n,zK);if("error"in i)throw new Pe(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Xd(100);const n=Date.now()-this._blockhashInfo.lastFetch>=TH;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),r=this._blockhashInfo.latestBlockhash,n=r?r.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Xd(yH/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:r,config:n}=pr(e),i=this._buildArgs([],r,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=we(s,dn(X()));if("error"in o)throw new Pe(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,r,n){if("message"in e){const v=e.serialize(),$=Xe.Buffer.from(v).toString("base64");if(Array.isArray(r)||n!==void 0)throw new Error("Invalid arguments");const _=r||{};_.encoding="base64","commitment"in _||(_.commitment=this.commitment),r&&typeof r=="object"&&"innerInstructions"in r&&(_.innerInstructions=r.innerInstructions);const x=[$,_],A=await this._rpcRequest("simulateTransaction",x),T=we(A,$A);if("error"in T)throw new Error("failed to simulate transaction: "+T.error.message);return T.result}let i;if(e instanceof yi){let m=e;i=new yi,i.feePayer=m.feePayer,i.instructions=e.instructions,i.nonceInfo=m.nonceInfo,i.signatures=m.signatures}else i=yi.populate(e),i._message=i._json=void 0;if(r!==void 0&&!Array.isArray(r))throw new Error("Invalid arguments");const s=r;if(i.nonceInfo&&s)i.sign(...s);else{let m=this._disableBlockhashCaching;for(;;){const v=await this._blockhashWithExpiryBlockHeight(m);if(i.lastValidBlockHeight=v.lastValidBlockHeight,i.recentBlockhash=v.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const $=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes($)&&!this._blockhashInfo.transactionSignatures.includes($)){this._blockhashInfo.simulatedSignatures.push($);break}else m=!0}}const o=i._compile(),a=o.serialize(),l=i._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(n){const m=(Array.isArray(n)?n:o.nonProgramIds()).map(v=>v.toBase58());u.accounts={encoding:"base64",addresses:m}}s&&(u.sigVerify=!0),r&&typeof r=="object"&&"innerInstructions"in r&&(u.innerInstructions=r.innerInstructions);const h=[l,u],d=await this._rpcRequest("simulateTransaction",h),g=we(d,$A);if("error"in g){let m;if("data"in g.error&&(m=g.error.data.logs,m&&Array.isArray(m))){const v=`
    `,$=v+m.join(v);console.error(g.error.message,$)}throw new xA({action:"simulate",signature:"",transactionMessage:g.error.message,logs:m})}return g.result}async sendTransaction(e,r,n){if("version"in e){if(r&&Array.isArray(r))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,r)}if(r===void 0||!Array.isArray(r))throw new Error("Invalid arguments");const i=r;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,r){const n=hi(e).toString("base64");return await this.sendEncodedTransaction(n,r)}async sendEncodedTransaction(e,r){const n={encoding:"base64"},i=r&&r.skipPreflight,s=i===!0?"processed":r&&r.preflightCommitment||this.commitment;r&&r.maxRetries!=null&&(n.maxRetries=r.maxRetries),r&&r.minContextSlot!=null&&(n.minContextSlot=r.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const o=[e,n],a=await this._rpcRequest("sendTransaction",o),c=we(a,qK);if("error"in c){let l;throw"data"in c.error&&(l=c.error.data.logs),new xA({action:i?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:l})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([r,n])=>{this._setSubscription(r,{...n,state:"pending"})})}_setSubscription(e,r){var i;const n=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=r,n!==r.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(r.state)}catch{}})}}_onSubscriptionStateChange(e,r){var s;const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[n]||(s[n]=new Set);return i.add(r),()=>{i.delete(r),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,r=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(n,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!r())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!r())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,r){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...r)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:r,subscription:n}=we(e,fK);this._handleServerNotification(n,[r.value,r.context])}_makeSubscription(e,r){const n=this._nextClientSubscriptionId++,i=CA([e.method,r]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:r,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[i];qr(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,r,n){const{commitment:i,config:s}=pr(n),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:r,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:r,subscription:n}=we(e,gK);this._handleServerNotification(n,[{accountId:r.value.pubkey,accountInfo:r.value.account},r.context])}onProgramAccountChange(e,r,n,i){const{commitment:s,config:o}=pr(n),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:TA(i)}:void 0));return this._makeSubscription({callback:r,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,r,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:r,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:r,subscription:n}=we(e,HK);this._handleServerNotification(n,[r.value,r.context])}_wsOnSlotNotification(e){const{result:r,subscription:n}=we(e,yK);this._handleServerNotification(n,[r])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:r,subscription:n}=we(e,bK);this._handleServerNotification(n,[r])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,r){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${r}' events could not be found.`)}_buildArgs(e,r,n,i){const s=r||this._commitment;if(s||n||i){let o={};n&&(o.encoding=n),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,r,n,i){const s=r||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,r,n,i)}_wsOnSignatureNotification(e){const{result:r,subscription:n}=we(e,vK);r.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,r.value==="receivedSignature"?[{type:"received"},r.context]:[{type:"status",result:r.value},r.context])}onSignature(e,r,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){r(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,r,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(c,l)=>{r(c,l);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:r,subscription:n}=we(e,EK);this._handleServerNotification(n,[r])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:Me([De("instruction"),cp("recentSlot"),Ut("bumpSeed")])},FreezeLookupTable:{index:1,layout:Me([De("instruction")])},ExtendLookupTable:{index:2,layout:Me([De("instruction"),cp(),Fi(yt(),gh(De(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Me([De("instruction")])},CloseLookupTable:{index:4,layout:Me([De("instruction")])}});new Te("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:Me([Ut("instruction"),De("units"),De("additionalFee")])},RequestHeapFrame:{index:1,layout:Me([Ut("instruction"),De("bytes")])},SetComputeUnitLimit:{index:2,layout:Me([Ut("instruction"),De("units")])},SetComputeUnitPrice:{index:3,layout:Me([Ut("instruction"),cp("microLamports")])}});new Te("ComputeBudget111111111111111111111111111111");Me([Ut("numSignatures"),Ut("padding"),vo("signatureOffset"),vo("signatureInstructionIndex"),vo("publicKeyOffset"),vo("publicKeyInstructionIndex"),vo("messageDataOffset"),vo("messageDataSize"),vo("messageInstructionIndex")]);new Te("Ed25519SigVerify111111111111111111111111111");nH.utils.isValidPrivateKey;Me([Ut("numSignatures"),vo("signatureOffset"),Ut("signatureInstructionIndex"),vo("ethAddressOffset"),Ut("ethAddressInstructionIndex"),vo("messageDataOffset"),vo("messageDataSize"),Ut("messageInstructionIndex"),jr(20,"ethAddress"),jr(64,"signature"),Ut("recoveryId")]);new Te("KeccakSecp256k11111111111111111111111111111");var hk;new Te("StakeConfig11111111111111111111111111111111");class dk{constructor(e,r,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=r,this.custodian=n}}hk=dk;dk.default=new hk(0,0,Te.default);Object.freeze({Initialize:{index:0,layout:Me([De("instruction"),lH(),uH()])},Authorize:{index:1,layout:Me([De("instruction"),yt("newAuthorized"),De("stakeAuthorizationType")])},Delegate:{index:2,layout:Me([De("instruction")])},Split:{index:3,layout:Me([De("instruction"),Ls("lamports")])},Withdraw:{index:4,layout:Me([De("instruction"),Ls("lamports")])},Deactivate:{index:5,layout:Me([De("instruction")])},Merge:{index:7,layout:Me([De("instruction")])},AuthorizeWithSeed:{index:8,layout:Me([De("instruction"),yt("newAuthorized"),De("stakeAuthorizationType"),Nf("authoritySeed"),yt("authorityOwner")])}});new Te("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Me([De("instruction"),hH()])},Authorize:{index:1,layout:Me([De("instruction"),yt("newAuthorized"),De("voteAuthorizationType")])},Withdraw:{index:3,layout:Me([De("instruction"),Ls("lamports")])},UpdateValidatorIdentity:{index:4,layout:Me([De("instruction")])},AuthorizeWithSeed:{index:10,layout:Me([De("instruction"),dH()])}});new Te("Vote111111111111111111111111111111111111111");new Te("Va1idator1nfo111111111111111111111111111111");le({name:pe(),website:ke(pe()),details:ke(pe()),iconUrl:ke(pe()),keybaseUsername:ke(pe())});new Te("Vote111111111111111111111111111111111111111");Me([yt("nodePubkey"),yt("authorizedWithdrawer"),Ut("commission"),li(),Fi(Me([li("slot"),De("confirmationCount")]),gh(De(),-8),"votes"),Ut("rootSlotValid"),li("rootSlot"),li(),Fi(Me([li("epoch"),yt("authorizedVoter")]),gh(De(),-8),"authorizedVoters"),Me([Fi(Me([yt("authorizedPubkey"),li("epochOfLastAuthorizedSwitch"),li("targetEpoch")]),32,"buf"),li("idx"),Ut("isEmpty")],"priorVoters"),li(),Fi(Me([li("epoch"),li("credits"),li("prevCredits")]),gh(De(),-8),"epochCredits"),Me([li("slot"),li("timestamp")],"lastTimestamp")]);const GK={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function YK(t,e){return GK["https"][t]}const mh=1e9,fk=ne.createContext({});function Jm(){return ne.useContext(fk)}const QK=({children:t,endpoint:e,config:r={commitment:"confirmed"}})=>{const n=ne.useMemo(()=>new VK(e,r),[e,r]);return fe.createElement(fk.Provider,{value:{connection:n}},t)};class kn extends Error{constructor(e,r){super(e),this.error=r}}class Gc extends kn{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class pk extends kn{constructor(){super(...arguments),this.name="WalletLoadError"}}class Mf extends kn{constructor(){super(...arguments),this.name="WalletConfigError"}}class Yc extends kn{constructor(){super(...arguments),this.name="WalletConnectionError"}}class Mv extends kn{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class Xm extends kn{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class rh extends kn{constructor(){super(...arguments),this.name="WalletAccountError"}}class Nh extends kn{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class Ir extends kn{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class Lc extends kn{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class Xi extends kn{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class ey extends kn{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class kA extends kn{constructor(){super(...arguments),this.name="WalletSignInError"}}class ZK extends kn{constructor(){super(...arguments),this.name="WalletWindowClosedError"}}var Ze;(function(t){t.Installed="Installed",t.NotDetected="NotDetected",t.Loadable="Loadable",t.Unsupported="Unsupported"})(Ze||(Ze={}));class gk extends bI{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,r,n={}){const i=this.publicKey;if(!i)throw new Ir;return e.feePayer=e.feePayer||i,e.recentBlockhash=e.recentBlockhash||(await r.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,e}}function mk(t){if(typeof window>"u"||typeof document>"u")return;const e=[];function r(){if(t())for(const s of e)s()}const n=setInterval(r,1e3);e.push(()=>clearInterval(n)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",r,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",r))),document.readyState!=="complete"&&(window.addEventListener("load",r,{once:!0}),e.push(()=>window.removeEventListener("load",r))),r()}function tS(){if(!navigator)return!1;const t=navigator.userAgent.toLowerCase(),e=t.includes("iphone")||t.includes("ipad"),r=t.includes("safari");return e&&r}function xo(t){return"version"in t}class CI extends gk{async sendTransaction(e,r,n={}){let i=!0;try{if(xo(e)){if(!this.supportedTransactionVersions)throw new Lc("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new Lc(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const s=e.serialize();return await r.sendRawTransaction(s,n)}catch(s){throw s instanceof Xi?(i=!1,s):new Lc(s==null?void 0:s.message,s)}}else try{const{signers:s,...o}=n;e=await this.prepareTransaction(e,r,o),s!=null&&s.length&&e.partialSign(...s),e=await this.signTransaction(e);const a=e.serialize();return await r.sendRawTransaction(a,o)}catch(s){throw s instanceof Xi?(i=!1,s):new Lc(s==null?void 0:s.message,s)}}catch(s){throw i&&this.emit("error",s),s}}async signAllTransactions(e){for(const n of e)if(xo(n)){if(!this.supportedTransactionVersions)throw new Xi("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new Xi(`Signing transaction version ${n.version} isn't supported by this wallet`)}const r=[];for(const n of e)r.push(await this.signTransaction(n));return r}}class NI extends CI{}class JK extends NI{}const Qi="solana:signAndSendTransaction",yh="solana:signIn",Pc="solana:signMessage",Wr="solana:signTransaction",Tv="standard:connect",_b="standard:disconnect",$v="standard:events";function XK(t){return Tv in t.features&&$v in t.features&&(Qi in t.features||Wr in t.features)}var rS;(function(t){t.Mainnet="mainnet-beta",t.Testnet="testnet",t.Devnet="devnet"})(rS||(rS={}));class RA extends kn{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const eV=[],Pv={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){Qo("call","select")},connect(){return Promise.reject(Qo("call","connect"))},disconnect(){return Promise.reject(Qo("call","disconnect"))},sendTransaction(){return Promise.reject(Qo("call","sendTransaction"))},signTransaction(){return Promise.reject(Qo("call","signTransaction"))},signAllTransactions(){return Promise.reject(Qo("call","signAllTransactions"))},signMessage(){return Promise.reject(Qo("call","signMessage"))},signIn(){return Promise.reject(Qo("call","signIn"))}};Object.defineProperty(Pv,"wallets",{get(){return Qo("read","wallets"),eV}});Object.defineProperty(Pv,"wallet",{get(){return Qo("read","wallet"),null}});Object.defineProperty(Pv,"publicKey",{get(){return Qo("read","publicKey"),null}});function Qo(t,e){const r=new Error(`You have tried to ${t} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(r),r}const yk=ne.createContext(Pv);function mu(){return ne.useContext(yk)}function tV(t,e){const r=ne.useState(()=>{try{const s=localStorage.getItem(t);if(s)return JSON.parse(s)}catch(s){typeof window<"u"&&console.error(s)}return e}),n=r[0],i=ne.useRef(!0);return ne.useEffect(()=>{if(i.current){i.current=!1;return}try{n===null?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(n))}catch(s){typeof window<"u"&&console.error(s)}},[n,t]),r}var rV=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},wk={},eo={};let MI;const nV=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];eo.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};eo.getSymbolTotalCodewords=function(e){return nV[e]};eo.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};eo.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');MI=e};eo.isKanjiModeEnabled=function(){return typeof MI<"u"};eo.toSJIS=function(e){return MI(e)};var Ov={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(Ov);function bk(){this.buffer=[],this.length=0}bk.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var iV=bk;function ty(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}ty.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)};ty.prototype.get=function(t,e){return this.data[t*this.size+e]};ty.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};ty.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var sV=ty,vk={};(function(t){const e=eo.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(vk);var Ek={};const oV=eo.getSymbolSize,DA=7;Ek.getPositions=function(e){const r=oV(e);return[[0,0],[r-DA,0],[0,r-DA]]};var _k={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,l=null,u=null;for(let h=0;h<s;h++){a=c=0,l=u=null;for(let d=0;d<s;d++){let g=i.get(h,d);g===l?a++:(a>=5&&(o+=e.N1+(a-5)),l=g,a=1),g=i.get(d,h),g===u?c++:(c>=5&&(o+=e.N1+(c-5)),u=g,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const l=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(l===4||l===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let l=0;l<s;l++){a=c=0;for(let u=0;u<s;u++)a=a<<1&2047|i.get(l,u),u>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(u,l),u>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,r(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let l=0;l<o;l++){s(l),t.applyMask(l,i);const u=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(l,i),u<c&&(c=u,a=l)}return a}})(_k);var kv={};const Fl=Ov,nw=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],iw=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];kv.getBlocksCount=function(e,r){switch(r){case Fl.L:return nw[(e-1)*4+0];case Fl.M:return nw[(e-1)*4+1];case Fl.Q:return nw[(e-1)*4+2];case Fl.H:return nw[(e-1)*4+3];default:return}};kv.getTotalCodewordsCount=function(e,r){switch(r){case Fl.L:return iw[(e-1)*4+0];case Fl.M:return iw[(e-1)*4+1];case Fl.Q:return iw[(e-1)*4+2];case Fl.H:return iw[(e-1)*4+3];default:return}};var Sk={},Rv={};const yg=new Uint8Array(512),Sb=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)yg[r]=e,Sb[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)yg[r]=yg[r-255]})();Rv.log=function(e){if(e<1)throw new Error("log("+e+")");return Sb[e]};Rv.exp=function(e){return yg[e]};Rv.mul=function(e,r){return e===0||r===0?0:yg[Sb[e]+Sb[r]]};(function(t){const e=Rv;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(n[o],i[a]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(Sk);const xk=Sk;function TI(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}TI.prototype.initialize=function(e){this.degree=e,this.genPoly=xk.generateECPolynomial(this.degree)};TI.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=xk.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var aV=TI,Ik={},yu={},$I={};$I.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Ha={};const Ak="[0-9]+",cV="[A-Z $%*+\\-./:]+";let Xg="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Xg=Xg.replace(/u/g,"\\u");const lV="(?:(?![A-Z0-9 $%*+\\-./:]|"+Xg+`)(?:.|[\r
]))+`;Ha.KANJI=new RegExp(Xg,"g");Ha.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ha.BYTE=new RegExp(lV,"g");Ha.NUMERIC=new RegExp(Ak,"g");Ha.ALPHANUMERIC=new RegExp(cV,"g");const uV=new RegExp("^"+Xg+"$"),hV=new RegExp("^"+Ak+"$"),dV=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ha.testKanji=function(e){return uV.test(e)};Ha.testNumeric=function(e){return hV.test(e)};Ha.testAlphanumeric=function(e){return dV.test(e)};(function(t){const e=$I,r=Ha;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}})(yu);(function(t){const e=eo,r=kv,n=Ov,i=yu,s=$I,o=7973,a=e.getBCHDigit(o);function c(d,g,m){for(let v=1;v<=40;v++)if(g<=t.getCapacity(v,m,d))return v}function l(d,g){return i.getCharCountIndicator(d,g)+4}function u(d,g){let m=0;return d.forEach(function(v){const $=l(v.mode,g);m+=$+v.getBitsLength()}),m}function h(d,g){for(let m=1;m<=40;m++)if(u(d,m)<=t.getCapacity(m,g,i.MIXED))return m}t.from=function(g,m){return s.isValid(g)?parseInt(g,10):m},t.getCapacity=function(g,m,v){if(!s.isValid(g))throw new Error("Invalid QR Code version");typeof v>"u"&&(v=i.BYTE);const $=e.getSymbolTotalCodewords(g),_=r.getTotalCodewordsCount(g,m),x=($-_)*8;if(v===i.MIXED)return x;const A=x-l(v,g);switch(v){case i.NUMERIC:return Math.floor(A/10*3);case i.ALPHANUMERIC:return Math.floor(A/11*2);case i.KANJI:return Math.floor(A/13);case i.BYTE:default:return Math.floor(A/8)}},t.getBestVersionForData=function(g,m){let v;const $=n.from(m,n.M);if(Array.isArray(g)){if(g.length>1)return h(g,$);if(g.length===0)return 1;v=g[0]}else v=g;return c(v.mode,v.getLength(),$)},t.getEncodedBits=function(g){if(!s.isValid(g)||g<7)throw new Error("Invalid QR Code version");let m=g<<12;for(;e.getBCHDigit(m)-a>=0;)m^=o<<e.getBCHDigit(m)-a;return g<<12|m}})(Ik);var Ck={};const nS=eo,Nk=1335,fV=21522,LA=nS.getBCHDigit(Nk);Ck.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;nS.getBCHDigit(i)-LA>=0;)i^=Nk<<nS.getBCHDigit(i)-LA;return(n<<10|i)^fV};var Mk={};const pV=yu;function lp(t){this.mode=pV.NUMERIC,this.data=t.toString()}lp.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};lp.prototype.getLength=function(){return this.data.length};lp.prototype.getBitsLength=function(){return lp.getBitsLength(this.data.length)};lp.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var gV=lp;const mV=yu,gE=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function up(t){this.mode=mV.ALPHANUMERIC,this.data=t}up.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};up.prototype.getLength=function(){return this.data.length};up.prototype.getBitsLength=function(){return up.getBitsLength(this.data.length)};up.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=gE.indexOf(this.data[r])*45;n+=gE.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(gE.indexOf(this.data[r]),6)};var yV=up;const wV=yu;function hp(t){this.mode=wV.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}hp.getBitsLength=function(e){return e*8};hp.prototype.getLength=function(){return this.data.length};hp.prototype.getBitsLength=function(){return hp.getBitsLength(this.data.length)};hp.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var bV=hp;const vV=yu,EV=eo;function dp(t){this.mode=vV.KANJI,this.data=t}dp.getBitsLength=function(e){return e*13};dp.prototype.getLength=function(){return this.data.length};dp.prototype.getBitsLength=function(){return dp.getBitsLength(this.data.length)};dp.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=EV.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var _V=dp,Tk={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var c,l,u,h,d,g,m,v,$;!a.empty();){c=a.pop(),l=c.value,h=c.cost,d=r[l]||{};for(u in d)d.hasOwnProperty(u)&&(g=d[u],m=h+g,v=o[u],$=typeof o[u]>"u",($||v>m)&&(o[u]=m,a.push(u,m),s[u]=l))}if(typeof i<"u"&&typeof o[i]>"u"){var _=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(_)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Tk);var SV=Tk.exports;(function(t){const e=yu,r=gV,n=yV,i=bV,s=_V,o=Ha,a=eo,c=SV;function l(_){return unescape(encodeURIComponent(_)).length}function u(_,x,A){const T=[];let k;for(;(k=_.exec(A))!==null;)T.push({data:k[0],index:k.index,mode:x,length:k[0].length});return T}function h(_){const x=u(o.NUMERIC,e.NUMERIC,_),A=u(o.ALPHANUMERIC,e.ALPHANUMERIC,_);let T,k;return a.isKanjiModeEnabled()?(T=u(o.BYTE,e.BYTE,_),k=u(o.KANJI,e.KANJI,_)):(T=u(o.BYTE_KANJI,e.BYTE,_),k=[]),x.concat(A,T,k).sort(function(L,F){return L.index-F.index}).map(function(L){return{data:L.data,mode:L.mode,length:L.length}})}function d(_,x){switch(x){case e.NUMERIC:return r.getBitsLength(_);case e.ALPHANUMERIC:return n.getBitsLength(_);case e.KANJI:return s.getBitsLength(_);case e.BYTE:return i.getBitsLength(_)}}function g(_){return _.reduce(function(x,A){const T=x.length-1>=0?x[x.length-1]:null;return T&&T.mode===A.mode?(x[x.length-1].data+=A.data,x):(x.push(A),x)},[])}function m(_){const x=[];for(let A=0;A<_.length;A++){const T=_[A];switch(T.mode){case e.NUMERIC:x.push([T,{data:T.data,mode:e.ALPHANUMERIC,length:T.length},{data:T.data,mode:e.BYTE,length:T.length}]);break;case e.ALPHANUMERIC:x.push([T,{data:T.data,mode:e.BYTE,length:T.length}]);break;case e.KANJI:x.push([T,{data:T.data,mode:e.BYTE,length:l(T.data)}]);break;case e.BYTE:x.push([{data:T.data,mode:e.BYTE,length:l(T.data)}])}}return x}function v(_,x){const A={},T={start:{}};let k=["start"];for(let D=0;D<_.length;D++){const L=_[D],F=[];for(let B=0;B<L.length;B++){const q=L[B],R=""+D+B;F.push(R),A[R]={node:q,lastCount:0},T[R]={};for(let E=0;E<k.length;E++){const b=k[E];A[b]&&A[b].node.mode===q.mode?(T[b][R]=d(A[b].lastCount+q.length,q.mode)-d(A[b].lastCount,q.mode),A[b].lastCount+=q.length):(A[b]&&(A[b].lastCount=q.length),T[b][R]=d(q.length,q.mode)+4+e.getCharCountIndicator(q.mode,x))}}k=F}for(let D=0;D<k.length;D++)T[k[D]].end=0;return{map:T,table:A}}function $(_,x){let A;const T=e.getBestModeForData(_);if(A=e.from(x,T),A!==e.BYTE&&A.bit<T.bit)throw new Error('"'+_+'" cannot be encoded with mode '+e.toString(A)+`.
 Suggested mode is: `+e.toString(T));switch(A===e.KANJI&&!a.isKanjiModeEnabled()&&(A=e.BYTE),A){case e.NUMERIC:return new r(_);case e.ALPHANUMERIC:return new n(_);case e.KANJI:return new s(_);case e.BYTE:return new i(_)}}t.fromArray=function(x){return x.reduce(function(A,T){return typeof T=="string"?A.push($(T,null)):T.data&&A.push($(T.data,T.mode)),A},[])},t.fromString=function(x,A){const T=h(x,a.isKanjiModeEnabled()),k=m(T),D=v(k,A),L=c.find_path(D.map,"start","end"),F=[];for(let B=1;B<L.length-1;B++)F.push(D.table[L[B]].node);return t.fromArray(g(F))},t.rawSplit=function(x){return t.fromArray(h(x,a.isKanjiModeEnabled()))}})(Mk);const Dv=eo,mE=Ov,xV=iV,IV=sV,AV=vk,CV=Ek,iS=_k,sS=kv,NV=aV,xb=Ik,MV=Ck,TV=yu,yE=Mk;function $V(t,e){const r=t.size,n=CV.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function PV(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function OV(t,e){const r=AV.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function kV(t,e){const r=t.size,n=xb.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function wE(t,e,r){const n=t.size,i=MV.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function RV(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let l=!1;o<e.length&&(l=(e[o]>>>s&1)===1),t.set(i,a-c,l),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function DV(t,e,r){const n=new xV;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),TV.getCharCountIndicator(c.mode,t)),c.write(n)});const i=Dv.getSymbolTotalCodewords(t),s=sS.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return LV(n,t,e)}function LV(t,e,r){const n=Dv.getSymbolTotalCodewords(e),i=sS.getTotalCodewordsCount(e,r),s=n-i,o=sS.getBlocksCount(e,r),a=n%o,c=o-a,l=Math.floor(n/o),u=Math.floor(s/o),h=u+1,d=l-u,g=new NV(d);let m=0;const v=new Array(o),$=new Array(o);let _=0;const x=new Uint8Array(t.buffer);for(let L=0;L<o;L++){const F=L<c?u:h;v[L]=x.slice(m,m+F),$[L]=g.encode(v[L]),m+=F,_=Math.max(_,F)}const A=new Uint8Array(n);let T=0,k,D;for(k=0;k<_;k++)for(D=0;D<o;D++)k<v[D].length&&(A[T++]=v[D][k]);for(k=0;k<d;k++)for(D=0;D<o;D++)A[T++]=$[D][k];return A}function BV(t,e,r,n){let i;if(Array.isArray(t))i=yE.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){const u=yE.rawSplit(t);l=xb.getBestVersionForData(u,r)}i=yE.fromString(t,l||40)}else throw new Error("Invalid data");const s=xb.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=DV(e,r,i),a=Dv.getSymbolSize(e),c=new IV(a);return $V(c,e),PV(c),OV(c,e),wE(c,r,0),e>=7&&kV(c,e),RV(c,o),isNaN(n)&&(n=iS.getBestMask(c,wE.bind(null,c,r))),iS.applyMask(n,c),wE(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}wk.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=mE.M,i,s;return typeof r<"u"&&(n=mE.from(r.errorCorrectionLevel,mE.M),i=xb.from(r.version),s=iS.from(r.maskPattern),r.toSJISFunc&&Dv.setToSJISFunction(r.toSJISFunc)),BV(e,i,n,s)};var $k={},PI={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),l=Math.floor((o+s.margin*2)*c),u=s.margin*c,h=[s.color.light,s.color.dark];for(let d=0;d<l;d++)for(let g=0;g<l;g++){let m=(d*l+g)*4,v=s.color.light;if(d>=u&&g>=u&&d<l-u&&g<l-u){const $=Math.floor((d-u)/c),_=Math.floor((g-u)/c);v=h[a[$*o+_]?1:0]}n[m++]=v.r,n[m++]=v.g,n[m++]=v.b,n[m]=v.a}}})(PI);(function(t){const e=PI;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,l=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(l=n()),c=e.getOptions(c);const u=e.getImageWidth(s.modules.size,c),h=l.getContext("2d"),d=h.createImageData(u,u);return e.qrToImageData(d.data,s,c),r(h,l,u),h.putImageData(d,0,0),l},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const l=t.render(s,o,c),u=c.type||"image/png",h=c.rendererOpts||{};return l.toDataURL(u,h.quality)}})($k);var Pk={};const UV=PI;function BA(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function bE(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function jV(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),l=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(n+=s?bE("M",c+r,.5+l+r):bE("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(n+=bE("h",o),o=0)):i++}return n}Pk.render=function(e,r,n){const i=UV.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+BA(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+BA(i.color.dark,"stroke")+' d="'+jV(o,s,i.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',d='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof n=="function"&&n(null,d),d};const FV=rV,oS=wk,Ok=$k,zV=Pk;function OI(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!FV())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,l){try{const u=oS.create(r,n);c(t(u,e,n))}catch(u){l(u)}})}try{const c=oS.create(r,n);i(null,t(c,e,n))}catch(c){i(c)}}oS.create;OI.bind(null,Ok.render);OI.bind(null,Ok.renderToDataURL);OI.bind(null,function(t,e,r){return zV.render(t,r)});function vE(t){switch(t){case"processed":case"confirmed":case"finalized":case void 0:return t;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const em="solana:mainnet",kk="solana:devnet",Rk="solana:testnet",qV="solana:localnet",WV="https://api.mainnet-beta.solana.com";function HV(t){return t.includes(WV)?em:/\bdevnet\b/i.test(t)?kk:/\btestnet\b/i.test(t)?Rk:/\blocalhost\b/i.test(t)||/\b127\.0\.0\.1\b/.test(t)?qV:em}function KV(t){let e=`${t.domain} wants you to sign in with your Solana account:
`;e+=`${t.address}`,t.statement&&(e+=`

${t.statement}`);const r=[];if(t.uri&&r.push(`URI: ${t.uri}`),t.version&&r.push(`Version: ${t.version}`),t.chainId&&r.push(`Chain ID: ${t.chainId}`),t.nonce&&r.push(`Nonce: ${t.nonce}`),t.issuedAt&&r.push(`Issued At: ${t.issuedAt}`),t.expirationTime&&r.push(`Expiration Time: ${t.expirationTime}`),t.notBefore&&r.push(`Not Before: ${t.notBefore}`),t.requestId&&r.push(`Request ID: ${t.requestId}`),t.resources){r.push("Resources:");for(const n of t.resources)r.push(`- ${n}`)}return r.length&&(e+=`

${r.join(`
`)}`),e}function VV(t){return Object.freeze({...t,decode:(e,r=0)=>t.read(e,r)[0]})}var GV=t=>VV({read(e,r){const n=r===0?e:e.slice(r);if(n.length===0)return["",0];let i=n.findIndex(c=>c!==0);i=i===-1?n.length:i;const s=t[0].repeat(i);if(i===n.length)return[s,e.length];const o=n.slice(i).reduce((c,l)=>c*256n+BigInt(l),0n),a=YV(o,t);return[s+a,e.length]}});function YV(t,e){const r=BigInt(e.length),n=[];for(;t>0n;)n.unshift(e[Number(t%r)]),t/=r;return n.join("")}var QV="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",ZV=()=>GV(QV);const Qc={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class Zc extends Error{constructor(...e){const[r,n,i]=e;super(n),this.code=r,this.data=i,this.name="SolanaMobileWalletAdapterError"}}class Dk extends Error{constructor(...e){const[r,n,i,s]=e;super(i),this.code=n,this.data=s,this.jsonRpcMessageId=r,this.name="SolanaMobileWalletAdapterProtocolError"}}function _n(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(t,[])).next())})}function JV(t){return window.btoa(t)}function UA(t,e){return window.btoa(String.fromCharCode.call(null,...t))}function Lk(t){return new Uint8Array(window.atob(t).split("").map(e=>e.charCodeAt(0)))}function EE(t,e){return _n(this,void 0,void 0,function*(){const r=yield crypto.subtle.exportKey("raw",t),n=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,r),i=new Uint8Array(r.byteLength+n.byteLength);return i.set(new Uint8Array(r),0),i.set(new Uint8Array(n),r.byteLength),i})}function XV(t){return KV(t)}function eG(t){return JV(XV(t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const tG="solana:signTransactions",jA="solana:cloneAuthorization";function rG(t){return ZV().decode(t)}function nG(t){return rG(Lk(t))}function iG(t,e){return new Proxy({},{get(r,n){return n==="then"?null:(r[n]==null&&(r[n]=function(i){return _n(this,void 0,void 0,function*(){const{method:s,params:o}=sG(n,i,t),a=yield e(s,o);return s==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield aG(o.sign_in_payload,a,e)),oG(n,a,t)})}),r[n])},defineProperty(){return!1},deleteProperty(){return!1}})}function sG(t,e,r){let n=e,i=t.toString().replace(/[A-Z]/g,s=>`_${s.toLowerCase()}`).toLowerCase();switch(t){case"authorize":{let{chain:s}=n;if(r==="legacy"){switch(s){case"solana:testnet":{s="testnet";break}case"solana:devnet":{s="devnet";break}case"solana:mainnet":{s="mainnet-beta";break}default:s=n.cluster}n.cluster=s}else{switch(s){case"testnet":case"devnet":{s=`solana:${s}`;break}case"mainnet-beta":{s="solana:mainnet";break}}n.chain=s}}case"reauthorize":{const{auth_token:s,identity:o}=n;if(s)switch(r){case"legacy":{i="reauthorize",n={auth_token:s,identity:o};break}default:{i="authorize";break}}break}}return{method:i,params:n}}function oG(t,e,r){switch(t){case"getCapabilities":{const n=e;switch(r){case"legacy":{const i=[tG];return n.supports_clone_authorization===!0&&i.push(jA),Object.assign(Object.assign({},n),{features:i})}case"v1":return Object.assign(Object.assign({},n),{supports_sign_and_send_transactions:!0,supports_clone_authorization:n.features.includes(jA)})}}}return e}function aG(t,e,r){var n;return _n(this,void 0,void 0,function*(){const i=(n=t.domain)!==null&&n!==void 0?n:window.location.host,s=e.accounts[0].address,o=eG(Object.assign(Object.assign({},t),{domain:i,address:nG(s)})),a=yield r("sign_messages",{addresses:[s],payloads:[o]}),c=Lk(a.signed_payloads[0]),l=UA(c.slice(0,c.length-64)),u=UA(c.slice(c.length-64));return{address:s,signed_message:l.length==0?o:l,signature:u}})}const nh=4;function cG(t){if(t>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(nh);return new DataView(e).setUint32(0,t,!1),new Uint8Array(e)}const aS=12,Bk=65;function lG(t,e,r){return _n(this,void 0,void 0,function*(){const n=cG(e),i=new Uint8Array(aS);crypto.getRandomValues(i);const s=yield crypto.subtle.encrypt(jk(n,i),r,new TextEncoder().encode(t)),o=new Uint8Array(n.byteLength+i.byteLength+s.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(i),n.byteLength),o.set(new Uint8Array(s),n.byteLength+i.byteLength),o})}function Uk(t,e){return _n(this,void 0,void 0,function*(){const r=t.slice(0,nh),n=t.slice(nh,nh+aS),i=t.slice(nh+aS),s=yield crypto.subtle.decrypt(jk(r,n),e,i);return uG().decode(s)})}function jk(t,e){return{additionalData:t,iv:e,name:"AES-GCM",tagLength:128}}let _E;function uG(){return _E===void 0&&(_E=new TextDecoder("utf-8")),_E}function hG(){return _n(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function SE(){return _n(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function dG(t){let e="";const r=new Uint8Array(t),n=r.byteLength;for(let i=0;i<n;i++)e+=String.fromCharCode(r[i]);return window.btoa(e)}function fG(){return Fk(49152+Math.floor(Math.random()*16384))}function Fk(t){if(t<49152||t>65535)throw new Zc(Qc.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${t} given.`,{port:t});return t}function pG(t){return t.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const gG="solana-wallet";function FA(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function mG(t,e){let r=null;if(e){try{r=new URL(e)}catch{}if((r==null?void 0:r.protocol)!=="https:")throw new Zc(Qc.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}r||(r=new URL(`${gG}:/`));const n=t.startsWith("/")?t:[...FA(r.pathname),...FA(t)].join("/");return new URL(n,r)}function yG(t,e,r,n=["v1"]){return _n(this,void 0,void 0,function*(){const i=Fk(e),s=yield crypto.subtle.exportKey("raw",t),o=dG(s),a=mG("v1/associate/local",r);return a.searchParams.set("association",pG(o)),a.searchParams.set("port",`${i}`),n.forEach(c=>{a.searchParams.set("v",c)}),a})}function wG(t,e){return _n(this,void 0,void 0,function*(){const r=JSON.stringify(t),n=t.id;return lG(r,n,e)})}function bG(t,e){return _n(this,void 0,void 0,function*(){const r=yield Uk(t,e),n=JSON.parse(r);if(Object.hasOwnProperty.call(n,"error"))throw new Dk(n.id,n.error.code,n.error.message);return n})}function vG(t,e,r){return _n(this,void 0,void 0,function*(){const[n,i]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",t.slice(0,Bk),{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:i},r,256),o=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(n),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function EG(t,e){return _n(this,void 0,void 0,function*(){const r=yield Uk(t,e),n=JSON.parse(r);let i="legacy";if(Object.hasOwnProperty.call(n,"v"))switch(n.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new Zc(Qc.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${n.v}`)}return{protocol_version:i}})}const Ib={Firefox:0,Other:1};function _G(){return navigator.userAgent.indexOf("Firefox/")!==-1?Ib.Firefox:Ib.Other}function SG(){return new Promise((t,e)=>{function r(){clearTimeout(i),window.removeEventListener("blur",n)}function n(){r(),t()}window.addEventListener("blur",n);const i=setTimeout(()=>{r(),e()},3e3)})}let f0=null;function xG(t){f0==null&&(f0=document.createElement("iframe"),f0.style.display="none",document.body.appendChild(f0)),f0.contentWindow.location.href=t.toString()}function IG(t){return _n(this,void 0,void 0,function*(){if(t.protocol==="https:")window.location.assign(t);else try{const e=_G();switch(e){case Ib.Firefox:xG(t);break;case Ib.Other:{const r=SG();window.location.assign(t),yield r;break}default:}}catch{throw new Zc(Qc.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function AG(t,e){return _n(this,void 0,void 0,function*(){const r=fG(),n=yield yG(t,r,e);return yield IG(n),r})}const zA={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},CG="com.solana.mobilewalletadapter.v1";function NG(){if(typeof window>"u"||window.isSecureContext!==!0)throw new Zc(Qc.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function MG(t){let e;try{e=new URL(t)}catch{throw new Zc(Qc.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new Zc(Qc.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function qA(t){return new DataView(t).getUint32(0,!1)}function TG(t,e){return _n(this,void 0,void 0,function*(){NG();const r=yield hG(),i=`ws://localhost:${yield AG(r.publicKey,e==null?void 0:e.baseUri)}/solana-wallet`;let s;const o=(()=>{const u=[...zA.retryDelayScheduleMs];return()=>u.length>1?u.shift():u[0]})();let a=1,c=0,l={__type:"disconnected"};return new Promise((u,h)=>{let d;const g={},m=()=>_n(this,void 0,void 0,function*(){if(l.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${l.__type}\`.`);return}d.removeEventListener("open",m);const{associationKeypair:k}=l,D=yield SE();d.send(yield EE(D.publicKey,k.privateKey)),l={__type:"hello_req_sent",associationPublicKey:k.publicKey,ecdhPrivateKey:D.privateKey}}),v=k=>{k.wasClean?l={__type:"disconnected"}:h(new Zc(Qc.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${k.code}: ${k.reason}).`,{closeEvent:k})),x()},$=k=>_n(this,void 0,void 0,function*(){x(),Date.now()-s>=zA.timeoutMs?h(new Zc(Qc.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${i}.`)):(yield new Promise(D=>{const L=o();A=window.setTimeout(D,L)}),T())}),_=k=>_n(this,void 0,void 0,function*(){const D=yield k.data.arrayBuffer();switch(l.__type){case"connecting":if(D.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const L=yield SE();d.send(yield EE(L.publicKey,r.privateKey)),l={__type:"hello_req_sent",associationPublicKey:r.publicKey,ecdhPrivateKey:L.privateKey};break;case"connected":try{const F=D.slice(0,nh),B=qA(F);if(B!==c+1)throw new Error("Encrypted message has invalid sequence number");c=B;const q=yield bG(D,l.sharedSecret),R=g[q.id];delete g[q.id],R.resolve(q.result)}catch(F){if(F instanceof Dk){const B=g[F.jsonRpcMessageId];delete g[F.jsonRpcMessageId],B.reject(F)}else throw F}break;case"hello_req_sent":{if(D.byteLength===0){const E=yield SE();d.send(yield EE(E.publicKey,r.privateKey)),l={__type:"hello_req_sent",associationPublicKey:r.publicKey,ecdhPrivateKey:E.privateKey};break}const F=yield vG(D,l.associationPublicKey,l.ecdhPrivateKey),B=D.slice(Bk),q=B.byteLength!==0?yield _n(this,void 0,void 0,function*(){const E=B.slice(0,nh),b=qA(E);if(b!==c+1)throw new Error("Encrypted message has invalid sequence number");return c=b,EG(B,F)}):{protocol_version:"legacy"};l={__type:"connected",sharedSecret:F,sessionProperties:q};const R=iG(q.protocol_version,(E,b)=>_n(this,void 0,void 0,function*(){const f=a++;return d.send(yield wG({id:f,jsonrpc:"2.0",method:E,params:b??{}},F)),new Promise((p,w)=>{g[f]={resolve(N){switch(E){case"authorize":case"reauthorize":{const{wallet_uri_base:M}=N;if(M!=null)try{MG(M)}catch(S){w(S);return}break}}p(N)},reject:w}})}));try{u(yield t(R))}catch(E){h(E)}finally{x(),d.close()}break}}});let x,A;const T=()=>{x&&x(),l={__type:"connecting",associationKeypair:r},s===void 0&&(s=Date.now()),d=new WebSocket(i,[CG]),d.addEventListener("open",m),d.addEventListener("close",v),d.addEventListener("error",$),d.addEventListener("message",_),x=()=>{window.clearTimeout(A),d.removeEventListener("open",m),d.removeEventListener("close",v),d.removeEventListener("error",$),d.removeEventListener("message",_)}};T()})})}function $G(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var m=0,v=0,$=0,_=g.length;$!==_&&g[$]===0;)$++,m++;for(var x=(_-$)*l+1>>>0,A=new Uint8Array(x);$!==_;){for(var T=g[$],k=0,D=x-1;(T!==0||k<v)&&D!==-1;D--,k++)T+=256*A[D]>>>0,A[D]=T%o>>>0,T=T/o>>>0;if(T!==0)throw new Error("Non-zero carry");v=k,$++}for(var L=x-v;L!==x&&A[L]===0;)L++;for(var F=a.repeat(m);L<x;++L)F+=t.charAt(A[L]);return F}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;for(var m=0,v=0,$=0;g[m]===a;)v++,m++;for(var _=(g.length-m)*c+1>>>0,x=new Uint8Array(_);g[m];){var A=g.charCodeAt(m);if(A>255)return;var T=e[A];if(T===255)return;for(var k=0,D=_-1;(T!==0||k<$)&&D!==-1;D--,k++)T+=o*x[D]>>>0,x[D]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");$=k,m++}for(var L=_-$;L!==_&&x[L]===0;)L++;for(var F=new Uint8Array(v+(_-L)),B=v;L!==_;)F[B++]=x[L++];return F}function d(g){var m=h(g);if(m)return m;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:h,decode:d}}var PG=$G;const OG=PG,kG="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var RG=OG(kG);const cS=Fa(RG);function zr(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(t,[])).next())})}function ae(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function wn(t,e,r,n,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}var Y0,Nn,Du,ef,zk,qk,Wk,r1;const DG=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,LG=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,BG=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class UG{constructor(){Y0.add(this),Nn.set(this,null),Du.set(this,{}),ef.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),ae(this,Y0,"m",qk).call(this),ae(this,Nn,"f")&&(ae(this,Nn,"f").style.display="flex")},this.close=(e=void 0)=>{var r;console.debug("Modal close"),ae(this,Y0,"m",Wk).call(this),ae(this,Nn,"f")&&(ae(this,Nn,"f").style.display="none"),(r=ae(this,Du,"f").close)===null||r===void 0||r.forEach(n=>n(e))},r1.set(this,e=>{e.key==="Escape"&&this.close(e)}),this.init=this.init.bind(this),wn(this,Nn,document.getElementById("mobile-wallet-adapter-embedded-root-ui"))}init(){return zr(this,void 0,void 0,function*(){console.log("Injecting modal"),ae(this,Y0,"m",zk).call(this)})}addEventListener(e,r){var n;return!((n=ae(this,Du,"f")[e])===null||n===void 0)&&n.push(r)||(ae(this,Du,"f")[e]=[r]),()=>this.removeEventListener(e,r)}removeEventListener(e,r){var n;ae(this,Du,"f")[e]=(n=ae(this,Du,"f")[e])===null||n===void 0?void 0:n.filter(i=>r!==i)}}Nn=new WeakMap,Du=new WeakMap,ef=new WeakMap,r1=new WeakMap,Y0=new WeakSet,zk=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){ae(this,Nn,"f")||wn(this,Nn,document.getElementById("mobile-wallet-adapter-embedded-root-ui"));return}wn(this,Nn,document.createElement("div")),ae(this,Nn,"f").id="mobile-wallet-adapter-embedded-root-ui",ae(this,Nn,"f").innerHTML=DG,ae(this,Nn,"f").style.display="none";const e=ae(this,Nn,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");e&&(e.innerHTML=this.contentHtml);const r=document.createElement("style");r.id="mobile-wallet-adapter-embedded-modal-styles",r.textContent=LG+this.contentStyles;const n=document.createElement("div");n.innerHTML=BG,this.dom=n.attachShadow({mode:"closed"}),this.dom.appendChild(r),this.dom.appendChild(ae(this,Nn,"f")),document.body.appendChild(n)},qk=function(){if(!ae(this,Nn,"f")||ae(this,ef,"f"))return;[...ae(this,Nn,"f").querySelectorAll("[data-modal-close]")].forEach(r=>r==null?void 0:r.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",ae(this,r1,"f")),wn(this,ef,!0)},Wk=function(){if(!ae(this,ef,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",ae(this,r1,"f")),!ae(this,Nn,"f")))return;[...ae(this,Nn,"f").querySelectorAll("[data-modal-close]")].forEach(r=>r==null?void 0:r.removeEventListener("click",this.close)),wn(this,ef,!1)};const jG="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function sw(t){return window.btoa(String.fromCharCode.call(null,...t))}function fl(t){return new Uint8Array(window.atob(t).split("").map(e=>e.charCodeAt(0)))}var tf,ih,lS,uS,hS,dS,Q0,Bi,_c,Sl,rf,Lu,n1,Z0,i1,fS,s1,Hk,pS,o1,nf,a1,J0,c1,sf,X0,l1,gS,mS,u1,h1,yS,wS,d1;const Kk="Mobile Wallet Adapter",FG=64,zG=[Qi,Wr,Pc,yh];class qG{constructor(e){tf.add(this),ih.set(this,{}),lS.set(this,"1.0.0"),uS.set(this,Kk),hS.set(this,"https://solanamobile.com/wallets"),dS.set(this,jG),Q0.set(this,void 0),Bi.set(this,void 0),_c.set(this,void 0),Sl.set(this,!1),rf.set(this,0),Lu.set(this,[]),n1.set(this,void 0),Z0.set(this,void 0),i1.set(this,void 0),fS.set(this,(r,n)=>{var i;return!((i=ae(this,ih,"f")[r])===null||i===void 0)&&i.push(n)||(ae(this,ih,"f")[r]=[n]),()=>ae(this,tf,"m",Hk).call(this,r,n)}),pS.set(this,({silent:r}={})=>zr(this,void 0,void 0,function*(){if(ae(this,Sl,"f")||this.connected)return{accounts:this.accounts};wn(this,Sl,!0);try{if(r){const n=yield ae(this,_c,"f").get();if(n)yield ae(this,a1,"f").call(this,n.capabilities),yield ae(this,nf,"f").call(this,n);else return{accounts:this.accounts}}else yield ae(this,o1,"f").call(this)}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}finally{wn(this,Sl,!1)}return{accounts:this.accounts}})),o1.set(this,r=>zr(this,void 0,void 0,function*(){try{const n=yield ae(this,_c,"f").get();if(n)return ae(this,nf,"f").call(this,n),n;const i=yield ae(this,n1,"f").select(ae(this,Lu,"f"));return yield ae(this,sf,"f").call(this,s=>zr(this,void 0,void 0,function*(){const[o,a]=yield Promise.all([s.getCapabilities(),s.authorize({chain:i,identity:ae(this,Q0,"f"),sign_in_payload:r})]),c=ae(this,l1,"f").call(this,a.accounts),l=Object.assign(Object.assign({},a),{accounts:c,chain:i,capabilities:o});return Promise.all([ae(this,a1,"f").call(this,o),ae(this,_c,"f").set(l),ae(this,nf,"f").call(this,l)]),l}))}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}})),nf.set(this,r=>zr(this,void 0,void 0,function*(){var n;const i=ae(this,Bi,"f")==null||((n=ae(this,Bi,"f"))===null||n===void 0?void 0:n.accounts.length)!==r.accounts.length||ae(this,Bi,"f").accounts.some((s,o)=>s.address!==r.accounts[o].address);wn(this,Bi,r),i&&ae(this,tf,"m",s1).call(this,"change",{accounts:this.accounts})})),a1.set(this,r=>zr(this,void 0,void 0,function*(){const n=r.features.includes("solana:signTransactions"),i=r.supports_sign_and_send_transactions,s=Qi in this.features!==i||Wr in this.features!==n;wn(this,Z0,Object.assign(Object.assign({},(i||!i&&!n)&&{[Qi]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:ae(this,u1,"f")}}),n&&{[Wr]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:ae(this,h1,"f")}})),s&&ae(this,tf,"m",s1).call(this,"change",{features:this.features})})),J0.set(this,(r,n,i)=>zr(this,void 0,void 0,function*(){var s,o;try{const[a,c]=yield Promise.all([(o=(s=ae(this,Bi,"f"))===null||s===void 0?void 0:s.capabilities)!==null&&o!==void 0?o:yield r.getCapabilities(),r.authorize({auth_token:n,identity:ae(this,Q0,"f"),chain:i})]),l=ae(this,l1,"f").call(this,c.accounts),u=Object.assign(Object.assign({},c),{accounts:l,chain:i,capabilities:a});Promise.all([ae(this,_c,"f").set(u),ae(this,nf,"f").call(this,u)])}catch(a){throw ae(this,c1,"f").call(this),new Error(a instanceof Error&&a.message||"Unknown error")}})),c1.set(this,()=>zr(this,void 0,void 0,function*(){var r;ae(this,_c,"f").clear(),wn(this,Sl,!1),wn(this,rf,(r=ae(this,rf,"f"),r++,r)),wn(this,Bi,void 0),ae(this,tf,"m",s1).call(this,"change",{accounts:this.accounts})})),sf.set(this,r=>zr(this,void 0,void 0,function*(){var n;const i=(n=ae(this,Bi,"f"))===null||n===void 0?void 0:n.wallet_uri_base,s=i?{baseUri:i}:void 0,o=ae(this,rf,"f");try{return yield TG(r,s)}catch(a){throw ae(this,rf,"f")!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield ae(this,i1,"f").call(this,this)),a}})),X0.set(this,()=>{if(!ae(this,Bi,"f"))throw new Error("Wallet not connected");return{authToken:ae(this,Bi,"f").auth_token,chain:ae(this,Bi,"f").chain}}),l1.set(this,r=>r.map(n=>{var i,s;const o=fl(n.address);return{address:cS.encode(o),publicKey:o,label:n.label,icon:n.icon,chains:(i=n.chains)!==null&&i!==void 0?i:ae(this,Lu,"f"),features:(s=n.features)!==null&&s!==void 0?s:zG}})),gS.set(this,r=>zr(this,void 0,void 0,function*(){const{authToken:n,chain:i}=ae(this,X0,"f").call(this);try{const s=r.map(o=>sw(o));return yield ae(this,sf,"f").call(this,o=>zr(this,void 0,void 0,function*(){return yield ae(this,J0,"f").call(this,o,n,i),(yield o.signTransactions({payloads:s})).signed_payloads.map(fl)}))}catch(s){throw new Error(s instanceof Error&&s.message||"Unknown error")}})),mS.set(this,(r,n)=>zr(this,void 0,void 0,function*(){const{authToken:i,chain:s}=ae(this,X0,"f").call(this);try{return yield ae(this,sf,"f").call(this,o=>zr(this,void 0,void 0,function*(){const[a,c]=yield Promise.all([o.getCapabilities(),ae(this,J0,"f").call(this,o,i,s)]);if(a.supports_sign_and_send_transactions){const l=sw(r);return(yield o.signAndSendTransactions(Object.assign(Object.assign({},n),{payloads:[l]}))).signatures.map(fl)[0]}else throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),u1.set(this,(...r)=>zr(this,void 0,void 0,function*(){const n=[];for(const i of r){const s=yield ae(this,mS,"f").call(this,i.transaction,i.options);n.push({signature:s})}return n})),h1.set(this,(...r)=>zr(this,void 0,void 0,function*(){return(yield ae(this,gS,"f").call(this,r.map(({transaction:n})=>n))).map(n=>({signedTransaction:n}))})),yS.set(this,(...r)=>zr(this,void 0,void 0,function*(){const{authToken:n,chain:i}=ae(this,X0,"f").call(this),s=r.map(({account:a})=>sw(a.publicKey)),o=r.map(({message:a})=>sw(a));try{return yield ae(this,sf,"f").call(this,a=>zr(this,void 0,void 0,function*(){return yield ae(this,J0,"f").call(this,a,n,i),(yield a.signMessages({addresses:s,payloads:o})).signed_payloads.map(fl).map(l=>({signedMessage:l,signature:l.slice(-FG)}))}))}catch(a){throw new Error(a instanceof Error&&a.message||"Unknown error")}})),wS.set(this,(...r)=>zr(this,void 0,void 0,function*(){const n=[];if(r.length>1)for(const i of r)n.push(yield ae(this,d1,"f").call(this,i));else return[yield ae(this,d1,"f").call(this,r[0])];return n})),d1.set(this,r=>zr(this,void 0,void 0,function*(){var n,i,s;wn(this,Sl,!0);try{const o=yield ae(this,o1,"f").call(this,Object.assign(Object.assign({},r),{domain:(n=r==null?void 0:r.domain)!==null&&n!==void 0?n:window.location.host}));if(!o.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const a=o.sign_in_result.address,c=o.accounts.find(l=>l.address==a);return{account:Object.assign(Object.assign({},c??{address:cS.encode(fl(a))}),{publicKey:fl(a),chains:(i=c==null?void 0:c.chains)!==null&&i!==void 0?i:ae(this,Lu,"f"),features:(s=c==null?void 0:c.features)!==null&&s!==void 0?s:o.capabilities.features}),signedMessage:fl(o.sign_in_result.signed_message),signature:fl(o.sign_in_result.signature)}}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}finally{wn(this,Sl,!1)}})),wn(this,_c,e.authorizationCache),wn(this,Q0,e.appIdentity),wn(this,Lu,e.chains),wn(this,n1,e.chainSelector),wn(this,i1,e.onWalletNotFound),wn(this,Z0,{[Qi]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:ae(this,u1,"f")},[Wr]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:ae(this,h1,"f")}})}get version(){return ae(this,lS,"f")}get name(){return ae(this,uS,"f")}get url(){return ae(this,hS,"f")}get icon(){return ae(this,dS,"f")}get chains(){return ae(this,Lu,"f")}get features(){return Object.assign({[Tv]:{version:"1.0.0",connect:ae(this,pS,"f")},[_b]:{version:"1.0.0",disconnect:ae(this,c1,"f")},[$v]:{version:"1.0.0",on:ae(this,fS,"f")},[Pc]:{version:"1.0.0",signMessage:ae(this,yS,"f")},[yh]:{version:"1.0.0",signIn:ae(this,wS,"f")}},ae(this,Z0,"f"))}get accounts(){var e,r;return(r=(e=ae(this,Bi,"f"))===null||e===void 0?void 0:e.accounts)!==null&&r!==void 0?r:[]}get connected(){return!!ae(this,Bi,"f")}get isAuthorized(){return!!ae(this,Bi,"f")}get currentAuthorization(){return ae(this,Bi,"f")}get cachedAuthorizationResult(){return ae(this,_c,"f").get()}}ih=new WeakMap,lS=new WeakMap,uS=new WeakMap,hS=new WeakMap,dS=new WeakMap,Q0=new WeakMap,Bi=new WeakMap,_c=new WeakMap,Sl=new WeakMap,rf=new WeakMap,Lu=new WeakMap,n1=new WeakMap,Z0=new WeakMap,i1=new WeakMap,fS=new WeakMap,pS=new WeakMap,o1=new WeakMap,nf=new WeakMap,a1=new WeakMap,J0=new WeakMap,c1=new WeakMap,sf=new WeakMap,X0=new WeakMap,l1=new WeakMap,gS=new WeakMap,mS=new WeakMap,u1=new WeakMap,h1=new WeakMap,yS=new WeakMap,wS=new WeakMap,d1=new WeakMap,tf=new WeakSet,s1=function(e,...r){var n;(n=ae(this,ih,"f")[e])===null||n===void 0||n.forEach(i=>i.apply(null,r))},Hk=function(e,r){var n;ae(this,ih,"f")[e]=(n=ae(this,ih,"f")[e])===null||n===void 0?void 0:n.filter(i=>r!==i)};const WG="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",HG="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.";class KG extends UG{constructor(){super(...arguments),this.contentStyles=GG,this.contentHtml=VG}initWithError(e){super.init(),this.populateError(e)}populateError(e){var r,n;const i=(r=this.dom)===null||r===void 0?void 0:r.getElementById("mobile-wallet-adapter-error-message"),s=(n=this.dom)===null||n===void 0?void 0:n.getElementById("mobile-wallet-adapter-error-action");if(i){if(e.name==="SolanaMobileWalletAdapterError")switch(e.code){case"ERROR_WALLET_NOT_FOUND":i.innerHTML=WG,s&&s.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":i.innerHTML=HG,s&&(s.style.display="none");return}i.innerHTML=`An unexpected error occurred: ${e.message}`}else console.log("Failed to locate error dialog element")}}const VG=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,GG=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`;function YG(){return zr(this,void 0,void 0,function*(){if(typeof window<"u"){const t=window.navigator.userAgent.toLowerCase(),e=new KG;t.includes("wv")?e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),e.open()}})}const xE="SolanaMobileWalletAdapterDefaultAuthorizationCache";function QG(){let t;try{t=window.localStorage}catch{}return{clear(){return zr(this,void 0,void 0,function*(){if(t)try{t.removeItem(xE)}catch{}})},get(){return zr(this,void 0,void 0,function*(){if(t)try{const e=JSON.parse(t.getItem(xE));if(e&&e.accounts){const r=e.accounts.map(n=>Object.assign(Object.assign({},n),{publicKey:"publicKey"in n?new Uint8Array(Object.values(n.publicKey)):cS.decode(n.address)}));return Object.assign(Object.assign({},e),{accounts:r})}else return e||void 0}catch{}})},set(e){return zr(this,void 0,void 0,function*(){if(t)try{t.setItem(xE,JSON.stringify(e))}catch{}})}}}function ZG(){return{select(t){return zr(this,void 0,void 0,function*(){return t.length===1?t[0]:t.includes(em)?em:t[0]})}}}function br(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(t,[])).next())})}function Be(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function ks(t,e,r,n,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}const bS="standard:connect",JG="standard:disconnect",XG="standard:events";function IE(t){return window.btoa(String.fromCharCode.call(null,...t))}function eY(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var qn,Zr,Rl,Oc,f1,Nc,Bu,vS,ES,Vk,Ab,p1,Cl;const g1=Kk,tY=64;function rY(t){return"version"in t}function Gk(t){switch(t){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return t}}class nY extends JK{constructor(e,r){super(),qn.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),Zr.set(this,void 0),Rl.set(this,!1),Oc.set(this,eY()?Ze.Loadable:Ze.Unsupported),f1.set(this,void 0),Nc.set(this,void 0),Bu.set(this,void 0),vS.set(this,n=>br(this,void 0,void 0,function*(){if(n.accounts&&n.accounts.length>0){Be(this,qn,"m",Vk).call(this);const i=yield Be(this,f1,"f").call(this,n.accounts);i!==Be(this,Nc,"f")&&(ks(this,Nc,i),ks(this,Bu,void 0),this.emit("connect",this.publicKey))}})),ks(this,f1,n=>br(this,void 0,void 0,function*(){var i;const s=yield r.addressSelector.select(n.map(({publicKey:o})=>IE(o)));return(i=n.find(({publicKey:o})=>IE(o)===s))!==null&&i!==void 0?i:n[0]})),ks(this,Zr,e),Be(this,Zr,"f").features[XG].on("change",Be(this,vS,"f")),this.name=Be(this,Zr,"f").name,this.icon=Be(this,Zr,"f").icon,this.url=Be(this,Zr,"f").url}get publicKey(){var e;if(!Be(this,Bu,"f")&&Be(this,Nc,"f"))try{ks(this,Bu,new Te(Be(this,Nc,"f").publicKey),"f")}catch(r){throw new Nh(r instanceof Error&&(r==null?void 0:r.message)||"Unknown error",r)}return(e=Be(this,Bu,"f"))!==null&&e!==void 0?e:null}get connected(){return Be(this,Zr,"f").connected}get connecting(){return Be(this,Rl,"f")}get readyState(){return Be(this,Oc,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return br(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return br(this,void 0,void 0,function*(){Be(this,qn,"m",ES).call(this,!0)})}connect(){return br(this,void 0,void 0,function*(){Be(this,qn,"m",ES).call(this)})}performAuthorization(e){return br(this,void 0,void 0,function*(){try{const r=yield Be(this,Zr,"f").cachedAuthorizationResult;return r?(yield Be(this,Zr,"f").features[bS].connect({silent:!0}),r):(e?yield Be(this,Zr,"f").features[yh].signIn(e):yield Be(this,Zr,"f").features[bS].connect(),yield yield Be(this,Zr,"f").cachedAuthorizationResult)}catch(r){throw new Yc(r instanceof Error&&r.message||"Unknown error",r)}})}disconnect(){return br(this,void 0,void 0,function*(){return yield Be(this,qn,"m",Cl).call(this,()=>br(this,void 0,void 0,function*(){ks(this,Rl,!1),ks(this,Bu,void 0),ks(this,Nc,void 0),yield Be(this,Zr,"f").features[JG].disconnect(),this.emit("disconnect")}))})}signIn(e){return br(this,void 0,void 0,function*(){return Be(this,qn,"m",Cl).call(this,()=>br(this,void 0,void 0,function*(){var r;if(Be(this,Oc,"f")!==Ze.Installed&&Be(this,Oc,"f")!==Ze.Loadable)throw new Gc;ks(this,Rl,!0);try{const n=yield Be(this,Zr,"f").features[yh].signIn(Object.assign(Object.assign({},e),{domain:(r=e==null?void 0:e.domain)!==null&&r!==void 0?r:window.location.host}));if(n.length>0)return n[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(n){throw new Yc(n instanceof Error&&n.message||"Unknown error",n)}finally{ks(this,Rl,!1)}}))})}signMessage(e){return br(this,void 0,void 0,function*(){return yield Be(this,qn,"m",Cl).call(this,()=>br(this,void 0,void 0,function*(){const r=Be(this,qn,"m",Ab).call(this);try{return(yield Be(this,Zr,"f").features[Pc].signMessage({account:r,message:e}))[0].signature}catch(n){throw new ey(n==null?void 0:n.message,n)}}))})}sendTransaction(e,r,n){return br(this,void 0,void 0,function*(){return yield Be(this,qn,"m",Cl).call(this,()=>br(this,void 0,void 0,function*(){const i=Be(this,qn,"m",Ab).call(this);try{let s=function(){let o;switch(r.commitment){case"confirmed":case"finalized":case"processed":o=r.commitment;break;default:o="finalized"}let a;switch(n==null?void 0:n.preflightCommitment){case"confirmed":case"finalized":case"processed":a=n.preflightCommitment;break;case void 0:a=o;break;default:a="finalized"}return(a==="finalized"?2:a==="confirmed"?1:0)<(o==="finalized"?2:o==="confirmed"?1:0)?a:o};if(Qi in Be(this,Zr,"f").features){const o=Gk(Be(this,Zr,"f").currentAuthorization.chain),[a]=(yield Be(this,Zr,"f").features[Qi].signAndSendTransaction({account:i,transaction:e.serialize(),chain:o,options:n?{skipPreflight:n.skipPreflight,maxRetries:n.maxRetries}:void 0})).map(c=>IE(c.signature));return a}else{const[o]=yield Be(this,qn,"m",p1).call(this,[e]);if(rY(o))return yield r.sendTransaction(o);{const a=o.serialize();return yield r.sendRawTransaction(a,Object.assign(Object.assign({},n),{preflightCommitment:s()}))}}}catch(s){throw new Lc(s==null?void 0:s.message,s)}}))})}signTransaction(e){return br(this,void 0,void 0,function*(){return yield Be(this,qn,"m",Cl).call(this,()=>br(this,void 0,void 0,function*(){const[r]=yield Be(this,qn,"m",p1).call(this,[e]);return r}))})}signAllTransactions(e){return br(this,void 0,void 0,function*(){return yield Be(this,qn,"m",Cl).call(this,()=>br(this,void 0,void 0,function*(){return yield Be(this,qn,"m",p1).call(this,e)}))})}}Zr=new WeakMap,Rl=new WeakMap,Oc=new WeakMap,f1=new WeakMap,Nc=new WeakMap,Bu=new WeakMap,vS=new WeakMap,qn=new WeakSet,ES=function(e=!1){return br(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield Be(this,qn,"m",Cl).call(this,()=>br(this,void 0,void 0,function*(){if(Be(this,Oc,"f")!==Ze.Installed&&Be(this,Oc,"f")!==Ze.Loadable)throw new Gc;ks(this,Rl,!0);try{yield Be(this,Zr,"f").features[bS].connect({silent:e})}catch(r){throw new Yc(r instanceof Error&&r.message||"Unknown error",r)}finally{ks(this,Rl,!1)}}))})},Vk=function(){Be(this,Oc,"f")!==Ze.Installed&&this.emit("readyStateChange",ks(this,Oc,Ze.Installed))},Ab=function(){if(!Be(this,Zr,"f").isAuthorized||!Be(this,Nc,"f"))throw new Ir;return Be(this,Nc,"f")},p1=function(e){return br(this,void 0,void 0,function*(){const r=Be(this,qn,"m",Ab).call(this);try{if(Wr in Be(this,Zr,"f").features)return Be(this,Zr,"f").features[Wr].signTransaction(...e.map(n=>({account:r,transaction:n.serialize()}))).then(n=>n.map(i=>{const s=i.signedTransaction,a=s[0]*tY+1;return _I.deserializeMessageVersion(s.slice(a,s.length))==="legacy"?yi.from(s):ap.deserialize(s)}));throw new Error("Connected wallet does not support signing transactions")}catch(n){throw new Xi(n==null?void 0:n.message,n)}})},Cl=function(e){return br(this,void 0,void 0,function*(){try{return yield e()}catch(r){throw this.emit("error",r),r}})};class iY extends nY{constructor(e){var r;const n=Gk((r=e.chain)!==null&&r!==void 0?r:e.cluster);super(new qG({appIdentity:e.appIdentity,authorizationCache:{set:e.authorizationResultCache.set,get:()=>br(this,void 0,void 0,function*(){return yield e.authorizationResultCache.get()}),clear:e.authorizationResultCache.clear},chains:[n],chainSelector:ZG(),onWalletNotFound:()=>br(this,void 0,void 0,function*(){e.onWalletNotFound(this)})}),{addressSelector:e.addressSelector,chain:n})}}class sY extends iY{}function oY(){return{select(t){return br(this,void 0,void 0,function*(){return t[0]})}}}function aY(){return QG()}function cY(t){return br(this,void 0,void 0,function*(){return YG()})}function lY(){return cY}var uY=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},hY=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},m1;function dY(t){const e=({register:r})=>r(t);try{window.dispatchEvent(new fY(e))}catch(r){console.error(`wallet-standard:register-wallet event could not be dispatched
`,r)}try{window.addEventListener("wallet-standard:app-ready",({detail:r})=>e(r))}catch(r){console.error(`wallet-standard:app-ready event listener could not be added
`,r)}}class fY extends Event{get detail(){return uY(this,m1,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),m1.set(this,void 0),hY(this,m1,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}m1=new WeakMap;function pY(t,e){if(t===e)return!0;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function gY(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),h=u.charCodeAt(0);if(e[h]!==255)throw new TypeError(u+" is ambiguous");e[h]=l}const r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,h=0,d=0;const g=l.length;for(;d!==g&&l[d]===0;)d++,u++;const m=(g-d)*s+1>>>0,v=new Uint8Array(m);for(;d!==g;){let x=l[d],A=0;for(let T=m-1;(x!==0||A<h)&&T!==-1;T--,A++)x+=256*v[T]>>>0,v[T]=x%r>>>0,x=x/r>>>0;if(x!==0)throw new Error("Non-zero carry");h=A,d++}let $=m-h;for(;$!==m&&v[$]===0;)$++;let _=n.repeat(u);for(;$<m;++$)_+=t.charAt(v[$]);return _}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,h=0,d=0;for(;l[u]===n;)h++,u++;const g=(l.length-u)*i+1>>>0,m=new Uint8Array(g);for(;u<l.length;){const x=l.charCodeAt(u);if(x>255)return;let A=e[x];if(A===255)return;let T=0;for(let k=g-1;(A!==0||T<d)&&k!==-1;k--,T++)A+=r*m[k]>>>0,m[k]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");d=T,u++}let v=g-d;for(;v!==g&&m[v]===0;)v++;const $=new Uint8Array(h+(g-v));let _=h;for(;v!==g;)$[_++]=m[v++];return $}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var mY="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const yY=gY(mY);var $e=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},bn=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},di,ms,sh,oh,Uu,eg,Cb,Pt,Nb,_S,y1,SS,wg,xS,WA,HA,KA,VA;class wY extends gk{get name(){return $e(this,Pt,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return $e(this,Pt,"f").icon}get readyState(){return $e(this,Nb,"f")}get publicKey(){return $e(this,sh,"f")}get connecting(){return $e(this,oh,"f")}get supportedTransactionVersions(){return $e(this,Cb,"f")}get wallet(){return $e(this,Pt,"f")}get standard(){return!0}constructor({wallet:e}){super(),di.add(this),ms.set(this,void 0),sh.set(this,void 0),oh.set(this,void 0),Uu.set(this,void 0),eg.set(this,void 0),Cb.set(this,void 0),Pt.set(this,void 0),Nb.set(this,typeof window>"u"||typeof document>"u"?Ze.Unsupported:Ze.Installed),xS.set(this,r=>{if("accounts"in r){const n=$e(this,Pt,"f").accounts[0];$e(this,ms,"f")&&!$e(this,Uu,"f")&&n!==$e(this,ms,"f")&&(n?$e(this,di,"m",y1).call(this,n):(this.emit("error",new Mv),$e(this,di,"m",SS).call(this)))}"features"in r&&$e(this,di,"m",wg).call(this)}),bn(this,Pt,e,"f"),bn(this,ms,null,"f"),bn(this,sh,null,"f"),bn(this,oh,!1,"f"),bn(this,Uu,!1,"f"),bn(this,eg,$e(this,Pt,"f").features[$v].on("change",$e(this,xS,"f")),"f"),$e(this,di,"m",wg).call(this)}destroy(){bn(this,ms,null,"f"),bn(this,sh,null,"f"),bn(this,oh,!1,"f"),bn(this,Uu,!1,"f");const e=$e(this,eg,"f");e&&(bn(this,eg,null,"f"),e())}async autoConnect(){return $e(this,di,"m",_S).call(this,{silent:!0})}async connect(){return $e(this,di,"m",_S).call(this)}async disconnect(){if(_b in $e(this,Pt,"f").features)try{bn(this,Uu,!0,"f"),await $e(this,Pt,"f").features[_b].disconnect()}catch(e){this.emit("error",new Xm(e==null?void 0:e.message,e))}finally{bn(this,Uu,!1,"f")}$e(this,di,"m",SS).call(this)}async sendTransaction(e,r,n={}){try{const i=$e(this,ms,"f");if(!i)throw new Ir;let s;if(Qi in $e(this,Pt,"f").features)if(i.features.includes(Qi))s=Qi;else if(Wr in $e(this,Pt,"f").features&&i.features.includes(Wr))s=Wr;else throw new rh;else if(Wr in $e(this,Pt,"f").features){if(!i.features.includes(Wr))throw new rh;s=Wr}else throw new Mf;const o=HV(r.rpcEndpoint);if(!i.chains.includes(o))throw new Lc;try{const{signers:a,...c}=n;let l;if(xo(e)?(a!=null&&a.length&&e.sign(a),l=e.serialize()):(e=await this.prepareTransaction(e,r,c),a!=null&&a.length&&e.partialSign(...a),l=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s===Qi){const[u]=await $e(this,Pt,"f").features[Qi].signAndSendTransaction({account:i,chain:o,transaction:l,options:{preflightCommitment:vE(c.preflightCommitment||r.commitment),skipPreflight:c.skipPreflight,maxRetries:c.maxRetries,minContextSlot:c.minContextSlot}});return yY.encode(u.signature)}else{const[u]=await $e(this,Pt,"f").features[Wr].signTransaction({account:i,chain:o,transaction:l,options:{preflightCommitment:vE(c.preflightCommitment||r.commitment),minContextSlot:c.minContextSlot}});return await r.sendRawTransaction(u.signedTransaction,{...c,preflightCommitment:vE(c.preflightCommitment||r.commitment)})}}catch(a){throw a instanceof kn?a:new Lc(a==null?void 0:a.message,a)}}catch(i){throw this.emit("error",i),i}}}ms=new WeakMap,sh=new WeakMap,oh=new WeakMap,Uu=new WeakMap,eg=new WeakMap,Cb=new WeakMap,Pt=new WeakMap,Nb=new WeakMap,xS=new WeakMap,di=new WeakSet,_S=async function(e){try{if(this.connected||this.connecting)return;if($e(this,Nb,"f")!==Ze.Installed)throw new Gc;if(bn(this,oh,!0,"f"),!$e(this,Pt,"f").accounts.length)try{await $e(this,Pt,"f").features[Tv].connect(e)}catch(n){throw new Yc(n==null?void 0:n.message,n)}const r=$e(this,Pt,"f").accounts[0];if(!r)throw new rh;$e(this,di,"m",y1).call(this,r)}catch(r){throw this.emit("error",r),r}finally{bn(this,oh,!1,"f")}},y1=function(e){let r;try{r=new Te(e.address)}catch(n){throw new Nh(n==null?void 0:n.message,n)}bn(this,ms,e,"f"),bn(this,sh,r,"f"),$e(this,di,"m",wg).call(this),this.emit("connect",r)},SS=function(){bn(this,ms,null,"f"),bn(this,sh,null,"f"),$e(this,di,"m",wg).call(this),this.emit("disconnect")},wg=function(){var r,n;const e=Qi in $e(this,Pt,"f").features?$e(this,Pt,"f").features[Qi].supportedTransactionVersions:$e(this,Pt,"f").features[Wr].supportedTransactionVersions;bn(this,Cb,pY(e,["legacy"])?null:new Set(e),"f"),Wr in $e(this,Pt,"f").features&&((r=$e(this,ms,"f"))!=null&&r.features.includes(Wr))?(this.signTransaction=$e(this,di,"m",WA),this.signAllTransactions=$e(this,di,"m",HA)):(delete this.signTransaction,delete this.signAllTransactions),Pc in $e(this,Pt,"f").features&&((n=$e(this,ms,"f"))!=null&&n.features.includes(Pc))?this.signMessage=$e(this,di,"m",KA):delete this.signMessage,yh in $e(this,Pt,"f").features?this.signIn=$e(this,di,"m",VA):delete this.signIn},WA=async function(e){try{const r=$e(this,ms,"f");if(!r)throw new Ir;if(!(Wr in $e(this,Pt,"f").features))throw new Mf;if(!r.features.includes(Wr))throw new rh;try{const i=(await $e(this,Pt,"f").features[Wr].signTransaction({account:r,transaction:xo(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return xo(e)?ap.deserialize(i):yi.from(i)}catch(n){throw n instanceof kn?n:new Xi(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}},HA=async function(e){try{const r=$e(this,ms,"f");if(!r)throw new Ir;if(!(Wr in $e(this,Pt,"f").features))throw new Mf;if(!r.features.includes(Wr))throw new rh;try{const n=await $e(this,Pt,"f").features[Wr].signTransaction(...e.map(i=>({account:r,transaction:xo(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((i,s)=>{const o=n[s].signedTransaction;return xo(i)?ap.deserialize(o):yi.from(o)})}catch(n){throw new Xi(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}},KA=async function(e){try{const r=$e(this,ms,"f");if(!r)throw new Ir;if(!(Pc in $e(this,Pt,"f").features))throw new Mf;if(!r.features.includes(Pc))throw new rh;try{return(await $e(this,Pt,"f").features[Pc].signMessage({account:r,message:e}))[0].signature}catch(n){throw new ey(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}},VA=async function(e={}){try{if(!(yh in $e(this,Pt,"f").features))throw new Mf;let r;try{[r]=await $e(this,Pt,"f").features[yh].signIn(e)}catch(n){throw new kA(n==null?void 0:n.message,n)}if(!r)throw new kA;return $e(this,di,"m",y1).call(this,r.account),r}catch(r){throw this.emit("error",r),r}};const bY=XK;var vY=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},EY=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},w1;let Ds;const Lv=new Set;function _Y(t){bg=void 0,Lv.add(t)}function SY(t){bg=void 0,Lv.delete(t)}const Tf={};function xY(){if(Ds||(Ds=Object.freeze({register:GA,get:IY,on:AY}),typeof window>"u"))return Ds;const t=Object.freeze({register:GA});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new CY(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Ds}function GA(...t){var e;return t=t.filter(r=>!Lv.has(r)),t.length?(t.forEach(r=>_Y(r)),(e=Tf.register)==null||e.forEach(r=>IS(()=>r(...t))),function(){var n;t.forEach(i=>SY(i)),(n=Tf.unregister)==null||n.forEach(i=>IS(()=>i(...t)))}):()=>{}}let bg;function IY(){return bg||(bg=[...Lv]),bg}function AY(t,e){var r;return(r=Tf[t])!=null&&r.push(e)||(Tf[t]=[e]),function(){var i;Tf[t]=(i=Tf[t])==null?void 0:i.filter(s=>e!==s)}}function IS(t){try{t()}catch(e){console.error(e)}}class CY extends Event{get detail(){return vY(this,w1,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),w1.set(this,void 0),EY(this,w1,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}w1=new WeakMap;function NY(){if(Ds||(Ds=xY(),typeof window>"u"))return Ds;const t=window.navigator.wallets||[];if(!Array.isArray(t))return console.error("window.navigator.wallets is not an array"),Ds;const{register:e}=Ds,r=(...n)=>n.forEach(i=>IS(()=>i({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:r})})}catch{return console.error("window.navigator.wallets could not be set"),Ds}return r(...t),Ds}function MY(t){const e=YA(()=>new Set),{get:r,on:n}=YA(()=>NY()),[i,s]=ne.useState(()=>QA(r()));ne.useEffect(()=>{const a=[n("register",(...c)=>s(l=>[...l,...QA(c)])),n("unregister",(...c)=>s(l=>l.filter(u=>c.some(h=>h===u.wallet))))];return()=>a.forEach(c=>c())},[n]);const o=TY(i);return ne.useEffect(()=>{if(!o)return;const a=new Set(i);new Set(o.filter(l=>!a.has(l))).forEach(l=>l.destroy())},[o,i]),ne.useEffect(()=>()=>i.forEach(a=>a.destroy()),[]),ne.useMemo(()=>[...i,...t.filter(({name:a})=>i.some(c=>c.name===a)?(e.has(a)||(e.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[i,t,e])}function YA(t){const e=ne.useRef(void 0);return e.current===void 0&&(e.current={value:t()}),e.current.value}function TY(t){const e=ne.useRef(void 0);return ne.useEffect(()=>{e.current=t}),e.current}function QA(t){return t.filter(bY).map(e=>new wY({wallet:e}))}var Hf;(function(t){t[t.DESKTOP_WEB=0]="DESKTOP_WEB",t[t.MOBILE_WEB=1]="MOBILE_WEB"})(Hf||(Hf={}));function $Y(t){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(t)}function PY({adapters:t,userAgentString:e}){return t.some(r=>r.name!==g1&&r.readyState===Ze.Installed)?Hf.DESKTOP_WEB:e&&/android/i.test(e)&&!$Y(e)?Hf.MOBILE_WEB:Hf.DESKTOP_WEB}function OY(t){return t?/devnet/i.test(t)?"devnet":/testnet/i.test(t)?"testnet":"mainnet-beta":"mainnet-beta"}function kY({children:t,wallets:e,adapter:r,isUnloadingRef:n,onAutoConnectRequest:i,onConnectError:s,onError:o,onSelectWallet:a}){const c=ne.useRef(!1),[l,u]=ne.useState(!1),h=ne.useRef(!1),[d,g]=ne.useState(!1),[m,v]=ne.useState(()=>(r==null?void 0:r.publicKey)??null),[$,_]=ne.useState(()=>(r==null?void 0:r.connected)??!1),x=ne.useRef(o);ne.useEffect(()=>(x.current=o,()=>{x.current=void 0}),[o]);const A=ne.useRef((p,w)=>(n.current||(x.current?x.current(p,w):(console.error(p,w),p instanceof Gc&&typeof window<"u"&&w&&window.open(w.url,"_blank"))),p)),[T,k]=ne.useState(()=>e.map(p=>({adapter:p,readyState:p.readyState})).filter(({readyState:p})=>p!==Ze.Unsupported));ne.useEffect(()=>{k(w=>e.map((N,M)=>{const S=w[M];return S&&S.adapter===N&&S.readyState===N.readyState?S:{adapter:N,readyState:N.readyState}}).filter(({readyState:N})=>N!==Ze.Unsupported));function p(w){k(N=>{const M=N.findIndex(({adapter:y})=>y===this);if(M===-1)return N;const{adapter:S}=N[M];return[...N.slice(0,M),{adapter:S,readyState:w},...N.slice(M+1)].filter(({readyState:y})=>y!==Ze.Unsupported)})}return e.forEach(w=>w.on("readyStateChange",p,w)),()=>{e.forEach(w=>w.off("readyStateChange",p,w))}},[r,e]);const D=ne.useMemo(()=>T.find(p=>p.adapter===r)??null,[r,T]);ne.useEffect(()=>{if(!r)return;const p=M=>{v(M),c.current=!1,u(!1),_(!0),h.current=!1,g(!1)},w=()=>{n.current||(v(null),c.current=!1,u(!1),_(!1),h.current=!1,g(!1))},N=M=>{A.current(M,r)};return r.on("connect",p),r.on("disconnect",w),r.on("error",N),()=>{r.off("connect",p),r.off("disconnect",w),r.off("error",N),w()}},[r,n]);const L=ne.useRef(!1);ne.useEffect(()=>()=>{L.current=!1},[r]),ne.useEffect(()=>{L.current||c.current||$||!i||!((D==null?void 0:D.readyState)===Ze.Installed||(D==null?void 0:D.readyState)===Ze.Loadable)||(c.current=!0,u(!0),L.current=!0,async function(){try{await i()}catch{s()}finally{u(!1),c.current=!1}}())},[$,i,s,D]);const F=ne.useCallback(async(p,w,N)=>{if(!r)throw A.current(new RA);if(!$)throw A.current(new Ir,r);return await r.sendTransaction(p,w,N)},[r,$]),B=ne.useMemo(()=>r&&"signTransaction"in r?async p=>{if(!$)throw A.current(new Ir,r);return await r.signTransaction(p)}:void 0,[r,$]),q=ne.useMemo(()=>r&&"signAllTransactions"in r?async p=>{if(!$)throw A.current(new Ir,r);return await r.signAllTransactions(p)}:void 0,[r,$]),R=ne.useMemo(()=>r&&"signMessage"in r?async p=>{if(!$)throw A.current(new Ir,r);return await r.signMessage(p)}:void 0,[r,$]),E=ne.useMemo(()=>r&&"signIn"in r?async p=>await r.signIn(p):void 0,[r]),b=ne.useCallback(async()=>{if(c.current||h.current||D!=null&&D.adapter.connected)return;if(!D)throw A.current(new RA);const{adapter:p,readyState:w}=D;if(!(w===Ze.Installed||w===Ze.Loadable))throw A.current(new Gc,p);c.current=!0,u(!0);try{await p.connect()}catch(N){throw s(),N}finally{u(!1),c.current=!1}},[s,D]),f=ne.useCallback(async()=>{if(!h.current&&r){h.current=!0,g(!0);try{await r.disconnect()}finally{g(!1),h.current=!1}}},[r]);return fe.createElement(yk.Provider,{value:{autoConnect:!!i,wallets:T,wallet:D,publicKey:m,connected:$,connecting:l,disconnecting:d,select:a,connect:b,disconnect:f,sendTransaction:F,signTransaction:B,signAllTransactions:q,signMessage:R,signIn:E}},t)}let AE;function RY(){var t;return AE===void 0&&(AE=((t=globalThis.navigator)==null?void 0:t.userAgent)??null),AE}function ZA(t){const e=RY();return PY({adapters:t,userAgentString:e})===Hf.MOBILE_WEB}function DY(){const t=globalThis.location;if(t)return`${t.protocol}//${t.host}`}function LY({children:t,wallets:e,autoConnect:r,localStorageKey:n="walletName",onError:i}){const{connection:s}=Jm(),o=MY(e),a=ne.useMemo(()=>{if(!ZA(o))return null;const x=o.find(A=>A.name===g1);return x||new sY({addressSelector:oY(),appIdentity:{uri:DY()},authorizationResultCache:aY(),cluster:OY(s==null?void 0:s.rpcEndpoint),onWalletNotFound:lY()})},[o,s==null?void 0:s.rpcEndpoint]),c=ne.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[l,u]=tV(n,null),h=ne.useMemo(()=>c.find(x=>x.name===l)??null,[c,l]),d=ne.useCallback(x=>{l!==x&&(h&&h.name!==g1&&h.disconnect(),u(x))},[h,u,l]);ne.useEffect(()=>{if(!h)return;function x(){v.current||u(null)}return h.on("disconnect",x),()=>{h.off("disconnect",x)}},[h,o,u,l]);const g=ne.useRef(!1),m=ne.useMemo(()=>{if(!(!r||!h))return async()=>{(r===!0||await r(h))&&(g.current?await h.connect():await h.autoConnect())}},[r,h]),v=ne.useRef(!1);ne.useEffect(()=>{if(l===g1&&ZA(o)){v.current=!1;return}function x(){v.current=!0}return window.addEventListener("beforeunload",x),()=>{window.removeEventListener("beforeunload",x)}},[o,l]);const $=ne.useCallback(()=>{h&&d(null)},[h,d]),_=ne.useCallback(x=>{g.current=!0,d(x)},[d]);return fe.createElement(kY,{wallets:c,adapter:h,isUnloadingRef:v,onAutoConnectRequest:m,onConnectError:$,onError:i,onSelectWallet:_},t)}const Yk={setVisible(t){console.error(Qk("call","setVisible"))},visible:!1};Object.defineProperty(Yk,"visible",{get(){return console.error(Qk("read","visible")),!1}});function Qk(t,e){return`You have tried to  ${t} "${e}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const Zk=ne.createContext(Yk);function Jk(){return ne.useContext(Zk)}function BY({onSelectWallet:t}){const{connect:e,connected:r,connecting:n,disconnect:i,disconnecting:s,publicKey:o,select:a,wallet:c,wallets:l}=mu();let u;n?u="connecting":r?u="connected":s?u="disconnecting":c?u="has-wallet":u="no-wallet";const h=ne.useCallback(()=>{e().catch(()=>{})},[e]),d=ne.useCallback(()=>{i().catch(()=>{})},[i]),g=ne.useCallback(()=>{t({onSelectWallet:a,wallets:l})},[t,a,l]);return{buttonState:u,onConnect:u==="has-wallet"?h:void 0,onDisconnect:u!=="disconnecting"&&u!=="no-wallet"?d:void 0,onSelectWallet:g,publicKey:o??void 0,walletIcon:c==null?void 0:c.adapter.icon,walletName:c==null?void 0:c.adapter.name}}const Xk=t=>fe.createElement("button",{className:`wallet-adapter-button ${t.className||""}`,disabled:t.disabled,style:t.style,onClick:t.onClick,tabIndex:t.tabIndex||0,type:"button"},t.startIcon&&fe.createElement("i",{className:"wallet-adapter-button-start-icon"},t.startIcon),t.children,t.endIcon&&fe.createElement("i",{className:"wallet-adapter-button-end-icon"},t.endIcon)),e7=({wallet:t,...e})=>t&&fe.createElement("img",{src:t.adapter.icon,alt:`${t.adapter.name} icon`,...e});function UY({walletIcon:t,walletName:e,...r}){return fe.createElement(Xk,{...r,className:"wallet-adapter-button-trigger",startIcon:t&&e?fe.createElement(e7,{wallet:{adapter:{icon:t,name:e}}}):void 0})}function jY({children:t,labels:e,...r}){const{setVisible:n}=Jk(),{buttonState:i,onConnect:s,onDisconnect:o,publicKey:a,walletIcon:c,walletName:l}=BY({onSelectWallet(){n(!0)}}),[u,h]=ne.useState(!1),[d,g]=ne.useState(!1),m=ne.useRef(null);ne.useEffect(()=>{const $=_=>{const x=m.current;!x||x.contains(_.target)||g(!1)};return document.addEventListener("mousedown",$),document.addEventListener("touchstart",$),()=>{document.removeEventListener("mousedown",$),document.removeEventListener("touchstart",$)}},[]);const v=ne.useMemo(()=>{if(t)return t;if(a){const $=a.toBase58();return $.slice(0,4)+".."+$.slice(-4)}else return i==="connecting"||i==="has-wallet"?e[i]:e["no-wallet"]},[i,t,e,a]);return fe.createElement("div",{className:"wallet-adapter-dropdown"},fe.createElement(UY,{...r,"aria-expanded":d,style:{pointerEvents:d?"none":"auto",...r.style},onClick:()=>{switch(i){case"no-wallet":n(!0);break;case"has-wallet":s&&s();break;case"connected":g(!0);break}},walletIcon:c,walletName:l},v),fe.createElement("ul",{"aria-label":"dropdown-list",className:`wallet-adapter-dropdown-list ${d&&"wallet-adapter-dropdown-list-active"}`,ref:m,role:"menu"},a?fe.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:async()=>{await navigator.clipboard.writeText(a.toBase58()),h(!0),setTimeout(()=>h(!1),400)},role:"menuitem"},u?e.copied:e["copy-address"]):null,fe.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{n(!0),g(!1)},role:"menuitem"},e["change-wallet"]),o?fe.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{o(),g(!1)},role:"menuitem"},e.disconnect):null))}const JA=({id:t,children:e,expanded:r=!1})=>{const n=ne.useRef(null),i=ne.useRef(!0),s="height 250ms ease-out",o=()=>{const c=n.current;c&&requestAnimationFrame(()=>{c.style.height=c.scrollHeight+"px"})},a=()=>{const c=n.current;c&&requestAnimationFrame(()=>{c.style.height=c.offsetHeight+"px",c.style.overflow="hidden",requestAnimationFrame(()=>{c.style.height="0"})})};return ne.useLayoutEffect(()=>{r?o():a()},[r]),ne.useLayoutEffect(()=>{const c=n.current;if(!c)return;function l(){c&&(c.style.overflow=r?"initial":"hidden",r&&(c.style.height="auto"))}function u(h){c&&h.target===c&&h.propertyName==="height"&&l()}return i.current&&(l(),i.current=!1),c.addEventListener("transitionend",u),()=>c.removeEventListener("transitionend",u)},[r]),fe.createElement("div",{className:"wallet-adapter-collapse",id:t,ref:n,role:"region",style:{height:0,transition:i.current?void 0:s}},e)},CE=({handleClick:t,tabIndex:e,wallet:r})=>fe.createElement("li",null,fe.createElement(Xk,{onClick:t,startIcon:fe.createElement(e7,{wallet:r}),tabIndex:e},r.adapter.name,r.readyState===Ze.Installed&&fe.createElement("span",null,"Detected"))),FY=()=>fe.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),fe.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),fe.createElement("g",{clipPath:"url(#clip0_880_5115)"},fe.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),fe.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),fe.createElement("defs",null,fe.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},fe.createElement("stop",{stopColor:"#9945FF"}),fe.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),fe.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),fe.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),fe.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),fe.createElement("stop",{offset:"1",stopColor:"#00D18C"})),fe.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},fe.createElement("stop",{stopColor:"#9945FF"}),fe.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),fe.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),fe.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),fe.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),fe.createElement("stop",{offset:"1",stopColor:"#00D18C"})),fe.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},fe.createElement("stop",{stopColor:"#9945FF"}),fe.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),fe.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),fe.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),fe.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),fe.createElement("stop",{offset:"1",stopColor:"#00D18C"})),fe.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},fe.createElement("stop",{stopColor:"#9945FF"}),fe.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),fe.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),fe.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),fe.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),fe.createElement("stop",{offset:"1",stopColor:"#00D18C"})),fe.createElement("clipPath",{id:"clip0_880_5115"},fe.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),zY=({className:t="",container:e="body"})=>{const r=ne.useRef(null),{wallets:n,select:i}=mu(),{setVisible:s}=Jk(),[o,a]=ne.useState(!1),[c,l]=ne.useState(!1),[u,h]=ne.useState(null),[d,g]=ne.useMemo(()=>{const A=[],T=[];for(const k of n)k.readyState===Ze.Installed?A.push(k):T.push(k);return A.length?[A,T]:[T,[]]},[n]),m=ne.useCallback(()=>{l(!1),setTimeout(()=>s(!1),150)},[s]),v=ne.useCallback(A=>{A.preventDefault(),m()},[m]),$=ne.useCallback((A,T)=>{i(T),v(A)},[i,v]),_=ne.useCallback(()=>a(!o),[o]),x=ne.useCallback(A=>{const T=r.current;if(!T)return;const k=T.querySelectorAll("button"),D=k[0],L=k[k.length-1];A.shiftKey?document.activeElement===D&&(L.focus(),A.preventDefault()):document.activeElement===L&&(D.focus(),A.preventDefault())},[r]);return ne.useLayoutEffect(()=>{const A=k=>{k.key==="Escape"?m():k.key==="Tab"&&x(k)},{overflow:T}=window.getComputedStyle(document.body);return setTimeout(()=>l(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",A,!1),()=>{document.body.style.overflow=T,window.removeEventListener("keydown",A,!1)}},[m,x]),ne.useLayoutEffect(()=>h(document.querySelector(e)),[e]),u&&T9.createPortal(fe.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${c&&"wallet-adapter-modal-fade-in"} ${t}`,ref:r,role:"dialog"},fe.createElement("div",{className:"wallet-adapter-modal-container"},fe.createElement("div",{className:"wallet-adapter-modal-wrapper"},fe.createElement("button",{onClick:v,className:"wallet-adapter-modal-button-close"},fe.createElement("svg",{width:"14",height:"14"},fe.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),d.length?fe.createElement(fe.Fragment,null,fe.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),fe.createElement("ul",{className:"wallet-adapter-modal-list"},d.map(A=>fe.createElement(CE,{key:A.adapter.name,handleClick:T=>$(T,A.adapter.name),wallet:A})),g.length?fe.createElement(JA,{expanded:o,id:"wallet-adapter-modal-collapse"},g.map(A=>fe.createElement(CE,{key:A.adapter.name,handleClick:T=>$(T,A.adapter.name),tabIndex:o?0:-1,wallet:A}))):null),g.length?fe.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:_,tabIndex:0},fe.createElement("span",null,o?"Less ":"More ","options"),fe.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},fe.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):fe.createElement(fe.Fragment,null,fe.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),fe.createElement("div",{className:"wallet-adapter-modal-middle"},fe.createElement(FY,null)),g.length?fe.createElement(fe.Fragment,null,fe.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:_,tabIndex:0},fe.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),fe.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},fe.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),fe.createElement(JA,{expanded:o,id:"wallet-adapter-modal-collapse"},fe.createElement("ul",{className:"wallet-adapter-modal-list"},g.map(A=>fe.createElement(CE,{key:A.adapter.name,handleClick:T=>$(T,A.adapter.name),tabIndex:o?0:-1,wallet:A}))))):null))),fe.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:v})),u)},qY=({children:t,...e})=>{const[r,n]=ne.useState(!1);return fe.createElement(Zk.Provider,{value:{visible:r,setVisible:n}},t,r&&fe.createElement(zY,{...e}))},WY={"change-wallet":"Change wallet",connecting:"Connecting ...","copy-address":"Copy address",copied:"Copied",disconnect:"Disconnect","has-wallet":"Connect","no-wallet":"Select Wallet"};function HY(t){return fe.createElement(jY,{...t,labels:WY})}const KY="modulepreload",VY=function(t){return"/dojo3/"+t},XA={},Mh=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=VY(c),c in XA)return;XA[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":KY,l||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),l)return new Promise((d,g)=>{h.addEventListener("load",d),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var ow={exports:{}},e8;function GY(){if(e8)return ow.exports;e8=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(k,D,L){return Function.prototype.apply.call(k,D,L)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:r=function(k){return Object.getOwnPropertyNames(k)};function n(T){console&&console.warn&&console.warn(T)}var i=Number.isNaN||function(k){return k!==k};function s(){s.init.call(this)}ow.exports=s,ow.exports.once=_,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(T){if(typeof T!="number"||T<0||i(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");o=T}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||i(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function c(T){return T._maxListeners===void 0?s.defaultMaxListeners:T._maxListeners}s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(k){for(var D=[],L=1;L<arguments.length;L++)D.push(arguments[L]);var F=k==="error",B=this._events;if(B!==void 0)F=F&&B.error===void 0;else if(!F)return!1;if(F){var q;if(D.length>0&&(q=D[0]),q instanceof Error)throw q;var R=new Error("Unhandled error."+(q?" ("+q.message+")":""));throw R.context=q,R}var E=B[k];if(E===void 0)return!1;if(typeof E=="function")e(E,this,D);else for(var b=E.length,f=m(E,b),L=0;L<b;++L)e(f[L],this,D);return!0};function l(T,k,D,L){var F,B,q;if(a(D),B=T._events,B===void 0?(B=T._events=Object.create(null),T._eventsCount=0):(B.newListener!==void 0&&(T.emit("newListener",k,D.listener?D.listener:D),B=T._events),q=B[k]),q===void 0)q=B[k]=D,++T._eventsCount;else if(typeof q=="function"?q=B[k]=L?[D,q]:[q,D]:L?q.unshift(D):q.push(D),F=c(T),F>0&&q.length>F&&!q.warned){q.warned=!0;var R=new Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");R.name="MaxListenersExceededWarning",R.emitter=T,R.type=k,R.count=q.length,n(R)}return T}s.prototype.addListener=function(k,D){return l(this,k,D,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(k,D){return l(this,k,D,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(T,k,D){var L={fired:!1,wrapFn:void 0,target:T,type:k,listener:D},F=u.bind(L);return F.listener=D,L.wrapFn=F,F}s.prototype.once=function(k,D){return a(D),this.on(k,h(this,k,D)),this},s.prototype.prependOnceListener=function(k,D){return a(D),this.prependListener(k,h(this,k,D)),this},s.prototype.removeListener=function(k,D){var L,F,B,q,R;if(a(D),F=this._events,F===void 0)return this;if(L=F[k],L===void 0)return this;if(L===D||L.listener===D)--this._eventsCount===0?this._events=Object.create(null):(delete F[k],F.removeListener&&this.emit("removeListener",k,L.listener||D));else if(typeof L!="function"){for(B=-1,q=L.length-1;q>=0;q--)if(L[q]===D||L[q].listener===D){R=L[q].listener,B=q;break}if(B<0)return this;B===0?L.shift():v(L,B),L.length===1&&(F[k]=L[0]),F.removeListener!==void 0&&this.emit("removeListener",k,R||D)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(k){var D,L,F;if(L=this._events,L===void 0)return this;if(L.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):L[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete L[k]),this;if(arguments.length===0){var B=Object.keys(L),q;for(F=0;F<B.length;++F)q=B[F],q!=="removeListener"&&this.removeAllListeners(q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(D=L[k],typeof D=="function")this.removeListener(k,D);else if(D!==void 0)for(F=D.length-1;F>=0;F--)this.removeListener(k,D[F]);return this};function d(T,k,D){var L=T._events;if(L===void 0)return[];var F=L[k];return F===void 0?[]:typeof F=="function"?D?[F.listener||F]:[F]:D?$(F):m(F,F.length)}s.prototype.listeners=function(k){return d(this,k,!0)},s.prototype.rawListeners=function(k){return d(this,k,!1)},s.listenerCount=function(T,k){return typeof T.listenerCount=="function"?T.listenerCount(k):g.call(T,k)},s.prototype.listenerCount=g;function g(T){var k=this._events;if(k!==void 0){var D=k[T];if(typeof D=="function")return 1;if(D!==void 0)return D.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function m(T,k){for(var D=new Array(k),L=0;L<k;++L)D[L]=T[L];return D}function v(T,k){for(;k+1<T.length;k++)T[k]=T[k+1];T.pop()}function $(T){for(var k=new Array(T.length),D=0;D<k.length;++D)k[D]=T[D].listener||T[D];return k}function _(T,k){return new Promise(function(D,L){function F(q){T.removeListener(k,B),L(q)}function B(){typeof T.removeListener=="function"&&T.removeListener("error",F),D([].slice.call(arguments))}A(T,k,B,{once:!0}),k!=="error"&&x(T,F,{once:!0})})}function x(T,k,D){typeof T.on=="function"&&A(T,"error",k,D)}function A(T,k,D,L){if(typeof T.on=="function")L.once?T.once(k,D):T.on(k,D);else if(typeof T.addEventListener=="function")T.addEventListener(k,function F(B){L.once&&T.removeEventListener(k,F),D(B)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return ow.exports}var Rn=GY();const Dp=Fa(Rn),YY={},t7=(t,e)=>{YY[t]=e},Bv=t=>{class e extends Error{constructor(i,s,o){super(i||t,o);ot(this,"cause");if(Object.setPrototypeOf(this,e.prototype),this.name=t,s)for(const a in s)this[a]=s[a];if(o&&QY(o)&&"cause"in o&&!this.cause){const a=o.cause;this.cause=a,"stack"in a&&(this.stack=this.stack+`
CAUSE: `+a.stack)}}}return e};function QY(t){return typeof t=="object"}const mAe=Bv("DisconnectedDevice"),yAe=Bv("DisconnectedDeviceDuringOperation"),wAe=Bv("TransportOpenUserCancelled"),bAe=Bv("TransportRaceCondition");var t8;(function(t){t.Unknown="Unknown",t.LocationServicesDisabled="LocationServicesDisabled",t.LocationServicesUnauthorized="LocationServicesUnauthorized",t.BluetoothScanStartFailed="BluetoothScanStartFailed"})(t8||(t8={}));class ZY extends Error{constructor(r,n){const i="TransportError";super(r||i);ot(this,"id");this.name=i,this.message=r,this.stack=new Error(r).stack,this.id=n}}t7("TransportError",t=>new ZY(t.message,t.id));const vg={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,DEVICE_IN_RECOVERY_MODE:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,DEVICE_NOT_ONBOARDED:27911,DEVICE_NOT_ONBOARDED_2:26129,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761,NOT_ENOUGH_SPACE:20738,APP_NOT_FOUND_OR_INVALID_CONTEXT:20771,INVALID_APP_NAME_LENGTH:26378,GEN_AES_KEY_FAILED:21529,INTERNAL_CRYPTO_OPERATION_FAILED:21530,INTERNAL_COMPUTE_AES_CMAC_FAILED:21531,ENCRYPT_APP_STORAGE_FAILED:21532,INVALID_BACKUP_STATE:26178,PIN_NOT_SET:21762,INVALID_BACKUP_LENGTH:26419,INVALID_RESTORE_STATE:26179,INVALID_CHUNK_LENGTH:26420,INVALID_BACKUP_HEADER:26698,TRUSTCHAIN_WRONG_SEED:45063};function JY(t){switch(t){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=t&&t<=28671)return"Internal error, please report"}class ry extends Error{constructor(r,{canBeMappedToChildError:n=!0}={}){const i=Object.keys(vg).find(c=>vg[c]===r)||"UNKNOWN_ERROR",s=JY(r)||i,o=r.toString(16),a=`Ledger device: ${s} (0x${o})`;super(a);ot(this,"statusCode");ot(this,"statusText");if(this.name="TransportStatusError",this.statusCode=r,this.statusText=i,Object.setPrototypeOf(this,ry.prototype),n&&r===vg.LOCKED_DEVICE)return new kI(a)}}class kI extends ry{constructor(e){super(vg.LOCKED_DEVICE,{canBeMappedToChildError:!1}),e&&(this.message=e),this.name="LockedDeviceError",Object.setPrototypeOf(this,kI.prototype)}}t7("TransportStatusError",t=>new ry(t.statusCode));let r7=0;const Nl=[],vAe=(t,e,r)=>{const n={type:t,id:String(++r7),date:new Date};e&&(n.message=e),n7(n)},XY=({type:t,message:e,data:r,context:n})=>{const i={type:t,id:String(++r7),date:new Date};e&&(i.message=e),r&&(i.data=r),n&&(i.context=n),n7(i)};class b1{constructor(e,r){ot(this,"type");ot(this,"context");this.type=e,this.context=r}trace(e,r){XY({type:this.type,message:e,data:r,context:this.context})}getContext(){return this.context}setContext(e){this.context=e}updateContext(e){this.context={...this.context,...e}}getType(){return this.type}setType(e){this.type=e}withType(e){return new b1(e,this.context)}withContext(e){return new b1(this.type,e)}withUpdatedContext(e){return new b1(this.type,{...this.context,...e})}}const eQ=t=>(Nl.push(t),()=>{const e=Nl.indexOf(t);e!==-1&&(Nl[e]=Nl[Nl.length-1],Nl.pop())});function n7(t){for(let e=0;e<Nl.length;e++)try{Nl[e](t)}catch(r){console.error(r)}}typeof window<"u"&&(window.__ledgerLogsListen=eQ);function tQ(t,e){const n=Buffer.alloc(17);let i=n.writeUInt8(4,0);return i=n.writeUInt32BE(aw(44),i),i=n.writeUInt32BE(aw(501),i),i=n.writeUInt32BE(aw(t),i),n.writeUInt32BE(aw(e),i),n}const rQ=1<<31>>>0;function aw(t){return(t|rQ)>>>0}const nQ=5,iQ=6,sQ=0,oQ=1,aQ=1,cQ=2,cw=255,r8=224;async function lQ(t,e){const r=await i7(t,nQ,sQ,e);return new Te(r)}async function uQ(t,e,r){const n=Buffer.alloc(1);n.writeUInt8(1,0);const i=xo(e)?e.message.serialize():e.serializeMessage(),s=Buffer.concat([n,r,i]);return await i7(t,iQ,oQ,s)}async function i7(t,e,r,n){let i=0,s=0;if(n.length>cw)for(;n.length-s>cw;){const c=n.slice(s,s+cw);if((await t.send(r8,e,r,i|cQ,c)).length!==2)throw new ry(vg.INCORRECT_DATA);i|=aQ,s+=cw}const o=n.slice(s),a=await t.send(r8,e,r,i,o);return a.slice(0,a.length-2)}const hQ="Ledger";class dQ extends CI{constructor(e={}){super(),this.name=hQ,this.url="https://ledger.com",this.icon="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzUgMzUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0ibTIzLjU4OCAwaC0xNnYyMS41ODNoMjEuNnYtMTZhNS41ODUgNS41ODUgMCAwIDAgLTUuNi01LjU4M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5KSIvPjxwYXRoIGQ9Im04LjM0MiAwaC0yLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCAtNS41ODUgNS41ODV2Mi43NTdoOC4zNDJ6Ii8+PHBhdGggZD0ibTAgNy41OWg4LjM0MnY4LjM0MmgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDUuNzM5KSIvPjxwYXRoIGQ9Im0xNS4xOCAyMy40NTFoMi43NTdhNS41ODUgNS41ODUgMCAwIDAgNS41ODUtNS42di0yLjY3MWgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMS40NzggMTEuNDc4KSIvPjxwYXRoIGQ9Im03LjU5IDE1LjE4aDguMzQydjguMzQyaC04LjM0MnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5IDExLjQ3OCkiLz48cGF0aCBkPSJtMCAxNS4xOHYyLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCA1LjU4NSA1LjU4NWgyLjc1N3YtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDExLjQ3OCkiLz48L2c+PC9zdmc+",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"||typeof navigator>"u"||!navigator.hid?Ze.Unsupported:Ze.Loadable,this._disconnected=()=>{const r=this._transport;r&&(r.off("disconnect",this._disconnected),this._transport=null,this._publicKey=null,this.emit("error",new Mv),this.emit("disconnect"))},this._derivationPath=e.derivationPath||tQ(0,0),this._connecting=!1,this._transport=null,this._publicKey=null}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==Ze.Loadable)throw new Gc;this._connecting=!0;let e;try{e=(await Mh(async()=>{const{default:i}=await import("./TransportWebHID-XxreUNlc.js");return{default:i}},[])).default}catch(i){throw new pk(i==null?void 0:i.message,i)}let r;try{r=await e.create()}catch(i){throw new Yc(i==null?void 0:i.message,i)}let n;try{n=await lQ(r,this._derivationPath)}catch(i){throw new Nh(i==null?void 0:i.message,i)}r.on("disconnect",this._disconnected),this._transport=r,this._publicKey=n,this.emit("connect",n)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._transport;if(e){e.off("disconnect",this._disconnected),this._transport=null,this._publicKey=null;try{await e.close()}catch(r){this.emit("error",new Xm(r==null?void 0:r.message,r))}}this.emit("disconnect")}async signTransaction(e){try{const r=this._transport,n=this._publicKey;if(!r||!n)throw new Ir;try{const i=await uQ(r,e,this._derivationPath);e.addSignature(n,i)}catch(i){throw new Xi(i==null?void 0:i.message,i)}return e}catch(r){throw this.emit("error",r),r}}}const fQ="Phantom";class pQ extends NI{constructor(e={}){super(),this.name=fQ,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?Ze.Unsupported:Ze.NotDetected,this._disconnected=()=>{const r=this._wallet;r&&(r.off("disconnect",this._disconnected),r.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new Mv),this.emit("disconnect"))},this._accountChanged=r=>{const n=this._publicKey;if(n){try{r=new Te(r.toBytes())}catch(i){this.emit("error",new Nh(i==null?void 0:i.message,i));return}n.equals(r)||(this._publicKey=r,this.emit("connect",r))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==Ze.Unsupported&&(tS()?(this._readyState=Ze.Loadable,this.emit("readyStateChange",this._readyState)):mk(()=>{var r,n,i;return(n=(r=window.phantom)==null?void 0:r.solana)!=null&&n.isPhantom||(i=window.solana)!=null&&i.isPhantom?(this._readyState=Ze.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===Ze.Installed&&await this.connect()}async connect(){var e;try{if(this.connected||this.connecting)return;if(this.readyState===Ze.Loadable){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${i}?ref=${s}`;return}if(this.readyState!==Ze.Installed)throw new Gc;this._connecting=!0;const r=((e=window.phantom)==null?void 0:e.solana)||window.solana;if(!r.isConnected)try{await r.connect()}catch(i){throw new Yc(i==null?void 0:i.message,i)}if(!r.publicKey)throw new rh;let n;try{n=new Te(r.publicKey.toBytes())}catch(i){throw new Nh(i==null?void 0:i.message,i)}r.on("disconnect",this._disconnected),r.on("accountChanged",this._accountChanged),this._wallet=r,this._publicKey=n,this.emit("connect",n)}catch(r){throw this.emit("error",r),r}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(r){this.emit("error",new Xm(r==null?void 0:r.message,r))}}this.emit("disconnect")}async sendTransaction(e,r,n={}){try{const i=this._wallet;if(!i)throw new Ir;try{const{signers:s,...o}=n;xo(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,r,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||r.commitment;const{signature:a}=await i.signAndSendTransaction(e,o);return a}catch(s){throw s instanceof kn?s:new Lc(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const r=this._wallet;if(!r)throw new Ir;try{return await r.signTransaction(e)||e}catch(n){throw new Xi(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}async signAllTransactions(e){try{const r=this._wallet;if(!r)throw new Ir;try{return await r.signAllTransactions(e)||e}catch(n){throw new Xi(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}async signMessage(e){try{const r=this._wallet;if(!r)throw new Ir;try{const{signature:n}=await r.signMessage(e);return n}catch(n){throw new ey(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}}const gQ="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=";var Zt=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},mQ=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},v1,ah,AS,CS,NS,Ui,MS,s7,o7,TS,$S,PS,OS,kS;class yQ{constructor(){v1.add(this),ah.set(this,{}),AS.set(this,"1.0.0"),CS.set(this,"MetaMask"),NS.set(this,gQ),Ui.set(this,null),MS.set(this,(e,r)=>{var n;return(n=Zt(this,ah,"f")[e])!=null&&n.push(r)||(Zt(this,ah,"f")[e]=[r]),()=>Zt(this,v1,"m",o7).call(this,e,r)}),TS.set(this,async()=>{if(!Zt(this,Ui,"f")){let e;try{e=(await Mh(async()=>{const{default:r}=await import("./index-Cn8zBIvJ.js");return{default:r}},[])).default}catch{throw new Error("Unable to load Solflare MetaMask SDK")}mQ(this,Ui,new e,"f"),Zt(this,Ui,"f").on("standard_change",r=>Zt(this,v1,"m",s7).call(this,"change",r))}return this.accounts.length||await Zt(this,Ui,"f").connect(),{accounts:this.accounts}}),$S.set(this,async()=>{Zt(this,Ui,"f")&&await Zt(this,Ui,"f").disconnect()}),PS.set(this,async(...e)=>{if(!Zt(this,Ui,"f"))throw new Ir;return await Zt(this,Ui,"f").standardSignAndSendTransaction(...e)}),OS.set(this,async(...e)=>{if(!Zt(this,Ui,"f"))throw new Ir;return await Zt(this,Ui,"f").standardSignTransaction(...e)}),kS.set(this,async(...e)=>{if(!Zt(this,Ui,"f"))throw new Ir;return await Zt(this,Ui,"f").standardSignMessage(...e)})}get version(){return Zt(this,AS,"f")}get name(){return Zt(this,CS,"f")}get icon(){return Zt(this,NS,"f")}get chains(){return[em,kk,Rk]}get features(){return{[Tv]:{version:"1.0.0",connect:Zt(this,TS,"f")},[_b]:{version:"1.0.0",disconnect:Zt(this,$S,"f")},[$v]:{version:"1.0.0",on:Zt(this,MS,"f")},[Qi]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:Zt(this,PS,"f")},[Wr]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:Zt(this,OS,"f")},[Pc]:{version:"1.0.0",signMessage:Zt(this,kS,"f")}}}get accounts(){return Zt(this,Ui,"f")?Zt(this,Ui,"f").standardAccounts:[]}}ah=new WeakMap,AS=new WeakMap,CS=new WeakMap,NS=new WeakMap,Ui=new WeakMap,MS=new WeakMap,TS=new WeakMap,$S=new WeakMap,PS=new WeakMap,OS=new WeakMap,kS=new WeakMap,v1=new WeakSet,s7=function(e,...r){var n;(n=Zt(this,ah,"f")[e])==null||n.forEach(i=>i.apply(null,r))},o7=function(e,r){var n;Zt(this,ah,"f")[e]=(n=Zt(this,ah,"f")[e])==null?void 0:n.filter(i=>r!==i)};let n8=!1;function wQ(){n8||(dY(new yQ),n8=!0)}async function bQ(){const t="solflare-detect-metamask";function e(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:t,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function r(n){var s,o;const i=n.data;(i==null?void 0:i.target)==="metamask-inpage"&&((s=i.data)==null?void 0:s.name)==="metamask-provider"&&(((o=i.data.data)==null?void 0:o.id)===t?(window.removeEventListener("message",r),i.data.data.error||wQ()):e())}window.addEventListener("message",r),window.setTimeout(()=>window.removeEventListener("message",r),5e3),e()}const vQ="Solflare";class EQ extends NI{constructor(e={}){super(),this.name=vQ,this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJTIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MCA1MCI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMwMjA1MGE7c3Ryb2tlOiNmZmVmNDY7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOi41cHg7fS5jbHMtMntmaWxsOiNmZmVmNDY7fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJjbHMtMiIgeD0iMCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiByeD0iMTIiIHJ5PSIxMiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTI0LjIzLDI2LjQybDIuNDYtMi4zOCw0LjU5LDEuNWMzLjAxLDEsNC41MSwyLjg0LDQuNTEsNS40MywwLDEuOTYtLjc1LDMuMjYtMi4yNSw0LjkzbC0uNDYuNS4xNy0xLjE3Yy42Ny00LjI2LS41OC02LjA5LTQuNzItNy40M2wtNC4zLTEuMzhoMFpNMTguMDUsMTEuODVsMTIuNTIsNC4xNy0yLjcxLDIuNTktNi41MS0yLjE3Yy0yLjI1LS43NS0zLjAxLTEuOTYtMy4zLTQuNTF2LS4wOGgwWk0xNy4zLDMzLjA2bDIuODQtMi43MSw1LjM0LDEuNzVjMi44LjkyLDMuNzYsMi4xMywzLjQ2LDUuMThsLTExLjY1LTQuMjJoMFpNMTMuNzEsMjAuOTVjMC0uNzkuNDItMS41NCwxLjEzLTIuMTcuNzUsMS4wOSwyLjA1LDIuMDUsNC4wOSwyLjcxbDQuNDIsMS40Ni0yLjQ2LDIuMzgtNC4zNC0xLjQyYy0yLS42Ny0yLjg0LTEuNjctMi44NC0yLjk2TTI2LjgyLDQyLjg3YzkuMTgtNi4wOSwxNC4xMS0xMC4yMywxNC4xMS0xNS4zMiwwLTMuMzgtMi01LjI2LTYuNDMtNi43MmwtMy4zNC0xLjEzLDkuMTQtOC43Ny0xLjg0LTEuOTYtMi43MSwyLjM4LTEyLjgxLTQuMjJjLTMuOTcsMS4yOS04Ljk3LDUuMDktOC45Nyw4Ljg5LDAsLjQyLjA0LjgzLjE3LDEuMjktMy4zLDEuODgtNC42MywzLjYzLTQuNjMsNS44LDAsMi4wNSwxLjA5LDQuMDksNC41NSw1LjIybDIuNzUuOTItOS41Miw5LjE0LDEuODQsMS45NiwyLjk2LTIuNzEsMTQuNzMsNS4yMmgwWiIvPjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?Ze.Unsupported:Ze.Loadable,this._disconnected=()=>{const r=this._wallet;r&&(r.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new Mv),this.emit("disconnect"))},this._accountChanged=r=>{if(!r)return;const n=this._publicKey;if(n){try{r=new Te(r.toBytes())}catch(i){this.emit("error",new Nh(i==null?void 0:i.message,i));return}n.equals(r)||(this._publicKey=r,this.emit("connect",r))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=e,this._readyState!==Ze.Unsupported&&(mk(()=>{var r;return(r=window.solflare)!=null&&r.isSolflare||window.SolflareApp?(this._readyState=Ze.Installed,this.emit("readyStateChange",this._readyState),!0):!1}),bQ())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var e;return!!((e=this._wallet)!=null&&e.connected)}get readyState(){return this._readyState}async autoConnect(){this.readyState===Ze.Loadable&&tS()||await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==Ze.Loadable&&this._readyState!==Ze.Installed)throw new Gc;if(this.readyState===Ze.Loadable&&tS()){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://solflare.com/ul/v1/browse/${i}?ref=${s}`;return}let e;try{e=(await Mh(async()=>{const{default:i}=await import("./index--UhJG42X.js");return{default:i}},[])).default}catch(i){throw new pk(i==null?void 0:i.message,i)}let r;try{r=new e({network:this._config.network})}catch(i){throw new Mf(i==null?void 0:i.message,i)}if(this._connecting=!0,!r.connected)try{await r.connect()}catch(i){throw new Yc(i==null?void 0:i.message,i)}if(!r.publicKey)throw new Yc;let n;try{n=new Te(r.publicKey.toBytes())}catch(i){throw new Nh(i==null?void 0:i.message,i)}r.on("disconnect",this._disconnected),r.on("accountChanged",this._accountChanged),this._wallet=r,this._publicKey=n,this.emit("connect",n)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(r){this.emit("error",new Xm(r==null?void 0:r.message,r))}}this.emit("disconnect")}async sendTransaction(e,r,n={}){try{const i=this._wallet;if(!i)throw new Ir;try{const{signers:s,...o}=n;return xo(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,r,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||r.commitment,await i.signAndSendTransaction(e,o)}catch(s){throw s instanceof kn?s:new Lc(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const r=this._wallet;if(!r)throw new Ir;try{return await r.signTransaction(e)||e}catch(n){throw new Xi(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}async signAllTransactions(e){try{const r=this._wallet;if(!r)throw new Ir;try{return await r.signAllTransactions(e)||e}catch(n){throw new Xi(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}async signMessage(e){try{const r=this._wallet;if(!r)throw new Ir;try{return await r.signMessage(e,"utf8")}catch(n){throw new ey(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}}var Mb;(function(t){t.Mainnet="solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",t.Devnet="solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",t.Deprecated_Mainnet="solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",t.Deprecated_Devnet="solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"})(Mb||(Mb={}));var bo;(function(t){t.signTransaction="solana_signTransaction",t.signMessage="solana_signMessage",t.signAndSendTransaction="solana_signAndSendTransaction",t.signAndSendAllTransactions="solana_signAndSendAllTransactions",t.signAllTransactions="solana_signAllTransactions"})(bo||(bo={}));const Mn={Mainnet:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",Devnet:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",Deprecated_Mainnet:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",Deprecated_Devnet:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"};var J={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var RS=function(t,e){return RS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},RS(t,e)};function _Q(t,e){RS(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var DS=function(){return DS=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},DS.apply(this,arguments)};function SQ(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function xQ(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function IQ(t,e){return function(r,n){e(r,n,t)}}function AQ(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function CQ(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function NQ(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function MQ(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function TQ(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function LS(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a7(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function $Q(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a7(arguments[e]));return t}function PQ(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function tm(t){return this instanceof tm?(this.v=t,this):new tm(t)}function OQ(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(g){return new Promise(function(m,v){s.push([d,g,m,v])>1||a(d,g)})})}function a(d,g){try{c(n[d](g))}catch(m){h(s[0][3],m)}}function c(d){d.value instanceof tm?Promise.resolve(d.value.v).then(l,u):h(s[0][2],d)}function l(d){a("next",d)}function u(d){a("throw",d)}function h(d,g){d(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function kQ(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:tm(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function RQ(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof LS=="function"?LS(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function DQ(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function LQ(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function BQ(t){return t&&t.__esModule?t:{default:t}}function UQ(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function jQ(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const FQ=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return DS},__asyncDelegator:kQ,__asyncGenerator:OQ,__asyncValues:RQ,__await:tm,__awaiter:CQ,__classPrivateFieldGet:UQ,__classPrivateFieldSet:jQ,__createBinding:MQ,__decorate:xQ,__exportStar:TQ,__extends:_Q,__generator:NQ,__importDefault:BQ,__importStar:LQ,__makeTemplateObject:DQ,__metadata:AQ,__param:IQ,__read:a7,__rest:SQ,__spread:$Q,__spreadArrays:PQ,__values:LS},Symbol.toStringTag,{value:"Module"})),Uv=Um(FQ);var NE={},p0={},i8;function zQ(){if(i8)return p0;i8=1,Object.defineProperty(p0,"__esModule",{value:!0}),p0.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return p0.delay=t,p0}var Iu={},ME={},Au={},s8;function qQ(){return s8||(s8=1,Object.defineProperty(Au,"__esModule",{value:!0}),Au.ONE_THOUSAND=Au.ONE_HUNDRED=void 0,Au.ONE_HUNDRED=100,Au.ONE_THOUSAND=1e3),Au}var TE={},o8;function WQ(){return o8||(o8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(TE)),TE}var a8;function c7(){return a8||(a8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Uv;e.__exportStar(qQ(),t),e.__exportStar(WQ(),t)}(ME)),ME}var c8;function HQ(){if(c8)return Iu;c8=1,Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.fromMiliseconds=Iu.toMiliseconds=void 0;const t=c7();function e(n){return n*t.ONE_THOUSAND}Iu.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Iu.fromMiliseconds=r,Iu}var l8;function KQ(){return l8||(l8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Uv;e.__exportStar(zQ(),t),e.__exportStar(HQ(),t)}(NE)),NE}var gd={},u8;function VQ(){if(u8)return gd;u8=1,Object.defineProperty(gd,"__esModule",{value:!0}),gd.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return gd.Watch=t,gd.default=t,gd}var $E={},g0={},h8;function GQ(){if(h8)return g0;h8=1,Object.defineProperty(g0,"__esModule",{value:!0}),g0.IWatch=void 0;class t{}return g0.IWatch=t,g0}var d8;function YQ(){return d8||(d8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Uv.__exportStar(GQ(),t)}($E)),$E}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Uv;e.__exportStar(KQ(),t),e.__exportStar(VQ(),t),e.__exportStar(YQ(),t),e.__exportStar(c7(),t)})(J);class to{}let QQ=class extends to{constructor(e){super()}};const f8=J.FIVE_SECONDS,la={pulse:"heartbeat_pulse"};let l7=class u7 extends QQ{constructor(e){super(e),this.events=new Rn.EventEmitter,this.interval=f8,this.interval=(e==null?void 0:e.interval)||f8}static async init(e){const r=new u7(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),J.toMiliseconds(this.interval))}pulse(){this.events.emit(la.pulse)}};const ZQ=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,JQ=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,XQ=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function eZ(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){tZ(t);return}return e}function tZ(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function zl(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const r=t.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!XQ.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(ZQ.test(t)||JQ.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,eZ)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function rZ(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Fn(t,...e){try{return rZ(t(...e))}catch(r){return Promise.reject(r)}}function nZ(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function iZ(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function E1(t){if(nZ(t))return String(t);if(iZ(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return E1(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const BS="base64:";function sZ(t){return typeof t=="string"?t:BS+cZ(t)}function oZ(t){return typeof t!="string"||!t.startsWith(BS)?t:aZ(t.slice(BS.length))}function aZ(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function cZ(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function ds(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function lZ(...t){return ds(t.join(":"))}function lw(t){return t=ds(t),t?t+":":""}function uZ(t,e){if(e===void 0)return!0;let r=0,n=t.indexOf(":");for(;n>-1;)r++,n=t.indexOf(":",n+1);return r<=e}function hZ(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const dZ="memory",fZ=()=>{const t=new Map;return{name:dZ,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function pZ(t={}){const e={mounts:{"":t.driver||fZ()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},n=(l,u)=>e.mountpoints.filter(h=>h.startsWith(l)||u&&l.startsWith(h)).map(h=>({relativeBase:l.length>h.length?l.slice(h.length):void 0,mountpoint:h,driver:e.mounts[h]})),i=(l,u)=>{if(e.watching){u=ds(u);for(const h of e.watchListeners)h(l,u)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await p8(e.mounts[l],i,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,h)=>{const d=new Map,g=m=>{let v=d.get(m.base);return v||(v={driver:m.driver,base:m.base,items:[]},d.set(m.base,v)),v};for(const m of l){const v=typeof m=="string",$=ds(v?m:m.key),_=v?void 0:m.value,x=v||!m.options?u:{...u,...m.options},A=r($);g(A).items.push({key:$,value:_,relativeKey:A.relativeKey,options:x})}return Promise.all([...d.values()].map(m=>h(m))).then(m=>m.flat())},c={hasItem(l,u={}){l=ds(l);const{relativeKey:h,driver:d}=r(l);return Fn(d.hasItem,h,u)},getItem(l,u={}){l=ds(l);const{relativeKey:h,driver:d}=r(l);return Fn(d.getItem,h,u).then(g=>zl(g))},getItems(l,u={}){return a(l,u,h=>h.driver.getItems?Fn(h.driver.getItems,h.items.map(d=>({key:d.relativeKey,options:d.options})),u).then(d=>d.map(g=>({key:lZ(h.base,g.key),value:zl(g.value)}))):Promise.all(h.items.map(d=>Fn(h.driver.getItem,d.relativeKey,d.options).then(g=>({key:d.key,value:zl(g)})))))},getItemRaw(l,u={}){l=ds(l);const{relativeKey:h,driver:d}=r(l);return d.getItemRaw?Fn(d.getItemRaw,h,u):Fn(d.getItem,h,u).then(g=>oZ(g))},async setItem(l,u,h={}){if(u===void 0)return c.removeItem(l);l=ds(l);const{relativeKey:d,driver:g}=r(l);g.setItem&&(await Fn(g.setItem,d,E1(u),h),g.watch||i("update",l))},async setItems(l,u){await a(l,u,async h=>{if(h.driver.setItems)return Fn(h.driver.setItems,h.items.map(d=>({key:d.relativeKey,value:E1(d.value),options:d.options})),u);h.driver.setItem&&await Promise.all(h.items.map(d=>Fn(h.driver.setItem,d.relativeKey,E1(d.value),d.options)))})},async setItemRaw(l,u,h={}){if(u===void 0)return c.removeItem(l,h);l=ds(l);const{relativeKey:d,driver:g}=r(l);if(g.setItemRaw)await Fn(g.setItemRaw,d,u,h);else if(g.setItem)await Fn(g.setItem,d,sZ(u),h);else return;g.watch||i("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=ds(l);const{relativeKey:h,driver:d}=r(l);d.removeItem&&(await Fn(d.removeItem,h,u),(u.removeMeta||u.removeMata)&&await Fn(d.removeItem,h+"$",u),d.watch||i("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=ds(l);const{relativeKey:h,driver:d}=r(l),g=Object.create(null);if(d.getMeta&&Object.assign(g,await Fn(d.getMeta,h,u)),!u.nativeOnly){const m=await Fn(d.getItem,h+"$",u).then(v=>zl(v));m&&typeof m=="object"&&(typeof m.atime=="string"&&(m.atime=new Date(m.atime)),typeof m.mtime=="string"&&(m.mtime=new Date(m.mtime)),Object.assign(g,m))}return g},setMeta(l,u,h={}){return this.setItem(l+"$",u,h)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var $;l=lw(l);const h=n(l,!0);let d=[];const g=[];let m=!0;for(const _ of h){($=_.driver.flags)!=null&&$.maxDepth||(m=!1);const x=await Fn(_.driver.getKeys,_.relativeBase,u);for(const A of x){const T=_.mountpoint+ds(A);d.some(k=>T.startsWith(k))||g.push(T)}d=[_.mountpoint,...d.filter(A=>!A.startsWith(_.mountpoint))]}const v=u.maxDepth!==void 0&&!m;return g.filter(_=>(!v||uZ(_,u.maxDepth))&&hZ(_,l))},async clear(l,u={}){l=lw(l),await Promise.all(n(l,!1).map(async h=>{if(h.driver.clear)return Fn(h.driver.clear,h.relativeBase,u);if(h.driver.removeItem){const d=await h.driver.getKeys(h.relativeBase||"",u);return Promise.all(d.map(g=>h.driver.removeItem(g,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>g8(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=lw(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((h,d)=>d.length-h.length)),e.mounts[l]=u,e.watching&&Promise.resolve(p8(u,i,l)).then(h=>{e.unwatch[l]=h}).catch(console.error),c},async unmount(l,u=!0){var h,d;l=lw(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((d=(h=e.unwatch)[l])==null||d.call(h),delete e.unwatch[l]),u&&await g8(e.mounts[l]),e.mountpoints=e.mountpoints.filter(g=>g!==l),delete e.mounts[l])},getMount(l=""){l=ds(l)+":";const u=r(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=ds(l),n(l,u.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,h={})=>c.setItem(l,u,h),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function p8(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function g8(t){typeof t.dispose=="function"&&await Fn(t.dispose)}function Yh(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function RI(t,e){let r;const n=()=>{if(r)return r;const i=indexedDB.open(t);return i.onupgradeneeded=()=>i.result.createObjectStore(e),r=Yh(i),r.then(s=>{s.onclose=()=>r=void 0},()=>{}),r};return(i,s)=>n().then(o=>s(o.transaction(e,i).objectStore(e)))}let PE;function ny(){return PE||(PE=RI("keyval-store","keyval")),PE}function Tb(t,e=ny()){return e("readonly",r=>Yh(r.get(t)))}function h7(t,e,r=ny()){return r("readwrite",n=>(n.put(e,t),Yh(n.transaction)))}function d7(t,e=ny()){return e("readwrite",r=>(r.delete(t),Yh(r.transaction)))}function f7(t=ny()){return t("readwrite",e=>(e.clear(),Yh(e.transaction)))}function gZ(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Yh(t.transaction)}function p7(t=ny()){return t("readonly",e=>{if(e.getAllKeys)return Yh(e.getAllKeys());const r=[];return gZ(e,n=>r.push(n.key)).then(()=>r)})}const mZ=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),yZ=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function aa(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return yZ(t)}catch{return t}}function Mo(t){return typeof t=="string"?t:mZ(t)||""}const wZ="idb-keyval";var bZ=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i;let n;return t.dbName&&t.storeName&&(n=RI(t.dbName,t.storeName)),{name:wZ,options:t,async hasItem(i){return!(typeof await Tb(r(i),n)>"u")},async getItem(i){return await Tb(r(i),n)??null},setItem(i,s){return h7(r(i),s,n)},removeItem(i){return d7(r(i),n)},getKeys(){return p7(n)},clear(){return f7(n)}}};const vZ="WALLET_CONNECT_V2_INDEXED_DB",EZ="keyvaluestorage";let _Z=class{constructor(){this.indexedDb=pZ({driver:bZ({dbName:vZ,storeName:EZ})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Mo(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var OE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_1={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof OE<"u"&&OE.localStorage?_1.exports=OE.localStorage:typeof window<"u"&&window.localStorage?_1.exports=window.localStorage:_1.exports=new e})();function SZ(t){var e;return[t[0],aa((e=t[1])!=null?e:"")]}let xZ=class{constructor(){this.localStorage=_1.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(SZ)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return aa(r)}async setItem(e,r){this.localStorage.setItem(e,Mo(r))}async removeItem(e){this.localStorage.removeItem(e)}};const IZ="wc_storage_version",m8=1,AZ=async(t,e,r)=>{const n=IZ,i=await e.getItem(n);if(i&&i>=m8){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(n,m8),r(e),CZ(t,o)},CZ=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let NZ=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new xZ;this.storage=e;try{const r=new _Z;AZ(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};function MZ(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var TZ=$Z;function $Z(t,e,r){var n=r&&r.stringify||MZ,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var o=new Array(s);o[0]=n(t);for(var a=1;a<s;a++)o[a]=n(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-i,h=-1,d=t&&t.length||0,g=0;g<d;){if(t.charCodeAt(g)===37&&g+1<d){switch(h=h>-1?h:0,t.charCodeAt(g+1)){case 100:case 102:if(u>=c||e[u]==null)break;h<g&&(l+=t.slice(h,g)),l+=Number(e[u]),h=g+2,g++;break;case 105:if(u>=c||e[u]==null)break;h<g&&(l+=t.slice(h,g)),l+=Math.floor(Number(e[u])),h=g+2,g++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;h<g&&(l+=t.slice(h,g));var m=typeof e[u];if(m==="string"){l+="'"+e[u]+"'",h=g+2,g++;break}if(m==="function"){l+=e[u].name||"<anonymous>",h=g+2,g++;break}l+=n(e[u]),h=g+2,g++;break;case 115:if(u>=c)break;h<g&&(l+=t.slice(h,g)),l+=String(e[u]),h=g+2,g++;break;case 37:h<g&&(l+=t.slice(h,g)),l+="%",h=g+2,g++,u--;break}++u}++g}return h===-1?t:(h<d&&(l+=t.slice(h)),l)}const y8=TZ;var of=Ta;const rm=FZ().console||{},PZ={mapHttpRequest:uw,mapHttpResponse:uw,wrapRequestSerializer:kE,wrapResponseSerializer:kE,wrapErrorSerializer:kE,req:uw,res:uw,err:LZ};function OZ(t,e){return Array.isArray(t)?t.filter(function(n){return n!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Ta(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=t.browser.write||rm;t.browser.write&&(t.browser.asObject=!0);const n=t.serializers||{},i=OZ(t.browser.serialize,n);let s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const o=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(r);c.log||(c.log=nm),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:h,set:d});const l={transmit:e,serialize:i,asObject:t.browser.asObject,levels:o,timestamp:BZ(t)};c.levels=Ta.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=nm,c.serializers=n,c._serialize=i,c._stdErrSerialize=s,c.child=g,e&&(c._logEvent=US());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function h(){return this._level}function d(m){if(m!=="silent"&&!this.levels.values[m])throw Error("unknown level "+m);this._level=m,md(l,c,"error","log"),md(l,c,"fatal","error"),md(l,c,"warn","error"),md(l,c,"info","log"),md(l,c,"debug","log"),md(l,c,"trace","log")}function g(m,v){if(!m)throw new Error("missing bindings for child Pino");v=v||{},i&&m.serializers&&(v.serializers=m.serializers);const $=v.serializers;if(i&&$){var _=Object.assign({},n,$),x=t.browser.serialize===!0?Object.keys(_):i;delete m.serializers,jv([m],x,_,this._stdErrSerialize)}function A(T){this._childLevel=(T._childLevel|0)+1,this.error=yd(T,m,"error"),this.fatal=yd(T,m,"fatal"),this.warn=yd(T,m,"warn"),this.info=yd(T,m,"info"),this.debug=yd(T,m,"debug"),this.trace=yd(T,m,"trace"),_&&(this.serializers=_,this._serialize=x),e&&(this._logEvent=US([].concat(T._logEvent.bindings,m)))}return A.prototype=this,new A(this)}return c}Ta.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Ta.stdSerializers=PZ;Ta.stdTimeFunctions=Object.assign({},{nullTime:g7,epochTime:m7,unixTime:UZ,isoTime:jZ});function md(t,e,r,n){const i=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?nm:i[r]?i[r]:rm[r]||rm[n]||nm,kZ(t,e,r)}function kZ(t,e,r){!t.transmit&&e[r]===nm||(e[r]=function(n){return function(){const s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===rm?rm:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&jv(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(a,RZ(this,r,o,s)):n.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Ta.levels.values[l],h=Ta.levels.values[r];if(h<u)return;DZ(this,{ts:s,methodLevel:r,methodValue:h,transmitValue:Ta.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[r]))}function RZ(t,e,r,n){t._serialize&&jv(r,t._serialize,t.serializers,t._stdErrSerialize);const i=r.slice();let s=i[0];const o={};n&&(o.time=n),o.level=Ta.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof i[0]=="object";)Object.assign(o,i.shift());s=i.length?y8(i.shift(),i):void 0}else typeof s=="string"&&(s=y8(i.shift(),i));return s!==void 0&&(o.msg=s),o}function jv(t,e,r,n){for(const i in t)if(n&&t[i]instanceof Error)t[i]=Ta.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(const s in t[i])e&&e.indexOf(s)>-1&&s in r&&(t[i][s]=r[s](t[i][s]))}function yd(t,e,r){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return t[r].apply(this,n)}}function DZ(t,e,r){const n=e.send,i=e.ts,s=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;jv(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=r.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=o,n(s,t._logEvent,a),t._logEvent=US(c)}function US(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function LZ(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)e[r]===void 0&&(e[r]=t[r]);return e}function BZ(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?g7:m7}function uw(){return{}}function kE(t){return t}function nm(){}function g7(){return!1}function m7(){return Date.now()}function UZ(){return Math.round(Date.now()/1e3)}function jZ(){return new Date(Date.now()).toISOString()}function FZ(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const wu=Fa(of),zZ={level:"info"},iy="custom_context",DI=1e3*1024;let qZ=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},w8=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new qZ(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}},y7=class{constructor(e,r=DI){this.level=e??"error",this.levelValue=of.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new w8(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===of.levels.values.error?console.error(e):r===of.levels.values.warn?console.warn(e):r===of.levels.values.debug?console.debug(e):r===of.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Mo({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new w8(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(Mo({extraMetadata:e})),new Blob(r,{type:"application/json"})}},WZ=class{constructor(e,r=DI){this.baseChunkLogger=new y7(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}},HZ=class{constructor(e,r=DI){this.baseChunkLogger=new y7(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var KZ=Object.defineProperty,VZ=Object.defineProperties,GZ=Object.getOwnPropertyDescriptors,b8=Object.getOwnPropertySymbols,YZ=Object.prototype.hasOwnProperty,QZ=Object.prototype.propertyIsEnumerable,v8=(t,e,r)=>e in t?KZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$b=(t,e)=>{for(var r in e||(e={}))YZ.call(e,r)&&v8(t,r,e[r]);if(b8)for(var r of b8(e))QZ.call(e,r)&&v8(t,r,e[r]);return t},Pb=(t,e)=>VZ(t,GZ(e));function tl(t){return Pb($b({},t),{level:(t==null?void 0:t.level)||zZ.level})}function ZZ(t,e=iy){return t[e]||""}function JZ(t,e,r=iy){return t[r]=e,t}function hr(t,e=iy){let r="";return typeof t.bindings>"u"?r=ZZ(t,e):r=t.bindings().context||"",r}function XZ(t,e,r=iy){const n=hr(t,r);return n.trim()?`${n}/${e}`:e}function Kt(t,e,r=iy){const n=XZ(t,e,r),i=t.child({context:n});return JZ(i,n,r)}function eJ(t){var e,r;const n=new WZ((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:wu(Pb($b({},t.opts),{level:"trace",browser:Pb($b({},(r=t.opts)==null?void 0:r.browser),{write:i=>n.write(i)})})),chunkLoggerController:n}}function tJ(t){var e;const r=new HZ((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:wu(Pb($b({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function LI(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?eJ(t):tJ(t)}var rJ=Object.defineProperty,nJ=(t,e,r)=>e in t?rJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,E8=(t,e,r)=>nJ(t,typeof e!="symbol"?e+"":e,r);let iJ=class extends to{constructor(e){super(),this.opts=e,E8(this,"protocol","wc"),E8(this,"version",2)}};var sJ=Object.defineProperty,oJ=(t,e,r)=>e in t?sJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,aJ=(t,e,r)=>oJ(t,e+"",r);let cJ=class extends to{constructor(e,r){super(),this.core=e,this.logger=r,aJ(this,"records",new Map)}},lJ=class{constructor(e,r){this.logger=e,this.core=r}},uJ=class extends to{constructor(e,r){super(),this.relayer=e,this.logger=r}},hJ=class extends to{constructor(e){super()}},dJ=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},fJ=class extends to{constructor(e,r){super(),this.relayer=e,this.logger=r}},pJ=class extends to{constructor(e,r){super(),this.core=e,this.logger=r}},gJ=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},mJ=class{constructor(e,r){this.projectId=e,this.logger=r}},yJ=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};function wJ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function w7(t,...e){if(!wJ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function _8(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function bJ(t,e){w7(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const wd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const RE=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function vJ(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function b7(t){return typeof t=="string"&&(t=vJ(t)),w7(t),t}let EJ=class{clone(){return this._cloneInto()}};function _J(t){const e=n=>t().update(b7(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function v7(t=32){if(wd&&typeof wd.getRandomValues=="function")return wd.getRandomValues(new Uint8Array(t));if(wd&&typeof wd.randomBytes=="function")return wd.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function SJ(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}let xJ=class extends EJ{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=RE(this.buffer)}update(e){_8(this);const{view:r,buffer:n,blockLen:i}=this;e=b7(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=RE(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){_8(this),bJ(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;SJ(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=RE(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}};const hw=BigInt(2**32-1),jS=BigInt(32);function E7(t,e=!1){return e?{h:Number(t&hw),l:Number(t>>jS&hw)}:{h:Number(t>>jS&hw)|0,l:Number(t&hw)|0}}function IJ(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=E7(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const AJ=(t,e)=>BigInt(t>>>0)<<jS|BigInt(e>>>0),CJ=(t,e,r)=>t>>>r,NJ=(t,e,r)=>t<<32-r|e>>>r,MJ=(t,e,r)=>t>>>r|e<<32-r,TJ=(t,e,r)=>t<<32-r|e>>>r,$J=(t,e,r)=>t<<64-r|e>>>r-32,PJ=(t,e,r)=>t>>>r-32|e<<64-r,OJ=(t,e)=>e,kJ=(t,e)=>t,RJ=(t,e,r)=>t<<r|e>>>32-r,DJ=(t,e,r)=>e<<r|t>>>32-r,LJ=(t,e,r)=>e<<r-32|t>>>64-r,BJ=(t,e,r)=>t<<r-32|e>>>64-r;function UJ(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const jJ=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),FJ=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,zJ=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),qJ=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,WJ=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),HJ=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,lt={fromBig:E7,split:IJ,toBig:AJ,shrSH:CJ,shrSL:NJ,rotrSH:MJ,rotrSL:TJ,rotrBH:$J,rotrBL:PJ,rotr32H:OJ,rotr32L:kJ,rotlSH:RJ,rotlSL:DJ,rotlBH:LJ,rotlBL:BJ,add:UJ,add3L:jJ,add3H:FJ,add4L:zJ,add4H:qJ,add5H:HJ,add5L:WJ},[KJ,VJ]=lt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),pl=new Uint32Array(80),gl=new Uint32Array(80);let GJ=class extends xJ{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:d,Gh:g,Gl:m,Hh:v,Hl:$}=this;return[e,r,n,i,s,o,a,c,l,u,h,d,g,m,v,$]}set(e,r,n,i,s,o,a,c,l,u,h,d,g,m,v,$){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=d|0,this.Gh=g|0,this.Gl=m|0,this.Hh=v|0,this.Hl=$|0}process(e,r){for(let A=0;A<16;A++,r+=4)pl[A]=e.getUint32(r),gl[A]=e.getUint32(r+=4);for(let A=16;A<80;A++){const T=pl[A-15]|0,k=gl[A-15]|0,D=lt.rotrSH(T,k,1)^lt.rotrSH(T,k,8)^lt.shrSH(T,k,7),L=lt.rotrSL(T,k,1)^lt.rotrSL(T,k,8)^lt.shrSL(T,k,7),F=pl[A-2]|0,B=gl[A-2]|0,q=lt.rotrSH(F,B,19)^lt.rotrBH(F,B,61)^lt.shrSH(F,B,6),R=lt.rotrSL(F,B,19)^lt.rotrBL(F,B,61)^lt.shrSL(F,B,6),E=lt.add4L(L,R,gl[A-7],gl[A-16]),b=lt.add4H(E,D,q,pl[A-7],pl[A-16]);pl[A]=b|0,gl[A]=E|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:d,Fh:g,Fl:m,Gh:v,Gl:$,Hh:_,Hl:x}=this;for(let A=0;A<80;A++){const T=lt.rotrSH(h,d,14)^lt.rotrSH(h,d,18)^lt.rotrBH(h,d,41),k=lt.rotrSL(h,d,14)^lt.rotrSL(h,d,18)^lt.rotrBL(h,d,41),D=h&g^~h&v,L=d&m^~d&$,F=lt.add5L(x,k,L,VJ[A],gl[A]),B=lt.add5H(F,_,T,D,KJ[A],pl[A]),q=F|0,R=lt.rotrSH(n,i,28)^lt.rotrBH(n,i,34)^lt.rotrBH(n,i,39),E=lt.rotrSL(n,i,28)^lt.rotrBL(n,i,34)^lt.rotrBL(n,i,39),b=n&s^n&a^s&a,f=i&o^i&c^o&c;_=v|0,x=$|0,v=g|0,$=m|0,g=h|0,m=d|0,{h,l:d}=lt.add(l|0,u|0,B|0,q|0),l=a|0,u=c|0,a=s|0,c=o|0,s=n|0,o=i|0;const p=lt.add3L(q,E,f);n=lt.add3H(p,B,R,b),i=p|0}({h:n,l:i}=lt.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=lt.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=lt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=lt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:d}=lt.add(this.Eh|0,this.El|0,h|0,d|0),{h:g,l:m}=lt.add(this.Fh|0,this.Fl|0,g|0,m|0),{h:v,l:$}=lt.add(this.Gh|0,this.Gl|0,v|0,$|0),{h:_,l:x}=lt.add(this.Hh|0,this.Hl|0,_|0,x|0),this.set(n,i,s,o,a,c,l,u,h,d,g,m,v,$,_,x)}roundClean(){pl.fill(0),gl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const YJ=_J(()=>new GJ);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const BI=BigInt(0),_7=BigInt(1),QJ=BigInt(2);function UI(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function jI(t){if(!UI(t))throw new Error("Uint8Array expected")}function DE(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const ZJ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function FI(t){jI(t);let e="";for(let r=0;r<t.length;r++)e+=ZJ[t[r]];return e}function S7(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?BI:BigInt("0x"+t)}const dc={_0:48,_9:57,A:65,F:70,a:97,f:102};function S8(t){if(t>=dc._0&&t<=dc._9)return t-dc._0;if(t>=dc.A&&t<=dc.F)return t-(dc.A-10);if(t>=dc.a&&t<=dc.f)return t-(dc.a-10)}function x7(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=S8(t.charCodeAt(s)),a=S8(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function JJ(t){return S7(FI(t))}function S1(t){return jI(t),S7(FI(Uint8Array.from(t).reverse()))}function I7(t,e){return x7(t.toString(16).padStart(e*2,"0"))}function FS(t,e){return I7(t,e).reverse()}function fc(t,e,r){let n;if(typeof e=="string")try{n=x7(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(UI(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function x8(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];jI(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}const LE=t=>typeof t=="bigint"&&BI<=t;function XJ(t,e,r){return LE(t)&&LE(e)&&LE(r)&&e<=t&&t<r}function m0(t,e,r,n){if(!XJ(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function eX(t){let e;for(e=0;t>BI;t>>=_7,e+=1);return e}const tX=t=>(QJ<<BigInt(t-1))-_7,rX={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||UI(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function zI(t,e,r={}){const n=(i,s,o)=>{const a=rX[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}function I8(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const Qn=BigInt(0),gn=BigInt(1),Hu=BigInt(2),nX=BigInt(3),zS=BigInt(4),A8=BigInt(5),C8=BigInt(8);function $n(t,e){const r=t%e;return r>=Qn?r:e+r}function iX(t,e,r){if(e<Qn)throw new Error("invalid exponent, negatives unsupported");if(r<=Qn)throw new Error("invalid modulus");if(r===gn)return Qn;let n=gn;for(;e>Qn;)e&gn&&(n=n*t%r),t=t*t%r,e>>=gn;return n}function da(t,e,r){let n=t;for(;e-- >Qn;)n*=n,n%=r;return n}function N8(t,e){if(t===Qn)throw new Error("invert: expected non-zero number");if(e<=Qn)throw new Error("invert: expected positive modulus, got "+e);let r=$n(t,e),n=e,i=Qn,s=gn;for(;r!==Qn;){const o=n/r,a=n%r,c=i-s*o;n=r,r=a,i=s,s=c}if(n!==gn)throw new Error("invert: does not exist");return $n(i,e)}function sX(t){const e=(t-gn)/Hu;let r,n,i;for(r=t-gn,n=0;r%Hu===Qn;r/=Hu,n++);for(i=Hu;i<t&&iX(i,e,t)!==t-gn;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+gn)/zS;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(r+gn)/Hu;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,l=o.pow(o.mul(o.ONE,i),r),u=o.pow(a,s),h=o.pow(a,r);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let d=1;for(let m=o.sqr(h);d<c&&!o.eql(m,o.ONE);d++)m=o.sqr(m);const g=o.pow(l,gn<<BigInt(c-d-1));l=o.sqr(g),u=o.mul(u,g),h=o.mul(h,l),c=d}return u}}function oX(t){if(t%zS===nX){const e=(t+gn)/zS;return function(r,n){const i=r.pow(n,e);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}}if(t%C8===A8){const e=(t-A8)/C8;return function(r,n){const i=r.mul(n,Hu),s=r.pow(i,e),o=r.mul(n,s),a=r.mul(r.mul(o,Hu),s),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return sX(t)}const aX=(t,e)=>($n(t,e)&gn)===gn,cX=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function lX(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=cX.reduce((n,i)=>(n[i]="function",n),e);return zI(t,r)}function uX(t,e,r){if(r<Qn)throw new Error("invalid exponent, negatives unsupported");if(r===Qn)return t.ONE;if(r===gn)return e;let n=t.ONE,i=e;for(;r>Qn;)r&gn&&(n=t.mul(n,i)),i=t.sqr(i),r>>=gn;return n}function hX(t,e){const r=new Array(e.length),n=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),i),r}function A7(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function C7(t,e,r=!1,n={}){if(t<=Qn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=A7(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:tX(i),ZERO:Qn,ONE:gn,create:c=>$n(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Qn<=c&&c<t},is0:c=>c===Qn,isOdd:c=>(c&gn)===gn,neg:c=>$n(-c,t),eql:(c,l)=>c===l,sqr:c=>$n(c*c,t),add:(c,l)=>$n(c+l,t),sub:(c,l)=>$n(c-l,t),mul:(c,l)=>$n(c*l,t),pow:(c,l)=>uX(a,c,l),div:(c,l)=>$n(c*N8(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>N8(c,t),sqrt:n.sqrt||(c=>(o||(o=oX(t)),o(a,c))),invertBatch:c=>hX(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>r?FS(c,s):I7(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?S1(c):JJ(c)}});return Object.freeze(a)}const M8=BigInt(0),dw=BigInt(1);function BE(t,e){const r=e.negate();return t?r:e}function N7(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function UE(t,e){N7(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function dX(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function fX(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const jE=new WeakMap,M7=new WeakMap;function FE(t){return M7.get(t)||1}function pX(t,e){return{constTimeNegate:BE,hasPrecomputes(r){return FE(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>M8;)n&dw&&(i=i.add(s)),s=s.double(),n>>=dw;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=UE(n,e),o=[];let a=r,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,i){const{windows:s,windowSize:o}=UE(r,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**r-1),u=2**r,h=BigInt(r);for(let d=0;d<s;d++){const g=d*o;let m=Number(i&l);i>>=h,m>o&&(m-=u,i+=dw);const v=g,$=g+Math.abs(m)-1,_=d%2!==0,x=m<0;m===0?c=c.add(BE(_,n[v])):a=a.add(BE(x,n[$]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:o,windowSize:a}=UE(r,e),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let h=0;h<o;h++){const d=h*a;if(i===M8)break;let g=Number(i&c);if(i>>=u,g>a&&(g-=l,i+=dw),g===0)continue;let m=n[d+Math.abs(g)-1];g<0&&(m=m.negate()),s=s.add(m)}return s},getPrecomputes(r,n,i){let s=jE.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&jE.set(n,i(s))),s},wNAFCached(r,n,i){const s=FE(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=FE(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){N7(n,e),M7.set(r,n),jE.delete(r)}}}function gX(t,e,r,n){if(dX(r,t),fX(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=eX(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let h=l;h>=0;h-=o){c.fill(i);for(let g=0;g<n.length;g++){const m=n[g],v=Number(m>>BigInt(h)&BigInt(a));c[v]=c[v].add(r[g])}let d=i;for(let g=c.length-1,m=i;g>0;g--)m=m.add(c[g]),d=d.add(m);if(u=u.add(d),h!==0)for(let g=0;g<o;g++)u=u.double()}return u}function mX(t){return lX(t.Fp),zI(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...A7(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Lo=BigInt(0),os=BigInt(1),fw=BigInt(2),yX=BigInt(8),wX={zip215:!0};function bX(t){const e=mX(t);return zI(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function vX(t){const e=bX(t),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=fw<<BigInt(a*8)-os,u=r.create,h=C7(e.n,e.nBitLength),d=e.uvRatio||((p,w)=>{try{return{isValid:!0,value:r.sqrt(p*r.inv(w))}}catch{return{isValid:!1,value:Lo}}}),g=e.adjustScalarBytes||(p=>p),m=e.domain||((p,w,N)=>{if(DE("phflag",N),w.length||N)throw new Error("Contexts/pre-hash are not supported");return p});function v(p,w){m0("coordinate "+p,w,Lo,l)}function $(p){if(!(p instanceof A))throw new Error("ExtendedPoint expected")}const _=I8((p,w)=>{const{ex:N,ey:M,ez:S}=p,y=p.is0();w==null&&(w=y?yX:r.inv(S));const C=u(N*w),I=u(M*w),U=u(S*w);if(y)return{x:Lo,y:os};if(U!==os)throw new Error("invZ was invalid");return{x:C,y:I}}),x=I8(p=>{const{a:w,d:N}=e;if(p.is0())throw new Error("bad point: ZERO");const{ex:M,ey:S,ez:y,et:C}=p,I=u(M*M),U=u(S*S),K=u(y*y),V=u(K*K),te=u(I*w),se=u(K*u(te+U)),ce=u(V+u(N*u(I*U)));if(se!==ce)throw new Error("bad point: equation left != right (1)");const ie=u(M*S),ve=u(y*C);if(ie!==ve)throw new Error("bad point: equation left != right (2)");return!0});class A{constructor(w,N,M,S){this.ex=w,this.ey=N,this.ez=M,this.et=S,v("x",w),v("y",N),v("z",M),v("t",S),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof A)throw new Error("extended point not allowed");const{x:N,y:M}=w||{};return v("x",N),v("y",M),new A(N,M,os,u(N*M))}static normalizeZ(w){const N=r.invertBatch(w.map(M=>M.ez));return w.map((M,S)=>M.toAffine(N[S])).map(A.fromAffine)}static msm(w,N){return gX(A,h,w,N)}_setWindowSize(w){D.setWindowSize(this,w)}assertValidity(){x(this)}equals(w){$(w);const{ex:N,ey:M,ez:S}=this,{ex:y,ey:C,ez:I}=w,U=u(N*I),K=u(y*S),V=u(M*I),te=u(C*S);return U===K&&V===te}is0(){return this.equals(A.ZERO)}negate(){return new A(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:w}=e,{ex:N,ey:M,ez:S}=this,y=u(N*N),C=u(M*M),I=u(fw*u(S*S)),U=u(w*y),K=N+M,V=u(u(K*K)-y-C),te=U+C,se=te-I,ce=U-C,ie=u(V*se),ve=u(te*ce),Ne=u(V*ce),Ae=u(se*te);return new A(ie,ve,Ae,Ne)}add(w){$(w);const{a:N,d:M}=e,{ex:S,ey:y,ez:C,et:I}=this,{ex:U,ey:K,ez:V,et:te}=w;if(N===BigInt(-1)){const jt=u((y-S)*(K+U)),Lt=u((y+S)*(K-U)),Le=u(Lt-jt);if(Le===Lo)return this.double();const ft=u(C*fw*te),Ct=u(I*fw*V),Ke=Ct+ft,mt=Lt+jt,Ft=Ct-ft,j=u(Ke*Le),P=u(mt*Ft),O=u(Ke*Ft),z=u(Le*mt);return new A(j,P,z,O)}const se=u(S*U),ce=u(y*K),ie=u(I*M*te),ve=u(C*V),Ne=u((S+y)*(U+K)-se-ce),Ae=ve-ie,et=ve+ie,tt=u(ce-N*se),je=u(Ne*Ae),Vt=u(et*tt),Dt=u(Ne*tt),Ge=u(Ae*et);return new A(je,Vt,Ge,Dt)}subtract(w){return this.add(w.negate())}wNAF(w){return D.wNAFCached(this,w,A.normalizeZ)}multiply(w){const N=w;m0("scalar",N,os,n);const{p:M,f:S}=this.wNAF(N);return A.normalizeZ([M,S])[0]}multiplyUnsafe(w,N=A.ZERO){const M=w;return m0("scalar",M,Lo,n),M===Lo?k:this.is0()||M===os?this:D.wNAFCachedUnsafe(this,M,A.normalizeZ,N)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return D.unsafeLadder(this,n).is0()}toAffine(w){return _(this,w)}clearCofactor(){const{h:w}=e;return w===os?this:this.multiplyUnsafe(w)}static fromHex(w,N=!1){const{d:M,a:S}=e,y=r.BYTES;w=fc("pointHex",w,y),DE("zip215",N);const C=w.slice(),I=w[y-1];C[y-1]=I&-129;const U=S1(C),K=N?l:r.ORDER;m0("pointHex.y",U,Lo,K);const V=u(U*U),te=u(V-os),se=u(M*V-S);let{isValid:ce,value:ie}=d(te,se);if(!ce)throw new Error("Point.fromHex: invalid y coordinate");const ve=(ie&os)===os,Ne=(I&128)!==0;if(!N&&ie===Lo&&Ne)throw new Error("Point.fromHex: x=0 and x_0=1");return Ne!==ve&&(ie=u(-ie)),A.fromAffine({x:ie,y:U})}static fromPrivateKey(w){return B(w).point}toRawBytes(){const{x:w,y:N}=this.toAffine(),M=FS(N,r.BYTES);return M[M.length-1]|=w&os?128:0,M}toHex(){return FI(this.toRawBytes())}}A.BASE=new A(e.Gx,e.Gy,os,u(e.Gx*e.Gy)),A.ZERO=new A(Lo,os,os,Lo);const{BASE:T,ZERO:k}=A,D=pX(A,a*8);function L(p){return $n(p,n)}function F(p){return L(S1(p))}function B(p){const w=r.BYTES;p=fc("private key",p,w);const N=fc("hashed private key",s(p),2*w),M=g(N.slice(0,w)),S=N.slice(w,2*w),y=F(M),C=T.multiply(y),I=C.toRawBytes();return{head:M,prefix:S,scalar:y,point:C,pointBytes:I}}function q(p){return B(p).pointBytes}function R(p=new Uint8Array,...w){const N=x8(...w);return F(s(m(N,fc("context",p),!!i)))}function E(p,w,N={}){p=fc("message",p),i&&(p=i(p));const{prefix:M,scalar:S,pointBytes:y}=B(w),C=R(N.context,M,p),I=T.multiply(C).toRawBytes(),U=R(N.context,I,y,p),K=L(C+U*S);m0("signature.s",K,Lo,n);const V=x8(I,FS(K,r.BYTES));return fc("result",V,r.BYTES*2)}const b=wX;function f(p,w,N,M=b){const{context:S,zip215:y}=M,C=r.BYTES;p=fc("signature",p,2*C),w=fc("message",w),N=fc("publicKey",N,C),y!==void 0&&DE("zip215",y),i&&(w=i(w));const I=S1(p.slice(C,2*C));let U,K,V;try{U=A.fromHex(N,y),K=A.fromHex(p.slice(0,C),y),V=T.multiplyUnsafe(I)}catch{return!1}if(!y&&U.isSmallOrder())return!1;const te=R(S,K.toRawBytes(),U.toRawBytes(),w);return K.add(U.multiplyUnsafe(te)).subtract(V).clearCofactor().equals(A.ZERO)}return T._setWindowSize(8),{CURVE:e,getPublicKey:q,sign:E,verify:f,ExtendedPoint:A,utils:{getExtendedPublicKey:B,randomPrivateKey:()=>o(r.BYTES),precompute(p=8,w=A.BASE){return w._setWindowSize(p),w.multiply(BigInt(3)),w}}}}BigInt(0),BigInt(1);const qI=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),T8=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const EX=BigInt(1),$8=BigInt(2);BigInt(3);const _X=BigInt(5),SX=BigInt(8);function xX(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=qI,o=t*t%s*t%s,a=da(o,$8,s)*o%s,c=da(a,EX,s)*t%s,l=da(c,_X,s)*c%s,u=da(l,e,s)*l%s,h=da(u,r,s)*u%s,d=da(h,n,s)*h%s,g=da(d,i,s)*d%s,m=da(g,i,s)*d%s,v=da(m,e,s)*l%s;return{pow_p_5_8:da(v,$8,s)*t%s,b2:o}}function IX(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function AX(t,e){const r=qI,n=$n(e*e*e,r),i=$n(n*n*e,r),s=xX(t*i).pow_p_5_8;let o=$n(t*n*s,r);const a=$n(e*o*o,r),c=o,l=$n(o*T8,r),u=a===t,h=a===$n(-t,r),d=a===$n(-t*T8,r);return u&&(o=c),(h||d)&&(o=l),aX(o,r)&&(o=$n(-o,r)),{isValid:u||h,value:o}}const CX=C7(qI,void 0,!0),NX={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:CX,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:SX,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:YJ,randomBytes:v7,adjustScalarBytes:IX,uvRatio:AX},T7=vX(NX),MX="EdDSA",TX="JWT",Ob=".",Fv="base64url",$7="utf8",P7="utf8",$X=":",PX="did",OX="key",P8="base58btc",kX="z",RX="K36",DX=32;function WI(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function O7(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?WI(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function k7(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=O7(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return WI(r)}function LX(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var v=0,$=0,_=0,x=m.length;_!==x&&m[_]===0;)_++,v++;for(var A=(x-_)*u+1>>>0,T=new Uint8Array(A);_!==x;){for(var k=m[_],D=0,L=A-1;(k!==0||D<$)&&L!==-1;L--,D++)k+=256*T[L]>>>0,T[L]=k%a>>>0,k=k/a>>>0;if(k!==0)throw new Error("Non-zero carry");$=D,_++}for(var F=A-$;F!==A&&T[F]===0;)F++;for(var B=c.repeat(v);F<A;++F)B+=t.charAt(T[F]);return B}function d(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var v=0;if(m[v]!==" "){for(var $=0,_=0;m[v]===c;)$++,v++;for(var x=(m.length-v)*l+1>>>0,A=new Uint8Array(x);m[v];){var T=r[m.charCodeAt(v)];if(T===255)return;for(var k=0,D=x-1;(T!==0||k<_)&&D!==-1;D--,k++)T+=a*A[D]>>>0,A[D]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");_=k,v++}if(m[v]!==" "){for(var L=x-_;L!==x&&A[L]===0;)L++;for(var F=new Uint8Array($+(x-L)),B=$;L!==x;)F[B++]=A[L++];return F}}}function g(m){var v=d(m);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:g}}var BX=LX,UX=BX;const R7=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},jX=t=>new TextEncoder().encode(t),FX=t=>new TextDecoder().decode(t);let zX=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},qX=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return D7(this,e)}},WX=class{constructor(e){this.decoders=e}or(e){return D7(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const D7=(t,e)=>new WX({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let HX=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new zX(e,r,n),this.decoder=new qX(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const zv=({name:t,prefix:e,encode:r,decode:n})=>new HX(t,e,r,n),sy=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=UX(r,e);return zv({prefix:t,name:e,encode:n,decode:s=>R7(i(s))})},KX=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},VX=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Ei=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>zv({prefix:e,name:t,encode(i){return VX(i,n,r)},decode(i){return KX(i,n,r,t)}}),GX=zv({prefix:"\0",name:"identity",encode:t=>FX(t),decode:t=>jX(t)});var YX=Object.freeze({__proto__:null,identity:GX});const QX=Ei({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ZX=Object.freeze({__proto__:null,base2:QX});const JX=Ei({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var XX=Object.freeze({__proto__:null,base8:JX});const eee=sy({prefix:"9",name:"base10",alphabet:"0123456789"});var tee=Object.freeze({__proto__:null,base10:eee});const ree=Ei({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),nee=Ei({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var iee=Object.freeze({__proto__:null,base16:ree,base16upper:nee});const see=Ei({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),oee=Ei({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),aee=Ei({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),cee=Ei({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),lee=Ei({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),uee=Ei({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hee=Ei({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),dee=Ei({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fee=Ei({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var pee=Object.freeze({__proto__:null,base32:see,base32upper:oee,base32pad:aee,base32padupper:cee,base32hex:lee,base32hexupper:uee,base32hexpad:hee,base32hexpadupper:dee,base32z:fee});const gee=sy({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),mee=sy({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var yee=Object.freeze({__proto__:null,base36:gee,base36upper:mee});const wee=sy({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bee=sy({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var vee=Object.freeze({__proto__:null,base58btc:wee,base58flickr:bee});const Eee=Ei({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),_ee=Ei({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),See=Ei({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xee=Ei({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Iee=Object.freeze({__proto__:null,base64:Eee,base64pad:_ee,base64url:See,base64urlpad:xee});const L7=Array.from(""),Aee=L7.reduce((t,e,r)=>(t[r]=e,t),[]),Cee=L7.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Nee(t){return t.reduce((e,r)=>(e+=Aee[r],e),"")}function Mee(t){const e=[];for(const r of t){const n=Cee[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Tee=zv({prefix:"",name:"base256emoji",encode:Nee,decode:Mee});var $ee=Object.freeze({__proto__:null,base256emoji:Tee}),Pee=B7,O8=128,Oee=-128,kee=Math.pow(2,31);function B7(t,e,r){e=e||[],r=r||0;for(var n=r;t>=kee;)e[r++]=t&255|O8,t/=128;for(;t&Oee;)e[r++]=t&255|O8,t>>>=7;return e[r]=t|0,B7.bytes=r-n+1,e}var Ree=qS,Dee=128,k8=127;function qS(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw qS.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&k8)<<i:(o&k8)*Math.pow(2,i),i+=7}while(o>=Dee);return qS.bytes=s-n,r}var Lee=Math.pow(2,7),Bee=Math.pow(2,14),Uee=Math.pow(2,21),jee=Math.pow(2,28),Fee=Math.pow(2,35),zee=Math.pow(2,42),qee=Math.pow(2,49),Wee=Math.pow(2,56),Hee=Math.pow(2,63),Kee=function(t){return t<Lee?1:t<Bee?2:t<Uee?3:t<jee?4:t<Fee?5:t<zee?6:t<qee?7:t<Wee?8:t<Hee?9:10},Vee={encode:Pee,decode:Ree,encodingLength:Kee},U7=Vee;const R8=(t,e,r=0)=>(U7.encode(t,e,r),e),D8=t=>U7.encodingLength(t),WS=(t,e)=>{const r=e.byteLength,n=D8(t),i=n+D8(r),s=new Uint8Array(i+r);return R8(t,s,0),R8(r,s,n),s.set(e,i),new Gee(t,r,e,s)};let Gee=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};const j7=({name:t,code:e,encode:r})=>new Yee(t,e,r);let Yee=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?WS(this.code,r):r.then(n=>WS(this.code,n))}else throw Error("Unknown type, must be binary type")}};const F7=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Qee=j7({name:"sha2-256",code:18,encode:F7("SHA-256")}),Zee=j7({name:"sha2-512",code:19,encode:F7("SHA-512")});var Jee=Object.freeze({__proto__:null,sha256:Qee,sha512:Zee});const z7=0,Xee="identity",q7=R7,ete=t=>WS(z7,q7(t)),tte={code:z7,name:Xee,encode:q7,digest:ete};var rte=Object.freeze({__proto__:null,identity:tte});new TextEncoder,new TextDecoder;const L8={...YX,...ZX,...XX,...tee,...iee,...pee,...yee,...vee,...Iee,...$ee};({...Jee,...rte});function W7(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const B8=W7("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),zE=W7("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=O7(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),H7={utf8:B8,"utf-8":B8,hex:L8.base16,latin1:zE,ascii:zE,binary:zE,...L8};function qv(t,e="utf8"){const r=H7[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Lp(t,e="utf8"){const r=H7[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?WI(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function U8(t){return aa(qv(Lp(t,Fv),$7))}function kb(t){return qv(Lp(Mo(t),$7),Fv)}function HI(t){const e=Lp(RX,P8),r=kX+qv(k7([e,t]),P8);return[PX,OX,r].join($X)}function nte(t){return qv(t,Fv)}function ite(t){return Lp(t,Fv)}function ste(t){return Lp([kb(t.header),kb(t.payload)].join(Ob),P7)}function ote(t){return[kb(t.header),kb(t.payload),nte(t.signature)].join(Ob)}function fp(t){const e=t.split(Ob),r=U8(e[0]),n=U8(e[1]),i=ite(e[2]),s=Lp(e.slice(0,2).join(Ob),P7);return{header:r,payload:n,signature:i,data:s}}function Rb(t=v7(DX)){const e=T7.getPublicKey(t);return{secretKey:k7([t,e]),publicKey:e}}async function K7(t,e,r,n,i=J.fromMiliseconds(Date.now())){const s={alg:MX,typ:TX},o=HI(n.publicKey),a=i+r,c={iss:o,sub:t,aud:e,iat:i,exp:a},l=ste({header:s,payload:c}),u=T7.sign(l,n.secretKey.slice(0,32));return ote({header:s,payload:c,signature:u})}var j8=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},ate=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),cte=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),lte=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),ute=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),hte=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),dte=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,fte=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,F8=3,pte=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",dte]],z8=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function V7(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new hte:typeof navigator<"u"?mte(navigator.userAgent):wte()}function gte(t){return t!==""&&pte.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function mte(t){var e=gte(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new ute;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<F8&&(i=j8(j8([],i,!0),bte(F8-i.length),!0)):i=[];var s=i.join("."),o=yte(t),a=fte.exec(t);return a&&a[1]?new lte(r,s,o,a[1]):new ate(r,s,o)}function yte(t){for(var e=0,r=z8.length;e<r;e++){var n=z8[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function wte(){var t=typeof process<"u"&&process.version;return t?new cte(process.version.slice(1)):null}function bte(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var vr={};Object.defineProperty(vr,"__esModule",{value:!0});vr.getLocalStorage=vr.getLocalStorageOrThrow=vr.getCrypto=vr.getCryptoOrThrow=KI=vr.getLocation=vr.getLocationOrThrow=oy=vr.getNavigator=vr.getNavigatorOrThrow=rl=vr.getDocument=vr.getDocumentOrThrow=vr.getFromWindowOrThrow=vr.getFromWindow=void 0;function Qh(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}vr.getFromWindow=Qh;function Bp(t){const e=Qh(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}vr.getFromWindowOrThrow=Bp;function vte(){return Bp("document")}vr.getDocumentOrThrow=vte;function Ete(){return Qh("document")}var rl=vr.getDocument=Ete;function _te(){return Bp("navigator")}vr.getNavigatorOrThrow=_te;function Ste(){return Qh("navigator")}var oy=vr.getNavigator=Ste;function xte(){return Bp("location")}vr.getLocationOrThrow=xte;function Ite(){return Qh("location")}var KI=vr.getLocation=Ite;function Ate(){return Bp("crypto")}vr.getCryptoOrThrow=Ate;function Cte(){return Qh("crypto")}vr.getCrypto=Cte;function Nte(){return Bp("localStorage")}vr.getLocalStorageOrThrow=Nte;function Mte(){return Qh("localStorage")}vr.getLocalStorage=Mte;var VI={};Object.defineProperty(VI,"__esModule",{value:!0});var GI=VI.getWindowMetadata=void 0;const q8=vr;function Tte(){let t,e;try{t=q8.getDocumentOrThrow(),e=q8.getLocationOrThrow()}catch{return null}function r(){const h=t.getElementsByTagName("link"),d=[];for(let g=0;g<h.length;g++){const m=h[g],v=m.getAttribute("rel");if(v&&v.toLowerCase().indexOf("icon")>-1){const $=m.getAttribute("href");if($)if($.toLowerCase().indexOf("https:")===-1&&$.toLowerCase().indexOf("http:")===-1&&$.indexOf("//")!==0){let _=e.protocol+"//"+e.host;if($.indexOf("/")===0)_+=$;else{const x=e.pathname.split("/");x.pop();const A=x.join("/");_+=A+"/"+$}d.push(_)}else if($.indexOf("//")===0){const _=e.protocol+$;d.push(_)}else d.push($)}}return d}function n(...h){const d=t.getElementsByTagName("meta");for(let g=0;g<d.length;g++){const m=d[g],v=["itemprop","property","name"].map($=>m.getAttribute($)).filter($=>$?h.includes($):!1);if(v.length&&v){const $=m.getAttribute("content");if($)return $}}return""}function i(){let h=n("name","og:site_name","og:title","twitter:title");return h||(h=t.title),h}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,l=r();return{description:a,url:c,icons:l,name:o}}GI=VI.getWindowMetadata=Tte;function im(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function W8(t){return im(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const G7="2.23.2";let y0={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${G7}`},Wv=class HS extends Error{constructor(e,r={}){var a;const n=(()=>{var c;return r.cause instanceof HS?r.cause.details:(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),i=r.cause instanceof HS&&r.cause.docsPath||r.docsPath,s=(a=y0.getDocsUrl)==null?void 0:a.call(y0,{...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...y0.version?[`Version: ${y0.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=G7}walk(e){return Y7(this,e)}};function Y7(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Y7(t.cause,e):e?null:t}let Q7=class extends Wv{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}};function Up(t,{dir:e,size:r=32}={}){return typeof t=="string"?$te(t,{dir:e,size:r}):Pte(t,{dir:e,size:r})}function $te(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new Q7({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function Pte(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new Q7({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}let Ote=class extends Wv{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}},kte=class extends Wv{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function jp(t,{size:e}){if(W8(t)>e)throw new kte({givenSize:W8(t),maxSize:e})}function KS(t,e={}){const{signed:r}=e;e.size&&jp(t,{size:e.size});const n=BigInt(t);if(!r)return n;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function Rte(t,e={}){return Number(KS(t,e))}const Dte=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function VS(t,e={}){return typeof t=="number"||typeof t=="bigint"?J7(t,e):typeof t=="string"?Ute(t,e):typeof t=="boolean"?Lte(t,e):Z7(t,e)}function Lte(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(jp(r,{size:e.size}),Up(r,{size:e.size})):r}function Z7(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=Dte[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(jp(n,{size:e.size}),Up(n,{dir:"right",size:e.size})):n}function J7(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new Ote({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?Up(a,{size:n}):a}const Bte=new TextEncoder;function Ute(t,e={}){const r=Bte.encode(t);return Z7(r,e)}const jte=new TextEncoder;function Fte(t,e={}){return typeof t=="number"||typeof t=="bigint"?qte(t,e):typeof t=="boolean"?zte(t,e):im(t)?X7(t,e):eR(t,e)}function zte(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(jp(r,{size:e.size}),Up(r,{size:e.size})):r}const pc={zero:48,nine:57,A:65,F:70,a:97,f:102};function H8(t){if(t>=pc.zero&&t<=pc.nine)return t-pc.zero;if(t>=pc.A&&t<=pc.F)return t-(pc.A-10);if(t>=pc.a&&t<=pc.f)return t-(pc.a-10)}function X7(t,e={}){let r=t;e.size&&(jp(r,{size:e.size}),r=Up(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=H8(n.charCodeAt(a++)),l=H8(n.charCodeAt(a++));if(c===void 0||l===void 0)throw new Wv(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);s[o]=c*16+l}return s}function qte(t,e){const r=J7(t,e);return X7(r)}function eR(t,e={}){const r=jte.encode(t);return typeof e.size=="number"?(jp(r,{size:e.size}),Up(r,{dir:"right",size:e.size})):r}function Db(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Wte(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Hv(t,...e){if(!Wte(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function XAe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Db(t.outputLen),Db(t.blockLen)}function K8(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Hte(t,e){Hv(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const pw=BigInt(2**32-1),V8=BigInt(32);function Kte(t,e=!1){return e?{h:Number(t&pw),l:Number(t>>V8&pw)}:{h:Number(t>>V8&pw)|0,l:Number(t&pw)|0}}function Vte(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Kte(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const Gte=(t,e,r)=>t<<r|e>>>32-r,Yte=(t,e,r)=>e<<r|t>>>32-r,Qte=(t,e,r)=>e<<r-32|t>>>64-r,Zte=(t,e,r)=>t<<r-32|e>>>64-r,bd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Jte(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function e8e(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function t8e(t,e){return t<<32-e|t>>>e}const G8=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Xte(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Y8(t){for(let e=0;e<t.length;e++)t[e]=Xte(t[e])}function ere(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function tR(t){return typeof t=="string"&&(t=ere(t)),Hv(t),t}function r8e(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Hv(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}let tre=class{clone(){return this._cloneInto()}};function rre(t){const e=n=>t().update(tR(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function i8e(t=32){if(bd&&typeof bd.getRandomValues=="function")return bd.getRandomValues(new Uint8Array(t));if(bd&&typeof bd.randomBytes=="function")return bd.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const rR=[],nR=[],iR=[],nre=BigInt(0),w0=BigInt(1),ire=BigInt(2),sre=BigInt(7),ore=BigInt(256),are=BigInt(113);for(let t=0,e=w0,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],rR.push(2*(5*n+r)),nR.push((t+1)*(t+2)/2%64);let i=nre;for(let s=0;s<7;s++)e=(e<<w0^(e>>sre)*are)%ore,e&ire&&(i^=w0<<(w0<<BigInt(s))-w0);iR.push(i)}const[cre,lre]=Vte(iR,!0),Q8=(t,e,r)=>r>32?Qte(t,e,r):Gte(t,e,r),Z8=(t,e,r)=>r>32?Zte(t,e,r):Yte(t,e,r);function ure(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],h=Q8(l,u,1)^r[a],d=Z8(l,u,1)^r[a+1];for(let g=0;g<50;g+=10)t[o+g]^=h,t[o+g+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=nR[o],c=Q8(i,s,a),l=Z8(i,s,a),u=rR[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=cre[n],t[1]^=lre[n]}r.fill(0)}let hre=class sR extends tre{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Db(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Jte(this.state)}keccak(){G8||Y8(this.state32),ure(this.state32,this.rounds),G8||Y8(this.state32),this.posOut=0,this.pos=0}update(e){K8(this);const{blockLen:r,state:n}=this;e=tR(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,r&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){K8(this,!1),Hv(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Db(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Hte(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new sR(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const dre=(t,e,r)=>rre(()=>new hre(e,t,r)),fre=dre(1,136,256/8);function oR(t,e){const r=e||"hex",n=fre(im(t,{strict:!1})?Fte(t):t);return r==="bytes"?n:VS(n)}let pre=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const qE=new pre(8192);function gre(t,e){if(qE.has(`${t}.${e}`))return qE.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=oR(eR(r),"bytes"),i=r.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(n[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return qE.set(`${t}.${e}`,s),s}function mre(t){const e=oR(`0x${t.substring(4)}`).substring(26);return gre(`0x${e}`)}async function yre({hash:t,signature:e}){const r=im(t)?t:VS(t),{secp256k1:n}=await Mh(async()=>{const{secp256k1:o}=await import("./secp256k1-Ck2SvRdb.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:h,yParity:d}=e,g=Number(d??h),m=J8(g);return new n.Signature(KS(l),KS(u)).addRecoveryBit(m)}const o=im(e)?e:VS(e),a=Rte(`0x${o.slice(130)}`),c=J8(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function J8(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function wre({hash:t,signature:e}){return mre(await yre({hash:t,signature:e}))}function aR(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Kf(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=aR(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function bre(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var v=0,$=0,_=0,x=m.length;_!==x&&m[_]===0;)_++,v++;for(var A=(x-_)*u+1>>>0,T=new Uint8Array(A);_!==x;){for(var k=m[_],D=0,L=A-1;(k!==0||D<$)&&L!==-1;L--,D++)k+=256*T[L]>>>0,T[L]=k%a>>>0,k=k/a>>>0;if(k!==0)throw new Error("Non-zero carry");$=D,_++}for(var F=A-$;F!==A&&T[F]===0;)F++;for(var B=c.repeat(v);F<A;++F)B+=t.charAt(T[F]);return B}function d(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var v=0;if(m[v]!==" "){for(var $=0,_=0;m[v]===c;)$++,v++;for(var x=(m.length-v)*l+1>>>0,A=new Uint8Array(x);m[v];){var T=r[m.charCodeAt(v)];if(T===255)return;for(var k=0,D=x-1;(T!==0||k<_)&&D!==-1;D--,k++)T+=a*A[D]>>>0,A[D]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");_=k,v++}if(m[v]!==" "){for(var L=x-_;L!==x&&A[L]===0;)L++;for(var F=new Uint8Array($+(x-L)),B=$;L!==x;)F[B++]=A[L++];return F}}}function g(m){var v=d(m);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:g}}var vre=bre,Ere=vre;const _re=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Sre=t=>new TextEncoder().encode(t),xre=t=>new TextDecoder().decode(t);class Ire{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Are{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return cR(this,e)}}class Cre{constructor(e){this.decoders=e}or(e){return cR(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const cR=(t,e)=>new Cre({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Nre{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Ire(e,r,n),this.decoder=new Are(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Kv=({name:t,prefix:e,encode:r,decode:n})=>new Nre(t,e,r,n),ay=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Ere(r,e);return Kv({prefix:t,name:e,encode:n,decode:s=>_re(i(s))})},Mre=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Tre=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},_i=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Kv({prefix:e,name:t,encode(i){return Tre(i,n,r)},decode(i){return Mre(i,n,r,t)}}),$re=Kv({prefix:"\0",name:"identity",encode:t=>xre(t),decode:t=>Sre(t)}),Pre=Object.freeze(Object.defineProperty({__proto__:null,identity:$re},Symbol.toStringTag,{value:"Module"})),Ore=_i({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),kre=Object.freeze(Object.defineProperty({__proto__:null,base2:Ore},Symbol.toStringTag,{value:"Module"})),Rre=_i({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Dre=Object.freeze(Object.defineProperty({__proto__:null,base8:Rre},Symbol.toStringTag,{value:"Module"})),Lre=ay({prefix:"9",name:"base10",alphabet:"0123456789"}),Bre=Object.freeze(Object.defineProperty({__proto__:null,base10:Lre},Symbol.toStringTag,{value:"Module"})),Ure=_i({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),jre=_i({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Fre=Object.freeze(Object.defineProperty({__proto__:null,base16:Ure,base16upper:jre},Symbol.toStringTag,{value:"Module"})),zre=_i({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qre=_i({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Wre=_i({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Hre=_i({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Kre=_i({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Vre=_i({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Gre=_i({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Yre=_i({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Qre=_i({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Zre=Object.freeze(Object.defineProperty({__proto__:null,base32:zre,base32hex:Kre,base32hexpad:Gre,base32hexpadupper:Yre,base32hexupper:Vre,base32pad:Wre,base32padupper:Hre,base32upper:qre,base32z:Qre},Symbol.toStringTag,{value:"Module"})),Jre=ay({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Xre=ay({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ene=Object.freeze(Object.defineProperty({__proto__:null,base36:Jre,base36upper:Xre},Symbol.toStringTag,{value:"Module"})),tne=ay({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),rne=ay({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),nne=Object.freeze(Object.defineProperty({__proto__:null,base58btc:tne,base58flickr:rne},Symbol.toStringTag,{value:"Module"})),ine=_i({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),sne=_i({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),one=_i({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ane=_i({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),cne=Object.freeze(Object.defineProperty({__proto__:null,base64:ine,base64pad:sne,base64url:one,base64urlpad:ane},Symbol.toStringTag,{value:"Module"})),lR=Array.from(""),lne=lR.reduce((t,e,r)=>(t[r]=e,t),[]),une=lR.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function hne(t){return t.reduce((e,r)=>(e+=lne[r],e),"")}function dne(t){const e=[];for(const r of t){const n=une[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const fne=Kv({prefix:"",name:"base256emoji",encode:hne,decode:dne}),pne=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:fne},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const X8={...Pre,...kre,...Dre,...Bre,...Fre,...Zre,...ene,...nne,...cne,...pne};function uR(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const eC=uR("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),WE=uR("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=aR(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),hR={utf8:eC,"utf-8":eC,hex:X8.base16,latin1:WE,ascii:WE,binary:WE,...X8};function Kr(t,e="utf8"){const r=hR[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function Ht(t,e="utf8"){const r=hR[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var YI={};const gne="6.6.1",mne={version:gne};var ro={},QI={exports:{}};QI.exports;(function(t){(function(e,r){function n(R,E){if(!R)throw new Error(E||"Assertion failed")}function i(R,E){R.super_=E;var b=function(){};b.prototype=E.prototype,R.prototype=new b,R.prototype.constructor=R}function s(R,E,b){if(s.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,R!==null&&((E==="le"||E==="be")&&(b=E,E=10),this._init(R||0,E||10,b||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=oI.Buffer}catch{}s.isBN=function(E){return E instanceof s?!0:E!==null&&typeof E=="object"&&E.constructor.wordSize===s.wordSize&&Array.isArray(E.words)},s.max=function(E,b){return E.cmp(b)>0?E:b},s.min=function(E,b){return E.cmp(b)<0?E:b},s.prototype._init=function(E,b,f){if(typeof E=="number")return this._initNumber(E,b,f);if(typeof E=="object")return this._initArray(E,b,f);b==="hex"&&(b=16),n(b===(b|0)&&b>=2&&b<=36),E=E.toString().replace(/\s+/g,"");var p=0;E[0]==="-"&&(p++,this.negative=1),p<E.length&&(b===16?this._parseHex(E,p,f):(this._parseBase(E,b,p),f==="le"&&this._initArray(this.toArray(),b,f)))},s.prototype._initNumber=function(E,b,f){E<0&&(this.negative=1,E=-E),E<67108864?(this.words=[E&67108863],this.length=1):E<4503599627370496?(this.words=[E&67108863,E/67108864&67108863],this.length=2):(n(E<9007199254740992),this.words=[E&67108863,E/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),b,f)},s.prototype._initArray=function(E,b,f){if(n(typeof E.length=="number"),E.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(E.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w,N,M=0;if(f==="be")for(p=E.length-1,w=0;p>=0;p-=3)N=E[p]|E[p-1]<<8|E[p-2]<<16,this.words[w]|=N<<M&67108863,this.words[w+1]=N>>>26-M&67108863,M+=24,M>=26&&(M-=26,w++);else if(f==="le")for(p=0,w=0;p<E.length;p+=3)N=E[p]|E[p+1]<<8|E[p+2]<<16,this.words[w]|=N<<M&67108863,this.words[w+1]=N>>>26-M&67108863,M+=24,M>=26&&(M-=26,w++);return this.strip()};function a(R,E){var b=R.charCodeAt(E);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function c(R,E,b){var f=a(R,b);return b-1>=E&&(f|=a(R,b-1)<<4),f}s.prototype._parseHex=function(E,b,f){this.length=Math.ceil((E.length-b)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w=0,N=0,M;if(f==="be")for(p=E.length-1;p>=b;p-=2)M=c(E,b,p)<<w,this.words[N]|=M&67108863,w>=18?(w-=18,N+=1,this.words[N]|=M>>>26):w+=8;else{var S=E.length-b;for(p=S%2===0?b+1:b;p<E.length;p+=2)M=c(E,b,p)<<w,this.words[N]|=M&67108863,w>=18?(w-=18,N+=1,this.words[N]|=M>>>26):w+=8}this.strip()};function l(R,E,b,f){for(var p=0,w=Math.min(R.length,b),N=E;N<w;N++){var M=R.charCodeAt(N)-48;p*=f,M>=49?p+=M-49+10:M>=17?p+=M-17+10:p+=M}return p}s.prototype._parseBase=function(E,b,f){this.words=[0],this.length=1;for(var p=0,w=1;w<=67108863;w*=b)p++;p--,w=w/b|0;for(var N=E.length-f,M=N%p,S=Math.min(N,N-M)+f,y=0,C=f;C<S;C+=p)y=l(E,C,C+p,b),this.imuln(w),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y);if(M!==0){var I=1;for(y=l(E,C,E.length,b),C=0;C<M;C++)I*=b;this.imuln(I),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y)}this.strip()},s.prototype.copy=function(E){E.words=new Array(this.length);for(var b=0;b<this.length;b++)E.words[b]=this.words[b];E.length=this.length,E.negative=this.negative,E.red=this.red},s.prototype.clone=function(){var E=new s(null);return this.copy(E),E},s.prototype._expand=function(E){for(;this.length<E;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(E,b){E=E||10,b=b|0||1;var f;if(E===16||E==="hex"){f="";for(var p=0,w=0,N=0;N<this.length;N++){var M=this.words[N],S=((M<<p|w)&16777215).toString(16);w=M>>>24-p&16777215,p+=2,p>=26&&(p-=26,N--),w!==0||N!==this.length-1?f=u[6-S.length]+S+f:f=S+f}for(w!==0&&(f=w.toString(16)+f);f.length%b!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(E===(E|0)&&E>=2&&E<=36){var y=h[E],C=d[E];f="";var I=this.clone();for(I.negative=0;!I.isZero();){var U=I.modn(C).toString(E);I=I.idivn(C),I.isZero()?f=U+f:f=u[y-U.length]+U+f}for(this.isZero()&&(f="0"+f);f.length%b!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var E=this.words[0];return this.length===2?E+=this.words[1]*67108864:this.length===3&&this.words[2]===1?E+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-E:E},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(E,b){return n(typeof o<"u"),this.toArrayLike(o,E,b)},s.prototype.toArray=function(E,b){return this.toArrayLike(Array,E,b)},s.prototype.toArrayLike=function(E,b,f){var p=this.byteLength(),w=f||Math.max(1,p);n(p<=w,"byte array longer than desired length"),n(w>0,"Requested array length <= 0"),this.strip();var N=b==="le",M=new E(w),S,y,C=this.clone();if(N){for(y=0;!C.isZero();y++)S=C.andln(255),C.iushrn(8),M[y]=S;for(;y<w;y++)M[y]=0}else{for(y=0;y<w-p;y++)M[y]=0;for(y=0;!C.isZero();y++)S=C.andln(255),C.iushrn(8),M[w-y-1]=S}return M},Math.clz32?s.prototype._countBits=function(E){return 32-Math.clz32(E)}:s.prototype._countBits=function(E){var b=E,f=0;return b>=4096&&(f+=13,b>>>=13),b>=64&&(f+=7,b>>>=7),b>=8&&(f+=4,b>>>=4),b>=2&&(f+=2,b>>>=2),f+b},s.prototype._zeroBits=function(E){if(E===0)return 26;var b=E,f=0;return b&8191||(f+=13,b>>>=13),b&127||(f+=7,b>>>=7),b&15||(f+=4,b>>>=4),b&3||(f+=2,b>>>=2),b&1||f++,f},s.prototype.bitLength=function(){var E=this.words[this.length-1],b=this._countBits(E);return(this.length-1)*26+b};function g(R){for(var E=new Array(R.bitLength()),b=0;b<E.length;b++){var f=b/26|0,p=b%26;E[b]=(R.words[f]&1<<p)>>>p}return E}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var E=0,b=0;b<this.length;b++){var f=this._zeroBits(this.words[b]);if(E+=f,f!==26)break}return E},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(E){return this.negative!==0?this.abs().inotn(E).iaddn(1):this.clone()},s.prototype.fromTwos=function(E){return this.testn(E-1)?this.notn(E).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(E){for(;this.length<E.length;)this.words[this.length++]=0;for(var b=0;b<E.length;b++)this.words[b]=this.words[b]|E.words[b];return this.strip()},s.prototype.ior=function(E){return n((this.negative|E.negative)===0),this.iuor(E)},s.prototype.or=function(E){return this.length>E.length?this.clone().ior(E):E.clone().ior(this)},s.prototype.uor=function(E){return this.length>E.length?this.clone().iuor(E):E.clone().iuor(this)},s.prototype.iuand=function(E){var b;this.length>E.length?b=E:b=this;for(var f=0;f<b.length;f++)this.words[f]=this.words[f]&E.words[f];return this.length=b.length,this.strip()},s.prototype.iand=function(E){return n((this.negative|E.negative)===0),this.iuand(E)},s.prototype.and=function(E){return this.length>E.length?this.clone().iand(E):E.clone().iand(this)},s.prototype.uand=function(E){return this.length>E.length?this.clone().iuand(E):E.clone().iuand(this)},s.prototype.iuxor=function(E){var b,f;this.length>E.length?(b=this,f=E):(b=E,f=this);for(var p=0;p<f.length;p++)this.words[p]=b.words[p]^f.words[p];if(this!==b)for(;p<b.length;p++)this.words[p]=b.words[p];return this.length=b.length,this.strip()},s.prototype.ixor=function(E){return n((this.negative|E.negative)===0),this.iuxor(E)},s.prototype.xor=function(E){return this.length>E.length?this.clone().ixor(E):E.clone().ixor(this)},s.prototype.uxor=function(E){return this.length>E.length?this.clone().iuxor(E):E.clone().iuxor(this)},s.prototype.inotn=function(E){n(typeof E=="number"&&E>=0);var b=Math.ceil(E/26)|0,f=E%26;this._expand(b),f>0&&b--;for(var p=0;p<b;p++)this.words[p]=~this.words[p]&67108863;return f>0&&(this.words[p]=~this.words[p]&67108863>>26-f),this.strip()},s.prototype.notn=function(E){return this.clone().inotn(E)},s.prototype.setn=function(E,b){n(typeof E=="number"&&E>=0);var f=E/26|0,p=E%26;return this._expand(f+1),b?this.words[f]=this.words[f]|1<<p:this.words[f]=this.words[f]&~(1<<p),this.strip()},s.prototype.iadd=function(E){var b;if(this.negative!==0&&E.negative===0)return this.negative=0,b=this.isub(E),this.negative^=1,this._normSign();if(this.negative===0&&E.negative!==0)return E.negative=0,b=this.isub(E),E.negative=1,b._normSign();var f,p;this.length>E.length?(f=this,p=E):(f=E,p=this);for(var w=0,N=0;N<p.length;N++)b=(f.words[N]|0)+(p.words[N]|0)+w,this.words[N]=b&67108863,w=b>>>26;for(;w!==0&&N<f.length;N++)b=(f.words[N]|0)+w,this.words[N]=b&67108863,w=b>>>26;if(this.length=f.length,w!==0)this.words[this.length]=w,this.length++;else if(f!==this)for(;N<f.length;N++)this.words[N]=f.words[N];return this},s.prototype.add=function(E){var b;return E.negative!==0&&this.negative===0?(E.negative=0,b=this.sub(E),E.negative^=1,b):E.negative===0&&this.negative!==0?(this.negative=0,b=E.sub(this),this.negative=1,b):this.length>E.length?this.clone().iadd(E):E.clone().iadd(this)},s.prototype.isub=function(E){if(E.negative!==0){E.negative=0;var b=this.iadd(E);return E.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(E),this.negative=1,this._normSign();var f=this.cmp(E);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,w;f>0?(p=this,w=E):(p=E,w=this);for(var N=0,M=0;M<w.length;M++)b=(p.words[M]|0)-(w.words[M]|0)+N,N=b>>26,this.words[M]=b&67108863;for(;N!==0&&M<p.length;M++)b=(p.words[M]|0)+N,N=b>>26,this.words[M]=b&67108863;if(N===0&&M<p.length&&p!==this)for(;M<p.length;M++)this.words[M]=p.words[M];return this.length=Math.max(this.length,M),p!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(E){return this.clone().isub(E)};function m(R,E,b){b.negative=E.negative^R.negative;var f=R.length+E.length|0;b.length=f,f=f-1|0;var p=R.words[0]|0,w=E.words[0]|0,N=p*w,M=N&67108863,S=N/67108864|0;b.words[0]=M;for(var y=1;y<f;y++){for(var C=S>>>26,I=S&67108863,U=Math.min(y,E.length-1),K=Math.max(0,y-R.length+1);K<=U;K++){var V=y-K|0;p=R.words[V]|0,w=E.words[K]|0,N=p*w+I,C+=N/67108864|0,I=N&67108863}b.words[y]=I|0,S=C|0}return S!==0?b.words[y]=S|0:b.length--,b.strip()}var v=function(E,b,f){var p=E.words,w=b.words,N=f.words,M=0,S,y,C,I=p[0]|0,U=I&8191,K=I>>>13,V=p[1]|0,te=V&8191,se=V>>>13,ce=p[2]|0,ie=ce&8191,ve=ce>>>13,Ne=p[3]|0,Ae=Ne&8191,et=Ne>>>13,tt=p[4]|0,je=tt&8191,Vt=tt>>>13,Dt=p[5]|0,Ge=Dt&8191,jt=Dt>>>13,Lt=p[6]|0,Le=Lt&8191,ft=Lt>>>13,Ct=p[7]|0,Ke=Ct&8191,mt=Ct>>>13,Ft=p[8]|0,j=Ft&8191,P=Ft>>>13,O=p[9]|0,z=O&8191,G=O>>>13,Z=w[0]|0,ee=Z&8191,Ce=Z>>>13,Fe=w[1]|0,Se=Fe&8191,qe=Fe>>>13,Re=w[2]|0,We=Re&8191,dr=Re>>>13,Cr=w[3]|0,rt=Cr&8191,sr=Cr>>>13,Gt=w[4]|0,Qe=Gt&8191,or=Gt>>>13,ar=w[5]|0,Ye=ar&8191,Nr=ar>>>13,Mr=w[6]|0,nt=Mr&8191,Tr=Mr>>>13,$r=w[7]|0,Je=$r&8191,cr=$r>>>13,Bt=w[8]|0,it=Bt&8191,Pr=Bt>>>13,Or=w[9]|0,st=Or&8191,kr=Or>>>13;f.negative=E.negative^b.negative,f.length=19,S=Math.imul(U,ee),y=Math.imul(U,Ce),y=y+Math.imul(K,ee)|0,C=Math.imul(K,Ce);var xt=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(xt>>>26)|0,xt&=67108863,S=Math.imul(te,ee),y=Math.imul(te,Ce),y=y+Math.imul(se,ee)|0,C=Math.imul(se,Ce),S=S+Math.imul(U,Se)|0,y=y+Math.imul(U,qe)|0,y=y+Math.imul(K,Se)|0,C=C+Math.imul(K,qe)|0;var fr=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(fr>>>26)|0,fr&=67108863,S=Math.imul(ie,ee),y=Math.imul(ie,Ce),y=y+Math.imul(ve,ee)|0,C=Math.imul(ve,Ce),S=S+Math.imul(te,Se)|0,y=y+Math.imul(te,qe)|0,y=y+Math.imul(se,Se)|0,C=C+Math.imul(se,qe)|0,S=S+Math.imul(U,We)|0,y=y+Math.imul(U,dr)|0,y=y+Math.imul(K,We)|0,C=C+Math.imul(K,dr)|0;var Ya=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(Ya>>>26)|0,Ya&=67108863,S=Math.imul(Ae,ee),y=Math.imul(Ae,Ce),y=y+Math.imul(et,ee)|0,C=Math.imul(et,Ce),S=S+Math.imul(ie,Se)|0,y=y+Math.imul(ie,qe)|0,y=y+Math.imul(ve,Se)|0,C=C+Math.imul(ve,qe)|0,S=S+Math.imul(te,We)|0,y=y+Math.imul(te,dr)|0,y=y+Math.imul(se,We)|0,C=C+Math.imul(se,dr)|0,S=S+Math.imul(U,rt)|0,y=y+Math.imul(U,sr)|0,y=y+Math.imul(K,rt)|0,C=C+Math.imul(K,sr)|0;var Qa=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(Qa>>>26)|0,Qa&=67108863,S=Math.imul(je,ee),y=Math.imul(je,Ce),y=y+Math.imul(Vt,ee)|0,C=Math.imul(Vt,Ce),S=S+Math.imul(Ae,Se)|0,y=y+Math.imul(Ae,qe)|0,y=y+Math.imul(et,Se)|0,C=C+Math.imul(et,qe)|0,S=S+Math.imul(ie,We)|0,y=y+Math.imul(ie,dr)|0,y=y+Math.imul(ve,We)|0,C=C+Math.imul(ve,dr)|0,S=S+Math.imul(te,rt)|0,y=y+Math.imul(te,sr)|0,y=y+Math.imul(se,rt)|0,C=C+Math.imul(se,sr)|0,S=S+Math.imul(U,Qe)|0,y=y+Math.imul(U,or)|0,y=y+Math.imul(K,Qe)|0,C=C+Math.imul(K,or)|0;var Za=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(Za>>>26)|0,Za&=67108863,S=Math.imul(Ge,ee),y=Math.imul(Ge,Ce),y=y+Math.imul(jt,ee)|0,C=Math.imul(jt,Ce),S=S+Math.imul(je,Se)|0,y=y+Math.imul(je,qe)|0,y=y+Math.imul(Vt,Se)|0,C=C+Math.imul(Vt,qe)|0,S=S+Math.imul(Ae,We)|0,y=y+Math.imul(Ae,dr)|0,y=y+Math.imul(et,We)|0,C=C+Math.imul(et,dr)|0,S=S+Math.imul(ie,rt)|0,y=y+Math.imul(ie,sr)|0,y=y+Math.imul(ve,rt)|0,C=C+Math.imul(ve,sr)|0,S=S+Math.imul(te,Qe)|0,y=y+Math.imul(te,or)|0,y=y+Math.imul(se,Qe)|0,C=C+Math.imul(se,or)|0,S=S+Math.imul(U,Ye)|0,y=y+Math.imul(U,Nr)|0,y=y+Math.imul(K,Ye)|0,C=C+Math.imul(K,Nr)|0;var Ja=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(Ja>>>26)|0,Ja&=67108863,S=Math.imul(Le,ee),y=Math.imul(Le,Ce),y=y+Math.imul(ft,ee)|0,C=Math.imul(ft,Ce),S=S+Math.imul(Ge,Se)|0,y=y+Math.imul(Ge,qe)|0,y=y+Math.imul(jt,Se)|0,C=C+Math.imul(jt,qe)|0,S=S+Math.imul(je,We)|0,y=y+Math.imul(je,dr)|0,y=y+Math.imul(Vt,We)|0,C=C+Math.imul(Vt,dr)|0,S=S+Math.imul(Ae,rt)|0,y=y+Math.imul(Ae,sr)|0,y=y+Math.imul(et,rt)|0,C=C+Math.imul(et,sr)|0,S=S+Math.imul(ie,Qe)|0,y=y+Math.imul(ie,or)|0,y=y+Math.imul(ve,Qe)|0,C=C+Math.imul(ve,or)|0,S=S+Math.imul(te,Ye)|0,y=y+Math.imul(te,Nr)|0,y=y+Math.imul(se,Ye)|0,C=C+Math.imul(se,Nr)|0,S=S+Math.imul(U,nt)|0,y=y+Math.imul(U,Tr)|0,y=y+Math.imul(K,nt)|0,C=C+Math.imul(K,Tr)|0;var Ki=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(Ki>>>26)|0,Ki&=67108863,S=Math.imul(Ke,ee),y=Math.imul(Ke,Ce),y=y+Math.imul(mt,ee)|0,C=Math.imul(mt,Ce),S=S+Math.imul(Le,Se)|0,y=y+Math.imul(Le,qe)|0,y=y+Math.imul(ft,Se)|0,C=C+Math.imul(ft,qe)|0,S=S+Math.imul(Ge,We)|0,y=y+Math.imul(Ge,dr)|0,y=y+Math.imul(jt,We)|0,C=C+Math.imul(jt,dr)|0,S=S+Math.imul(je,rt)|0,y=y+Math.imul(je,sr)|0,y=y+Math.imul(Vt,rt)|0,C=C+Math.imul(Vt,sr)|0,S=S+Math.imul(Ae,Qe)|0,y=y+Math.imul(Ae,or)|0,y=y+Math.imul(et,Qe)|0,C=C+Math.imul(et,or)|0,S=S+Math.imul(ie,Ye)|0,y=y+Math.imul(ie,Nr)|0,y=y+Math.imul(ve,Ye)|0,C=C+Math.imul(ve,Nr)|0,S=S+Math.imul(te,nt)|0,y=y+Math.imul(te,Tr)|0,y=y+Math.imul(se,nt)|0,C=C+Math.imul(se,Tr)|0,S=S+Math.imul(U,Je)|0,y=y+Math.imul(U,cr)|0,y=y+Math.imul(K,Je)|0,C=C+Math.imul(K,cr)|0;var Xa=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(Xa>>>26)|0,Xa&=67108863,S=Math.imul(j,ee),y=Math.imul(j,Ce),y=y+Math.imul(P,ee)|0,C=Math.imul(P,Ce),S=S+Math.imul(Ke,Se)|0,y=y+Math.imul(Ke,qe)|0,y=y+Math.imul(mt,Se)|0,C=C+Math.imul(mt,qe)|0,S=S+Math.imul(Le,We)|0,y=y+Math.imul(Le,dr)|0,y=y+Math.imul(ft,We)|0,C=C+Math.imul(ft,dr)|0,S=S+Math.imul(Ge,rt)|0,y=y+Math.imul(Ge,sr)|0,y=y+Math.imul(jt,rt)|0,C=C+Math.imul(jt,sr)|0,S=S+Math.imul(je,Qe)|0,y=y+Math.imul(je,or)|0,y=y+Math.imul(Vt,Qe)|0,C=C+Math.imul(Vt,or)|0,S=S+Math.imul(Ae,Ye)|0,y=y+Math.imul(Ae,Nr)|0,y=y+Math.imul(et,Ye)|0,C=C+Math.imul(et,Nr)|0,S=S+Math.imul(ie,nt)|0,y=y+Math.imul(ie,Tr)|0,y=y+Math.imul(ve,nt)|0,C=C+Math.imul(ve,Tr)|0,S=S+Math.imul(te,Je)|0,y=y+Math.imul(te,cr)|0,y=y+Math.imul(se,Je)|0,C=C+Math.imul(se,cr)|0,S=S+Math.imul(U,it)|0,y=y+Math.imul(U,Pr)|0,y=y+Math.imul(K,it)|0,C=C+Math.imul(K,Pr)|0;var ec=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(ec>>>26)|0,ec&=67108863,S=Math.imul(z,ee),y=Math.imul(z,Ce),y=y+Math.imul(G,ee)|0,C=Math.imul(G,Ce),S=S+Math.imul(j,Se)|0,y=y+Math.imul(j,qe)|0,y=y+Math.imul(P,Se)|0,C=C+Math.imul(P,qe)|0,S=S+Math.imul(Ke,We)|0,y=y+Math.imul(Ke,dr)|0,y=y+Math.imul(mt,We)|0,C=C+Math.imul(mt,dr)|0,S=S+Math.imul(Le,rt)|0,y=y+Math.imul(Le,sr)|0,y=y+Math.imul(ft,rt)|0,C=C+Math.imul(ft,sr)|0,S=S+Math.imul(Ge,Qe)|0,y=y+Math.imul(Ge,or)|0,y=y+Math.imul(jt,Qe)|0,C=C+Math.imul(jt,or)|0,S=S+Math.imul(je,Ye)|0,y=y+Math.imul(je,Nr)|0,y=y+Math.imul(Vt,Ye)|0,C=C+Math.imul(Vt,Nr)|0,S=S+Math.imul(Ae,nt)|0,y=y+Math.imul(Ae,Tr)|0,y=y+Math.imul(et,nt)|0,C=C+Math.imul(et,Tr)|0,S=S+Math.imul(ie,Je)|0,y=y+Math.imul(ie,cr)|0,y=y+Math.imul(ve,Je)|0,C=C+Math.imul(ve,cr)|0,S=S+Math.imul(te,it)|0,y=y+Math.imul(te,Pr)|0,y=y+Math.imul(se,it)|0,C=C+Math.imul(se,Pr)|0,S=S+Math.imul(U,st)|0,y=y+Math.imul(U,kr)|0,y=y+Math.imul(K,st)|0,C=C+Math.imul(K,kr)|0;var tc=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(tc>>>26)|0,tc&=67108863,S=Math.imul(z,Se),y=Math.imul(z,qe),y=y+Math.imul(G,Se)|0,C=Math.imul(G,qe),S=S+Math.imul(j,We)|0,y=y+Math.imul(j,dr)|0,y=y+Math.imul(P,We)|0,C=C+Math.imul(P,dr)|0,S=S+Math.imul(Ke,rt)|0,y=y+Math.imul(Ke,sr)|0,y=y+Math.imul(mt,rt)|0,C=C+Math.imul(mt,sr)|0,S=S+Math.imul(Le,Qe)|0,y=y+Math.imul(Le,or)|0,y=y+Math.imul(ft,Qe)|0,C=C+Math.imul(ft,or)|0,S=S+Math.imul(Ge,Ye)|0,y=y+Math.imul(Ge,Nr)|0,y=y+Math.imul(jt,Ye)|0,C=C+Math.imul(jt,Nr)|0,S=S+Math.imul(je,nt)|0,y=y+Math.imul(je,Tr)|0,y=y+Math.imul(Vt,nt)|0,C=C+Math.imul(Vt,Tr)|0,S=S+Math.imul(Ae,Je)|0,y=y+Math.imul(Ae,cr)|0,y=y+Math.imul(et,Je)|0,C=C+Math.imul(et,cr)|0,S=S+Math.imul(ie,it)|0,y=y+Math.imul(ie,Pr)|0,y=y+Math.imul(ve,it)|0,C=C+Math.imul(ve,Pr)|0,S=S+Math.imul(te,st)|0,y=y+Math.imul(te,kr)|0,y=y+Math.imul(se,st)|0,C=C+Math.imul(se,kr)|0;var rc=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(rc>>>26)|0,rc&=67108863,S=Math.imul(z,We),y=Math.imul(z,dr),y=y+Math.imul(G,We)|0,C=Math.imul(G,dr),S=S+Math.imul(j,rt)|0,y=y+Math.imul(j,sr)|0,y=y+Math.imul(P,rt)|0,C=C+Math.imul(P,sr)|0,S=S+Math.imul(Ke,Qe)|0,y=y+Math.imul(Ke,or)|0,y=y+Math.imul(mt,Qe)|0,C=C+Math.imul(mt,or)|0,S=S+Math.imul(Le,Ye)|0,y=y+Math.imul(Le,Nr)|0,y=y+Math.imul(ft,Ye)|0,C=C+Math.imul(ft,Nr)|0,S=S+Math.imul(Ge,nt)|0,y=y+Math.imul(Ge,Tr)|0,y=y+Math.imul(jt,nt)|0,C=C+Math.imul(jt,Tr)|0,S=S+Math.imul(je,Je)|0,y=y+Math.imul(je,cr)|0,y=y+Math.imul(Vt,Je)|0,C=C+Math.imul(Vt,cr)|0,S=S+Math.imul(Ae,it)|0,y=y+Math.imul(Ae,Pr)|0,y=y+Math.imul(et,it)|0,C=C+Math.imul(et,Pr)|0,S=S+Math.imul(ie,st)|0,y=y+Math.imul(ie,kr)|0,y=y+Math.imul(ve,st)|0,C=C+Math.imul(ve,kr)|0;var nc=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(nc>>>26)|0,nc&=67108863,S=Math.imul(z,rt),y=Math.imul(z,sr),y=y+Math.imul(G,rt)|0,C=Math.imul(G,sr),S=S+Math.imul(j,Qe)|0,y=y+Math.imul(j,or)|0,y=y+Math.imul(P,Qe)|0,C=C+Math.imul(P,or)|0,S=S+Math.imul(Ke,Ye)|0,y=y+Math.imul(Ke,Nr)|0,y=y+Math.imul(mt,Ye)|0,C=C+Math.imul(mt,Nr)|0,S=S+Math.imul(Le,nt)|0,y=y+Math.imul(Le,Tr)|0,y=y+Math.imul(ft,nt)|0,C=C+Math.imul(ft,Tr)|0,S=S+Math.imul(Ge,Je)|0,y=y+Math.imul(Ge,cr)|0,y=y+Math.imul(jt,Je)|0,C=C+Math.imul(jt,cr)|0,S=S+Math.imul(je,it)|0,y=y+Math.imul(je,Pr)|0,y=y+Math.imul(Vt,it)|0,C=C+Math.imul(Vt,Pr)|0,S=S+Math.imul(Ae,st)|0,y=y+Math.imul(Ae,kr)|0,y=y+Math.imul(et,st)|0,C=C+Math.imul(et,kr)|0;var so=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(so>>>26)|0,so&=67108863,S=Math.imul(z,Qe),y=Math.imul(z,or),y=y+Math.imul(G,Qe)|0,C=Math.imul(G,or),S=S+Math.imul(j,Ye)|0,y=y+Math.imul(j,Nr)|0,y=y+Math.imul(P,Ye)|0,C=C+Math.imul(P,Nr)|0,S=S+Math.imul(Ke,nt)|0,y=y+Math.imul(Ke,Tr)|0,y=y+Math.imul(mt,nt)|0,C=C+Math.imul(mt,Tr)|0,S=S+Math.imul(Le,Je)|0,y=y+Math.imul(Le,cr)|0,y=y+Math.imul(ft,Je)|0,C=C+Math.imul(ft,cr)|0,S=S+Math.imul(Ge,it)|0,y=y+Math.imul(Ge,Pr)|0,y=y+Math.imul(jt,it)|0,C=C+Math.imul(jt,Pr)|0,S=S+Math.imul(je,st)|0,y=y+Math.imul(je,kr)|0,y=y+Math.imul(Vt,st)|0,C=C+Math.imul(Vt,kr)|0;var ic=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(ic>>>26)|0,ic&=67108863,S=Math.imul(z,Ye),y=Math.imul(z,Nr),y=y+Math.imul(G,Ye)|0,C=Math.imul(G,Nr),S=S+Math.imul(j,nt)|0,y=y+Math.imul(j,Tr)|0,y=y+Math.imul(P,nt)|0,C=C+Math.imul(P,Tr)|0,S=S+Math.imul(Ke,Je)|0,y=y+Math.imul(Ke,cr)|0,y=y+Math.imul(mt,Je)|0,C=C+Math.imul(mt,cr)|0,S=S+Math.imul(Le,it)|0,y=y+Math.imul(Le,Pr)|0,y=y+Math.imul(ft,it)|0,C=C+Math.imul(ft,Pr)|0,S=S+Math.imul(Ge,st)|0,y=y+Math.imul(Ge,kr)|0,y=y+Math.imul(jt,st)|0,C=C+Math.imul(jt,kr)|0;var sc=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(sc>>>26)|0,sc&=67108863,S=Math.imul(z,nt),y=Math.imul(z,Tr),y=y+Math.imul(G,nt)|0,C=Math.imul(G,Tr),S=S+Math.imul(j,Je)|0,y=y+Math.imul(j,cr)|0,y=y+Math.imul(P,Je)|0,C=C+Math.imul(P,cr)|0,S=S+Math.imul(Ke,it)|0,y=y+Math.imul(Ke,Pr)|0,y=y+Math.imul(mt,it)|0,C=C+Math.imul(mt,Pr)|0,S=S+Math.imul(Le,st)|0,y=y+Math.imul(Le,kr)|0,y=y+Math.imul(ft,st)|0,C=C+Math.imul(ft,kr)|0;var Ai=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(Ai>>>26)|0,Ai&=67108863,S=Math.imul(z,Je),y=Math.imul(z,cr),y=y+Math.imul(G,Je)|0,C=Math.imul(G,cr),S=S+Math.imul(j,it)|0,y=y+Math.imul(j,Pr)|0,y=y+Math.imul(P,it)|0,C=C+Math.imul(P,Pr)|0,S=S+Math.imul(Ke,st)|0,y=y+Math.imul(Ke,kr)|0,y=y+Math.imul(mt,st)|0,C=C+Math.imul(mt,kr)|0;var oc=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(oc>>>26)|0,oc&=67108863,S=Math.imul(z,it),y=Math.imul(z,Pr),y=y+Math.imul(G,it)|0,C=Math.imul(G,Pr),S=S+Math.imul(j,st)|0,y=y+Math.imul(j,kr)|0,y=y+Math.imul(P,st)|0,C=C+Math.imul(P,kr)|0;var ac=(M+S|0)+((y&8191)<<13)|0;M=(C+(y>>>13)|0)+(ac>>>26)|0,ac&=67108863,S=Math.imul(z,st),y=Math.imul(z,kr),y=y+Math.imul(G,st)|0,C=Math.imul(G,kr);var cc=(M+S|0)+((y&8191)<<13)|0;return M=(C+(y>>>13)|0)+(cc>>>26)|0,cc&=67108863,N[0]=xt,N[1]=fr,N[2]=Ya,N[3]=Qa,N[4]=Za,N[5]=Ja,N[6]=Ki,N[7]=Xa,N[8]=ec,N[9]=tc,N[10]=rc,N[11]=nc,N[12]=so,N[13]=ic,N[14]=sc,N[15]=Ai,N[16]=oc,N[17]=ac,N[18]=cc,M!==0&&(N[19]=M,f.length++),f};Math.imul||(v=m);function $(R,E,b){b.negative=E.negative^R.negative,b.length=R.length+E.length;for(var f=0,p=0,w=0;w<b.length-1;w++){var N=p;p=0;for(var M=f&67108863,S=Math.min(w,E.length-1),y=Math.max(0,w-R.length+1);y<=S;y++){var C=w-y,I=R.words[C]|0,U=E.words[y]|0,K=I*U,V=K&67108863;N=N+(K/67108864|0)|0,V=V+M|0,M=V&67108863,N=N+(V>>>26)|0,p+=N>>>26,N&=67108863}b.words[w]=M,f=N,N=p}return f!==0?b.words[w]=f:b.length--,b.strip()}function _(R,E,b){var f=new x;return f.mulp(R,E,b)}s.prototype.mulTo=function(E,b){var f,p=this.length+E.length;return this.length===10&&E.length===10?f=v(this,E,b):p<63?f=m(this,E,b):p<1024?f=$(this,E,b):f=_(this,E,b),f};function x(R,E){this.x=R,this.y=E}x.prototype.makeRBT=function(E){for(var b=new Array(E),f=s.prototype._countBits(E)-1,p=0;p<E;p++)b[p]=this.revBin(p,f,E);return b},x.prototype.revBin=function(E,b,f){if(E===0||E===f-1)return E;for(var p=0,w=0;w<b;w++)p|=(E&1)<<b-w-1,E>>=1;return p},x.prototype.permute=function(E,b,f,p,w,N){for(var M=0;M<N;M++)p[M]=b[E[M]],w[M]=f[E[M]]},x.prototype.transform=function(E,b,f,p,w,N){this.permute(N,E,b,f,p,w);for(var M=1;M<w;M<<=1)for(var S=M<<1,y=Math.cos(2*Math.PI/S),C=Math.sin(2*Math.PI/S),I=0;I<w;I+=S)for(var U=y,K=C,V=0;V<M;V++){var te=f[I+V],se=p[I+V],ce=f[I+V+M],ie=p[I+V+M],ve=U*ce-K*ie;ie=U*ie+K*ce,ce=ve,f[I+V]=te+ce,p[I+V]=se+ie,f[I+V+M]=te-ce,p[I+V+M]=se-ie,V!==S&&(ve=y*U-C*K,K=y*K+C*U,U=ve)}},x.prototype.guessLen13b=function(E,b){var f=Math.max(b,E)|1,p=f&1,w=0;for(f=f/2|0;f;f=f>>>1)w++;return 1<<w+1+p},x.prototype.conjugate=function(E,b,f){if(!(f<=1))for(var p=0;p<f/2;p++){var w=E[p];E[p]=E[f-p-1],E[f-p-1]=w,w=b[p],b[p]=-b[f-p-1],b[f-p-1]=-w}},x.prototype.normalize13b=function(E,b){for(var f=0,p=0;p<b/2;p++){var w=Math.round(E[2*p+1]/b)*8192+Math.round(E[2*p]/b)+f;E[p]=w&67108863,w<67108864?f=0:f=w/67108864|0}return E},x.prototype.convert13b=function(E,b,f,p){for(var w=0,N=0;N<b;N++)w=w+(E[N]|0),f[2*N]=w&8191,w=w>>>13,f[2*N+1]=w&8191,w=w>>>13;for(N=2*b;N<p;++N)f[N]=0;n(w===0),n((w&-8192)===0)},x.prototype.stub=function(E){for(var b=new Array(E),f=0;f<E;f++)b[f]=0;return b},x.prototype.mulp=function(E,b,f){var p=2*this.guessLen13b(E.length,b.length),w=this.makeRBT(p),N=this.stub(p),M=new Array(p),S=new Array(p),y=new Array(p),C=new Array(p),I=new Array(p),U=new Array(p),K=f.words;K.length=p,this.convert13b(E.words,E.length,M,p),this.convert13b(b.words,b.length,C,p),this.transform(M,N,S,y,p,w),this.transform(C,N,I,U,p,w);for(var V=0;V<p;V++){var te=S[V]*I[V]-y[V]*U[V];y[V]=S[V]*U[V]+y[V]*I[V],S[V]=te}return this.conjugate(S,y,p),this.transform(S,y,K,N,p,w),this.conjugate(K,N,p),this.normalize13b(K,p),f.negative=E.negative^b.negative,f.length=E.length+b.length,f.strip()},s.prototype.mul=function(E){var b=new s(null);return b.words=new Array(this.length+E.length),this.mulTo(E,b)},s.prototype.mulf=function(E){var b=new s(null);return b.words=new Array(this.length+E.length),_(this,E,b)},s.prototype.imul=function(E){return this.clone().mulTo(E,this)},s.prototype.imuln=function(E){n(typeof E=="number"),n(E<67108864);for(var b=0,f=0;f<this.length;f++){var p=(this.words[f]|0)*E,w=(p&67108863)+(b&67108863);b>>=26,b+=p/67108864|0,b+=w>>>26,this.words[f]=w&67108863}return b!==0&&(this.words[f]=b,this.length++),this.length=E===0?1:this.length,this},s.prototype.muln=function(E){return this.clone().imuln(E)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(E){var b=g(E);if(b.length===0)return new s(1);for(var f=this,p=0;p<b.length&&b[p]===0;p++,f=f.sqr());if(++p<b.length)for(var w=f.sqr();p<b.length;p++,w=w.sqr())b[p]!==0&&(f=f.mul(w));return f},s.prototype.iushln=function(E){n(typeof E=="number"&&E>=0);var b=E%26,f=(E-b)/26,p=67108863>>>26-b<<26-b,w;if(b!==0){var N=0;for(w=0;w<this.length;w++){var M=this.words[w]&p,S=(this.words[w]|0)-M<<b;this.words[w]=S|N,N=M>>>26-b}N&&(this.words[w]=N,this.length++)}if(f!==0){for(w=this.length-1;w>=0;w--)this.words[w+f]=this.words[w];for(w=0;w<f;w++)this.words[w]=0;this.length+=f}return this.strip()},s.prototype.ishln=function(E){return n(this.negative===0),this.iushln(E)},s.prototype.iushrn=function(E,b,f){n(typeof E=="number"&&E>=0);var p;b?p=(b-b%26)/26:p=0;var w=E%26,N=Math.min((E-w)/26,this.length),M=67108863^67108863>>>w<<w,S=f;if(p-=N,p=Math.max(0,p),S){for(var y=0;y<N;y++)S.words[y]=this.words[y];S.length=N}if(N!==0)if(this.length>N)for(this.length-=N,y=0;y<this.length;y++)this.words[y]=this.words[y+N];else this.words[0]=0,this.length=1;var C=0;for(y=this.length-1;y>=0&&(C!==0||y>=p);y--){var I=this.words[y]|0;this.words[y]=C<<26-w|I>>>w,C=I&M}return S&&C!==0&&(S.words[S.length++]=C),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(E,b,f){return n(this.negative===0),this.iushrn(E,b,f)},s.prototype.shln=function(E){return this.clone().ishln(E)},s.prototype.ushln=function(E){return this.clone().iushln(E)},s.prototype.shrn=function(E){return this.clone().ishrn(E)},s.prototype.ushrn=function(E){return this.clone().iushrn(E)},s.prototype.testn=function(E){n(typeof E=="number"&&E>=0);var b=E%26,f=(E-b)/26,p=1<<b;if(this.length<=f)return!1;var w=this.words[f];return!!(w&p)},s.prototype.imaskn=function(E){n(typeof E=="number"&&E>=0);var b=E%26,f=(E-b)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(b!==0&&f++,this.length=Math.min(f,this.length),b!==0){var p=67108863^67108863>>>b<<b;this.words[this.length-1]&=p}return this.strip()},s.prototype.maskn=function(E){return this.clone().imaskn(E)},s.prototype.iaddn=function(E){return n(typeof E=="number"),n(E<67108864),E<0?this.isubn(-E):this.negative!==0?this.length===1&&(this.words[0]|0)<E?(this.words[0]=E-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(E),this.negative=1,this):this._iaddn(E)},s.prototype._iaddn=function(E){this.words[0]+=E;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},s.prototype.isubn=function(E){if(n(typeof E=="number"),n(E<67108864),E<0)return this.iaddn(-E);if(this.negative!==0)return this.negative=0,this.iaddn(E),this.negative=1,this;if(this.words[0]-=E,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},s.prototype.addn=function(E){return this.clone().iaddn(E)},s.prototype.subn=function(E){return this.clone().isubn(E)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(E,b,f){var p=E.length+f,w;this._expand(p);var N,M=0;for(w=0;w<E.length;w++){N=(this.words[w+f]|0)+M;var S=(E.words[w]|0)*b;N-=S&67108863,M=(N>>26)-(S/67108864|0),this.words[w+f]=N&67108863}for(;w<this.length-f;w++)N=(this.words[w+f]|0)+M,M=N>>26,this.words[w+f]=N&67108863;if(M===0)return this.strip();for(n(M===-1),M=0,w=0;w<this.length;w++)N=-(this.words[w]|0)+M,M=N>>26,this.words[w]=N&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(E,b){var f=this.length-E.length,p=this.clone(),w=E,N=w.words[w.length-1]|0,M=this._countBits(N);f=26-M,f!==0&&(w=w.ushln(f),p.iushln(f),N=w.words[w.length-1]|0);var S=p.length-w.length,y;if(b!=="mod"){y=new s(null),y.length=S+1,y.words=new Array(y.length);for(var C=0;C<y.length;C++)y.words[C]=0}var I=p.clone()._ishlnsubmul(w,1,S);I.negative===0&&(p=I,y&&(y.words[S]=1));for(var U=S-1;U>=0;U--){var K=(p.words[w.length+U]|0)*67108864+(p.words[w.length+U-1]|0);for(K=Math.min(K/N|0,67108863),p._ishlnsubmul(w,K,U);p.negative!==0;)K--,p.negative=0,p._ishlnsubmul(w,1,U),p.isZero()||(p.negative^=1);y&&(y.words[U]=K)}return y&&y.strip(),p.strip(),b!=="div"&&f!==0&&p.iushrn(f),{div:y||null,mod:p}},s.prototype.divmod=function(E,b,f){if(n(!E.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var p,w,N;return this.negative!==0&&E.negative===0?(N=this.neg().divmod(E,b),b!=="mod"&&(p=N.div.neg()),b!=="div"&&(w=N.mod.neg(),f&&w.negative!==0&&w.iadd(E)),{div:p,mod:w}):this.negative===0&&E.negative!==0?(N=this.divmod(E.neg(),b),b!=="mod"&&(p=N.div.neg()),{div:p,mod:N.mod}):this.negative&E.negative?(N=this.neg().divmod(E.neg(),b),b!=="div"&&(w=N.mod.neg(),f&&w.negative!==0&&w.isub(E)),{div:N.div,mod:w}):E.length>this.length||this.cmp(E)<0?{div:new s(0),mod:this}:E.length===1?b==="div"?{div:this.divn(E.words[0]),mod:null}:b==="mod"?{div:null,mod:new s(this.modn(E.words[0]))}:{div:this.divn(E.words[0]),mod:new s(this.modn(E.words[0]))}:this._wordDiv(E,b)},s.prototype.div=function(E){return this.divmod(E,"div",!1).div},s.prototype.mod=function(E){return this.divmod(E,"mod",!1).mod},s.prototype.umod=function(E){return this.divmod(E,"mod",!0).mod},s.prototype.divRound=function(E){var b=this.divmod(E);if(b.mod.isZero())return b.div;var f=b.div.negative!==0?b.mod.isub(E):b.mod,p=E.ushrn(1),w=E.andln(1),N=f.cmp(p);return N<0||w===1&&N===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},s.prototype.modn=function(E){n(E<=67108863);for(var b=(1<<26)%E,f=0,p=this.length-1;p>=0;p--)f=(b*f+(this.words[p]|0))%E;return f},s.prototype.idivn=function(E){n(E<=67108863);for(var b=0,f=this.length-1;f>=0;f--){var p=(this.words[f]|0)+b*67108864;this.words[f]=p/E|0,b=p%E}return this.strip()},s.prototype.divn=function(E){return this.clone().idivn(E)},s.prototype.egcd=function(E){n(E.negative===0),n(!E.isZero());var b=this,f=E.clone();b.negative!==0?b=b.umod(E):b=b.clone();for(var p=new s(1),w=new s(0),N=new s(0),M=new s(1),S=0;b.isEven()&&f.isEven();)b.iushrn(1),f.iushrn(1),++S;for(var y=f.clone(),C=b.clone();!b.isZero();){for(var I=0,U=1;!(b.words[0]&U)&&I<26;++I,U<<=1);if(I>0)for(b.iushrn(I);I-- >0;)(p.isOdd()||w.isOdd())&&(p.iadd(y),w.isub(C)),p.iushrn(1),w.iushrn(1);for(var K=0,V=1;!(f.words[0]&V)&&K<26;++K,V<<=1);if(K>0)for(f.iushrn(K);K-- >0;)(N.isOdd()||M.isOdd())&&(N.iadd(y),M.isub(C)),N.iushrn(1),M.iushrn(1);b.cmp(f)>=0?(b.isub(f),p.isub(N),w.isub(M)):(f.isub(b),N.isub(p),M.isub(w))}return{a:N,b:M,gcd:f.iushln(S)}},s.prototype._invmp=function(E){n(E.negative===0),n(!E.isZero());var b=this,f=E.clone();b.negative!==0?b=b.umod(E):b=b.clone();for(var p=new s(1),w=new s(0),N=f.clone();b.cmpn(1)>0&&f.cmpn(1)>0;){for(var M=0,S=1;!(b.words[0]&S)&&M<26;++M,S<<=1);if(M>0)for(b.iushrn(M);M-- >0;)p.isOdd()&&p.iadd(N),p.iushrn(1);for(var y=0,C=1;!(f.words[0]&C)&&y<26;++y,C<<=1);if(y>0)for(f.iushrn(y);y-- >0;)w.isOdd()&&w.iadd(N),w.iushrn(1);b.cmp(f)>=0?(b.isub(f),p.isub(w)):(f.isub(b),w.isub(p))}var I;return b.cmpn(1)===0?I=p:I=w,I.cmpn(0)<0&&I.iadd(E),I},s.prototype.gcd=function(E){if(this.isZero())return E.abs();if(E.isZero())return this.abs();var b=this.clone(),f=E.clone();b.negative=0,f.negative=0;for(var p=0;b.isEven()&&f.isEven();p++)b.iushrn(1),f.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;f.isEven();)f.iushrn(1);var w=b.cmp(f);if(w<0){var N=b;b=f,f=N}else if(w===0||f.cmpn(1)===0)break;b.isub(f)}while(!0);return f.iushln(p)},s.prototype.invm=function(E){return this.egcd(E).a.umod(E)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(E){return this.words[0]&E},s.prototype.bincn=function(E){n(typeof E=="number");var b=E%26,f=(E-b)/26,p=1<<b;if(this.length<=f)return this._expand(f+1),this.words[f]|=p,this;for(var w=p,N=f;w!==0&&N<this.length;N++){var M=this.words[N]|0;M+=w,w=M>>>26,M&=67108863,this.words[N]=M}return w!==0&&(this.words[N]=w,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(E){var b=E<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var f;if(this.length>1)f=1;else{b&&(E=-E),n(E<=67108863,"Number is too big");var p=this.words[0]|0;f=p===E?0:p<E?-1:1}return this.negative!==0?-f|0:f},s.prototype.cmp=function(E){if(this.negative!==0&&E.negative===0)return-1;if(this.negative===0&&E.negative!==0)return 1;var b=this.ucmp(E);return this.negative!==0?-b|0:b},s.prototype.ucmp=function(E){if(this.length>E.length)return 1;if(this.length<E.length)return-1;for(var b=0,f=this.length-1;f>=0;f--){var p=this.words[f]|0,w=E.words[f]|0;if(p!==w){p<w?b=-1:p>w&&(b=1);break}}return b},s.prototype.gtn=function(E){return this.cmpn(E)===1},s.prototype.gt=function(E){return this.cmp(E)===1},s.prototype.gten=function(E){return this.cmpn(E)>=0},s.prototype.gte=function(E){return this.cmp(E)>=0},s.prototype.ltn=function(E){return this.cmpn(E)===-1},s.prototype.lt=function(E){return this.cmp(E)===-1},s.prototype.lten=function(E){return this.cmpn(E)<=0},s.prototype.lte=function(E){return this.cmp(E)<=0},s.prototype.eqn=function(E){return this.cmpn(E)===0},s.prototype.eq=function(E){return this.cmp(E)===0},s.red=function(E){return new B(E)},s.prototype.toRed=function(E){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),E.convertTo(this)._forceRed(E)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(E){return this.red=E,this},s.prototype.forceRed=function(E){return n(!this.red,"Already a number in reduction context"),this._forceRed(E)},s.prototype.redAdd=function(E){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,E)},s.prototype.redIAdd=function(E){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,E)},s.prototype.redSub=function(E){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,E)},s.prototype.redISub=function(E){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,E)},s.prototype.redShl=function(E){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,E)},s.prototype.redMul=function(E){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.mul(this,E)},s.prototype.redIMul=function(E){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.imul(this,E)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(E){return n(this.red&&!E.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,E)};var A={k256:null,p224:null,p192:null,p25519:null};function T(R,E){this.name=R,this.p=new s(E,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}T.prototype._tmp=function(){var E=new s(null);return E.words=new Array(Math.ceil(this.n/13)),E},T.prototype.ireduce=function(E){var b=E,f;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),f=b.bitLength();while(f>this.n);var p=f<this.n?-1:b.ucmp(this.p);return p===0?(b.words[0]=0,b.length=1):p>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},T.prototype.split=function(E,b){E.iushrn(this.n,0,b)},T.prototype.imulK=function(E){return E.imul(this.k)};function k(){T.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(k,T),k.prototype.split=function(E,b){for(var f=4194303,p=Math.min(E.length,9),w=0;w<p;w++)b.words[w]=E.words[w];if(b.length=p,E.length<=9){E.words[0]=0,E.length=1;return}var N=E.words[9];for(b.words[b.length++]=N&f,w=10;w<E.length;w++){var M=E.words[w]|0;E.words[w-10]=(M&f)<<4|N>>>22,N=M}N>>>=22,E.words[w-10]=N,N===0&&E.length>10?E.length-=10:E.length-=9},k.prototype.imulK=function(E){E.words[E.length]=0,E.words[E.length+1]=0,E.length+=2;for(var b=0,f=0;f<E.length;f++){var p=E.words[f]|0;b+=p*977,E.words[f]=b&67108863,b=p*64+(b/67108864|0)}return E.words[E.length-1]===0&&(E.length--,E.words[E.length-1]===0&&E.length--),E};function D(){T.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(D,T);function L(){T.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(L,T);function F(){T.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(F,T),F.prototype.imulK=function(E){for(var b=0,f=0;f<E.length;f++){var p=(E.words[f]|0)*19+b,w=p&67108863;p>>>=26,E.words[f]=w,b=p}return b!==0&&(E.words[E.length++]=b),E},s._prime=function(E){if(A[E])return A[E];var b;if(E==="k256")b=new k;else if(E==="p224")b=new D;else if(E==="p192")b=new L;else if(E==="p25519")b=new F;else throw new Error("Unknown prime "+E);return A[E]=b,b};function B(R){if(typeof R=="string"){var E=s._prime(R);this.m=E.p,this.prime=E}else n(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}B.prototype._verify1=function(E){n(E.negative===0,"red works only with positives"),n(E.red,"red works only with red numbers")},B.prototype._verify2=function(E,b){n((E.negative|b.negative)===0,"red works only with positives"),n(E.red&&E.red===b.red,"red works only with red numbers")},B.prototype.imod=function(E){return this.prime?this.prime.ireduce(E)._forceRed(this):E.umod(this.m)._forceRed(this)},B.prototype.neg=function(E){return E.isZero()?E.clone():this.m.sub(E)._forceRed(this)},B.prototype.add=function(E,b){this._verify2(E,b);var f=E.add(b);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},B.prototype.iadd=function(E,b){this._verify2(E,b);var f=E.iadd(b);return f.cmp(this.m)>=0&&f.isub(this.m),f},B.prototype.sub=function(E,b){this._verify2(E,b);var f=E.sub(b);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},B.prototype.isub=function(E,b){this._verify2(E,b);var f=E.isub(b);return f.cmpn(0)<0&&f.iadd(this.m),f},B.prototype.shl=function(E,b){return this._verify1(E),this.imod(E.ushln(b))},B.prototype.imul=function(E,b){return this._verify2(E,b),this.imod(E.imul(b))},B.prototype.mul=function(E,b){return this._verify2(E,b),this.imod(E.mul(b))},B.prototype.isqr=function(E){return this.imul(E,E.clone())},B.prototype.sqr=function(E){return this.mul(E,E)},B.prototype.sqrt=function(E){if(E.isZero())return E.clone();var b=this.m.andln(3);if(n(b%2===1),b===3){var f=this.m.add(new s(1)).iushrn(2);return this.pow(E,f)}for(var p=this.m.subn(1),w=0;!p.isZero()&&p.andln(1)===0;)w++,p.iushrn(1);n(!p.isZero());var N=new s(1).toRed(this),M=N.redNeg(),S=this.m.subn(1).iushrn(1),y=this.m.bitLength();for(y=new s(2*y*y).toRed(this);this.pow(y,S).cmp(M)!==0;)y.redIAdd(M);for(var C=this.pow(y,p),I=this.pow(E,p.addn(1).iushrn(1)),U=this.pow(E,p),K=w;U.cmp(N)!==0;){for(var V=U,te=0;V.cmp(N)!==0;te++)V=V.redSqr();n(te<K);var se=this.pow(C,new s(1).iushln(K-te-1));I=I.redMul(se),C=se.redSqr(),U=U.redMul(C),K=te}return I},B.prototype.invm=function(E){var b=E._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},B.prototype.pow=function(E,b){if(b.isZero())return new s(1).toRed(this);if(b.cmpn(1)===0)return E.clone();var f=4,p=new Array(1<<f);p[0]=new s(1).toRed(this),p[1]=E;for(var w=2;w<p.length;w++)p[w]=this.mul(p[w-1],E);var N=p[0],M=0,S=0,y=b.bitLength()%26;for(y===0&&(y=26),w=b.length-1;w>=0;w--){for(var C=b.words[w],I=y-1;I>=0;I--){var U=C>>I&1;if(N!==p[0]&&(N=this.sqr(N)),U===0&&M===0){S=0;continue}M<<=1,M|=U,S++,!(S!==f&&(w!==0||I!==0))&&(N=this.mul(N,p[M]),S=0,M=0)}y=26}return N},B.prototype.convertTo=function(E){var b=E.umod(this.m);return b===E?b.clone():b},B.prototype.convertFrom=function(E){var b=E.clone();return b.red=null,b},s.mont=function(E){return new q(E)};function q(R){B.call(this,R),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(q,B),q.prototype.convertTo=function(E){return this.imod(E.ushln(this.shift))},q.prototype.convertFrom=function(E){var b=this.imod(E.mul(this.rinv));return b.red=null,b},q.prototype.imul=function(E,b){if(E.isZero()||b.isZero())return E.words[0]=0,E.length=1,E;var f=E.imul(b),p=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=f.isub(p).iushrn(this.shift),N=w;return w.cmp(this.m)>=0?N=w.isub(this.m):w.cmpn(0)<0&&(N=w.iadd(this.m)),N._forceRed(this)},q.prototype.mul=function(E,b){if(E.isZero()||b.isZero())return new s(0)._forceRed(this);var f=E.mul(b),p=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=f.isub(p).iushrn(this.shift),N=w;return w.cmp(this.m)>=0?N=w.isub(this.m):w.cmpn(0)<0&&(N=w.iadd(this.m)),N._forceRed(this)},q.prototype.invm=function(E){var b=this.imod(E._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(t,_r)})(QI);var nl=QI.exports,Zh=dR;function dR(t,e){if(!t)throw new Error(e||"Assertion failed")}dR.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var ZI={};(function(t){var e=t;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if(typeof s!="string"){for(var c=0;c<s.length;c++)a[c]=s[c]|0;return a}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var c=0;c<s.length;c+=2)a.push(parseInt(s[c]+s[c+1],16))}else for(var c=0;c<s.length;c++){var l=s.charCodeAt(c),u=l>>8,h=l&255;u?a.push(u,h):a.push(h)}return a}e.toArray=r;function n(s){return s.length===1?"0"+s:s}e.zero2=n;function i(s){for(var o="",a=0;a<s.length;a++)o+=n(s[a].toString(16));return o}e.toHex=i,e.encode=function(o,a){return a==="hex"?i(o):o}})(ZI);(function(t){var e=t,r=nl,n=Zh,i=ZI;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function s(u,h,d){var g=new Array(Math.max(u.bitLength(),d)+1),m;for(m=0;m<g.length;m+=1)g[m]=0;var v=1<<h+1,$=u.clone();for(m=0;m<g.length;m++){var _,x=$.andln(v-1);$.isOdd()?(x>(v>>1)-1?_=(v>>1)-x:_=x,$.isubn(_)):_=0,g[m]=_,$.iushrn(1)}return g}e.getNAF=s;function o(u,h){var d=[[],[]];u=u.clone(),h=h.clone();for(var g=0,m=0,v;u.cmpn(-g)>0||h.cmpn(-m)>0;){var $=u.andln(3)+g&3,_=h.andln(3)+m&3;$===3&&($=-1),_===3&&(_=-1);var x;$&1?(v=u.andln(7)+g&7,(v===3||v===5)&&_===2?x=-$:x=$):x=0,d[0].push(x);var A;_&1?(v=h.andln(7)+m&7,(v===3||v===5)&&$===2?A=-_:A=_):A=0,d[1].push(A),2*g===x+1&&(g=1-g),2*m===A+1&&(m=1-m),u.iushrn(1),h.iushrn(1)}return d}e.getJSF=o;function a(u,h,d){var g="_"+h;u.prototype[h]=function(){return this[g]!==void 0?this[g]:this[g]=d.call(this)}}e.cachedProperty=a;function c(u){return typeof u=="string"?e.toArray(u,"hex"):u}e.parseBytes=c;function l(u){return new r(u,"hex","le")}e.intFromLE=l})(ro);var JI={exports:{}},HE;JI.exports=function(e){return HE||(HE=new ql(null)),HE.generate(e)};function ql(t){this.rand=t}JI.exports.Rand=ql;ql.prototype.generate=function(e){return this._rand(e)};ql.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?ql.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?ql.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(ql.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var tC=oI;if(typeof tC.randomBytes!="function")throw new Error("Not supported");ql.prototype._rand=function(e){return tC.randomBytes(e)}}catch{}var fR=JI.exports,XI={},Cu=nl,cy=ro,Lb=cy.getNAF,yne=cy.getJSF,Bb=cy.assert;function bu(t,e){this.type=t,this.p=new Cu(e.p,16),this.red=e.prime?Cu.red(e.prime):Cu.mont(this.p),this.zero=new Cu(0).toRed(this.red),this.one=new Cu(1).toRed(this.red),this.two=new Cu(2).toRed(this.red),this.n=e.n&&new Cu(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Vv=bu;bu.prototype.point=function(){throw new Error("Not implemented")};bu.prototype.validate=function(){throw new Error("Not implemented")};bu.prototype._fixedNafMul=function(e,r){Bb(e.precomputed);var n=e._getDoubles(),i=Lb(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var l=a+n.step-1;l>=a;l--)c=(c<<1)+i[l];o.push(c)}for(var u=this.jpoint(null,null,null),h=this.jpoint(null,null,null),d=s;d>0;d--){for(a=0;a<o.length;a++)c=o[a],c===d?h=h.mixedAdd(n.points[a]):c===-d&&(h=h.mixedAdd(n.points[a].neg()));u=u.add(h)}return u.toP()};bu.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Lb(r,n,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var l=0;c>=0&&o[c]===0;c--)l++;if(c>=0&&l++,a=a.dblp(l),c<0)break;var u=o[c];Bb(u!==0),e.type==="affine"?u>0?a=a.mixedAdd(s[u-1>>1]):a=a.mixedAdd(s[-u-1>>1].neg()):u>0?a=a.add(s[u-1>>1]):a=a.add(s[-u-1>>1].neg())}return e.type==="affine"?a.toP():a};bu.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,l=0,u,h,d;for(u=0;u<i;u++){d=r[u];var g=d._getNAFPoints(e);o[u]=g.wnd,a[u]=g.points}for(u=i-1;u>=1;u-=2){var m=u-1,v=u;if(o[m]!==1||o[v]!==1){c[m]=Lb(n[m],o[m],this._bitLength),c[v]=Lb(n[v],o[v],this._bitLength),l=Math.max(c[m].length,l),l=Math.max(c[v].length,l);continue}var $=[r[m],null,null,r[v]];r[m].y.cmp(r[v].y)===0?($[1]=r[m].add(r[v]),$[2]=r[m].toJ().mixedAdd(r[v].neg())):r[m].y.cmp(r[v].y.redNeg())===0?($[1]=r[m].toJ().mixedAdd(r[v]),$[2]=r[m].add(r[v].neg())):($[1]=r[m].toJ().mixedAdd(r[v]),$[2]=r[m].toJ().mixedAdd(r[v].neg()));var _=[-3,-1,-5,-7,0,7,5,1,3],x=yne(n[m],n[v]);for(l=Math.max(x[0].length,l),c[m]=new Array(l),c[v]=new Array(l),h=0;h<l;h++){var A=x[0][h]|0,T=x[1][h]|0;c[m][h]=_[(A+1)*3+(T+1)],c[v][h]=0,a[m]=$}}var k=this.jpoint(null,null,null),D=this._wnafT4;for(u=l;u>=0;u--){for(var L=0;u>=0;){var F=!0;for(h=0;h<i;h++)D[h]=c[h][u]|0,D[h]!==0&&(F=!1);if(!F)break;L++,u--}if(u>=0&&L++,k=k.dblp(L),u<0)break;for(h=0;h<i;h++){var B=D[h];B!==0&&(B>0?d=a[h][B-1>>1]:B<0&&(d=a[h][-B-1>>1].neg()),d.type==="affine"?k=k.mixedAdd(d):k=k.add(d))}}for(u=0;u<i;u++)a[u]=null;return s?k:k.toP()};function $o(t,e){this.curve=t,this.type=e,this.precomputed=null}bu.BasePoint=$o;$o.prototype.eq=function(){throw new Error("Not implemented")};$o.prototype.validate=function(){return this.curve.validate(this)};bu.prototype.decodePoint=function(e,r){e=cy.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Bb(e[e.length-1]%2===0):e[0]===7&&Bb(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};$o.prototype.encodeCompressed=function(e){return this.encode(e,!0)};$o.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};$o.prototype.encode=function(e,r){return cy.encode(this._encode(r),e)};$o.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};$o.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};$o.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};$o.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};$o.prototype._getBeta=function(){return null};$o.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var GS={exports:{}};typeof Object.create=="function"?GS.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:GS.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var Gv=GS.exports,wne=ro,un=nl,e5=Gv,Fp=Vv,bne=wne.assert;function Po(t){Fp.call(this,"short",t),this.a=new un(t.a,16).toRed(this.red),this.b=new un(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}e5(Po,Fp);var vne=Po;Po.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new un(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new un(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],bne(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new un(a.a,16),b:new un(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};Po.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:un.mont(e),n=new un(2).toRed(r).redInvm(),i=n.redNeg(),s=new un(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};Po.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new un(1),o=new un(0),a=new un(0),c=new un(1),l,u,h,d,g,m,v,$=0,_,x;n.cmpn(0)!==0;){var A=i.div(n);_=i.sub(A.mul(n)),x=a.sub(A.mul(s));var T=c.sub(A.mul(o));if(!h&&_.cmp(r)<0)l=v.neg(),u=s,h=_.neg(),d=x;else if(h&&++$===2)break;v=_,i=n,n=_,a=s,s=x,c=o,o=T}g=_.neg(),m=x;var k=h.sqr().add(d.sqr()),D=g.sqr().add(m.sqr());return D.cmp(k)>=0&&(g=l,m=u),h.negative&&(h=h.neg(),d=d.neg()),g.negative&&(g=g.neg(),m=m.neg()),[{a:h,b:d},{a:g,b:m}]};Po.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),c=o.mul(i.a),l=s.mul(n.b),u=o.mul(i.b),h=e.sub(a).sub(c),d=l.add(u).neg();return{k1:h,k2:d}};Po.prototype.pointFromX=function(e,r){e=new un(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};Po.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};Po.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],l=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=c,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var u=this._wnafMulAdd(1,i,s,o*2,n),h=0;h<o*2;h++)i[h]=null,s[h]=null;return u};function ei(t,e,r,n){Fp.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new un(e,16),this.y=new un(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}e5(ei,Fp.BasePoint);Po.prototype.point=function(e,r,n){return new ei(this,e,r,n)};Po.prototype.pointFromJSON=function(e,r){return ei.fromJSON(this,e,r)};ei.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};ei.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};ei.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};ei.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};ei.prototype.isInfinity=function(){return this.inf};ei.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};ei.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};ei.prototype.getX=function(){return this.x.fromRed()};ei.prototype.getY=function(){return this.y.fromRed()};ei.prototype.mul=function(e){return e=new un(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};ei.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};ei.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};ei.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};ei.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};ei.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Si(t,e,r,n){Fp.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new un(0)):(this.x=new un(e,16),this.y=new un(r,16),this.z=new un(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}e5(Si,Fp.BasePoint);Po.prototype.jpoint=function(e,r,n){return new Si(this,e,r,n)};Si.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};Si.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Si.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),l=o.redSub(a);if(c.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=c.redSqr(),h=u.redMul(c),d=i.redMul(u),g=l.redSqr().redIAdd(h).redISub(d).redISub(d),m=l.redMul(d.redISub(g)).redISub(o.redMul(h)),v=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(g,m,v)};Si.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),u=l.redMul(a),h=n.redMul(l),d=c.redSqr().redIAdd(u).redISub(h).redISub(h),g=c.redMul(h.redISub(d)).redISub(s.redMul(u)),m=this.z.redMul(a);return this.curve.jpoint(d,g,m)};Si.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,l=c.redSqr().redSqr(),u=a.redAdd(a);for(r=0;r<e;r++){var h=o.redSqr(),d=u.redSqr(),g=d.redSqr(),m=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(l)),v=o.redMul(d),$=m.redSqr().redISub(v.redAdd(v)),_=v.redISub($),x=m.redMul(_);x=x.redIAdd(x).redISub(g);var A=u.redMul(c);r+1<e&&(l=l.redMul(g)),o=$,c=A,u=x}return this.curve.jpoint(o,u.redMul(s),c)};Si.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Si.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),l=c.redSqr().redISub(a).redISub(a),u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),e=l,r=c.redMul(a.redISub(l)).redISub(u),n=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),d=this.y.redSqr(),g=d.redSqr(),m=this.x.redAdd(d).redSqr().redISub(h).redISub(g);m=m.redIAdd(m);var v=h.redAdd(h).redIAdd(h),$=v.redSqr(),_=g.redIAdd(g);_=_.redIAdd(_),_=_.redIAdd(_),e=$.redISub(m).redISub(m),r=v.redMul(m.redISub(e)).redISub(_),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};Si.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=c.redSqr().redISub(a).redISub(a);e=l;var u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),r=c.redMul(a.redISub(l)).redISub(u),n=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),d=this.y.redSqr(),g=this.x.redMul(d),m=this.x.redSub(h).redMul(this.x.redAdd(h));m=m.redAdd(m).redIAdd(m);var v=g.redIAdd(g);v=v.redIAdd(v);var $=v.redAdd(v);e=m.redSqr().redISub($),n=this.y.redAdd(this.z).redSqr().redISub(d).redISub(h);var _=d.redSqr();_=_.redIAdd(_),_=_.redIAdd(_),_=_.redIAdd(_),r=m.redMul(v.redISub(e)).redISub(_)}return this.curve.jpoint(e,r,n)};Si.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=r.redAdd(r);l=l.redIAdd(l);var u=l.redMul(a),h=c.redSqr().redISub(u.redAdd(u)),d=u.redISub(h),g=a.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var m=c.redMul(d).redISub(g),v=n.redAdd(n).redMul(i);return this.curve.jpoint(h,m,v)};Si.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var u=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(l),h=r.redMul(u);h=h.redIAdd(h),h=h.redIAdd(h);var d=this.x.redMul(c).redISub(h);d=d.redIAdd(d),d=d.redIAdd(d);var g=this.y.redMul(u.redMul(l.redISub(u)).redISub(a.redMul(c)));g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var m=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(d,g,m)};Si.prototype.mul=function(e,r){return e=new un(e,r),this.curve._wnafMul(this,e)};Si.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};Si.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};Si.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Si.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var $f=nl,pR=Gv,Yv=Vv,Ene=ro;function zp(t){Yv.call(this,"mont",t),this.a=new $f(t.a,16).toRed(this.red),this.b=new $f(t.b,16).toRed(this.red),this.i4=new $f(4).toRed(this.red).redInvm(),this.two=new $f(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}pR(zp,Yv);var _ne=zp;zp.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),s=i.redSqrt();return s.redSqr().cmp(i)===0};function Xn(t,e,r){Yv.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new $f(e,16),this.z=new $f(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}pR(Xn,Yv.BasePoint);zp.prototype.decodePoint=function(e,r){return this.point(Ene.toArray(e,r),1)};zp.prototype.point=function(e,r){return new Xn(this,e,r)};zp.prototype.pointFromJSON=function(e){return Xn.fromJSON(this,e)};Xn.prototype.precompute=function(){};Xn.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Xn.fromJSON=function(e,r){return new Xn(e,r[0],r[1]||e.one)};Xn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Xn.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Xn.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=r.redSub(i),o=r.redMul(i),a=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)};Xn.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Xn.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(n),c=s.redMul(i),l=r.z.redMul(a.redAdd(c).redSqr()),u=r.x.redMul(a.redISub(c).redSqr());return this.curve.point(l,u)};Xn.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i};Xn.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Xn.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Xn.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Xn.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Xn.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Sne=ro,Bc=nl,gR=Gv,Qv=Vv,xne=Sne.assert;function Ka(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Qv.call(this,"edwards",t),this.a=new Bc(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Bc(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Bc(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),xne(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}gR(Ka,Qv);var Ine=Ka;Ka.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Ka.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Ka.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)};Ka.prototype.pointFromX=function(e,r){e=new Bc(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var c=a.fromRed().isOdd();return(r&&!c||!r&&c)&&(a=a.redNeg()),this.point(e,a)};Ka.prototype.pointFromY=function(e,r){e=new Bc(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)};Ka.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function Ar(t,e,r,n,i){Qv.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Bc(e,16),this.y=new Bc(r,16),this.z=n?new Bc(n,16):this.curve.one,this.t=i&&new Bc(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}gR(Ar,Qv.BasePoint);Ka.prototype.pointFromJSON=function(e){return Ar.fromJSON(this,e)};Ka.prototype.point=function(e,r,n,i){return new Ar(this,e,r,n,i)};Ar.fromJSON=function(e,r){return new Ar(e,r[0],r[1],r[2])};Ar.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Ar.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Ar.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=i.redAdd(r),a=o.redSub(n),c=i.redSub(r),l=s.redMul(a),u=o.redMul(c),h=s.redMul(c),d=a.redMul(o);return this.curve.point(l,u,d,h)};Ar.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,s,o,a,c,l;if(this.curve.twisted){a=this.curve._mulA(r);var u=a.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(u.redSub(this.curve.two)),s=u.redMul(a.redSub(n)),o=u.redSqr().redSub(u).redSub(u)):(c=this.z.redSqr(),l=u.redSub(c).redISub(c),i=e.redSub(r).redISub(n).redMul(l),s=u.redMul(a.redSub(n)),o=u.redMul(l))}else a=r.redAdd(n),c=this.curve._mulC(this.z).redSqr(),l=a.redSub(c).redSub(c),i=this.curve._mulC(e.redISub(a)).redMul(l),s=this.curve._mulC(a).redMul(r.redISub(n)),o=a.redMul(l);return this.curve.point(i,s,o)};Ar.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Ar.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(r),a=s.redSub(i),c=s.redAdd(i),l=n.redAdd(r),u=o.redMul(a),h=c.redMul(l),d=o.redMul(l),g=a.redMul(c);return this.curve.point(u,h,g,d)};Ar.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(s),a=n.redSub(o),c=n.redAdd(o),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),u=r.redMul(a).redMul(l),h,d;return this.curve.twisted?(h=r.redMul(c).redMul(s.redSub(this.curve._mulA(i))),d=a.redMul(c)):(h=r.redMul(c).redMul(s.redSub(i)),d=this.curve._mulC(a).redMul(c)),this.curve.point(u,h,d)};Ar.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Ar.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Ar.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};Ar.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};Ar.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Ar.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Ar.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Ar.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Ar.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Ar.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};Ar.prototype.toP=Ar.prototype.normalize;Ar.prototype.mixedAdd=Ar.prototype.add;(function(t){var e=t;e.base=Vv,e.short=vne,e.mont=_ne,e.edwards=Ine})(XI);var Zv={},Jv={},bt={},Ane=Zh,Cne=Gv;bt.inherits=Cne;function Nne(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function Mne(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):Nne(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}bt.toArray=Mne;function Tne(t){for(var e="",r=0;r<t.length;r++)e+=yR(t[r].toString(16));return e}bt.toHex=Tne;function mR(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}bt.htonl=mR;function $ne(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=mR(i)),r+=wR(i.toString(16))}return r}bt.toHex32=$ne;function yR(t){return t.length===1?"0"+t:t}bt.zero2=yR;function wR(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}bt.zero8=wR;function Pne(t,e,r,n){var i=r-e;Ane(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var c;n==="big"?c=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:c=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=c>>>0}return s}bt.join32=Pne;function One(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];e==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}bt.split32=One;function kne(t,e){return t>>>e|t<<32-e}bt.rotr32=kne;function Rne(t,e){return t<<e|t>>>32-e}bt.rotl32=Rne;function Dne(t,e){return t+e>>>0}bt.sum32=Dne;function Lne(t,e,r){return t+e+r>>>0}bt.sum32_3=Lne;function Bne(t,e,r,n){return t+e+r+n>>>0}bt.sum32_4=Bne;function Une(t,e,r,n,i){return t+e+r+n+i>>>0}bt.sum32_5=Une;function jne(t,e,r,n){var i=t[e],s=t[e+1],o=n+s>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o}bt.sum64=jne;function Fne(t,e,r,n){var i=e+n>>>0,s=(i<e?1:0)+t+r;return s>>>0}bt.sum64_hi=Fne;function zne(t,e,r,n){var i=e+n;return i>>>0}bt.sum64_lo=zne;function qne(t,e,r,n,i,s,o,a){var c=0,l=e;l=l+n>>>0,c+=l<e?1:0,l=l+s>>>0,c+=l<s?1:0,l=l+a>>>0,c+=l<a?1:0;var u=t+r+i+o+c;return u>>>0}bt.sum64_4_hi=qne;function Wne(t,e,r,n,i,s,o,a){var c=e+n+s+a;return c>>>0}bt.sum64_4_lo=Wne;function Hne(t,e,r,n,i,s,o,a,c,l){var u=0,h=e;h=h+n>>>0,u+=h<e?1:0,h=h+s>>>0,u+=h<s?1:0,h=h+a>>>0,u+=h<a?1:0,h=h+l>>>0,u+=h<l?1:0;var d=t+r+i+o+c+u;return d>>>0}bt.sum64_5_hi=Hne;function Kne(t,e,r,n,i,s,o,a,c,l){var u=e+n+s+a+l;return u>>>0}bt.sum64_5_lo=Kne;function Vne(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}bt.rotr64_hi=Vne;function Gne(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}bt.rotr64_lo=Gne;function Yne(t,e,r){return t>>>r}bt.shr64_hi=Yne;function Qne(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}bt.shr64_lo=Qne;var qp={},rC=bt,Zne=Zh;function Xv(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}qp.BlockHash=Xv;Xv.prototype.update=function(e,r){if(e=rC.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=rC.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};Xv.prototype.digest=function(e){return this.update(this._pad()),Zne(this.pending===null),this._digest(e)};Xv.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var Wp={},Va={},Jne=bt,$a=Jne.rotr32;function Xne(t,e,r,n){if(t===0)return bR(e,r,n);if(t===1||t===3)return ER(e,r,n);if(t===2)return vR(e,r,n)}Va.ft_1=Xne;function bR(t,e,r){return t&e^~t&r}Va.ch32=bR;function vR(t,e,r){return t&e^t&r^e&r}Va.maj32=vR;function ER(t,e,r){return t^e^r}Va.p32=ER;function eie(t){return $a(t,2)^$a(t,13)^$a(t,22)}Va.s0_256=eie;function tie(t){return $a(t,6)^$a(t,11)^$a(t,25)}Va.s1_256=tie;function rie(t){return $a(t,7)^$a(t,18)^t>>>3}Va.g0_256=rie;function nie(t){return $a(t,17)^$a(t,19)^t>>>10}Va.g1_256=nie;var pp=bt,iie=qp,sie=Va,KE=pp.rotl32,b0=pp.sum32,oie=pp.sum32_5,aie=sie.ft_1,_R=iie.BlockHash,cie=[1518500249,1859775393,2400959708,3395469782];function Da(){if(!(this instanceof Da))return new Da;_R.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}pp.inherits(Da,_R);var lie=Da;Da.blockSize=512;Da.outSize=160;Da.hmacStrength=80;Da.padLength=64;Da.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=KE(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4];for(i=0;i<n.length;i++){var u=~~(i/20),h=oie(KE(s,5),aie(u,o,a,c),l,n[i],cie[u]);l=c,c=a,a=KE(o,30),o=s,s=h}this.h[0]=b0(this.h[0],s),this.h[1]=b0(this.h[1],o),this.h[2]=b0(this.h[2],a),this.h[3]=b0(this.h[3],c),this.h[4]=b0(this.h[4],l)};Da.prototype._digest=function(e){return e==="hex"?pp.toHex32(this.h,"big"):pp.split32(this.h,"big")};var gp=bt,uie=qp,Hp=Va,hie=Zh,Bo=gp.sum32,die=gp.sum32_4,fie=gp.sum32_5,pie=Hp.ch32,gie=Hp.maj32,mie=Hp.s0_256,yie=Hp.s1_256,wie=Hp.g0_256,bie=Hp.g1_256,SR=uie.BlockHash,vie=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function La(){if(!(this instanceof La))return new La;SR.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=vie,this.W=new Array(64)}gp.inherits(La,SR);var xR=La;La.blockSize=512;La.outSize=256;La.hmacStrength=192;La.padLength=64;La.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=die(bie(n[i-2]),n[i-7],wie(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4],u=this.h[5],h=this.h[6],d=this.h[7];for(hie(this.k.length===n.length),i=0;i<n.length;i++){var g=fie(d,yie(l),pie(l,u,h),this.k[i],n[i]),m=Bo(mie(s),gie(s,o,a));d=h,h=u,u=l,l=Bo(c,g),c=a,a=o,o=s,s=Bo(g,m)}this.h[0]=Bo(this.h[0],s),this.h[1]=Bo(this.h[1],o),this.h[2]=Bo(this.h[2],a),this.h[3]=Bo(this.h[3],c),this.h[4]=Bo(this.h[4],l),this.h[5]=Bo(this.h[5],u),this.h[6]=Bo(this.h[6],h),this.h[7]=Bo(this.h[7],d)};La.prototype._digest=function(e){return e==="hex"?gp.toHex32(this.h,"big"):gp.split32(this.h,"big")};var YS=bt,IR=xR;function Jc(){if(!(this instanceof Jc))return new Jc;IR.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}YS.inherits(Jc,IR);var Eie=Jc;Jc.blockSize=512;Jc.outSize=224;Jc.hmacStrength=192;Jc.padLength=64;Jc.prototype._digest=function(e){return e==="hex"?YS.toHex32(this.h.slice(0,7),"big"):YS.split32(this.h.slice(0,7),"big")};var Is=bt,_ie=qp,Sie=Zh,Pa=Is.rotr64_hi,Oa=Is.rotr64_lo,AR=Is.shr64_hi,CR=Is.shr64_lo,ml=Is.sum64,VE=Is.sum64_hi,GE=Is.sum64_lo,xie=Is.sum64_4_hi,Iie=Is.sum64_4_lo,Aie=Is.sum64_5_hi,Cie=Is.sum64_5_lo,NR=_ie.BlockHash,Nie=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ca(){if(!(this instanceof ca))return new ca;NR.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Nie,this.W=new Array(160)}Is.inherits(ca,NR);var MR=ca;ca.blockSize=1024;ca.outSize=512;ca.hmacStrength=192;ca.padLength=128;ca.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var s=Uie(n[i-4],n[i-3]),o=jie(n[i-4],n[i-3]),a=n[i-14],c=n[i-13],l=Lie(n[i-30],n[i-29]),u=Bie(n[i-30],n[i-29]),h=n[i-32],d=n[i-31];n[i]=xie(s,o,a,c,l,u,h,d),n[i+1]=Iie(s,o,a,c,l,u,h,d)}};ca.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],l=this.h[5],u=this.h[6],h=this.h[7],d=this.h[8],g=this.h[9],m=this.h[10],v=this.h[11],$=this.h[12],_=this.h[13],x=this.h[14],A=this.h[15];Sie(this.k.length===n.length);for(var T=0;T<n.length;T+=2){var k=x,D=A,L=Rie(d,g),F=Die(d,g),B=Mie(d,g,m,v,$),q=Tie(d,g,m,v,$,_),R=this.k[T],E=this.k[T+1],b=n[T],f=n[T+1],p=Aie(k,D,L,F,B,q,R,E,b,f),w=Cie(k,D,L,F,B,q,R,E,b,f);k=Oie(i,s),D=kie(i,s),L=$ie(i,s,o,a,c),F=Pie(i,s,o,a,c,l);var N=VE(k,D,L,F),M=GE(k,D,L,F);x=$,A=_,$=m,_=v,m=d,v=g,d=VE(u,h,p,w),g=GE(h,h,p,w),u=c,h=l,c=o,l=a,o=i,a=s,i=VE(p,w,N,M),s=GE(p,w,N,M)}ml(this.h,0,i,s),ml(this.h,2,o,a),ml(this.h,4,c,l),ml(this.h,6,u,h),ml(this.h,8,d,g),ml(this.h,10,m,v),ml(this.h,12,$,_),ml(this.h,14,x,A)};ca.prototype._digest=function(e){return e==="hex"?Is.toHex32(this.h,"big"):Is.split32(this.h,"big")};function Mie(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function Tie(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function $ie(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function Pie(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function Oie(t,e){var r=Pa(t,e,28),n=Pa(e,t,2),i=Pa(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function kie(t,e){var r=Oa(t,e,28),n=Oa(e,t,2),i=Oa(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Rie(t,e){var r=Pa(t,e,14),n=Pa(t,e,18),i=Pa(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function Die(t,e){var r=Oa(t,e,14),n=Oa(t,e,18),i=Oa(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function Lie(t,e){var r=Pa(t,e,1),n=Pa(t,e,8),i=AR(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Bie(t,e){var r=Oa(t,e,1),n=Oa(t,e,8),i=CR(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Uie(t,e){var r=Pa(t,e,19),n=Pa(e,t,29),i=AR(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}function jie(t,e){var r=Oa(t,e,19),n=Oa(e,t,29),i=CR(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}var QS=bt,TR=MR;function Xc(){if(!(this instanceof Xc))return new Xc;TR.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}QS.inherits(Xc,TR);var Fie=Xc;Xc.blockSize=1024;Xc.outSize=384;Xc.hmacStrength=192;Xc.padLength=128;Xc.prototype._digest=function(e){return e==="hex"?QS.toHex32(this.h.slice(0,12),"big"):QS.split32(this.h.slice(0,12),"big")};Wp.sha1=lie;Wp.sha224=Eie;Wp.sha256=xR;Wp.sha384=Fie;Wp.sha512=MR;var $R={},Th=bt,zie=qp,gw=Th.rotl32,nC=Th.sum32,v0=Th.sum32_3,iC=Th.sum32_4,PR=zie.BlockHash;function Ba(){if(!(this instanceof Ba))return new Ba;PR.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Th.inherits(Ba,PR);$R.ripemd160=Ba;Ba.blockSize=512;Ba.outSize=160;Ba.hmacStrength=192;Ba.padLength=64;Ba.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=n,l=i,u=s,h=o,d=a,g=0;g<80;g++){var m=nC(gw(iC(n,sC(g,i,s,o),e[Hie[g]+r],qie(g)),Vie[g]),a);n=a,a=o,o=gw(s,10),s=i,i=m,m=nC(gw(iC(c,sC(79-g,l,u,h),e[Kie[g]+r],Wie(g)),Gie[g]),d),c=d,d=h,h=gw(u,10),u=l,l=m}m=v0(this.h[1],s,h),this.h[1]=v0(this.h[2],o,d),this.h[2]=v0(this.h[3],a,c),this.h[3]=v0(this.h[4],n,l),this.h[4]=v0(this.h[0],i,u),this.h[0]=m};Ba.prototype._digest=function(e){return e==="hex"?Th.toHex32(this.h,"little"):Th.split32(this.h,"little")};function sC(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function qie(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Wie(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var Hie=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Kie=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Vie=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Gie=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Yie=bt,Qie=Zh;function mp(t,e,r){if(!(this instanceof mp))return new mp(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(Yie.toArray(e,r))}var Zie=mp;mp.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),Qie(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};mp.prototype.update=function(e,r){return this.inner.update(e,r),this};mp.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=bt,e.common=qp,e.sha=Wp,e.ripemd=$R,e.hmac=Zie,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Jv);var YE,oC;function Jie(){return oC||(oC=1,YE={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),YE}(function(t){var e=t,r=Jv,n=XI,i=ro,s=i.assert;function o(l){l.type==="short"?this.curve=new n.short(l):l.type==="edwards"?this.curve=new n.edwards(l):this.curve=new n.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function a(l,u){Object.defineProperty(e,l,{configurable:!0,enumerable:!0,get:function(){var h=new o(u);return Object.defineProperty(e,l,{configurable:!0,enumerable:!0,value:h}),h}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=Jie()}catch{c=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})})(Zv);var Xie=Jv,wh=ZI,OR=Zh;function du(t){if(!(this instanceof du))return new du(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=wh.toArray(t.entropy,t.entropyEnc||"hex"),r=wh.toArray(t.nonce,t.nonceEnc||"hex"),n=wh.toArray(t.pers,t.persEnc||"hex");OR(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var ese=du;du.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};du.prototype._hmac=function(){return new Xie.hmac(this.hash,this.K)};du.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};du.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=wh.toArray(e,r),n=wh.toArray(n,i),OR(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};du.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=wh.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,wh.encode(o,r)};var tse=nl,rse=ro,ZS=rse.assert;function zi(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var nse=zi;zi.fromPublic=function(e,r,n){return r instanceof zi?r:new zi(e,{pub:r,pubEnc:n})};zi.fromPrivate=function(e,r,n){return r instanceof zi?r:new zi(e,{priv:r,privEnc:n})};zi.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};zi.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};zi.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};zi.prototype._importPrivate=function(e,r){this.priv=new tse(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};zi.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?ZS(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&ZS(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};zi.prototype.derive=function(e){return e.validate()||ZS(e.validate(),"public point not validated"),e.mul(this.priv).getX()};zi.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};zi.prototype.verify=function(e,r,n){return this.ec.verify(e,r,this,void 0,n)};zi.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Ub=nl,t5=ro,ise=t5.assert;function e2(t,e){if(t instanceof e2)return t;this._importDER(t,e)||(ise(t.r&&t.s,"Signature without r or s"),this.r=new Ub(t.r,16),this.s=new Ub(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var sse=e2;function ose(){this.place=0}function QE(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4||t[e.place]===0)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function aC(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}e2.prototype._importDER=function(e,r){e=t5.toArray(e,r);var n=new ose;if(e[n.place++]!==48)return!1;var i=QE(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=QE(e,n);if(s===!1||e[n.place]&128)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=QE(e,n);if(a===!1||e.length!==a+n.place||e[n.place]&128)return!1;var c=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Ub(o),this.s=new Ub(c),this.recoveryParam=null,!0};function ZE(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}e2.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=aC(r),n=aC(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];ZE(i,r.length),i=i.concat(r),i.push(2),ZE(i,n.length);var s=i.concat(n),o=[48];return ZE(o,s.length),o=o.concat(s),t5.encode(o,e)};var ta=nl,kR=ese,ase=ro,JE=Zv,cse=fR,Ku=ase.assert,r5=nse,t2=sse;function To(t){if(!(this instanceof To))return new To(t);typeof t=="string"&&(Ku(Object.prototype.hasOwnProperty.call(JE,t),"Unknown curve "+t),t=JE[t]),t instanceof JE.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var lse=To;To.prototype.keyPair=function(e){return new r5(this,e)};To.prototype.keyFromPrivate=function(e,r){return r5.fromPrivate(this,e,r)};To.prototype.keyFromPublic=function(e,r){return r5.fromPublic(this,e,r)};To.prototype.genKeyPair=function(e){e||(e={});for(var r=new kR({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||cse(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new ta(2));;){var s=new ta(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};To.prototype._truncateToN=function(e,r,n){var i;if(ta.isBN(e)||typeof e=="number")e=new ta(e,16),i=e.byteLength();else if(typeof e=="object")i=e.length,e=new ta(e,16);else{var s=e.toString();i=s.length+1>>>1,e=new ta(s,16)}typeof n!="number"&&(n=i*8);var o=n-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};To.prototype.sign=function(e,r,n,i){if(typeof n=="object"&&(i=n,n=null),i||(i={}),typeof e!="string"&&typeof e!="number"&&!ta.isBN(e)){Ku(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),Ku(e.length>>>0===e.length);for(var s=0;s<e.length;s++)Ku((e[s]&255)===e[s])}r=this.keyFromPrivate(r,n),e=this._truncateToN(e,!1,i.msgBitLength),Ku(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),a=r.getPrivate().toArray("be",o),c=e.toArray("be",o);Ku(new ta(c).eq(e),"Can not sign message");for(var l=new kR({hash:this.hash,entropy:a,nonce:c,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new ta(1)),h=0;;h++){var d=i.k?i.k(h):new ta(l.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(u)>=0)){var g=this.g.mul(d);if(!g.isInfinity()){var m=g.getX(),v=m.umod(this.n);if(v.cmpn(0)!==0){var $=d.invm(this.n).mul(v.mul(r.getPrivate()).iadd(e));if($=$.umod(this.n),$.cmpn(0)!==0){var _=(g.getY().isOdd()?1:0)|(m.cmp(v)!==0?2:0);return i.canonical&&$.cmp(this.nh)>0&&($=this.n.sub($),_^=1),new t2({r:v,s:$,recoveryParam:_})}}}}}};To.prototype.verify=function(e,r,n,i,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),n=this.keyFromPublic(n,i),r=new t2(r,"hex");var o=r.r,a=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var c=a.invm(this.n),l=c.mul(e).umod(this.n),u=c.mul(o).umod(this.n),h;return this.curve._maxwellTrick?(h=this.g.jmulAdd(l,n.getPublic(),u),h.isInfinity()?!1:h.eqXToP(o)):(h=this.g.mulAdd(l,n.getPublic(),u),h.isInfinity()?!1:h.getX().umod(this.n).cmp(o)===0)};To.prototype.recoverPubKey=function(t,e,r,n){Ku((3&r)===r,"The recovery param is more than two bits"),e=new t2(e,n);var i=this.n,s=new ta(t),o=e.r,a=e.s,c=r&1,l=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var u=e.r.invm(i),h=i.sub(s).mul(u).umod(i),d=a.mul(u).umod(i);return this.g.mulAdd(h,o,d)};To.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new t2(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var ly=ro,RR=ly.assert,cC=ly.parseBytes,Kp=ly.cachedProperty;function Jn(t,e){this.eddsa=t,this._secret=cC(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=cC(e.pub)}Jn.fromPublic=function(e,r){return r instanceof Jn?r:new Jn(e,{pub:r})};Jn.fromSecret=function(e,r){return r instanceof Jn?r:new Jn(e,{secret:r})};Jn.prototype.secret=function(){return this._secret};Kp(Jn,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Kp(Jn,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Kp(Jn,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});Kp(Jn,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Kp(Jn,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Kp(Jn,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Jn.prototype.sign=function(e){return RR(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Jn.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};Jn.prototype.getSecret=function(e){return RR(this._secret,"KeyPair is public only"),ly.encode(this.secret(),e)};Jn.prototype.getPublic=function(e){return ly.encode(this.pubBytes(),e)};var use=Jn,hse=nl,r2=ro,lC=r2.assert,n2=r2.cachedProperty,dse=r2.parseBytes;function Jh(t,e){this.eddsa=t,typeof e!="object"&&(e=dse(e)),Array.isArray(e)&&(lC(e.length===t.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),lC(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof hse&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}n2(Jh,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});n2(Jh,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});n2(Jh,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});n2(Jh,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Jh.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Jh.prototype.toHex=function(){return r2.encode(this.toBytes(),"hex").toUpperCase()};var fse=Jh,pse=Jv,gse=Zv,yp=ro,mse=yp.assert,DR=yp.parseBytes,LR=use,uC=fse;function As(t){if(mse(t==="ed25519","only tested with ed25519 so far"),!(this instanceof As))return new As(t);t=gse[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=pse.sha512}var yse=As;As.prototype.sign=function(e,r){e=DR(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),s=this.g.mul(i),o=this.encodePoint(s),a=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),c=i.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:c,Rencoded:o})};As.prototype.verify=function(e,r,n){if(e=DR(e),r=this.makeSignature(r),r.S().gte(r.eddsa.curve.n)||r.S().isNeg())return!1;var i=this.keyFromPublic(n),s=this.hashInt(r.Rencoded(),i.pubBytes(),e),o=this.g.mul(r.S()),a=r.R().add(i.pub().mul(s));return a.eq(o)};As.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return yp.intFromLE(e.digest()).umod(this.curve.n)};As.prototype.keyFromPublic=function(e){return LR.fromPublic(this,e)};As.prototype.keyFromSecret=function(e){return LR.fromSecret(this,e)};As.prototype.makeSignature=function(e){return e instanceof uC?e:new uC(this,e)};As.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};As.prototype.decodePoint=function(e){e=yp.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&-129),i=(e[r]&128)!==0,s=yp.intFromLE(n);return this.curve.pointFromY(s,i)};As.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};As.prototype.decodeInt=function(e){return yp.intFromLE(e)};As.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(t){var e=t;e.version=mne.version,e.utils=ro,e.rand=fR,e.curve=XI,e.curves=Zv,e.ec=lse,e.eddsa=yse})(YI);const BR={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var wse={};const UR=":";function Vf(t){const[e,r]=t.split(UR);return{namespace:e,reference:r}}function bse(t){const[e,r,n]=t.split(UR);return{namespace:e,reference:r,address:n}}function jR(t,e){return t.includes(":")?[t]:e.chains||[]}const vse="ReactNative",Ws={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Ese="js";function jb(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function vu(){return!rl()&&!!oy()&&navigator.product===vse}function _se(){return vu()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Sse(){return vu()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function uy(){return!jb()&&!!oy()&&!!rl()}function hy(){return vu()?Ws.reactNative:jb()?Ws.node:uy()?Ws.browser:Ws.unknown}function hC(){var t;try{return vu()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function xse(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const i=e[n];i!==void 0&&r.set(n,i)}return r.toString()}function FR(){return GI()||{name:"",description:"",url:"",icons:[""]}}function Ise(){if(hy()===Ws.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=V7();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Ase(){var t;const e=hy();return e===Ws.browser?[e,((t=KI())==null?void 0:t.host)||"unknown"].join(":"):e}function zR(t,e,r){const n=Ise(),i=Ase();return[[t,e].join("-"),[Ese,r].join("-"),n,i].join("/")}function Cse({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=r.split("?"),u=zR(t,e,n),h={auth:i,ua:u,projectId:s,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},d=xse(l[1]||"",h);return l[0]+"?"+d}function ch(t,e){return t.filter(r=>e.includes(r)).length===t.length}function qR(t){return Object.fromEntries(t.entries())}function WR(t){return new Map(Object.entries(t))}function ju(t=J.FIVE_MINUTES,e){const r=J.toMiliseconds(t||J.FIVE_MINUTES);let n,i,s,o;return{resolve:a=>{s&&n&&(clearTimeout(s),n(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},r),n=a,i=c})}}function Wl(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function HR(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Nse(t){return HR("topic",t)}function Mse(t){return HR("id",t)}function KR(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function An(t,e){return J.fromMiliseconds(Date.now()+J.toMiliseconds(t))}function Ml(t){return Date.now()>=J.toMiliseconds(t)}function qt(t,e){return`${t}${e?`:${e}`:""}`}function x1(t=[],e=[]){return[...new Set([...t,...e])]}async function Tse({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=$se(s,t,e),a=hy();if(a===Ws.browser){if(!((n=rl())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}Pse(o)}else a===Ws.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function $se(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${Dse(n,!0)}`}else i=`${i}/wc?${n}`;return i}function Pse(t){let e="_self";Rse()?e="_top":(kse()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Ose(t,e){let r="";try{if(uy()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function dC(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function fC(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function n5(){return typeof process<"u"&&wse.IS_VITEST==="true"}function kse(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Rse(){try{return window.self!==window.top}catch{return!1}}function Dse(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function VR(t){return Buffer.from(t,"base64").toString("utf-8")}function Lse(t){return new Promise(e=>setTimeout(e,t))}function sm(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Bse(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function i2(t,...e){if(!Bse(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function i5(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");sm(t.outputLen),sm(t.blockLen)}function wp(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function GR(t,e){i2(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const mw=BigInt(2**32-1),pC=BigInt(32);function Use(t,e=!1){return e?{h:Number(t&mw),l:Number(t>>pC&mw)}:{h:Number(t>>pC&mw)|0,l:Number(t&mw)|0}}function jse(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Use(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const Fse=(t,e,r)=>t<<r|e>>>32-r,zse=(t,e,r)=>e<<r|t>>>32-r,qse=(t,e,r)=>e<<r-32|t>>>64-r,Wse=(t,e,r)=>t<<r-32|e>>>64-r,vd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Hse(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function XE(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function fa(t,e){return t<<32-e|t>>>e}const gC=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Kse(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function mC(t){for(let e=0;e<t.length;e++)t[e]=Kse(t[e])}function Vse(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function bp(t){return typeof t=="string"&&(t=Vse(t)),i2(t),t}let s5=class{clone(){return this._cloneInto()}};function YR(t){const e=n=>t().update(bp(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function dy(t=32){if(vd&&typeof vd.getRandomValues=="function")return vd.getRandomValues(new Uint8Array(t));if(vd&&typeof vd.randomBytes=="function")return vd.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const QR=[],ZR=[],JR=[],Gse=BigInt(0),E0=BigInt(1),Yse=BigInt(2),Qse=BigInt(7),Zse=BigInt(256),Jse=BigInt(113);for(let t=0,e=E0,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],QR.push(2*(5*n+r)),ZR.push((t+1)*(t+2)/2%64);let i=Gse;for(let s=0;s<7;s++)e=(e<<E0^(e>>Qse)*Jse)%Zse,e&Yse&&(i^=E0<<(E0<<BigInt(s))-E0);JR.push(i)}const[Xse,eoe]=jse(JR,!0),yC=(t,e,r)=>r>32?qse(t,e,r):Fse(t,e,r),wC=(t,e,r)=>r>32?Wse(t,e,r):zse(t,e,r);function toe(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],h=yC(l,u,1)^r[a],d=wC(l,u,1)^r[a+1];for(let g=0;g<50;g+=10)t[o+g]^=h,t[o+g+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=ZR[o],c=yC(i,s,a),l=wC(i,s,a),u=QR[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=Xse[n],t[1]^=eoe[n]}r.fill(0)}let roe=class XR extends s5{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,sm(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Hse(this.state)}keccak(){gC||mC(this.state32),toe(this.state32,this.rounds),gC||mC(this.state32),this.posOut=0,this.pos=0}update(e){wp(this);const{blockLen:r,state:n}=this;e=bp(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,r&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){wp(this,!1),i2(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return sm(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(GR(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new XR(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const noe=(t,e,r)=>YR(()=>new roe(e,t,r)),ioe=noe(1,136,256/8),soe="https://rpc.walletconnect.org/v1";function eD(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(ioe(r)).toString("hex")}async function ooe(t,e,r,n,i,s){switch(r.t){case"eip191":return await aoe(t,e,r.s);case"eip1271":return await coe(t,e,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function aoe(t,e,r){return(await wre({hash:eD(e),signature:r})).toLowerCase()===t.toLowerCase()}async function coe(t,e,r,n,i,s){const o=Vf(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=r.substring(2),h=eD(e).substring(2),d=a+h+c+l+u,g=await fetch(`${s||soe}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:loe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:d},"latest"]})}),{result:m}=await g.json();return m?m.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function loe(){return Date.now()+Math.floor(Math.random()*1e3)}var uoe=Object.defineProperty,hoe=Object.defineProperties,doe=Object.getOwnPropertyDescriptors,bC=Object.getOwnPropertySymbols,foe=Object.prototype.hasOwnProperty,poe=Object.prototype.propertyIsEnumerable,vC=(t,e,r)=>e in t?uoe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,goe=(t,e)=>{for(var r in e||(e={}))foe.call(e,r)&&vC(t,r,e[r]);if(bC)for(var r of bC(e))poe.call(e,r)&&vC(t,r,e[r]);return t},moe=(t,e)=>hoe(t,doe(e));const yoe="did:pkh:",o5=t=>t==null?void 0:t.split(":"),woe=t=>{const e=t&&o5(t);if(e)return t.includes(yoe)?e[3]:e[1]},JS=t=>{const e=t&&o5(t);if(e)return e[2]+":"+e[3]},Fb=t=>{const e=t&&o5(t);if(e)return e.pop()};async function EC(t){const{cacao:e,projectId:r}=t,{s:n,p:i}=e,s=tD(i,i.iss),o=Fb(i.iss);return await ooe(o,s,n,JS(i.iss),r)}const tD=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=Fb(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${woe(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,h=t.nbf?`Not Before: ${t.nbf}`:void 0,d=t.requestId?`Request ID: ${t.requestId}`:void 0,g=t.resources?`Resources:${t.resources.map(v=>`
- ${v}`).join("")}`:void 0,m=I1(t.resources);if(m){const v=om(m);i=Coe(i,v)}return[r,n,"",i,"",s,o,a,c,l,u,h,d,g].filter(v=>v!=null).join(`
`)};function boe(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function voe(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function $h(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{const s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function Eoe(t,e,r,n={}){return r==null||r.sort((i,s)=>i.localeCompare(s)),{att:{[t]:_oe(e,r,n)}}}function _oe(t,e,r={}){e=e==null?void 0:e.sort((i,s)=>i.localeCompare(s));const n=e.map(i=>({[`${t}/${i}`]:[r]}));return Object.assign({},...n)}function rD(t){return $h(t),`urn:recap:${boe(t).replace(/=/g,"")}`}function om(t){const e=voe(t.replace("urn:recap:",""));return $h(e),e}function Soe(t,e,r){const n=Eoe(t,e,r);return rD(n)}function xoe(t){return t&&t.includes("urn:recap:")}function Ioe(t,e){const r=om(t),n=om(e),i=Aoe(r,n);return rD(i)}function Aoe(t,e){$h(t),$h(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;n.att[i]=moe(goe({},n.att[i]),{[a]:((c=t.att[i])==null?void 0:c[a])||((l=e.att[i])==null?void 0:l[a])})})}),n}function Coe(t="",e){$h(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let i=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(h=>({ability:h.split("/")[0],action:h.split("/")[1]}));c.sort((h,d)=>h.action.localeCompare(d.action));const l={};c.forEach(h=>{l[h.ability]||(l[h.ability]=[]),l[h.ability].push(h.action)});const u=Object.keys(l).map(h=>(i++,`(${i}) '${h}': '${l[h].join("', '")}' for '${a}'.`));n.push(u.join(", ").replace(".,","."))});const s=n.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function _C(t){var e;const r=om(t);$h(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function SC(t){const e=om(t);$h(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function I1(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return xoe(e)?e:void 0}function e_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function nD(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Fs(t,...e){if(!nD(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function xC(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Noe(t,e){Fs(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function IC(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const iu=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Moe=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Toe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Toe)throw new Error("Non little-endian hardware is not supported");function $oe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function XS(t){if(typeof t=="string")t=$oe(t);else if(nD(t))t=e4(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Poe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Ooe(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const koe=(t,e)=>{function r(n,...i){if(Fs(n),t.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Fs(l):Fs(l,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&Fs(i[1]);const o=e(n,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Fs(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Fs(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Fs(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(r,t),r};function AC(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!Roe(e))throw new Error("invalid output, must be aligned");return e}function CC(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s);t.setUint32(e+4,o,n),t.setUint32(e+0,a,n)}function Roe(t){return t.byteOffset%4===0}function e4(t){return Uint8Array.from(t)}function vp(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const iD=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Doe=iD("expand 16-byte k"),Loe=iD("expand 32-byte k"),Boe=iu(Doe),Uoe=iu(Loe);function Nt(t,e){return t<<e|t>>>32-e}function t4(t){return t.byteOffset%4===0}const yw=64,joe=16,sD=2**32-1,NC=new Uint32Array;function Foe(t,e,r,n,i,s,o,a){const c=i.length,l=new Uint8Array(yw),u=iu(l),h=t4(i)&&t4(s),d=h?iu(i):NC,g=h?iu(s):NC;for(let m=0;m<c;o++){if(t(e,r,n,u,o,a),o>=sD)throw new Error("arx: counter overflow");const v=Math.min(yw,c-m);if(h&&v===yw){const $=m/4;if(m%4!==0)throw new Error("arx: invalid block position");for(let _=0,x;_<joe;_++)x=$+_,g[x]=d[x]^u[_];m+=yw;continue}for(let $=0,_;$<v;$++)_=m+$,s[_]=i[_]^l[$];m+=v}}function zoe(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=Poe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return e_(i),e_(o),IC(s),IC(r),(a,c,l,u,h=0)=>{Fs(a),Fs(c),Fs(l);const d=l.length;if(u===void 0&&(u=new Uint8Array(d)),Fs(u),e_(h),h<0||h>=sD)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const g=[];let m=a.length,v,$;if(m===32)g.push(v=e4(a)),$=Uoe;else if(m===16&&r)v=new Uint8Array(32),v.set(a),v.set(a,16),$=Boe,g.push(v);else throw new Error(`arx: invalid 32-byte key, got length=${m}`);t4(c)||g.push(c=e4(c));const _=iu(v);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n($,_,iu(c.subarray(0,16)),_),c=c.subarray(16)}const x=16-i;if(x!==c.length)throw new Error(`arx: nonce must be ${x} or 16 bytes`);if(x!==12){const T=new Uint8Array(12);T.set(c,s?0:12-c.length),c=T,g.push(c)}const A=iu(c);return Foe(t,$,_,A,l,u,h,o),vp(...g),u}}const ri=(t,e)=>t[e++]&255|(t[e++]&255)<<8;let qoe=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=XS(e),Fs(e,32);const r=ri(e,0),n=ri(e,2),i=ri(e,4),s=ri(e,6),o=ri(e,8),a=ri(e,10),c=ri(e,12),l=ri(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=ri(e,16+2*u)}process(e,r,n=!1){const i=n?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],h=o[4],d=o[5],g=o[6],m=o[7],v=o[8],$=o[9],_=ri(e,r+0),x=ri(e,r+2),A=ri(e,r+4),T=ri(e,r+6),k=ri(e,r+8),D=ri(e,r+10),L=ri(e,r+12),F=ri(e,r+14);let B=s[0]+(_&8191),q=s[1]+((_>>>13|x<<3)&8191),R=s[2]+((x>>>10|A<<6)&8191),E=s[3]+((A>>>7|T<<9)&8191),b=s[4]+((T>>>4|k<<12)&8191),f=s[5]+(k>>>1&8191),p=s[6]+((k>>>14|D<<2)&8191),w=s[7]+((D>>>11|L<<5)&8191),N=s[8]+((L>>>8|F<<8)&8191),M=s[9]+(F>>>5|i),S=0,y=S+B*a+q*(5*$)+R*(5*v)+E*(5*m)+b*(5*g);S=y>>>13,y&=8191,y+=f*(5*d)+p*(5*h)+w*(5*u)+N*(5*l)+M*(5*c),S+=y>>>13,y&=8191;let C=S+B*c+q*a+R*(5*$)+E*(5*v)+b*(5*m);S=C>>>13,C&=8191,C+=f*(5*g)+p*(5*d)+w*(5*h)+N*(5*u)+M*(5*l),S+=C>>>13,C&=8191;let I=S+B*l+q*c+R*a+E*(5*$)+b*(5*v);S=I>>>13,I&=8191,I+=f*(5*m)+p*(5*g)+w*(5*d)+N*(5*h)+M*(5*u),S+=I>>>13,I&=8191;let U=S+B*u+q*l+R*c+E*a+b*(5*$);S=U>>>13,U&=8191,U+=f*(5*v)+p*(5*m)+w*(5*g)+N*(5*d)+M*(5*h),S+=U>>>13,U&=8191;let K=S+B*h+q*u+R*l+E*c+b*a;S=K>>>13,K&=8191,K+=f*(5*$)+p*(5*v)+w*(5*m)+N*(5*g)+M*(5*d),S+=K>>>13,K&=8191;let V=S+B*d+q*h+R*u+E*l+b*c;S=V>>>13,V&=8191,V+=f*a+p*(5*$)+w*(5*v)+N*(5*m)+M*(5*g),S+=V>>>13,V&=8191;let te=S+B*g+q*d+R*h+E*u+b*l;S=te>>>13,te&=8191,te+=f*c+p*a+w*(5*$)+N*(5*v)+M*(5*m),S+=te>>>13,te&=8191;let se=S+B*m+q*g+R*d+E*h+b*u;S=se>>>13,se&=8191,se+=f*l+p*c+w*a+N*(5*$)+M*(5*v),S+=se>>>13,se&=8191;let ce=S+B*v+q*m+R*g+E*d+b*h;S=ce>>>13,ce&=8191,ce+=f*u+p*l+w*c+N*a+M*(5*$),S+=ce>>>13,ce&=8191;let ie=S+B*$+q*v+R*m+E*g+b*d;S=ie>>>13,ie&=8191,ie+=f*h+p*u+w*l+N*c+M*a,S+=ie>>>13,ie&=8191,S=(S<<2)+S|0,S=S+y|0,y=S&8191,S=S>>>13,C+=S,s[0]=y,s[1]=C,s[2]=I,s[3]=U,s[4]=K,s[5]=V,s[6]=te,s[7]=se,s[8]=ce,s[9]=ie}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)n[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;vp(n)}update(e){xC(this);const{buffer:r,blockLen:n}=this;e=XS(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o===n){for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){vp(this.h,this.r,this.buffer,this.pad)}digestInto(e){xC(this),Noe(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=n[o]>>>0,e[s++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}};function Woe(t){const e=(n,i)=>t(i).update(XS(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const Hoe=Woe(t=>new qoe(t));function Koe(t,e,r,n,i,s=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],h=e[1],d=e[2],g=e[3],m=e[4],v=e[5],$=e[6],_=e[7],x=i,A=r[0],T=r[1],k=r[2],D=o,L=a,F=c,B=l,q=u,R=h,E=d,b=g,f=m,p=v,w=$,N=_,M=x,S=A,y=T,C=k;for(let U=0;U<s;U+=2)D=D+q|0,M=Nt(M^D,16),f=f+M|0,q=Nt(q^f,12),D=D+q|0,M=Nt(M^D,8),f=f+M|0,q=Nt(q^f,7),L=L+R|0,S=Nt(S^L,16),p=p+S|0,R=Nt(R^p,12),L=L+R|0,S=Nt(S^L,8),p=p+S|0,R=Nt(R^p,7),F=F+E|0,y=Nt(y^F,16),w=w+y|0,E=Nt(E^w,12),F=F+E|0,y=Nt(y^F,8),w=w+y|0,E=Nt(E^w,7),B=B+b|0,C=Nt(C^B,16),N=N+C|0,b=Nt(b^N,12),B=B+b|0,C=Nt(C^B,8),N=N+C|0,b=Nt(b^N,7),D=D+R|0,C=Nt(C^D,16),w=w+C|0,R=Nt(R^w,12),D=D+R|0,C=Nt(C^D,8),w=w+C|0,R=Nt(R^w,7),L=L+E|0,M=Nt(M^L,16),N=N+M|0,E=Nt(E^N,12),L=L+E|0,M=Nt(M^L,8),N=N+M|0,E=Nt(E^N,7),F=F+b|0,S=Nt(S^F,16),f=f+S|0,b=Nt(b^f,12),F=F+b|0,S=Nt(S^F,8),f=f+S|0,b=Nt(b^f,7),B=B+q|0,y=Nt(y^B,16),p=p+y|0,q=Nt(q^p,12),B=B+q|0,y=Nt(y^B,8),p=p+y|0,q=Nt(q^p,7);let I=0;n[I++]=o+D|0,n[I++]=a+L|0,n[I++]=c+F|0,n[I++]=l+B|0,n[I++]=u+q|0,n[I++]=h+R|0,n[I++]=d+E|0,n[I++]=g+b|0,n[I++]=m+f|0,n[I++]=v+p|0,n[I++]=$+w|0,n[I++]=_+N|0,n[I++]=x+M|0,n[I++]=A+S|0,n[I++]=T+y|0,n[I++]=k+C|0}const Voe=zoe(Koe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Goe=new Uint8Array(16),MC=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(Goe.subarray(r))},Yoe=new Uint8Array(32);function TC(t,e,r,n,i){const s=t(e,r,Yoe),o=Hoe.create(s);i&&MC(o,i),MC(o,n);const a=new Uint8Array(16),c=Moe(a);CC(c,0,BigInt(i?i.length:0),!0),CC(c,8,BigInt(n.length),!0),o.update(a);const l=o.digest();return vp(s,a),l}const Qoe=t=>(e,r,n)=>({encrypt(i,s){const o=i.length;s=AC(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,r,a,a,1);const c=TC(t,e,r,a,n);return s.set(c,o),vp(c),s},decrypt(i,s){s=AC(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=TC(t,e,r,o,n);if(!Ooe(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,r,s,s,1),vp(c),s}}),oD=koe({blockSize:64,nonceLength:12,tagLength:16},Qoe(Voe));let aD=class extends s5{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,i5(e);const n=bp(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return wp(this),this.iHash.update(e),this}digestInto(e){wp(this),i2(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const a5=(t,e,r)=>new aD(t,e).update(r).digest();a5.create=(t,e)=>new aD(t,e);function Zoe(t,e,r){return i5(t),r===void 0&&(r=new Uint8Array(t.outputLen)),a5(t,bp(r),bp(e))}const t_=new Uint8Array([0]),$C=new Uint8Array;function Joe(t,e,r,n=32){if(i5(t),sm(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/t.outputLen);r===void 0&&(r=$C);const s=new Uint8Array(i*t.outputLen),o=a5.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<i;l++)t_[0]=l+1,a.update(l===0?$C:c).update(r).update(t_).digestInto(c),s.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),t_.fill(0),s.slice(0,n)}const Xoe=(t,e,r,n,i)=>Joe(t,Zoe(t,e,r),n,i);function eae(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function tae(t,e,r){return t&e^~t&r}function rae(t,e,r){return t&e^t&r^e&r}let nae=class extends s5{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=XE(this.buffer)}update(e){wp(this);const{view:r,buffer:n,blockLen:i}=this;e=bp(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=XE(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){wp(this),GR(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;eae(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=XE(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}};const iae=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),yl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wl=new Uint32Array(64);let sae=class extends nae{constructor(){super(64,32,8,!1),this.A=yl[0]|0,this.B=yl[1]|0,this.C=yl[2]|0,this.D=yl[3]|0,this.E=yl[4]|0,this.F=yl[5]|0,this.G=yl[6]|0,this.H=yl[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,r,n,i,s,o,a,c]}set(e,r,n,i,s,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)wl[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=wl[h-15],g=wl[h-2],m=fa(d,7)^fa(d,18)^d>>>3,v=fa(g,17)^fa(g,19)^g>>>10;wl[h]=v+wl[h-7]+m+wl[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=fa(a,6)^fa(a,11)^fa(a,25),g=u+d+tae(a,c,l)+iae[h]+wl[h]|0,m=(fa(n,2)^fa(n,13)^fa(n,22))+rae(n,i,s)|0;u=l,l=c,c=a,a=o+g|0,o=s,s=i,i=n,n=g+m|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){wl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const s2=YR(()=>new sae);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cD=BigInt(0);function c5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function lD(t){if(!c5(t))throw new Error("Uint8Array expected")}const oae=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function aae(t){lD(t);let e="";for(let r=0;r<t.length;r++)e+=oae[t[r]];return e}function cae(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?cD:BigInt("0x"+t)}const gc={_0:48,_9:57,A:65,F:70,a:97,f:102};function PC(t){if(t>=gc._0&&t<=gc._9)return t-gc._0;if(t>=gc.A&&t<=gc.F)return t-(gc.A-10);if(t>=gc.a&&t<=gc.f)return t-(gc.a-10)}function uD(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=PC(t.charCodeAt(s)),a=PC(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function OC(t){return lD(t),cae(aae(Uint8Array.from(t).reverse()))}function lae(t,e){return uD(t.toString(16).padStart(e*2,"0"))}function uae(t,e){return lae(t,e).reverse()}function kC(t,e,r){let n;if(typeof e=="string")try{n=uD(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(c5(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const r_=t=>typeof t=="bigint"&&cD<=t;function hae(t,e,r){return r_(t)&&r_(e)&&r_(r)&&e<=t&&t<r}function RC(t,e,r,n){if(!hae(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}const dae={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||c5(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function fae(t,e,r={}){const n=(i,s,o)=>{const a=dae[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const Pf=BigInt(0),ww=BigInt(1);function hD(t,e){const r=t%e;return r>=Pf?r:e+r}function pae(t,e,r){if(e<Pf)throw new Error("invalid exponent, negatives unsupported");if(r<=Pf)throw new Error("invalid modulus");if(r===ww)return Pf;let n=ww;for(;e>Pf;)e&ww&&(n=n*t%r),t=t*t%r,e>>=ww;return n}function Ko(t,e,r){let n=t;for(;e-- >Pf;)n*=n,n%=r;return n}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Ed=BigInt(0),n_=BigInt(1);function gae(t){return fae(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function mae(t){const e=gae(t),{P:r}=e,n=x=>hD(x,r),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(x=>x),c=e.powPminus2||(x=>pae(x,r-BigInt(2),r));function l(x,A,T){const k=n(x*(A-T));return A=n(A-k),T=n(T+k),[A,T]}const u=(e.a-BigInt(2))/BigInt(4);function h(x,A){RC("u",x,Ed,r),RC("scalar",A,Ed,r);const T=A,k=x;let D=n_,L=Ed,F=x,B=n_,q=Ed,R;for(let b=BigInt(i-1);b>=Ed;b--){const f=T>>b&n_;q^=f,R=l(q,D,F),D=R[0],F=R[1],R=l(q,L,B),L=R[0],B=R[1],q=f;const p=D+L,w=n(p*p),N=D-L,M=n(N*N),S=w-M,y=F+B,C=F-B,I=n(C*p),U=n(y*N),K=I+U,V=I-U;F=n(K*K),B=n(k*n(V*V)),D=n(w*M),L=n(S*(w+n(u*S)))}R=l(q,D,F),D=R[0],F=R[1],R=l(q,L,B),L=R[0],B=R[1];const E=c(L);return n(D*E)}function d(x){return uae(n(x),s)}function g(x){const A=kC("u coordinate",x,s);return o===32&&(A[31]&=127),OC(A)}function m(x){const A=kC("scalar",x),T=A.length;if(T!==s&&T!==o){let k=""+s+" or "+o;throw new Error("invalid scalar, expected "+k+" bytes, got "+T)}return OC(a(A))}function v(x,A){const T=g(A),k=m(x),D=h(T,k);if(D===Ed)throw new Error("invalid private or public key received");return d(D)}const $=d(e.Gu);function _(x){return v(x,$)}return{scalarMult:v,scalarMultBase:_,getSharedSecret:(x,A)=>v(x,A),getPublicKey:x=>_(x),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:$}}const r4=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const yae=BigInt(1),DC=BigInt(2),wae=BigInt(3),bae=BigInt(5);BigInt(8);function vae(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=r4,o=t*t%s*t%s,a=Ko(o,DC,s)*o%s,c=Ko(a,yae,s)*t%s,l=Ko(c,bae,s)*c%s,u=Ko(l,e,s)*l%s,h=Ko(u,r,s)*u%s,d=Ko(h,n,s)*h%s,g=Ko(d,i,s)*d%s,m=Ko(g,i,s)*d%s,v=Ko(m,e,s)*l%s;return{pow_p_5_8:Ko(v,DC,s)*t%s,b2:o}}function Eae(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const n4=mae({P:r4,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=r4,{pow_p_5_8:r,b2:n}=vae(t);return hD(Ko(r,wae,e)*n,e)},adjustScalarBytes:Eae,randomBytes:dy}),dD="base10",qi="base16",Hl="base64pad",_0="base64url",fy="utf8",fD=0,jc=1,py=2,_ae=0,LC=1,Eg=12,l5=32;function Sae(){const t=n4.utils.randomPrivateKey(),e=n4.getPublicKey(t);return{privateKey:Ht(t,qi),publicKey:Ht(e,qi)}}function i4(){const t=dy(l5);return Ht(t,qi)}function xae(t,e){const r=n4.getSharedSecret(Kr(t,qi),Kr(e,qi)),n=Xoe(s2,r,void 0,void 0,l5);return Ht(n,qi)}function A1(t){const e=s2(Kr(t,qi));return Ht(e,qi)}function Mc(t){const e=s2(Kr(t,fy));return Ht(e,qi)}function pD(t){return Kr(`${t}`,dD)}function Ph(t){return Number(Ht(t,dD))}function Iae(t){const e=pD(typeof t.type<"u"?t.type:fD);if(Ph(e)===jc&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Kr(t.senderPublicKey,qi):void 0,n=typeof t.iv<"u"?Kr(t.iv,qi):dy(Eg),i=Kr(t.symKey,qi),s=oD(i,n).encrypt(Kr(t.message,fy));return gD({type:e,sealed:s,iv:n,senderPublicKey:r,encoding:t.encoding})}function Aae(t){const e=Kr(t.symKey,qi),{sealed:r,iv:n}=am(t),i=oD(e,n).decrypt(r);if(i===null)throw new Error("Failed to decrypt");return Ht(i,fy)}function Cae(t,e){const r=pD(py),n=dy(Eg),i=Kr(t,fy);return gD({type:r,sealed:i,iv:n,encoding:e})}function Nae(t,e){const{sealed:r}=am({encoded:t,encoding:e});return Ht(r,fy)}function gD(t){const{encoding:e=Hl}=t;if(Ph(t.type)===py)return Ht(Kf([t.type,t.sealed]),e);if(Ph(t.type)===jc){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ht(Kf([t.type,t.senderPublicKey,t.iv,t.sealed]),e)}return Ht(Kf([t.type,t.iv,t.sealed]),e)}function am(t){const{encoded:e,encoding:r=Hl}=t,n=Kr(e,r),i=n.slice(_ae,LC),s=LC;if(Ph(i)===jc){const l=s+l5,u=l+Eg,h=n.slice(s,l),d=n.slice(l,u),g=n.slice(u);return{type:i,sealed:g,iv:d,senderPublicKey:h}}if(Ph(i)===py){const l=n.slice(s),u=dy(Eg);return{type:i,sealed:l,iv:u}}const o=s+Eg,a=n.slice(s,o),c=n.slice(o);return{type:i,sealed:c,iv:a}}function Mae(t,e){const r=am({encoded:t,encoding:e==null?void 0:e.encoding});return mD({type:Ph(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Ht(r.senderPublicKey,qi):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function mD(t){const e=(t==null?void 0:t.type)||fD;if(e===jc){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function BC(t){return t.type===jc&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function UC(t){return t.type===py}function Tae(t){return new YI.ec("p256").keyFromPublic({x:Buffer.from(t.x,"base64").toString("hex"),y:Buffer.from(t.y,"base64").toString("hex")},"hex")}function $ae(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;return r>0&&(e+="=".repeat(4-r)),e}function Pae(t){return Buffer.from($ae(t),"base64")}function Oae(t,e){const[r,n,i]=t.split("."),s=Pae(i);if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),c=`${r}.${n}`,l=s2(c),u=Tae(e),h=Ht(l,qi);if(!u.verify(h,{r:o,s:a}))throw new Error("Invalid signature");return fp(t).payload}const kae="irn";function zb(t){return(t==null?void 0:t.relay)||{protocol:kae}}function tg(t){const e=BR[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function Rae(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function jC(t){if(!t.includes("wc:")){const l=VR(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(s),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:Dae(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:Rae(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Dae(t){return t.startsWith("//")?t.substring(2):t}function Lae(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=i,o=r+e+s;t[s]&&(n[o]=t[s])}),n}function FC(t){const e=new URLSearchParams,r=Lae(t.relay);Object.keys(r).sort().forEach(i=>{e.set(i,r[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function bw(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function Vp(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function Bae(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Vp(r.accounts))}),e}function Uae(t,e){const r=[];return Object.values(t).forEach(n=>{Vp(n.accounts).includes(e)&&r.push(...n.methods)}),r}function jae(t,e){const r=[];return Object.values(t).forEach(n=>{Vp(n.accounts).includes(e)&&r.push(...n.events)}),r}function u5(t){return t.includes(":")}function rg(t){return u5(t)?t.split(":")[0]:t}function Fae(t){const e={};return t==null||t.forEach(r=>{var n;const[i,s]=r.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(r),(n=e[i].chains)==null||n.push(`${i}:${s}`)}),e}function zC(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=Fae(e);for(const[n,i]of Object.entries(r))i.methods?i.methods=x1(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return r}const zae={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},qae={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function me(t,e){const{message:r,code:n}=qae[t];return{message:e?`${r} ${e}`:r,code:n}}function nr(t,e){const{message:r,code:n}=zae[t];return{message:e?`${r} ${e}`:r,code:n}}function Oh(t,e){return!!Array.isArray(t)}function cm(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Zi(t){return typeof t>"u"}function fn(t,e){return e&&Zi(t)?!0:typeof t=="string"&&!!t.trim().length}function h5(t,e){return e&&Zi(t)?!0:typeof t=="number"&&!isNaN(t)}function Wae(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return ch(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Vp(a),h=r[o];(!ch(jR(o,h),u)||!ch(h.methods,c)||!ch(h.events,l))&&(s=!1)}),s):!1}function qb(t){return fn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Hae(t){if(fn(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&qb(r)}}return!1}function Kae(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(fn(t,!1)){if(e(t))return!0;const r=VR(t);return e(r)}}catch{}return!1}function Vae(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Gae(t){return t==null?void 0:t.topic}function Yae(t,e){let r=null;return fn(t==null?void 0:t.publicKey,!1)||(r=me("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function qC(t){let e=!0;return Oh(t)?t.length&&(e=t.every(r=>fn(r,!1))):e=!1,e}function Qae(t,e,r){let n=null;return Oh(e)&&e.length?e.forEach(i=>{n||qb(i)||(n=nr("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):qb(t)||(n=nr("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Zae(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=Qae(i,jR(i,s),`${e} ${r}`);o&&(n=o)}),n}function Jae(t,e){let r=null;return Oh(t)?t.forEach(n=>{r||Hae(n)||(r=nr("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=nr("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Xae(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Jae(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function ece(t,e){let r=null;return qC(t==null?void 0:t.methods)?qC(t==null?void 0:t.events)||(r=nr("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=nr("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function yD(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=ece(n,`${e}, namespace`);i&&(r=i)}),r}function tce(t,e,r){let n=null;if(t&&cm(t)){const i=yD(t,e);i&&(n=i);const s=Zae(t,e,r);s&&(n=s)}else n=me("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function i_(t,e){let r=null;if(t&&cm(t)){const n=yD(t,e);n&&(r=n);const i=Xae(t,e);i&&(r=i)}else r=me("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function wD(t){return fn(t.protocol,!0)}function rce(t,e){let r=!1;return t?t&&Oh(t)&&t.length&&t.forEach(n=>{r=wD(n)}):r=!0,r}function nce(t){return typeof t=="number"}function ps(t){return typeof t<"u"&&typeof t!==null}function ice(t){return!(!t||typeof t!="object"||!t.code||!h5(t.code,!1)||!t.message||!fn(t.message,!1))}function sce(t){return!(Zi(t)||!fn(t.method,!1))}function oce(t){return!(Zi(t)||Zi(t.result)&&Zi(t.error)||!h5(t.id,!1)||!fn(t.jsonrpc,!1))}function ace(t){return!(Zi(t)||!fn(t.name,!1))}function WC(t,e){return!(!qb(e)||!Bae(t).includes(e))}function cce(t,e,r){return fn(r,!1)?Uae(t,e).includes(r):!1}function lce(t,e,r){return fn(r,!1)?jae(t,e).includes(r):!1}function HC(t,e,r){let n=null;const i=uce(t),s=hce(e),o=Object.keys(i),a=Object.keys(s),c=KC(Object.keys(t)),l=KC(Object.keys(e)),u=c.filter(h=>!l.includes(h));return u.length&&(n=me("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),ch(o,a)||(n=me("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(h=>{if(!h.includes(":")||n)return;const d=Vp(e[h].accounts);d.includes(h)||(n=me("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${d.toString()}`))}),o.forEach(h=>{n||(ch(i[h].methods,s[h].methods)?ch(i[h].events,s[h].events)||(n=me("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${h}`)):n=me("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${h}`))}),n}function uce(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function KC(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function hce(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=Vp(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function dce(t,e){return h5(t,!1)&&t<=e.max&&t>=e.min}function VC(){const t=hy();return new Promise(e=>{switch(t){case Ws.browser:e(fce());break;case Ws.reactNative:e(pce());break;case Ws.node:e(gce());break;default:e(!0)}})}function fce(){return uy()&&(navigator==null?void 0:navigator.onLine)}async function pce(){if(vu()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function gce(){return!0}function mce(t){switch(hy()){case Ws.browser:yce(t);break;case Ws.reactNative:wce(t);break}}function yce(t){!vu()&&uy()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function wce(t){vu()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const s_={};let S0=class{static get(e){return s_[e]}static set(e,r){s_[e]=r}static delete(e){delete s_[e]}};const bce="PARSE_ERROR",vce="INVALID_REQUEST",Ece="METHOD_NOT_FOUND",_ce="INVALID_PARAMS",bD="INTERNAL_ERROR",d5="SERVER_ERROR",Sce=[-32700,-32600,-32601,-32602,-32603],_g={[bce]:{code:-32700,message:"Parse error"},[vce]:{code:-32600,message:"Invalid Request"},[Ece]:{code:-32601,message:"Method not found"},[_ce]:{code:-32602,message:"Invalid params"},[bD]:{code:-32603,message:"Internal error"},[d5]:{code:-32e3,message:"Server error"}},vD=d5;function xce(t){return Sce.includes(t)}function GC(t){return Object.keys(_g).includes(t)?_g[t]:_g[vD]}function Ice(t){const e=Object.values(_g).find(r=>r.code===t);return e||_g[vD]}function ED(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var _D={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var s4=function(t,e){return s4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},s4(t,e)};function Ace(t,e){s4(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var o4=function(){return o4=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},o4.apply(this,arguments)};function Cce(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Nce(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Mce(t,e){return function(r,n){e(r,n,t)}}function Tce(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function $ce(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function Pce(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Oce(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function kce(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function a4(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function SD(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function Rce(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(SD(arguments[e]));return t}function Dce(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function lm(t){return this instanceof lm?(this.v=t,this):new lm(t)}function Lce(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(g){return new Promise(function(m,v){s.push([d,g,m,v])>1||a(d,g)})})}function a(d,g){try{c(n[d](g))}catch(m){h(s[0][3],m)}}function c(d){d.value instanceof lm?Promise.resolve(d.value.v).then(l,u):h(s[0][2],d)}function l(d){a("next",d)}function u(d){a("throw",d)}function h(d,g){d(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Bce(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:lm(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function Uce(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof a4=="function"?a4(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function jce(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Fce(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function zce(t){return t&&t.__esModule?t:{default:t}}function qce(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Wce(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const Hce=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return o4},__asyncDelegator:Bce,__asyncGenerator:Lce,__asyncValues:Uce,__await:lm,__awaiter:$ce,__classPrivateFieldGet:qce,__classPrivateFieldSet:Wce,__createBinding:Oce,__decorate:Nce,__exportStar:kce,__extends:Ace,__generator:Pce,__importDefault:zce,__importStar:Fce,__makeTemplateObject:jce,__metadata:Tce,__param:Mce,__read:SD,__rest:Cce,__spread:Rce,__spreadArrays:Dce,__values:a4},Symbol.toStringTag,{value:"Module"})),Kce=Um(Hce);var mc={},YC;function Vce(){if(YC)return mc;YC=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.isBrowserCryptoAvailable=mc.getSubtleCrypto=mc.getBrowerCrypto=void 0;function t(){return(_r==null?void 0:_r.crypto)||(_r==null?void 0:_r.msCrypto)||{}}mc.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}mc.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return mc.isBrowserCryptoAvailable=r,mc}var yc={},QC;function Gce(){if(QC)return yc;QC=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.isBrowser=yc.isNode=yc.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}yc.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}yc.isNode=e;function r(){return!t()&&!e()}return yc.isBrowser=r,yc}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Kce;e.__exportStar(Vce(),t),e.__exportStar(Gce(),t)})(_D);function Kn(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Hs(t=6){return BigInt(Kn(t))}function es(t,e,r){return{id:r||Kn(),jsonrpc:"2.0",method:t,params:e}}function Eu(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Gp(t,e,r){return{id:t,jsonrpc:"2.0",error:Yce(e)}}function Yce(t,e){return typeof t>"u"?GC(bD):(typeof t=="string"&&(t=Object.assign(Object.assign({},GC(d5)),{message:t})),xce(t.code)&&(t=Ice(t.code)),t)}let Qce=class{},Zce=class extends Qce{constructor(){super()}},Jce=class extends Zce{constructor(e){super()}};const Xce="^https?:",ele="^wss?:";function tle(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function xD(t,e){const r=tle(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function ZC(t){return xD(t,Xce)}function JC(t){return xD(t,ele)}function rle(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function ID(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Yp(t){return ID(t)&&"method"in t}function Xh(t){return ID(t)&&(Pn(t)||ln(t))}function Pn(t){return"result"in t}function ln(t){return"error"in t}let Vr=class extends Jce{constructor(e){super(e),this.events=new Rn.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(es(e.method,e.params||[],e.id||Hs().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{ln(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Xh(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const nle=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),ile=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",XC=t=>t.split("?")[0],eN=10,sle=nle();let AD=class{constructor(e){if(this.url=e,this.events=new Rn.EventEmitter,this.registering=!1,!JC(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Mo(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!JC(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=_D.isReactNative()?void 0:{rejectUnauthorized:!rle(e)},s=new sle(e,[],i);ile()?s.onerror=o=>{const a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?aa(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Gp(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return ED(e,XC(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>eN&&this.events.setMaxListeners(eN)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${XC(this.url)}`));return this.events.emit("register_error",r),r}};var Wb={exports:{}};Wb.exports;(function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",h="[object Date]",d="[object Error]",g="[object Function]",m="[object GeneratorFunction]",v="[object Map]",$="[object Number]",_="[object Null]",x="[object Object]",A="[object Promise]",T="[object Proxy]",k="[object RegExp]",D="[object Set]",L="[object String]",F="[object Symbol]",B="[object Undefined]",q="[object WeakMap]",R="[object ArrayBuffer]",E="[object DataView]",b="[object Float32Array]",f="[object Float64Array]",p="[object Int8Array]",w="[object Int16Array]",N="[object Int32Array]",M="[object Uint8Array]",S="[object Uint8ClampedArray]",y="[object Uint16Array]",C="[object Uint32Array]",I=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,K=/^(?:0|[1-9]\d*)$/,V={};V[b]=V[f]=V[p]=V[w]=V[N]=V[M]=V[S]=V[y]=V[C]=!0,V[a]=V[c]=V[R]=V[u]=V[E]=V[h]=V[d]=V[g]=V[v]=V[$]=V[x]=V[k]=V[D]=V[L]=V[q]=!1;var te=typeof _r=="object"&&_r&&_r.Object===Object&&_r,se=typeof self=="object"&&self&&self.Object===Object&&self,ce=te||se||Function("return this")(),ie=e&&!e.nodeType&&e,ve=ie&&!0&&t&&!t.nodeType&&t,Ne=ve&&ve.exports===ie,Ae=Ne&&te.process,et=function(){try{return Ae&&Ae.binding&&Ae.binding("util")}catch{}}(),tt=et&&et.isTypedArray;function je(W,Q){for(var oe=-1,xe=W==null?0:W.length,Rr=0,at=[];++oe<xe;){var sn=W[oe];Q(sn,oe,W)&&(at[Rr++]=sn)}return at}function Vt(W,Q){for(var oe=-1,xe=Q.length,Rr=W.length;++oe<xe;)W[Rr+oe]=Q[oe];return W}function Dt(W,Q){for(var oe=-1,xe=W==null?0:W.length;++oe<xe;)if(Q(W[oe],oe,W))return!0;return!1}function Ge(W,Q){for(var oe=-1,xe=Array(W);++oe<W;)xe[oe]=Q(oe);return xe}function jt(W){return function(Q){return W(Q)}}function Lt(W,Q){return W.has(Q)}function Le(W,Q){return W==null?void 0:W[Q]}function ft(W){var Q=-1,oe=Array(W.size);return W.forEach(function(xe,Rr){oe[++Q]=[Rr,xe]}),oe}function Ct(W,Q){return function(oe){return W(Q(oe))}}function Ke(W){var Q=-1,oe=Array(W.size);return W.forEach(function(xe){oe[++Q]=xe}),oe}var mt=Array.prototype,Ft=Function.prototype,j=Object.prototype,P=ce["__core-js_shared__"],O=Ft.toString,z=j.hasOwnProperty,G=function(){var W=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||"");return W?"Symbol(src)_1."+W:""}(),Z=j.toString,ee=RegExp("^"+O.call(z).replace(I,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ce=Ne?ce.Buffer:void 0,Fe=ce.Symbol,Se=ce.Uint8Array,qe=j.propertyIsEnumerable,Re=mt.splice,We=Fe?Fe.toStringTag:void 0,dr=Object.getOwnPropertySymbols,Cr=Ce?Ce.isBuffer:void 0,rt=Ct(Object.keys,Object),sr=cd(ce,"DataView"),Gt=cd(ce,"Map"),Qe=cd(ce,"Promise"),or=cd(ce,"Set"),ar=cd(ce,"WeakMap"),Ye=cd(Object,"create"),Nr=Su(sr),Mr=Su(Gt),nt=Su(Qe),Tr=Su(or),$r=Su(ar),Je=Fe?Fe.prototype:void 0,cr=Je?Je.valueOf:void 0;function Bt(W){var Q=-1,oe=W==null?0:W.length;for(this.clear();++Q<oe;){var xe=W[Q];this.set(xe[0],xe[1])}}function it(){this.__data__=Ye?Ye(null):{},this.size=0}function Pr(W){var Q=this.has(W)&&delete this.__data__[W];return this.size-=Q?1:0,Q}function Or(W){var Q=this.__data__;if(Ye){var oe=Q[W];return oe===n?void 0:oe}return z.call(Q,W)?Q[W]:void 0}function st(W){var Q=this.__data__;return Ye?Q[W]!==void 0:z.call(Q,W)}function kr(W,Q){var oe=this.__data__;return this.size+=this.has(W)?0:1,oe[W]=Ye&&Q===void 0?n:Q,this}Bt.prototype.clear=it,Bt.prototype.delete=Pr,Bt.prototype.get=Or,Bt.prototype.has=st,Bt.prototype.set=kr;function xt(W){var Q=-1,oe=W==null?0:W.length;for(this.clear();++Q<oe;){var xe=W[Q];this.set(xe[0],xe[1])}}function fr(){this.__data__=[],this.size=0}function Ya(W){var Q=this.__data__,oe=Ay(Q,W);if(oe<0)return!1;var xe=Q.length-1;return oe==xe?Q.pop():Re.call(Q,oe,1),--this.size,!0}function Qa(W){var Q=this.__data__,oe=Ay(Q,W);return oe<0?void 0:Q[oe][1]}function Za(W){return Ay(this.__data__,W)>-1}function Ja(W,Q){var oe=this.__data__,xe=Ay(oe,W);return xe<0?(++this.size,oe.push([W,Q])):oe[xe][1]=Q,this}xt.prototype.clear=fr,xt.prototype.delete=Ya,xt.prototype.get=Qa,xt.prototype.has=Za,xt.prototype.set=Ja;function Ki(W){var Q=-1,oe=W==null?0:W.length;for(this.clear();++Q<oe;){var xe=W[Q];this.set(xe[0],xe[1])}}function Xa(){this.size=0,this.__data__={hash:new Bt,map:new(Gt||xt),string:new Bt}}function ec(W){var Q=Cy(this,W).delete(W);return this.size-=Q?1:0,Q}function tc(W){return Cy(this,W).get(W)}function rc(W){return Cy(this,W).has(W)}function nc(W,Q){var oe=Cy(this,W),xe=oe.size;return oe.set(W,Q),this.size+=oe.size==xe?0:1,this}Ki.prototype.clear=Xa,Ki.prototype.delete=ec,Ki.prototype.get=tc,Ki.prototype.has=rc,Ki.prototype.set=nc;function so(W){var Q=-1,oe=W==null?0:W.length;for(this.__data__=new Ki;++Q<oe;)this.add(W[Q])}function ic(W){return this.__data__.set(W,n),this}function sc(W){return this.__data__.has(W)}so.prototype.add=so.prototype.push=ic,so.prototype.has=sc;function Ai(W){var Q=this.__data__=new xt(W);this.size=Q.size}function oc(){this.__data__=new xt,this.size=0}function ac(W){var Q=this.__data__,oe=Q.delete(W);return this.size=Q.size,oe}function cc(W){return this.__data__.get(W)}function e0(W){return this.__data__.has(W)}function t0(W,Q){var oe=this.__data__;if(oe instanceof xt){var xe=oe.__data__;if(!Gt||xe.length<r-1)return xe.push([W,Q]),this.size=++oe.size,this;oe=this.__data__=new Ki(xe)}return oe.set(W,Q),this.size=oe.size,this}Ai.prototype.clear=oc,Ai.prototype.delete=ac,Ai.prototype.get=cc,Ai.prototype.has=e0,Ai.prototype.set=t0;function lU(W,Q){var oe=Ny(W),xe=!oe&&xU(W),Rr=!oe&&!xe&&_2(W),at=!oe&&!xe&&!Rr&&K5(W),sn=oe||xe||Rr||at,Dn=sn?Ge(W.length,String):[],ti=Dn.length;for(var Gr in W)z.call(W,Gr)&&!(sn&&(Gr=="length"||Rr&&(Gr=="offset"||Gr=="parent")||at&&(Gr=="buffer"||Gr=="byteLength"||Gr=="byteOffset")||bU(Gr,ti)))&&Dn.push(Gr);return Dn}function Ay(W,Q){for(var oe=W.length;oe--;)if(z5(W[oe][0],Q))return oe;return-1}function uU(W,Q,oe){var xe=Q(W);return Ny(W)?xe:Vt(xe,oe(W))}function r0(W){return W==null?W===void 0?B:_:We&&We in Object(W)?yU(W):SU(W)}function B5(W){return n0(W)&&r0(W)==a}function U5(W,Q,oe,xe,Rr){return W===Q?!0:W==null||Q==null||!n0(W)&&!n0(Q)?W!==W&&Q!==Q:hU(W,Q,oe,xe,U5,Rr)}function hU(W,Q,oe,xe,Rr,at){var sn=Ny(W),Dn=Ny(Q),ti=sn?c:il(W),Gr=Dn?c:il(Q);ti=ti==a?x:ti,Gr=Gr==a?x:Gr;var Ns=ti==x,Ro=Gr==x,Ci=ti==Gr;if(Ci&&_2(W)){if(!_2(Q))return!1;sn=!0,Ns=!1}if(Ci&&!Ns)return at||(at=new Ai),sn||K5(W)?j5(W,Q,oe,xe,Rr,at):gU(W,Q,ti,oe,xe,Rr,at);if(!(oe&i)){var oo=Ns&&z.call(W,"__wrapped__"),ao=Ro&&z.call(Q,"__wrapped__");if(oo||ao){var sl=oo?W.value():W,lc=ao?Q.value():Q;return at||(at=new Ai),Rr(sl,lc,oe,xe,at)}}return Ci?(at||(at=new Ai),mU(W,Q,oe,xe,Rr,at)):!1}function dU(W){if(!H5(W)||EU(W))return!1;var Q=q5(W)?ee:U;return Q.test(Su(W))}function fU(W){return n0(W)&&W5(W.length)&&!!V[r0(W)]}function pU(W){if(!_U(W))return rt(W);var Q=[];for(var oe in Object(W))z.call(W,oe)&&oe!="constructor"&&Q.push(oe);return Q}function j5(W,Q,oe,xe,Rr,at){var sn=oe&i,Dn=W.length,ti=Q.length;if(Dn!=ti&&!(sn&&ti>Dn))return!1;var Gr=at.get(W);if(Gr&&at.get(Q))return Gr==Q;var Ns=-1,Ro=!0,Ci=oe&s?new so:void 0;for(at.set(W,Q),at.set(Q,W);++Ns<Dn;){var oo=W[Ns],ao=Q[Ns];if(xe)var sl=sn?xe(ao,oo,Ns,Q,W,at):xe(oo,ao,Ns,W,Q,at);if(sl!==void 0){if(sl)continue;Ro=!1;break}if(Ci){if(!Dt(Q,function(lc,xu){if(!Lt(Ci,xu)&&(oo===lc||Rr(oo,lc,oe,xe,at)))return Ci.push(xu)})){Ro=!1;break}}else if(!(oo===ao||Rr(oo,ao,oe,xe,at))){Ro=!1;break}}return at.delete(W),at.delete(Q),Ro}function gU(W,Q,oe,xe,Rr,at,sn){switch(oe){case E:if(W.byteLength!=Q.byteLength||W.byteOffset!=Q.byteOffset)return!1;W=W.buffer,Q=Q.buffer;case R:return!(W.byteLength!=Q.byteLength||!at(new Se(W),new Se(Q)));case u:case h:case $:return z5(+W,+Q);case d:return W.name==Q.name&&W.message==Q.message;case k:case L:return W==Q+"";case v:var Dn=ft;case D:var ti=xe&i;if(Dn||(Dn=Ke),W.size!=Q.size&&!ti)return!1;var Gr=sn.get(W);if(Gr)return Gr==Q;xe|=s,sn.set(W,Q);var Ns=j5(Dn(W),Dn(Q),xe,Rr,at,sn);return sn.delete(W),Ns;case F:if(cr)return cr.call(W)==cr.call(Q)}return!1}function mU(W,Q,oe,xe,Rr,at){var sn=oe&i,Dn=F5(W),ti=Dn.length,Gr=F5(Q),Ns=Gr.length;if(ti!=Ns&&!sn)return!1;for(var Ro=ti;Ro--;){var Ci=Dn[Ro];if(!(sn?Ci in Q:z.call(Q,Ci)))return!1}var oo=at.get(W);if(oo&&at.get(Q))return oo==Q;var ao=!0;at.set(W,Q),at.set(Q,W);for(var sl=sn;++Ro<ti;){Ci=Dn[Ro];var lc=W[Ci],xu=Q[Ci];if(xe)var V5=sn?xe(xu,lc,Ci,Q,W,at):xe(lc,xu,Ci,W,Q,at);if(!(V5===void 0?lc===xu||Rr(lc,xu,oe,xe,at):V5)){ao=!1;break}sl||(sl=Ci=="constructor")}if(ao&&!sl){var My=W.constructor,Ty=Q.constructor;My!=Ty&&"constructor"in W&&"constructor"in Q&&!(typeof My=="function"&&My instanceof My&&typeof Ty=="function"&&Ty instanceof Ty)&&(ao=!1)}return at.delete(W),at.delete(Q),ao}function F5(W){return uU(W,CU,wU)}function Cy(W,Q){var oe=W.__data__;return vU(Q)?oe[typeof Q=="string"?"string":"hash"]:oe.map}function cd(W,Q){var oe=Le(W,Q);return dU(oe)?oe:void 0}function yU(W){var Q=z.call(W,We),oe=W[We];try{W[We]=void 0;var xe=!0}catch{}var Rr=Z.call(W);return xe&&(Q?W[We]=oe:delete W[We]),Rr}var wU=dr?function(W){return W==null?[]:(W=Object(W),je(dr(W),function(Q){return qe.call(W,Q)}))}:NU,il=r0;(sr&&il(new sr(new ArrayBuffer(1)))!=E||Gt&&il(new Gt)!=v||Qe&&il(Qe.resolve())!=A||or&&il(new or)!=D||ar&&il(new ar)!=q)&&(il=function(W){var Q=r0(W),oe=Q==x?W.constructor:void 0,xe=oe?Su(oe):"";if(xe)switch(xe){case Nr:return E;case Mr:return v;case nt:return A;case Tr:return D;case $r:return q}return Q});function bU(W,Q){return Q=Q??o,!!Q&&(typeof W=="number"||K.test(W))&&W>-1&&W%1==0&&W<Q}function vU(W){var Q=typeof W;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?W!=="__proto__":W===null}function EU(W){return!!G&&G in W}function _U(W){var Q=W&&W.constructor,oe=typeof Q=="function"&&Q.prototype||j;return W===oe}function SU(W){return Z.call(W)}function Su(W){if(W!=null){try{return O.call(W)}catch{}try{return W+""}catch{}}return""}function z5(W,Q){return W===Q||W!==W&&Q!==Q}var xU=B5(function(){return arguments}())?B5:function(W){return n0(W)&&z.call(W,"callee")&&!qe.call(W,"callee")},Ny=Array.isArray;function IU(W){return W!=null&&W5(W.length)&&!q5(W)}var _2=Cr||MU;function AU(W,Q){return U5(W,Q)}function q5(W){if(!H5(W))return!1;var Q=r0(W);return Q==g||Q==m||Q==l||Q==T}function W5(W){return typeof W=="number"&&W>-1&&W%1==0&&W<=o}function H5(W){var Q=typeof W;return W!=null&&(Q=="object"||Q=="function")}function n0(W){return W!=null&&typeof W=="object"}var K5=tt?jt(tt):fU;function CU(W){return IU(W)?lU(W):pU(W)}function NU(){return[]}function MU(){return!1}t.exports=AU})(Wb,Wb.exports);var ole=Wb.exports;const ale=Fa(ole),CD="wc",ND=2,c4="core",Ua=`${CD}@2:${c4}:`,cle={logger:"error"},lle={database:":memory:"},ule="crypto",tN="client_ed25519_seed",hle=J.ONE_DAY,dle="keychain",fle="0.3",ple="messages",gle="0.3",rN=J.SIX_HOURS,mle="publisher",MD="irn",yle="error",TD="wss://relay.walletconnect.org",wle="relayer",Vn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},ble="_subscription",uo={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},vle=.1,l4="2.19.0",Br={link_mode:"link_mode",relay:"relay"},Ele="0.3",_le="WALLETCONNECT_CLIENT_ID",nN="WALLETCONNECT_LINK_MODE_APPS",Ps={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Sle="subscription",xle="0.3",Ile=J.FIVE_SECONDS*1e3,Ale="pairing",Cle="0.3",x0={wc_pairingDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:J.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:J.ONE_DAY,prompt:!1,tag:0},res:{ttl:J.ONE_DAY,prompt:!1,tag:0}}},Vu={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Uo={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Nle="history",Mle="0.3",Tle="expirer",mo={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},$le="0.3",Ple="verify-api",Ole="https://verify.walletconnect.com",$D="https://verify.walletconnect.org",Sg=$D,kle=`${Sg}/v3`,Rle=[Ole,$D],Dle="echo",Lle="https://echo.walletconnect.com",Ea={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Sc={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},jo={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Nu={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Mu={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},I0={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Ble=.1,Ule="event-client",jle=86400,Fle="https://pulse.walletconnect.org/batch";function zle(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var v=0,$=0,_=0,x=m.length;_!==x&&m[_]===0;)_++,v++;for(var A=(x-_)*u+1>>>0,T=new Uint8Array(A);_!==x;){for(var k=m[_],D=0,L=A-1;(k!==0||D<$)&&L!==-1;L--,D++)k+=256*T[L]>>>0,T[L]=k%a>>>0,k=k/a>>>0;if(k!==0)throw new Error("Non-zero carry");$=D,_++}for(var F=A-$;F!==A&&T[F]===0;)F++;for(var B=c.repeat(v);F<A;++F)B+=t.charAt(T[F]);return B}function d(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var v=0;if(m[v]!==" "){for(var $=0,_=0;m[v]===c;)$++,v++;for(var x=(m.length-v)*l+1>>>0,A=new Uint8Array(x);m[v];){var T=r[m.charCodeAt(v)];if(T===255)return;for(var k=0,D=x-1;(T!==0||k<_)&&D!==-1;D--,k++)T+=a*A[D]>>>0,A[D]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");_=k,v++}if(m[v]!==" "){for(var L=x-_;L!==x&&A[L]===0;)L++;for(var F=new Uint8Array($+(x-L)),B=$;L!==x;)F[B++]=A[L++];return F}}}function g(m){var v=d(m);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:g}}var qle=zle,Wle=qle;const PD=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Hle=t=>new TextEncoder().encode(t),Kle=t=>new TextDecoder().decode(t);let Vle=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Gle=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return OD(this,e)}},Yle=class{constructor(e){this.decoders=e}or(e){return OD(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const OD=(t,e)=>new Yle({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Qle=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Vle(e,r,n),this.decoder=new Gle(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const o2=({name:t,prefix:e,encode:r,decode:n})=>new Qle(t,e,r,n),gy=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Wle(r,e);return o2({prefix:t,name:e,encode:n,decode:s=>PD(i(s))})},Zle=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Jle=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},xi=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>o2({prefix:e,name:t,encode(i){return Jle(i,n,r)},decode(i){return Zle(i,n,r,t)}}),Xle=o2({prefix:"\0",name:"identity",encode:t=>Kle(t),decode:t=>Hle(t)});var eue=Object.freeze({__proto__:null,identity:Xle});const tue=xi({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var rue=Object.freeze({__proto__:null,base2:tue});const nue=xi({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var iue=Object.freeze({__proto__:null,base8:nue});const sue=gy({prefix:"9",name:"base10",alphabet:"0123456789"});var oue=Object.freeze({__proto__:null,base10:sue});const aue=xi({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),cue=xi({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var lue=Object.freeze({__proto__:null,base16:aue,base16upper:cue});const uue=xi({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),hue=xi({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),due=xi({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),fue=xi({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),pue=xi({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),gue=xi({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),mue=xi({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),yue=xi({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),wue=xi({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var bue=Object.freeze({__proto__:null,base32:uue,base32upper:hue,base32pad:due,base32padupper:fue,base32hex:pue,base32hexupper:gue,base32hexpad:mue,base32hexpadupper:yue,base32z:wue});const vue=gy({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Eue=gy({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var _ue=Object.freeze({__proto__:null,base36:vue,base36upper:Eue});const Sue=gy({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),xue=gy({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Iue=Object.freeze({__proto__:null,base58btc:Sue,base58flickr:xue});const Aue=xi({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Cue=xi({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Nue=xi({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Mue=xi({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Tue=Object.freeze({__proto__:null,base64:Aue,base64pad:Cue,base64url:Nue,base64urlpad:Mue});const kD=Array.from(""),$ue=kD.reduce((t,e,r)=>(t[r]=e,t),[]),Pue=kD.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Oue(t){return t.reduce((e,r)=>(e+=$ue[r],e),"")}function kue(t){const e=[];for(const r of t){const n=Pue[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Rue=o2({prefix:"",name:"base256emoji",encode:Oue,decode:kue});var Due=Object.freeze({__proto__:null,base256emoji:Rue}),Lue=RD,iN=128,Bue=-128,Uue=Math.pow(2,31);function RD(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Uue;)e[r++]=t&255|iN,t/=128;for(;t&Bue;)e[r++]=t&255|iN,t>>>=7;return e[r]=t|0,RD.bytes=r-n+1,e}var jue=u4,Fue=128,sN=127;function u4(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw u4.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&sN)<<i:(o&sN)*Math.pow(2,i),i+=7}while(o>=Fue);return u4.bytes=s-n,r}var zue=Math.pow(2,7),que=Math.pow(2,14),Wue=Math.pow(2,21),Hue=Math.pow(2,28),Kue=Math.pow(2,35),Vue=Math.pow(2,42),Gue=Math.pow(2,49),Yue=Math.pow(2,56),Que=Math.pow(2,63),Zue=function(t){return t<zue?1:t<que?2:t<Wue?3:t<Hue?4:t<Kue?5:t<Vue?6:t<Gue?7:t<Yue?8:t<Que?9:10},Jue={encode:Lue,decode:jue,encodingLength:Zue},DD=Jue;const oN=(t,e,r=0)=>(DD.encode(t,e,r),e),aN=t=>DD.encodingLength(t),h4=(t,e)=>{const r=e.byteLength,n=aN(t),i=n+aN(r),s=new Uint8Array(i+r);return oN(t,s,0),oN(r,s,n),s.set(e,i),new Xue(t,r,e,s)};let Xue=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};const LD=({name:t,code:e,encode:r})=>new ehe(t,e,r);let ehe=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?h4(this.code,r):r.then(n=>h4(this.code,n))}else throw Error("Unknown type, must be binary type")}};const BD=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),the=LD({name:"sha2-256",code:18,encode:BD("SHA-256")}),rhe=LD({name:"sha2-512",code:19,encode:BD("SHA-512")});var nhe=Object.freeze({__proto__:null,sha256:the,sha512:rhe});const UD=0,ihe="identity",jD=PD,she=t=>h4(UD,jD(t)),ohe={code:UD,name:ihe,encode:jD,digest:she};var ahe=Object.freeze({__proto__:null,identity:ohe});new TextEncoder,new TextDecoder;const cN={...eue,...rue,...iue,...oue,...lue,...bue,..._ue,...Iue,...Tue,...Due};({...nhe,...ahe});function che(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function FD(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const lN=FD("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),o_=FD("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=che(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),lhe={utf8:lN,"utf-8":lN,hex:cN.base16,latin1:o_,ascii:o_,binary:o_,...cN};function uhe(t,e="utf8"){const r=lhe[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var hhe=Object.defineProperty,dhe=(t,e,r)=>e in t?hhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pa=(t,e,r)=>dhe(t,typeof e!="symbol"?e+"":e,r);let fhe=class{constructor(e,r){this.core=e,this.logger=r,pa(this,"keychain",new Map),pa(this,"name",dle),pa(this,"version",fle),pa(this,"initialized",!1),pa(this,"storagePrefix",Ua),pa(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),pa(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),pa(this,"set",async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()}),pa(this,"get",n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=me("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i}),pa(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=Kt(r,this.name)}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,qR(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?WR(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}};var phe=Object.defineProperty,ghe=(t,e,r)=>e in t?phe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ni=(t,e,r)=>ghe(t,typeof e!="symbol"?e+"":e,r);let mhe=class{constructor(e,r,n){this.core=e,this.logger=r,ni(this,"name",ule),ni(this,"keychain"),ni(this,"randomSessionIdentifier",i4()),ni(this,"initialized",!1),ni(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),ni(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),ni(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=Rb(i);return HI(s.publicKey)}),ni(this,"generateKeyPair",()=>{this.isInitialized();const i=Sae();return this.setPrivateKey(i.publicKey,i.privateKey)}),ni(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=Rb(s),a=this.randomSessionIdentifier;return await K7(a,i,hle,o)}),ni(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=xae(a,s);return this.setSymKey(c,o)}),ni(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||A1(i);return await this.keychain.set(o,i),o}),ni(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),ni(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),ni(this,"encode",async(i,s,o)=>{this.isInitialized();const a=mD(o),c=Mo(s);if(UC(a))return Cae(c,o==null?void 0:o.encoding);if(BC(a)){const d=a.senderPublicKey,g=a.receiverPublicKey;i=await this.generateSharedKey(d,g)}const l=this.getSymKey(i),{type:u,senderPublicKey:h}=a;return Iae({type:u,symKey:l,message:c,senderPublicKey:h,encoding:o==null?void 0:o.encoding})}),ni(this,"decode",async(i,s,o)=>{this.isInitialized();const a=Mae(s,o);if(UC(a)){const c=Nae(s,o==null?void 0:o.encoding);return aa(c)}if(BC(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=Aae({symKey:c,encoded:s,encoding:o==null?void 0:o.encoding});return aa(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),ni(this,"getPayloadType",(i,s=Hl)=>{const o=am({encoded:i,encoding:s});return Ph(o.type)}),ni(this,"getPayloadSenderPublicKey",(i,s=Hl)=>{const o=am({encoded:i,encoding:s});return o.senderPublicKey?Ht(o.senderPublicKey,qi):void 0}),this.core=e,this.logger=Kt(r,this.name),this.keychain=n||new fhe(this.core,this.logger)}get context(){return hr(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(tN)}catch{e=i4(),await this.keychain.set(tN,e)}return uhe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}};var yhe=Object.defineProperty,whe=(t,e,r)=>e in t?yhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ga=(t,e,r)=>whe(t,typeof e!="symbol"?e+"":e,r);let bhe=class extends lJ{constructor(e,r){super(e,r),this.logger=e,this.core=r,ga(this,"messages",new Map),ga(this,"name",ple),ga(this,"version",gle),ga(this,"initialized",!1),ga(this,"storagePrefix",Ua),ga(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),ga(this,"set",async(n,i)=>{this.isInitialized();const s=Mc(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s}),ga(this,"get",n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i}),ga(this,"has",(n,i)=>{this.isInitialized();const s=this.get(n),o=Mc(i);return typeof s[o]<"u"}),ga(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()}),this.logger=Kt(e,this.name),this.core=r}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,qR(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?WR(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}};var vhe=Object.defineProperty,Ehe=Object.defineProperties,_he=Object.getOwnPropertyDescriptors,uN=Object.getOwnPropertySymbols,She=Object.prototype.hasOwnProperty,xhe=Object.prototype.propertyIsEnumerable,d4=(t,e,r)=>e in t?vhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vw=(t,e)=>{for(var r in e||(e={}))She.call(e,r)&&d4(t,r,e[r]);if(uN)for(var r of uN(e))xhe.call(e,r)&&d4(t,r,e[r]);return t},a_=(t,e)=>Ehe(t,_he(e)),Fo=(t,e,r)=>d4(t,typeof e!="symbol"?e+"":e,r);let Ihe=class extends uJ{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Fo(this,"events",new Rn.EventEmitter),Fo(this,"name",mle),Fo(this,"queue",new Map),Fo(this,"publishTimeout",J.toMiliseconds(J.ONE_MINUTE)),Fo(this,"initialPublishTimeout",J.toMiliseconds(J.ONE_SECOND*15)),Fo(this,"needsTransportRestart",!1),Fo(this,"publish",async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});const a=(s==null?void 0:s.ttl)||rN,c=zb(s),l=(s==null?void 0:s.prompt)||!1,u=(s==null?void 0:s.tag)||0,h=(s==null?void 0:s.id)||Hs().toString(),d={topic:n,message:i,opts:{ttl:a,relay:c,prompt:l,tag:u,id:h,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}},g=`Failed to publish payload, please try again. id:${h} tag:${u}`;try{const m=new Promise(async v=>{const $=({id:x})=>{d.opts.id===x&&(this.removeRequestFromQueue(x),this.relayer.events.removeListener(Vn.publish,$),v(d))};this.relayer.events.on(Vn.publish,$);const _=Wl(new Promise((x,A)=>{this.rpcPublish({topic:n,message:i,ttl:a,prompt:l,tag:u,id:h,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}).then(x).catch(T=>{this.logger.warn(T,T==null?void 0:T.message),A(T)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${h} tag:${u}`);try{await _,this.events.removeListener(Vn.publish,$)}catch(x){this.queue.set(h,a_(vw({},d),{attempt:1})),this.logger.warn(x,x==null?void 0:x.message)}});this.logger.trace({type:"method",method:"publish",params:{id:h,topic:n,message:i,opts:s}}),await Wl(m,this.publishTimeout,g)}catch(m){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(m),(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw m}finally{this.queue.delete(h)}}),Fo(this,"on",(n,i)=>{this.events.on(n,i)}),Fo(this,"once",(n,i)=>{this.events.once(n,i)}),Fo(this,"off",(n,i)=>{this.events.off(n,i)}),Fo(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.relayer=e,this.logger=Kt(r,this.name),this.registerEventListeners()}get context(){return hr(this.logger)}async rpcPublish(e){var r,n,i,s;const{topic:o,message:a,ttl:c=rN,prompt:l,tag:u,id:h,attestation:d,tvf:g}=e,m={method:tg(zb().protocol).publish,params:vw({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:d},g),id:h};Zi((r=m.params)==null?void 0:r.prompt)&&((n=m.params)==null||delete n.prompt),Zi((i=m.params)==null?void 0:i.tag)&&((s=m.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:m});const v=await this.relayer.request(m);return this.relayer.events.emit(Vn.publish,e),this.logger.debug("Successfully Published Payload"),v}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const n=e.attempt+1;this.queue.set(r,a_(vw({},e),{attempt:n}));const{topic:i,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),await this.rpcPublish(a_(vw({},e),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(la.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Vn.connection_stalled);return}this.checkQueue()}),this.relayer.on(Vn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}};var Ahe=Object.defineProperty,Che=(t,e,r)=>e in t?Ahe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_d=(t,e,r)=>Che(t,typeof e!="symbol"?e+"":e,r);let Nhe=class{constructor(){_d(this,"map",new Map),_d(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),_d(this,"get",e=>this.map.get(e)||[]),_d(this,"exists",(e,r)=>this.get(e).includes(r)),_d(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),_d(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}};var Mhe=Object.defineProperty,The=Object.defineProperties,$he=Object.getOwnPropertyDescriptors,hN=Object.getOwnPropertySymbols,Phe=Object.prototype.hasOwnProperty,Ohe=Object.prototype.propertyIsEnumerable,f4=(t,e,r)=>e in t?Mhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,A0=(t,e)=>{for(var r in e||(e={}))Phe.call(e,r)&&f4(t,r,e[r]);if(hN)for(var r of hN(e))Ohe.call(e,r)&&f4(t,r,e[r]);return t},c_=(t,e)=>The(t,$he(e)),rr=(t,e,r)=>f4(t,typeof e!="symbol"?e+"":e,r);let khe=class extends fJ{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,rr(this,"subscriptions",new Map),rr(this,"topicMap",new Nhe),rr(this,"events",new Rn.EventEmitter),rr(this,"name",Sle),rr(this,"version",xle),rr(this,"pending",new Map),rr(this,"cached",[]),rr(this,"initialized",!1),rr(this,"pendingSubscriptionWatchLabel","pending_sub_watch_label"),rr(this,"pollingInterval",20),rr(this,"storagePrefix",Ua),rr(this,"subscribeTimeout",J.toMiliseconds(J.ONE_MINUTE)),rr(this,"initialSubscribeTimeout",J.toMiliseconds(J.ONE_SECOND*15)),rr(this,"clientId"),rr(this,"batchSubscribeTopicsLimit",500),rr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),rr(this,"subscribe",async(n,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=zb(i),o={topic:n,relay:s,transportType:i==null?void 0:i.transportType};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),rr(this,"unsubscribe",async(n,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)}),rr(this,"isSubscribed",async n=>{if(this.topics.includes(n))return!0;const i=`${this.pendingSubscriptionWatchLabel}_${n}`;return await new Promise((s,o)=>{const a=new J.Watch;a.start(i);const c=setInterval(()=>{(!this.pending.has(n)&&this.topics.includes(n)||this.cached.some(l=>l.topic===n))&&(clearInterval(c),a.stop(i),s(!0)),a.elapsed(i)>=Ile&&(clearInterval(c),a.stop(i),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)}),rr(this,"on",(n,i)=>{this.events.on(n,i)}),rr(this,"once",(n,i)=>{this.events.once(n,i)}),rr(this,"off",(n,i)=>{this.events.off(n,i)}),rr(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),rr(this,"start",async()=>{await this.onConnect()}),rr(this,"stop",async()=>{await this.onDisconnect()}),rr(this,"restart",async()=>{await this.restore(),await this.onRestart()}),rr(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(i=>{n.push(i)}),await this.batchSubscribe(n)}),rr(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(la.pulse,async()=>{await this.checkPending()}),this.events.on(Ps.created,async n=>{const i=Ps.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()}),this.events.on(Ps.deleted,async n=>{const i=Ps.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()})}),this.relayer=e,this.logger=Kt(r,this.name),this.clientId=""}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=zb(n);await this.restartToComplete({topic:e,id:r,relay:i}),await this.rpcUnsubscribe(e,r,i);const s=nr("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r,n){var i;(!n||(n==null?void 0:n.transportType)===Br.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const s={method:tg(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=n==null?void 0:n.internal)==null?void 0:i.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((n==null?void 0:n.transportType)===Br.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(u=>this.logger.warn(u))},J.toMiliseconds(J.ONE_SECOND)),a;const c=new Promise(async u=>{const h=d=>{d.topic===e&&(this.events.removeListener(Ps.created,h),u(d.id))};this.events.on(Ps.created,h);try{const d=await Wl(new Promise((g,m)=>{this.relayer.request(s).catch(v=>{this.logger.warn(v,v==null?void 0:v.message),m(v)}).then(g)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ps.created,h),u(d)}catch{}}),l=await Wl(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Vn.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:tg(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Wl(new Promise(i=>{this.relayer.request(n).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Vn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:tg(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await Wl(new Promise((s,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Vn.connection_stalled)}return i}rpcUnsubscribe(e,r,n){const i={method:tg(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,c_(A0({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,A0({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,A0({},r)),this.topicMap.set(r.topic,e),this.events.emit(Ps.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=me("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Ps.deleted,c_(A0({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ps.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Ps.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>c_(A0({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await Lse(J.toMiliseconds(J.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Mc(e+await this.getClientId())}};var Rhe=Object.defineProperty,dN=Object.getOwnPropertySymbols,Dhe=Object.prototype.hasOwnProperty,Lhe=Object.prototype.propertyIsEnumerable,p4=(t,e,r)=>e in t?Rhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,fN=(t,e)=>{for(var r in e||(e={}))Dhe.call(e,r)&&p4(t,r,e[r]);if(dN)for(var r of dN(e))Lhe.call(e,r)&&p4(t,r,e[r]);return t},Mt=(t,e,r)=>p4(t,typeof e!="symbol"?e+"":e,r);let Bhe=class extends hJ{constructor(e){super(e),Mt(this,"protocol","wc"),Mt(this,"version",2),Mt(this,"core"),Mt(this,"logger"),Mt(this,"events",new Rn.EventEmitter),Mt(this,"provider"),Mt(this,"messages"),Mt(this,"subscriber"),Mt(this,"publisher"),Mt(this,"name",wle),Mt(this,"transportExplicitlyClosed",!1),Mt(this,"initialized",!1),Mt(this,"connectionAttemptInProgress",!1),Mt(this,"relayUrl"),Mt(this,"projectId"),Mt(this,"packageName"),Mt(this,"bundleId"),Mt(this,"hasExperiencedNetworkDisruption",!1),Mt(this,"pingTimeout"),Mt(this,"heartBeatTimeout",J.toMiliseconds(J.THIRTY_SECONDS+J.FIVE_SECONDS)),Mt(this,"reconnectTimeout"),Mt(this,"connectPromise"),Mt(this,"reconnectInProgress",!1),Mt(this,"requestsInFlight",[]),Mt(this,"connectTimeout",J.toMiliseconds(J.ONE_SECOND*15)),Mt(this,"request",async r=>{var n,i;this.logger.debug("Publishing Request Payload");const s=r.id||Hs().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${s}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),Mt(this,"resetPingTimeout",()=>{if(jb())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,i;this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null||i.terminate()},this.heartBeatTimeout)}catch(r){this.logger.warn(r,r==null?void 0:r.message)}}),Mt(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),Mt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Vn.connect)}),Mt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Mt(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(Vn.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Mt(this,"registerProviderListeners",()=>{this.provider.on(uo.payload,this.onPayloadHandler),this.provider.on(uo.connect,this.onConnectHandler),this.provider.on(uo.disconnect,this.onDisconnectHandler),this.provider.on(uo.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Kt(e.logger,this.name):wu(tl({level:e.logger||yle})),this.messages=new bhe(this.logger,e.core),this.subscriber=new khe(this,this.logger),this.publisher=new Ihe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||TD,this.projectId=e.projectId,_se()?this.packageName=hC():Sse()&&(this.bundleId=hC()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return hr(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Br.relay})}async subscribe(e,r){var n,i,s;this.isInitialized(),(!(r!=null&&r.transportType)||(r==null?void 0:r.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Ps.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Ps.created,l)}),new Promise(async(u,h)=>{a=await this.subscriber.subscribe(e,fN({internal:{throwOnFailedPublish:o}},r)).catch(d=>{o&&h(d)})||a,u()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Wl(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await VC())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const i=An(J.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,s)}this.events.emit(Vn.message,e),await this.recordMessageEvent(e)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(uo.disconnect,s),await Wl(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(uo.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(uo.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(uo.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const i=n;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,J.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,i,s;if(jb())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Vr(new AD(Cse({sdkVersion:l4,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.warn(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.warn(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Yp(e)){if(!e.method.endsWith(ble))return;const r=e.params,{topic:n,message:i,publishedAt:s,attestation:o}=r.data,a={topic:n,message:i,publishedAt:s,transportType:Br.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(fN({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Xh(e)&&this.events.emit(Vn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Vn.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Eu(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(uo.payload,this.onPayloadHandler),this.provider.off(uo.connect,this.onConnectHandler),this.provider.off(uo.disconnect,this.onDisconnectHandler),this.provider.off(uo.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await VC();mce(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n==null?void 0:n.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Vn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},J.toMiliseconds(vle)))))}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}};var Uhe=Object.defineProperty,pN=Object.getOwnPropertySymbols,jhe=Object.prototype.hasOwnProperty,Fhe=Object.prototype.propertyIsEnumerable,g4=(t,e,r)=>e in t?Uhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gN=(t,e)=>{for(var r in e||(e={}))jhe.call(e,r)&&g4(t,r,e[r]);if(pN)for(var r of pN(e))Fhe.call(e,r)&&g4(t,r,e[r]);return t},as=(t,e,r)=>g4(t,typeof e!="symbol"?e+"":e,r);let ed=class extends dJ{constructor(e,r,n,i=Ua,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,as(this,"map",new Map),as(this,"version",Ele),as(this,"cached",[]),as(this,"initialized",!1),as(this,"getKey"),as(this,"storagePrefix",Ua),as(this,"recentlyDeleted",[]),as(this,"recentlyDeletedLimit",200),as(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Zi(o)?this.map.set(this.getKey(o),o):Vae(o)?this.map.set(o.id,o):Gae(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),as(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),as(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),as(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>ale(a[c],o[c]))):this.values)),as(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=gN(gN({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),as(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Kt(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:i}=me("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:n}=me("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}};var zhe=Object.defineProperty,qhe=(t,e,r)=>e in t?zhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vt=(t,e,r)=>qhe(t,typeof e!="symbol"?e+"":e,r);let Whe=class{constructor(e,r){this.core=e,this.logger=r,vt(this,"name",Ale),vt(this,"version",Cle),vt(this,"events",new Dp),vt(this,"pairings"),vt(this,"initialized",!1),vt(this,"storagePrefix",Ua),vt(this,"ignoredPayloadTypes",[jc]),vt(this,"registeredMethods",[]),vt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),vt(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),vt(this,"create",async n=>{this.isInitialized();const i=i4(),s=await this.core.crypto.setSymKey(i),o=An(J.FIVE_MINUTES),a={protocol:MD},c={topic:s,expiry:o,relay:a,active:!1,methods:n==null?void 0:n.methods},l=FC({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(Vu.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:n==null?void 0:n.transportType}),{topic:s,uri:l}}),vt(this,"pair",async n=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[Ea.pairing_started]}});this.isValidPair(n,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=jC(n.uri);i.props.properties.topic=s,i.addTrace(Ea.pairing_uri_validation_success),i.addTrace(Ea.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(Ea.existing_pairing),u.active)throw i.setError(Sc.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(Ea.pairing_not_expired)}const h=c||An(J.FIVE_MINUTES),d={topic:s,relay:a,expiry:h,active:!1,methods:l};this.core.expirer.set(s,h),await this.pairings.set(s,d),i.addTrace(Ea.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(Vu.create,d),i.addTrace(Ea.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(Ea.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(Sc.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(g){throw i.setError(Sc.subscribe_pairing_topic_failure),g}return i.addTrace(Ea.subscribe_pairing_topic_success),d}),vt(this,"activate",async({topic:n})=>{this.isInitialized();const i=An(J.FIVE_MINUTES);this.core.expirer.set(n,i),await this.pairings.update(n,{active:!0,expiry:i})}),vt(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=ju();this.events.once(qt("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}}),vt(this,"updateExpiry",async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})}),vt(this,"updateMetadata",async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})}),vt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),vt(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",nr("USER_DISCONNECTED")),await this.deletePairing(i))}),vt(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(i);return FC({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),vt(this,"sendRequest",async(n,i,s)=>{const o=es(i,s),a=await this.core.crypto.encode(n,o),c=x0[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),vt(this,"sendResult",async(n,i,s)=>{const o=Eu(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=x0[c].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),vt(this,"sendError",async(n,i,s)=>{const o=Gp(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=x0[c]?x0[c].res:x0.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),vt(this,"deletePairing",async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,nr("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])}),vt(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(i=>Ml(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))}),vt(this,"onRelayEventRequest",n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}}),vt(this,"onRelayEventResponse",async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),vt(this,"onPairingPingRequest",async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(Vu.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),vt(this,"onPairingPingResponse",(n,i)=>{const{id:s}=i;setTimeout(()=>{Pn(i)?this.events.emit(qt("pairing_ping",s),{}):ln(i)&&this.events.emit(qt("pairing_ping",s),{error:i.error})},500)}),vt(this,"onPairingDeleteRequest",async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Vu.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),vt(this,"onUnknownRpcMethodRequest",async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=nr("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}}),vt(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(nr("WC_METHOD_UNSUPPORTED",n))}),vt(this,"isValidPair",(n,i)=>{var s;if(!ps(n)){const{message:a}=me("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError(Sc.malformed_pairing_uri),new Error(a)}if(!Kae(n.uri)){const{message:a}=me("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError(Sc.malformed_pairing_uri),new Error(a)}const o=jC(n==null?void 0:n.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:a}=me("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(Sc.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=me("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(Sc.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&J.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(Sc.pairing_expired);const{message:a}=me("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),vt(this,"isValidPing",async n=>{if(!ps(n)){const{message:s}=me("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),vt(this,"isValidDisconnect",async n=>{if(!ps(n)){const{message:s}=me("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),vt(this,"isValidPairingTopic",async n=>{if(!fn(n,!1)){const{message:i}=me("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=me("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Ml(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=me("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}}),this.core=e,this.logger=Kt(r,this.name),this.pairings=new ed(this.core,this.logger,this.name,this.storagePrefix)}get context(){return hr(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Vn.message,async e=>{const{topic:r,message:n,transportType:i}=e;if(!this.pairings.keys.includes(r)||i===Br.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const s=await this.core.crypto.decode(r,n);try{Yp(s)?(this.core.history.set(r,s),this.onRelayEventRequest({topic:r,payload:s})):Xh(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id))}catch(o){this.logger.error(o)}})}registerExpirerEvents(){this.core.expirer.on(mo.expired,async e=>{const{topic:r}=KR(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Vu.expire,{topic:r}))})}};var Hhe=Object.defineProperty,Khe=(t,e,r)=>e in t?Hhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ii=(t,e,r)=>Khe(t,typeof e!="symbol"?e+"":e,r);let Vhe=class extends cJ{constructor(e,r){super(e,r),this.core=e,this.logger=r,ii(this,"records",new Map),ii(this,"events",new Rn.EventEmitter),ii(this,"name",Nle),ii(this,"version",Mle),ii(this,"cached",[]),ii(this,"initialized",!1),ii(this,"storagePrefix",Ua),ii(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ii(this,"set",(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:An(J.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Uo.created,o)}),ii(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=ln(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(Uo.updated,i))}),ii(this,"get",async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i))),ii(this,"delete",(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Uo.deleted,s)}}),this.persist()}),ii(this,"exists",async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1)),ii(this,"on",(n,i)=>{this.events.on(n,i)}),ii(this,"once",(n,i)=>{this.events.once(n,i)}),ii(this,"off",(n,i)=>{this.events.off(n,i)}),ii(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=Kt(r,this.name)}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:es(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=me("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Uo.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Uo.created,e=>{const r=Uo.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Uo.updated,e=>{const r=Uo.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Uo.deleted,e=>{const r=Uo.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(la.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{J.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(Uo.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Ghe=Object.defineProperty,Yhe=(t,e,r)=>e in t?Ghe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ri=(t,e,r)=>Yhe(t,typeof e!="symbol"?e+"":e,r);let Qhe=class extends pJ{constructor(e,r){super(e,r),this.core=e,this.logger=r,Ri(this,"expirations",new Map),Ri(this,"events",new Rn.EventEmitter),Ri(this,"name",Tle),Ri(this,"version",$le),Ri(this,"cached",[]),Ri(this,"initialized",!1),Ri(this,"storagePrefix",Ua),Ri(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ri(this,"has",n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Ri(this,"set",(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(mo.created,{target:s,expiration:o})}),Ri(this,"get",n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)}),Ri(this,"del",n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(mo.deleted,{target:i,expiration:s})}}),Ri(this,"on",(n,i)=>{this.events.on(n,i)}),Ri(this,"once",(n,i)=>{this.events.once(n,i)}),Ri(this,"off",(n,i)=>{this.events.off(n,i)}),Ri(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=Kt(r,this.name)}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Nse(e);if(typeof e=="number")return Mse(e);const{message:r}=me("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(mo.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=me("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;J.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(mo.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(la.pulse,()=>this.checkExpirations()),this.events.on(mo.created,e=>{const r=mo.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(mo.expired,e=>{const r=mo.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(mo.deleted,e=>{const r=mo.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Zhe=Object.defineProperty,Jhe=(t,e,r)=>e in t?Zhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mn=(t,e,r)=>Jhe(t,typeof e!="symbol"?e+"":e,r);let Xhe=class extends gJ{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,mn(this,"name",Ple),mn(this,"abortController"),mn(this,"isDevEnv"),mn(this,"verifyUrlV3",kle),mn(this,"storagePrefix",Ua),mn(this,"version",ND),mn(this,"publicKey"),mn(this,"fetchPromise"),mn(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&J.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),mn(this,"register",async i=>{if(!uy()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=rl(),u=this.startAbortTimer(J.ONE_SECOND*5),h=await new Promise((d,g)=>{const m=()=>{window.removeEventListener("message",$),l.body.removeChild(v),g("attestation aborted")};this.abortController.signal.addEventListener("abort",m);const v=l.createElement("iframe");v.src=c,v.style.display="none",v.addEventListener("error",m,{signal:this.abortController.signal});const $=_=>{if(_.data&&typeof _.data=="string")try{const x=JSON.parse(_.data);if(x.type==="verify_attestation"){if(fp(x.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(v),this.abortController.signal.removeEventListener("abort",m),window.removeEventListener("message",$),d(x.attestation===null?"":x.attestation)}}catch(x){this.logger.warn(x)}};l.body.appendChild(v),window.addEventListener("message",$,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",h),h}catch(l){this.logger.warn(l)}return""}),mn(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(fp(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,c)}),mn(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(J.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),mn(this,"getVerifyUrl",i=>{let s=i||Sg;return Rle.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Sg}`),s=Sg),s}),mn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(J.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),mn(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),mn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),mn(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),mn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),mn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),mn(this,"validateAttestation",(i,s)=>{const o=Oae(i,s.publicKey),a={hasExpired:J.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Kt(r,this.name),this.abortController=new AbortController,this.isDevEnv=n5(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return hr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),J.toMiliseconds(e))}};var ede=Object.defineProperty,tde=(t,e,r)=>e in t?ede(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mN=(t,e,r)=>tde(t,typeof e!="symbol"?e+"":e,r);let rde=class extends mJ{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,mN(this,"context",Dle),mN(this,"registerDeviceToken",async n=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=n,c=`${Lle}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=Kt(r,this.context)}};var nde=Object.defineProperty,yN=Object.getOwnPropertySymbols,ide=Object.prototype.hasOwnProperty,sde=Object.prototype.propertyIsEnumerable,m4=(t,e,r)=>e in t?nde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,C0=(t,e)=>{for(var r in e||(e={}))ide.call(e,r)&&m4(t,r,e[r]);if(yN)for(var r of yN(e))sde.call(e,r)&&m4(t,r,e[r]);return t},Ln=(t,e,r)=>m4(t,typeof e!="symbol"?e+"":e,r);let ode=class extends yJ{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,Ln(this,"context",Ule),Ln(this,"storagePrefix",Ua),Ln(this,"storageVersion",Ble),Ln(this,"events",new Map),Ln(this,"shouldPersist",!1),Ln(this,"init",async()=>{if(!n5())try{const i={eventId:fC(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:zR(this.core.relayer.protocol,this.core.relayer.version,l4)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),Ln(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,l=fC(),u=this.core.projectId||"",h=Date.now(),d=C0({eventId:l,timestamp:h,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,d),this.shouldPersist=!0),d}),Ln(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return C0(C0({},a),this.setMethods(a.eventId))}),Ln(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),Ln(this,"setEventListeners",()=>{this.core.heartbeat.on(la.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{J.fromMiliseconds(Date.now())-J.fromMiliseconds(i.timestamp)>jle&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),Ln(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),Ln(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),Ln(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),Ln(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Ln(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,C0(C0({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),Ln(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),Ln(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${Fle}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${l4}${s}`,{method:"POST",body:JSON.stringify(i)})}),Ln(this,"getAppDomain",()=>FR().url),this.logger=Kt(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}};var ade=Object.defineProperty,wN=Object.getOwnPropertySymbols,cde=Object.prototype.hasOwnProperty,lde=Object.prototype.propertyIsEnumerable,y4=(t,e,r)=>e in t?ade(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bN=(t,e)=>{for(var r in e||(e={}))cde.call(e,r)&&y4(t,r,e[r]);if(wN)for(var r of wN(e))lde.call(e,r)&&y4(t,r,e[r]);return t},gr=(t,e,r)=>y4(t,typeof e!="symbol"?e+"":e,r);let ude=class zD extends iJ{constructor(e){var r;super(e),gr(this,"protocol",CD),gr(this,"version",ND),gr(this,"name",c4),gr(this,"relayUrl"),gr(this,"projectId"),gr(this,"customStoragePrefix"),gr(this,"events",new Rn.EventEmitter),gr(this,"logger"),gr(this,"heartbeat"),gr(this,"relayer"),gr(this,"crypto"),gr(this,"storage"),gr(this,"history"),gr(this,"expirer"),gr(this,"pairing"),gr(this,"verify"),gr(this,"echoClient"),gr(this,"linkModeSupportedApps"),gr(this,"eventClient"),gr(this,"initialized",!1),gr(this,"logChunkController"),gr(this,"on",(o,a)=>this.events.on(o,a)),gr(this,"once",(o,a)=>this.events.once(o,a)),gr(this,"off",(o,a)=>this.events.off(o,a)),gr(this,"removeListener",(o,a)=>this.events.removeListener(o,a)),gr(this,"dispatchEnvelope",({topic:o,message:a,sessionExists:c})=>{if(!o||!a)return;const l={topic:o,message:a,publishedAt:Date.now(),transportType:Br.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:c})}),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||TD,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const n=tl({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:cle.logger,name:c4}),{logger:i,chunkLoggerController:s}=LI({opts:n,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=s,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,a;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((a=this.logChunkController)==null||a.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Kt(i,this.name),this.heartbeat=new l7,this.crypto=new mhe(this,this.logger,e==null?void 0:e.keychain),this.history=new Vhe(this,this.logger),this.expirer=new Qhe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new NZ(bN(bN({},lle),e==null?void 0:e.storageOptions)),this.relayer=new Bhe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Whe(this,this.logger),this.verify=new Xhe(this,this.logger,this.storage),this.echoClient=new rde(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new ode(this,this.logger,e==null?void 0:e.telemetryEnabled)}static async init(e){const r=new zD(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(_le,n),r}get context(){return hr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(nN,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(nN)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const hde=ude;var dde=Object.defineProperty,fde=(t,e,r)=>e in t?dde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vN=(t,e,r)=>fde(t,typeof e!="symbol"?e+"":e,r);let pde=class{constructor(e){this.opts=e,vN(this,"protocol","wc"),vN(this,"version",2)}},gde=class{constructor(e){this.client=e}};const qD="wc",WD=2,HD="client",f5=`${qD}@${WD}:${HD}:`,l_={name:HD,logger:"error"},EN="WALLETCONNECT_DEEPLINK_CHOICE",mde="proposal",_N="Proposal expired",yde="session",Sd=J.SEVEN_DAYS,wde="engine",Bn={wc_sessionPropose:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1104},res:{ttl:J.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1106},res:{ttl:J.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1112},res:{ttl:J.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1114},res:{ttl:J.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:J.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:J.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1119}}},u_={min:J.FIVE_MINUTES,max:J.SEVEN_DAYS},ma={idle:"IDLE",active:"ACTIVE"},SN={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},bde="request",vde=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Ede="wc",_de="auth",Sde="authKeys",xde="pairingTopics",Ide="requests",a2=`${Ede}@${1.5}:${_de}:`,C1=`${a2}:PUB_KEY`;var Ade=Object.defineProperty,Cde=Object.defineProperties,Nde=Object.getOwnPropertyDescriptors,xN=Object.getOwnPropertySymbols,Mde=Object.prototype.hasOwnProperty,Tde=Object.prototype.propertyIsEnumerable,w4=(t,e,r)=>e in t?Ade(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yr=(t,e)=>{for(var r in e||(e={}))Mde.call(e,r)&&w4(t,r,e[r]);if(xN)for(var r of xN(e))Tde.call(e,r)&&w4(t,r,e[r]);return t},cs=(t,e)=>Cde(t,Nde(e)),he=(t,e,r)=>w4(t,typeof e!="symbol"?e+"":e,r);let $de=class extends gde{constructor(e){super(e),he(this,"name",wde),he(this,"events",new Dp),he(this,"initialized",!1),he(this,"requestQueue",{state:ma.idle,queue:[]}),he(this,"sessionRequestQueue",{state:ma.idle,queue:[]}),he(this,"requestQueueDelay",J.ONE_SECOND),he(this,"expectedPairingMethodMap",new Map),he(this,"recentlyDeletedMap",new Map),he(this,"recentlyDeletedLimit",200),he(this,"relayMessageCache",[]),he(this,"pendingSessions",new Map),he(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Bn)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay)))}),he(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=cs(Yr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:c}=n;let l=i,u,h=!1;try{if(l){const k=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=k.active}}catch(k){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),k}if(!l||!h){const{topic:k,uri:D}=await this.client.core.pairing.create();l=k,u=D}if(!l){const{message:k}=me("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(k)}const d=await this.client.core.crypto.generateKeyPair(),g=Bn.wc_sessionPropose.req.ttl||J.FIVE_MINUTES,m=An(g),v=cs(Yr({requiredNamespaces:s,optionalNamespaces:o,relays:c??[{protocol:MD}],proposer:{publicKey:d,metadata:this.client.metadata},expiryTimestamp:m,pairingTopic:l},a&&{sessionProperties:a}),{id:Kn()}),$=qt("session_connect",v.id),{reject:_,resolve:x,done:A}=ju(g,_N),T=({id:k})=>{k===v.id&&(this.client.events.off("proposal_expire",T),this.pendingSessions.delete(v.id),this.events.emit($,{error:{message:_N,code:0}}))};return this.client.events.on("proposal_expire",T),this.events.once($,({error:k,session:D})=>{this.client.events.off("proposal_expire",T),k?_(k):D&&x(D)}),await this.sendRequest({topic:l,method:"wc_sessionPropose",params:v,throwOnFailedPublish:!0,clientRpcId:v.id}),await this.setProposal(v.id,v),{uri:u,approval:A}}),he(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),he(this,"approve",async r=>{var n,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r==null?void 0:r.id)==null?void 0:n.toString(),trace:[jo.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(F){throw o.setError(Nu.no_internet_connection),F}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(F){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(Nu.proposal_not_found),F}try{await this.isValidApprove(r)}catch(F){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Nu.session_approve_namespace_validation_failure),F}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,sessionConfig:h}=r,d=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:g,proposer:m,requiredNamespaces:v,optionalNamespaces:$}=d;let _=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:g});_||(_=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:jo.session_approve_started,properties:{topic:g,trace:[jo.session_approve_started,jo.session_namespaces_validation_success]}}));const x=await this.client.core.crypto.generateKeyPair(),A=m.publicKey,T=await this.client.core.crypto.generateSharedKey(x,A),k=Yr(Yr({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:x,metadata:this.client.metadata},expiry:An(Sd)},u&&{sessionProperties:u}),h&&{sessionConfig:h}),D=Br.relay;_.addTrace(jo.subscribing_session_topic);try{await this.client.core.relayer.subscribe(T,{transportType:D})}catch(F){throw _.setError(Nu.subscribe_session_topic_failure),F}_.addTrace(jo.subscribe_session_topic_success);const L=cs(Yr({},k),{topic:T,requiredNamespaces:v,optionalNamespaces:$,pairingTopic:g,acknowledged:!1,self:k.controller,peer:{publicKey:m.publicKey,metadata:m.metadata},controller:x,transportType:Br.relay});await this.client.session.set(T,L),_.addTrace(jo.store_session);try{_.addTrace(jo.publishing_session_settle),await this.sendRequest({topic:T,method:"wc_sessionSettle",params:k,throwOnFailedPublish:!0}).catch(F=>{throw _==null||_.setError(Nu.session_settle_publish_failure),F}),_.addTrace(jo.session_settle_publish_success),_.addTrace(jo.publishing_session_approve),await this.sendResult({id:a,topic:g,result:{relay:{protocol:c??"irn"},responderPublicKey:x},throwOnFailedPublish:!0}).catch(F=>{throw _==null||_.setError(Nu.session_approve_publish_failure),F}),_.addTrace(jo.session_approve_publish_success)}catch(F){throw this.client.logger.error(F),this.client.session.delete(T,nr("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(T),F}return this.client.core.eventClient.deleteEvent({eventId:_.eventId}),await this.client.core.pairing.updateMetadata({topic:g,metadata:m.metadata}),await this.client.proposal.delete(a,nr("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:g}),await this.setExpiry(T,An(Sd)),{topic:T,acknowledged:()=>Promise.resolve(this.client.session.get(T))}}),he(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:i}=r;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&(await this.sendError({id:n,topic:s,error:i,rpcOpts:Bn.wc_sessionPropose.reject}),await this.client.proposal.delete(n,nr("USER_DISCONNECTED")))}),he(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(h){throw this.client.logger.error("update() -> isValidUpdate() failed"),h}const{topic:n,namespaces:i}=r,{done:s,resolve:o,reject:a}=ju(),c=Kn(),l=Hs().toString(),u=this.client.session.get(n).namespaces;return this.events.once(qt("session_update",c),({error:h})=>{h?a(h):o()}),await this.client.session.update(n,{namespaces:i}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(h=>{this.client.logger.error(h),this.client.session.update(n,{namespaces:u}),a(h)}),{acknowledged:s}}),he(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,i=Kn(),{done:s,resolve:o,reject:a}=ju();return this.events.once(qt("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,An(Sd)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),he(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(_){throw this.client.logger.error("request() -> isValidRequest() failed"),_}const{chainId:n,request:i,topic:s,expiry:o=Bn.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);(a==null?void 0:a.transportType)===Br.relay&&await this.confirmOnlineStateOrThrow();const c=Kn(),l=Hs().toString(),{done:u,resolve:h,reject:d}=ju(o,"Request expired. Please try again.");this.events.once(qt("session_request",c),({error:_,result:x})=>{_?d(_):h(x)});const g="wc_sessionRequest",m=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(m)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:g,params:{request:cs(Yr({},i),{expiryTimestamp:An(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:m}).catch(_=>d(_)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),await u();const v={request:cs(Yr({},i),{expiryTimestamp:An(o)}),chainId:n},$=this.shouldSetTVF(g,v);return await Promise.all([new Promise(async _=>{await this.sendRequest(Yr({clientRpcId:c,relayRpcId:l,topic:s,method:g,params:v,expiry:o,throwOnFailedPublish:!0},$&&{tvf:this.getTVFParams(c,v)})).catch(x=>d(x)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),_()}),new Promise(async _=>{var x;if(!((x=a.sessionConfig)!=null&&x.disableDeepLink)){const A=await Ose(this.client.core.storage,EN);await Tse({id:c,topic:s,wcDeepLink:A})}_()}),u()]).then(_=>_[2])}),he(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i,o=this.client.session.get(n);o.transportType===Br.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Pn(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0,appLink:a}):ln(i)&&await this.sendError({id:s,topic:n,error:i.error,appLink:a}),this.cleanupAfterResponse(r)}),he(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=Kn(),s=Hs().toString(),{done:o,resolve:a,reject:c}=ju();this.events.once(qt("session_ping",i),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),he(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r,o=Hs().toString(),a=Kn();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),he(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:nr("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=me("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}}),he(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>Wae(n,r)))),he(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),he(this,"authenticate",async(r,n)=>{var i;this.isInitialized(),this.isValidAuthenticate(r);const s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?Br.link_mode:Br.relay;o===Br.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:h,type:d,exp:g,nbf:m,methods:v=[],expiry:$}=r,_=[...r.resources||[]],{topic:x,uri:A}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:x,uri:A}});const T=await this.client.core.crypto.generateKeyPair(),k=A1(T);if(await Promise.all([this.client.auth.authKeys.set(C1,{responseTopic:k,publicKey:T}),this.client.auth.pairingTopics.set(k,{topic:k,pairingTopic:x})]),await this.client.core.relayer.subscribe(k,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${x}`),v.length>0){const{namespace:S}=Vf(a[0]);let y=Soe(S,"request",v);I1(_)&&(y=Ioe(y,_.pop())),_.push(y)}const D=$&&$>Bn.wc_sessionAuthenticate.req.ttl?$:Bn.wc_sessionAuthenticate.req.ttl,L={authPayload:{type:d??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:h,iat:new Date().toISOString(),exp:g,nbf:m,resources:_},requester:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:An(D)},F={eip155:{chains:a,methods:[...new Set(["personal_sign",...v])],events:["chainChanged","accountsChanged"]}},B={requiredNamespaces:{},optionalNamespaces:F,relays:[{protocol:"irn"}],pairingTopic:x,proposer:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:An(Bn.wc_sessionPropose.req.ttl),id:Kn()},{done:q,resolve:R,reject:E}=ju(D,"Request expired"),b=Kn(),f=qt("session_connect",B.id),p=qt("session_request",b),w=async({error:S,session:y})=>{this.events.off(p,N),S?E(S):y&&R({session:y})},N=async S=>{var y,C,I;if(await this.deletePendingAuthRequest(b,{message:"fulfilled",code:0}),S.error){const ie=nr("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return S.error.code===ie.code?void 0:(this.events.off(f,w),E(S.error.message))}await this.deleteProposal(B.id),this.events.off(f,w);const{cacaos:U,responder:K}=S.result,V=[],te=[];for(const ie of U){await EC({cacao:ie,projectId:this.client.core.projectId})||(this.client.logger.error(ie,"Signature verification failed"),E(nr("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ve}=ie,Ne=I1(ve.resources),Ae=[JS(ve.iss)],et=Fb(ve.iss);if(Ne){const tt=_C(Ne),je=SC(Ne);V.push(...tt),Ae.push(...je)}for(const tt of Ae)te.push(`${tt}:${et}`)}const se=await this.client.core.crypto.generateSharedKey(T,K.publicKey);let ce;V.length>0&&(ce={topic:se,acknowledged:!0,self:{publicKey:T,metadata:this.client.metadata},peer:K,controller:K.publicKey,expiry:An(Sd),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:x,namespaces:zC([...new Set(V)],[...new Set(te)]),transportType:o},await this.client.core.relayer.subscribe(se,{transportType:o}),await this.client.session.set(se,ce),x&&await this.client.core.pairing.updateMetadata({topic:x,metadata:K.metadata}),ce=this.client.session.get(se)),(y=this.client.metadata.redirect)!=null&&y.linkMode&&(C=K.metadata.redirect)!=null&&C.linkMode&&(I=K.metadata.redirect)!=null&&I.universal&&n&&(this.client.core.addLinkModeSupportedApp(K.metadata.redirect.universal),this.client.session.update(se,{transportType:Br.link_mode})),R({auths:U,session:ce})};this.events.once(f,w),this.events.once(p,N);let M;try{if(s){const S=es("wc_sessionAuthenticate",L,b);this.client.core.history.set(x,S);const y=await this.client.core.crypto.encode("",S,{type:py,encoding:_0});M=bw(n,x,y)}else await Promise.all([this.sendRequest({topic:x,method:"wc_sessionAuthenticate",params:L,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:b}),this.sendRequest({topic:x,method:"wc_sessionPropose",params:B,expiry:Bn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:B.id})])}catch(S){throw this.events.off(f,w),this.events.off(p,N),S}return await this.setProposal(B.id,B),await this.setAuthRequest(b,{request:cs(Yr({},L),{verifyContext:{}}),pairingTopic:x,transportType:o}),{uri:M??A,response:q}}),he(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:i}=r,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[Mu.authenticated_session_approve_started]}});try{this.isInitialized()}catch($){throw s.setError(I0.no_internet_connection),$}const o=this.getPendingAuthRequest(n);if(!o)throw s.setError(I0.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||Br.relay;a===Br.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=A1(c),h={type:jc,receiverPublicKey:c,senderPublicKey:l},d=[],g=[];for(const $ of i){if(!await EC({cacao:$,projectId:this.client.core.projectId})){s.setError(I0.invalid_cacao);const k=nr("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:u,error:k,encodeOpts:h}),new Error(k.message)}s.addTrace(Mu.cacaos_verified);const{p:_}=$,x=I1(_.resources),A=[JS(_.iss)],T=Fb(_.iss);if(x){const k=_C(x),D=SC(x);d.push(...k),A.push(...D)}for(const k of A)g.push(`${k}:${T}`)}const m=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace(Mu.create_authenticated_session_topic);let v;if((d==null?void 0:d.length)>0){v={topic:m,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:An(Sd),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:zC([...new Set(d)],[...new Set(g)]),transportType:a},s.addTrace(Mu.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(m,{transportType:a})}catch($){throw s.setError(I0.subscribe_authenticated_session_topic_failure),$}s.addTrace(Mu.subscribe_authenticated_session_topic_success),await this.client.session.set(m,v),s.addTrace(Mu.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(Mu.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:n,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch($){throw s.setError(I0.authenticated_session_approve_publish_failure),$}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:v}}),he(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===Br.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=A1(o),l={type:jc,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:i,encodeOpts:l,rpcOpts:Bn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,nr("USER_DISCONNECTED"))}),he(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:i}=r;return tD(n,i)}),he(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),he(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),he(this,"deleteSession",async r=>{var n;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,nr("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(EN).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,nr("USER_DISCONNECTED"))}),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=ma.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),he(this,"deleteProposal",async(r,n)=>{if(n)try{const i=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(Nu.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,nr("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),he(this,"deletePendingSessionRequest",async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=ma.idle,this.client.events.emit("session_request_expire",{id:r}))}),he(this,"deletePendingAuthRequest",async(r,n,i=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])}),he(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),he(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,An(Bn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),he(this,"setAuthRequest",async(r,n)=>{const{request:i,pairingTopic:s,transportType:o=Br.relay}=n;this.client.core.expirer.set(r,i.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:r,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),he(this,"setPendingSessionRequest",async r=>{const{id:n,topic:i,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||An(Bn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o})}),he(this,"sendRequest",async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:h}=r,d=es(i,s,c);let g;const m=!!u;try{const _=m?_0:Hl;g=await this.client.core.crypto.encode(n,d,{encoding:_})}catch(_){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),_}let v;if(vde.includes(i)){const _=Mc(JSON.stringify(d)),x=Mc(g);v=await this.client.core.verify.register({id:x,decryptedId:_})}const $=Bn[i].req;if($.attestation=v,o&&($.ttl=o),a&&($.id=a),this.client.core.history.set(n,d),m){const _=bw(u,n,g);await global.Linking.openURL(_,this.client.name)}else{const _=Bn[i].req;o&&(_.ttl=o),a&&(_.id=a),_.tvf=cs(Yr({},h),{correlationId:d.id}),l?(_.internal=cs(Yr({},_.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,g,_)):this.client.core.relayer.publish(n,g,_).catch(x=>this.client.logger.error(x))}return d.id}),he(this,"sendResult",async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,l=Eu(n,s);let u;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const m=h?_0:Hl;u=await this.client.core.crypto.encode(i,l,cs(Yr({},a||{}),{encoding:m}))}catch(m){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),m}let d,g;try{d=await this.client.core.history.get(i,n);const m=d.request;try{this.shouldSetTVF(m.method,m.params)&&(g=this.getTVFParams(n,m.params,s))}catch(v){this.client.logger.warn("sendResult() -> getTVFParams() failed",v)}}catch(m){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),m}if(h){const m=bw(c,i,u);await global.Linking.openURL(m,this.client.name)}else{const m=d.request.method,v=Bn[m].res;v.tvf=cs(Yr({},g),{correlationId:n}),o?(v.internal=cs(Yr({},v.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,v)):this.client.core.relayer.publish(i,u,v).catch($=>this.client.logger.error($))}await this.client.core.history.resolve(l)}),he(this,"sendError",async r=>{const{id:n,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=r,l=Gp(n,s);let u;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=h?_0:Hl;u=await this.client.core.crypto.encode(i,l,cs(Yr({},o||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),g}let d;try{d=await this.client.core.history.get(i,n)}catch(g){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),g}if(h){const g=bw(c,i,u);await global.Linking.openURL(g,this.client.name)}else{const g=d.request.method,m=a||Bn[g].res;this.client.core.relayer.publish(i,u,m)}await this.client.core.history.resolve(l)}),he(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;Ml(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Ml(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])}),he(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),he(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ma.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ma.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=ma.idle}),he(this,"processRequest",async r=>{const{topic:n,payload:i,attestation:s,transportType:o,encryptedId:a}=r,c=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,i);case"wc_sessionPing":return await this.onSessionPingRequest(n,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),he(this,"onRelayEventResponse",async r=>{const{topic:n,payload:i,transportType:s}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),he(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:i}=me("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),he(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),he(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:i,attestation:s,encryptedId:o}=r,{params:a,id:c}=i;try{const l=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Sc.proposal_listener_not_found)),this.isValidConnect(Yr({},i.params));const u=a.expiryTimestamp||An(Bn.wc_sessionPropose.req.ttl),h=Yr({id:c,pairingTopic:n,expiryTimestamp:u},a);await this.setProposal(c,h);const d=await this.getVerifyContext({attestationId:s,hash:Mc(JSON.stringify(i)),encryptedId:o,metadata:h.proposer.metadata});l==null||l.addTrace(Ea.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:h,verifyContext:d})}catch(l){await this.sendError({id:c,topic:n,error:l,rpcOpts:Bn.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),he(this,"onSessionProposeResponse",async(r,n,i)=>{const{id:s}=n;if(Pn(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:r,proposalId:s,publicKey:c});const h=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:r})}else if(ln(n)){await this.client.proposal.delete(s,nr("USER_DISCONNECTED"));const o=qt("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),he(this,"onSessionSettleRequest",async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,sessionConfig:h}=n.params,d=[...this.pendingSessions.values()].find(v=>v.sessionTopic===r);if(!d)return this.client.logger.error(`Pending session not found for topic ${r}`);const g=this.client.proposal.get(d.proposalId),m=cs(Yr(Yr({topic:r,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:d.pairingTopic,requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces,controller:a.publicKey,self:{publicKey:d.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),h&&{sessionConfig:h}),{transportType:Br.relay});await this.client.session.set(m.topic,m),await this.setExpiry(m.topic,m.expiry),await this.client.core.pairing.updateMetadata({topic:d.pairingTopic,metadata:m.peer.metadata}),this.client.events.emit("session_connect",{session:m}),this.events.emit(qt("session_connect",d.proposalId),{session:m}),this.pendingSessions.delete(d.proposalId),this.deleteProposal(d.proposalId,!1),this.cleanupDuplicatePairings(m),await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),he(this,"onSessionSettleResponse",async(r,n)=>{const{id:i}=n;Pn(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(qt("session_approve",i),{})):ln(n)&&(await this.client.session.delete(r,nr("USER_DISCONNECTED")),this.events.emit(qt("session_approve",i),{error:n.error}))}),he(this,"onSessionUpdateRequest",async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=S0.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:nr("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Yr({topic:r},i));try{S0.set(o,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(c){throw S0.delete(o),c}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),he(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),he(this,"onSessionUpdateResponse",(r,n)=>{const{id:i}=n,s=qt("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Pn(n)?this.events.emit(qt("session_update",i),{}):ln(n)&&this.events.emit(qt("session_update",i),{error:n.error})}),he(this,"onSessionExtendRequest",async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,An(Sd)),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),he(this,"onSessionExtendResponse",(r,n)=>{const{id:i}=n,s=qt("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Pn(n)?this.events.emit(qt("session_extend",i),{}):ln(n)&&this.events.emit(qt("session_extend",i),{error:n.error})}),he(this,"onSessionPingRequest",async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),he(this,"onSessionPingResponse",(r,n)=>{const{id:i}=n,s=qt("session_ping",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);setTimeout(()=>{Pn(n)?this.events.emit(qt("session_ping",i),{}):ln(n)&&this.events.emit(qt("session_ping",i),{error:n.error})},500)}),he(this,"onSessionDeleteRequest",async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(Vn.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:nr("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),he(this,"onSessionRequest",async r=>{var n,i,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=r,{id:h,params:d}=a;try{await this.isValidRequest(Yr({topic:o},d));const g=this.client.session.get(o),m=await this.getVerifyContext({attestationId:c,hash:Mc(JSON.stringify(es("wc_sessionRequest",d,h))),encryptedId:l,metadata:g.peer.metadata,transportType:u}),v={id:h,topic:o,params:d,verifyContext:m};await this.setPendingSessionRequest(v),u===Br.link_mode&&(n=g.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=g.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(v):(this.addSessionRequestToSessionRequestQueue(v),this.processSessionRequestQueue())}catch(g){await this.sendError({id:h,topic:o,error:g}),this.client.logger.error(g)}}),he(this,"onSessionRequestResponse",(r,n)=>{const{id:i}=n,s=qt("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Pn(n)?this.events.emit(qt("session_request",i),{result:n.result}):ln(n)&&this.events.emit(qt("session_request",i),{error:n.error})}),he(this,"onSessionEventRequest",async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=S0.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Yr({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),S0.set(o,i)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),he(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Pn(n)?this.events.emit(qt("session_request",i),{result:n.result}):ln(n)&&this.events.emit(qt("session_request",i),{error:n.error})}),he(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:l,authPayload:u,expiryTimestamp:h}=s.params,d=await this.getVerifyContext({attestationId:o,hash:Mc(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),g={requester:l,pairingTopic:i,id:s.id,authPayload:u,verifyContext:d,expiryTimestamp:h};await this.setAuthRequest(s.id,{request:g,pairingTopic:i,transportType:c}),c===Br.link_mode&&(n=l.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:d})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),d=this.getAppLinkIfEnabled(s.params.requester.metadata,c),g={type:jc,receiverPublicKey:u,senderPublicKey:h};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:g,rpcOpts:Bn.wc_sessionAuthenticate.autoReject,appLink:d})}}),he(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),he(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ma.idle,this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay))}),he(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=qt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(qt("session_request",s.request.id),{error:n})})}),he(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ma.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ma.active,this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),he(this,"emitSessionRequest",r=>{this.client.events.emit("session_request",r)}),he(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:es("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties},n.id)})}),he(this,"isValidConnect",async r=>{if(!ps(r)){const{message:c}=me("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(Zi(n)||await this.isValidPairingTopic(n),!rce(a)){const{message:c}=me("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(c)}!Zi(i)&&cm(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!Zi(s)&&cm(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Zi(o)||this.validateSessionProps(o,"sessionProperties")}),he(this,"validateNamespaces",(r,n)=>{const i=tce(r,"connect()",n);if(i)throw new Error(i.message)}),he(this,"isValidApprove",async r=>{if(!ps(r))throw new Error(me("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const a=this.client.proposal.get(n),c=i_(i,"approve()");if(c)throw new Error(c.message);const l=HC(a.requiredNamespaces,i,"approve()");if(l)throw new Error(l.message);if(!fn(s,!0)){const{message:u}=me("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(u)}Zi(o)||this.validateSessionProps(o,"sessionProperties")}),he(this,"isValidReject",async r=>{if(!ps(r)){const{message:s}=me("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!ice(i)){const{message:s}=me("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),he(this,"isValidSessionSettleRequest",r=>{if(!ps(r)){const{message:l}=me("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!wD(n)){const{message:l}=me("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=Yae(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=i_(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Ml(o)){const{message:l}=me("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),he(this,"isValidUpdate",async r=>{if(!ps(r)){const{message:c}=me("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=i_(i,"update()");if(o)throw new Error(o.message);const a=HC(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),he(this,"isValidExtend",async r=>{if(!ps(r)){const{message:i}=me("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),he(this,"isValidRequest",async r=>{if(!ps(r)){const{message:c}=me("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!WC(a,s)){const{message:c}=me("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!sce(i)){const{message:c}=me("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!cce(a,s,i.method)){const{message:c}=me("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!dce(o,u_)){const{message:c}=me("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${u_.min} and ${u_.max}`);throw new Error(c)}}),he(this,"isValidRespond",async r=>{var n;if(!ps(r)){const{message:o}=me("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(o){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!oce(s)){const{message:o}=me("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),he(this,"isValidPing",async r=>{if(!ps(r)){const{message:i}=me("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),he(this,"isValidEmit",async r=>{if(!ps(r)){const{message:a}=me("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!WC(o,s)){const{message:a}=me("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!ace(i)){const{message:a}=me("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!lce(o,s,i.name)){const{message:a}=me("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),he(this,"isValidDisconnect",async r=>{if(!ps(r)){const{message:i}=me("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),he(this,"isValidAuthenticate",r=>{const{chains:n,uri:i,domain:s,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!fn(i,!1))throw new Error("uri is required parameter");if(!fn(s,!1))throw new Error("domain is required parameter");if(!fn(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>Vf(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Vf(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),he(this,"getVerifyContext",async r=>{const{attestationId:n,hash:i,encryptedId:s,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||Sg,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Br.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),he(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach(i=>{if(!fn(i,!1)){const{message:s}=me("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}),he(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),he(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),he(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:i}=me("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}}),he(this,"isLinkModeEnabled",(r,n)=>{var i,s,o,a,c,l,u,h,d;return!r||n!==Br.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=r==null?void 0:r.redirect)==null?void 0:u.universal)!==void 0&&((h=r==null?void 0:r.redirect)==null?void 0:h.universal)!==""&&((d=r==null?void 0:r.redirect)==null?void 0:d.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),he(this,"getAppLinkIfEnabled",(r,n)=>{var i;return this.isLinkModeEnabled(r,n)?(i=r==null?void 0:r.redirect)==null?void 0:i.universal:void 0}),he(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=dC(r,"topic")||"",i=decodeURIComponent(dC(r,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:Br.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})}),he(this,"registerLinkModeListeners",async()=>{var r;if(n5()||vu()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),he(this,"shouldSetTVF",(r,n)=>{if(!n||r!=="wc_sessionRequest")return!1;const{request:i}=n;return Object.keys(SN).includes(i.method)}),he(this,"getTVFParams",(r,n,i)=>{var s,o;try{const a=n.request.method,c=this.extractTxHashesFromResult(a,i);return cs(Yr({correlationId:r,rpcMethods:[a],chainId:n.chainId},this.isValidContractData(n.request.params)&&{contractAddresses:[(o=(s=n.request.params)==null?void 0:s[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),he(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const i=(r==null?void 0:r.data)||((n=r==null?void 0:r[0])==null?void 0:n.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),he(this,"extractTxHashesFromResult",(r,n)=>{try{const i=SN[r];if(typeof n=="string")return[n];const s=n[i.key];if(Oh(s))return s;if(typeof s=="string")return[s]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Vn.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(C1)?this.client.auth.authKeys.get(C1):{publicKey:void 0},a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:s===Br.link_mode?_0:Hl});try{Yp(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a,attestation:i,transportType:s,encryptedId:Mc(n)})):Xh(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s})}catch(c){this.client.logger.error(c)}}registerExpirerEvents(){this.client.core.expirer.on(mo.expired,async e=>{const{topic:r,id:n}=KR(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,me("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,me("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Vu.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Vu.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!fn(e,!1)){const{message:r}=me("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=me("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Ml(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=me("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!fn(e,!1)){const{message:r}=me("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=me("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Ml(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=me("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=me("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(fn(e,!1)){const{message:r}=me("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=me("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!nce(e)){const{message:r}=me("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=me("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Ml(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=me("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}},Pde=class extends ed{constructor(e,r){super(e,r,mde,f5),this.core=e,this.logger=r}},Ode=class extends ed{constructor(e,r){super(e,r,yde,f5),this.core=e,this.logger=r}},kde=class extends ed{constructor(e,r){super(e,r,bde,f5,n=>n.id),this.core=e,this.logger=r}},Rde=class extends ed{constructor(e,r){super(e,r,Sde,a2,()=>C1),this.core=e,this.logger=r}},Dde=class extends ed{constructor(e,r){super(e,r,xde,a2),this.core=e,this.logger=r}},Lde=class extends ed{constructor(e,r){super(e,r,Ide,a2,n=>n.id),this.core=e,this.logger=r}};var Bde=Object.defineProperty,Ude=(t,e,r)=>e in t?Bde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,h_=(t,e,r)=>Ude(t,typeof e!="symbol"?e+"":e,r);let jde=class{constructor(e,r){this.core=e,this.logger=r,h_(this,"authKeys"),h_(this,"pairingTopics"),h_(this,"requests"),this.authKeys=new Rde(this.core,this.logger),this.pairingTopics=new Dde(this.core,this.logger),this.requests=new Lde(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}};var Fde=Object.defineProperty,zde=(t,e,r)=>e in t?Fde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Et=(t,e,r)=>zde(t,typeof e!="symbol"?e+"":e,r);let qde=class KD extends pde{constructor(e){super(e),Et(this,"protocol",qD),Et(this,"version",WD),Et(this,"name",l_.name),Et(this,"metadata"),Et(this,"core"),Et(this,"logger"),Et(this,"events",new Rn.EventEmitter),Et(this,"engine"),Et(this,"session"),Et(this,"proposal"),Et(this,"pendingRequest"),Et(this,"auth"),Et(this,"signConfig"),Et(this,"on",(n,i)=>this.events.on(n,i)),Et(this,"once",(n,i)=>this.events.once(n,i)),Et(this,"off",(n,i)=>this.events.off(n,i)),Et(this,"removeListener",(n,i)=>this.events.removeListener(n,i)),Et(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),Et(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"update",async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"request",async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"find",n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),Et(this,"authenticate",async(n,i)=>{try{return await this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}}),Et(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),Et(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),this.name=(e==null?void 0:e.name)||l_.name,this.metadata=(e==null?void 0:e.metadata)||FR(),this.signConfig=e==null?void 0:e.signConfig;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:wu(tl({level:(e==null?void 0:e.logger)||l_.logger}));this.core=(e==null?void 0:e.core)||new hde(e),this.logger=Kt(r,this.name),this.session=new Ode(this.core,this.logger),this.proposal=new Pde(this.core,this.logger),this.pendingRequest=new kde(this.core,this.logger),this.engine=new $de(this),this.auth=new jde(this.core,this.logger)}static async init(e){const r=new KD(e);return await r.initialize(),r}get context(){return hr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},J.toMiliseconds(J.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var b4={exports:{}};(function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof _r<"u"&&_r,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof _r<"u"&&_r||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(p){return p&&DataView.prototype.isPrototypeOf(p)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(p){return p&&u.indexOf(Object.prototype.toString.call(p))>-1};function d(p){if(typeof p!="string"&&(p=String(p)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(p)||p==="")throw new TypeError('Invalid character in header field name: "'+p+'"');return p.toLowerCase()}function g(p){return typeof p!="string"&&(p=String(p)),p}function m(p){var w={next:function(){var N=p.shift();return{done:N===void 0,value:N}}};return c.iterable&&(w[Symbol.iterator]=function(){return w}),w}function v(p){this.map={},p instanceof v?p.forEach(function(w,N){this.append(N,w)},this):Array.isArray(p)?p.forEach(function(w){if(w.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+w.length);this.append(w[0],w[1])},this):p&&Object.getOwnPropertyNames(p).forEach(function(w){this.append(w,p[w])},this)}v.prototype.append=function(p,w){p=d(p),w=g(w);var N=this.map[p];this.map[p]=N?N+", "+w:w},v.prototype.delete=function(p){delete this.map[d(p)]},v.prototype.get=function(p){return p=d(p),this.has(p)?this.map[p]:null},v.prototype.has=function(p){return this.map.hasOwnProperty(d(p))},v.prototype.set=function(p,w){this.map[d(p)]=g(w)},v.prototype.forEach=function(p,w){for(var N in this.map)this.map.hasOwnProperty(N)&&p.call(w,this.map[N],N,this)},v.prototype.keys=function(){var p=[];return this.forEach(function(w,N){p.push(N)}),m(p)},v.prototype.values=function(){var p=[];return this.forEach(function(w){p.push(w)}),m(p)},v.prototype.entries=function(){var p=[];return this.forEach(function(w,N){p.push([N,w])}),m(p)},c.iterable&&(v.prototype[Symbol.iterator]=v.prototype.entries);function $(p){if(!p._noBody){if(p.bodyUsed)return Promise.reject(new TypeError("Already read"));p.bodyUsed=!0}}function _(p){return new Promise(function(w,N){p.onload=function(){w(p.result)},p.onerror=function(){N(p.error)}})}function x(p){var w=new FileReader,N=_(w);return w.readAsArrayBuffer(p),N}function A(p){var w=new FileReader,N=_(w),M=/charset=([A-Za-z0-9_-]+)/.exec(p.type),S=M?M[1]:"utf-8";return w.readAsText(p,S),N}function T(p){for(var w=new Uint8Array(p),N=new Array(w.length),M=0;M<w.length;M++)N[M]=String.fromCharCode(w[M]);return N.join("")}function k(p){if(p.slice)return p.slice(0);var w=new Uint8Array(p.byteLength);return w.set(new Uint8Array(p)),w.buffer}function D(){return this.bodyUsed=!1,this._initBody=function(p){this.bodyUsed=this.bodyUsed,this._bodyInit=p,p?typeof p=="string"?this._bodyText=p:c.blob&&Blob.prototype.isPrototypeOf(p)?this._bodyBlob=p:c.formData&&FormData.prototype.isPrototypeOf(p)?this._bodyFormData=p:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)?this._bodyText=p.toString():c.arrayBuffer&&c.blob&&l(p)?(this._bodyArrayBuffer=k(p.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(p)||h(p))?this._bodyArrayBuffer=k(p):this._bodyText=p=Object.prototype.toString.call(p):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof p=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var p=$(this);if(p)return p;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var p=$(this);return p||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(x);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var p=$(this);if(p)return p;if(this._bodyBlob)return A(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(q)}),this.json=function(){return this.text().then(JSON.parse)},this}var L=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function F(p){var w=p.toUpperCase();return L.indexOf(w)>-1?w:p}function B(p,w){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');w=w||{};var N=w.body;if(p instanceof B){if(p.bodyUsed)throw new TypeError("Already read");this.url=p.url,this.credentials=p.credentials,w.headers||(this.headers=new v(p.headers)),this.method=p.method,this.mode=p.mode,this.signal=p.signal,!N&&p._bodyInit!=null&&(N=p._bodyInit,p.bodyUsed=!0)}else this.url=String(p);if(this.credentials=w.credentials||this.credentials||"same-origin",(w.headers||!this.headers)&&(this.headers=new v(w.headers)),this.method=F(w.method||this.method||"GET"),this.mode=w.mode||this.mode||null,this.signal=w.signal||this.signal||function(){if("AbortController"in a){var y=new AbortController;return y.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&N)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(N),(this.method==="GET"||this.method==="HEAD")&&(w.cache==="no-store"||w.cache==="no-cache")){var M=/([?&])_=[^&]*/;if(M.test(this.url))this.url=this.url.replace(M,"$1_="+new Date().getTime());else{var S=/\?/;this.url+=(S.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function q(p){var w=new FormData;return p.trim().split("&").forEach(function(N){if(N){var M=N.split("="),S=M.shift().replace(/\+/g," "),y=M.join("=").replace(/\+/g," ");w.append(decodeURIComponent(S),decodeURIComponent(y))}}),w}function R(p){var w=new v,N=p.replace(/\r?\n[\t ]+/g," ");return N.split("\r").map(function(M){return M.indexOf(`
`)===0?M.substr(1,M.length):M}).forEach(function(M){var S=M.split(":"),y=S.shift().trim();if(y){var C=S.join(":").trim();try{w.append(y,C)}catch(I){console.warn("Response "+I.message)}}}),w}D.call(B.prototype);function E(p,w){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(w||(w={}),this.type="default",this.status=w.status===void 0?200:w.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=w.statusText===void 0?"":""+w.statusText,this.headers=new v(w.headers),this.url=w.url||"",this._initBody(p)}D.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new v(this.headers),url:this.url})},E.error=function(){var p=new E(null,{status:200,statusText:""});return p.ok=!1,p.status=0,p.type="error",p};var b=[301,302,303,307,308];E.redirect=function(p,w){if(b.indexOf(w)===-1)throw new RangeError("Invalid status code");return new E(null,{status:w,headers:{location:p}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(w,N){this.message=w,this.name=N;var M=Error(w);this.stack=M.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function f(p,w){return new Promise(function(N,M){var S=new B(p,w);if(S.signal&&S.signal.aborted)return M(new o.DOMException("Aborted","AbortError"));var y=new XMLHttpRequest;function C(){y.abort()}y.onload=function(){var K={statusText:y.statusText,headers:R(y.getAllResponseHeaders()||"")};S.url.indexOf("file://")===0&&(y.status<200||y.status>599)?K.status=200:K.status=y.status,K.url="responseURL"in y?y.responseURL:K.headers.get("X-Request-URL");var V="response"in y?y.response:y.responseText;setTimeout(function(){N(new E(V,K))},0)},y.onerror=function(){setTimeout(function(){M(new TypeError("Network request failed"))},0)},y.ontimeout=function(){setTimeout(function(){M(new TypeError("Network request timed out"))},0)},y.onabort=function(){setTimeout(function(){M(new o.DOMException("Aborted","AbortError"))},0)};function I(K){try{return K===""&&a.location.href?a.location.href:K}catch{return K}}if(y.open(S.method,I(S.url),!0),S.credentials==="include"?y.withCredentials=!0:S.credentials==="omit"&&(y.withCredentials=!1),"responseType"in y&&(c.blob?y.responseType="blob":c.arrayBuffer&&(y.responseType="arraybuffer")),w&&typeof w.headers=="object"&&!(w.headers instanceof v||a.Headers&&w.headers instanceof a.Headers)){var U=[];Object.getOwnPropertyNames(w.headers).forEach(function(K){U.push(d(K)),y.setRequestHeader(K,g(w.headers[K]))}),S.headers.forEach(function(K,V){U.indexOf(V)===-1&&y.setRequestHeader(V,K)})}else S.headers.forEach(function(K,V){y.setRequestHeader(V,K)});S.signal&&(S.signal.addEventListener("abort",C),y.onreadystatechange=function(){y.readyState===4&&S.signal.removeEventListener("abort",C)}),y.send(typeof S._bodyInit>"u"?null:S._bodyInit)})}return f.polyfill=!0,a.fetch||(a.fetch=f,a.Headers=v,a.Request=B,a.Response=E),o.Headers=v,o.Request=B,o.Response=E,o.fetch=f,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=r.fetch?r:n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(b4,b4.exports);var Wde=b4.exports;const IN=Fa(Wde);var Hde=Object.defineProperty,Kde=Object.defineProperties,Vde=Object.getOwnPropertyDescriptors,AN=Object.getOwnPropertySymbols,Gde=Object.prototype.hasOwnProperty,Yde=Object.prototype.propertyIsEnumerable,CN=(t,e,r)=>e in t?Hde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,NN=(t,e)=>{for(var r in e||(e={}))Gde.call(e,r)&&CN(t,r,e[r]);if(AN)for(var r of AN(e))Yde.call(e,r)&&CN(t,r,e[r]);return t},MN=(t,e)=>Kde(t,Vde(e));const Qde={Accept:"application/json","Content-Type":"application/json"},Zde="POST",TN={headers:Qde,method:Zde},$N=10;let hn=class{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new Rn.EventEmitter,this.isAvailable=!1,this.registering=!1,!ZC(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=Mo(e),n=await(await IN(this.url,MN(NN({},TN),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!ZC(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=Mo({id:1,jsonrpc:"2.0",method:"test",params:[]});await IN(e,MN(NN({},TN),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?aa(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Gp(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return ED(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>$N&&this.events.setMaxListeners($N)}};const PN="error",Jde="wss://relay.walletconnect.org",Xde="wc",efe="universal_provider",ON=`${Xde}@2:${efe}:`,VD="https://rpc.walletconnect.org/v1/",af="generic",tfe=`${VD}bundler`,Oo={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Ew=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rfe(){this.__data__=[],this.size=0}var nfe=rfe;function ife(t,e){return t===e||t!==t&&e!==e}var c2=ife,sfe=c2;function ofe(t,e){for(var r=t.length;r--;)if(sfe(t[r][0],e))return r;return-1}var l2=ofe,afe=l2,cfe=Array.prototype,lfe=cfe.splice;function ufe(t){var e=this.__data__,r=afe(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():lfe.call(e,r,1),--this.size,!0}var hfe=ufe,dfe=l2;function ffe(t){var e=this.__data__,r=dfe(e,t);return r<0?void 0:e[r][1]}var pfe=ffe,gfe=l2;function mfe(t){return gfe(this.__data__,t)>-1}var yfe=mfe,wfe=l2;function bfe(t,e){var r=this.__data__,n=wfe(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var vfe=bfe,Efe=nfe,_fe=hfe,Sfe=pfe,xfe=yfe,Ife=vfe;function cf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}cf.prototype.clear=Efe,cf.prototype.delete=_fe,cf.prototype.get=Sfe,cf.prototype.has=xfe,cf.prototype.set=Ife;var u2=cf,Afe=u2;function Cfe(){this.__data__=new Afe,this.size=0}var Nfe=Cfe;function Mfe(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var Tfe=Mfe;function $fe(t){return this.__data__.get(t)}var Pfe=$fe;function Ofe(t){return this.__data__.has(t)}var kfe=Ofe,Rfe=typeof Ew=="object"&&Ew&&Ew.Object===Object&&Ew,GD=Rfe,Dfe=GD,Lfe=typeof self=="object"&&self&&self.Object===Object&&self,Bfe=Dfe||Lfe||Function("return this")(),Qp=Bfe,Ufe=Qp,jfe=Ufe.Symbol,YD=jfe,kN=YD,QD=Object.prototype,Ffe=QD.hasOwnProperty,zfe=QD.toString,N0=kN?kN.toStringTag:void 0;function qfe(t){var e=Ffe.call(t,N0),r=t[N0];try{t[N0]=void 0;var n=!0}catch{}var i=zfe.call(t);return n&&(e?t[N0]=r:delete t[N0]),i}var Wfe=qfe,Hfe=Object.prototype,Kfe=Hfe.toString;function Vfe(t){return Kfe.call(t)}var Gfe=Vfe,RN=YD,Yfe=Wfe,Qfe=Gfe,Zfe="[object Null]",Jfe="[object Undefined]",DN=RN?RN.toStringTag:void 0;function Xfe(t){return t==null?t===void 0?Jfe:Zfe:DN&&DN in Object(t)?Yfe(t):Qfe(t)}var h2=Xfe;function epe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var td=epe,tpe=h2,rpe=td,npe="[object AsyncFunction]",ipe="[object Function]",spe="[object GeneratorFunction]",ope="[object Proxy]";function ape(t){if(!rpe(t))return!1;var e=tpe(t);return e==ipe||e==spe||e==npe||e==ope}var p5=ape,cpe=Qp,lpe=cpe["__core-js_shared__"],upe=lpe,d_=upe,LN=function(){var t=/[^.]+$/.exec(d_&&d_.keys&&d_.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function hpe(t){return!!LN&&LN in t}var dpe=hpe,fpe=Function.prototype,ppe=fpe.toString;function gpe(t){if(t!=null){try{return ppe.call(t)}catch{}try{return t+""}catch{}}return""}var mpe=gpe,ype=p5,wpe=dpe,bpe=td,vpe=mpe,Epe=/[\\^$.*+?()[\]{}|]/g,_pe=/^\[object .+?Constructor\]$/,Spe=Function.prototype,xpe=Object.prototype,Ipe=Spe.toString,Ape=xpe.hasOwnProperty,Cpe=RegExp("^"+Ipe.call(Ape).replace(Epe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Npe(t){if(!bpe(t)||wpe(t))return!1;var e=ype(t)?Cpe:_pe;return e.test(vpe(t))}var Mpe=Npe;function Tpe(t,e){return t==null?void 0:t[e]}var $pe=Tpe,Ppe=Mpe,Ope=$pe;function kpe(t,e){var r=Ope(t,e);return Ppe(r)?r:void 0}var g5=kpe,Rpe=g5,Dpe=Qp,Lpe=Rpe(Dpe,"Map"),ZD=Lpe,Bpe=g5,Upe=Bpe(Object,"create"),d2=Upe,BN=d2;function jpe(){this.__data__=BN?BN(null):{},this.size=0}var Fpe=jpe;function zpe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var qpe=zpe,Wpe=d2,Hpe="__lodash_hash_undefined__",Kpe=Object.prototype,Vpe=Kpe.hasOwnProperty;function Gpe(t){var e=this.__data__;if(Wpe){var r=e[t];return r===Hpe?void 0:r}return Vpe.call(e,t)?e[t]:void 0}var Ype=Gpe,Qpe=d2,Zpe=Object.prototype,Jpe=Zpe.hasOwnProperty;function Xpe(t){var e=this.__data__;return Qpe?e[t]!==void 0:Jpe.call(e,t)}var e0e=Xpe,t0e=d2,r0e="__lodash_hash_undefined__";function n0e(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=t0e&&e===void 0?r0e:e,this}var i0e=n0e,s0e=Fpe,o0e=qpe,a0e=Ype,c0e=e0e,l0e=i0e;function lf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}lf.prototype.clear=s0e,lf.prototype.delete=o0e,lf.prototype.get=a0e,lf.prototype.has=c0e,lf.prototype.set=l0e;var u0e=lf,UN=u0e,h0e=u2,d0e=ZD;function f0e(){this.size=0,this.__data__={hash:new UN,map:new(d0e||h0e),string:new UN}}var p0e=f0e;function g0e(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var m0e=g0e,y0e=m0e;function w0e(t,e){var r=t.__data__;return y0e(e)?r[typeof e=="string"?"string":"hash"]:r.map}var f2=w0e,b0e=f2;function v0e(t){var e=b0e(this,t).delete(t);return this.size-=e?1:0,e}var E0e=v0e,_0e=f2;function S0e(t){return _0e(this,t).get(t)}var x0e=S0e,I0e=f2;function A0e(t){return I0e(this,t).has(t)}var C0e=A0e,N0e=f2;function M0e(t,e){var r=N0e(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var T0e=M0e,$0e=p0e,P0e=E0e,O0e=x0e,k0e=C0e,R0e=T0e;function uf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}uf.prototype.clear=$0e,uf.prototype.delete=P0e,uf.prototype.get=O0e,uf.prototype.has=k0e,uf.prototype.set=R0e;var D0e=uf,L0e=u2,B0e=ZD,U0e=D0e,j0e=200;function F0e(t,e){var r=this.__data__;if(r instanceof L0e){var n=r.__data__;if(!B0e||n.length<j0e-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new U0e(n)}return r.set(t,e),this.size=r.size,this}var z0e=F0e,q0e=u2,W0e=Nfe,H0e=Tfe,K0e=Pfe,V0e=kfe,G0e=z0e;function hf(t){var e=this.__data__=new q0e(t);this.size=e.size}hf.prototype.clear=W0e,hf.prototype.delete=H0e,hf.prototype.get=K0e,hf.prototype.has=V0e,hf.prototype.set=G0e;var Y0e=hf,Q0e=g5,Z0e=function(){try{var t=Q0e(Object,"defineProperty");return t({},"",{}),t}catch{}}(),JD=Z0e,jN=JD;function J0e(t,e,r){e=="__proto__"&&jN?jN(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var m5=J0e,X0e=m5,ege=c2;function tge(t,e,r){(r!==void 0&&!ege(t[e],r)||r===void 0&&!(e in t))&&X0e(t,e,r)}var XD=tge;function rge(t){return function(e,r,n){for(var i=-1,s=Object(e),o=n(e),a=o.length;a--;){var c=o[t?a:++i];if(r(s[c],c,s)===!1)break}return e}}var nge=rge,ige=nge,sge=ige(),oge=sge,v4={exports:{}};(function(t,e){var r=Qp,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,o=s?r.Buffer:void 0,a=o?o.allocUnsafe:void 0;function c(l,u){if(u)return l.slice();var h=l.length,d=a?a(h):new l.constructor(h);return l.copy(d),d}t.exports=c})(v4,v4.exports);var age=Qp,cge=age.Uint8Array,lge=cge,FN=lge;function uge(t){var e=new t.constructor(t.byteLength);return new FN(e).set(new FN(t)),e}var hge=uge,dge=hge;function fge(t,e){var r=e?dge(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var pge=fge;function gge(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var mge=gge,yge=td,zN=Object.create,wge=function(){function t(){}return function(e){if(!yge(e))return{};if(zN)return zN(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),bge=wge;function vge(t,e){return function(r){return t(e(r))}}var Ege=vge,_ge=Ege,Sge=_ge(Object.getPrototypeOf,Object),eL=Sge,xge=Object.prototype;function Ige(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||xge;return t===r}var tL=Ige,Age=bge,Cge=eL,Nge=tL;function Mge(t){return typeof t.constructor=="function"&&!Nge(t)?Age(Cge(t)):{}}var Tge=Mge;function $ge(t){return t!=null&&typeof t=="object"}var my=$ge,Pge=h2,Oge=my,kge="[object Arguments]";function Rge(t){return Oge(t)&&Pge(t)==kge}var Dge=Rge,qN=Dge,Lge=my,rL=Object.prototype,Bge=rL.hasOwnProperty,Uge=rL.propertyIsEnumerable,jge=qN(function(){return arguments}())?qN:function(t){return Lge(t)&&Bge.call(t,"callee")&&!Uge.call(t,"callee")},nL=jge,Fge=Array.isArray,iL=Fge,zge=9007199254740991;function qge(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=zge}var sL=qge,Wge=p5,Hge=sL;function Kge(t){return t!=null&&Hge(t.length)&&!Wge(t)}var y5=Kge,Vge=y5,Gge=my;function Yge(t){return Gge(t)&&Vge(t)}var Qge=Yge,Hb={exports:{}};function Zge(){return!1}var Jge=Zge;(function(t,e){var r=Qp,n=Jge,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?r.Buffer:void 0,c=a?a.isBuffer:void 0,l=c||n;t.exports=l})(Hb,Hb.exports);var Xge=h2,eme=eL,tme=my,rme="[object Object]",nme=Function.prototype,ime=Object.prototype,oL=nme.toString,sme=ime.hasOwnProperty,ome=oL.call(Object);function ame(t){if(!tme(t)||Xge(t)!=rme)return!1;var e=eme(t);if(e===null)return!0;var r=sme.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&oL.call(r)==ome}var cme=ame,lme=h2,ume=sL,hme=my,dme="[object Arguments]",fme="[object Array]",pme="[object Boolean]",gme="[object Date]",mme="[object Error]",yme="[object Function]",wme="[object Map]",bme="[object Number]",vme="[object Object]",Eme="[object RegExp]",_me="[object Set]",Sme="[object String]",xme="[object WeakMap]",Ime="[object ArrayBuffer]",Ame="[object DataView]",Cme="[object Float32Array]",Nme="[object Float64Array]",Mme="[object Int8Array]",Tme="[object Int16Array]",$me="[object Int32Array]",Pme="[object Uint8Array]",Ome="[object Uint8ClampedArray]",kme="[object Uint16Array]",Rme="[object Uint32Array]",Lr={};Lr[Cme]=Lr[Nme]=Lr[Mme]=Lr[Tme]=Lr[$me]=Lr[Pme]=Lr[Ome]=Lr[kme]=Lr[Rme]=!0,Lr[dme]=Lr[fme]=Lr[Ime]=Lr[pme]=Lr[Ame]=Lr[gme]=Lr[mme]=Lr[yme]=Lr[wme]=Lr[bme]=Lr[vme]=Lr[Eme]=Lr[_me]=Lr[Sme]=Lr[xme]=!1;function Dme(t){return hme(t)&&ume(t.length)&&!!Lr[lme(t)]}var Lme=Dme;function Bme(t){return function(e){return t(e)}}var Ume=Bme,E4={exports:{}};(function(t,e){var r=GD,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,o=s&&r.process,a=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(E4,E4.exports);var jme=Lme,Fme=Ume,WN=E4.exports,HN=WN&&WN.isTypedArray,zme=HN?Fme(HN):jme,aL=zme;function qme(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var cL=qme,Wme=m5,Hme=c2,Kme=Object.prototype,Vme=Kme.hasOwnProperty;function Gme(t,e,r){var n=t[e];(!(Vme.call(t,e)&&Hme(n,r))||r===void 0&&!(e in t))&&Wme(t,e,r)}var Yme=Gme,Qme=Yme,Zme=m5;function Jme(t,e,r,n){var i=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=n?n(r[a],t[a],a,r,t):void 0;c===void 0&&(c=t[a]),i?Zme(r,a,c):Qme(r,a,c)}return r}var Xme=Jme;function eye(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var tye=eye,rye=9007199254740991,nye=/^(?:0|[1-9]\d*)$/;function iye(t,e){var r=typeof t;return e=e??rye,!!e&&(r=="number"||r!="symbol"&&nye.test(t))&&t>-1&&t%1==0&&t<e}var lL=iye,sye=tye,oye=nL,aye=iL,cye=Hb.exports,lye=lL,uye=aL,hye=Object.prototype,dye=hye.hasOwnProperty;function fye(t,e){var r=aye(t),n=!r&&oye(t),i=!r&&!n&&cye(t),s=!r&&!n&&!i&&uye(t),o=r||n||i||s,a=o?sye(t.length,String):[],c=a.length;for(var l in t)(e||dye.call(t,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||lye(l,c)))&&a.push(l);return a}var pye=fye;function gye(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var mye=gye,yye=td,wye=tL,bye=mye,vye=Object.prototype,Eye=vye.hasOwnProperty;function _ye(t){if(!yye(t))return bye(t);var e=wye(t),r=[];for(var n in t)n=="constructor"&&(e||!Eye.call(t,n))||r.push(n);return r}var Sye=_ye,xye=pye,Iye=Sye,Aye=y5;function Cye(t){return Aye(t)?xye(t,!0):Iye(t)}var uL=Cye,Nye=Xme,Mye=uL;function Tye(t){return Nye(t,Mye(t))}var $ye=Tye,KN=XD,Pye=v4.exports,Oye=pge,kye=mge,Rye=Tge,VN=nL,GN=iL,Dye=Qge,Lye=Hb.exports,Bye=p5,Uye=td,jye=cme,Fye=aL,YN=cL,zye=$ye;function qye(t,e,r,n,i,s,o){var a=YN(t,r),c=YN(e,r),l=o.get(c);if(l){KN(t,r,l);return}var u=s?s(a,c,r+"",t,e,o):void 0,h=u===void 0;if(h){var d=GN(c),g=!d&&Lye(c),m=!d&&!g&&Fye(c);u=c,d||g||m?GN(a)?u=a:Dye(a)?u=kye(a):g?(h=!1,u=Pye(c,!0)):m?(h=!1,u=Oye(c,!0)):u=[]:jye(c)||VN(c)?(u=a,VN(a)?u=zye(a):(!Uye(a)||Bye(a))&&(u=Rye(c))):h=!1}h&&(o.set(c,u),i(u,c,n,s,o),o.delete(c)),KN(t,r,u)}var Wye=qye,Hye=Y0e,Kye=XD,Vye=oge,Gye=Wye,Yye=td,Qye=uL,Zye=cL;function hL(t,e,r,n,i){t!==e&&Vye(e,function(s,o){if(i||(i=new Hye),Yye(s))Gye(t,e,o,r,hL,n,i);else{var a=n?n(Zye(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),Kye(t,o,a)}},Qye)}var Jye=hL;function Xye(t){return t}var dL=Xye;function ewe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var twe=ewe,rwe=twe,QN=Math.max;function nwe(t,e,r){return e=QN(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=QN(n.length-e,0),o=Array(s);++i<s;)o[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(o),rwe(t,this,a)}}var iwe=nwe;function swe(t){return function(){return t}}var owe=swe,awe=owe,ZN=JD,cwe=dL,lwe=ZN?function(t,e){return ZN(t,"toString",{configurable:!0,enumerable:!1,value:awe(e),writable:!0})}:cwe,uwe=lwe,hwe=800,dwe=16,fwe=Date.now;function pwe(t){var e=0,r=0;return function(){var n=fwe(),i=dwe-(n-r);if(r=n,i>0){if(++e>=hwe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var gwe=pwe,mwe=uwe,ywe=gwe,wwe=ywe(mwe),bwe=wwe,vwe=dL,Ewe=iwe,_we=bwe;function Swe(t,e){return _we(Ewe(t,e,vwe),t+"")}var xwe=Swe,Iwe=c2,Awe=y5,Cwe=lL,Nwe=td;function Mwe(t,e,r){if(!Nwe(r))return!1;var n=typeof e;return(n=="number"?Awe(r)&&Cwe(e,r.length):n=="string"&&e in r)?Iwe(r[e],t):!1}var Twe=Mwe,$we=xwe,Pwe=Twe;function Owe(t){return $we(function(e,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&Pwe(r[0],r[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var a=r[n];a&&t(e,a,n,s)}return e})}var kwe=Owe,Rwe=Jye,Dwe=kwe,Lwe=Dwe(function(t,e,r){Rwe(t,e,r)}),Bwe=Lwe,Uwe=Object.defineProperty,jwe=Object.defineProperties,Fwe=Object.getOwnPropertyDescriptors,JN=Object.getOwnPropertySymbols,zwe=Object.prototype.hasOwnProperty,qwe=Object.prototype.propertyIsEnumerable,XN=(t,e,r)=>e in t?Uwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_w=(t,e)=>{for(var r in e||(e={}))zwe.call(e,r)&&XN(t,r,e[r]);if(JN)for(var r of JN(e))qwe.call(e,r)&&XN(t,r,e[r]);return t},Wwe=(t,e)=>jwe(t,Fwe(e));function Ys(t,e,r){var n;const i=Vf(t);return((n=e.rpcMap)==null?void 0:n[i.reference])||`${VD}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function rd(t){return t.includes(":")?t.split(":")[1]:t}function fL(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Hwe(t,e){const r=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!r.length)return[];const n=[];return r.forEach(i=>{const s=e.namespaces[i].accounts;n.push(...s)}),n}function f_(t={},e={}){const r=eM(t),n=eM(e);return Bwe(r,n)}function eM(t){var e,r,n,i;const s={};if(!cm(t))return s;for(const[o,a]of Object.entries(t)){const c=u5(o)?[o]:a.chains,l=a.methods||[],u=a.events||[],h=a.rpcMap||{},d=rg(o);s[d]=Wwe(_w(_w({},s[d]),a),{chains:x1(c,(e=s[d])==null?void 0:e.chains),methods:x1(l,(r=s[d])==null?void 0:r.methods),events:x1(u,(n=s[d])==null?void 0:n.events),rpcMap:_w(_w({},h),(i=s[d])==null?void 0:i.rpcMap)})}return s}function Kwe(t){return t.includes(":")?t.split(":")[2]:t}function tM(t){const e={};for(const[r,n]of Object.entries(t)){const i=n.methods||[],s=n.events||[],o=n.accounts||[],a=u5(r)?[r]:n.chains?n.chains:fL(n.accounts);e[r]={chains:a,methods:i,events:s,accounts:o}}return e}function p_(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const pL={},kt=t=>pL[t],g_=(t,e)=>{pL[t]=e};var Vwe=Object.defineProperty,Gwe=(t,e,r)=>e in t?Vwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xd=(t,e,r)=>Gwe(t,typeof e!="symbol"?e+"":e,r);class Ywe{constructor(e){xd(this,"name","polkadot"),xd(this,"client"),xd(this,"httpProviders"),xd(this,"events"),xd(this,"namespace"),xd(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=rd(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,kt("disableProviderPing")))}}var Qwe=Object.defineProperty,Zwe=Object.defineProperties,Jwe=Object.getOwnPropertyDescriptors,rM=Object.getOwnPropertySymbols,Xwe=Object.prototype.hasOwnProperty,e1e=Object.prototype.propertyIsEnumerable,_4=(t,e,r)=>e in t?Qwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nM=(t,e)=>{for(var r in e||(e={}))Xwe.call(e,r)&&_4(t,r,e[r]);if(rM)for(var r of rM(e))e1e.call(e,r)&&_4(t,r,e[r]);return t},iM=(t,e)=>Zwe(t,Jwe(e)),Id=(t,e,r)=>_4(t,typeof e!="symbol"?e+"":e,r);class t1e{constructor(e){Id(this,"name","eip155"),Id(this,"client"),Id(this,"chainId"),Id(this,"namespace"),Id(this,"httpProviders"),Id(this,"events"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||Ys(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,kt("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=parseInt(rd(r));e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let i=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,i;const s=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0];if(!s)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),a=((i=o==null?void 0:o.sessionProperties)==null?void 0:i.capabilities)||{};if(a!=null&&a[s])return a==null?void 0:a[s];const c=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:iM(nM({},o.sessionProperties||{}),{capabilities:iM(nM({},a||{}),{[s]:c})})})}catch(l){console.warn("Failed to update session with capabilities",l)}return c}async getCallStatus(e){var r,n;const i=this.client.session.get(e.topic),s=(r=i.sessionProperties)==null?void 0:r.bundler_name;if(s){const a=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(n=i.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(es("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,r){return`${tfe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var r1e=Object.defineProperty,n1e=(t,e,r)=>e in t?r1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ad=(t,e,r)=>n1e(t,typeof e!="symbol"?e+"":e,r);class i1e{constructor(e){Ad(this,"name","solana"),Ad(this,"client"),Ad(this,"httpProviders"),Ad(this,"events"),Ad(this,"namespace"),Ad(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=rd(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,kt("disableProviderPing")))}}var s1e=Object.defineProperty,o1e=(t,e,r)=>e in t?s1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Cd=(t,e,r)=>o1e(t,typeof e!="symbol"?e+"":e,r);class a1e{constructor(e){Cd(this,"name","cosmos"),Cd(this,"client"),Cd(this,"httpProviders"),Cd(this,"events"),Cd(this,"namespace"),Cd(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=rd(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,kt("disableProviderPing")))}}var c1e=Object.defineProperty,l1e=(t,e,r)=>e in t?c1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nd=(t,e,r)=>l1e(t,typeof e!="symbol"?e+"":e,r);class u1e{constructor(e){Nd(this,"name","algorand"),Nd(this,"client"),Nd(this,"httpProviders"),Nd(this,"events"),Nd(this,"namespace"),Nd(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||Ys(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Vr(new hn(n,kt("disableProviderPing")))}}var h1e=Object.defineProperty,d1e=(t,e,r)=>e in t?h1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Md=(t,e,r)=>d1e(t,typeof e!="symbol"?e+"":e,r);class f1e{constructor(e){Md(this,"name","cip34"),Md(this,"client"),Md(this,"httpProviders"),Md(this,"events"),Md(this,"namespace"),Md(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),i=rd(r);e[i]=this.createHttpProvider(i,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,kt("disableProviderPing")))}}var p1e=Object.defineProperty,g1e=(t,e,r)=>e in t?p1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Td=(t,e,r)=>g1e(t,typeof e!="symbol"?e+"":e,r);class m1e{constructor(e){Td(this,"name","elrond"),Td(this,"client"),Td(this,"httpProviders"),Td(this,"events"),Td(this,"namespace"),Td(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=rd(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,kt("disableProviderPing")))}}var y1e=Object.defineProperty,w1e=(t,e,r)=>e in t?y1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$d=(t,e,r)=>w1e(t,typeof e!="symbol"?e+"":e,r);class b1e{constructor(e){$d(this,"name","multiversx"),$d(this,"client"),$d(this,"httpProviders"),$d(this,"events"),$d(this,"namespace"),$d(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=rd(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,kt("disableProviderPing")))}}var v1e=Object.defineProperty,E1e=(t,e,r)=>e in t?v1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pd=(t,e,r)=>E1e(t,typeof e!="symbol"?e+"":e,r);class _1e{constructor(e){Pd(this,"name","near"),Pd(this,"client"),Pd(this,"httpProviders"),Pd(this,"events"),Pd(this,"namespace"),Pd(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Ys(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace);return typeof n>"u"?void 0:new Vr(new hn(n,kt("disableProviderPing")))}}var S1e=Object.defineProperty,x1e=(t,e,r)=>e in t?S1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Od=(t,e,r)=>x1e(t,typeof e!="symbol"?e+"":e,r);class I1e{constructor(e){Od(this,"name","tezos"),Od(this,"client"),Od(this,"httpProviders"),Od(this,"events"),Od(this,"namespace"),Od(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Ys(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace);return typeof n>"u"?void 0:new Vr(new hn(n))}}var A1e=Object.defineProperty,C1e=(t,e,r)=>e in t?A1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kd=(t,e,r)=>C1e(t,typeof e!="symbol"?e+"":e,r);class N1e{constructor(e){kd(this,"name",af),kd(this,"client"),kd(this,"httpProviders"),kd(this,"events"),kd(this,"namespace"),kd(this,"chainId"),this.namespace=e.namespace,this.events=kt("events"),this.client=kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(i=>{const s=Vf(i);n[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Ys(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,kt("disableProviderPing")))}}var M1e=Object.defineProperty,T1e=Object.defineProperties,$1e=Object.getOwnPropertyDescriptors,sM=Object.getOwnPropertySymbols,P1e=Object.prototype.hasOwnProperty,O1e=Object.prototype.propertyIsEnumerable,S4=(t,e,r)=>e in t?M1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Sw=(t,e)=>{for(var r in e||(e={}))P1e.call(e,r)&&S4(t,r,e[r]);if(sM)for(var r of sM(e))O1e.call(e,r)&&S4(t,r,e[r]);return t},m_=(t,e)=>T1e(t,$1e(e)),zo=(t,e,r)=>S4(t,typeof e!="symbol"?e+"":e,r);let k1e=class gL{constructor(e){zo(this,"client"),zo(this,"namespaces"),zo(this,"optionalNamespaces"),zo(this,"sessionProperties"),zo(this,"events",new Dp),zo(this,"rpcProviders",{}),zo(this,"session"),zo(this,"providerOpts"),zo(this,"logger"),zo(this,"uri"),zo(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:wu(tl({level:(e==null?void 0:e.logger)||PN})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new gL(e);return await r.initialize(),r}async request(e,r,n){const[i,s]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:Sw({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,i){const s=new Date().getTime();this.request(e,n,i).then(o=>r(null,Eu(s,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:nr("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:i}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const s=await i();if(this.session=s.session,this.session){const o=tM(this.session.namespaces);this.namespaces=f_(this.namespaces,o),this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const i=await n();this.session=i;const s=tM(i.namespaces);return this.namespaces=f_(this.namespaces,s),this.persist("namespaces",this.namespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,i]=this.validateChain(e),s=this.getProvider(n);s.name===af?s.setDefaultChain(`${n}:${i}`,r):s.setDefaultChain(i,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Oh(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await qde.init({core:this.providerOpts.core,logger:this.providerOpts.logger||PN,relayUrl:this.providerOpts.relayUrl||Jde,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>rg(r)))];g_("client",this.client),g_("events",this.events),g_("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=Hwe(r,this.session),i=fL(n),s=f_(this.namespaces,this.optionalNamespaces),o=m_(Sw({},s[r]),{accounts:n,chains:i});switch(r){case"eip155":this.rpcProviders[r]=new t1e({namespace:o});break;case"algorand":this.rpcProviders[r]=new u1e({namespace:o});break;case"solana":this.rpcProviders[r]=new i1e({namespace:o});break;case"cosmos":this.rpcProviders[r]=new a1e({namespace:o});break;case"polkadot":this.rpcProviders[r]=new Ywe({namespace:o});break;case"cip34":this.rpcProviders[r]=new f1e({namespace:o});break;case"elrond":this.rpcProviders[r]=new m1e({namespace:o});break;case"multiversx":this.rpcProviders[r]=new b1e({namespace:o});break;case"near":this.rpcProviders[r]=new _1e({namespace:o});break;case"tezos":this.rpcProviders[r]=new I1e({namespace:o});break;default:this.rpcProviders[af]?this.rpcProviders[af].updateNamespace(o):this.rpcProviders[af]=new N1e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:n}=r;if(n.name==="accountsChanged"){const i=n.data;i&&Oh(i)&&this.events.emit("accountsChanged",i.map(Kwe))}else if(n.name==="chainChanged"){const i=r.chainId,s=r.event.data,o=rg(i),a=p_(i)!==p_(s)?`${o}:${p_(s)}`:i;this.onChainChanged(a)}else this.events.emit(n.name,n.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n;const{namespaces:i}=r,s=(n=this.client)==null?void 0:n.session.get(e);this.session=m_(Sw({},s),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",m_(Sw({},nr("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Oo.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[af]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:n,sessionProperties:i}=e;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=i,this.persist("namespaces",r),this.persist("optionalNamespaces",n)}validateChain(e){const[r,n]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>rg(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const i=rg(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,i]=this.validateChain(e);i&&(r||this.getProvider(n).setDefaultChain(i),this.namespaces[n]?this.namespaces[n].defaultChain=i:this.namespaces[`${n}:${i}`]?this.namespaces[`${n}:${i}`].defaultChain=i:this.namespaces[`${n}:${i}`]={defaultChain:i},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",i))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,r){this.client.core.storage.setItem(`${ON}/${e}`,r)}async getFromStore(e){return await this.client.core.storage.getItem(`${ON}/${e}`)}};const R1e=k1e,mL={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(r=>r.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]}};var D1e=20,L1e=1,kh=1e6,oM=1e6,B1e=-7,U1e=21,j1e=!1,yy="[big.js] ",nd=yy+"Invalid ",p2=nd+"decimal places",F1e=nd+"rounding mode",yL=yy+"Division by zero",er={},ka=void 0,z1e=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function wL(){function t(e){var r=this;if(!(r instanceof t))return e===ka?wL():new t(e);if(e instanceof t)r.s=e.s,r.e=e.e,r.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(nd+"value");e=e===0&&1/e<0?"-0":String(e)}q1e(r,e)}r.constructor=t}return t.prototype=er,t.DP=D1e,t.RM=L1e,t.NE=B1e,t.PE=U1e,t.strict=j1e,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function q1e(t,e){var r,n,i;if(!z1e.test(e))throw Error(nd+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),i=e.length,n=0;n<i&&e.charAt(n)=="0";)++n;if(n==i)t.c=[t.e=0];else{for(;i>0&&e.charAt(--i)=="0";);for(t.e=r-n-1,t.c=[],r=0;n<=i;)t.c[r++]=+e.charAt(n++)}return t}function id(t,e,r,n){var i=t.c;if(r===ka&&(r=t.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(F1e);if(e<1)n=r===3&&(n||!!i[0])||e===0&&(r===1&&i[0]>=5||r===2&&(i[0]>5||i[0]===5&&(n||i[1]!==ka))),i.length=1,n?(t.e=t.e-e+1,i[0]=1):i[0]=t.e=0;else if(e<i.length){if(n=r===1&&i[e]>=5||r===2&&(i[e]>5||i[e]===5&&(n||i[e+1]!==ka||i[e-1]&1))||r===3&&(n||!!i[0]),i.length=e,n){for(;++i[--e]>9;)if(i[e]=0,e===0){++t.e,i.unshift(1);break}}for(e=i.length;!i[--e];)i.pop()}return t}function sd(t,e,r){var n=t.e,i=t.c.join(""),s=i.length;if(e)i=i.charAt(0)+(s>1?"."+i.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)i="0"+i;i="0."+i}else if(n>0)if(++n>s)for(n-=s;n--;)i+="0";else n<s&&(i=i.slice(0,n)+"."+i.slice(n));else s>1&&(i=i.charAt(0)+"."+i.slice(1));return t.s<0&&r?"-"+i:i}er.abs=function(){var t=new this.constructor(this);return t.s=1,t};er.cmp=function(t){var e,r=this,n=r.c,i=(t=new r.constructor(t)).c,s=r.s,o=t.s,a=r.e,c=t.e;if(!n[0]||!i[0])return n[0]?s:i[0]?-o:0;if(s!=o)return s;if(e=s<0,a!=c)return a>c^e?1:-1;for(o=(a=n.length)<(c=i.length)?a:c,s=-1;++s<o;)if(n[s]!=i[s])return n[s]>i[s]^e?1:-1;return a==c?0:a>c^e?1:-1};er.div=function(t){var e=this,r=e.constructor,n=e.c,i=(t=new r(t)).c,s=e.s==t.s?1:-1,o=r.DP;if(o!==~~o||o<0||o>kh)throw Error(p2);if(!i[0])throw Error(yL);if(!n[0])return t.s=s,t.c=[t.e=0],t;var a,c,l,u,h,d=i.slice(),g=a=i.length,m=n.length,v=n.slice(0,a),$=v.length,_=t,x=_.c=[],A=0,T=o+(_.e=e.e-t.e)+1;for(_.s=s,s=T<0?0:T,d.unshift(0);$++<a;)v.push(0);do{for(l=0;l<10;l++){if(a!=($=v.length))u=a>$?1:-1;else for(h=-1,u=0;++h<a;)if(i[h]!=v[h]){u=i[h]>v[h]?1:-1;break}if(u<0){for(c=$==a?i:d;$;){if(v[--$]<c[$]){for(h=$;h&&!v[--h];)v[h]=9;--v[h],v[$]+=10}v[$]-=c[$]}for(;!v[0];)v.shift()}else break}x[A++]=u?l:++l,v[0]&&u?v[$]=n[g]||0:v=[n[g]]}while((g++<m||v[0]!==ka)&&s--);return!x[0]&&A!=1&&(x.shift(),_.e--,T--),A>T&&id(_,T,r.RM,v[0]!==ka),_};er.eq=function(t){return this.cmp(t)===0};er.gt=function(t){return this.cmp(t)>0};er.gte=function(t){return this.cmp(t)>-1};er.lt=function(t){return this.cmp(t)<0};er.lte=function(t){return this.cmp(t)<1};er.minus=er.sub=function(t){var e,r,n,i,s=this,o=s.constructor,a=s.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,s.plus(t);var l=s.c.slice(),u=s.e,h=t.c,d=t.e;if(!l[0]||!h[0])return h[0]?t.s=-c:l[0]?t=new o(s):t.s=1,t;if(a=u-d){for((i=a<0)?(a=-a,n=l):(d=u,n=h),n.reverse(),c=a;c--;)n.push(0);n.reverse()}else for(r=((i=l.length<h.length)?l:h).length,a=c=0;c<r;c++)if(l[c]!=h[c]){i=l[c]<h[c];break}if(i&&(n=l,l=h,h=n,t.s=-t.s),(c=(r=h.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;r>a;){if(l[--r]<h[r]){for(e=r;e&&!l[--e];)l[e]=9;--l[e],l[r]+=10}l[r]-=h[r]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--d;return l[0]||(t.s=1,l=[d=0]),t.c=l,t.e=d,t};er.mod=function(t){var e,r=this,n=r.constructor,i=r.s,s=(t=new n(t)).s;if(!t.c[0])throw Error(yL);return r.s=t.s=1,e=t.cmp(r)==1,r.s=i,t.s=s,e?new n(r):(i=n.DP,s=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=i,n.RM=s,this.minus(r.times(t)))};er.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};er.plus=er.add=function(t){var e,r,n,i=this,s=i.constructor;if(t=new s(t),i.s!=t.s)return t.s=-t.s,i.minus(t);var o=i.e,a=i.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new s(i):t.s=i.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,n=l):(e=-e,n=a),n.reverse();e--;)n.push(0);n.reverse()}for(a.length-l.length<0&&(n=l,l=a,a=n),e=l.length,r=0;e;a[e]%=10)r=(a[--e]=a[e]+l[e]+r)/10|0;for(r&&(a.unshift(r),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};er.pow=function(t){var e=this,r=new e.constructor("1"),n=r,i=t<0;if(t!==~~t||t<-oM||t>oM)throw Error(nd+"exponent");for(i&&(t=-t);t&1&&(n=n.times(e)),t>>=1,!!t;)e=e.times(e);return i?r.div(n):n};er.prec=function(t,e){if(t!==~~t||t<1||t>kh)throw Error(nd+"precision");return id(new this.constructor(this),t,e)};er.round=function(t,e){if(t===ka)t=0;else if(t!==~~t||t<-kh||t>kh)throw Error(p2);return id(new this.constructor(this),t+this.e+1,e)};er.sqrt=function(){var t,e,r,n=this,i=n.constructor,s=n.s,o=n.e,a=new i("0.5");if(!n.c[0])return new i(n);if(s<0)throw Error(yy+"No square root");s=Math.sqrt(+sd(n,!0,!0)),s===0||s===1/0?(e=n.c.join(""),e.length+o&1||(e+="0"),s=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new i((s==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+o)):t=new i(s+""),o=t.e+(i.DP+=4);do r=t,t=a.times(r.plus(n.div(r)));while(r.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return id(t,(i.DP-=4)+t.e+1,i.RM)};er.times=er.mul=function(t){var e,r=this,n=r.constructor,i=r.c,s=(t=new n(t)).c,o=i.length,a=s.length,c=r.e,l=t.e;if(t.s=r.s==t.s?1:-1,!i[0]||!s[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=i,i=s,s=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+s[c]*i[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};er.toExponential=function(t,e){var r=this,n=r.c[0];if(t!==ka){if(t!==~~t||t<0||t>kh)throw Error(p2);for(r=id(new r.constructor(r),++t,e);r.c.length<t;)r.c.push(0)}return sd(r,!0,!!n)};er.toFixed=function(t,e){var r=this,n=r.c[0];if(t!==ka){if(t!==~~t||t<0||t>kh)throw Error(p2);for(r=id(new r.constructor(r),t+r.e+1,e),t=t+r.e+1;r.c.length<t;)r.c.push(0)}return sd(r,!1,!!n)};er[Symbol.for("nodejs.util.inspect.custom")]=er.toJSON=er.toString=function(){var t=this,e=t.constructor;return sd(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};er.toNumber=function(){var t=+sd(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(yy+"Imprecise conversion");return t};er.toPrecision=function(t,e){var r=this,n=r.constructor,i=r.c[0];if(t!==ka){if(t!==~~t||t<1||t>kh)throw Error(nd+"precision");for(r=id(new n(r),t,e);r.c.length<t;)r.c.push(0)}return sd(r,t<=r.e||r.e<=n.NE||r.e>=n.PE,!!i)};er.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(yy+"valueOf disallowed");return sd(t,t.e<=e.NE||t.e>=e.PE,!0)};var M0=wL();const xw={bigNumber(t){return t?new M0(t):new M0(0)},multiply(t,e){if(t===void 0||e===void 0)return new M0(0);const r=new M0(t),n=new M0(e);return r.times(n)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},W1e=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],H1e=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],K1e=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Ue={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network"},V1e={getERC20Abi:t=>Ue.USDT_CONTRACT_ADDRESSES.includes(t)?K1e:W1e,getSwapAbi:()=>H1e},bl={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[r,n,i]=e;if(!r||!n||!i)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:r,chainId:n,address:i}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[r,n]=e;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:r,chainId:n}}},gt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache"};function y_(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const ct={setItem(t,e){ng()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(ng())return localStorage.getItem(t)||void 0},removeItem(t){ng()&&localStorage.removeItem(t)},clear(){ng()&&localStorage.clear()}};function ng(){return typeof window<"u"&&typeof localStorage<"u"}function Kl(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const G1e=Symbol(),aM=Object.getPrototypeOf,x4=new WeakMap,Y1e=t=>t&&(x4.has(t)?x4.get(t):aM(t)===Object.prototype||aM(t)===Array.prototype),Q1e=t=>Y1e(t)&&t[G1e]||null,cM=(t,e=!0)=>{x4.set(t,e)},Kb={},w_=t=>typeof t=="object"&&t!==null,Tl=new WeakMap,ig=new WeakSet,Z1e=(t=Object.is,e=(l,u)=>new Proxy(l,u),r=l=>w_(l)&&!ig.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),n=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},i=new WeakMap,s=(l,u,h=n)=>{const d=i.get(l);if((d==null?void 0:d[0])===u)return d[1];const g=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return cM(g,!0),i.set(l,[u,g]),Reflect.ownKeys(l).forEach(m=>{if(Object.getOwnPropertyDescriptor(g,m))return;const v=Reflect.get(l,m),{enumerable:$}=Reflect.getOwnPropertyDescriptor(l,m),_={value:v,enumerable:$,configurable:!0};if(ig.has(v))cM(v,!1);else if(v instanceof Promise)delete _.value,_.get=()=>h(v);else if(Tl.has(v)){const[x,A]=Tl.get(v);_.value=s(x,A(),h)}Object.defineProperty(g,m,_)}),Object.preventExtensions(g)},o=new WeakMap,a=[1,1],c=l=>{if(!w_(l))throw new Error("object required");const u=o.get(l);if(u)return u;let h=a[0];const d=new Set,g=(B,q=++a[0])=>{h!==q&&(h=q,d.forEach(R=>R(B,q)))};let m=a[1];const v=(B=++a[1])=>(m!==B&&!d.size&&(m=B,_.forEach(([q])=>{const R=q[1](B);R>h&&(h=R)})),h),$=B=>(q,R)=>{const E=[...q];E[1]=[B,...E[1]],g(E,R)},_=new Map,x=(B,q)=>{if((Kb?"production":void 0)!=="production"&&_.has(B))throw new Error("prop listener already exists");if(d.size){const R=q[3]($(B));_.set(B,[q,R])}else _.set(B,[q])},A=B=>{var q;const R=_.get(B);R&&(_.delete(B),(q=R[1])==null||q.call(R))},T=B=>(d.add(B),d.size===1&&_.forEach(([R,E],b)=>{if((Kb?"production":void 0)!=="production"&&E)throw new Error("remove already exists");const f=R[3]($(b));_.set(b,[R,f])}),()=>{d.delete(B),d.size===0&&_.forEach(([R,E],b)=>{E&&(E(),_.set(b,[R]))})}),k=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),L=e(k,{deleteProperty(B,q){const R=Reflect.get(B,q);A(q);const E=Reflect.deleteProperty(B,q);return E&&g(["delete",[q],R]),E},set(B,q,R,E){const b=Reflect.has(B,q),f=Reflect.get(B,q,E);if(b&&(t(f,R)||o.has(R)&&t(f,o.get(R))))return!0;A(q),w_(R)&&(R=Q1e(R)||R);let p=R;if(R instanceof Promise)R.then(w=>{R.status="fulfilled",R.value=w,g(["resolve",[q],w])}).catch(w=>{R.status="rejected",R.reason=w,g(["reject",[q],w])});else{!Tl.has(R)&&r(R)&&(p=c(R));const w=!ig.has(p)&&Tl.get(p);w&&x(q,w)}return Reflect.set(B,q,p,E),g(["set",[q],R,f]),!0}});o.set(l,L);const F=[k,v,s,T];return Tl.set(L,F),Reflect.ownKeys(l).forEach(B=>{const q=Object.getOwnPropertyDescriptor(l,B);"value"in q&&(L[B]=l[B],delete q.value,delete q.writable),Object.defineProperty(k,B,q)}),L})=>[c,Tl,ig,t,e,r,n,i,s,o,a],[J1e]=Z1e();function nn(t={}){return J1e(t)}function ns(t,e,r){const n=Tl.get(t);(Kb?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let i;const s=[],o=n[3];let a=!1;const l=o(u=>{s.push(u),i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,l()}}function um(t,e){const r=Tl.get(t);(Kb?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");const[n,i,s]=r;return s(n,i(),e)}function Rh(t){return ig.add(t),t}function no(t,e,r,n){let i=t[e];return ns(t,()=>{const s=t[e];Object.is(i,s)||r(i=s)})}function X1e(t){const e=nn({data:Array.from([]),has(r){return this.data.some(n=>n[0]===r)},set(r,n){const i=this.data.find(s=>s[0]===r);return i?i[1]=n:this.data.push([r,n]),this},get(r){var n;return(n=this.data.find(i=>i[0]===r))==null?void 0:n[1]},delete(r){const n=this.data.findIndex(i=>i[0]===r);return n===-1?!1:(this.data.splice(n,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(r){this.data.forEach(n=>{r(n[1],n[0],this)})},keys(){return this.data.map(r=>r[0]).values()},values(){return this.data.map(r=>r[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var lM={};const b_=(typeof process<"u"&&typeof lM<"u"?lM.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",Es={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:b_,SECURE_SITE_DASHBOARD:`${b_}/dashboard`,SECURE_SITE_FAVICON:`${b_}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155","solana"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in a new browser tab"},DEFAULT_FEATURES:{swaps:!0,onramp:!0,receive:!0,send:!0,email:!0,emailShowWallets:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],history:!0,analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Oe={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Oe.getActiveNamespace(),e=Oe.getActiveCaipNetworkId(),r=e?e.split(":")[1]:void 0,n=r?isNaN(Number(r))?r:Number(r):void 0;return{namespace:t,caipNetworkId:e,chainId:n}},setWalletConnectDeepLink({name:t,href:e}){try{ct.setItem(gt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=ct.getItem(gt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{ct.removeItem(gt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{ct.setItem(gt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{ct.setItem(gt.ACTIVE_CAIP_NETWORK_ID,t),Oe.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return ct.getItem(gt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{ct.removeItem(gt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=y_(t);ct.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Oe.getRecentWallets();e.find(n=>n.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),ct.setItem(gt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=ct.getItem(gt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const r=y_(t);ct.setItem(r,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return ct.getItem(gt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=y_(t);return ct.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{ct.setItem(gt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return ct.getItem(gt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{ct.removeItem(gt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return ct.getItem(gt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var r;const t=ct.getItem(gt.ACTIVE_CAIP_NETWORK_ID);return(r=t==null?void 0:t.split(":"))==null?void 0:r[1]},setConnectionStatus(t){try{ct.setItem(gt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return ct.getItem(gt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=ct.getItem(gt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));ct.setItem(gt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Oe.getConnectedNamespaces();e.includes(t)||(e.push(t),Oe.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Oe.getConnectedNamespaces(),r=e.indexOf(t);r>-1&&(e.splice(r,1),Oe.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return ct.getItem(gt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{ct.setItem(gt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{ct.removeItem(gt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=ct.getItem(gt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Oe.getBalanceCache();ct.setItem(gt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const r=Oe.getBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.portfolio))return r.balance;Oe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Oe.getBalanceCache();e[t.caipAddress]=t,ct.setItem(gt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=ct.getItem(gt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Oe.getBalanceCache();ct.setItem(gt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const r=Oe.getNativeBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.nativeBalance))return r;console.info("Discarding cache for address",t),Oe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Oe.getNativeBalanceCache();e[t.caipAddress]=t,ct.setItem(gt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=ct.getItem(gt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const r=Oe.getEnsCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.ens))return r.ens;Oe.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Oe.getEnsCache();e[t.address]=t,ct.setItem(gt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Oe.getEnsCache();ct.setItem(gt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=ct.getItem(gt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const r=Oe.getIdentityCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.identity))return r.identity;Oe.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Oe.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},ct.setItem(gt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Oe.getIdentityCache();ct.setItem(gt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{ct.removeItem(gt.PORTFOLIO_CACHE),ct.removeItem(gt.NATIVE_BALANCE_CACHE),ct.removeItem(gt.ENS_CACHE),ct.removeItem(gt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}}},dt={isMobile(){var t;return this.isClient()?!!((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return dt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Es.TEN_SEC_MS:!0},isAllowedRetry(t,e=Es.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},getPairingExpiry(){return Date.now()+Es.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e){if(dt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},formatUniversalUrl(t,e){if(!dt.isHttpUrl(t))return this.formatNativeUrl(t,e);let r=t;r.endsWith("/")||(r=`${r}/`);const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Oe.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,r){window==null||window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},returnOpenHref(t,e,r){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,dt.wait(2e3)])},formatBalance(t,e){let r="0.000";if(typeof t=="string"){const n=Number(t);if(n){const i=Math.floor(n*1e3)/1e3;i&&(r=i.toString())}}return`${r}${e?` ${e}`:""}`},formatBalance2(t,e){var n;let r;if(t==="0")r="0";else if(typeof t=="string"){const i=Number(t);i&&(r=(n=i.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:n[0])}return{value:r??"0",rest:r==="0"?"000":"",symbol:e}},getApiUrl(){return Ue.W3M_API_URL},getBlockchainApiUrl(){return Ue.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Ue.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,r;return typeof t=="string"?t:typeof((r=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:r.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const r={};return e&&t&&(t.forEach((n,i)=>{r[n]=i}),e.sort((n,i)=>{const s=r[n.id],o=r[i.id];return s!==void 0&&o!==void 0?s-o:s!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const r of t)e+=r.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[r,n]=e.split(".");return{dollars:r,pennies:n}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const r=new Set;return t.filter(n=>{const i=n[e];return r.has(i)?!1:(r.add(i),!0)})},generateSdkVersion(t,e,r){const i=t.length===0?Es.ADAPTER_TYPES.UNIVERSAL:t.map(s=>s.adapterType).join(",");return`${e}-${i}-${r}`},createAccount(t,e,r,n,i){return{namespace:t,address:e,type:r,publicKey:n,path:i}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),r=e[0];return e.filter(Boolean).length===3&&r in Ue.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,r="state=";if(new URL(t).host==="auth.magic.link"){const i="provider_authorization_url=",s=t.substring(t.indexOf(i)+i.length),o=this.injectIntoUrl(decodeURIComponent(s),r,e);return t.replace(s,encodeURIComponent(o))}return this.injectIntoUrl(t,r,e)},injectIntoUrl(t,e,r){const n=t.indexOf(e);if(n===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const i=t.indexOf("&",n),s=e.length,o=i!==-1?i:t.length,a=t.substring(0,n+s),c=t.substring(n+s,o),l=t.substring(i),u=c+r;return a+u+l}};async function T0(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class g2{constructor({baseUrl:e,clientId:r}){this.baseUrl=e,this.clientId=r}async get({headers:e,signal:r,cache:n,...i}){const s=this.createUrl(i);return(await T0(s,{method:"GET",headers:e,signal:r,cache:n})).json()}async getBlob({headers:e,signal:r,...n}){const i=this.createUrl(n);return(await T0(i,{method:"GET",headers:e,signal:r})).blob()}async post({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await T0(s,{method:"POST",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async put({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await T0(s,{method:"PUT",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async delete({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await T0(s,{method:"DELETE",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}createUrl({path:e,params:r}){const n=new URL(e,this.baseUrl);return r&&Object.entries(r).forEach(([i,s])=>{s&&n.searchParams.append(i,s)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}}const ebe={handleSolanaDeeplinkRedirect(t){if(Y.state.activeChain===Ue.CHAIN.SOLANA){const e=window.location.href,r=encodeURIComponent(e);if(t==="Phantom"&&!("phantom"in window)){const n=e.startsWith("https")?"https":"http",i=e.split("/")[2],s=encodeURIComponent(`${n}://${i}`);window.location.href=`https://phantom.app/ul/browse/${r}?ref=${s}`}t==="Coinbase Wallet"&&!("coinbaseSolana"in window)&&(window.location.href=`https://go.cb-w.com/dapp?cb_url=${r}`)}}},Ms=nn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Xo={state:Ms,subscribeNetworkImages(t){return ns(Ms.networkImages,()=>t(Ms.networkImages))},subscribeKey(t,e){return no(Ms,t,e)},subscribe(t){return ns(Ms,()=>t(Ms))},setWalletImage(t,e){Ms.walletImages[t]=e},setNetworkImage(t,e){Ms.networkImages[t]=e},setChainImage(t,e){Ms.chainImages[t]=e},setConnectorImage(t,e){Ms.connectorImages={...Ms.connectorImages,[t]:e}},setTokenImage(t,e){Ms.tokenImages[t]=e},setCurrencyImage(t,e){Ms.currencyImages[t]=e}},tbe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00"},v_=nn({networkImagePromises:{}}),bL={async fetchWalletImage(t){if(t)return await pt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(v_.networkImagePromises[t]||(v_.networkImagePromises[t]=pt._fetchNetworkImage(t)),await v_.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Xo.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Xo.state.walletImages[t.image_id]},getNetworkImage(t){var e,r,n;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(r=t==null?void 0:t.assets)==null?void 0:r.imageUrl;if((n=t==null?void 0:t.assets)!=null&&n.imageId)return Xo.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Xo.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return Xo.state.connectorImages[t.imageId]},getChainImage(t){return Xo.state.networkImages[tbe[t]]}},rbe={getFeatureValue(t,e){const r=e==null?void 0:e[t];return r===void 0?Es.DEFAULT_FEATURES[t]:r},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(dt.isTelegram()){if(dt.isIos())return t.filter(e=>e!=="google");if(dt.isMac())return t.filter(e=>e!=="x");if(dt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},He=nn({features:Es.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Es.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0}),ge={state:He,subscribeKey(t,e){return no(He,t,e)},setOptions(t){Object.assign(He,t)},setFeatures(t){if(!t)return;He.features||(He.features=Es.DEFAULT_FEATURES);const e={...He.features,...t};He.features=e,He.features.socials&&(He.features.socials=rbe.filterSocialsByPlatform(He.features.socials))},setProjectId(t){He.projectId=t},setCustomRpcUrls(t){He.customRpcUrls=t},setAllWallets(t){He.allWallets=t},setIncludeWalletIds(t){He.includeWalletIds=t},setExcludeWalletIds(t){He.excludeWalletIds=t},setFeaturedWalletIds(t){He.featuredWalletIds=t},setTokens(t){He.tokens=t},setTermsConditionsUrl(t){He.termsConditionsUrl=t},setPrivacyPolicyUrl(t){He.privacyPolicyUrl=t},setCustomWallets(t){He.customWallets=t},setIsSiweEnabled(t){He.isSiweEnabled=t},setIsUniversalProvider(t){He.isUniversalProvider=t},setSdkVersion(t){He.sdkVersion=t},setMetadata(t){He.metadata=t},setDisableAppend(t){He.disableAppend=t},setEIP6963Enabled(t){He.enableEIP6963=t},setDebug(t){He.debug=t},setEnableWalletConnect(t){He.enableWalletConnect=t},setEnableWalletGuide(t){He.enableWalletGuide=t},setEnableAuthLogger(t){He.enableAuthLogger=t},setEnableWallets(t){He.enableWallets=t},setHasMultipleAddresses(t){He.hasMultipleAddresses=t},setSIWX(t){He.siwx=t},setConnectMethodsOrder(t){He.features={...He.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){He.features={...He.features,walletFeaturesOrder:t}},setSocialsOrder(t){He.features={...He.features,socials:t}},setCollapseWallets(t){He.features={...He.features,collapseWallets:t}},setEnableEmbedded(t){He.enableEmbedded=t},setAllowUnsupportedChain(t){He.allowUnsupportedChain=t},setManualWCControl(t){He.manualWCControl=t},setEnableNetworkSwitch(t){He.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,r])=>{r&&(He.defaultAccountTypes[e]=r)})},setUniversalProviderConfigOverride(t){He.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return He.universalProviderConfigOverride},getSnapshot(){return um(He)}},vl=nn({message:"",variant:"info",open:!1}),N1={state:vl,subscribeKey(t,e){return no(vl,t,e)},open(t,e){const{debug:r}=ge.state,{shortMessage:n,longMessage:i}=t;r&&(vl.message=n,vl.variant=e,vl.open=!0),i&&console.error(typeof i=="function"?i():i)},close(){vl.open=!1,vl.message="",vl.variant="info"}},nbe=dt.getAnalyticsUrl(),ibe=new g2({baseUrl:nbe,clientId:null}),sbe=["MODAL_CREATED"],wc=nn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Sr={state:wc,subscribe(t){return ns(wc,()=>t(wc))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=ge.state;return{projectId:t,st:e,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=ze.state.address;if(sbe.includes(t.data.event)||typeof window>"u")return;await ibe.post({path:"/e",params:Sr.getSdkProperties(),body:{eventId:dt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),wc.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Ue.HTTP_STATUS_CODES.FORBIDDEN&&!wc.reportedErrors.FORBIDDEN&&(N1.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${ng()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),wc.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;wc.timestamp=Date.now(),wc.data=t,(e=ge.state.features)!=null&&e.analytics&&Sr._sendAnalyticsEvent(wc)}},obe=dt.getApiUrl(),Di=new g2({baseUrl:obe,clientId:null}),abe="40",uM="4",cbe=20,Yt=nn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),pt={state:Yt,subscribeKey(t,e){return no(Yt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=ge.state;return{projectId:t,st:e||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ge.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Di.baseUrl}/getWalletImage/${t}`,r=await Di.getBlob({path:e,params:pt._getSdkProperties()});Xo.setWalletImage(t,URL.createObjectURL(r))},async _fetchNetworkImage(t){const e=`${Di.baseUrl}/public/getAssetImage/${t}`,r=await Di.getBlob({path:e,params:pt._getSdkProperties()});Xo.setNetworkImage(t,URL.createObjectURL(r))},async _fetchConnectorImage(t){const e=`${Di.baseUrl}/public/getAssetImage/${t}`,r=await Di.getBlob({path:e,params:pt._getSdkProperties()});Xo.setConnectorImage(t,URL.createObjectURL(r))},async _fetchCurrencyImage(t){const e=`${Di.baseUrl}/public/getCurrencyImage/${t}`,r=await Di.getBlob({path:e,params:pt._getSdkProperties()});Xo.setCurrencyImage(t,URL.createObjectURL(r))},async _fetchTokenImage(t){const e=`${Di.baseUrl}/public/getTokenImage/${t}`,r=await Di.getBlob({path:e,params:pt._getSdkProperties()});Xo.setTokenImage(t,URL.createObjectURL(r))},async fetchNetworkImages(){const t=Y.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:r})=>r==null?void 0:r.imageId).filter(Boolean).filter(r=>!bL.getNetworkImageById(r));e&&await Promise.allSettled(e.map(r=>pt._fetchNetworkImage(r)))},async fetchConnectorImages(){const{connectors:t}=ut.state,e=t.map(({imageId:r})=>r).filter(Boolean);await Promise.allSettled(e.map(r=>pt._fetchConnectorImage(r)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>pt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>pt._fetchTokenImage(e)))},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ge.state;if(t!=null&&t.length){const{data:e}=await Di.get({path:"/getWallets",params:{...pt._getSdkProperties(),page:"1",entries:t!=null&&t.length?String(t.length):uM,include:t==null?void 0:t.join(",")}});e.sort((n,i)=>t.indexOf(n.id)-t.indexOf(i.id));const r=e.map(n=>n.image_id).filter(Boolean);await Promise.allSettled(r.map(n=>pt._fetchWalletImage(n))),Yt.featured=e,Yt.allFeatured=e}},async fetchRecommendedWallets(){try{Yt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:r}=ge.state,n=[...e??[],...r??[]].filter(Boolean),i=Y.getRequestedCaipNetworkIds().join(","),{data:s,count:o}=await Di.get({path:"/getWallets",params:{...pt._getSdkProperties(),page:"1",chains:i,entries:uM,include:t==null?void 0:t.join(","),exclude:n==null?void 0:n.join(",")}}),a=Oe.getRecentWallets(),c=s.map(u=>u.image_id).filter(Boolean),l=a.map(u=>u.image_id).filter(Boolean);await Promise.allSettled([...c,...l].map(u=>pt._fetchWalletImage(u))),Yt.recommended=s,Yt.allRecommended=s,Yt.count=o??0}catch{}finally{Yt.isFetchingRecommendedWallets=!1}},async fetchWallets({page:t}){const{includeWalletIds:e,excludeWalletIds:r,featuredWalletIds:n}=ge.state,i=Y.getRequestedCaipNetworkIds().join(","),s=[...Yt.recommended.map(({id:l})=>l),...r??[],...n??[]].filter(Boolean),{data:o,count:a}=await Di.get({path:"/getWallets",params:{...pt._getSdkProperties(),page:String(t),entries:abe,chains:i,include:e==null?void 0:e.join(","),exclude:s.join(",")}}),c=o.slice(0,cbe).map(l=>l.image_id).filter(Boolean);await Promise.allSettled(c.map(l=>pt._fetchWalletImage(l))),Yt.wallets=dt.uniqueBy([...Yt.wallets,...pt._filterOutExtensions(o)],"id"),Yt.count=a>Yt.count?a:Yt.count,Yt.page=t},async initializeExcludedWallets({ids:t}){const e=Y.getRequestedCaipNetworkIds().join(","),{data:r}=await Di.get({path:"/getWallets",params:{...pt._getSdkProperties(),page:"1",entries:String(t.length),chains:e,include:t==null?void 0:t.join(",")}});r&&r.forEach(n=>{n!=null&&n.rdns&&Yt.excludedWallets.push({rdns:n.rdns,name:n.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:r,excludeWalletIds:n}=ge.state;Yt.search=[];const i=Y.getRequestedCaipNetworkIds().join(","),{data:s}=await Di.get({path:"/getWallets",params:{...pt._getSdkProperties(),page:"1",entries:"100",search:t==null?void 0:t.trim(),badge_type:e,chains:i,include:r==null?void 0:r.join(","),exclude:n==null?void 0:n.join(",")}});Sr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const o=s.map(a=>a.image_id).filter(Boolean);await Promise.allSettled([...o.map(a=>pt._fetchWalletImage(a)),dt.wait(300)]),Yt.search=pt._filterOutExtensions(s)},initPromise(t,e){const r=Yt.promises[t];return r||(Yt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0}={}){const i=[t&&pt.initPromise("connectorImages",pt.fetchConnectorImages),e&&pt.initPromise("featuredWallets",pt.fetchFeaturedWallets),r&&pt.initPromise("recommendedWallets",pt.fetchRecommendedWallets),n&&pt.initPromise("networkImages",pt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){var t;(t=ge.state.features)!=null&&t.analytics&&pt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Di.get({path:"/getAnalyticsConfig",params:pt._getSdkProperties()});ge.setFeatures({analytics:t})}catch{ge.setFeatures({analytics:!1})}},setFilterByNamespace(t){if(!t){Yt.featured=Yt.allFeatured,Yt.recommended=Yt.allRecommended;return}const e=Y.getRequestedCaipNetworkIds().join(",");Yt.featured=Yt.allFeatured.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(i=>e.includes(i))}),Yt.recommended=Yt.allRecommended.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(i=>e.includes(i))})}},zt=nn({view:"Connect",history:["Connect"],transactionStack:[]}),Jt={state:zt,subscribeKey(t,e){return no(zt,t,e)},pushTransactionStack(t){zt.transactionStack.push(t)},popTransactionStack(t){var r,n;const e=zt.transactionStack.pop();if(e)if(t)this.goBack(),(r=e==null?void 0:e.onCancel)==null||r.call(e);else{if(e.goBack)this.goBack();else if(e.replace){const s=zt.history.indexOf("ConnectingSiwe");s>0?this.goBackToIndex(s-1):(xn.close(),zt.history=[])}else e.view&&this.reset(e.view);(n=e==null?void 0:e.onSuccess)==null||n.call(e)}},push(t,e){t!==zt.view&&(zt.view=t,zt.history.push(t),zt.data=e)},reset(t,e){zt.view=t,zt.history=[t],zt.data=e},replace(t,e){zt.history.at(-1)===t||(zt.view=t,zt.history[zt.history.length-1]=t,zt.data=e)},goBack(){var e;const t=!Y.state.activeCaipAddress&&this.state.view==="ConnectingFarcaster";if(zt.history.length>1&&!zt.history.includes("UnsupportedChain")){zt.history.pop();const[r]=zt.history.slice(-1);r&&(zt.view=r)}else xn.close();(e=zt.data)!=null&&e.wallet&&(zt.data.wallet=void 0),setTimeout(()=>{var r,n,i;if(t){ze.setFarcasterUrl(void 0,Y.state.activeChain);const s=ut.getAuthConnector();(r=s==null?void 0:s.provider)==null||r.reload();const o=um(ge.state);(i=(n=s==null?void 0:s.provider)==null?void 0:n.syncDappData)==null||i.call(n,{metadata:o.metadata,sdkVersion:o.sdkVersion,projectId:o.projectId,sdkType:o.sdkType})}},100)},goBackToIndex(t){if(zt.history.length>1){zt.history=zt.history.slice(0,t+1);const[e]=zt.history.slice(-1);e&&(zt.view=e)}}},bc=nn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Yi={state:bc,subscribe(t){return ns(bc,()=>t(bc))},setThemeMode(t){bc.themeMode=t;try{const e=ut.getAuthConnector();if(e){const r=Yi.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:r,w3mThemeVariables:Kl(r,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){bc.themeVariables={...bc.themeVariables,...t};try{const e=ut.getAuthConnector();if(e){const r=Yi.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:r,w3mThemeVariables:Kl(bc.themeVariables,bc.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return um(bc)}},vL={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},Qt=nn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...vL}}),ut={state:Qt,subscribe(t){return ns(Qt,()=>{t(Qt)})},subscribeKey(t,e){return no(Qt,t,e)},initialize(t){t.forEach(e=>{const r=Oe.getConnectedConnectorId(e);r&&this.setConnectorId(r,e)})},setActiveConnector(t){t&&(Qt.activeConnector=Rh(t))},setConnectors(t){t.filter(r=>!Qt.allConnectors.some(n=>n.id===r.id&&this.getConnectorName(n.name)===this.getConnectorName(r.name)&&n.chain===r.chain)).forEach(r=>{r.type!=="MULTI_CHAIN"&&Qt.allConnectors.push(Rh(r))}),Qt.connectors=this.mergeMultiChainConnectors(Qt.allConnectors)},removeAdapter(t){Qt.allConnectors=Qt.allConnectors.filter(e=>e.chain!==t),Qt.connectors=this.mergeMultiChainConnectors(Qt.allConnectors)},mergeMultiChainConnectors(t){const e=this.generateConnectorMapByName(t),r=[];return e.forEach(n=>{const i=n[0],s=(i==null?void 0:i.id)===Ue.CONNECTOR_ID.AUTH;n.length>1&&i?r.push({name:i.name,imageUrl:i.imageUrl,imageId:i.imageId,connectors:[...n],type:s?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(i==null?void 0:i.id)||""}):i&&r.push(i)}),r},generateConnectorMapByName(t){const e=new Map;return t.forEach(r=>{const{name:n}=r,i=this.getConnectorName(n);if(!i)return;const s=e.get(i)||[];s.find(a=>a.chain===r.chain)||s.push(r),e.set(i,s)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(r=>{e.find(n=>n.chain===r.chain)||e.push(r)}),e},addConnector(t){var e,r,n;if(t.id===Ue.CONNECTOR_ID.AUTH){const i=t,s=um(ge.state),o=Yi.getSnapshot().themeMode,a=Yi.getSnapshot().themeVariables;(r=(e=i==null?void 0:i.provider)==null?void 0:e.syncDappData)==null||r.call(e,{metadata:s.metadata,sdkVersion:s.sdkVersion,projectId:s.projectId,sdkType:s.sdkType}),(n=i==null?void 0:i.provider)==null||n.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Kl(a,o)}),this.setConnectors([t])}else this.setConnectors([t])},getAuthConnector(t){var n;const e=t||Y.state.activeChain,r=Qt.connectors.find(i=>i.id===Ue.CONNECTOR_ID.AUTH);if(r)return(n=r==null?void 0:r.connectors)!=null&&n.length?r.connectors.find(s=>s.chain===e):r},getAnnouncedConnectorRdns(){return Qt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return Qt.allConnectors.find(e=>e.id===t)},getConnector(t,e){return Qt.allConnectors.filter(n=>n.chain===Y.state.activeChain).find(n=>{var i;return n.explorerId===t||((i=n.info)==null?void 0:i.rdns)===e})},syncIfAuthConnector(t){var s,o;if(t.id!=="ID_AUTH")return;const e=t,r=um(ge.state),n=Yi.getSnapshot().themeMode,i=Yi.getSnapshot().themeVariables;(o=(s=e==null?void 0:e.provider)==null?void 0:s.syncDappData)==null||o.call(s,{metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),e.provider.syncTheme({themeMode:n,themeVariables:i,w3mThemeVariables:Kl(i,n)})},getConnectorsByNamespace(t){const e=Qt.allConnectors.filter(r=>r.chain===t);return this.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=ut.getConnector(t.id,t.rdns);Y.state.activeChain===Ue.CHAIN.SOLANA&&ebe.handleSolanaDeeplinkRedirect((e==null?void 0:e.name)||t.name||""),e?Jt.push("ConnectingExternal",{connector:e}):Jt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?this.getConnectorsByNamespace(t):this.mergeMultiChainConnectors(Qt.allConnectors)},setFilterByNamespace(t){Qt.filterByNamespace=t,Qt.connectors=this.getConnectors(t),pt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Qt.activeConnectorIds={...Qt.activeConnectorIds,[e]:t},Oe.setConnectedConnectorId(e,t))},removeConnectorId(t){Qt.activeConnectorIds={...Qt.activeConnectorIds,[t]:void 0},Oe.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Qt.activeConnectorIds[t]},isConnected(t){return t?!!Qt.activeConnectorIds[t]:Object.values(Qt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Qt.activeConnectorIds={...vL}}};function Iw(t,e){return ut.getConnectorId(t)===e}function lbe(t){const e=Array.from(Y.state.chains.keys());let r=[];return t?(r.push([t,Y.state.chains.get(t)]),Iw(t,Ue.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(n=>{n!==t&&Iw(n,Ue.CONNECTOR_ID.WALLET_CONNECT)&&r.push([n,Y.state.chains.get(n)])}):Iw(t,Ue.CONNECTOR_ID.AUTH)&&e.forEach(n=>{n!==t&&Iw(n,Ue.CONNECTOR_ID.AUTH)&&r.push([n,Y.state.chains.get(n)])})):r=Array.from(Y.state.chains.entries()),r}var ube=Object.defineProperty,hbe=(t,e,r)=>e in t?ube(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hM=(t,e,r)=>hbe(t,typeof e!="symbol"?e+"":e,r);let dbe=class extends to{constructor(e){super(),this.opts=e,hM(this,"protocol","wc"),hM(this,"version",2)}};var fbe=Object.defineProperty,pbe=(t,e,r)=>e in t?fbe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gbe=(t,e,r)=>pbe(t,e+"",r);let mbe=class extends to{constructor(e,r){super(),this.core=e,this.logger=r,gbe(this,"records",new Map)}},ybe=class{constructor(e,r){this.logger=e,this.core=r}},wbe=class extends to{constructor(e,r){super(),this.relayer=e,this.logger=r}},bbe=class extends to{constructor(e){super()}},vbe=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},Ebe=class extends to{constructor(e,r){super(),this.relayer=e,this.logger=r}},_be=class extends to{constructor(e,r){super(),this.core=e,this.logger=r}},Sbe=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},xbe=class{constructor(e,r){this.projectId=e,this.logger=r}},Ibe=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};var Abe=Object.defineProperty,Cbe=(t,e,r)=>e in t?Abe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,dM=(t,e,r)=>Cbe(t,typeof e!="symbol"?e+"":e,r);let Nbe=class{constructor(e){this.opts=e,dM(this,"protocol","wc"),dM(this,"version",2)}},Mbe=class{constructor(e){this.client=e}};const $l={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Fu=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),In=nn({...Fu}),pi={state:In,subscribeKey(t,e){return no(In,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=dt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){In.message=Fu.message,In.variant=Fu.variant,In.svg=Fu.svg,In.open=Fu.open,In.autoClose=Fu.autoClose},_showMessage({message:t,svg:e,variant:r="success",autoClose:n=Fu.autoClose}){In.open?(In.open=!1,setTimeout(()=>{In.message=t,In.variant=r,In.svg=e,In.open=!0,In.autoClose=n},150)):(In.message=t,In.variant=r,In.svg=e,In.open=!0,In.autoClose=n)}},xg={getSIWX(){return ge.state.siwx},async initializeIfEnabled(){var s;const t=ge.state.siwx,e=Y.getActiveCaipAddress();if(!(t&&e))return;const[r,n,i]=e.split(":");if(Y.checkIfSupportedNetwork(r))try{if((await t.getSessions(`${r}:${n}`,i)).length)return;await xn.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Sr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((s=Er._getClient())==null?void 0:s.disconnect().catch(console.error)),Jt.reset("Connect"),pi.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ge.state.siwx,e=dt.getPlainAddress(Y.getActiveCaipAddress()),r=Y.getActiveCaipNetwork(),n=Er._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");if(!n)throw new Error("No ConnectionController client found");try{const i=await t.createMessage({chainId:r.caipNetworkId,accountAddress:e}),s=i.toString();ut.getConnectorId(r.chainNamespace)===Ue.CONNECTOR_ID.AUTH&&Jt.pushTransactionStack({view:null,goBack:!1,replace:!0});const a=await n.signMessage(s);await t.addSession({data:i,message:s,signature:a}),xn.close(),Sr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(i){const s=this.getSIWXEventProperties();(!xn.state.open||Jt.state.view==="ApproveTransaction")&&await xn.open({view:"SIWXSignMessage"}),s.isSmartAccount?pi.showError("This application might not support Smart Accounts"):pi.showError("Signature declined"),Sr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:s}),console.error("SWIXUtil:requestSignMessage",i)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await Er.disconnect():xn.close(),Jt.reset("Connect"),Sr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=ge.state.siwx,e=dt.getPlainAddress(Y.getActiveCaipAddress()),r=Y.getActiveCaipNetwork();return t&&e&&r?t.getSessions(r.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const r=Jt.state.view==="ApproveTransaction",n=Jt.state.view==="SIWXSignMessage";if(r||n)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:r}){var a,c,l;const n=xg.getSIWX(),i=new Set(e.map(u=>u.split(":")[0]));if(!n||i.size!==1||!i.has("eip155"))return!1;const s=await n.createMessage({chainId:((a=Y.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:s.nonce,domain:s.domain,uri:s.uri,exp:s.expirationTime,iat:s.issuedAt,nbf:s.notBefore,requestId:s.requestId,version:s.version,resources:s.resources,statement:s.statement,chainId:s.chainId,methods:r,chains:[s.chainId,...e.filter(u=>u!==s.chainId)]});if(pi.showLoading("Authenticating...",{autoClose:!1}),ze.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(i)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(h=>{const d=t.client.formatAuthMessage({request:h.p,iss:h.p.iss});return{data:{...h.p,accountAddress:h.p.iss.split(":").slice(-1).join(""),chainId:h.p.iss.split(":").slice(2,4).join(":"),uri:h.p.aud,version:h.p.version||s.version,expirationTime:h.p.exp,issuedAt:h.p.iat,notBefore:h.p.nbf},message:d,signature:h.s.s,cacao:h}});try{await n.setSessions(u),Sr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:xg.getSIWXEventProperties()})}catch(h){throw console.error("SIWX:universalProviderAuth - failed to set sessions",h),Sr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:xg.getSIWXEventProperties()}),await t.disconnect().catch(console.error),h}finally{pi.hide()}}return!0},getSIWXEventProperties(){var t;return{network:((t=Y.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)||"",isSmartAccount:ze.state.preferredAccountType===$l.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},mr=nn({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Tbe={state:mr,subscribe(t){return ns(mr,()=>t(mr))},setLastNetworkInView(t){mr.lastNetworkInView=t},async fetchTransactions(t,e){var r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");mr.loading=!0;try{const n=await Ve.fetchTransactions({account:t,cursor:mr.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId}),i=this.filterSpamTransactions(n.data),s=this.filterByConnectedChain(i),o=[...mr.transactions,...s];mr.loading=!1,e==="coinbase"?mr.coinbaseTransactions=this.groupTransactionsByYearAndMonth(mr.coinbaseTransactions,n.data):(mr.transactions=o,mr.transactionsByYear=this.groupTransactionsByYearAndMonth(mr.transactionsByYear,s)),mr.empty=o.length===0,mr.next=n.next?n.next:void 0}catch{Sr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ge.state.projectId,cursor:mr.next,isSmartAccount:ze.state.preferredAccountType===$l.ACCOUNT_TYPES.SMART_ACCOUNT}}),pi.showError("Failed to fetch transactions"),mr.loading=!1,mr.empty=!0,mr.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const r=t;return e.forEach(n=>{const i=new Date(n.metadata.minedAt).getFullYear(),s=new Date(n.metadata.minedAt).getMonth(),o=r[i]??{},c=(o[s]??[]).filter(l=>l.id!==n.id);r[i]={...o,[s]:[...c,n].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),r},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(n=>{var i;return((i=n.nft_info)==null?void 0:i.flags.is_spam)===!0}))},filterByConnectedChain(t){var n;const e=(n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId;return t.filter(i=>i.metadata.chain===e)},clearCursor(){mr.next=void 0},resetTransactions(){mr.transactions=[],mr.transactionsByYear={},mr.lastNetworkInView=void 0,mr.loading=!1,mr.empty=!1,mr.next=void 0}},yr=nn({wcError:!1,buffering:!1,status:"disconnected"});let Rd;const Er={state:yr,subscribeKey(t,e){return no(yr,t,e)},_getClient(){return yr._client},setClient(t){yr._client=Rh(t)},async connectWalletConnect(){var t,e,r,n;if(dt.isTelegram()||dt.isSafari()&&dt.isIos()){if(Rd){await Rd,Rd=void 0;return}if(!dt.isPairingExpired(yr==null?void 0:yr.wcPairingExpiry)){const i=yr.wcUri;yr.wcUri=i;return}Rd=(e=(t=this._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),this.state.status="connecting",await Rd,Rd=void 0,yr.wcPairingExpiry=void 0,this.state.status="connected"}else await((n=(r=this._getClient())==null?void 0:r.connectWalletConnect)==null?void 0:n.call(r))},async connectExternal(t,e,r=!0){var n,i;await((i=(n=this._getClient())==null?void 0:n.connectExternal)==null?void 0:i.call(n,t)),r&&Y.setActiveNamespace(e)},async reconnectExternal(t){var r,n;await((n=(r=this._getClient())==null?void 0:r.reconnectExternal)==null?void 0:n.call(r,t));const e=t.chain||Y.state.activeChain;e&&ut.setConnectorId(t.id,e)},async setPreferredAccountType(t){var r;xn.setLoading(!0,Y.state.activeChain);const e=ut.getAuthConnector();e&&(await(e==null?void 0:e.provider.setPreferredAccount(t)),await this.reconnectExternal(e),xn.setLoading(!1,Y.state.activeChain),Sr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=this._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var r;return(r=this._getClient())==null?void 0:r.parseUnits(t,e)},formatUnits(t,e){var r;return(r=this._getClient())==null?void 0:r.formatUnits(t,e)},async sendTransaction(t){var e;return(e=this._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=this._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=this._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=this._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=this._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=this._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=this._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=this._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,r;return((r=(e=this._getClient())==null?void 0:e.checkInstalled)==null?void 0:r.call(e,t))||!1},resetWcConnection(){yr.wcUri=void 0,yr.wcPairingExpiry=void 0,yr.wcLinking=void 0,yr.recentWallet=void 0,yr.status="disconnected",Tbe.resetTransactions(),Oe.deleteWalletConnectDeepLink()},resetUri(){yr.wcUri=void 0,yr.wcPairingExpiry=void 0},finalizeWcConnection(){var r,n;const{wcLinking:t,recentWallet:e}=Er.state;t&&Oe.setWalletConnectDeepLink(t),e&&Oe.setAppKitRecent(e),Sr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((n=(r=Jt.state.data)==null?void 0:r.wallet)==null?void 0:n.name)||"Unknown"}})},setWcBasic(t){yr.wcBasic=t},setUri(t){yr.wcUri=t,yr.wcPairingExpiry=dt.getPairingExpiry()},setWcLinking(t){yr.wcLinking=t},setWcError(t){yr.wcError=t,yr.buffering=!1},setRecentWallet(t){yr.recentWallet=t},setBuffering(t){yr.buffering=t},setStatus(t){yr.status=t},async disconnect(t){try{xn.setLoading(!0,t),await xg.clearSessions(),await Y.disconnect(t),xn.setLoading(!1,t),ut.setFilterByNamespace(void 0)}catch{throw new Error("Failed to disconnect")}}},$0=nn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Fc={state:$0,subscribe(t){return ns($0,()=>t($0))},set(t){Object.assign($0,{...$0,...t})}};function $be(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function fM(t){return $be(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const EL="2.44.4";let P0={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${EL}`},Ga=class I4 extends Error{constructor(e,r={}){var a;const n=(()=>{var c;return r.cause instanceof I4?r.cause.details:(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),i=r.cause instanceof I4&&r.cause.docsPath||r.docsPath,s=(a=P0.getDocsUrl)==null?void 0:a.call(P0,{...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...P0.version?[`Version: ${P0.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=EL}walk(e){return _L(this,e)}};function _L(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?_L(t.cause,e):e?null:t}let SL=class extends Ga{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}};function w5(t,{dir:e,size:r=32}={}){return typeof t=="string"?Pbe(t,{dir:e,size:r}):Obe(t,{dir:e,size:r})}function Pbe(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new SL({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function Obe(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new SL({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}let kbe=class extends Ga{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}},Rbe=class extends Ga{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function xL(t,{size:e}){if(fM(t)>e)throw new Rbe({givenSize:fM(t),maxSize:e})}const Dbe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function pM(t,e={}){return typeof t=="number"||typeof t=="bigint"?Bbe(t,e):typeof t=="string"?AL(t,e):typeof t=="boolean"?Lbe(t,e):IL(t,e)}function Lbe(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(xL(r,{size:e.size}),w5(r,{size:e.size})):r}function IL(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=Dbe[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(xL(n,{size:e.size}),w5(n,{dir:"right",size:e.size})):n}function Bbe(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new kbe({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?w5(a,{size:n}):a}const Ube=new TextEncoder;function AL(t,e={}){const r=Ube.encode(t);return IL(r,e)}let jbe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const bh=(t,e,r)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,r);function Fbe(t,e){let r=t.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(e,"0");let[i,s]=[r.slice(0,r.length-e),r.slice(r.length-e)];return s=s.replace(/(0+)$/,""),`${n?"-":""}${i||"0"}${s?`.${s}`:""}`}const b5=t=>t;class Ig extends Ga{constructor({body:e,cause:r,details:n,headers:i,status:s,url:o}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[s&&`Status: ${s}`,`URL: ${b5(o)}`,e&&`Request body: ${bh(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=s,this.url=o}}class CL extends Ga{constructor({body:e,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${b5(n)}`,`Request body: ${bh(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data,this.url=n}}class gM extends Ga{constructor({body:e,url:r}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${b5(r)}`,`Request body: ${bh(e)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=r}}const zbe=-1;class Cs extends Ga{constructor(e,{code:r,docsPath:n,metaMessages:i,name:s,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:i||(e==null?void 0:e.metaMessages),name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof CL?e.code:r??zbe}}class io extends Cs{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class hm extends Cs{constructor(e){super(e,{code:hm.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(hm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class dm extends Cs{constructor(e){super(e,{code:dm.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(dm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class fm extends Cs{constructor(e,{method:r}={}){super(e,{code:fm.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(fm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class pm extends Cs{constructor(e){super(e,{code:pm.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(pm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Ep extends Cs{constructor(e){super(e,{code:Ep.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Ep,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class gm extends Cs{constructor(e){super(e,{code:gm.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(gm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class mm extends Cs{constructor(e){super(e,{code:mm.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(mm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class ym extends Cs{constructor(e){super(e,{code:ym.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(ym,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class _p extends Cs{constructor(e){super(e,{code:_p.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(_p,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class lh extends Cs{constructor(e,{method:r}={}){super(e,{code:lh.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not supported.`})}}Object.defineProperty(lh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Sp extends Cs{constructor(e){super(e,{code:Sp.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Sp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class wm extends Cs{constructor(e){super(e,{code:wm.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(wm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class vh extends io{constructor(e){super(e,{code:vh.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(vh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class bm extends io{constructor(e){super(e,{code:bm.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(bm,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class vm extends io{constructor(e,{method:r}={}){super(e,{code:vm.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty(vm,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Em extends io{constructor(e){super(e,{code:Em.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Em,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class _m extends io{constructor(e){super(e,{code:_m.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(_m,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Sm extends io{constructor(e){super(e,{code:Sm.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Sm,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class xm extends io{constructor(e){super(e,{code:xm.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(xm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Im extends io{constructor(e){super(e,{code:Im.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Im,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Am extends io{constructor(e){super(e,{code:Am.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Am,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Cm extends io{constructor(e){super(e,{code:Cm.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Cm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Nm extends io{constructor(e){super(e,{code:Nm.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Nm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Mm extends io{constructor(e){super(e,{code:Mm.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Mm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Tm extends io{constructor(e){super(e,{code:Tm.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Tm,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class qbe extends Cs{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class v5 extends Ga{constructor({cause:e,message:r}={}){var i;const n=(i=r==null?void 0:r.replace("execution reverted: ",""))==null?void 0:i.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(v5,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(v5,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted|gas required exceeds allowance/});function Wbe(){let t=()=>{},e=()=>{};return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}const E_=new Map;function Hbe({fn:t,id:e,shouldSplitBatch:r,wait:n=0,sort:i}){const s=async()=>{const u=c();o();const h=u.map(({args:d})=>d);h.length!==0&&t(h).then(d=>{i&&Array.isArray(d)&&d.sort(i);for(let g=0;g<u.length;g++){const{resolve:m}=u[g];m==null||m([d[g],d])}}).catch(d=>{for(let g=0;g<u.length;g++){const{reject:m}=u[g];m==null||m(d)}})},o=()=>E_.delete(e),a=()=>c().map(({args:u})=>u),c=()=>E_.get(e)||[],l=u=>E_.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:h,resolve:d,reject:g}=Wbe();return(r==null?void 0:r([...a(),u]))&&s(),c().length>0?(l({args:u,resolve:d,reject:g}),h):(l({args:u,resolve:d,reject:g}),setTimeout(s,n),h)}}}async function NL(t){return new Promise(e=>setTimeout(e,t))}function Kbe(t,{delay:e=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((i,s)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await NL(u),o({count:a+1})};try{const l=await t();i(l)}catch(l){if(a<r&&await n({count:a,error:l}))return c({error:l});s(l)}};o()})}const A4=256;let Aw=A4,Cw;function Vbe(t=11){if(!Cw||Aw+t>A4*2){Cw="",Aw=0;for(let e=0;e<A4;e++)Cw+=(256+Math.random()*256|0).toString(16).substring(1)}return Cw.substring(Aw,Aw+++t)}const Nw=new jbe(8192);function Gbe(t,{enabled:e=!0,id:r}){if(!e||!r)return t();if(Nw.get(r))return Nw.get(r);const n=t().finally(()=>Nw.delete(r));return Nw.set(r,n),n}function Ybe(t,e={}){return async(r,n={})=>{var h;const{dedupe:i=!1,methods:s,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...n},{method:l}=r;if((h=s==null?void 0:s.exclude)!=null&&h.includes(l))throw new lh(new Error("method not supported"),{method:l});if(s!=null&&s.include&&!s.include.includes(l))throw new lh(new Error("method not supported"),{method:l});const u=i?AL(`${c}.${bh(r)}`):void 0;return Gbe(()=>Kbe(async()=>{try{return await t(r)}catch(d){const g=d;switch(g.code){case hm.code:throw new hm(g);case dm.code:throw new dm(g);case fm.code:throw new fm(g,{method:r.method});case pm.code:throw new pm(g);case Ep.code:throw new Ep(g);case gm.code:throw new gm(g);case mm.code:throw new mm(g);case ym.code:throw new ym(g);case _p.code:throw new _p(g);case lh.code:throw new lh(g,{method:r.method});case Sp.code:throw new Sp(g);case wm.code:throw new wm(g);case vh.code:throw new vh(g);case bm.code:throw new bm(g);case vm.code:throw new vm(g);case Em.code:throw new Em(g);case _m.code:throw new _m(g);case Sm.code:throw new Sm(g);case xm.code:throw new xm(g);case Im.code:throw new Im(g);case Am.code:throw new Am(g);case Cm.code:throw new Cm(g);case Nm.code:throw new Nm(g);case Mm.code:throw new Mm(g);case Tm.code:throw new Tm(g);case 5e3:throw new vh(g);default:throw d instanceof Ga?d:new qbe(g)}}},{delay:({count:d,error:g})=>{var m;if(g&&g instanceof Ig){const v=(m=g==null?void 0:g.headers)==null?void 0:m.get("Retry-After");if(v!=null&&v.match(/\d/))return Number.parseInt(v,10)*1e3}return~~(1<<d)*o},retryCount:a,shouldRetry:({error:d})=>Qbe(d)}),{enabled:i,id:u})}}function Qbe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Sp.code||t.code===Ep.code:t instanceof Ig&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Zbe(t,{errorInstance:e=new Error("timed out"),timeout:r,signal:n}){return new Promise((i,s)=>{(async()=>{let o;try{const a=new AbortController;r>0&&(o=setTimeout(()=>{n&&a.abort()},r)),i(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&s(e),s(a)}finally{clearTimeout(o)}})()})}function Jbe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const mM=Jbe();function Xbe(t,e={}){const{url:r,headers:n}=eve(t);return{async request(i){var m;const{body:s,fetchFn:o=e.fetchFn??fetch,onRequest:a=e.onRequest,onResponse:c=e.onResponse,timeout:l=e.timeout??1e4}=i,u={...e.fetchOptions??{},...i.fetchOptions??{}},{headers:h,method:d,signal:g}=u;try{const v=await Zbe(async({signal:_})=>{const x={...u,body:Array.isArray(s)?bh(s.map(D=>({jsonrpc:"2.0",id:D.id??mM.take(),...D}))):bh({jsonrpc:"2.0",id:s.id??mM.take(),...s}),headers:{...n,"Content-Type":"application/json",...h},method:d||"POST",signal:g||(l>0?_:null)},A=new Request(r,x),T=await(a==null?void 0:a(A,x))??{...x,url:r};return await o(T.url??r,T)},{errorInstance:new gM({body:s,url:r}),timeout:l,signal:!0});c&&await c(v);let $;if((m=v.headers.get("Content-Type"))!=null&&m.startsWith("application/json"))$=await v.json();else{$=await v.text();try{$=JSON.parse($||"{}")}catch(_){if(v.ok)throw _;$={error:$}}}if(!v.ok)throw new Ig({body:s,details:bh($.error)||v.statusText,headers:v.headers,status:v.status,url:r});return $}catch(v){throw v instanceof Ig||v instanceof gM?v:new Ig({body:s,cause:v,url:r})}}}}function eve(t){try{const e=new URL(t),r=(()=>{if(e.username){const n=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`;return e.username="",e.password="",{url:e.toString(),headers:{Authorization:`Basic ${btoa(n)}`}}}})();return{url:e.toString(),...r}}catch{return{url:t}}}function ML({key:t,methods:e,name:r,request:n,retryCount:i=3,retryDelay:s=150,timeout:o,type:a},c){const l=Vbe();return{config:{key:t,methods:e,name:r,request:n,retryCount:i,retryDelay:s,timeout:o,type:a},request:Ybe(n,{methods:e,retryCount:i,retryDelay:s,uid:l}),value:c}}function yM(t,e={}){const{key:r="fallback",name:n="Fallback",rank:i=!1,shouldThrow:s=tve,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...h})=>{let d=t,g=()=>{};const m=ML({key:r,name:n,async request({method:v,params:$}){let _;const x=async(A=0)=>{const T=d[A]({...h,chain:c,retryCount:0,timeout:u});try{const k=await T.request({method:v,params:$});return g({method:v,params:$,response:k,transport:T,status:"success"}),k}catch(k){if(g({error:k,method:v,params:$,transport:T,status:"error"}),s(k)||A===d.length-1||(_??(_=d.slice(A+1).some(D=>{const{include:L,exclude:F}=D({chain:c}).config.methods||{};return L?L.includes(v):F?!F.includes(v):!0})),!_))throw k;return x(A+1)}};return x()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:v=>g=v,transports:d.map(v=>v({chain:c,retryCount:0}))});if(i){const v=typeof i=="object"?i:{};rve({chain:c,interval:v.interval??l,onTransports:$=>d=$,ping:v.ping,sampleCount:v.sampleCount,timeout:v.timeout,transports:d,weights:v.weights})}return m}}function tve(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===_p.code||t.code===vh.code||v5.nodeMessage.test(t.message)||t.code===5e3))}function rve({chain:t,interval:e=4e3,onTransports:r,ping:n,sampleCount:i=10,timeout:s=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],h=async()=>{const d=await Promise.all(o.map(async v=>{const $=v({chain:t,retryCount:0,timeout:s}),_=Date.now();let x,A;try{await(n?n({transport:$}):$.request({method:"net_listening"})),A=1}catch{A=0}finally{x=Date.now()}return{latency:x-_,success:A}}));u.push(d),u.length>i&&u.shift();const g=Math.max(...u.map(v=>Math.max(...v.map(({latency:$})=>$)))),m=o.map((v,$)=>{const _=u.map(D=>D[$].latency),A=1-_.reduce((D,L)=>D+L,0)/_.length/g,T=u.map(D=>D[$].success),k=T.reduce((D,L)=>D+L,0)/T.length;return k===0?[0,$]:[l*A+c*k,$]}).sort((v,$)=>$[0]-v[0]);r(m.map(([,v])=>o[v])),await NL(e),h()};h()}class nve extends Ga{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function __(t,e={}){const{batch:r,fetchFn:n,fetchOptions:i,key:s="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:l,retryDelay:u,raw:h}=e;return({chain:d,retryCount:g,timeout:m})=>{const{batchSize:v=1e3,wait:$=0}=typeof r=="object"?r:{},_=e.retryCount??g,x=m??e.timeout??1e4,A=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!A)throw new nve;const T=Xbe(A,{fetchFn:n,fetchOptions:i,onRequest:c,onResponse:l,timeout:x});return ML({key:s,methods:o,name:a,async request({method:k,params:D}){const L={method:k,params:D},{schedule:F}=Hbe({id:A,wait:$,shouldSplitBatch(E){return E.length>v},fn:E=>T.request({body:E}),sort:(E,b)=>E.id-b.id}),B=async E=>r?F(E):[await T.request({body:E})],[{error:q,result:R}]=await B(L);if(h)return{error:q,result:R};if(q)throw new CL({body:L,error:q,url:A});return R},retryCount:_,retryDelay:u,timeout:x,type:"http"},{fetchOptions:i,url:A})}}const S_={createBalance(t,e){const r={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Fbe(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const r=e[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(r=>this.isValidAsset(r)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},wM={async getMyTokensWithBalance(t){const e=ze.state.address,r=Y.state.activeCaipNetwork;if(!e||!r)return[];if(r.chainNamespace==="eip155"){const i=await this.getEIP155Balances(e,r);if(i)return this.filterLowQualityTokens(i)}const n=await Ve.getBalance(e,r.caipNetworkId,t);return this.filterLowQualityTokens(n.balances)},async getEIP155Balances(t,e){var r,n;try{const i=S_.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),s=await Er.getCapabilities(t);if(!((n=(r=s==null?void 0:s[i])==null?void 0:r.assetDiscovery)!=null&&n.supported))return null;const o=await Er.walletGetAssets({account:t,chainFilter:[i]});return S_.isWalletGetAssetsResponse(o)?(o[i]||[]).map(c=>S_.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Y.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},It=nn({tokenBalances:[],loading:!1}),bM={state:It,subscribe(t){return ns(It,()=>t(It))},subscribeKey(t,e){return no(It,t,e)},setToken(t){t&&(It.token=Rh(t))},setTokenAmount(t){It.sendTokenAmount=t},setReceiverAddress(t){It.receiverAddress=t},setReceiverProfileImageUrl(t){It.receiverProfileImageUrl=t},setReceiverProfileName(t){It.receiverProfileName=t},setGasPrice(t){It.gasPrice=t},setGasPriceInUsd(t){It.gasPriceInUSD=t},setNetworkBalanceInUsd(t){It.networkBalanceInUSD=t},setLoading(t){It.loading=t},sendToken(){var t;switch((t=Y.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":this.sendEvmToken();return;case"solana":this.sendSolanaToken();return;default:throw new Error("Unsupported chain")}},sendEvmToken(){var t,e,r,n,i;(t=this.state.token)!=null&&t.address&&this.state.sendTokenAmount&&this.state.receiverAddress?(Sr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:ze.state.preferredAccountType===$l.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token.address,amount:this.state.sendTokenAmount,network:((e=Y.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||""}}),this.sendERC20Token({receiverAddress:this.state.receiverAddress,tokenAddress:this.state.token.address,sendTokenAmount:this.state.sendTokenAmount,decimals:this.state.token.quantity.decimals})):this.state.receiverAddress&&this.state.sendTokenAmount&&this.state.gasPrice&&((r=this.state.token)!=null&&r.quantity.decimals)&&(Sr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:ze.state.preferredAccountType===$l.ACCOUNT_TYPES.SMART_ACCOUNT,token:(n=this.state.token)==null?void 0:n.symbol,amount:this.state.sendTokenAmount,network:((i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),this.sendNativeToken({receiverAddress:this.state.receiverAddress,sendTokenAmount:this.state.sendTokenAmount,gasPrice:this.state.gasPrice,decimals:this.state.token.quantity.decimals}))},async fetchTokenBalance(t){var s,o;It.loading=!0;const e=(s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId,r=(o=Y.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=Y.state.activeCaipAddress,i=n?dt.getPlainAddress(n):void 0;if(It.lastRetry&&!dt.isAllowedRetry(It.lastRetry,30*Es.ONE_SEC_MS))return It.loading=!1,[];try{if(i&&e&&r){const a=await wM.getMyTokensWithBalance();return It.tokenBalances=a,It.lastRetry=void 0,a}}catch(a){It.lastRetry=Date.now(),t==null||t(a),pi.showError("Token Balance Unavailable")}finally{It.loading=!1}return[]},fetchNetworkBalance(){if(It.tokenBalances.length===0)return;const t=wM.mapBalancesToSwapTokens(It.tokenBalances);if(!t)return;const e=t.find(r=>r.address===Y.getActiveNetworkTokenAddress());e&&(It.networkBalanceInUSD=e?xw.multiply(e.quantity.numeric,e.price).toString():"0")},isInsufficientNetworkTokenForGas(t,e){const r=e||"0";return xw.bigNumber(t).eq(0)?!0:xw.bigNumber(xw.bigNumber(r)).gt(t)},hasInsufficientGasFunds(){let t=!0;return ze.state.preferredAccountType===$l.ACCOUNT_TYPES.SMART_ACCOUNT?t=!1:It.networkBalanceInUSD&&(t=this.isInsufficientNetworkTokenForGas(It.networkBalanceInUSD,It.gasPriceInUSD)),t},async sendNativeToken(t){var s,o,a,c;Jt.pushTransactionStack({view:"Account",goBack:!1});const e=t.receiverAddress,r=ze.state.address,n=Er.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),i="0x";try{await Er.sendTransaction({chainNamespace:"eip155",to:e,address:r,data:i,value:n??BigInt(0),gasPrice:t.gasPrice}),pi.showSuccess("Transaction started"),Sr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:ze.state.preferredAccountType===$l.ACCOUNT_TYPES.SMART_ACCOUNT,token:((s=this.state.token)==null?void 0:s.symbol)||"",amount:t.sendTokenAmount,network:((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),this.resetSend()}catch(l){console.error("SendController:sendERC20Token - failed to send native token",l);const u=l instanceof Error?l.message:"Unknown error";Sr.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:u,isSmartAccount:ze.state.preferredAccountType===$l.ACCOUNT_TYPES.SMART_ACCOUNT,token:((a=this.state.token)==null?void 0:a.symbol)||"",amount:t.sendTokenAmount,network:((c=Y.state.activeCaipNetwork)==null?void 0:c.caipNetworkId)||""}}),pi.showError("Something went wrong")}},async sendERC20Token(t){var r,n;Jt.pushTransactionStack({view:"Account",goBack:!1});const e=Er.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));try{if(ze.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const i=dt.getPlainAddress(t.tokenAddress);await Er.writeContract({fromAddress:ze.state.address,tokenAddress:i,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:V1e.getERC20Abi(i),chainNamespace:"eip155"}),pi.showSuccess("Transaction started"),this.resetSend()}}catch(i){console.error("SendController:sendERC20Token - failed to send erc20 token",i);const s=i instanceof Error?i.message:"Unknown error";Sr.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:s,isSmartAccount:ze.state.preferredAccountType===$l.ACCOUNT_TYPES.SMART_ACCOUNT,token:((r=this.state.token)==null?void 0:r.symbol)||"",amount:t.sendTokenAmount,network:((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)||""}}),pi.showError("Something went wrong")}},sendSolanaToken(){if(!this.state.sendTokenAmount||!this.state.receiverAddress){pi.showError("Please enter a valid amount and receiver address");return}Jt.pushTransactionStack({view:"Account",goBack:!1}),Er.sendTransaction({chainNamespace:"solana",to:this.state.receiverAddress,value:this.state.sendTokenAmount}).then(()=>{this.resetSend(),ze.fetchTokenBalance()}).catch(t=>{pi.showError("Failed to send transaction. Please try again."),console.error("SendController:sendToken - failed to send solana transaction",t)})},resetSend(){It.token=void 0,It.sendTokenAmount=void 0,It.receiverAddress=void 0,It.receiverProfileImageUrl=void 0,It.receiverProfileName=void 0,It.loading=!1,It.tokenBalances=[]}},x_={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},Mw={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},_e=nn({chains:X1e(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),Y={state:_e,subscribe(t){return ns(_e,()=>{t(_e)})},subscribeKey(t,e){return no(_e,t,e)},subscribeChainProp(t,e,r){let n;return ns(_e.chains,()=>{var s;const i=r||_e.activeChain;if(i){const o=(s=_e.chains.get(i))==null?void 0:s[t];n!==o&&(n=o,e(o))}})},initialize(t,e,r){const{chainId:n,namespace:i}=Oe.getActiveNetworkProps(),s=e==null?void 0:e.find(l=>l.id.toString()===(n==null?void 0:n.toString())),a=t.find(l=>(l==null?void 0:l.namespace)===i)||(t==null?void 0:t[0]),c=new Set([...(e==null?void 0:e.map(l=>l.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(_e.noAdapters=!0),_e.noAdapters||(_e.activeChain=a==null?void 0:a.namespace,_e.activeCaipNetwork=s,this.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:s}),_e.activeChain&&Fc.set({activeChain:a==null?void 0:a.namespace})),c.forEach(l=>{const u=e==null?void 0:e.filter(h=>h.chainNamespace===l);Y.state.chains.set(l,{namespace:l,networkState:nn({...Mw,caipNetwork:u==null?void 0:u[0]}),accountState:nn(x_),caipNetworks:u??[],...r}),this.setRequestedCaipNetworks(u??[],l)})},removeAdapter(t){var e,r;if(_e.activeChain===t){const n=Array.from(_e.chains.entries()).find(([i])=>i!==t);if(n){const i=(r=(e=n[1])==null?void 0:e.caipNetworks)==null?void 0:r[0];i&&this.setActiveCaipNetwork(i)}}_e.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:r},n){_e.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Mw,caipNetwork:n[0]},accountState:x_,caipNetworks:n,connectionControllerClient:r,networkControllerClient:e}),this.setRequestedCaipNetworks((n==null?void 0:n.filter(i=>i.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var r;const e=_e.chains.get(t.chainNamespace);if(e){const n=[...e.caipNetworks||[]];(r=e.caipNetworks)!=null&&r.find(i=>i.id===t.id)||n.push(t),_e.chains.set(t.chainNamespace,{...e,caipNetworks:n}),this.setRequestedCaipNetworks(n,t.chainNamespace)}},removeNetwork(t,e){var n,i,s;const r=_e.chains.get(t);if(r){const o=((n=_e.activeCaipNetwork)==null?void 0:n.id)===e,a=[...((i=r.caipNetworks)==null?void 0:i.filter(c=>c.id!==e))||[]];o&&((s=r==null?void 0:r.caipNetworks)!=null&&s[0])&&this.setActiveCaipNetwork(r.caipNetworks[0]),_e.chains.set(t,{...r,caipNetworks:a}),this.setRequestedCaipNetworks(a||[],t)}},setAdapterNetworkState(t,e){const r=_e.chains.get(t);r&&(r.networkState={...r.networkState||Mw,...e},_e.chains.set(t,r))},setChainAccountData(t,e,r=!0){if(!t)throw new Error("Chain is required to update chain account data");const n=_e.chains.get(t);if(n){const i={...n.accountState||x_,...e};_e.chains.set(t,{...n,accountState:i}),(_e.chains.size===1||_e.activeChain===t)&&(e.caipAddress&&(_e.activeCaipAddress=e.caipAddress),ze.replaceState(i))}},setChainNetworkData(t,e){if(!t)return;const r=_e.chains.get(t);if(r){const n={...r.networkState||Mw,...e};_e.chains.set(t,{...r,networkState:n})}},setAccountProp(t,e,r,n=!0){this.setChainAccountData(r,{[t]:e},n),t==="status"&&e==="disconnected"&&r&&ut.removeConnectorId(r)},setActiveNamespace(t){var n,i;_e.activeChain=t;const e=t?_e.chains.get(t):void 0,r=(n=e==null?void 0:e.networkState)==null?void 0:n.caipNetwork;r!=null&&r.id&&t&&(_e.activeCaipAddress=(i=e==null?void 0:e.accountState)==null?void 0:i.caipAddress,_e.activeCaipNetwork=r,this.setChainNetworkData(t,{caipNetwork:r}),Oe.setActiveCaipNetworkId(r==null?void 0:r.caipNetworkId),Fc.set({activeChain:t,selectedNetworkId:r==null?void 0:r.caipNetworkId}))},setActiveCaipNetwork(t){var n,i,s;if(!t)return;_e.activeChain!==t.chainNamespace&&this.setIsSwitchingNamespace(!0);const e=_e.chains.get(t.chainNamespace);_e.activeChain=t.chainNamespace,_e.activeCaipNetwork=t,this.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(n=e==null?void 0:e.accountState)!=null&&n.address?_e.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(i=e==null?void 0:e.accountState)==null?void 0:i.address}`:_e.activeCaipAddress=void 0,this.setAccountProp("caipAddress",_e.activeCaipAddress,t.chainNamespace),e&&ze.replaceState(e.accountState),bM.resetSend(),Fc.set({activeChain:_e.activeChain,selectedNetworkId:(s=_e.activeCaipNetwork)==null?void 0:s.caipNetworkId}),Oe.setActiveCaipNetworkId(t.caipNetworkId),!this.checkIfSupportedNetwork(t.chainNamespace)&&ge.state.enableNetworkSwitch&&!ge.state.allowUnsupportedChain&&!Er.state.wcBasic&&this.showUnsupportedChainUI()},addCaipNetwork(t){var r;if(!t)return;const e=_e.chains.get(t.chainNamespace);e&&((r=e==null?void 0:e.caipNetworks)==null||r.push(t))},async switchActiveNamespace(t){var i;if(!t)return;const e=t!==Y.state.activeChain,r=(i=Y.getNetworkData(t))==null?void 0:i.caipNetwork,n=Y.getCaipNetworkByNamespace(t,r==null?void 0:r.id);e&&n&&await Y.switchActiveNetwork(n)},async switchActiveNetwork(t){var i;const e=Y.state.chains.get(Y.state.activeChain);!((i=e==null?void 0:e.caipNetworks)!=null&&i.some(s=>{var o;return s.id===((o=_e.activeCaipNetwork)==null?void 0:o.id)}))&&Jt.goBack();const n=this.getNetworkControllerClient(t.chainNamespace);n&&(await n.switchCaipNetwork(t),Sr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}}))},getNetworkControllerClient(t){const e=t||_e.activeChain,r=_e.chains.get(e);if(!r)throw new Error("Chain adapter not found");if(!r.networkControllerClient)throw new Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(t){const e=t||_e.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const r=_e.chains.get(e);if(!(r!=null&&r.connectionControllerClient))throw new Error("ConnectionController client not set");return r.connectionControllerClient},getAccountProp(t,e){var i;let r=_e.activeChain;if(e&&(r=e),!r)return;const n=(i=_e.chains.get(r))==null?void 0:i.accountState;if(n)return n[t]},getNetworkProp(t,e){var n;const r=(n=_e.chains.get(e))==null?void 0:n.networkState;if(r)return r[t]},getRequestedCaipNetworks(t){const e=_e.chains.get(t),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=(e==null?void 0:e.networkState)||{};return dt.sortRequestedNetworks(r,n)},getAllRequestedCaipNetworks(){const t=[];return _e.chains.forEach(e=>{const r=this.getRequestedCaipNetworks(e.namespace);t.push(...r)}),t},setRequestedCaipNetworks(t,e){this.setAdapterNetworkState(e,{requestedCaipNetworks:t})},getAllApprovedCaipNetworkIds(){const t=[];return _e.chains.forEach(e=>{const r=this.getApprovedCaipNetworkIds(e.namespace);t.push(...r)}),t},getActiveCaipNetwork(){return _e.activeCaipNetwork},getActiveCaipAddress(){return _e.activeCaipAddress},getApprovedCaipNetworkIds(t){var n;const e=_e.chains.get(t);return((n=e==null?void 0:e.networkState)==null?void 0:n.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=this.getNetworkControllerClient(),r=await(e==null?void 0:e.getApprovedCaipNetworksData());this.setAdapterNetworkState(t,{approvedCaipNetworkIds:r==null?void 0:r.approvedCaipNetworkIds,supportsAllNetworks:r==null?void 0:r.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const r=e||_e.activeCaipNetwork,n=this.getRequestedCaipNetworks(t);return n.length?n==null?void 0:n.some(i=>i.id===(r==null?void 0:r.id)):!0},checkIfSupportedChainId(t){if(!_e.activeChain)return!0;const e=this.getRequestedCaipNetworks(_e.activeChain);return e==null?void 0:e.some(r=>r.id===t)},setSmartAccountEnabledNetworks(t,e){this.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var n;const t=mL.caipNetworkIdToNumber((n=_e.activeCaipNetwork)==null?void 0:n.caipNetworkId),e=_e.activeChain;if(!e||!t)return!1;const r=this.getNetworkProp("smartAccountEnabledNetworks",e);return!!(r!=null&&r.includes(Number(t)))},getActiveNetworkTokenAddress(){var n,i;const t=((n=_e.activeCaipNetwork)==null?void 0:n.chainNamespace)||"eip155",e=((i=_e.activeCaipNetwork)==null?void 0:i.id)||1,r=Es.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${r}`},showUnsupportedChainUI(){xn.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=_e.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Es.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){this.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");_e.activeCaipAddress=void 0,this.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),ut.removeConnectorId(e)},async disconnect(t){const e=lbe(t);try{bM.resetSend();const r=await Promise.allSettled(e.map(async([i,s])=>{var o;try{const{caipAddress:a}=this.getAccountData(i)||{};a&&((o=s.connectionControllerClient)!=null&&o.disconnect)&&await s.connectionControllerClient.disconnect(i),this.resetAccount(i),this.resetNetwork(i)}catch(a){throw new Error(`Failed to disconnect chain ${i}: ${a.message}`)}}));Er.resetWcConnection();const n=r.filter(i=>i.status==="rejected");if(n.length>0)throw new Error(n.map(i=>i.reason.message).join(", "));Oe.deleteConnectedSocialProvider(),t?ut.removeConnectorId(t):ut.resetConnectorIds(),Sr.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:t||"all"}})}catch(r){console.error(r.message||"Failed to disconnect chains"),Sr.sendEvent({type:"track",event:"DISCONNECT_ERROR",properties:{message:r.message||"Failed to disconnect chains"}})}},setIsSwitchingNamespace(t){_e.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var r,n;const t=[];let e;if(_e.chains.forEach(i=>{Ue.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(s=>s===i.namespace)&&i.namespace&&t.push(i.namespace)}),t.length>0){const i=t[0];return e=i?(n=(r=_e.chains.get(i))==null?void 0:r.caipNetworks)==null?void 0:n[0]:void 0,e}},getAccountData(t){var e;return t?(e=Y.state.chains.get(t))==null?void 0:e.accountState:ze.state},getNetworkData(t){var r;const e=t||_e.activeChain;if(e)return(r=Y.state.chains.get(e))==null?void 0:r.networkState},getCaipNetworkByNamespace(t,e){var i,s,o;if(!t)return;const r=Y.state.chains.get(t),n=(i=r==null?void 0:r.caipNetworks)==null?void 0:i.find(a=>a.id===e);return n||((s=r==null?void 0:r.networkState)==null?void 0:s.caipNetwork)||((o=r==null?void 0:r.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=ut.state.filterByNamespace;return(t?[_e.chains.get(t)]:Array.from(_e.chains.values())).flatMap(r=>(r==null?void 0:r.caipNetworks)||[]).map(r=>r.caipNetworkId)}},ive={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},TL=dt.getBlockchainApiUrl(),Ts=nn({clientId:null,api:new g2({baseUrl:TL,clientId:null}),supportedChains:{http:[],ws:[]}}),Ve={state:Ts,async get(t){const{st:e,sv:r}=Ve.getSdkProperties(),n=ge.state.projectId,i={...t.params||{},st:e,sv:r,projectId:n};return Ts.api.get({...t,params:i})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ge.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Ts.supportedChains.http.length||await Ve.getSupportedNetworks()}catch{return!1}return Ts.supportedChains.http.includes(t)},async getSupportedNetworks(){const t=await Ve.get({path:"v1/supported-chains"});return Ts.supportedChains=t,t},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Ve.isNetworkSupported(e))return{avatar:"",name:""};const n=Oe.getIdentityFromCacheForAddress(t);if(n)return n;const i=await Ve.get({path:`/v1/identity/${t}`,params:{sender:Y.state.activeCaipAddress?dt.getPlainAddress(Y.state.activeCaipAddress):void 0}});return Oe.updateIdentityCache({address:t,identity:i,timestamp:Date.now()}),i},async fetchTransactions({account:t,cursor:e,onramp:r,signal:n,cache:i,chainId:s}){var a;return await Ve.isNetworkSupported((a=Y.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?Ve.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:r,chainId:s},signal:n,cache:i}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:r,to:n,gasPrice:i}){var o;return await Ve.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Ve.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:r,to:n,gasPrice:i}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var r;return await Ve.isNetworkSupported((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ve.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var r;return await Ve.isNetworkSupported((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ts.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ge.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var n;return await Ve.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ve.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var i;const{st:e,sv:r}=Ve.getSdkProperties();if(!await Ve.isNetworkSupported((i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId))throw new Error("Network not supported for Gas Price");return Ve.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:r}})},async generateSwapCalldata({amount:t,from:e,to:r,userAddress:n,disableEstimate:i}){var o;if(!await Ve.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ts.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Es.CONVERT_SLIPPAGE_TOLERANCE},projectId:ge.state.projectId,from:e,to:r,userAddress:n,disableEstimate:i}})},async generateApproveCalldata({from:t,to:e,userAddress:r}){var o;const{st:n,sv:i}=Ve.getSdkProperties();if(!await Ve.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ve.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:t,to:e,st:n,sv:i}})},async getBalance(t,e,r){var l;const{st:n,sv:i}=Ve.getSdkProperties();if(!await Ve.isNetworkSupported((l=Y.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return pi.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Oe.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Ve.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:r,st:n,sv:i}});return Oe.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var r;return await Ve.isNetworkSupported((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ve.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var r;return await Ve.isNetworkSupported((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ve.get({path:`/v1/profile/reverse/${t}`,params:{sender:ze.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var r;return await Ve.isNetworkSupported((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ve.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:r,signature:n}){var s;return await Ve.isNetworkSupported((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Ts.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:r,purchaseAmount:n,paymentAmount:i}){var a;return await Ve.isNetworkSupported((a=Y.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Ts.api.post({path:"/v1/generators/onrampurl",params:{projectId:ge.state.projectId},body:{destinationWallets:t,defaultNetwork:r,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:i}})).url:""},async getOnrampOptions(){var e;if(!await Ve.isNetworkSupported((e=Y.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Ve.get({path:"/v1/onramp/options"})}catch{return ive}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}){var i;try{return await Ve.isNetworkSupported((i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?await Ts.api.post({path:"/v1/onramp/quote",params:{projectId:ge.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}}):null}catch{return{coinbaseFee:{amount:r,currency:e.id},networkFee:{amount:r,currency:e.id},paymentSubtotal:{amount:r,currency:e.id},paymentTotal:{amount:r,currency:e.id},purchaseAmount:{amount:r,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var r;return await Ve.isNetworkSupported((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ve.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,r){var i;return await Ve.isNetworkSupported((i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Ts.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ge.state.projectId},body:{pci:e,signature:r}}):{success:!1}},setClientId(t){Ts.clientId=t,Ts.api=new g2({baseUrl:TL,clientId:t})}},ya=nn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),ze={state:ya,replaceState(t){t&&Object.assign(ya,Rh(t))},subscribe(t){return Y.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,r){let n;return Y.subscribeChainProp("accountState",i=>{if(i){const s=i[t];n!==s&&(n=s,e(s))}},r)},setStatus(t,e){Y.setAccountProp("status",t,e)},getCaipAddress(t){return Y.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const r=t?dt.getPlainAddress(t):void 0;e===Y.state.activeChain&&(Y.state.activeCaipAddress=t),Y.setAccountProp("caipAddress",t,e),Y.setAccountProp("address",r,e)},setBalance(t,e,r){Y.setAccountProp("balance",t,r),Y.setAccountProp("balanceSymbol",e,r)},setProfileName(t,e){Y.setAccountProp("profileName",t,e)},setProfileImage(t,e){Y.setAccountProp("profileImage",t,e)},setUser(t,e){Y.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){Y.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){Y.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){Y.setAccountProp("currentTab",t,Y.state.activeChain)},setTokenBalance(t,e){t&&Y.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){Y.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){Y.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,r){const n=Y.getAccountProp("addressLabels",r)||new Map;n.set(t,e),Y.setAccountProp("addressLabels",n,r)},removeAddressLabel(t,e){const r=Y.getAccountProp("addressLabels",e)||new Map;r.delete(t),Y.setAccountProp("addressLabels",r,e)},setConnectedWalletInfo(t,e){Y.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){Y.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&Y.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){Y.setAccountProp("socialWindow",t?Rh(t):void 0,e)},setFarcasterUrl(t,e){Y.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var s,o;ya.balanceLoading=!0;const e=(s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId,r=(o=Y.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=Y.state.activeCaipAddress,i=n?dt.getPlainAddress(n):void 0;if(ya.lastRetry&&!dt.isAllowedRetry(ya.lastRetry,30*Es.ONE_SEC_MS))return ya.balanceLoading=!1,[];try{if(i&&e&&r){const c=(await Ve.getBalance(i,e)).balances.filter(l=>l.quantity.decimals!=="0");return this.setTokenBalance(c,r),ya.lastRetry=void 0,ya.balanceLoading=!1,c}}catch(a){ya.lastRetry=Date.now(),t==null||t(a),pi.showError("Token Balance Unavailable")}finally{ya.balanceLoading=!1}return[]},resetAccount(t){Y.resetAccount(t)}},ls=nn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),xn={state:ls,subscribe(t){return ns(ls,()=>t(ls))},subscribeKey(t,e){return no(ls,t,e)},async open(t){var i;const e=ze.state.status==="connected";Er.state.wcBasic?pt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await pt.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),t!=null&&t.namespace?(await Y.switchActiveNamespace(t.namespace),xn.setLoading(!0,t.namespace)):xn.setLoading(!0),ut.setFilterByNamespace(t==null?void 0:t.namespace);const r=(i=Y.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;Y.state.noAdapters&&!r?dt.isMobile()?Jt.reset("AllWallets"):Jt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Jt.reset(t.view):r?Jt.reset("Account"):Jt.reset("Connect"),ls.open=!0,Fc.set({open:!0}),Sr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!r}})},close(){const t=ge.state.enableEmbedded,e=!!Y.state.activeCaipAddress;ls.open&&Sr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),ls.open=!1,xn.clearLoading(),t?e?Jt.replace("Account"):Jt.push("Connect"):Fc.set({open:!1}),Er.resetUri()},setLoading(t,e){e&&ls.loadingNamespaceMap.set(e,t),ls.loading=t,Fc.set({loading:t})},clearLoading(){ls.loadingNamespaceMap.clear(),ls.loading=!1},shake(){ls.shake||(ls.shake=!0,setTimeout(()=>{ls.shake=!1},500))}},vM=2147483648,sve={convertEVMChainIdToCoinType(t){if(t>=vM)throw new Error("Invalid chainId");return(vM|t)>>>0}},ho=nn({suggestions:[],loading:!1}),$L={state:ho,subscribe(t){return ns(ho,()=>t(ho))},subscribeKey(t,e){return no(ho,t,e)},async resolveName(t){var e,r;try{return await Ve.lookupEnsName(t)}catch(n){const i=n;throw new Error(((r=(e=i==null?void 0:i.reasons)==null?void 0:e[0])==null?void 0:r.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Ve.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ho.loading=!0,ho.suggestions=[];const e=await Ve.getEnsNameSuggestions(t);return ho.suggestions=e.suggestions.map(r=>({...r,name:r.name}))||[],ho.suggestions}catch(e){const r=this.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(r)}finally{ho.loading=!1}},async getNamesForAddress(t){try{if(!Y.state.activeCaipNetwork)return[];const r=Oe.getEnsFromCacheForAddress(t);if(r)return r;const n=await Ve.reverseLookupEnsName({address:t});return Oe.updateEnsCache({address:t,ens:n,timestamp:Date.now()}),n}catch(e){const r=this.parseEnsApiError(e,"Error fetching names for address");throw new Error(r)}},async registerName(t){const e=Y.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const r=ze.state.address,n=ut.getAuthConnector();if(!r||!n)throw new Error("Address or auth connector not found");ho.loading=!0;try{const i=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Jt.pushTransactionStack({view:"RegisterAccountNameSuccess",goBack:!1,replace:!0,onCancel(){ho.loading=!1}});const s=await Er.signMessage(i),o=e.id;if(!o)throw new Error("Network not found");const a=sve.convertEVMChainIdToCoinType(Number(o));await Ve.registerEnsName({coinType:a,address:r,signature:s,message:i}),ze.setProfileName(t,e.chainNamespace),Jt.replace("RegisterAccountNameSuccess")}catch(i){const s=this.parseEnsApiError(i,`Error registering name ${t}`);throw Jt.replace("RegisterAccountName"),new Error(s)}finally{ho.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var n,i;const r=t;return((i=(n=r==null?void 0:r.reasons)==null?void 0:n[0])==null?void 0:i.description)||e}};function ove(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function zn(t,...e){try{return ove(t(...e))}catch(r){return Promise.reject(r)}}function ave(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function cve(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function M1(t){if(ave(t))return String(t);if(cve(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return M1(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const C4="base64:";function lve(t){return typeof t=="string"?t:C4+dve(t)}function uve(t){return typeof t!="string"||!t.startsWith(C4)?t:hve(t.slice(C4.length))}function hve(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function dve(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function fs(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function fve(...t){return fs(t.join(":"))}function Tw(t){return t=fs(t),t?t+":":""}function pve(t,e){if(e===void 0)return!0;let r=0,n=t.indexOf(":");for(;n>-1;)r++,n=t.indexOf(":",n+1);return r<=e}function gve(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const mve="memory",yve=()=>{const t=new Map;return{name:mve,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function wve(t={}){const e={mounts:{"":t.driver||yve()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},n=(l,u)=>e.mountpoints.filter(h=>h.startsWith(l)||u&&l.startsWith(h)).map(h=>({relativeBase:l.length>h.length?l.slice(h.length):void 0,mountpoint:h,driver:e.mounts[h]})),i=(l,u)=>{if(e.watching){u=fs(u);for(const h of e.watchListeners)h(l,u)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await EM(e.mounts[l],i,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,h)=>{const d=new Map,g=m=>{let v=d.get(m.base);return v||(v={driver:m.driver,base:m.base,items:[]},d.set(m.base,v)),v};for(const m of l){const v=typeof m=="string",$=fs(v?m:m.key),_=v?void 0:m.value,x=v||!m.options?u:{...u,...m.options},A=r($);g(A).items.push({key:$,value:_,relativeKey:A.relativeKey,options:x})}return Promise.all([...d.values()].map(m=>h(m))).then(m=>m.flat())},c={hasItem(l,u={}){l=fs(l);const{relativeKey:h,driver:d}=r(l);return zn(d.hasItem,h,u)},getItem(l,u={}){l=fs(l);const{relativeKey:h,driver:d}=r(l);return zn(d.getItem,h,u).then(g=>zl(g))},getItems(l,u={}){return a(l,u,h=>h.driver.getItems?zn(h.driver.getItems,h.items.map(d=>({key:d.relativeKey,options:d.options})),u).then(d=>d.map(g=>({key:fve(h.base,g.key),value:zl(g.value)}))):Promise.all(h.items.map(d=>zn(h.driver.getItem,d.relativeKey,d.options).then(g=>({key:d.key,value:zl(g)})))))},getItemRaw(l,u={}){l=fs(l);const{relativeKey:h,driver:d}=r(l);return d.getItemRaw?zn(d.getItemRaw,h,u):zn(d.getItem,h,u).then(g=>uve(g))},async setItem(l,u,h={}){if(u===void 0)return c.removeItem(l);l=fs(l);const{relativeKey:d,driver:g}=r(l);g.setItem&&(await zn(g.setItem,d,M1(u),h),g.watch||i("update",l))},async setItems(l,u){await a(l,u,async h=>{if(h.driver.setItems)return zn(h.driver.setItems,h.items.map(d=>({key:d.relativeKey,value:M1(d.value),options:d.options})),u);h.driver.setItem&&await Promise.all(h.items.map(d=>zn(h.driver.setItem,d.relativeKey,M1(d.value),d.options)))})},async setItemRaw(l,u,h={}){if(u===void 0)return c.removeItem(l,h);l=fs(l);const{relativeKey:d,driver:g}=r(l);if(g.setItemRaw)await zn(g.setItemRaw,d,u,h);else if(g.setItem)await zn(g.setItem,d,lve(u),h);else return;g.watch||i("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=fs(l);const{relativeKey:h,driver:d}=r(l);d.removeItem&&(await zn(d.removeItem,h,u),(u.removeMeta||u.removeMata)&&await zn(d.removeItem,h+"$",u),d.watch||i("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=fs(l);const{relativeKey:h,driver:d}=r(l),g=Object.create(null);if(d.getMeta&&Object.assign(g,await zn(d.getMeta,h,u)),!u.nativeOnly){const m=await zn(d.getItem,h+"$",u).then(v=>zl(v));m&&typeof m=="object"&&(typeof m.atime=="string"&&(m.atime=new Date(m.atime)),typeof m.mtime=="string"&&(m.mtime=new Date(m.mtime)),Object.assign(g,m))}return g},setMeta(l,u,h={}){return this.setItem(l+"$",u,h)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var $;l=Tw(l);const h=n(l,!0);let d=[];const g=[];let m=!0;for(const _ of h){($=_.driver.flags)!=null&&$.maxDepth||(m=!1);const x=await zn(_.driver.getKeys,_.relativeBase,u);for(const A of x){const T=_.mountpoint+fs(A);d.some(k=>T.startsWith(k))||g.push(T)}d=[_.mountpoint,...d.filter(A=>!A.startsWith(_.mountpoint))]}const v=u.maxDepth!==void 0&&!m;return g.filter(_=>(!v||pve(_,u.maxDepth))&&gve(_,l))},async clear(l,u={}){l=Tw(l),await Promise.all(n(l,!1).map(async h=>{if(h.driver.clear)return zn(h.driver.clear,h.relativeBase,u);if(h.driver.removeItem){const d=await h.driver.getKeys(h.relativeBase||"",u);return Promise.all(d.map(g=>h.driver.removeItem(g,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>_M(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=Tw(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((h,d)=>d.length-h.length)),e.mounts[l]=u,e.watching&&Promise.resolve(EM(u,i,l)).then(h=>{e.unwatch[l]=h}).catch(console.error),c},async unmount(l,u=!0){var h,d;l=Tw(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((d=(h=e.unwatch)[l])==null||d.call(h),delete e.unwatch[l]),u&&await _M(e.mounts[l]),e.mountpoints=e.mountpoints.filter(g=>g!==l),delete e.mounts[l])},getMount(l=""){l=fs(l)+":";const u=r(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=fs(l),n(l,u.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,h={})=>c.setItem(l,u,h),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function EM(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function _M(t){typeof t.dispose=="function"&&await zn(t.dispose)}const bve="idb-keyval";var vve=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i;let n;return t.dbName&&t.storeName&&(n=RI(t.dbName,t.storeName)),{name:bve,options:t,async hasItem(i){return!(typeof await Tb(r(i),n)>"u")},async getItem(i){return await Tb(r(i),n)??null},setItem(i,s){return h7(r(i),s,n)},removeItem(i){return d7(r(i),n)},getKeys(){return p7(n)},clear(){return f7(n)}}};const Eve="WALLET_CONNECT_V2_INDEXED_DB",_ve="keyvaluestorage";let Sve=class{constructor(){this.indexedDb=wve({driver:vve({dbName:Eve,storeName:_ve})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Mo(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var I_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},T1={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof I_<"u"&&I_.localStorage?T1.exports=I_.localStorage:typeof window<"u"&&window.localStorage?T1.exports=window.localStorage:T1.exports=new e})();function xve(t){var e;return[t[0],aa((e=t[1])!=null?e:"")]}let Ive=class{constructor(){this.localStorage=T1.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(xve)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return aa(r)}async setItem(e,r){this.localStorage.setItem(e,Mo(r))}async removeItem(e){this.localStorage.removeItem(e)}};const Ave="wc_storage_version",SM=1,Cve=async(t,e,r)=>{const n=Ave,i=await e.getItem(n);if(i&&i>=SM){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(n,SM),r(e),Nve(t,o)},Nve=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let Mve=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new Ive;this.storage=e;try{const r=new Sve;Cve(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};function $m(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function xM(t){return $m(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const PL="2.23.2";let O0={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${PL}`};class Dh extends Error{constructor(e,r={}){var a;const n=(()=>{var c;return r.cause instanceof Dh?r.cause.details:(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),i=r.cause instanceof Dh&&r.cause.docsPath||r.docsPath,s=(a=O0.getDocsUrl)==null?void 0:a.call(O0,{...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...O0.version?[`Version: ${O0.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=PL}walk(e){return OL(this,e)}}function OL(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?OL(t.cause,e):e?null:t}class kL extends Dh{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}function Zp(t,{dir:e,size:r=32}={}){return typeof t=="string"?Tve(t,{dir:e,size:r}):$ve(t,{dir:e,size:r})}function Tve(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new kL({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function $ve(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new kL({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}class Pve extends Dh{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class Ove extends Dh{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Jp(t,{size:e}){if(xM(t)>e)throw new Ove({givenSize:xM(t),maxSize:e})}function N4(t,e={}){const{signed:r}=e;e.size&&Jp(t,{size:e.size});const n=BigInt(t);if(!r)return n;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function kve(t,e={}){return Number(N4(t,e))}const Rve=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function M4(t,e={}){return typeof t=="number"||typeof t=="bigint"?DL(t,e):typeof t=="string"?Bve(t,e):typeof t=="boolean"?Dve(t,e):RL(t,e)}function Dve(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(Jp(r,{size:e.size}),Zp(r,{size:e.size})):r}function RL(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=Rve[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(Jp(n,{size:e.size}),Zp(n,{dir:"right",size:e.size})):n}function DL(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new Pve({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?Zp(a,{size:n}):a}const Lve=new TextEncoder;function Bve(t,e={}){const r=Lve.encode(t);return RL(r,e)}const Uve=new TextEncoder;function jve(t,e={}){return typeof t=="number"||typeof t=="bigint"?zve(t,e):typeof t=="boolean"?Fve(t,e):$m(t)?LL(t,e):BL(t,e)}function Fve(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(Jp(r,{size:e.size}),Zp(r,{size:e.size})):r}const vc={zero:48,nine:57,A:65,F:70,a:97,f:102};function IM(t){if(t>=vc.zero&&t<=vc.nine)return t-vc.zero;if(t>=vc.A&&t<=vc.F)return t-(vc.A-10);if(t>=vc.a&&t<=vc.f)return t-(vc.a-10)}function LL(t,e={}){let r=t;e.size&&(Jp(r,{size:e.size}),r=Zp(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=IM(n.charCodeAt(a++)),l=IM(n.charCodeAt(a++));if(c===void 0||l===void 0)throw new Dh(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);s[o]=c*16+l}return s}function zve(t,e){const r=DL(t,e);return LL(r)}function BL(t,e={}){const r=Uve.encode(t);return typeof e.size=="number"?(Jp(r,{size:e.size}),Zp(r,{dir:"right",size:e.size})):r}function Vb(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function qve(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function m2(t,...e){if(!qve(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function pCe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Vb(t.outputLen),Vb(t.blockLen)}function AM(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Wve(t,e){m2(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const $w=BigInt(2**32-1),CM=BigInt(32);function Hve(t,e=!1){return e?{h:Number(t&$w),l:Number(t>>CM&$w)}:{h:Number(t>>CM&$w)|0,l:Number(t&$w)|0}}function Kve(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Hve(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const Vve=(t,e,r)=>t<<r|e>>>32-r,Gve=(t,e,r)=>e<<r|t>>>32-r,Yve=(t,e,r)=>e<<r-32|t>>>64-r,Qve=(t,e,r)=>t<<r-32|e>>>64-r,Dd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Zve(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function gCe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function mCe(t,e){return t<<32-e|t>>>e}const NM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Jve(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function MM(t){for(let e=0;e<t.length;e++)t[e]=Jve(t[e])}function Xve(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function UL(t){return typeof t=="string"&&(t=Xve(t)),m2(t),t}function yCe(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];m2(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class e2e{clone(){return this._cloneInto()}}function t2e(t){const e=n=>t().update(UL(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function wCe(t=32){if(Dd&&typeof Dd.getRandomValues=="function")return Dd.getRandomValues(new Uint8Array(t));if(Dd&&typeof Dd.randomBytes=="function")return Dd.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const jL=[],FL=[],zL=[],r2e=BigInt(0),k0=BigInt(1),n2e=BigInt(2),i2e=BigInt(7),s2e=BigInt(256),o2e=BigInt(113);for(let t=0,e=k0,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],jL.push(2*(5*n+r)),FL.push((t+1)*(t+2)/2%64);let i=r2e;for(let s=0;s<7;s++)e=(e<<k0^(e>>i2e)*o2e)%s2e,e&n2e&&(i^=k0<<(k0<<BigInt(s))-k0);zL.push(i)}const[a2e,c2e]=Kve(zL,!0),TM=(t,e,r)=>r>32?Yve(t,e,r):Vve(t,e,r),$M=(t,e,r)=>r>32?Qve(t,e,r):Gve(t,e,r);function l2e(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],h=TM(l,u,1)^r[a],d=$M(l,u,1)^r[a+1];for(let g=0;g<50;g+=10)t[o+g]^=h,t[o+g+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=FL[o],c=TM(i,s,a),l=$M(i,s,a),u=jL[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=a2e[n],t[1]^=c2e[n]}r.fill(0)}class E5 extends e2e{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Vb(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Zve(this.state)}keccak(){NM||MM(this.state32),l2e(this.state32,this.rounds),NM||MM(this.state32),this.posOut=0,this.pos=0}update(e){AM(this);const{blockLen:r,state:n}=this;e=UL(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,r&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){AM(this,!1),m2(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Vb(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Wve(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new E5(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const u2e=(t,e,r)=>t2e(()=>new E5(e,t,r)),h2e=u2e(1,136,256/8);function qL(t,e){const r=e||"hex",n=h2e($m(t,{strict:!1})?jve(t):t);return r==="bytes"?n:M4(n)}class d2e extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const A_=new d2e(8192);function f2e(t,e){if(A_.has(`${t}.${e}`))return A_.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=qL(BL(r),"bytes"),i=r.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(n[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return A_.set(`${t}.${e}`,s),s}function p2e(t){const e=qL(`0x${t.substring(4)}`).substring(26);return f2e(`0x${e}`)}async function g2e({hash:t,signature:e}){const r=$m(t)?t:M4(t),{secp256k1:n}=await Mh(async()=>{const{secp256k1:o}=await import("./secp256k1-DaQjbA1s.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:h,yParity:d}=e,g=Number(d??h),m=PM(g);return new n.Signature(N4(l),N4(u)).addRecoveryBit(m)}const o=$m(e)?e:M4(e),a=kve(`0x${o.slice(130)}`),c=PM(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function PM(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function m2e({hash:t,signature:e}){return p2e(await g2e({hash:t,signature:e}))}function y2e(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),h=u.charCodeAt(0);if(e[h]!==255)throw new TypeError(u+" is ambiguous");e[h]=l}const r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,h=0,d=0;const g=l.length;for(;d!==g&&l[d]===0;)d++,u++;const m=(g-d)*s+1>>>0,v=new Uint8Array(m);for(;d!==g;){let x=l[d],A=0;for(let T=m-1;(x!==0||A<h)&&T!==-1;T--,A++)x+=256*v[T]>>>0,v[T]=x%r>>>0,x=x/r>>>0;if(x!==0)throw new Error("Non-zero carry");h=A,d++}let $=m-h;for(;$!==m&&v[$]===0;)$++;let _=n.repeat(u);for(;$<m;++$)_+=t.charAt(v[$]);return _}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,h=0,d=0;for(;l[u]===n;)h++,u++;const g=(l.length-u)*i+1>>>0,m=new Uint8Array(g);for(;u<l.length;){const x=l.charCodeAt(u);if(x>255)return;let A=e[x];if(A===255)return;let T=0;for(let k=g-1;(A!==0||T<d)&&k!==-1;k--,T++)A+=r*m[k]>>>0,m[k]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");d=T,u++}let v=g-d;for(;v!==g&&m[v]===0;)v++;const $=new Uint8Array(h+(g-v));let _=h;for(;v!==g;)$[_++]=m[v++];return $}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var w2e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const WL=y2e(w2e);var b2e={};const v2e=":";function Gf(t){const[e,r]=t.split(v2e);return{namespace:e,reference:r}}function HL(t,e){return t.includes(":")?[t]:e.chains||[]}const E2e="ReactNative",Ks={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},_2e="js";function Gb(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function _u(){return!rl()&&!!oy()&&navigator.product===E2e}function S2e(){return _u()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function x2e(){return _u()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function wy(){return!Gb()&&!!oy()&&!!rl()}function by(){return _u()?Ks.reactNative:Gb()?Ks.node:wy()?Ks.browser:Ks.unknown}function OM(){var t;try{return _u()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function I2e(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const i=e[n];i!==void 0&&r.set(n,i)}return r.toString()}function KL(){return GI()||{name:"",description:"",url:"",icons:[""]}}function A2e(){if(by()===Ks.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=V7();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function C2e(){var t;const e=by();return e===Ks.browser?[e,((t=KI())==null?void 0:t.host)||"unknown"].join(":"):e}function VL(t,e,r){const n=A2e(),i=C2e();return[[t,e].join("-"),[_2e,r].join("-"),n,i].join("/")}function N2e({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=r.split("?"),u=VL(t,e,n),h={auth:i,ua:u,projectId:s,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},d=I2e(l[1]||"",h);return l[0]+"?"+d}function uh(t,e){return t.filter(r=>e.includes(r)).length===t.length}function T4(t){return Object.fromEntries(t.entries())}function $4(t){return new Map(Object.entries(t))}function zu(t=J.FIVE_MINUTES,e){const r=J.toMiliseconds(t||J.FIVE_MINUTES);let n,i,s,o;return{resolve:a=>{s&&n&&(clearTimeout(s),n(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},r),n=a,i=c})}}function Vl(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function GL(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function M2e(t){return GL("topic",t)}function T2e(t){return GL("id",t)}function YL(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Cn(t,e){return J.fromMiliseconds(Date.now()+J.toMiliseconds(t))}function Pl(t){return Date.now()>=J.toMiliseconds(t)}function Wt(t,e){return`${t}${e?`:${e}`:""}`}function $1(t=[],e=[]){return[...new Set([...t,...e])]}async function $2e({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=P2e(s,t,e),a=by();if(a===Ks.browser){if(!((n=rl())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}O2e(o)}else a===Ks.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function P2e(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${L2e(n,!0)}`}else i=`${i}/wc?${n}`;return i}function O2e(t){let e="_self";D2e()?e="_top":(R2e()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function k2e(t,e){let r="";try{if(wy()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function kM(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function RM(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function _5(){return typeof process<"u"&&b2e.IS_VITEST==="true"}function R2e(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function D2e(){try{return window.self!==window.top}catch{return!1}}function L2e(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function QL(t){return Buffer.from(t,"base64").toString("utf-8")}function B2e(t){return new Promise(e=>setTimeout(e,t))}function Pm(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function U2e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function y2(t,...e){if(!U2e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function S5(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Pm(t.outputLen),Pm(t.blockLen)}function xp(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ZL(t,e){y2(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Pw=BigInt(2**32-1),DM=BigInt(32);function j2e(t,e=!1){return e?{h:Number(t&Pw),l:Number(t>>DM&Pw)}:{h:Number(t>>DM&Pw)|0,l:Number(t&Pw)|0}}function F2e(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=j2e(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const z2e=(t,e,r)=>t<<r|e>>>32-r,q2e=(t,e,r)=>e<<r|t>>>32-r,W2e=(t,e,r)=>e<<r-32|t>>>64-r,H2e=(t,e,r)=>t<<r-32|e>>>64-r,Ld=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function K2e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function C_(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function wa(t,e){return t<<32-e|t>>>e}const LM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function V2e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function BM(t){for(let e=0;e<t.length;e++)t[e]=V2e(t[e])}function G2e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Ip(t){return typeof t=="string"&&(t=G2e(t)),y2(t),t}let x5=class{clone(){return this._cloneInto()}};function JL(t){const e=n=>t().update(Ip(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function vy(t=32){if(Ld&&typeof Ld.getRandomValues=="function")return Ld.getRandomValues(new Uint8Array(t));if(Ld&&typeof Ld.randomBytes=="function")return Ld.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const XL=[],eB=[],tB=[],Y2e=BigInt(0),R0=BigInt(1),Q2e=BigInt(2),Z2e=BigInt(7),J2e=BigInt(256),X2e=BigInt(113);for(let t=0,e=R0,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],XL.push(2*(5*n+r)),eB.push((t+1)*(t+2)/2%64);let i=Y2e;for(let s=0;s<7;s++)e=(e<<R0^(e>>Z2e)*X2e)%J2e,e&Q2e&&(i^=R0<<(R0<<BigInt(s))-R0);tB.push(i)}const[eEe,tEe]=F2e(tB,!0),UM=(t,e,r)=>r>32?W2e(t,e,r):z2e(t,e,r),jM=(t,e,r)=>r>32?H2e(t,e,r):q2e(t,e,r);function rEe(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],h=UM(l,u,1)^r[a],d=jM(l,u,1)^r[a+1];for(let g=0;g<50;g+=10)t[o+g]^=h,t[o+g+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=eB[o],c=UM(i,s,a),l=jM(i,s,a),u=XL[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=eEe[n],t[1]^=tEe[n]}r.fill(0)}let nEe=class rB extends x5{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Pm(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=K2e(this.state)}keccak(){LM||BM(this.state32),rEe(this.state32,this.rounds),LM||BM(this.state32),this.posOut=0,this.pos=0}update(e){xp(this);const{blockLen:r,state:n}=this;e=Ip(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,r&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){xp(this,!1),y2(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Pm(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ZL(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new rB(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const iEe=(t,e,r)=>JL(()=>new nEe(e,t,r)),sEe=iEe(1,136,256/8),oEe="https://rpc.walletconnect.org/v1";function nB(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(sEe(r)).toString("hex")}async function aEe(t,e,r,n,i,s){switch(r.t){case"eip191":return await cEe(t,e,r.s);case"eip1271":return await lEe(t,e,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function cEe(t,e,r){return(await m2e({hash:nB(e),signature:r})).toLowerCase()===t.toLowerCase()}async function lEe(t,e,r,n,i,s){const o=Gf(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=r.substring(2),h=nB(e).substring(2),d=a+h+c+l+u,g=await fetch(`${s||oEe}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:uEe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:d},"latest"]})}),{result:m}=await g.json();return m?m.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function uEe(){return Date.now()+Math.floor(Math.random()*1e3)}function hEe(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const i=1+n*64;if(r.length<i)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const s=Buffer.from(t,"base64").slice(1,65);return WL.encode(s)}var dEe=Object.defineProperty,fEe=Object.defineProperties,pEe=Object.getOwnPropertyDescriptors,FM=Object.getOwnPropertySymbols,gEe=Object.prototype.hasOwnProperty,mEe=Object.prototype.propertyIsEnumerable,zM=(t,e,r)=>e in t?dEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yEe=(t,e)=>{for(var r in e||(e={}))gEe.call(e,r)&&zM(t,r,e[r]);if(FM)for(var r of FM(e))mEe.call(e,r)&&zM(t,r,e[r]);return t},wEe=(t,e)=>fEe(t,pEe(e));const bEe="did:pkh:",I5=t=>t==null?void 0:t.split(":"),vEe=t=>{const e=t&&I5(t);if(e)return t.includes(bEe)?e[3]:e[1]},P4=t=>{const e=t&&I5(t);if(e)return e[2]+":"+e[3]},Yb=t=>{const e=t&&I5(t);if(e)return e.pop()};async function qM(t){const{cacao:e,projectId:r}=t,{s:n,p:i}=e,s=iB(i,i.iss),o=Yb(i.iss);return await aEe(o,s,n,P4(i.iss),r)}const iB=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=Yb(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${vEe(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,h=t.nbf?`Not Before: ${t.nbf}`:void 0,d=t.requestId?`Request ID: ${t.requestId}`:void 0,g=t.resources?`Resources:${t.resources.map(v=>`
- ${v}`).join("")}`:void 0,m=P1(t.resources);if(m){const v=Om(m);i=MEe(i,v)}return[r,n,"",i,"",s,o,a,c,l,u,h,d,g].filter(v=>v!=null).join(`
`)};function EEe(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function _Ee(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Lh(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{const s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function SEe(t,e,r,n={}){return r==null||r.sort((i,s)=>i.localeCompare(s)),{att:{[t]:xEe(e,r,n)}}}function xEe(t,e,r={}){e=e==null?void 0:e.sort((i,s)=>i.localeCompare(s));const n=e.map(i=>({[`${t}/${i}`]:[r]}));return Object.assign({},...n)}function sB(t){return Lh(t),`urn:recap:${EEe(t).replace(/=/g,"")}`}function Om(t){const e=_Ee(t.replace("urn:recap:",""));return Lh(e),e}function IEe(t,e,r){const n=SEe(t,e,r);return sB(n)}function AEe(t){return t&&t.includes("urn:recap:")}function CEe(t,e){const r=Om(t),n=Om(e),i=NEe(r,n);return sB(i)}function NEe(t,e){Lh(t),Lh(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;n.att[i]=wEe(yEe({},n.att[i]),{[a]:((c=t.att[i])==null?void 0:c[a])||((l=e.att[i])==null?void 0:l[a])})})}),n}function MEe(t="",e){Lh(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let i=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(h=>({ability:h.split("/")[0],action:h.split("/")[1]}));c.sort((h,d)=>h.action.localeCompare(d.action));const l={};c.forEach(h=>{l[h.ability]||(l[h.ability]=[]),l[h.ability].push(h.action)});const u=Object.keys(l).map(h=>(i++,`(${i}) '${h}': '${l[h].join("', '")}' for '${a}'.`));n.push(u.join(", ").replace(".,","."))});const s=n.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function WM(t){var e;const r=Om(t);Lh(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function HM(t){const e=Om(t);Lh(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function P1(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return AEe(e)?e:void 0}function N_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function oB(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function zs(t,...e){if(!oB(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function KM(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function TEe(t,e){zs(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function VM(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const su=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),$Ee=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),PEe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!PEe)throw new Error("Non little-endian hardware is not supported");function OEe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function O4(t){if(typeof t=="string")t=OEe(t);else if(oB(t))t=k4(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function kEe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function REe(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const DEe=(t,e)=>{function r(n,...i){if(zs(n),t.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?zs(l):zs(l,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&zs(i[1]);const o=e(n,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");zs(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,zs(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(zs(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(r,t),r};function GM(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!LEe(e))throw new Error("invalid output, must be aligned");return e}function YM(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s);t.setUint32(e+4,o,n),t.setUint32(e+0,a,n)}function LEe(t){return t.byteOffset%4===0}function k4(t){return Uint8Array.from(t)}function Ap(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const aB=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),BEe=aB("expand 16-byte k"),UEe=aB("expand 32-byte k"),jEe=su(BEe),FEe=su(UEe);function Tt(t,e){return t<<e|t>>>32-e}function R4(t){return t.byteOffset%4===0}const Ow=64,zEe=16,cB=2**32-1,QM=new Uint32Array;function qEe(t,e,r,n,i,s,o,a){const c=i.length,l=new Uint8Array(Ow),u=su(l),h=R4(i)&&R4(s),d=h?su(i):QM,g=h?su(s):QM;for(let m=0;m<c;o++){if(t(e,r,n,u,o,a),o>=cB)throw new Error("arx: counter overflow");const v=Math.min(Ow,c-m);if(h&&v===Ow){const $=m/4;if(m%4!==0)throw new Error("arx: invalid block position");for(let _=0,x;_<zEe;_++)x=$+_,g[x]=d[x]^u[_];m+=Ow;continue}for(let $=0,_;$<v;$++)_=m+$,s[_]=i[_]^l[$];m+=v}}function WEe(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=kEe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return N_(i),N_(o),VM(s),VM(r),(a,c,l,u,h=0)=>{zs(a),zs(c),zs(l);const d=l.length;if(u===void 0&&(u=new Uint8Array(d)),zs(u),N_(h),h<0||h>=cB)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const g=[];let m=a.length,v,$;if(m===32)g.push(v=k4(a)),$=FEe;else if(m===16&&r)v=new Uint8Array(32),v.set(a),v.set(a,16),$=jEe,g.push(v);else throw new Error(`arx: invalid 32-byte key, got length=${m}`);R4(c)||g.push(c=k4(c));const _=su(v);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n($,_,su(c.subarray(0,16)),_),c=c.subarray(16)}const x=16-i;if(x!==c.length)throw new Error(`arx: nonce must be ${x} or 16 bytes`);if(x!==12){const T=new Uint8Array(12);T.set(c,s?0:12-c.length),c=T,g.push(c)}const A=su(c);return qEe(t,$,_,A,l,u,h,o),Ap(...g),u}}const si=(t,e)=>t[e++]&255|(t[e++]&255)<<8;let HEe=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=O4(e),zs(e,32);const r=si(e,0),n=si(e,2),i=si(e,4),s=si(e,6),o=si(e,8),a=si(e,10),c=si(e,12),l=si(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=si(e,16+2*u)}process(e,r,n=!1){const i=n?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],h=o[4],d=o[5],g=o[6],m=o[7],v=o[8],$=o[9],_=si(e,r+0),x=si(e,r+2),A=si(e,r+4),T=si(e,r+6),k=si(e,r+8),D=si(e,r+10),L=si(e,r+12),F=si(e,r+14);let B=s[0]+(_&8191),q=s[1]+((_>>>13|x<<3)&8191),R=s[2]+((x>>>10|A<<6)&8191),E=s[3]+((A>>>7|T<<9)&8191),b=s[4]+((T>>>4|k<<12)&8191),f=s[5]+(k>>>1&8191),p=s[6]+((k>>>14|D<<2)&8191),w=s[7]+((D>>>11|L<<5)&8191),N=s[8]+((L>>>8|F<<8)&8191),M=s[9]+(F>>>5|i),S=0,y=S+B*a+q*(5*$)+R*(5*v)+E*(5*m)+b*(5*g);S=y>>>13,y&=8191,y+=f*(5*d)+p*(5*h)+w*(5*u)+N*(5*l)+M*(5*c),S+=y>>>13,y&=8191;let C=S+B*c+q*a+R*(5*$)+E*(5*v)+b*(5*m);S=C>>>13,C&=8191,C+=f*(5*g)+p*(5*d)+w*(5*h)+N*(5*u)+M*(5*l),S+=C>>>13,C&=8191;let I=S+B*l+q*c+R*a+E*(5*$)+b*(5*v);S=I>>>13,I&=8191,I+=f*(5*m)+p*(5*g)+w*(5*d)+N*(5*h)+M*(5*u),S+=I>>>13,I&=8191;let U=S+B*u+q*l+R*c+E*a+b*(5*$);S=U>>>13,U&=8191,U+=f*(5*v)+p*(5*m)+w*(5*g)+N*(5*d)+M*(5*h),S+=U>>>13,U&=8191;let K=S+B*h+q*u+R*l+E*c+b*a;S=K>>>13,K&=8191,K+=f*(5*$)+p*(5*v)+w*(5*m)+N*(5*g)+M*(5*d),S+=K>>>13,K&=8191;let V=S+B*d+q*h+R*u+E*l+b*c;S=V>>>13,V&=8191,V+=f*a+p*(5*$)+w*(5*v)+N*(5*m)+M*(5*g),S+=V>>>13,V&=8191;let te=S+B*g+q*d+R*h+E*u+b*l;S=te>>>13,te&=8191,te+=f*c+p*a+w*(5*$)+N*(5*v)+M*(5*m),S+=te>>>13,te&=8191;let se=S+B*m+q*g+R*d+E*h+b*u;S=se>>>13,se&=8191,se+=f*l+p*c+w*a+N*(5*$)+M*(5*v),S+=se>>>13,se&=8191;let ce=S+B*v+q*m+R*g+E*d+b*h;S=ce>>>13,ce&=8191,ce+=f*u+p*l+w*c+N*a+M*(5*$),S+=ce>>>13,ce&=8191;let ie=S+B*$+q*v+R*m+E*g+b*d;S=ie>>>13,ie&=8191,ie+=f*h+p*u+w*l+N*c+M*a,S+=ie>>>13,ie&=8191,S=(S<<2)+S|0,S=S+y|0,y=S&8191,S=S>>>13,C+=S,s[0]=y,s[1]=C,s[2]=I,s[3]=U,s[4]=K,s[5]=V,s[6]=te,s[7]=se,s[8]=ce,s[9]=ie}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)n[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;Ap(n)}update(e){KM(this);const{buffer:r,blockLen:n}=this;e=O4(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o===n){for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){Ap(this.h,this.r,this.buffer,this.pad)}digestInto(e){KM(this),TEe(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=n[o]>>>0,e[s++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}};function KEe(t){const e=(n,i)=>t(i).update(O4(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const VEe=KEe(t=>new HEe(t));function GEe(t,e,r,n,i,s=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],h=e[1],d=e[2],g=e[3],m=e[4],v=e[5],$=e[6],_=e[7],x=i,A=r[0],T=r[1],k=r[2],D=o,L=a,F=c,B=l,q=u,R=h,E=d,b=g,f=m,p=v,w=$,N=_,M=x,S=A,y=T,C=k;for(let U=0;U<s;U+=2)D=D+q|0,M=Tt(M^D,16),f=f+M|0,q=Tt(q^f,12),D=D+q|0,M=Tt(M^D,8),f=f+M|0,q=Tt(q^f,7),L=L+R|0,S=Tt(S^L,16),p=p+S|0,R=Tt(R^p,12),L=L+R|0,S=Tt(S^L,8),p=p+S|0,R=Tt(R^p,7),F=F+E|0,y=Tt(y^F,16),w=w+y|0,E=Tt(E^w,12),F=F+E|0,y=Tt(y^F,8),w=w+y|0,E=Tt(E^w,7),B=B+b|0,C=Tt(C^B,16),N=N+C|0,b=Tt(b^N,12),B=B+b|0,C=Tt(C^B,8),N=N+C|0,b=Tt(b^N,7),D=D+R|0,C=Tt(C^D,16),w=w+C|0,R=Tt(R^w,12),D=D+R|0,C=Tt(C^D,8),w=w+C|0,R=Tt(R^w,7),L=L+E|0,M=Tt(M^L,16),N=N+M|0,E=Tt(E^N,12),L=L+E|0,M=Tt(M^L,8),N=N+M|0,E=Tt(E^N,7),F=F+b|0,S=Tt(S^F,16),f=f+S|0,b=Tt(b^f,12),F=F+b|0,S=Tt(S^F,8),f=f+S|0,b=Tt(b^f,7),B=B+q|0,y=Tt(y^B,16),p=p+y|0,q=Tt(q^p,12),B=B+q|0,y=Tt(y^B,8),p=p+y|0,q=Tt(q^p,7);let I=0;n[I++]=o+D|0,n[I++]=a+L|0,n[I++]=c+F|0,n[I++]=l+B|0,n[I++]=u+q|0,n[I++]=h+R|0,n[I++]=d+E|0,n[I++]=g+b|0,n[I++]=m+f|0,n[I++]=v+p|0,n[I++]=$+w|0,n[I++]=_+N|0,n[I++]=x+M|0,n[I++]=A+S|0,n[I++]=T+y|0,n[I++]=k+C|0}const YEe=WEe(GEe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),QEe=new Uint8Array(16),ZM=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(QEe.subarray(r))},ZEe=new Uint8Array(32);function JM(t,e,r,n,i){const s=t(e,r,ZEe),o=VEe.create(s);i&&ZM(o,i),ZM(o,n);const a=new Uint8Array(16),c=$Ee(a);YM(c,0,BigInt(i?i.length:0),!0),YM(c,8,BigInt(n.length),!0),o.update(a);const l=o.digest();return Ap(s,a),l}const JEe=t=>(e,r,n)=>({encrypt(i,s){const o=i.length;s=GM(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,r,a,a,1);const c=JM(t,e,r,a,n);return s.set(c,o),Ap(c),s},decrypt(i,s){s=GM(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=JM(t,e,r,o,n);if(!REe(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,r,s,s,1),Ap(c),s}}),lB=DEe({blockSize:64,nonceLength:12,tagLength:16},JEe(YEe));let uB=class extends x5{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,S5(e);const n=Ip(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return xp(this),this.iHash.update(e),this}digestInto(e){xp(this),y2(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const A5=(t,e,r)=>new uB(t,e).update(r).digest();A5.create=(t,e)=>new uB(t,e);function XEe(t,e,r){return S5(t),r===void 0&&(r=new Uint8Array(t.outputLen)),A5(t,Ip(r),Ip(e))}const M_=new Uint8Array([0]),XM=new Uint8Array;function e_e(t,e,r,n=32){if(S5(t),Pm(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/t.outputLen);r===void 0&&(r=XM);const s=new Uint8Array(i*t.outputLen),o=A5.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<i;l++)M_[0]=l+1,a.update(l===0?XM:c).update(r).update(M_).digestInto(c),s.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),M_.fill(0),s.slice(0,n)}const t_e=(t,e,r,n,i)=>e_e(t,XEe(t,e,r),n,i);function r_e(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function n_e(t,e,r){return t&e^~t&r}function i_e(t,e,r){return t&e^t&r^e&r}class s_e extends x5{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=C_(this.buffer)}update(e){xp(this);const{view:r,buffer:n,blockLen:i}=this;e=Ip(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=C_(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){xp(this),ZL(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;r_e(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=C_(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}}const o_e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),El=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_l=new Uint32Array(64);let a_e=class extends s_e{constructor(){super(64,32,8,!1),this.A=El[0]|0,this.B=El[1]|0,this.C=El[2]|0,this.D=El[3]|0,this.E=El[4]|0,this.F=El[5]|0,this.G=El[6]|0,this.H=El[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,r,n,i,s,o,a,c]}set(e,r,n,i,s,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)_l[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=_l[h-15],g=_l[h-2],m=wa(d,7)^wa(d,18)^d>>>3,v=wa(g,17)^wa(g,19)^g>>>10;_l[h]=v+_l[h-7]+m+_l[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=wa(a,6)^wa(a,11)^wa(a,25),g=u+d+n_e(a,c,l)+o_e[h]+_l[h]|0,m=(wa(n,2)^wa(n,13)^wa(n,22))+i_e(n,i,s)|0;u=l,l=c,c=a,a=o+g|0,o=s,s=i,i=n,n=g+m|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){_l.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const w2=JL(()=>new a_e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hB=BigInt(0);function C5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function dB(t){if(!C5(t))throw new Error("Uint8Array expected")}const c_e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function l_e(t){dB(t);let e="";for(let r=0;r<t.length;r++)e+=c_e[t[r]];return e}function u_e(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?hB:BigInt("0x"+t)}const Ec={_0:48,_9:57,A:65,F:70,a:97,f:102};function eT(t){if(t>=Ec._0&&t<=Ec._9)return t-Ec._0;if(t>=Ec.A&&t<=Ec.F)return t-(Ec.A-10);if(t>=Ec.a&&t<=Ec.f)return t-(Ec.a-10)}function fB(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=eT(t.charCodeAt(s)),a=eT(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function tT(t){return dB(t),u_e(l_e(Uint8Array.from(t).reverse()))}function h_e(t,e){return fB(t.toString(16).padStart(e*2,"0"))}function d_e(t,e){return h_e(t,e).reverse()}function rT(t,e,r){let n;if(typeof e=="string")try{n=fB(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(C5(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const T_=t=>typeof t=="bigint"&&hB<=t;function f_e(t,e,r){return T_(t)&&T_(e)&&T_(r)&&e<=t&&t<r}function nT(t,e,r,n){if(!f_e(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}const p_e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||C5(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function g_e(t,e,r={}){const n=(i,s,o)=>{const a=p_e[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const Of=BigInt(0),kw=BigInt(1);function pB(t,e){const r=t%e;return r>=Of?r:e+r}function m_e(t,e,r){if(e<Of)throw new Error("invalid exponent, negatives unsupported");if(r<=Of)throw new Error("invalid modulus");if(r===kw)return Of;let n=kw;for(;e>Of;)e&kw&&(n=n*t%r),t=t*t%r,e>>=kw;return n}function Vo(t,e,r){let n=t;for(;e-- >Of;)n*=n,n%=r;return n}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Bd=BigInt(0),$_=BigInt(1);function y_e(t){return g_e(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function w_e(t){const e=y_e(t),{P:r}=e,n=x=>pB(x,r),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(x=>x),c=e.powPminus2||(x=>m_e(x,r-BigInt(2),r));function l(x,A,T){const k=n(x*(A-T));return A=n(A-k),T=n(T+k),[A,T]}const u=(e.a-BigInt(2))/BigInt(4);function h(x,A){nT("u",x,Bd,r),nT("scalar",A,Bd,r);const T=A,k=x;let D=$_,L=Bd,F=x,B=$_,q=Bd,R;for(let b=BigInt(i-1);b>=Bd;b--){const f=T>>b&$_;q^=f,R=l(q,D,F),D=R[0],F=R[1],R=l(q,L,B),L=R[0],B=R[1],q=f;const p=D+L,w=n(p*p),N=D-L,M=n(N*N),S=w-M,y=F+B,C=F-B,I=n(C*p),U=n(y*N),K=I+U,V=I-U;F=n(K*K),B=n(k*n(V*V)),D=n(w*M),L=n(S*(w+n(u*S)))}R=l(q,D,F),D=R[0],F=R[1],R=l(q,L,B),L=R[0],B=R[1];const E=c(L);return n(D*E)}function d(x){return d_e(n(x),s)}function g(x){const A=rT("u coordinate",x,s);return o===32&&(A[31]&=127),tT(A)}function m(x){const A=rT("scalar",x),T=A.length;if(T!==s&&T!==o){let k=""+s+" or "+o;throw new Error("invalid scalar, expected "+k+" bytes, got "+T)}return tT(a(A))}function v(x,A){const T=g(A),k=m(x),D=h(T,k);if(D===Bd)throw new Error("invalid private or public key received");return d(D)}const $=d(e.Gu);function _(x){return v(x,$)}return{scalarMult:v,scalarMultBase:_,getSharedSecret:(x,A)=>v(x,A),getPublicKey:x=>_(x),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:$}}const D4=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const b_e=BigInt(1),iT=BigInt(2),v_e=BigInt(3),E_e=BigInt(5);BigInt(8);function __e(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=D4,o=t*t%s*t%s,a=Vo(o,iT,s)*o%s,c=Vo(a,b_e,s)*t%s,l=Vo(c,E_e,s)*c%s,u=Vo(l,e,s)*l%s,h=Vo(u,r,s)*u%s,d=Vo(h,n,s)*h%s,g=Vo(d,i,s)*d%s,m=Vo(g,i,s)*d%s,v=Vo(m,e,s)*l%s;return{pow_p_5_8:Vo(v,iT,s)*t%s,b2:o}}function S_e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const L4=w_e({P:D4,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=D4,{pow_p_5_8:r,b2:n}=__e(t);return pB(Vo(r,v_e,e)*n,e)},adjustScalarBytes:S_e,randomBytes:vy}),gB="base10",Wi="base16",Gl="base64pad",D0="base64url",Ey="utf8",mB=0,zc=1,_y=2,x_e=0,sT=1,Ag=12,N5=32;function I_e(){const t=L4.utils.randomPrivateKey(),e=L4.getPublicKey(t);return{privateKey:Ht(t,Wi),publicKey:Ht(e,Wi)}}function B4(){const t=vy(N5);return Ht(t,Wi)}function A_e(t,e){const r=L4.getSharedSecret(Kr(t,Wi),Kr(e,Wi)),n=t_e(w2,r,void 0,void 0,N5);return Ht(n,Wi)}function O1(t){const e=w2(Kr(t,Wi));return Ht(e,Wi)}function xa(t){const e=w2(Kr(t,Ey));return Ht(e,Wi)}function yB(t){return Kr(`${t}`,gB)}function Bh(t){return Number(Ht(t,gB))}function C_e(t){const e=yB(typeof t.type<"u"?t.type:mB);if(Bh(e)===zc&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Kr(t.senderPublicKey,Wi):void 0,n=typeof t.iv<"u"?Kr(t.iv,Wi):vy(Ag),i=Kr(t.symKey,Wi),s=lB(i,n).encrypt(Kr(t.message,Ey));return wB({type:e,sealed:s,iv:n,senderPublicKey:r,encoding:t.encoding})}function N_e(t){const e=Kr(t.symKey,Wi),{sealed:r,iv:n}=km(t),i=lB(e,n).decrypt(r);if(i===null)throw new Error("Failed to decrypt");return Ht(i,Ey)}function M_e(t,e){const r=yB(_y),n=vy(Ag),i=Kr(t,Ey);return wB({type:r,sealed:i,iv:n,encoding:e})}function T_e(t,e){const{sealed:r}=km({encoded:t,encoding:e});return Ht(r,Ey)}function wB(t){const{encoding:e=Gl}=t;if(Bh(t.type)===_y)return Ht(Kf([t.type,t.sealed]),e);if(Bh(t.type)===zc){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ht(Kf([t.type,t.senderPublicKey,t.iv,t.sealed]),e)}return Ht(Kf([t.type,t.iv,t.sealed]),e)}function km(t){const{encoded:e,encoding:r=Gl}=t,n=Kr(e,r),i=n.slice(x_e,sT),s=sT;if(Bh(i)===zc){const l=s+N5,u=l+Ag,h=n.slice(s,l),d=n.slice(l,u),g=n.slice(u);return{type:i,sealed:g,iv:d,senderPublicKey:h}}if(Bh(i)===_y){const l=n.slice(s),u=vy(Ag);return{type:i,sealed:l,iv:u}}const o=s+Ag,a=n.slice(s,o),c=n.slice(o);return{type:i,sealed:c,iv:a}}function $_e(t,e){const r=km({encoded:t,encoding:e==null?void 0:e.encoding});return bB({type:Bh(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Ht(r.senderPublicKey,Wi):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function bB(t){const e=(t==null?void 0:t.type)||mB;if(e===zc){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function oT(t){return t.type===zc&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function aT(t){return t.type===_y}function P_e(t){return new YI.ec("p256").keyFromPublic({x:Buffer.from(t.x,"base64").toString("hex"),y:Buffer.from(t.y,"base64").toString("hex")},"hex")}function O_e(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;return r>0&&(e+="=".repeat(4-r)),e}function k_e(t){return Buffer.from(O_e(t),"base64")}function R_e(t,e){const[r,n,i]=t.split("."),s=k_e(i);if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),c=`${r}.${n}`,l=w2(c),u=P_e(e),h=Ht(l,Wi);if(!u.verify(h,{r:o,s:a}))throw new Error("Invalid signature");return fp(t).payload}const D_e="irn";function Qb(t){return(t==null?void 0:t.relay)||{protocol:D_e}}function sg(t){const e=BR[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function L_e(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function cT(t){if(!t.includes("wc:")){const l=QL(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(s),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:B_e(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:L_e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function B_e(t){return t.startsWith("//")?t.substring(2):t}function U_e(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=i,o=r+e+s;t[s]&&(n[o]=t[s])}),n}function lT(t){const e=new URLSearchParams,r=U_e(t.relay);Object.keys(r).sort().forEach(i=>{e.set(i,r[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function Rw(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function Xp(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function j_e(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Xp(r.accounts))}),e}function F_e(t,e){const r=[];return Object.values(t).forEach(n=>{Xp(n.accounts).includes(e)&&r.push(...n.methods)}),r}function z_e(t,e){const r=[];return Object.values(t).forEach(n=>{Xp(n.accounts).includes(e)&&r.push(...n.events)}),r}function M5(t){return t.includes(":")}function og(t){return M5(t)?t.split(":")[0]:t}function q_e(t){const e={};return t==null||t.forEach(r=>{var n;const[i,s]=r.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(r),(n=e[i].chains)==null||n.push(`${i}:${s}`)}),e}function uT(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=q_e(e);for(const[n,i]of Object.entries(r))i.methods?i.methods=$1(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return r}const W_e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},H_e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ye(t,e){const{message:r,code:n}=H_e[t];return{message:e?`${r} ${e}`:r,code:n}}function ir(t,e){const{message:r,code:n}=W_e[t];return{message:e?`${r} ${e}`:r,code:n}}function Uh(t,e){return!!Array.isArray(t)}function Rm(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function gi(t){return typeof t>"u"}function En(t,e){return e&&gi(t)?!0:typeof t=="string"&&!!t.trim().length}function T5(t,e){return e&&gi(t)?!0:typeof t=="number"&&!isNaN(t)}function K_e(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return uh(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Xp(a),h=r[o];(!uh(HL(o,h),u)||!uh(h.methods,c)||!uh(h.events,l))&&(s=!1)}),s):!1}function Zb(t){return En(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function V_e(t){if(En(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Zb(r)}}return!1}function G_e(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(En(t,!1)){if(e(t))return!0;const r=QL(t);return e(r)}}catch{}return!1}function Y_e(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Q_e(t){return t==null?void 0:t.topic}function Z_e(t,e){let r=null;return En(t==null?void 0:t.publicKey,!1)||(r=ye("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function hT(t){let e=!0;return Uh(t)?t.length&&(e=t.every(r=>En(r,!1))):e=!1,e}function J_e(t,e,r){let n=null;return Uh(e)&&e.length?e.forEach(i=>{n||Zb(i)||(n=ir("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Zb(t)||(n=ir("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function X_e(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=J_e(i,HL(i,s),`${e} ${r}`);o&&(n=o)}),n}function e3e(t,e){let r=null;return Uh(t)?t.forEach(n=>{r||V_e(n)||(r=ir("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=ir("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function t3e(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=e3e(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function r3e(t,e){let r=null;return hT(t==null?void 0:t.methods)?hT(t==null?void 0:t.events)||(r=ir("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=ir("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function vB(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=r3e(n,`${e}, namespace`);i&&(r=i)}),r}function n3e(t,e,r){let n=null;if(t&&Rm(t)){const i=vB(t,e);i&&(n=i);const s=X_e(t,e,r);s&&(n=s)}else n=ye("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function P_(t,e){let r=null;if(t&&Rm(t)){const n=vB(t,e);n&&(r=n);const i=t3e(t,e);i&&(r=i)}else r=ye("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function EB(t){return En(t.protocol,!0)}function i3e(t,e){let r=!1;return t?t&&Uh(t)&&t.length&&t.forEach(n=>{r=EB(n)}):r=!0,r}function s3e(t){return typeof t=="number"}function gs(t){return typeof t<"u"&&typeof t!==null}function o3e(t){return!(!t||typeof t!="object"||!t.code||!T5(t.code,!1)||!t.message||!En(t.message,!1))}function a3e(t){return!(gi(t)||!En(t.method,!1))}function c3e(t){return!(gi(t)||gi(t.result)&&gi(t.error)||!T5(t.id,!1)||!En(t.jsonrpc,!1))}function l3e(t){return!(gi(t)||!En(t.name,!1))}function dT(t,e){return!(!Zb(e)||!j_e(t).includes(e))}function u3e(t,e,r){return En(r,!1)?F_e(t,e).includes(r):!1}function h3e(t,e,r){return En(r,!1)?z_e(t,e).includes(r):!1}function fT(t,e,r){let n=null;const i=d3e(t),s=f3e(e),o=Object.keys(i),a=Object.keys(s),c=pT(Object.keys(t)),l=pT(Object.keys(e)),u=c.filter(h=>!l.includes(h));return u.length&&(n=ye("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),uh(o,a)||(n=ye("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(h=>{if(!h.includes(":")||n)return;const d=Xp(e[h].accounts);d.includes(h)||(n=ye("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${d.toString()}`))}),o.forEach(h=>{n||(uh(i[h].methods,s[h].methods)?uh(i[h].events,s[h].events)||(n=ye("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${h}`)):n=ye("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${h}`))}),n}function d3e(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function pT(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function f3e(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=Xp(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function p3e(t,e){return T5(t,!1)&&t<=e.max&&t>=e.min}function gT(){const t=by();return new Promise(e=>{switch(t){case Ks.browser:e(g3e());break;case Ks.reactNative:e(m3e());break;case Ks.node:e(y3e());break;default:e(!0)}})}function g3e(){return wy()&&(navigator==null?void 0:navigator.onLine)}async function m3e(){if(_u()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function y3e(){return!0}function w3e(t){switch(by()){case Ks.browser:b3e(t);break;case Ks.reactNative:v3e(t);break}}function b3e(t){!_u()&&wy()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function v3e(t){_u()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const O_={};class L0{static get(e){return O_[e]}static set(e,r){O_[e]=r}static delete(e){delete O_[e]}}const _B="wc",SB=2,U4="core",ja=`${_B}@2:${U4}:`,E3e={logger:"error"},_3e={database:":memory:"},S3e="crypto",mT="client_ed25519_seed",x3e=J.ONE_DAY,I3e="keychain",A3e="0.3",C3e="messages",N3e="0.3",yT=J.SIX_HOURS,M3e="publisher",xB="irn",T3e="error",IB="wss://relay.walletconnect.org",$3e="relayer",Gn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},P3e="_subscription",fo={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},O3e=.1,j4="2.19.1",Ur={link_mode:"link_mode",relay:"relay"},k1={inbound:"inbound",outbound:"outbound"},k3e="0.3",R3e="WALLETCONNECT_CLIENT_ID",wT="WALLETCONNECT_LINK_MODE_APPS",Os={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},D3e="subscription",L3e="0.3",B3e="pairing",U3e="0.3",B0={wc_pairingDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:J.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:J.ONE_DAY,prompt:!1,tag:0},res:{ttl:J.ONE_DAY,prompt:!1,tag:0}}},Gu={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},qo={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},j3e="history",F3e="0.3",z3e="expirer",yo={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},q3e="0.3",W3e="verify-api",H3e="https://verify.walletconnect.com",AB="https://verify.walletconnect.org",Cg=AB,K3e=`${Cg}/v3`,V3e=[H3e,AB],G3e="echo",Y3e="https://echo.walletconnect.com",_a={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},xc={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Wo={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Tu={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},$u={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},U0={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Q3e=.1,Z3e="event-client",J3e=86400,X3e="https://pulse.walletconnect.org/batch";function eSe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var v=0,$=0,_=0,x=m.length;_!==x&&m[_]===0;)_++,v++;for(var A=(x-_)*u+1>>>0,T=new Uint8Array(A);_!==x;){for(var k=m[_],D=0,L=A-1;(k!==0||D<$)&&L!==-1;L--,D++)k+=256*T[L]>>>0,T[L]=k%a>>>0,k=k/a>>>0;if(k!==0)throw new Error("Non-zero carry");$=D,_++}for(var F=A-$;F!==A&&T[F]===0;)F++;for(var B=c.repeat(v);F<A;++F)B+=t.charAt(T[F]);return B}function d(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var v=0;if(m[v]!==" "){for(var $=0,_=0;m[v]===c;)$++,v++;for(var x=(m.length-v)*l+1>>>0,A=new Uint8Array(x);m[v];){var T=r[m.charCodeAt(v)];if(T===255)return;for(var k=0,D=x-1;(T!==0||k<_)&&D!==-1;D--,k++)T+=a*A[D]>>>0,A[D]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");_=k,v++}if(m[v]!==" "){for(var L=x-_;L!==x&&A[L]===0;)L++;for(var F=new Uint8Array($+(x-L)),B=$;L!==x;)F[B++]=A[L++];return F}}}function g(m){var v=d(m);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:g}}var tSe=eSe,rSe=tSe;const CB=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},nSe=t=>new TextEncoder().encode(t),iSe=t=>new TextDecoder().decode(t);class sSe{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class oSe{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return NB(this,e)}}class aSe{constructor(e){this.decoders=e}or(e){return NB(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const NB=(t,e)=>new aSe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class cSe{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new sSe(e,r,n),this.decoder=new oSe(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const b2=({name:t,prefix:e,encode:r,decode:n})=>new cSe(t,e,r,n),Sy=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=rSe(r,e);return b2({prefix:t,name:e,encode:n,decode:s=>CB(i(s))})},lSe=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},uSe=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Ii=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>b2({prefix:e,name:t,encode(i){return uSe(i,n,r)},decode(i){return lSe(i,n,r,t)}}),hSe=b2({prefix:"\0",name:"identity",encode:t=>iSe(t),decode:t=>nSe(t)});var dSe=Object.freeze({__proto__:null,identity:hSe});const fSe=Ii({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var pSe=Object.freeze({__proto__:null,base2:fSe});const gSe=Ii({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var mSe=Object.freeze({__proto__:null,base8:gSe});const ySe=Sy({prefix:"9",name:"base10",alphabet:"0123456789"});var wSe=Object.freeze({__proto__:null,base10:ySe});const bSe=Ii({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),vSe=Ii({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ESe=Object.freeze({__proto__:null,base16:bSe,base16upper:vSe});const _Se=Ii({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),SSe=Ii({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),xSe=Ii({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ISe=Ii({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ASe=Ii({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),CSe=Ii({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),NSe=Ii({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),MSe=Ii({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),TSe=Ii({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var $Se=Object.freeze({__proto__:null,base32:_Se,base32upper:SSe,base32pad:xSe,base32padupper:ISe,base32hex:ASe,base32hexupper:CSe,base32hexpad:NSe,base32hexpadupper:MSe,base32z:TSe});const PSe=Sy({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),OSe=Sy({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var kSe=Object.freeze({__proto__:null,base36:PSe,base36upper:OSe});const RSe=Sy({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),DSe=Sy({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var LSe=Object.freeze({__proto__:null,base58btc:RSe,base58flickr:DSe});const BSe=Ii({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),USe=Ii({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),jSe=Ii({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),FSe=Ii({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var zSe=Object.freeze({__proto__:null,base64:BSe,base64pad:USe,base64url:jSe,base64urlpad:FSe});const MB=Array.from(""),qSe=MB.reduce((t,e,r)=>(t[r]=e,t),[]),WSe=MB.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function HSe(t){return t.reduce((e,r)=>(e+=qSe[r],e),"")}function KSe(t){const e=[];for(const r of t){const n=WSe[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const VSe=b2({prefix:"",name:"base256emoji",encode:HSe,decode:KSe});var GSe=Object.freeze({__proto__:null,base256emoji:VSe}),YSe=TB,bT=128,QSe=-128,ZSe=Math.pow(2,31);function TB(t,e,r){e=e||[],r=r||0;for(var n=r;t>=ZSe;)e[r++]=t&255|bT,t/=128;for(;t&QSe;)e[r++]=t&255|bT,t>>>=7;return e[r]=t|0,TB.bytes=r-n+1,e}var JSe=F4,XSe=128,vT=127;function F4(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw F4.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&vT)<<i:(o&vT)*Math.pow(2,i),i+=7}while(o>=XSe);return F4.bytes=s-n,r}var e4e=Math.pow(2,7),t4e=Math.pow(2,14),r4e=Math.pow(2,21),n4e=Math.pow(2,28),i4e=Math.pow(2,35),s4e=Math.pow(2,42),o4e=Math.pow(2,49),a4e=Math.pow(2,56),c4e=Math.pow(2,63),l4e=function(t){return t<e4e?1:t<t4e?2:t<r4e?3:t<n4e?4:t<i4e?5:t<s4e?6:t<o4e?7:t<a4e?8:t<c4e?9:10},u4e={encode:YSe,decode:JSe,encodingLength:l4e},$B=u4e;const ET=(t,e,r=0)=>($B.encode(t,e,r),e),_T=t=>$B.encodingLength(t),z4=(t,e)=>{const r=e.byteLength,n=_T(t),i=n+_T(r),s=new Uint8Array(i+r);return ET(t,s,0),ET(r,s,n),s.set(e,i),new h4e(t,r,e,s)};class h4e{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const PB=({name:t,code:e,encode:r})=>new d4e(t,e,r);class d4e{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?z4(this.code,r):r.then(n=>z4(this.code,n))}else throw Error("Unknown type, must be binary type")}}const OB=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),f4e=PB({name:"sha2-256",code:18,encode:OB("SHA-256")}),p4e=PB({name:"sha2-512",code:19,encode:OB("SHA-512")});var g4e=Object.freeze({__proto__:null,sha256:f4e,sha512:p4e});const kB=0,m4e="identity",RB=CB,y4e=t=>z4(kB,RB(t)),w4e={code:kB,name:m4e,encode:RB,digest:y4e};var b4e=Object.freeze({__proto__:null,identity:w4e});new TextEncoder,new TextDecoder;const ST={...dSe,...pSe,...mSe,...wSe,...ESe,...$Se,...kSe,...LSe,...zSe,...GSe};({...g4e,...b4e});function v4e(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function DB(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const xT=DB("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),k_=DB("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=v4e(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),E4e={utf8:xT,"utf-8":xT,hex:ST.base16,latin1:k_,ascii:k_,binary:k_,...ST};function _4e(t,e="utf8"){const r=E4e[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var S4e=Object.defineProperty,x4e=(t,e,r)=>e in t?S4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ba=(t,e,r)=>x4e(t,typeof e!="symbol"?e+"":e,r);class I4e{constructor(e,r){this.core=e,this.logger=r,ba(this,"keychain",new Map),ba(this,"name",I3e),ba(this,"version",A3e),ba(this,"initialized",!1),ba(this,"storagePrefix",ja),ba(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),ba(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),ba(this,"set",async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()}),ba(this,"get",n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=ye("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i}),ba(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=Kt(r,this.name)}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,T4(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?$4(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var A4e=Object.defineProperty,C4e=(t,e,r)=>e in t?A4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oi=(t,e,r)=>C4e(t,typeof e!="symbol"?e+"":e,r);class N4e{constructor(e,r,n){this.core=e,this.logger=r,oi(this,"name",S3e),oi(this,"keychain"),oi(this,"randomSessionIdentifier",B4()),oi(this,"initialized",!1),oi(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),oi(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),oi(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=Rb(i);return HI(s.publicKey)}),oi(this,"generateKeyPair",()=>{this.isInitialized();const i=I_e();return this.setPrivateKey(i.publicKey,i.privateKey)}),oi(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=Rb(s),a=this.randomSessionIdentifier;return await K7(a,i,x3e,o)}),oi(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=A_e(a,s);return this.setSymKey(c,o)}),oi(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||O1(i);return await this.keychain.set(o,i),o}),oi(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),oi(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),oi(this,"encode",async(i,s,o)=>{this.isInitialized();const a=bB(o),c=Mo(s);if(aT(a))return M_e(c,o==null?void 0:o.encoding);if(oT(a)){const d=a.senderPublicKey,g=a.receiverPublicKey;i=await this.generateSharedKey(d,g)}const l=this.getSymKey(i),{type:u,senderPublicKey:h}=a;return C_e({type:u,symKey:l,message:c,senderPublicKey:h,encoding:o==null?void 0:o.encoding})}),oi(this,"decode",async(i,s,o)=>{this.isInitialized();const a=$_e(s,o);if(aT(a)){const c=T_e(s,o==null?void 0:o.encoding);return aa(c)}if(oT(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=N_e({symKey:c,encoded:s,encoding:o==null?void 0:o.encoding});return aa(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),oi(this,"getPayloadType",(i,s=Gl)=>{const o=km({encoded:i,encoding:s});return Bh(o.type)}),oi(this,"getPayloadSenderPublicKey",(i,s=Gl)=>{const o=km({encoded:i,encoding:s});return o.senderPublicKey?Ht(o.senderPublicKey,Wi):void 0}),this.core=e,this.logger=Kt(r,this.name),this.keychain=n||new I4e(this.core,this.logger)}get context(){return hr(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(mT)}catch{e=B4(),await this.keychain.set(mT,e)}return _4e(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var M4e=Object.defineProperty,T4e=Object.defineProperties,$4e=Object.getOwnPropertyDescriptors,IT=Object.getOwnPropertySymbols,P4e=Object.prototype.hasOwnProperty,O4e=Object.prototype.propertyIsEnumerable,q4=(t,e,r)=>e in t?M4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,k4e=(t,e)=>{for(var r in e||(e={}))P4e.call(e,r)&&q4(t,r,e[r]);if(IT)for(var r of IT(e))O4e.call(e,r)&&q4(t,r,e[r]);return t},R4e=(t,e)=>T4e(t,$4e(e)),$s=(t,e,r)=>q4(t,typeof e!="symbol"?e+"":e,r);class D4e extends ybe{constructor(e,r){super(e,r),this.logger=e,this.core=r,$s(this,"messages",new Map),$s(this,"messagesWithoutClientAck",new Map),$s(this,"name",C3e),$s(this,"version",N3e),$s(this,"initialized",!1),$s(this,"storagePrefix",ja),$s(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),$s(this,"set",async(n,i,s)=>{this.isInitialized();const o=xa(i);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(n,a),s===k1.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,R4e(k4e({},c),{[o]:i}))}return await this.persist(),o}),$s(this,"get",n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i}),$s(this,"getWithoutAck",n=>{this.isInitialized();const i={};for(const s of n){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),$s(this,"has",(n,i)=>{this.isInitialized();const s=this.get(n),o=xa(i);return typeof s[o]<"u"}),$s(this,"ack",async(n,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(n);if(typeof s>"u")return;const o=xa(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,s),await this.persist()}),$s(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=Kt(e,this.name),this.core=r}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,T4(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,T4(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?$4(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?$4(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var L4e=Object.defineProperty,B4e=Object.defineProperties,U4e=Object.getOwnPropertyDescriptors,AT=Object.getOwnPropertySymbols,j4e=Object.prototype.hasOwnProperty,F4e=Object.prototype.propertyIsEnumerable,W4=(t,e,r)=>e in t?L4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Dw=(t,e)=>{for(var r in e||(e={}))j4e.call(e,r)&&W4(t,r,e[r]);if(AT)for(var r of AT(e))F4e.call(e,r)&&W4(t,r,e[r]);return t},R_=(t,e)=>B4e(t,U4e(e)),Ho=(t,e,r)=>W4(t,typeof e!="symbol"?e+"":e,r);class z4e extends wbe{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Ho(this,"events",new Rn.EventEmitter),Ho(this,"name",M3e),Ho(this,"queue",new Map),Ho(this,"publishTimeout",J.toMiliseconds(J.ONE_MINUTE)),Ho(this,"initialPublishTimeout",J.toMiliseconds(J.ONE_SECOND*15)),Ho(this,"needsTransportRestart",!1),Ho(this,"publish",async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});const a=(s==null?void 0:s.ttl)||yT,c=Qb(s),l=(s==null?void 0:s.prompt)||!1,u=(s==null?void 0:s.tag)||0,h=(s==null?void 0:s.id)||Hs().toString(),d={topic:n,message:i,opts:{ttl:a,relay:c,prompt:l,tag:u,id:h,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}},g=`Failed to publish payload, please try again. id:${h} tag:${u}`;try{const m=new Promise(async v=>{const $=({id:x})=>{d.opts.id===x&&(this.removeRequestFromQueue(x),this.relayer.events.removeListener(Gn.publish,$),v(d))};this.relayer.events.on(Gn.publish,$);const _=Vl(new Promise((x,A)=>{this.rpcPublish({topic:n,message:i,ttl:a,prompt:l,tag:u,id:h,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}).then(x).catch(T=>{this.logger.warn(T,T==null?void 0:T.message),A(T)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${h} tag:${u}`);try{await _,this.events.removeListener(Gn.publish,$)}catch(x){this.queue.set(h,R_(Dw({},d),{attempt:1})),this.logger.warn(x,x==null?void 0:x.message)}});this.logger.trace({type:"method",method:"publish",params:{id:h,topic:n,message:i,opts:s}}),await Vl(m,this.publishTimeout,g)}catch(m){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(m),(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw m}finally{this.queue.delete(h)}}),Ho(this,"on",(n,i)=>{this.events.on(n,i)}),Ho(this,"once",(n,i)=>{this.events.once(n,i)}),Ho(this,"off",(n,i)=>{this.events.off(n,i)}),Ho(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.relayer=e,this.logger=Kt(r,this.name),this.registerEventListeners()}get context(){return hr(this.logger)}async rpcPublish(e){var r,n,i,s;const{topic:o,message:a,ttl:c=yT,prompt:l,tag:u,id:h,attestation:d,tvf:g}=e,m={method:sg(Qb().protocol).publish,params:Dw({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:d},g),id:h};gi((r=m.params)==null?void 0:r.prompt)&&((n=m.params)==null||delete n.prompt),gi((i=m.params)==null?void 0:i.tag)&&((s=m.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:m});const v=await this.relayer.request(m);return this.relayer.events.emit(Gn.publish,e),this.logger.debug("Successfully Published Payload"),v}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const n=e.attempt+1;this.queue.set(r,R_(Dw({},e),{attempt:n}));const{topic:i,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),await this.rpcPublish(R_(Dw({},e),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(la.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Gn.connection_stalled);return}this.checkQueue()}),this.relayer.on(Gn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var q4e=Object.defineProperty,W4e=(t,e,r)=>e in t?q4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ud=(t,e,r)=>W4e(t,typeof e!="symbol"?e+"":e,r);class H4e{constructor(){Ud(this,"map",new Map),Ud(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),Ud(this,"get",e=>this.map.get(e)||[]),Ud(this,"exists",(e,r)=>this.get(e).includes(r)),Ud(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),Ud(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var K4e=Object.defineProperty,V4e=Object.defineProperties,G4e=Object.getOwnPropertyDescriptors,CT=Object.getOwnPropertySymbols,Y4e=Object.prototype.hasOwnProperty,Q4e=Object.prototype.propertyIsEnumerable,H4=(t,e,r)=>e in t?K4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,j0=(t,e)=>{for(var r in e||(e={}))Y4e.call(e,r)&&H4(t,r,e[r]);if(CT)for(var r of CT(e))Q4e.call(e,r)&&H4(t,r,e[r]);return t},D_=(t,e)=>V4e(t,G4e(e)),lr=(t,e,r)=>H4(t,typeof e!="symbol"?e+"":e,r);class Z4e extends Ebe{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,lr(this,"subscriptions",new Map),lr(this,"topicMap",new H4e),lr(this,"events",new Rn.EventEmitter),lr(this,"name",D3e),lr(this,"version",L3e),lr(this,"pending",new Map),lr(this,"cached",[]),lr(this,"initialized",!1),lr(this,"storagePrefix",ja),lr(this,"subscribeTimeout",J.toMiliseconds(J.ONE_MINUTE)),lr(this,"initialSubscribeTimeout",J.toMiliseconds(J.ONE_SECOND*15)),lr(this,"clientId"),lr(this,"batchSubscribeTopicsLimit",500),lr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),lr(this,"subscribe",async(n,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=Qb(i),o={topic:n,relay:s,transportType:i==null?void 0:i.transportType};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),lr(this,"unsubscribe",async(n,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)}),lr(this,"isSubscribed",n=>new Promise(i=>{i(this.topicMap.topics.includes(n))})),lr(this,"isKnownTopic",n=>new Promise(i=>{i(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(s=>s.topic===n))})),lr(this,"on",(n,i)=>{this.events.on(n,i)}),lr(this,"once",(n,i)=>{this.events.once(n,i)}),lr(this,"off",(n,i)=>{this.events.off(n,i)}),lr(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),lr(this,"start",async()=>{await this.onConnect()}),lr(this,"stop",async()=>{await this.onDisconnect()}),lr(this,"restart",async()=>{await this.restore(),await this.onRestart()}),lr(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(i=>{n.push(i)}),await this.batchSubscribe(n)}),lr(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(la.pulse,async()=>{await this.checkPending()}),this.events.on(Os.created,async n=>{const i=Os.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()}),this.events.on(Os.deleted,async n=>{const i=Os.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()})}),this.relayer=e,this.logger=Kt(r,this.name),this.clientId=""}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=Qb(n);await this.restartToComplete({topic:e,id:r,relay:i}),await this.rpcUnsubscribe(e,r,i);const s=ir("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r,n){var i;(!n||(n==null?void 0:n.transportType)===Ur.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const s={method:sg(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=n==null?void 0:n.internal)==null?void 0:i.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((n==null?void 0:n.transportType)===Ur.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(u=>this.logger.warn(u))},J.toMiliseconds(J.ONE_SECOND)),a;const c=new Promise(async u=>{const h=d=>{d.topic===e&&(this.events.removeListener(Os.created,h),u(d.id))};this.events.on(Os.created,h);try{const d=await Vl(new Promise((g,m)=>{this.relayer.request(s).catch(v=>{this.logger.warn(v,v==null?void 0:v.message),m(v)}).then(g)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Os.created,h),u(d)}catch{}}),l=await Vl(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Gn.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:sg(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Vl(new Promise(i=>{this.relayer.request(n).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Gn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:sg(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await Vl(new Promise((s,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Gn.connection_stalled)}return i}rpcUnsubscribe(e,r,n){const i={method:sg(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,D_(j0({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,j0({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,j0({},r)),this.topicMap.set(r.topic,e),this.events.emit(Os.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Os.deleted,D_(j0({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Os.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Os.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>D_(j0({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await B2e(J.toMiliseconds(J.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return xa(e+await this.getClientId())}}var J4e=Object.defineProperty,NT=Object.getOwnPropertySymbols,X4e=Object.prototype.hasOwnProperty,exe=Object.prototype.propertyIsEnumerable,K4=(t,e,r)=>e in t?J4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,MT=(t,e)=>{for(var r in e||(e={}))X4e.call(e,r)&&K4(t,r,e[r]);if(NT)for(var r of NT(e))exe.call(e,r)&&K4(t,r,e[r]);return t},$t=(t,e,r)=>K4(t,typeof e!="symbol"?e+"":e,r);class txe extends bbe{constructor(e){super(e),$t(this,"protocol","wc"),$t(this,"version",2),$t(this,"core"),$t(this,"logger"),$t(this,"events",new Rn.EventEmitter),$t(this,"provider"),$t(this,"messages"),$t(this,"subscriber"),$t(this,"publisher"),$t(this,"name",$3e),$t(this,"transportExplicitlyClosed",!1),$t(this,"initialized",!1),$t(this,"connectionAttemptInProgress",!1),$t(this,"relayUrl"),$t(this,"projectId"),$t(this,"packageName"),$t(this,"bundleId"),$t(this,"hasExperiencedNetworkDisruption",!1),$t(this,"pingTimeout"),$t(this,"heartBeatTimeout",J.toMiliseconds(J.THIRTY_SECONDS+J.FIVE_SECONDS)),$t(this,"reconnectTimeout"),$t(this,"connectPromise"),$t(this,"reconnectInProgress",!1),$t(this,"requestsInFlight",[]),$t(this,"connectTimeout",J.toMiliseconds(J.ONE_SECOND*15)),$t(this,"request",async r=>{var n,i;this.logger.debug("Publishing Request Payload");const s=r.id||Hs().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${s}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),$t(this,"resetPingTimeout",()=>{Gb()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null?void 0:i.terminate)==null||s.call(i)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),$t(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),$t(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Gn.connect)}),$t(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),$t(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(Gn.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),$t(this,"registerProviderListeners",()=>{this.provider.on(fo.payload,this.onPayloadHandler),this.provider.on(fo.connect,this.onConnectHandler),this.provider.on(fo.disconnect,this.onDisconnectHandler),this.provider.on(fo.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Kt(e.logger,this.name):wu(tl({level:e.logger||T3e})),this.messages=new D4e(this.logger,e.core),this.subscriber=new Z4e(this,this.logger),this.publisher=new z4e(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||IB,this.projectId=e.projectId,S2e()?this.packageName=OM():x2e()&&(this.bundleId=OM()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return hr(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Ur.relay},k1.outbound)}async subscribe(e,r){var n,i,s;this.isInitialized(),(!(r!=null&&r.transportType)||(r==null?void 0:r.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Os.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Os.created,l)}),new Promise(async(u,h)=>{a=await this.subscriber.subscribe(e,MT({internal:{throwOnFailedPublish:o}},r)).catch(d=>{o&&h(d)})||a,u()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Vl(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await gT())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const i=Cn(J.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,s)}this.events.emit(Gn.message,e),await this.recordMessageEvent(e,k1.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(fo.disconnect,s),await Vl(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(fo.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(fo.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(fo.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const i=n;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,J.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,i,s;if(Gb())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Vr(new AD(N2e({sdkVersion:j4,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:i}=e;await this.messages.set(n,i,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.warn(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Yp(e)){if(!e.method.endsWith(P3e))return;const r=e.params,{topic:n,message:i,publishedAt:s,attestation:o}=r.data,a={topic:n,message:i,publishedAt:s,transportType:Ur.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(MT({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Xh(e)&&this.events.emit(Gn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,k1.inbound),this.events.emit(Gn.message,e))}async acknowledgePayload(e){const r=Eu(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(fo.payload,this.onPayloadHandler),this.provider.off(fo.connect,this.onConnectHandler),this.provider.off(fo.disconnect,this.onDisconnectHandler),this.provider.off(fo.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await gT();w3e(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n==null?void 0:n.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Gn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},J.toMiliseconds(O3e)))))}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function rxe(){}function TT(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function $T(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function PT(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const nxe="[object RegExp]",ixe="[object String]",sxe="[object Number]",oxe="[object Boolean]",OT="[object Arguments]",axe="[object Symbol]",cxe="[object Date]",lxe="[object Map]",uxe="[object Set]",hxe="[object Array]",dxe="[object Function]",fxe="[object ArrayBuffer]",L_="[object Object]",pxe="[object Error]",gxe="[object DataView]",mxe="[object Uint8Array]",yxe="[object Uint8ClampedArray]",wxe="[object Uint16Array]",bxe="[object Uint32Array]",vxe="[object BigUint64Array]",Exe="[object Int8Array]",_xe="[object Int16Array]",Sxe="[object Int32Array]",xxe="[object BigInt64Array]",Ixe="[object Float32Array]",Axe="[object Float64Array]";function Cxe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function Nxe(t,e,r){return ag(t,e,void 0,void 0,void 0,void 0,r)}function ag(t,e,r,n,i,s,o){const a=o(t,e,r,n,i,s);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Ng(t,e,s,o)}return Ng(t,e,s,o)}function Ng(t,e,r,n){if(Object.is(t,e))return!0;let i=PT(t),s=PT(e);if(i===OT&&(i=L_),s===OT&&(s=L_),i!==s)return!1;switch(i){case ixe:return t.toString()===e.toString();case sxe:{const c=t.valueOf(),l=e.valueOf();return Cxe(c,l)}case oxe:case cxe:case axe:return Object.is(t.valueOf(),e.valueOf());case nxe:return t.source===e.source&&t.flags===e.flags;case dxe:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(i){case lxe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!ag(l,e.get(c),c,t,e,r,n))return!1;return!0}case uxe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const h=c[u],d=l.findIndex(g=>ag(h,g,void 0,t,e,r,n));if(d===-1)return!1;l.splice(d,1)}return!0}case hxe:case mxe:case yxe:case wxe:case bxe:case vxe:case Exe:case _xe:case Sxe:case xxe:case Ixe:case Axe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!ag(t[c],e[c],c,t,e,r,n))return!1;return!0}case fxe:return t.byteLength!==e.byteLength?!1:Ng(new Uint8Array(t),new Uint8Array(e),r,n);case gxe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Ng(new Uint8Array(t),new Uint8Array(e),r,n);case pxe:return t.name===e.name&&t.message===e.message;case L_:{if(!(Ng(t.constructor,e.constructor,r,n)||TT(t)&&TT(e)))return!1;const c=[...Object.keys(t),...$T(t)],l=[...Object.keys(e),...$T(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const h=c[u],d=t[h];if(!Object.hasOwn(e,h))return!1;const g=e[h];if(!ag(d,g,h,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function Mxe(t,e){return Nxe(t,e,rxe)}var Txe=Object.defineProperty,kT=Object.getOwnPropertySymbols,$xe=Object.prototype.hasOwnProperty,Pxe=Object.prototype.propertyIsEnumerable,V4=(t,e,r)=>e in t?Txe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,RT=(t,e)=>{for(var r in e||(e={}))$xe.call(e,r)&&V4(t,r,e[r]);if(kT)for(var r of kT(e))Pxe.call(e,r)&&V4(t,r,e[r]);return t},us=(t,e,r)=>V4(t,typeof e!="symbol"?e+"":e,r);class od extends vbe{constructor(e,r,n,i=ja,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,us(this,"map",new Map),us(this,"version",k3e),us(this,"cached",[]),us(this,"initialized",!1),us(this,"getKey"),us(this,"storagePrefix",ja),us(this,"recentlyDeleted",[]),us(this,"recentlyDeletedLimit",200),us(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!gi(o)?this.map.set(this.getKey(o),o):Y_e(o)?this.map.set(o.id,o):Q_e(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),us(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),us(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),us(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>Mxe(a[c],o[c]))):this.values)),us(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=RT(RT({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),us(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Kt(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:i}=ye("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:n}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Oxe=Object.defineProperty,kxe=(t,e,r)=>e in t?Oxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_t=(t,e,r)=>kxe(t,typeof e!="symbol"?e+"":e,r);class Rxe{constructor(e,r){this.core=e,this.logger=r,_t(this,"name",B3e),_t(this,"version",U3e),_t(this,"events",new Dp),_t(this,"pairings"),_t(this,"initialized",!1),_t(this,"storagePrefix",ja),_t(this,"ignoredPayloadTypes",[zc]),_t(this,"registeredMethods",[]),_t(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),_t(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),_t(this,"create",async n=>{this.isInitialized();const i=B4(),s=await this.core.crypto.setSymKey(i),o=Cn(J.FIVE_MINUTES),a={protocol:xB},c={topic:s,expiry:o,relay:a,active:!1,methods:n==null?void 0:n.methods},l=lT({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(Gu.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:n==null?void 0:n.transportType}),{topic:s,uri:l}}),_t(this,"pair",async n=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[_a.pairing_started]}});this.isValidPair(n,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=cT(n.uri);i.props.properties.topic=s,i.addTrace(_a.pairing_uri_validation_success),i.addTrace(_a.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(_a.existing_pairing),u.active)throw i.setError(xc.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(_a.pairing_not_expired)}const h=c||Cn(J.FIVE_MINUTES),d={topic:s,relay:a,expiry:h,active:!1,methods:l};this.core.expirer.set(s,h),await this.pairings.set(s,d),i.addTrace(_a.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(Gu.create,d),i.addTrace(_a.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(_a.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(xc.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(g){throw i.setError(xc.subscribe_pairing_topic_failure),g}return i.addTrace(_a.subscribe_pairing_topic_success),d}),_t(this,"activate",async({topic:n})=>{this.isInitialized();const i=Cn(J.FIVE_MINUTES);this.core.expirer.set(n,i),await this.pairings.update(n,{active:!0,expiry:i})}),_t(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=zu();this.events.once(Wt("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}}),_t(this,"updateExpiry",async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})}),_t(this,"updateMetadata",async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})}),_t(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),_t(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",ir("USER_DISCONNECTED")),await this.deletePairing(i))}),_t(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(i);return lT({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),_t(this,"sendRequest",async(n,i,s)=>{const o=es(i,s),a=await this.core.crypto.encode(n,o),c=B0[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),_t(this,"sendResult",async(n,i,s)=>{const o=Eu(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=B0[c].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),_t(this,"sendError",async(n,i,s)=>{const o=Gp(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=B0[c]?B0[c].res:B0.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),_t(this,"deletePairing",async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,ir("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])}),_t(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(i=>Pl(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))}),_t(this,"onRelayEventRequest",async n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),_t(this,"onRelayEventResponse",async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),_t(this,"onPairingPingRequest",async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(Gu.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),_t(this,"onPairingPingResponse",(n,i)=>{const{id:s}=i;setTimeout(()=>{Pn(i)?this.events.emit(Wt("pairing_ping",s),{}):ln(i)&&this.events.emit(Wt("pairing_ping",s),{error:i.error})},500)}),_t(this,"onPairingDeleteRequest",async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Gu.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),_t(this,"onUnknownRpcMethodRequest",async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=ir("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}}),_t(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(ir("WC_METHOD_UNSUPPORTED",n))}),_t(this,"isValidPair",(n,i)=>{var s;if(!gs(n)){const{message:a}=ye("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError(xc.malformed_pairing_uri),new Error(a)}if(!G_e(n.uri)){const{message:a}=ye("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError(xc.malformed_pairing_uri),new Error(a)}const o=cT(n==null?void 0:n.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:a}=ye("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(xc.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=ye("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(xc.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&J.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(xc.pairing_expired);const{message:a}=ye("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),_t(this,"isValidPing",async n=>{if(!gs(n)){const{message:s}=ye("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),_t(this,"isValidDisconnect",async n=>{if(!gs(n)){const{message:s}=ye("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),_t(this,"isValidPairingTopic",async n=>{if(!En(n,!1)){const{message:i}=ye("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=ye("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Pl(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=ye("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}}),this.core=e,this.logger=Kt(r,this.name),this.pairings=new od(this.core,this.logger,this.name,this.storagePrefix)}get context(){return hr(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Gn.message,async e=>{const{topic:r,message:n,transportType:i}=e;if(this.pairings.keys.includes(r)&&i!==Ur.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const s=await this.core.crypto.decode(r,n);Yp(s)?(this.core.history.set(r,s),await this.onRelayEventRequest({topic:r,payload:s})):Xh(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id)),await this.core.relayer.messages.ack(r,n)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(yo.expired,async e=>{const{topic:r}=YL(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Gu.expire,{topic:r}))})}}var Dxe=Object.defineProperty,Lxe=(t,e,r)=>e in t?Dxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ai=(t,e,r)=>Lxe(t,typeof e!="symbol"?e+"":e,r);class Bxe extends mbe{constructor(e,r){super(e,r),this.core=e,this.logger=r,ai(this,"records",new Map),ai(this,"events",new Rn.EventEmitter),ai(this,"name",j3e),ai(this,"version",F3e),ai(this,"cached",[]),ai(this,"initialized",!1),ai(this,"storagePrefix",ja),ai(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ai(this,"set",(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Cn(J.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(qo.created,o)}),ai(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=ln(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(qo.updated,i))}),ai(this,"get",async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i))),ai(this,"delete",(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(qo.deleted,s)}}),this.persist()}),ai(this,"exists",async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1)),ai(this,"on",(n,i)=>{this.events.on(n,i)}),ai(this,"once",(n,i)=>{this.events.once(n,i)}),ai(this,"off",(n,i)=>{this.events.off(n,i)}),ai(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=Kt(r,this.name)}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:es(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(qo.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(qo.created,e=>{const r=qo.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(qo.updated,e=>{const r=qo.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(qo.deleted,e=>{const r=qo.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(la.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{J.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(qo.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Uxe=Object.defineProperty,jxe=(t,e,r)=>e in t?Uxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Li=(t,e,r)=>jxe(t,typeof e!="symbol"?e+"":e,r);class Fxe extends _be{constructor(e,r){super(e,r),this.core=e,this.logger=r,Li(this,"expirations",new Map),Li(this,"events",new Rn.EventEmitter),Li(this,"name",z3e),Li(this,"version",q3e),Li(this,"cached",[]),Li(this,"initialized",!1),Li(this,"storagePrefix",ja),Li(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Li(this,"has",n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Li(this,"set",(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(yo.created,{target:s,expiration:o})}),Li(this,"get",n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)}),Li(this,"del",n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(yo.deleted,{target:i,expiration:s})}}),Li(this,"on",(n,i)=>{this.events.on(n,i)}),Li(this,"once",(n,i)=>{this.events.once(n,i)}),Li(this,"off",(n,i)=>{this.events.off(n,i)}),Li(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=Kt(r,this.name)}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return M2e(e);if(typeof e=="number")return T2e(e);const{message:r}=ye("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(yo.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;J.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(yo.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(la.pulse,()=>this.checkExpirations()),this.events.on(yo.created,e=>{const r=yo.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(yo.expired,e=>{const r=yo.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(yo.deleted,e=>{const r=yo.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var zxe=Object.defineProperty,qxe=(t,e,r)=>e in t?zxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yn=(t,e,r)=>qxe(t,typeof e!="symbol"?e+"":e,r);class Wxe extends Sbe{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,yn(this,"name",W3e),yn(this,"abortController"),yn(this,"isDevEnv"),yn(this,"verifyUrlV3",K3e),yn(this,"storagePrefix",ja),yn(this,"version",SB),yn(this,"publicKey"),yn(this,"fetchPromise"),yn(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&J.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),yn(this,"register",async i=>{if(!wy()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=rl(),u=this.startAbortTimer(J.ONE_SECOND*5),h=await new Promise((d,g)=>{const m=()=>{window.removeEventListener("message",$),l.body.removeChild(v),g("attestation aborted")};this.abortController.signal.addEventListener("abort",m);const v=l.createElement("iframe");v.src=c,v.style.display="none",v.addEventListener("error",m,{signal:this.abortController.signal});const $=_=>{if(_.data&&typeof _.data=="string")try{const x=JSON.parse(_.data);if(x.type==="verify_attestation"){if(fp(x.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(v),this.abortController.signal.removeEventListener("abort",m),window.removeEventListener("message",$),d(x.attestation===null?"":x.attestation)}}catch(x){this.logger.warn(x)}};l.body.appendChild(v),window.addEventListener("message",$,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",h),h}catch(l){this.logger.warn(l)}return""}),yn(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(fp(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,c)}),yn(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(J.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),yn(this,"getVerifyUrl",i=>{let s=i||Cg;return V3e.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Cg}`),s=Cg),s}),yn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(J.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),yn(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),yn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),yn(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),yn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),yn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),yn(this,"validateAttestation",(i,s)=>{const o=R_e(i,s.publicKey),a={hasExpired:J.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Kt(r,this.name),this.abortController=new AbortController,this.isDevEnv=_5(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return hr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),J.toMiliseconds(e))}}var Hxe=Object.defineProperty,Kxe=(t,e,r)=>e in t?Hxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,DT=(t,e,r)=>Kxe(t,typeof e!="symbol"?e+"":e,r);class Vxe extends xbe{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,DT(this,"context",G3e),DT(this,"registerDeviceToken",async n=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=n,c=`${Y3e}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=Kt(r,this.context)}}var Gxe=Object.defineProperty,LT=Object.getOwnPropertySymbols,Yxe=Object.prototype.hasOwnProperty,Qxe=Object.prototype.propertyIsEnumerable,G4=(t,e,r)=>e in t?Gxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,F0=(t,e)=>{for(var r in e||(e={}))Yxe.call(e,r)&&G4(t,r,e[r]);if(LT)for(var r of LT(e))Qxe.call(e,r)&&G4(t,r,e[r]);return t},Un=(t,e,r)=>G4(t,typeof e!="symbol"?e+"":e,r);class Zxe extends Ibe{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,Un(this,"context",Z3e),Un(this,"storagePrefix",ja),Un(this,"storageVersion",Q3e),Un(this,"events",new Map),Un(this,"shouldPersist",!1),Un(this,"init",async()=>{if(!_5())try{const i={eventId:RM(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:VL(this.core.relayer.protocol,this.core.relayer.version,j4)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),Un(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,l=RM(),u=this.core.projectId||"",h=Date.now(),d=F0({eventId:l,timestamp:h,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,d),this.shouldPersist=!0),d}),Un(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return F0(F0({},a),this.setMethods(a.eventId))}),Un(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),Un(this,"setEventListeners",()=>{this.core.heartbeat.on(la.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{J.fromMiliseconds(Date.now())-J.fromMiliseconds(i.timestamp)>J3e&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),Un(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),Un(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),Un(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),Un(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Un(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,F0(F0({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),Un(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),Un(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${X3e}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${j4}${s}`,{method:"POST",body:JSON.stringify(i)})}),Un(this,"getAppDomain",()=>KL().url),this.logger=Kt(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Jxe=Object.defineProperty,BT=Object.getOwnPropertySymbols,Xxe=Object.prototype.hasOwnProperty,eIe=Object.prototype.propertyIsEnumerable,Y4=(t,e,r)=>e in t?Jxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,UT=(t,e)=>{for(var r in e||(e={}))Xxe.call(e,r)&&Y4(t,r,e[r]);if(BT)for(var r of BT(e))eIe.call(e,r)&&Y4(t,r,e[r]);return t},wr=(t,e,r)=>Y4(t,typeof e!="symbol"?e+"":e,r);let tIe=class LB extends dbe{constructor(e){var r;super(e),wr(this,"protocol",_B),wr(this,"version",SB),wr(this,"name",U4),wr(this,"relayUrl"),wr(this,"projectId"),wr(this,"customStoragePrefix"),wr(this,"events",new Rn.EventEmitter),wr(this,"logger"),wr(this,"heartbeat"),wr(this,"relayer"),wr(this,"crypto"),wr(this,"storage"),wr(this,"history"),wr(this,"expirer"),wr(this,"pairing"),wr(this,"verify"),wr(this,"echoClient"),wr(this,"linkModeSupportedApps"),wr(this,"eventClient"),wr(this,"initialized",!1),wr(this,"logChunkController"),wr(this,"on",(o,a)=>this.events.on(o,a)),wr(this,"once",(o,a)=>this.events.once(o,a)),wr(this,"off",(o,a)=>this.events.off(o,a)),wr(this,"removeListener",(o,a)=>this.events.removeListener(o,a)),wr(this,"dispatchEnvelope",({topic:o,message:a,sessionExists:c})=>{if(!o||!a)return;const l={topic:o,message:a,publishedAt:Date.now(),transportType:Ur.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:c})}),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||IB,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const n=tl({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:E3e.logger,name:U4}),{logger:i,chunkLoggerController:s}=LI({opts:n,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=s,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,a;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((a=this.logChunkController)==null||a.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Kt(i,this.name),this.heartbeat=new l7,this.crypto=new N4e(this,this.logger,e==null?void 0:e.keychain),this.history=new Bxe(this,this.logger),this.expirer=new Fxe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Mve(UT(UT({},_3e),e==null?void 0:e.storageOptions)),this.relayer=new txe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Rxe(this,this.logger),this.verify=new Wxe(this,this.logger,this.storage),this.echoClient=new Vxe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Zxe(this,this.logger,e==null?void 0:e.telemetryEnabled)}static async init(e){const r=new LB(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(R3e,n),r}get context(){return hr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(wT,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(wT)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const rIe=tIe,BB="wc",UB=2,jB="client",$5=`${BB}@${UB}:${jB}:`,B_={name:jB,logger:"error"},jT="WALLETCONNECT_DEEPLINK_CHOICE",nIe="proposal",FT="Proposal expired",iIe="session",jd=J.SEVEN_DAYS,sIe="engine",jn={wc_sessionPropose:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1104},res:{ttl:J.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1106},res:{ttl:J.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1112},res:{ttl:J.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1114},res:{ttl:J.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:J.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:J.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1119}}},U_={min:J.FIVE_MINUTES,max:J.SEVEN_DAYS},va={idle:"IDLE",active:"ACTIVE"},zT={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},oIe="request",aIe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],cIe="wc",lIe="auth",uIe="authKeys",hIe="pairingTopics",dIe="requests",v2=`${cIe}@${1.5}:${lIe}:`,R1=`${v2}:PUB_KEY`;var fIe=Object.defineProperty,pIe=Object.defineProperties,gIe=Object.getOwnPropertyDescriptors,qT=Object.getOwnPropertySymbols,mIe=Object.prototype.hasOwnProperty,yIe=Object.prototype.propertyIsEnumerable,Q4=(t,e,r)=>e in t?fIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ur=(t,e)=>{for(var r in e||(e={}))mIe.call(e,r)&&Q4(t,r,e[r]);if(qT)for(var r of qT(e))yIe.call(e,r)&&Q4(t,r,e[r]);return t},Vi=(t,e)=>pIe(t,gIe(e)),ue=(t,e,r)=>Q4(t,typeof e!="symbol"?e+"":e,r);class wIe extends Mbe{constructor(e){super(e),ue(this,"name",sIe),ue(this,"events",new Dp),ue(this,"initialized",!1),ue(this,"requestQueue",{state:va.idle,queue:[]}),ue(this,"sessionRequestQueue",{state:va.idle,queue:[]}),ue(this,"requestQueueDelay",J.ONE_SECOND),ue(this,"expectedPairingMethodMap",new Map),ue(this,"recentlyDeletedMap",new Map),ue(this,"recentlyDeletedLimit",200),ue(this,"relayMessageCache",[]),ue(this,"pendingSessions",new Map),ue(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(jn)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay)))}),ue(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=Vi(ur({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=n;let u=i,h,d=!1;try{if(u){const D=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),d=D.active}}catch(D){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),D}if(!u||!d){const{topic:D,uri:L}=await this.client.core.pairing.create();u=D,h=L}if(!u){const{message:D}=ye("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(D)}const g=await this.client.core.crypto.generateKeyPair(),m=jn.wc_sessionPropose.req.ttl||J.FIVE_MINUTES,v=Cn(m),$=Vi(ur(ur({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:xB}],proposer:{publicKey:g,metadata:this.client.metadata},expiryTimestamp:v,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Kn()}),_=Wt("session_connect",$.id),{reject:x,resolve:A,done:T}=zu(m,FT),k=({id:D})=>{D===$.id&&(this.client.events.off("proposal_expire",k),this.pendingSessions.delete($.id),this.events.emit(_,{error:{message:FT,code:0}}))};return this.client.events.on("proposal_expire",k),this.events.once(_,({error:D,session:L})=>{this.client.events.off("proposal_expire",k),D?x(D):L&&A(L)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:$,throwOnFailedPublish:!0,clientRpcId:$.id}),await this.setProposal($.id,$),{uri:h,approval:T}}),ue(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),ue(this,"approve",async r=>{var n,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r==null?void 0:r.id)==null?void 0:n.toString(),trace:[Wo.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(B){throw o.setError(Tu.no_internet_connection),B}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(B){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(Tu.proposal_not_found),B}try{await this.isValidApprove(r)}catch(B){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Tu.session_approve_namespace_validation_failure),B}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:h,sessionConfig:d}=r,g=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:m,proposer:v,requiredNamespaces:$,optionalNamespaces:_}=g;let x=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:m});x||(x=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:Wo.session_approve_started,properties:{topic:m,trace:[Wo.session_approve_started,Wo.session_namespaces_validation_success]}}));const A=await this.client.core.crypto.generateKeyPair(),T=v.publicKey,k=await this.client.core.crypto.generateSharedKey(A,T),D=ur(ur(ur({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:A,metadata:this.client.metadata},expiry:Cn(jd)},u&&{sessionProperties:u}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),L=Ur.relay;x.addTrace(Wo.subscribing_session_topic);try{await this.client.core.relayer.subscribe(k,{transportType:L})}catch(B){throw x.setError(Tu.subscribe_session_topic_failure),B}x.addTrace(Wo.subscribe_session_topic_success);const F=Vi(ur({},D),{topic:k,requiredNamespaces:$,optionalNamespaces:_,pairingTopic:m,acknowledged:!1,self:D.controller,peer:{publicKey:v.publicKey,metadata:v.metadata},controller:A,transportType:Ur.relay});await this.client.session.set(k,F),x.addTrace(Wo.store_session);try{x.addTrace(Wo.publishing_session_settle),await this.sendRequest({topic:k,method:"wc_sessionSettle",params:D,throwOnFailedPublish:!0}).catch(B=>{throw x==null||x.setError(Tu.session_settle_publish_failure),B}),x.addTrace(Wo.session_settle_publish_success),x.addTrace(Wo.publishing_session_approve),await this.sendResult({id:a,topic:m,result:{relay:{protocol:c??"irn"},responderPublicKey:A},throwOnFailedPublish:!0}).catch(B=>{throw x==null||x.setError(Tu.session_approve_publish_failure),B}),x.addTrace(Wo.session_approve_publish_success)}catch(B){throw this.client.logger.error(B),this.client.session.delete(k,ir("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(k),B}return this.client.core.eventClient.deleteEvent({eventId:x.eventId}),await this.client.core.pairing.updateMetadata({topic:m,metadata:v.metadata}),await this.client.proposal.delete(a,ir("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:m}),await this.setExpiry(k,Cn(jd)),{topic:k,acknowledged:()=>Promise.resolve(this.client.session.get(k))}}),ue(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:i}=r;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&(await this.sendError({id:n,topic:s,error:i,rpcOpts:jn.wc_sessionPropose.reject}),await this.client.proposal.delete(n,ir("USER_DISCONNECTED")))}),ue(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(h){throw this.client.logger.error("update() -> isValidUpdate() failed"),h}const{topic:n,namespaces:i}=r,{done:s,resolve:o,reject:a}=zu(),c=Kn(),l=Hs().toString(),u=this.client.session.get(n).namespaces;return this.events.once(Wt("session_update",c),({error:h})=>{h?a(h):o()}),await this.client.session.update(n,{namespaces:i}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(h=>{this.client.logger.error(h),this.client.session.update(n,{namespaces:u}),a(h)}),{acknowledged:s}}),ue(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,i=Kn(),{done:s,resolve:o,reject:a}=zu();return this.events.once(Wt("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,Cn(jd)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),ue(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(_){throw this.client.logger.error("request() -> isValidRequest() failed"),_}const{chainId:n,request:i,topic:s,expiry:o=jn.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);(a==null?void 0:a.transportType)===Ur.relay&&await this.confirmOnlineStateOrThrow();const c=Kn(),l=Hs().toString(),{done:u,resolve:h,reject:d}=zu(o,"Request expired. Please try again.");this.events.once(Wt("session_request",c),({error:_,result:x})=>{_?d(_):h(x)});const g="wc_sessionRequest",m=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(m)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:g,params:{request:Vi(ur({},i),{expiryTimestamp:Cn(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:m}).catch(_=>d(_)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),await u();const v={request:Vi(ur({},i),{expiryTimestamp:Cn(o)}),chainId:n},$=this.shouldSetTVF(g,v);return await Promise.all([new Promise(async _=>{await this.sendRequest(ur({clientRpcId:c,relayRpcId:l,topic:s,method:g,params:v,expiry:o,throwOnFailedPublish:!0},$&&{tvf:this.getTVFParams(c,v)})).catch(x=>d(x)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),_()}),new Promise(async _=>{var x;if(!((x=a.sessionConfig)!=null&&x.disableDeepLink)){const A=await k2e(this.client.core.storage,jT);await $2e({id:c,topic:s,wcDeepLink:A})}_()}),u()]).then(_=>_[2])}),ue(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i,o=this.client.session.get(n);o.transportType===Ur.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Pn(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0,appLink:a}):ln(i)&&await this.sendError({id:s,topic:n,error:i.error,appLink:a}),this.cleanupAfterResponse(r)}),ue(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=Kn(),s=Hs().toString(),{done:o,resolve:a,reject:c}=zu();this.events.once(Wt("session_ping",i),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),ue(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r,o=Hs().toString(),a=Kn();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),ue(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:ir("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=ye("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}}),ue(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>K_e(n,r)))),ue(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ue(this,"authenticate",async(r,n)=>{var i;this.isInitialized(),this.isValidAuthenticate(r);const s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?Ur.link_mode:Ur.relay;o===Ur.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:h,type:d,exp:g,nbf:m,methods:v=[],expiry:$}=r,_=[...r.resources||[]],{topic:x,uri:A}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:x,uri:A}});const T=await this.client.core.crypto.generateKeyPair(),k=O1(T);if(await Promise.all([this.client.auth.authKeys.set(R1,{responseTopic:k,publicKey:T}),this.client.auth.pairingTopics.set(k,{topic:k,pairingTopic:x})]),await this.client.core.relayer.subscribe(k,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${x}`),v.length>0){const{namespace:S}=Gf(a[0]);let y=IEe(S,"request",v);P1(_)&&(y=CEe(y,_.pop())),_.push(y)}const D=$&&$>jn.wc_sessionAuthenticate.req.ttl?$:jn.wc_sessionAuthenticate.req.ttl,L={authPayload:{type:d??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:h,iat:new Date().toISOString(),exp:g,nbf:m,resources:_},requester:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:Cn(D)},F={eip155:{chains:a,methods:[...new Set(["personal_sign",...v])],events:["chainChanged","accountsChanged"]}},B={requiredNamespaces:{},optionalNamespaces:F,relays:[{protocol:"irn"}],pairingTopic:x,proposer:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:Cn(jn.wc_sessionPropose.req.ttl),id:Kn()},{done:q,resolve:R,reject:E}=zu(D,"Request expired"),b=Kn(),f=Wt("session_connect",B.id),p=Wt("session_request",b),w=async({error:S,session:y})=>{this.events.off(p,N),S?E(S):y&&R({session:y})},N=async S=>{var y,C,I;if(await this.deletePendingAuthRequest(b,{message:"fulfilled",code:0}),S.error){const ie=ir("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return S.error.code===ie.code?void 0:(this.events.off(f,w),E(S.error.message))}await this.deleteProposal(B.id),this.events.off(f,w);const{cacaos:U,responder:K}=S.result,V=[],te=[];for(const ie of U){await qM({cacao:ie,projectId:this.client.core.projectId})||(this.client.logger.error(ie,"Signature verification failed"),E(ir("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ve}=ie,Ne=P1(ve.resources),Ae=[P4(ve.iss)],et=Yb(ve.iss);if(Ne){const tt=WM(Ne),je=HM(Ne);V.push(...tt),Ae.push(...je)}for(const tt of Ae)te.push(`${tt}:${et}`)}const se=await this.client.core.crypto.generateSharedKey(T,K.publicKey);let ce;V.length>0&&(ce={topic:se,acknowledged:!0,self:{publicKey:T,metadata:this.client.metadata},peer:K,controller:K.publicKey,expiry:Cn(jd),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:x,namespaces:uT([...new Set(V)],[...new Set(te)]),transportType:o},await this.client.core.relayer.subscribe(se,{transportType:o}),await this.client.session.set(se,ce),x&&await this.client.core.pairing.updateMetadata({topic:x,metadata:K.metadata}),ce=this.client.session.get(se)),(y=this.client.metadata.redirect)!=null&&y.linkMode&&(C=K.metadata.redirect)!=null&&C.linkMode&&(I=K.metadata.redirect)!=null&&I.universal&&n&&(this.client.core.addLinkModeSupportedApp(K.metadata.redirect.universal),this.client.session.update(se,{transportType:Ur.link_mode})),R({auths:U,session:ce})};this.events.once(f,w),this.events.once(p,N);let M;try{if(s){const S=es("wc_sessionAuthenticate",L,b);this.client.core.history.set(x,S);const y=await this.client.core.crypto.encode("",S,{type:_y,encoding:D0});M=Rw(n,x,y)}else await Promise.all([this.sendRequest({topic:x,method:"wc_sessionAuthenticate",params:L,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:b}),this.sendRequest({topic:x,method:"wc_sessionPropose",params:B,expiry:jn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:B.id})])}catch(S){throw this.events.off(f,w),this.events.off(p,N),S}return await this.setProposal(B.id,B),await this.setAuthRequest(b,{request:Vi(ur({},L),{verifyContext:{}}),pairingTopic:x,transportType:o}),{uri:M??A,response:q}}),ue(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:i}=r,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[$u.authenticated_session_approve_started]}});try{this.isInitialized()}catch($){throw s.setError(U0.no_internet_connection),$}const o=this.getPendingAuthRequest(n);if(!o)throw s.setError(U0.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||Ur.relay;a===Ur.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=O1(c),h={type:zc,receiverPublicKey:c,senderPublicKey:l},d=[],g=[];for(const $ of i){if(!await qM({cacao:$,projectId:this.client.core.projectId})){s.setError(U0.invalid_cacao);const k=ir("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:u,error:k,encodeOpts:h}),new Error(k.message)}s.addTrace($u.cacaos_verified);const{p:_}=$,x=P1(_.resources),A=[P4(_.iss)],T=Yb(_.iss);if(x){const k=WM(x),D=HM(x);d.push(...k),A.push(...D)}for(const k of A)g.push(`${k}:${T}`)}const m=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace($u.create_authenticated_session_topic);let v;if((d==null?void 0:d.length)>0){v={topic:m,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Cn(jd),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:uT([...new Set(d)],[...new Set(g)]),transportType:a},s.addTrace($u.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(m,{transportType:a})}catch($){throw s.setError(U0.subscribe_authenticated_session_topic_failure),$}s.addTrace($u.subscribe_authenticated_session_topic_success),await this.client.session.set(m,v),s.addTrace($u.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace($u.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:n,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch($){throw s.setError(U0.authenticated_session_approve_publish_failure),$}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:v}}),ue(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===Ur.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=O1(o),l={type:zc,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:i,encodeOpts:l,rpcOpts:jn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,ir("USER_DISCONNECTED"))}),ue(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:i}=r;return iB(n,i)}),ue(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),ue(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),ue(this,"deleteSession",async r=>{var n;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,ir("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(jT).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,ir("USER_DISCONNECTED"))}),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=va.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),ue(this,"deleteProposal",async(r,n)=>{if(n)try{const i=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(Tu.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,ir("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),ue(this,"deletePendingSessionRequest",async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=va.idle,this.client.events.emit("session_request_expire",{id:r}))}),ue(this,"deletePendingAuthRequest",async(r,n,i=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])}),ue(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),ue(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,Cn(jn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),ue(this,"setAuthRequest",async(r,n)=>{const{request:i,pairingTopic:s,transportType:o=Ur.relay}=n;this.client.core.expirer.set(r,i.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:r,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),ue(this,"setPendingSessionRequest",async r=>{const{id:n,topic:i,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||Cn(jn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o})}),ue(this,"sendRequest",async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:h}=r,d=es(i,s,c);let g;const m=!!u;try{const _=m?D0:Gl;g=await this.client.core.crypto.encode(n,d,{encoding:_})}catch(_){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),_}let v;if(aIe.includes(i)){const _=xa(JSON.stringify(d)),x=xa(g);v=await this.client.core.verify.register({id:x,decryptedId:_})}const $=jn[i].req;if($.attestation=v,o&&($.ttl=o),a&&($.id=a),this.client.core.history.set(n,d),m){const _=Rw(u,n,g);await global.Linking.openURL(_,this.client.name)}else{const _=jn[i].req;o&&(_.ttl=o),a&&(_.id=a),_.tvf=Vi(ur({},h),{correlationId:d.id}),l?(_.internal=Vi(ur({},_.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,g,_)):this.client.core.relayer.publish(n,g,_).catch(x=>this.client.logger.error(x))}return d.id}),ue(this,"sendResult",async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,l=Eu(n,s);let u;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const m=h?D0:Gl;u=await this.client.core.crypto.encode(i,l,Vi(ur({},a||{}),{encoding:m}))}catch(m){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),m}let d,g;try{d=await this.client.core.history.get(i,n);const m=d.request;try{this.shouldSetTVF(m.method,m.params)&&(g=this.getTVFParams(n,m.params,s))}catch(v){this.client.logger.warn("sendResult() -> getTVFParams() failed",v)}}catch(m){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),m}if(h){const m=Rw(c,i,u);await global.Linking.openURL(m,this.client.name)}else{const m=d.request.method,v=jn[m].res;v.tvf=Vi(ur({},g),{correlationId:n}),o?(v.internal=Vi(ur({},v.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,v)):this.client.core.relayer.publish(i,u,v).catch($=>this.client.logger.error($))}await this.client.core.history.resolve(l)}),ue(this,"sendError",async r=>{const{id:n,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=r,l=Gp(n,s);let u;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=h?D0:Gl;u=await this.client.core.crypto.encode(i,l,Vi(ur({},o||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),g}let d;try{d=await this.client.core.history.get(i,n)}catch(g){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),g}if(h){const g=Rw(c,i,u);await global.Linking.openURL(g,this.client.name)}else{const g=d.request.method,m=a||jn[g].res;this.client.core.relayer.publish(i,u,m)}await this.client.core.history.resolve(l)}),ue(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;Pl(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Pl(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])}),ue(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),ue(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),ue(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===va.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=va.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=va.idle}),ue(this,"processRequest",async r=>{const{topic:n,payload:i,attestation:s,transportType:o,encryptedId:a}=r,c=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,i);case"wc_sessionPing":return await this.onSessionPingRequest(n,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),ue(this,"onRelayEventResponse",async r=>{const{topic:n,payload:i,transportType:s}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),ue(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:i}=ye("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),ue(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ue(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:i,attestation:s,encryptedId:o}=r,{params:a,id:c}=i;try{const l=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(xc.proposal_listener_not_found)),this.isValidConnect(ur({},i.params));const u=a.expiryTimestamp||Cn(jn.wc_sessionPropose.req.ttl),h=ur({id:c,pairingTopic:n,expiryTimestamp:u},a);await this.setProposal(c,h);const d=await this.getVerifyContext({attestationId:s,hash:xa(JSON.stringify(i)),encryptedId:o,metadata:h.proposer.metadata});l==null||l.addTrace(_a.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:h,verifyContext:d})}catch(l){await this.sendError({id:c,topic:n,error:l,rpcOpts:jn.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),ue(this,"onSessionProposeResponse",async(r,n,i)=>{const{id:s}=n;if(Pn(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:r,proposalId:s,publicKey:c});const h=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:r})}else if(ln(n)){await this.client.proposal.delete(s,ir("USER_DISCONNECTED"));const o=Wt("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),ue(this,"onSessionSettleRequest",async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:h,sessionConfig:d}=n.params,g=[...this.pendingSessions.values()].find($=>$.sessionTopic===r);if(!g)return this.client.logger.error(`Pending session not found for topic ${r}`);const m=this.client.proposal.get(g.proposalId),v=Vi(ur(ur(ur({topic:r,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:g.pairingTopic,requiredNamespaces:m.requiredNamespaces,optionalNamespaces:m.optionalNamespaces,controller:a.publicKey,self:{publicKey:g.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),{transportType:Ur.relay});await this.client.session.set(v.topic,v),await this.setExpiry(v.topic,v.expiry),await this.client.core.pairing.updateMetadata({topic:g.pairingTopic,metadata:v.peer.metadata}),this.client.events.emit("session_connect",{session:v}),this.events.emit(Wt("session_connect",g.proposalId),{session:v}),this.pendingSessions.delete(g.proposalId),this.deleteProposal(g.proposalId,!1),this.cleanupDuplicatePairings(v),await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),ue(this,"onSessionSettleResponse",async(r,n)=>{const{id:i}=n;Pn(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Wt("session_approve",i),{})):ln(n)&&(await this.client.session.delete(r,ir("USER_DISCONNECTED")),this.events.emit(Wt("session_approve",i),{error:n.error}))}),ue(this,"onSessionUpdateRequest",async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=L0.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:ir("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(ur({topic:r},i));try{L0.set(o,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(c){throw L0.delete(o),c}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),ue(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),ue(this,"onSessionUpdateResponse",(r,n)=>{const{id:i}=n,s=Wt("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Pn(n)?this.events.emit(Wt("session_update",i),{}):ln(n)&&this.events.emit(Wt("session_update",i),{error:n.error})}),ue(this,"onSessionExtendRequest",async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Cn(jd)),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),ue(this,"onSessionExtendResponse",(r,n)=>{const{id:i}=n,s=Wt("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Pn(n)?this.events.emit(Wt("session_extend",i),{}):ln(n)&&this.events.emit(Wt("session_extend",i),{error:n.error})}),ue(this,"onSessionPingRequest",async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),ue(this,"onSessionPingResponse",(r,n)=>{const{id:i}=n,s=Wt("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);Pn(n)?this.events.emit(Wt("session_ping",i),{}):ln(n)&&this.events.emit(Wt("session_ping",i),{error:n.error})},500)}),ue(this,"onSessionDeleteRequest",async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(Gn.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:ir("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),ue(this,"onSessionRequest",async r=>{var n,i,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=r,{id:h,params:d}=a;try{await this.isValidRequest(ur({topic:o},d));const g=this.client.session.get(o),m=await this.getVerifyContext({attestationId:c,hash:xa(JSON.stringify(es("wc_sessionRequest",d,h))),encryptedId:l,metadata:g.peer.metadata,transportType:u}),v={id:h,topic:o,params:d,verifyContext:m};await this.setPendingSessionRequest(v),u===Ur.link_mode&&(n=g.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=g.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(v):(this.addSessionRequestToSessionRequestQueue(v),this.processSessionRequestQueue())}catch(g){await this.sendError({id:h,topic:o,error:g}),this.client.logger.error(g)}}),ue(this,"onSessionRequestResponse",(r,n)=>{const{id:i}=n,s=Wt("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Pn(n)?this.events.emit(Wt("session_request",i),{result:n.result}):ln(n)&&this.events.emit(Wt("session_request",i),{error:n.error})}),ue(this,"onSessionEventRequest",async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=L0.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(ur({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),L0.set(o,i)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),ue(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Pn(n)?this.events.emit(Wt("session_request",i),{result:n.result}):ln(n)&&this.events.emit(Wt("session_request",i),{error:n.error})}),ue(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:l,authPayload:u,expiryTimestamp:h}=s.params,d=await this.getVerifyContext({attestationId:o,hash:xa(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),g={requester:l,pairingTopic:i,id:s.id,authPayload:u,verifyContext:d,expiryTimestamp:h};await this.setAuthRequest(s.id,{request:g,pairingTopic:i,transportType:c}),c===Ur.link_mode&&(n=l.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:d})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),d=this.getAppLinkIfEnabled(s.params.requester.metadata,c),g={type:zc,receiverPublicKey:u,senderPublicKey:h};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:g,rpcOpts:jn.wc_sessionAuthenticate.autoReject,appLink:d})}}),ue(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),ue(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=va.idle,this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay))}),ue(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=Wt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Wt("session_request",s.request.id),{error:n})})}),ue(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===va.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=va.active,this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),ue(this,"emitSessionRequest",r=>{this.client.events.emit("session_request",r)}),ue(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:es("wc_sessionPropose",Vi(ur({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id)})}),ue(this,"isValidConnect",async r=>{if(!gs(r)){const{message:l}=ye("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(l)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=r;if(gi(n)||await this.isValidPairingTopic(n),!i3e(c)){const{message:l}=ye("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!gi(i)&&Rm(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!gi(s)&&Rm(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),gi(o)||this.validateSessionProps(o,"sessionProperties"),!gi(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),ue(this,"validateNamespaces",(r,n)=>{const i=n3e(r,"connect()",n);if(i)throw new Error(i.message)}),ue(this,"isValidApprove",async r=>{if(!gs(r))throw new Error(ye("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),l=P_(i,"approve()");if(l)throw new Error(l.message);const u=fT(c.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!En(s,!0)){const{message:h}=ye("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(h)}if(gi(o)||this.validateSessionProps(o,"sessionProperties"),!gi(a)){this.validateSessionProps(a,"scopedProperties");const h=new Set(Object.keys(i));if(!Object.keys(a).every(d=>h.has(d)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(h).join(", ")}`)}}),ue(this,"isValidReject",async r=>{if(!gs(r)){const{message:s}=ye("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!o3e(i)){const{message:s}=ye("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),ue(this,"isValidSessionSettleRequest",r=>{if(!gs(r)){const{message:l}=ye("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!EB(n)){const{message:l}=ye("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=Z_e(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=P_(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Pl(o)){const{message:l}=ye("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),ue(this,"isValidUpdate",async r=>{if(!gs(r)){const{message:c}=ye("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=P_(i,"update()");if(o)throw new Error(o.message);const a=fT(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),ue(this,"isValidExtend",async r=>{if(!gs(r)){const{message:i}=ye("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),ue(this,"isValidRequest",async r=>{if(!gs(r)){const{message:c}=ye("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!dT(a,s)){const{message:c}=ye("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!a3e(i)){const{message:c}=ye("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!u3e(a,s,i.method)){const{message:c}=ye("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!p3e(o,U_)){const{message:c}=ye("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${U_.min} and ${U_.max}`);throw new Error(c)}}),ue(this,"isValidRespond",async r=>{var n;if(!gs(r)){const{message:o}=ye("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(o){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!c3e(s)){const{message:o}=ye("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),ue(this,"isValidPing",async r=>{if(!gs(r)){const{message:i}=ye("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),ue(this,"isValidEmit",async r=>{if(!gs(r)){const{message:a}=ye("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!dT(o,s)){const{message:a}=ye("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!l3e(i)){const{message:a}=ye("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!h3e(o,s,i.name)){const{message:a}=ye("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),ue(this,"isValidDisconnect",async r=>{if(!gs(r)){const{message:i}=ye("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),ue(this,"isValidAuthenticate",r=>{const{chains:n,uri:i,domain:s,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!En(i,!1))throw new Error("uri is required parameter");if(!En(s,!1))throw new Error("domain is required parameter");if(!En(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>Gf(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Gf(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ue(this,"getVerifyContext",async r=>{const{attestationId:n,hash:i,encryptedId:s,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||Cg,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Ur.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),ue(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((i,s)=>{if(i==null){const{message:o}=ye("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${i} for key ${Object.keys(r)[s]}`);throw new Error(o)}})}),ue(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),ue(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),ue(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:i}=ye("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}}),ue(this,"isLinkModeEnabled",(r,n)=>{var i,s,o,a,c,l,u,h,d;return!r||n!==Ur.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=r==null?void 0:r.redirect)==null?void 0:u.universal)!==void 0&&((h=r==null?void 0:r.redirect)==null?void 0:h.universal)!==""&&((d=r==null?void 0:r.redirect)==null?void 0:d.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),ue(this,"getAppLinkIfEnabled",(r,n)=>{var i;return this.isLinkModeEnabled(r,n)?(i=r==null?void 0:r.redirect)==null?void 0:i.universal:void 0}),ue(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=kM(r,"topic")||"",i=decodeURIComponent(kM(r,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:Ur.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})}),ue(this,"registerLinkModeListeners",async()=>{var r;if(_5()||_u()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),ue(this,"shouldSetTVF",(r,n)=>{if(!n||r!=="wc_sessionRequest")return!1;const{request:i}=n;return Object.keys(zT).includes(i.method)}),ue(this,"getTVFParams",(r,n,i)=>{var s,o;try{const a=n.request.method,c=this.extractTxHashesFromResult(a,i);return Vi(ur({correlationId:r,rpcMethods:[a],chainId:n.chainId},this.isValidContractData(n.request.params)&&{contractAddresses:[(o=(s=n.request.params)==null?void 0:s[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),ue(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const i=(r==null?void 0:r.data)||((n=r==null?void 0:r[0])==null?void 0:n.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),ue(this,"extractTxHashesFromResult",(r,n)=>{try{const i=zT[r];if(typeof n=="string")return[n];const s=n[i.key];if(Uh(s))return r==="solana_signAllTransactions"?s.map(o=>hEe(o)):s;if(typeof s=="string")return[s]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,i]of Object.entries(r))for(const s of i)try{await this.onProviderMessageEvent({topic:n,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${s}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Gn.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(R1)?this.client.auth.authKeys.get(R1):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:s===Ur.link_mode?D0:Gl});Yp(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:i,transportType:s,encryptedId:xa(n)})):Xh(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s}),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(yo.expired,async e=>{const{topic:r,id:n}=YL(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,ye("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,ye("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Gu.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Gu.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!En(e,!1)){const{message:r}=ye("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=ye("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Pl(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=ye("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!En(e,!1)){const{message:r}=ye("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=ye("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Pl(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=ye("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=ye("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(En(e,!1)){const{message:r}=ye("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=ye("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!s3e(e)){const{message:r}=ye("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=ye("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Pl(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=ye("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class bIe extends od{constructor(e,r){super(e,r,nIe,$5),this.core=e,this.logger=r}}let vIe=class extends od{constructor(e,r){super(e,r,iIe,$5),this.core=e,this.logger=r}};class EIe extends od{constructor(e,r){super(e,r,oIe,$5,n=>n.id),this.core=e,this.logger=r}}class _Ie extends od{constructor(e,r){super(e,r,uIe,v2,()=>R1),this.core=e,this.logger=r}}class SIe extends od{constructor(e,r){super(e,r,hIe,v2),this.core=e,this.logger=r}}class xIe extends od{constructor(e,r){super(e,r,dIe,v2,n=>n.id),this.core=e,this.logger=r}}var IIe=Object.defineProperty,AIe=(t,e,r)=>e in t?IIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,j_=(t,e,r)=>AIe(t,typeof e!="symbol"?e+"":e,r);class CIe{constructor(e,r){this.core=e,this.logger=r,j_(this,"authKeys"),j_(this,"pairingTopics"),j_(this,"requests"),this.authKeys=new _Ie(this.core,this.logger),this.pairingTopics=new SIe(this.core,this.logger),this.requests=new xIe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var NIe=Object.defineProperty,MIe=(t,e,r)=>e in t?NIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,St=(t,e,r)=>MIe(t,typeof e!="symbol"?e+"":e,r);let TIe=class FB extends Nbe{constructor(e){super(e),St(this,"protocol",BB),St(this,"version",UB),St(this,"name",B_.name),St(this,"metadata"),St(this,"core"),St(this,"logger"),St(this,"events",new Rn.EventEmitter),St(this,"engine"),St(this,"session"),St(this,"proposal"),St(this,"pendingRequest"),St(this,"auth"),St(this,"signConfig"),St(this,"on",(n,i)=>this.events.on(n,i)),St(this,"once",(n,i)=>this.events.once(n,i)),St(this,"off",(n,i)=>this.events.off(n,i)),St(this,"removeListener",(n,i)=>this.events.removeListener(n,i)),St(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),St(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"update",async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"request",async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"find",n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),St(this,"authenticate",async(n,i)=>{try{return await this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}}),St(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),St(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),this.name=(e==null?void 0:e.name)||B_.name,this.metadata=(e==null?void 0:e.metadata)||KL(),this.signConfig=e==null?void 0:e.signConfig;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:wu(tl({level:(e==null?void 0:e.logger)||B_.logger}));this.core=(e==null?void 0:e.core)||new rIe(e),this.logger=Kt(r,this.name),this.session=new vIe(this.core,this.logger),this.proposal=new bIe(this.core,this.logger),this.pendingRequest=new EIe(this.core,this.logger),this.engine=new wIe(this),this.auth=new CIe(this.core,this.logger)}static async init(e){const r=new FB(e);return await r.initialize(),r}get context(){return hr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},J.toMiliseconds(J.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const WT="error",$Ie="wss://relay.walletconnect.org",PIe="wc",OIe="universal_provider",Lw=`${PIe}@2:${OIe}:`,zB="https://rpc.walletconnect.org/v1/",df="generic",kIe=`${zB}bundler`,ko={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function RIe(){}function P5(t){return t==null||typeof t!="object"&&typeof t!="function"}function O5(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function DIe(t){if(P5(t))return t;if(Array.isArray(t)||O5(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function HT(t){return typeof t=="object"&&t!==null}function qB(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function WB(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const LIe="[object RegExp]",HB="[object String]",KB="[object Number]",VB="[object Boolean]",GB="[object Arguments]",BIe="[object Symbol]",UIe="[object Date]",jIe="[object Map]",FIe="[object Set]",zIe="[object Array]",qIe="[object ArrayBuffer]",WIe="[object Object]",HIe="[object DataView]",KIe="[object Uint8Array]",VIe="[object Uint8ClampedArray]",GIe="[object Uint16Array]",YIe="[object Uint32Array]",QIe="[object Int8Array]",ZIe="[object Int16Array]",JIe="[object Int32Array]",XIe="[object Float32Array]",e5e="[object Float64Array]";function t5e(t,e){return kf(t,void 0,t,new Map,e)}function kf(t,e,r,n=new Map,i=void 0){const s=i==null?void 0:i(t,e,r,n);if(s!=null)return s;if(P5(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=kf(t[a],a,r,n,i);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,c]of t)o.set(a,kf(c,a,r,n,i));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add(kf(a,void 0,r,n,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(O5(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=kf(t[a],a,r,n,i);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),Yu(o,t,r,n,i),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),Yu(o,t,r,n,i),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),Yu(o,t,r,n,i),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Yu(o,t,r,n,i),o}if(typeof t=="object"&&r5e(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),Yu(o,t,r,n,i),o}return t}function Yu(t,e,r=t,n,i){const s=[...Object.keys(e),...qB(e)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=kf(e[a],a,r,n,i))}}function r5e(t){switch(WB(t)){case GB:case zIe:case qIe:case HIe:case VB:case UIe:case XIe:case e5e:case QIe:case ZIe:case JIe:case jIe:case KB:case WIe:case LIe:case FIe:case HB:case BIe:case KIe:case VIe:case GIe:case YIe:return!0;default:return!1}}function n5e(t,e){return t5e(t,(r,n,i,s)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case KB:case HB:case VB:{const o=new t.constructor(t==null?void 0:t.valueOf());return Yu(o,t),o}case GB:{const o={};return Yu(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function KT(t){return n5e(t)}function VT(t){return t!==null&&typeof t=="object"&&WB(t)==="[object Arguments]"}function i5e(t){return O5(t)}function s5e(t){var r;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!((r=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&r.writable)?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function o5e(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let i=t;for(let s=0;s<r.length;s++){const o=r[s];i=Z4(i,o,n,new Map)}return i}function Z4(t,e,r,n){if(P5(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return DIe(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]=e[s]??void 0}const i=[...Object.keys(e),...qB(e)];for(let s=0;s<i.length;s++){const o=i[s];let a=e[o],c=t[o];if(VT(a)&&(a={...a}),VT(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=KT(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],h=Reflect.ownKeys(c);for(let d=0;d<h.length;d++){const g=h[d];u[g]=c[g]}c=u}else c=[];const l=r(c,a,o,t,e,n);l!=null?t[o]=l:Array.isArray(a)||HT(c)&&HT(a)?t[o]=Z4(c,a,r,n):c==null&&s5e(a)?t[o]=Z4({},a,r,n):c==null&&i5e(a)?t[o]=KT(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function a5e(t,...e){return o5e(t,...e,RIe)}var c5e=Object.defineProperty,l5e=Object.defineProperties,u5e=Object.getOwnPropertyDescriptors,GT=Object.getOwnPropertySymbols,h5e=Object.prototype.hasOwnProperty,d5e=Object.prototype.propertyIsEnumerable,YT=(t,e,r)=>e in t?c5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bw=(t,e)=>{for(var r in e||(e={}))h5e.call(e,r)&&YT(t,r,e[r]);if(GT)for(var r of GT(e))d5e.call(e,r)&&YT(t,r,e[r]);return t},f5e=(t,e)=>l5e(t,u5e(e));function Qs(t,e,r){var n;const i=Gf(t);return((n=e.rpcMap)==null?void 0:n[i.reference])||`${zB}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function ad(t){return t.includes(":")?t.split(":")[1]:t}function YB(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function p5e(t,e){const r=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!r.length)return[];const n=[];return r.forEach(i=>{const s=e.namespaces[i].accounts;n.push(...s)}),n}function F_(t={},e={}){const r=QT(t),n=QT(e);return a5e(r,n)}function QT(t){var e,r,n,i;const s={};if(!Rm(t))return s;for(const[o,a]of Object.entries(t)){const c=M5(o)?[o]:a.chains,l=a.methods||[],u=a.events||[],h=a.rpcMap||{},d=og(o);s[d]=f5e(Bw(Bw({},s[d]),a),{chains:$1(c,(e=s[d])==null?void 0:e.chains),methods:$1(l,(r=s[d])==null?void 0:r.methods),events:$1(u,(n=s[d])==null?void 0:n.events),rpcMap:Bw(Bw({},h),(i=s[d])==null?void 0:i.rpcMap)})}return s}function g5e(t){return t.includes(":")?t.split(":")[2]:t}function ZT(t){const e={};for(const[r,n]of Object.entries(t)){const i=n.methods||[],s=n.events||[],o=n.accounts||[],a=M5(r)?[r]:n.chains?n.chains:YB(n.accounts);e[r]={chains:a,methods:i,events:s,accounts:o}}return e}function z_(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const QB={},Rt=t=>QB[t],q_=(t,e)=>{QB[t]=e};var m5e=Object.defineProperty,y5e=(t,e,r)=>e in t?m5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fd=(t,e,r)=>y5e(t,typeof e!="symbol"?e+"":e,r);class w5e{constructor(e){Fd(this,"name","polkadot"),Fd(this,"client"),Fd(this,"httpProviders"),Fd(this,"events"),Fd(this,"namespace"),Fd(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=ad(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Rt("disableProviderPing")))}}var b5e=Object.defineProperty,v5e=Object.defineProperties,E5e=Object.getOwnPropertyDescriptors,JT=Object.getOwnPropertySymbols,_5e=Object.prototype.hasOwnProperty,S5e=Object.prototype.propertyIsEnumerable,J4=(t,e,r)=>e in t?b5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,XT=(t,e)=>{for(var r in e||(e={}))_5e.call(e,r)&&J4(t,r,e[r]);if(JT)for(var r of JT(e))S5e.call(e,r)&&J4(t,r,e[r]);return t},e$=(t,e)=>v5e(t,E5e(e)),zd=(t,e,r)=>J4(t,typeof e!="symbol"?e+"":e,r);class x5e{constructor(e){zd(this,"name","eip155"),zd(this,"client"),zd(this,"chainId"),zd(this,"namespace"),zd(this,"httpProviders"),zd(this,"events"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||Qs(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Rt("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=parseInt(ad(r));e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let i=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,i;const s=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0];if(!s)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),a=((i=o==null?void 0:o.sessionProperties)==null?void 0:i.capabilities)||{};if(a!=null&&a[s])return a==null?void 0:a[s];const c=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:e$(XT({},o.sessionProperties||{}),{capabilities:e$(XT({},a||{}),{[s]:c})})})}catch(l){console.warn("Failed to update session with capabilities",l)}return c}async getCallStatus(e){var r,n;const i=this.client.session.get(e.topic),s=(r=i.sessionProperties)==null?void 0:r.bundler_name;if(s){const a=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(n=i.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(es("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,r){return`${kIe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var I5e=Object.defineProperty,A5e=(t,e,r)=>e in t?I5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qd=(t,e,r)=>A5e(t,typeof e!="symbol"?e+"":e,r);class C5e{constructor(e){qd(this,"name","solana"),qd(this,"client"),qd(this,"httpProviders"),qd(this,"events"),qd(this,"namespace"),qd(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=ad(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Rt("disableProviderPing")))}}var N5e=Object.defineProperty,M5e=(t,e,r)=>e in t?N5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Wd=(t,e,r)=>M5e(t,typeof e!="symbol"?e+"":e,r);class T5e{constructor(e){Wd(this,"name","cosmos"),Wd(this,"client"),Wd(this,"httpProviders"),Wd(this,"events"),Wd(this,"namespace"),Wd(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=ad(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Rt("disableProviderPing")))}}var $5e=Object.defineProperty,P5e=(t,e,r)=>e in t?$5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Hd=(t,e,r)=>P5e(t,typeof e!="symbol"?e+"":e,r);class O5e{constructor(e){Hd(this,"name","algorand"),Hd(this,"client"),Hd(this,"httpProviders"),Hd(this,"events"),Hd(this,"namespace"),Hd(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||Qs(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Vr(new hn(n,Rt("disableProviderPing")))}}var k5e=Object.defineProperty,R5e=(t,e,r)=>e in t?k5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Kd=(t,e,r)=>R5e(t,typeof e!="symbol"?e+"":e,r);class D5e{constructor(e){Kd(this,"name","cip34"),Kd(this,"client"),Kd(this,"httpProviders"),Kd(this,"events"),Kd(this,"namespace"),Kd(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),i=ad(r);e[i]=this.createHttpProvider(i,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Rt("disableProviderPing")))}}var L5e=Object.defineProperty,B5e=(t,e,r)=>e in t?L5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vd=(t,e,r)=>B5e(t,typeof e!="symbol"?e+"":e,r);class U5e{constructor(e){Vd(this,"name","elrond"),Vd(this,"client"),Vd(this,"httpProviders"),Vd(this,"events"),Vd(this,"namespace"),Vd(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=ad(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Rt("disableProviderPing")))}}var j5e=Object.defineProperty,F5e=(t,e,r)=>e in t?j5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Gd=(t,e,r)=>F5e(t,typeof e!="symbol"?e+"":e,r);class z5e{constructor(e){Gd(this,"name","multiversx"),Gd(this,"client"),Gd(this,"httpProviders"),Gd(this,"events"),Gd(this,"namespace"),Gd(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=ad(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Rt("disableProviderPing")))}}var q5e=Object.defineProperty,W5e=(t,e,r)=>e in t?q5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yd=(t,e,r)=>W5e(t,typeof e!="symbol"?e+"":e,r);class H5e{constructor(e){Yd(this,"name","near"),Yd(this,"client"),Yd(this,"httpProviders"),Yd(this,"events"),Yd(this,"namespace"),Yd(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Qs(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace);return typeof n>"u"?void 0:new Vr(new hn(n,Rt("disableProviderPing")))}}var K5e=Object.defineProperty,V5e=(t,e,r)=>e in t?K5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qd=(t,e,r)=>V5e(t,typeof e!="symbol"?e+"":e,r);class G5e{constructor(e){Qd(this,"name","tezos"),Qd(this,"client"),Qd(this,"httpProviders"),Qd(this,"events"),Qd(this,"namespace"),Qd(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Qs(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace);return typeof n>"u"?void 0:new Vr(new hn(n))}}var Y5e=Object.defineProperty,Q5e=(t,e,r)=>e in t?Y5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zd=(t,e,r)=>Q5e(t,typeof e!="symbol"?e+"":e,r);class Z5e{constructor(e){Zd(this,"name",df),Zd(this,"client"),Zd(this,"httpProviders"),Zd(this,"events"),Zd(this,"namespace"),Zd(this,"chainId"),this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ko.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(i=>{const s=Gf(i);n[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Qs(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vr(new hn(n,Rt("disableProviderPing")))}}var J5e=Object.defineProperty,X5e=Object.defineProperties,e6e=Object.getOwnPropertyDescriptors,t$=Object.getOwnPropertySymbols,t6e=Object.prototype.hasOwnProperty,r6e=Object.prototype.propertyIsEnumerable,X4=(t,e,r)=>e in t?J5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Uw=(t,e)=>{for(var r in e||(e={}))t6e.call(e,r)&&X4(t,r,e[r]);if(t$)for(var r of t$(e))r6e.call(e,r)&&X4(t,r,e[r]);return t},W_=(t,e)=>X5e(t,e6e(e)),po=(t,e,r)=>X4(t,typeof e!="symbol"?e+"":e,r);let n6e=class ZB{constructor(e){po(this,"client"),po(this,"namespaces"),po(this,"optionalNamespaces"),po(this,"sessionProperties"),po(this,"scopedProperties"),po(this,"events",new Dp),po(this,"rpcProviders",{}),po(this,"session"),po(this,"providerOpts"),po(this,"logger"),po(this,"uri"),po(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:wu(tl({level:(e==null?void 0:e.logger)||WT})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new ZB(e);return await r.initialize(),r}async request(e,r,n){const[i,s]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:Uw({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,i){const s=new Date().getTime();this.request(e,n,i).then(o=>r(null,Eu(s,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:ir("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:i}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const s=await i();if(this.session=s.session,this.session){const o=ZT(this.session.namespaces);this.namespaces=F_(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const i=await n();this.session=i;const s=ZT(i.namespaces);return this.namespaces=F_(this.namespaces,s),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,i]=this.validateChain(e),s=this.getProvider(n);s.name===df?s.setDefaultChain(`${n}:${i}`,r):s.setDefaultChain(i,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Uh(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await TIe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||WT,relayUrl:this.providerOpts.relayUrl||$Ie,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error("Failed to get session",n),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>og(r)))];q_("client",this.client),q_("events",this.events),q_("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=p5e(r,this.session),i=YB(n),s=F_(this.namespaces,this.optionalNamespaces),o=W_(Uw({},s[r]),{accounts:n,chains:i});switch(r){case"eip155":this.rpcProviders[r]=new x5e({namespace:o});break;case"algorand":this.rpcProviders[r]=new O5e({namespace:o});break;case"solana":this.rpcProviders[r]=new C5e({namespace:o});break;case"cosmos":this.rpcProviders[r]=new T5e({namespace:o});break;case"polkadot":this.rpcProviders[r]=new w5e({namespace:o});break;case"cip34":this.rpcProviders[r]=new D5e({namespace:o});break;case"elrond":this.rpcProviders[r]=new U5e({namespace:o});break;case"multiversx":this.rpcProviders[r]=new z5e({namespace:o});break;case"near":this.rpcProviders[r]=new H5e({namespace:o});break;case"tezos":this.rpcProviders[r]=new G5e({namespace:o});break;default:this.rpcProviders[df]?this.rpcProviders[df].updateNamespace(o):this.rpcProviders[df]=new Z5e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:i}=e;if(i!==((r=this.session)==null?void 0:r.topic))return;const{event:s}=n;if(s.name==="accountsChanged"){const o=s.data;o&&Uh(o)&&this.events.emit("accountsChanged",o.map(g5e))}else if(s.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=og(o),l=z_(o)!==z_(a)?`${c}:${z_(a)}`:o;this.onChainChanged(l)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,i;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:s}=r,o=(i=this.client)==null?void 0:i.session.get(e);this.session=W_(Uw({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",W_(Uw({},ir("USER_DISCONNECTED")),{data:e.topic})))}),this.on(ko.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[df]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:n,sessionProperties:i,scopedProperties:s}=e;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=i,this.scopedProperties=s}validateChain(e){const[r,n]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>og(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const i=og(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,i]=this.validateChain(e);i&&(r||this.getProvider(n).setDefaultChain(i),this.namespaces[n]?this.namespaces[n].defaultChain=i:this.namespaces[`${n}:${i}`]?this.namespaces[`${n}:${i}`].defaultChain=i:this.namespaces[`${n}:${i}`]={defaultChain:i},this.events.emit("chainChanged",i),await this.persist("namespaces",this.namespaces))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const i=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${Lw}/${e}${i}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${Lw}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${Lw}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(Lw)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn("Failed to cleanup storage",r)}}};const xl={EIP155:"eip155",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED"},Jb={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Ue.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Ue.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Ue.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Ue.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Ue.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Ue.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Ue.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Ue.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Ue.CONNECTOR_ID.COINBASE]:"Coinbase",[Ue.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Ue.CONNECTOR_ID.LEDGER]:"Ledger",[Ue.CONNECTOR_ID.SAFE]:"Safe"}},JB={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([r,n])=>{e[`${xl.EIP155}:${r}`]=n}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},jw={UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${i6e()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},SOCIALS_TIMEOUT:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function i6e(){return typeof window<"u"}const s6e={createLogger(t,e="error"){const r=tl({level:e}),{logger:n}=LI({opts:r});return n.error=(...i)=>{for(const s of i)if(s instanceof Error){t(s,...i);return}t(void 0,...i)},n}},o6e="rpc.walletconnect.org";function a6e(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()}const H_=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],ff={extendRpcUrlWithProjectId(t,e){let r=!1;try{r=new URL(t).host===o6e}catch{r=!1}if(r){const n=new URL(t);return n.searchParams.has("projectId")||n.searchParams.set("projectId",e),n.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:Ue.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${Ue.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,r){var i,s,o;const n=(o=(s=(i=t.rpcUrls)==null?void 0:i.default)==null?void 0:s.http)==null?void 0:o[0];return H_.includes(e)?a6e(e,r):n||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){var d,g,m,v,$;const i=this.getChainNamespace(t),s=this.getCaipNetworkId(t),o=(d=t.rpcUrls.default.http)==null?void 0:d[0],a=this.getDefaultRpcUrl(t,s,r),c=((v=(m=(g=t==null?void 0:t.rpcUrls)==null?void 0:g.chainDefault)==null?void 0:m.http)==null?void 0:v[0])||o,l=(($=n==null?void 0:n[s])==null?void 0:$.map(_=>_.url))||[],u=[...l,a],h=[...l];return c&&!h.includes(c)&&h.push(c),{...t,chainNamespace:i,caipNetworkId:s,assets:{imageId:Jb.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:h}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){return t.map(i=>ff.extendCaipNetwork(i,{customNetworkImageUrls:e,customRpcUrls:n,projectId:r}))},getViemTransport(t,e,r){const n=[];if(r==null||r.forEach(i=>{n.push(__(i.url,i.config))}),H_.includes(t.caipNetworkId)){const i=this.getDefaultRpcUrl(t,t.caipNetworkId,e);n.push(__(i,{fetchOptions:{headers:{"Content-Type":"text/plain"}}}))}return yM(n)},extendWagmiTransports(t,e,r){if(H_.includes(t.caipNetworkId)){const n=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return yM([r,__(n)])}return r},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:Ue.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Oe.getActiveCaipNetworkId(),r=Y.getAllRequestedCaipNetworks(),n=Array.from(((c=Y.state.chains)==null?void 0:c.keys())||[]),i=e==null?void 0:e.split(":")[0],s=i?n.includes(i):!1,o=r==null?void 0:r.find(l=>l.caipNetworkId===e);return s&&!o&&e?this.getUnsupportedNetwork(e):o||t||(r==null?void 0:r[0])}},Xb={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},hs=nn({providers:{...Xb},providerIds:{...Xb}}),Qr={state:hs,subscribeKey(t,e){return no(hs,t,e)},subscribe(t){return ns(hs,()=>{t(hs)})},subscribeProviders(t){return ns(hs.providers,()=>t(hs.providers))},setProvider(t,e){e&&(hs.providers[t]=Rh(e))},getProvider(t){return hs.providers[t]},setProviderId(t,e){e&&(hs.providerIds[t]=e)},getProviderId(t){if(t)return hs.providerIds[t]},reset(){hs.providers={...Xb},hs.providerIds={...Xb}},resetChain(t){hs.providers[t]=void 0,hs.providerIds[t]=void 0}},c6e={VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},ex={filterOutDuplicatesByRDNS(t){const e=ge.state.enableEIP6963?ut.state.connectors:[],r=Oe.getRecentWallets(),n=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),i=r.map(a=>a.rdns).filter(Boolean),s=n.concat(i);if(s.includes("io.metamask.mobile")&&dt.isMobile()){const a=s.indexOf("io.metamask.mobile");s[a]="io.metamask"}return t.filter(a=>!s.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=ut.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),r=Oe.getRecentWallets(),n=e.map(a=>a.explorerId),i=r.map(a=>a.id),s=n.concat(i);return t.filter(a=>!s.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=ut.state,r=e.filter(s=>s.type==="ANNOUNCED").reduce((s,o)=>{var a;return(a=o.info)!=null&&a.rdns&&(s[o.info.rdns]=!0),s},{});return t.map(s=>({...s,installed:!!s.rdns&&!!r[s.rdns??""]})).sort((s,o)=>Number(o.installed)-Number(s.installed))},getConnectOrderMethod(t,e){var c;const r=(t==null?void 0:t.connectMethodsOrder)||((c=ge.state.features)==null?void 0:c.connectMethodsOrder),n=e||ut.state.connectors;if(r)return r;const{injected:i,announced:s}=D1.getConnectorsByType(n,pt.state.recommended,pt.state.featured),o=i.filter(D1.showConnector),a=s.filter(D1.showConnector);return o.length||a.length?["wallet","email","social"]:c6e.DEFAULT_CONNECT_METHOD_ORDER}},D1={getConnectorsByType(t,e,r){const{customWallets:n}=ge.state,i=Oe.getRecentWallets(),s=ex.filterOutDuplicateWallets(e),o=ex.filterOutDuplicateWallets(r),a=t.filter(h=>h.type==="MULTI_CHAIN"),c=t.filter(h=>h.type==="ANNOUNCED"),l=t.filter(h=>h.type==="INJECTED"),u=t.filter(h=>h.type==="EXTERNAL");return{custom:n,recent:i,external:u,multiChain:a,announced:c,injected:l,recommended:s,featured:o}},showConnector(t){var i;const e=(i=t.info)==null?void 0:i.rdns,r=!!e&&pt.state.excludedWallets.some(s=>s.rdns===e),n=!!t.name&&pt.state.excludedWallets.some(s=>JB.isLowerCaseMatch(s.name,t.name));return!(t.type==="INJECTED"&&(!dt.isMobile()&&t.name==="Browser Wallet"||!e&&!Er.checkInstalled()||r||n)||t.type==="ANNOUNCED"&&(r||n))},getIsConnectedWithWC(){return Array.from(Y.state.chains.values()).some(r=>ut.getConnectorId(r.namespace)===Ue.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:r,recent:n,announced:i,injected:s,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=ge.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=D1.getIsConnectedWithWC(),g=[{type:"walletConnect",isEnabled:ge.state.enableWalletConnect&&!u},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...s,...i,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(_=>_.isEnabled),m=new Set(g.map(_=>_.type)),v=c.filter(_=>m.has(_)).map(_=>({type:_,isEnabled:!0})),$=g.filter(({type:_})=>!v.some(({type:A})=>A===_));return Array.from(new Set([...v,...$].map(({type:_})=>_)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const L1=globalThis,k5=L1.ShadowRoot&&(L1.ShadyCSS===void 0||L1.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,R5=Symbol(),r$=new WeakMap;let XB=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==R5)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(k5&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=r$.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&r$.set(r,e))}return e}toString(){return this.cssText}};const go=t=>new XB(typeof t=="string"?t:t+"",void 0,R5),Yf=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new XB(r,t,R5)},l6e=(t,e)=>{if(k5)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of e){const n=document.createElement("style"),i=L1.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)}},n$=k5?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return go(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:u6e,defineProperty:h6e,getOwnPropertyDescriptor:d6e,getOwnPropertyNames:f6e,getOwnPropertySymbols:p6e,getPrototypeOf:g6e}=Object,ou=globalThis,i$=ou.trustedTypes,m6e=i$?i$.emptyScript:"",K_=ou.reactiveElementPolyfillSupport,Mg=(t,e)=>t,tx={toAttribute(t,e){switch(e){case Boolean:t=t?m6e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},eU=(t,e)=>!u6e(t,e),s$={attribute:!0,type:String,converter:tx,reflect:!1,useDefault:!1,hasChanged:eU};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),ou.litPropertyMetadata??(ou.litPropertyMetadata=new WeakMap);let pf=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=s$){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),i=this.getPropertyDescriptor(e,n,r);i!==void 0&&h6e(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){const{get:i,set:s}=d6e(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get:i,set(o){const a=i==null?void 0:i.call(this);s==null||s.call(this,o),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??s$}static _$Ei(){if(this.hasOwnProperty(Mg("elementProperties")))return;const e=g6e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Mg("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Mg("properties"))){const r=this.properties,n=[...f6e(r),...p6e(r)];for(const i of n)this.createProperty(i,r[i])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,i]of r)this.elementProperties.set(n,i)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const i=this._$Eu(r,n);i!==void 0&&this._$Eh.set(i,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(n$(i))}else e!==void 0&&r.push(n$(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(r=>r(this))}addController(e){var r;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)==null||r.call(e))}removeController(e){var r;(r=this._$EO)==null||r.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return l6e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostConnected)==null?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostDisconnected)==null?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$ET(e,r){var s;const n=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,n);if(i!==void 0&&n.reflect===!0){const o=(((s=n.converter)==null?void 0:s.toAttribute)!==void 0?n.converter:tx).toAttribute(r,n.type);this._$Em=e,o==null?this.removeAttribute(i):this.setAttribute(i,o),this._$Em=null}}_$AK(e,r){var s,o;const n=this.constructor,i=n._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const a=n.getPropertyOptions(i),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((s=a.converter)==null?void 0:s.fromAttribute)!==void 0?a.converter:tx;this._$Em=i;const l=c.fromAttribute(r,a.type);this[i]=l??((o=this._$Ej)==null?void 0:o.get(i))??l,this._$Em=null}}requestUpdate(e,r,n,i=!1,s){var o;if(e!==void 0){const a=this.constructor;if(i===!1&&(s=this[e]),n??(n=a.getPropertyOptions(e)),!((n.hasChanged??eU)(s,r)||n.useDefault&&n.reflect&&s===((o=this._$Ej)==null?void 0:o.get(e))&&!this.hasAttribute(a._$Eu(e,n))))return;this.C(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:n,reflect:i,wrapped:s},o){n&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??r??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(r=void 0),this._$AL.set(e,r)),i===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var n;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[s,o]of i){const{wrapped:a}=o,c=this[s];a!==!0||this._$AL.has(s)||c===void 0||this.C(s,void 0,o,c)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),(n=this._$EO)==null||n.forEach(i=>{var s;return(s=i.hostUpdate)==null?void 0:s.call(i)}),this.update(r)):this._$EM()}catch(i){throw e=!1,this._$EM(),i}e&&this._$AE(r)}willUpdate(e){}_$AE(e){var r;(r=this._$EO)==null||r.forEach(n=>{var i;return(i=n.hostUpdated)==null?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(r=>this._$ET(r,this[r]))),this._$EM()}updated(e){}firstUpdated(e){}};pf.elementStyles=[],pf.shadowRootOptions={mode:"open"},pf[Mg("elementProperties")]=new Map,pf[Mg("finalized")]=new Map,K_==null||K_({ReactiveElement:pf}),(ou.reactiveElementVersions??(ou.reactiveElementVersions=[])).push("2.1.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Tg=globalThis,o$=t=>t,ev=Tg.trustedTypes,a$=ev?ev.createPolicy("lit-html",{createHTML:t=>t}):void 0,tU="$lit$",Dl=`lit$${Math.random().toFixed(9).slice(2)}$`,rU="?"+Dl,y6e=`<${rU}>`,jh=document,Dm=()=>jh.createComment(""),Lm=t=>t===null||typeof t!="object"&&typeof t!="function",D5=Array.isArray,w6e=t=>D5(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",V_=`[ 	
\f\r]`,z0=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,c$=/-->/g,l$=/>/g,Pu=RegExp(`>|${V_}(?:([^\\s"'>=/]+)(${V_}*=${V_}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),u$=/'/g,h$=/"/g,nU=/^(?:script|style|textarea|title)$/i,iU=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),ACe=iU(1),CCe=iU(2),Cp=Symbol.for("lit-noChange"),Yn=Symbol.for("lit-nothing"),d$=new WeakMap,hh=jh.createTreeWalker(jh,129);function sU(t,e){if(!D5(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return a$!==void 0?a$.createHTML(e):e}const b6e=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":e===3?"<math>":"",o=z0;for(let a=0;a<r;a++){const c=t[a];let l,u,h=-1,d=0;for(;d<c.length&&(o.lastIndex=d,u=o.exec(c),u!==null);)d=o.lastIndex,o===z0?u[1]==="!--"?o=c$:u[1]!==void 0?o=l$:u[2]!==void 0?(nU.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=Pu):u[3]!==void 0&&(o=Pu):o===Pu?u[0]===">"?(o=i??z0,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Pu:u[3]==='"'?h$:u$):o===h$||o===u$?o=Pu:o===c$||o===l$?o=z0:(o=Pu,i=void 0);const g=o===Pu&&t[a+1].startsWith("/>")?" ":"";s+=o===z0?c+y6e:h>=0?(n.push(l),c.slice(0,h)+tU+c.slice(h)+Dl+g):c+Dl+(h===-2?a:g)}return[sU(t,s+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class Bm{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[l,u]=b6e(e,r);if(this.el=Bm.createElement(l,n),hh.currentNode=this.el.content,r===2||r===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(i=hh.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const h of i.getAttributeNames())if(h.endsWith(tU)){const d=u[o++],g=i.getAttribute(h).split(Dl),m=/([.?@])?(.*)/.exec(d);c.push({type:1,index:s,name:m[2],strings:g,ctor:m[1]==="."?E6e:m[1]==="?"?_6e:m[1]==="@"?S6e:E2}),i.removeAttribute(h)}else h.startsWith(Dl)&&(c.push({type:6,index:s}),i.removeAttribute(h));if(nU.test(i.tagName)){const h=i.textContent.split(Dl),d=h.length-1;if(d>0){i.textContent=ev?ev.emptyScript:"";for(let g=0;g<d;g++)i.append(h[g],Dm()),hh.nextNode(),c.push({type:2,index:++s});i.append(h[d],Dm())}}}else if(i.nodeType===8)if(i.data===rU)c.push({type:2,index:s});else{let h=-1;for(;(h=i.data.indexOf(Dl,h+1))!==-1;)c.push({type:7,index:s}),h+=Dl.length-1}s++}}static createElement(e,r){const n=jh.createElement("template");return n.innerHTML=e,n}}function Np(t,e,r=t,n){var o,a;if(e===Cp)return e;let i=n!==void 0?(o=r._$Co)==null?void 0:o[n]:r._$Cl;const s=Lm(e)?void 0:e._$litDirective$;return(i==null?void 0:i.constructor)!==s&&((a=i==null?void 0:i._$AO)==null||a.call(i,!1),s===void 0?i=void 0:(i=new s(t),i._$AT(t,r,n)),n!==void 0?(r._$Co??(r._$Co=[]))[n]=i:r._$Cl=i),i!==void 0&&(e=Np(t,i._$AS(t,e.values),i,n)),e}class v6e{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:n}=this._$AD,i=((e==null?void 0:e.creationScope)??jh).importNode(r,!0);hh.currentNode=i;let s=hh.nextNode(),o=0,a=0,c=n[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new xy(s,s.nextSibling,this,e):c.type===1?l=new c.ctor(s,c.name,c.strings,this,e):c.type===6&&(l=new x6e(s,this,e)),this._$AV.push(l),c=n[++a]}o!==(c==null?void 0:c.index)&&(s=hh.nextNode(),o++)}return hh.currentNode=jh,i}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class xy{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,r,n,i){this.type=2,this._$AH=Yn,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cv=(i==null?void 0:i.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Np(this,e,r),Lm(e)?e===Yn||e==null||e===""?(this._$AH!==Yn&&this._$AR(),this._$AH=Yn):e!==this._$AH&&e!==Cp&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):w6e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Yn&&Lm(this._$AH)?this._$AA.nextSibling.data=e:this.T(jh.createTextNode(e)),this._$AH=e}$(e){var s;const{values:r,_$litType$:n}=e,i=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=Bm.createElement(sU(n.h,n.h[0]),this.options)),n);if(((s=this._$AH)==null?void 0:s._$AD)===i)this._$AH.p(r);else{const o=new v6e(i,this),a=o.u(this.options);o.p(r),this.T(a),this._$AH=o}}_$AC(e){let r=d$.get(e.strings);return r===void 0&&d$.set(e.strings,r=new Bm(e)),r}k(e){D5(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new xy(this.O(Dm()),this.O(Dm()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)==null?void 0:n.call(this,!1,!0,r);e!==this._$AB;){const i=o$(e).nextSibling;o$(e).remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cv=e,(r=this._$AP)==null||r.call(this,e))}}class E2{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,i,s){this.type=1,this._$AH=Yn,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Yn}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=Np(this,e,r,0),o=!Lm(e)||e!==this._$AH&&e!==Cp,o&&(this._$AH=e);else{const a=e;let c,l;for(e=s[0],c=0;c<s.length-1;c++)l=Np(this,a[n+c],r,c),l===Cp&&(l=this._$AH[c]),o||(o=!Lm(l)||l!==this._$AH[c]),l===Yn?e=Yn:e!==Yn&&(e+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!i&&this.j(e)}j(e){e===Yn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class E6e extends E2{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Yn?void 0:e}}class _6e extends E2{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Yn)}}class S6e extends E2{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){if((e=Np(this,e,r,0)??Yn)===Cp)return;const n=this._$AH,i=e===Yn&&n!==Yn||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,s=e!==Yn&&(n===Yn||i);i&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,e):this._$AH.handleEvent(e)}}class x6e{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Np(this,e)}}const G_=Tg.litHtmlPolyfillSupport;G_==null||G_(Bm,xy),(Tg.litHtmlVersions??(Tg.litHtmlVersions=[])).push("3.3.2");const I6e=(t,e,r)=>{const n=(r==null?void 0:r.renderBefore)??e;let i=n._$litPart$;if(i===void 0){const s=(r==null?void 0:r.renderBefore)??null;n._$litPart$=i=new xy(e.insertBefore(Dm(),s),s,void 0,r??{})}return i._$AI(t),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Eh=globalThis;class B1 extends pf{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const e=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=e.firstChild),e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=I6e(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Cp}}var y$;B1._$litElement$=!0,B1.finalized=!0,(y$=Eh.litElementHydrateSupport)==null||y$.call(Eh,{LitElement:B1});const Y_=Eh.litElementPolyfillSupport;Y_==null||Y_({LitElement:B1});(Eh.litElementVersions??(Eh.litElementVersions=[])).push("4.2.2");let $g,au,cu;function NCe(t,e){$g=document.createElement("style"),au=document.createElement("style"),cu=document.createElement("style"),$g.textContent=Qf(t).core.cssText,au.textContent=Qf(t).dark.cssText,cu.textContent=Qf(t).light.cssText,document.head.appendChild($g),document.head.appendChild(au),document.head.appendChild(cu),oU(e)}function oU(t){au&&cu&&(t==="light"?(au.removeAttribute("media"),cu.media="enabled"):(cu.removeAttribute("media"),au.media="enabled"))}function A6e(t){$g&&au&&cu&&($g.textContent=Qf(t).core.cssText,au.textContent=Qf(t).dark.cssText,cu.textContent=Qf(t).light.cssText)}function Qf(t){return{core:Yf`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${go(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${go((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${go((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${go((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${go((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Yf`
      :root {
        --w3m-color-mix: ${go((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${go(Kl(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${go(Kl(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Yf`
      :root {
        --w3m-color-mix: ${go((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${go(Kl(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${go(Kl(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const MCe=Yf`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,TCe=Yf`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,$Ce=Yf`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Fw={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603};function Iy(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const rx=Iy({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),nx=Iy({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),C6e=Iy({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Iy({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Iy({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const N6e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},aU={getMethodsByChainNamespace(t){return N6e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const r={...t},n=new Set;if(e.methods&&Object.keys(e.methods).forEach(i=>n.add(i)),e.chains&&Object.keys(e.chains).forEach(i=>n.add(i)),e.events&&Object.keys(e.events).forEach(i=>n.add(i)),e.rpcMap&&Object.keys(e.rpcMap).forEach(i=>{const[s]=i.split(":");s&&n.add(s)}),n.forEach(i=>{r[i]||(r[i]=this.createDefaultNamespace(i))}),e.methods&&Object.entries(e.methods).forEach(([i,s])=>{r[i]&&(r[i].methods=s)}),e.chains&&Object.entries(e.chains).forEach(([i,s])=>{r[i]&&(r[i].chains=s)}),e.events&&Object.entries(e.events).forEach(([i,s])=>{r[i]&&(r[i].events=s)}),e.rpcMap){const i=new Set;Object.entries(e.rpcMap).forEach(([s,o])=>{const[a,c]=s.split(":");!a||!c||!r[a]||(r[a].rpcMap||(r[a].rpcMap={}),i.has(a)||(r[a].rpcMap={},i.add(a)),r[a].rpcMap[c]=o)})}return r},createNamespaces(t,e){const r=t.reduce((n,i)=>{const{id:s,chainNamespace:o,rpcUrls:a}=i,c=a.default.http[0];n[o]||(n[o]=this.createDefaultNamespace(o));const l=`${o}:${s}`,u=n[o];switch(u.chains.push(l),l){case rx.caipNetworkId:u.chains.push(rx.deprecatedCaipNetworkId);break;case nx.caipNetworkId:u.chains.push(nx.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[s]=c),n},{});return this.applyNamespaceOverrides(r,e)},resolveReownName:async t=>{var n;const e=await $L.resolveName(t);return((n=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:n.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const r=e.chains||[],n=e.accounts.map(i=>{const[s,o]=i.split(":");return`${s}:${o}`});return Array.from(new Set([...r,...n]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null}};class cU{constructor({provider:e,caipNetworks:r,namespace:n}){this.id=Ue.CONNECTOR_ID.WALLET_CONNECT,this.name=Jb.ConnectorNamesMap[Ue.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Jb.ConnectorImageIds[Ue.CONNECTOR_ID.WALLET_CONNECT],this.caipNetworks=r,this.provider=e,this.chain=n}get chains(){return this.caipNetworks}async connectWalletConnect(){if(!await this.authenticate()){const r=ge.state.universalProviderConfigOverride,n=aU.createNamespaces(this.caipNetworks,r);await this.provider.connect({optionalNamespaces:n})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(r=>r.caipNetworkId);return xg.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:M6e})}}const M6e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class T6e{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,e&&this.construct(e)}construct(e){this.caipNetworks=e.networks,this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.caipNetworks||[]}setAuthProvider(e){this.addConnector({id:Ue.CONNECTOR_ID.AUTH,type:"AUTH",name:Ue.CONNECTOR_NAMES.AUTH,provider:e,imageId:Jb.ConnectorImageIds[Ue.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const r=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>r.has(n.id)?!1:(r.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,r){ze.setStatus(e,r)}on(e,r){var n;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(n=this.eventListeners.get(e))==null||n.add(r)}off(e,r){const n=this.eventListeners.get(e);n&&n.delete(r)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,r){const n=this.eventListeners.get(e);n&&n.forEach(i=>i(r))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:r,providerType:n}=e;if(!e.provider)return;const i="provider"in e.provider?e.provider.provider:e.provider;if(n==="WALLET_CONNECT"){i.setDefaultChain(r.caipNetworkId);return}if(i&&n==="AUTH"){const s=i;await s.switchNetwork(r.caipNetworkId);const o=await s.getUser({chainId:r.caipNetworkId,preferredAccountType:ge.state.defaultAccountTypes[r.chainNamespace]});this.emit("switchNetwork",o)}}getWalletConnectConnector(){const e=this.connectors.find(r=>r instanceof cU);if(!e)throw new Error("WalletConnectConnector not found");return e}}class $6e extends T6e{setUniversalProvider(e){this.addConnector(new cU({provider:e,caipNetworks:this.caipNetworks||[],namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var i,s,o,a;const r=this.provider,n=((a=(o=(s=(i=r==null?void 0:r.session)==null?void 0:i.namespaces)==null?void 0:s[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:n.map(c=>dt.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var s,o,a,c,l;if(!(e.caipNetwork&&Es.BALANCE_SUPPORTED_CHAINS.includes((s=e.caipNetwork)==null?void 0:s.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(ze.state.balanceLoading&&e.chainId===((c=Y.state.activeCaipNetwork)==null?void 0:c.id))return{balance:ze.state.balance||"0.00",symbol:ze.state.balanceSymbol||""};const i=(await ze.fetchTokenBalance()).find(u=>{var h,d;return u.chainId===`${(h=e.caipNetwork)==null?void 0:h.chainNamespace}:${e.chainId}`&&u.symbol===((d=e.caipNetwork)==null?void 0:d.nativeCurrency.symbol)});return{balance:(i==null?void 0:i.quantity.numeric)||"0.00",symbol:(i==null?void 0:i.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:r,message:n,address:i}=e;if(!r)throw new Error("UniversalAdapter:signMessage - provider is undefined");let s="";return((o=Y.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===Ue.CHAIN.SOLANA?s=(await r.request({method:"solana_signMessage",params:{message:WL.encode(new TextEncoder().encode(n)),pubkey:i}},(a=Y.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:s=await r.request({method:"personal_sign",params:[n,i]},(c=Y.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:s}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async getProfile(){return Promise.resolve({profileImage:"",profileName:""})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}async getEnsAddress(){return Promise.resolve({address:!1})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var i,s,o,a,c,l;const{caipNetwork:r}=e,n=this.getWalletConnectConnector();if(r.chainNamespace===Ue.CHAIN.EVM)try{await((i=n.provider)==null?void 0:i.request({method:"wallet_switchEthereumChain",params:[{chainId:pM(r.id)}]}))}catch(u){if(u.code===Fw.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Fw.ERROR_INVALID_CHAIN_ID||u.code===Fw.ERROR_CODE_DEFAULT||((o=(s=u==null?void 0:u.data)==null?void 0:s.originalError)==null?void 0:o.code)===Fw.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=n.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:pM(r.id),rpcUrls:[(a=r==null?void 0:r.rpcUrls.chainDefault)==null?void 0:a.http],chainName:r.name,nativeCurrency:r.nativeCurrency,blockExplorerUrls:[(c=r.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(r.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(n=>n.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}class P6e{constructor(e){var r;this.hasSwitchedToPreferredAccountTypeOnConnect=!1,this.chainNamespaces=[],this.reportedAlertErrors={},this.getCaipNetwork=n=>{var i,s;if(n){const o=(i=Y.getNetworkData(n))==null?void 0:i.caipNetwork;return o||((s=Y.getRequestedCaipNetworks(n).filter(a=>a.chainNamespace===n))==null?void 0:s[0])}return Y.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>Y.getRequestedCaipNetworks(n),this.getActiveChainNamespace=()=>Y.state.activeChain,this.setRequestedCaipNetworks=(n,i)=>{Y.setRequestedCaipNetworks(n,i)},this.getApprovedCaipNetworkIds=()=>Y.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>Y.state.activeChain===n||!n?Y.state.activeCaipAddress:Y.getAccountProp("caipAddress",n),this.setClientId=n=>{Ve.setClientId(n)},this.getProvider=n=>Qr.getProvider(n),this.getProviderType=n=>Qr.getProviderId(n),this.getPreferredAccountType=()=>ze.state.preferredAccountType,this.setCaipAddress=(n,i)=>{ze.setCaipAddress(n,i)},this.setBalance=(n,i,s)=>{ze.setBalance(n,i,s)},this.setProfileName=(n,i)=>{ze.setProfileName(n,i)},this.setProfileImage=(n,i)=>{ze.setProfileImage(n,i)},this.setUser=(n,i)=>{ze.setUser(n,i),ge.state.enableEmbedded&&xn.close()},this.resetAccount=n=>{ze.resetAccount(n)},this.setCaipNetwork=n=>{Y.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,i)=>{Y.setChainNetworkData(i,{caipNetwork:n})},this.setAllAccounts=(n,i)=>{ze.setAllAccounts(n,i),ge.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,i)=>{ze.setStatus(n,i),ut.isConnected()?Oe.setConnectionStatus("connected"):Oe.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>Y.getAccountProp("address",n),this.setConnectors=n=>{const i=[...ut.getConnectors(),...n];ut.setConnectors(i)},this.fetchIdentity=n=>Ve.fetchIdentity(n),this.getReownName=n=>$L.getNamesForAddress(n),this.getConnectors=()=>ut.getConnectors(),this.getConnectorImage=n=>bL.getConnectorImage(n),this.setConnectedWalletInfo=(n,i)=>{const s=Qr.getProviderId(i),o=n?{...n,type:s}:void 0;ze.setConnectedWalletInfo(o,i)},this.getIsConnectedState=()=>!!Y.state.activeCaipAddress,this.addAddressLabel=(n,i,s)=>{ze.addAddressLabel(n,i,s)},this.removeAddressLabel=(n,i)=>{ze.removeAddressLabel(n,i)},this.getAddress=n=>Y.state.activeChain===n||!n?ze.state.address:Y.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>Y.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{Y.resetNetwork(n)},this.addConnector=n=>{ut.addConnector(n)},this.resetWcConnection=()=>{Er.resetWcConnection()},this.setAddressExplorerUrl=(n,i)=>{ze.setAddressExplorerUrl(n,i)},this.setSmartAccountDeployed=(n,i)=>{ze.setSmartAccountDeployed(n,i)},this.setSmartAccountEnabledNetworks=(n,i)=>{Y.setSmartAccountEnabledNetworks(n,i)},this.setPreferredAccountType=(n,i)=>{ze.setPreferredAccountType(n,i)},this.setEIP6963Enabled=n=>{ge.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=[...new Set((r=this.caipNetworks)==null?void 0:r.map(n=>n.chainNamespace))],this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.initialize(e),this.sendInitializeEvent(e)}async initialize(e){this.initControllers(e),await this.initChainAdapters(),await this.injectModalUi(),await this.syncExistingConnection(),Fc.set({initialized:!0})}sendInitializeEvent(e){var n;const{...r}=e;delete r.adapters,Sr.sendEvent({type:"track",event:"INITIALIZE",properties:{...r,networks:e.networks.map(i=>i.id),siweConfig:{options:((n=e.siweConfig)==null?void 0:n.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Yi.setThemeMode(e.themeMode),e.themeVariables&&Yi.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");Y.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const r=this.getDefaultNetwork();r&&Y.setActiveCaipNetwork(r)}initializeConnectionController(e){Er.setWcBasic(e.basic??!1)}initializeConnectorController(){ut.initialize(this.chainNamespaces)}initializeOptionsController(e){var i;ge.setDebug(e.debug!==!1),ge.setEnableWalletConnect(e.enableWalletConnect!==!1),ge.setEnableWalletGuide(e.enableWalletGuide!==!1),ge.setEnableWallets(e.enableWallets!==!1),ge.setEIP6963Enabled(e.enableEIP6963!==!1),ge.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ge.setEnableAuthLogger(e.enableAuthLogger!==!1),ge.setCustomRpcUrls(e.customRpcUrls),ge.setSdkVersion(e.sdkVersion),ge.setProjectId(e.projectId),ge.setEnableEmbedded(e.enableEmbedded),ge.setAllWallets(e.allWallets),ge.setIncludeWalletIds(e.includeWalletIds),ge.setExcludeWalletIds(e.excludeWalletIds),ge.setFeaturedWalletIds(e.featuredWalletIds),ge.setTokens(e.tokens),ge.setTermsConditionsUrl(e.termsConditionsUrl),ge.setPrivacyPolicyUrl(e.privacyPolicyUrl),ge.setCustomWallets(e.customWallets),ge.setFeatures(e.features),ge.setAllowUnsupportedChain(e.allowUnsupportedChain),ge.setDefaultAccountTypes(e.defaultAccountTypes),ge.setUniversalProviderConfigOverride(e.universalProviderConfigOverride);const r=this.getDefaultMetaData();if(!e.metadata&&r&&(e.metadata=r),ge.setMetadata(e.metadata),ge.setDisableAppend(e.disableAppend),ge.setEnableEmbedded(e.enableEmbedded),ge.setSIWX(e.siwx),!e.projectId){N1.open(jw.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((i=e.adapters)==null?void 0:i.find(s=>s.namespace===Ue.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ge.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,r,n,i;return typeof window<"u"&&typeof document<"u"?{name:((r=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:r.textContent)||"",description:((n=document.querySelector('meta[property="og:description"]'))==null?void 0:n.content)||"",url:window.location.origin,icons:[((i=document.querySelector('link[rel~="icon"]'))==null?void 0:i.href)||""]}:null}setUnsupportedNetwork(e){const r=this.getActiveChainNamespace();if(r){const n=ff.getUnsupportedNetwork(`${r}:${e}`);Y.setActiveCaipNetwork(n)}}getDefaultNetwork(){return ff.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,r){return ff.extendCaipNetwork(e,{customNetworkImageUrls:r.chainImages,projectId:r.projectId})}extendCaipNetworks(e){return ff.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const r=e.networks.find(i=>{var s;return i.id===((s=e.defaultNetwork)==null?void 0:s.id)});return r?ff.extendCaipNetwork(r,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var s;const e=Y.state.activeChain,r=this.getAdapter(e),n=(s=this.getCaipNetwork(e))==null?void 0:s.id;if(!r)throw new Error("Adapter not found");const i=await r.connectWalletConnect(n);this.close(),this.setClientId((i==null?void 0:i.clientId)||null),Oe.setConnectedNamespaces([...Y.state.chains.keys()]),this.chainNamespaces.forEach(o=>{ut.setConnectorId(xl.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:r,type:n,provider:i,chain:s,caipNetwork:o})=>{var g,m,v,$,_,x,A;const a=Y.state.activeChain,c=s||a,l=this.getAdapter(c);if(s&&s!==a&&!o){const T=(g=this.caipNetworks)==null?void 0:g.find(k=>k.chainNamespace===s);T&&this.setCaipNetwork(T)}if(!l)throw new Error("Adapter not found");const u=this.getCaipNetwork(c),h=await l.connect({id:e,info:r,type:n,provider:i,chainId:(o==null?void 0:o.id)||(u==null?void 0:u.id),rpcUrl:(($=(v=(m=o==null?void 0:o.rpcUrls)==null?void 0:m.default)==null?void 0:v.http)==null?void 0:$[0])||((A=(x=(_=u==null?void 0:u.rpcUrls)==null?void 0:_.default)==null?void 0:x.http)==null?void 0:A[0])});if(!h)return;Oe.addConnectedNamespace(c),this.syncProvider({...h,chainNamespace:c}),await this.syncAccount({...h,chainNamespace:c});const{accounts:d}=await l.getAccounts({namespace:c,id:e});this.setAllAccounts(d,c)},reconnectExternal:async({id:e,info:r,type:n,provider:i})=>{var a;const s=Y.state.activeChain,o=this.getAdapter(s);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:r,type:n,provider:i,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Oe.addConnectedNamespace(s))},disconnect:async e=>{const r=e||Y.state.activeChain,n=this.getAdapter(r),i=Qr.getProvider(r),s=Qr.getProviderId(r);await(n==null?void 0:n.disconnect({provider:i,providerType:s})),Oe.removeConnectedNamespace(r),Qr.resetChain(r),this.setUser(void 0,r),this.setStatus("disconnected",r),this.hasSwitchedToPreferredAccountTypeOnConnect=!1},checkInstalled:e=>e?e.some(r=>{var n;return!!((n=window.ethereum)!=null&&n[String(r)])}):!!window.ethereum,signMessage:async e=>{const r=this.getAdapter(Y.state.activeChain),n=await(r==null?void 0:r.signMessage({message:e,address:ze.state.address,provider:Qr.getProvider(Y.state.activeChain)}));return(n==null?void 0:n.signature)||""},sendTransaction:async e=>{if(e.chainNamespace===Ue.CHAIN.EVM){const r=this.getAdapter(Y.state.activeChain),n=Qr.getProvider(Y.state.activeChain),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:n}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===Ue.CHAIN.EVM){const r=this.getAdapter(Y.state.activeChain),n=Qr.getProvider(Y.state.activeChain),i=this.getCaipNetwork();if(!i)throw new Error("CaipNetwork is undefined");const s=await(r==null?void 0:r.estimateGas({...e,provider:n,caipNetwork:i}));return(s==null?void 0:s.gas)||0n}return 0n},getEnsAvatar:async()=>{var n;const e=this.getAdapter(Y.state.activeChain),r=await(e==null?void 0:e.getProfile({address:ze.state.address,chainId:Number((n=this.getCaipNetwork())==null?void 0:n.id)}));return(r==null?void 0:r.profileImage)||!1},getEnsAddress:async e=>{const r=this.getAdapter(Y.state.activeChain),n=this.getCaipNetwork();if(!n)return!1;const i=await(r==null?void 0:r.getEnsAddress({name:e,caipNetwork:n}));return(i==null?void 0:i.address)||!1},writeContract:async e=>{const r=this.getAdapter(Y.state.activeChain),n=this.getCaipNetwork(),i=this.getCaipAddress(),s=Qr.getProvider(Y.state.activeChain);if(!n||!i)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(r==null?void 0:r.writeContract({...e,caipNetwork:n,provider:s,caipAddress:i}));return o==null?void 0:o.hash},parseUnits:(e,r)=>{const n=this.getAdapter(Y.state.activeChain);return(n==null?void 0:n.parseUnits({value:e,decimals:r}))??0n},formatUnits:(e,r)=>{const n=this.getAdapter(Y.state.activeChain);return(n==null?void 0:n.formatUnits({value:e,decimals:r}))??"0"},getCapabilities:async e=>{const r=this.getAdapter(Y.state.activeChain);return await(r==null?void 0:r.getCapabilities(e))},grantPermissions:async e=>{const r=this.getAdapter(Y.state.activeChain);return await(r==null?void 0:r.grantPermissions(e))},revokePermissions:async e=>{const r=this.getAdapter(Y.state.activeChain);return r!=null&&r.revokePermissions?await r.revokePermissions(e):"0x"},walletGetAssets:async e=>{const r=this.getAdapter(Y.state.activeChain);return await(r==null?void 0:r.walletGetAssets(e))??{}}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},Er.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var r,n,i,s,o;if(Qr.getProviderId(Y.state.activeChain)===xl.CONNECTOR_TYPE_WALLET_CONNECT){const a=(n=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:n.namespaces;return{supportsAllNetworks:((o=(s=(i=this.universalProvider)==null?void 0:i.session)==null?void 0:s.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const r=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const i=Qr.getProvider(r),s=Qr.getProviderId(r);if(e.chainNamespace===Y.state.activeChain){const o=this.getAdapter(r);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:i,providerType:s}))}else if(this.setCaipNetwork(e),s===xl.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(r);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:r})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(r=>{const n=r.chains||[],i=r.accounts.map(s=>{const{chainId:o,chainNamespace:a}=bl.parseCaipAddress(s);return`${a}:${o}`});return Array.from(new Set([...n,...i]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((r,n)=>{var s;const i=e==null?void 0:e.find(o=>o.namespace===n);return i?(r[n]=i,r[n].namespace=n,r[n].construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.caipNetworks})):r[n]=new $6e({namespace:n,networks:this.caipNetworks}),r},{})}async initChainAdapter(e){var r;this.onConnectors(e),this.listenAdapter(e),(r=this.chainAdapters)==null||r[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const r=this.getAdapter(e);r==null||r.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const r=this.getAdapter(e);if(!r)return;const n=Oe.getConnectionStatus();n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(Oe.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),r.on("switchNetwork",({address:i,chainId:s})=>{var l;const o=(l=this.caipNetworks)==null?void 0:l.find(u=>u.id===s||u.caipNetworkId===s),a=Y.state.activeChain===e,c=Y.getAccountProp("address",e);if(o){const u=a&&i?i:c;u&&this.syncAccount({address:u,chainId:s,chainNamespace:e})}else this.setUnsupportedNetwork(s)}),r.on("disconnect",this.disconnect.bind(this,e)),r.on("pendingTransactions",()=>{const i=ze.state.address,s=Y.state.activeCaipNetwork;!i||!(s!=null&&s.id)||this.updateNativeBalance(i,s.id,s.chainNamespace)}),r.on("accountChanged",({address:i,chainId:s})=>{var a,c;const o=Y.state.activeChain===e;o&&s?this.syncAccount({address:i,chainId:s,chainNamespace:e}):o&&((a=Y.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:i,chainId:(c=Y.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(i,s,e)})}async createUniversalProviderForAdapter(e){var r,n,i;await this.getUniversalProvider(),this.universalProvider&&((i=(n=(r=this.chainAdapters)==null?void 0:r[e])==null?void 0:n.setUniversalProvider)==null||i.call(n,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{const r=ut.getConnectorId(e);switch(this.setStatus("connecting",e),r){case Ue.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case Ue.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(r){console.warn("AppKit couldn't sync existing connection",r),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var o,a,c;const r=this.getAdapter(e),n=ut.getConnectorId(e),i=this.getCaipNetwork(e),s=ut.getConnectors(e).find(l=>l.id===n);try{if(!r||!s)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(i!=null&&i.id))throw new Error("CaipNetwork not found");const l=await(r==null?void 0:r.syncConnection({namespace:e,id:s.id,chainId:i.id,rpcUrl:(c=(a=(o=i==null?void 0:i.rpcUrls)==null?void 0:o.default)==null?void 0:a.http)==null?void 0:c[0]}));if(l){const u=await(r==null?void 0:r.getAccounts({namespace:e,id:s.id}));u&&u.accounts.length>0?this.setAllAccounts(u.accounts,e):this.setAllAccounts([dt.createAccount(e,l.address,"eoa")],e),this.syncProvider({...l,chainNamespace:e}),await this.syncAccount({...l,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async r=>{var a,c,l,u,h;const n=this.getAdapter(r),i=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[r])==null?void 0:u.accounts)||[],s=(h=Y.state.activeCaipNetwork)==null?void 0:h.id,o=i.find(d=>{const{chainId:g}=bl.parseCaipAddress(d);return g===(s==null?void 0:s.toString())})||i[0];if(o){const d=bl.validateCaipAddress(o),{chainId:g,address:m}=bl.parseCaipAddress(d);if(Qr.setProviderId(r,xl.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&Y.state.activeCaipNetwork&&(n==null?void 0:n.namespace)!==Ue.CHAIN.EVM){const v=n==null?void 0:n.getWalletConnectProvider({caipNetworks:this.caipNetworks,provider:this.universalProvider,activeCaipNetwork:Y.state.activeCaipNetwork});Qr.setProvider(r,v)}else Qr.setProvider(r,this.universalProvider);ut.setConnectorId(Ue.CONNECTOR_ID.WALLET_CONNECT,r),Oe.addConnectedNamespace(r),this.syncWalletConnectAccounts(r),await this.syncAccount({address:m,chainId:g,chainNamespace:r})}else this.setStatus("disconnected",r);await Y.setApprovedCaipNetworksData(r)});await Promise.all(e)}syncWalletConnectAccounts(e){var n,i,s,o,a;const r=(a=(o=(s=(i=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:i.namespaces)==null?void 0:s[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=bl.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);r&&this.setAllAccounts(r.map(c=>dt.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:r,id:n,chainNamespace:i}){Qr.setProviderId(i,e),Qr.setProvider(i,r),ut.setConnectorId(n,i)}async syncAccount(e){var h,d,g,m,v,$;const r=e.chainNamespace===Y.state.activeChain,n=Y.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:i,chainId:s,chainNamespace:o}=e,{chainId:a}=Oe.getActiveNetworkProps(),c=s||a,l=((h=Y.state.activeCaipNetwork)==null?void 0:h.name)===Ue.UNSUPPORTED_NETWORK_NAME,u=Y.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let _=(d=this.caipNetworks)==null?void 0:d.find(T=>T.id.toString()===c.toString()),x=(g=this.caipNetworks)==null?void 0:g.find(T=>T.chainNamespace===o);if(!u&&!_&&!x){const T=this.getApprovedCaipNetworkIds()||[],k=T.find(L=>{var F;return((F=bl.parseCaipNetworkId(L))==null?void 0:F.chainId)===c.toString()}),D=T.find(L=>{var F;return((F=bl.parseCaipNetworkId(L))==null?void 0:F.chainNamespace)===o});_=(m=this.caipNetworks)==null?void 0:m.find(L=>L.caipNetworkId===k),x=(v=this.caipNetworks)==null?void 0:v.find(L=>L.caipNetworkId===D||"deprecatedCaipNetworkId"in L&&L.deprecatedCaipNetworkId===D)}const A=_||x;(A==null?void 0:A.chainNamespace)===Y.state.activeChain?ge.state.enableNetworkSwitch&&!ge.state.allowUnsupportedChain&&(($=Y.state.activeCaipNetwork)==null?void 0:$.name)===Ue.UNSUPPORTED_NETWORK_NAME?Y.showUnsupportedChainUI():this.setCaipNetwork(A):r||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o),JB.isLowerCaseMatch(i,ze.state.address)||this.syncAccountInfo(i,A==null?void 0:A.id,o),r?await this.syncBalance({address:i,chainId:A==null?void 0:A.id,chainNamespace:o}):await this.syncBalance({address:i,chainId:n==null?void 0:n.id,chainNamespace:o})}}async syncAccountInfo(e,r,n){const i=this.getCaipAddress(n),s=r||(i==null?void 0:i.split(":")[1]);if(!s)return;const o=`${n}:${s}:${e}`;this.setCaipAddress(o,n),await this.syncIdentity({address:e,chainId:s,chainNamespace:n})}async syncReownName(e,r){try{const n=await this.getReownName(e);if(n[0]){const i=n[0];this.setProfileName(i.name,r)}else this.setProfileName(null,r)}catch{this.setProfileName(null,r)}}syncConnectedWalletInfo(e){var i;const r=ut.getConnectorId(e),n=Qr.getProviderId(e);if(n===xl.CONNECTOR_TYPE_ANNOUNCED||n===xl.CONNECTOR_TYPE_INJECTED){if(r){const s=this.getConnectors().find(o=>o.id===r);if(s){const{info:o,name:a,imageUrl:c}=s,l=c||this.getConnectorImage(s);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(n===xl.CONNECTOR_TYPE_WALLET_CONNECT){const s=Qr.getProvider(e);s!=null&&s.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:(i=s.session.peer.metadata.icons)==null?void 0:i[0]},e)}else if(r)if(r===Ue.CONNECTOR_ID.COINBASE){const s=this.getConnectors().find(o=>o.id===Ue.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(s)},e)}else this.setConnectedWalletInfo({name:r},e)}async syncBalance(e){!mL.getNetworksByNamespace(this.caipNetworks,e.chainNamespace).find(n=>{var i;return n.id.toString()===((i=e.chainId)==null?void 0:i.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async updateNativeBalance(e,r,n){const i=this.getAdapter(n);if(i){const s=await i.getBalance({address:e,chainId:r,caipNetwork:this.getCaipNetwork(n),tokens:this.options.tokens});this.setBalance(s.balance,s.symbol,n)}}async initializeUniversalAdapter(){var n,i,s,o,a,c,l,u,h,d;const e=s6e.createLogger((g,...m)=>{g&&this.handleAlertError(g),console.error(...m)}),r={projectId:(n=this.options)==null?void 0:n.projectId,metadata:{name:(i=this.options)!=null&&i.metadata?(s=this.options)==null?void 0:s.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(h=this.options)==null?void 0:h.metadata.icons:[""]},logger:e};ge.setManualWCControl(!!((d=this.options)!=null&&d.manualWCControl)),this.universalProvider=this.options.universalProvider??await n6e.init(r),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{Er.setUri(e)}),this.universalProvider.on("connect",Er.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),Er.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{var i;const r=(i=this.caipNetworks)==null?void 0:i.find(s=>s.id==e),n=this.getCaipNetwork();if(!r){this.setUnsupportedNetwork(e);return}(n==null?void 0:n.id)!==(r==null?void 0:r.id)&&this.setCaipNetwork(r)}),this.universalProvider.on("session_event",e=>{if(aU.isSessionEventData(e)){const{name:r,data:n}=e.params.event;r==="accountsChanged"&&Array.isArray(n)&&dt.isCaipAddress(n[0])&&this.syncAccount(bl.parseCaipAddress(n[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&dt.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Sr.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const r=Object.entries(jw.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,i]=r??[],{message:s,alertErrorKey:o}=i??{};if(n&&s&&!this.reportedAlertErrors[n]){const a=jw.ALERT_ERRORS[o];a&&(N1.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){var r;if(e)return(r=this.chainAdapters)==null?void 0:r[e]}createAdapter(e){var i;if(!e)return;const r=e.namespace;if(!r)return;this.createClients();const n=e;n.namespace=r,n.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.caipNetworks}),this.chainNamespaces.includes(r)||this.chainNamespaces.push(r),this.chainAdapters&&(this.chainAdapters[r]=n)}async open(e){await this.injectModalUi(),e!=null&&e.uri&&Er.setUri(e.uri),await xn.open(e)}async close(){await this.injectModalUi(),xn.close()}setLoading(e,r){xn.setLoading(e,r)}async disconnect(e){await Er.disconnect(e)}getError(){return""}getChainId(){var e;return(e=Y.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){var n;const r=(n=this.caipNetworks)==null?void 0:n.find(i=>i.id===e.id);if(!r){N1.open(jw.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await Y.switchActiveNetwork(r)}getWalletProvider(){return Y.state.activeChain?Qr.state.providers[Y.state.activeChain]:null}getWalletProviderType(){return Qr.getProviderId(Y.state.activeChain)}subscribeProviders(e){return Qr.subscribeProviders(e)}getThemeMode(){return Yi.state.themeMode}getThemeVariables(){return Yi.state.themeVariables}setThemeMode(e){Yi.setThemeMode(e),oU(Yi.state.themeMode)}setTermsConditionsUrl(e){ge.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ge.setPrivacyPolicyUrl(e)}setThemeVariables(e){Yi.setThemeVariables(e),A6e(Yi.state.themeVariables)}subscribeTheme(e){return Yi.subscribe(e)}getWalletInfo(){return ze.state.connectedWalletInfo}getAccount(e){const r=ut.getAuthConnector(e),n=Y.getAccountData(e);if(n)return{allAccounts:n.allAccounts,caipAddress:n.caipAddress,address:dt.getPlainAddress(n.caipAddress),isConnected:!!n.caipAddress,status:n.status,embeddedWalletInfo:r?{user:n.user,authProvider:n.socialProvider||"email",accountType:n.preferredAccountType,isSmartAccountDeployed:!!n.smartAccountDeployed}:void 0}}subscribeAccount(e,r){const n=()=>{const i=this.getAccount(r);i&&e(i)};r?Y.subscribeChainProp("accountState",n,r):Y.subscribe(n),ut.subscribe(n)}subscribeNetwork(e){return Y.subscribe(({activeCaipNetwork:r})=>{e({caipNetwork:r,chainId:r==null?void 0:r.id,caipNetworkId:r==null?void 0:r.caipNetworkId})})}subscribeWalletInfo(e){return ze.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){ze.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){Y.subscribeKey("activeCaipNetwork",e)}getState(){return Fc.state}subscribeState(e){return Fc.subscribe(e)}showErrorMessage(e){pi.showError(e)}showSuccessMessage(e){pi.showSuccess(e)}getEvent(){return{...Sr.state}}subscribeEvents(e){return Sr.subscribe(e)}replace(e){Jt.replace(e)}redirect(e){Jt.push(e)}popTransactionStack(e){Jt.popTransactionStack(e)}isOpen(){return xn.state.open}isTransactionStackEmpty(){return Jt.state.transactionStack.length===0}isTransactionShouldReplaceView(){var e;return(e=Jt.state.transactionStack[Jt.state.transactionStack.length-1])==null?void 0:e.replace}static getInstance(){return this.instance}updateFeatures(e){ge.setFeatures(e)}updateOptions(e){const n={...ge.state||{},...e};ge.setOptions(n)}setConnectMethodsOrder(e){ge.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ge.setWalletFeaturesOrder(e)}setCollapseWallets(e){ge.setCollapseWallets(e)}setSocialsOrder(e){ge.setSocialsOrder(e)}getConnectMethodsOrder(){return ex.getConnectOrderMethod(ge.state.features,ut.getConnectors())}removeAdapter(e){var s;const r=this.getIsConnectedState(),n=this.getAdapter(e);if(!n||!this.chainAdapters||r)return;const i=(s=this.caipNetworks)==null?void 0:s.filter(o=>o.chainNamespace!==e);Y.removeAdapter(e),ut.removeAdapter(e),this.chainNamespaces=this.chainNamespaces.filter(o=>o!==e),this.caipNetworks=i,n.removeAllEventListeners(),Reflect.deleteProperty(this.chainAdapters,e)}addAdapter(e,r){const n=e.namespace;if(!this.connectionControllerClient||!this.networkControllerClient||!this.chainAdapters||!n)return;const i=this.extendCaipNetworks({...this.options,networks:r});this.caipNetworks=[...this.caipNetworks||[],...i],this.createAdapter(e),this.initChainAdapter(n),Y.addAdapter(e,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient},i)}addNetwork(e,r){var i;if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(r,this.options);Y.addNetwork(n),this.caipNetworks&&!((i=this.caipNetworks)!=null&&i.find(s=>s.id===n.id))&&this.caipNetworks.push(n)}removeNetwork(e,r){var s;if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);if(!((s=this.caipNetworks)==null?void 0:s.find(o=>o.id===r)))throw new Error(`Network with ID ${r} not found`);if(!this.caipNetworks)return;const i=this.caipNetworks.filter(o=>o.chainNamespace===e&&o.id!==r);if(!(i!=null&&i.length))throw new Error("Cannot remove last network for a namespace");Y.removeNetwork(e,r),this.caipNetworks=[...i]}}let f$=!1;class O6e extends P6e{async open(e){ut.isConnected()||await super.open(e)}async close(){await super.close(),this.options.manualWCControl&&Er.finalizeWcConnection()}async syncIdentity(e){return Promise.resolve()}async syncBalance(e){return Promise.resolve()}async injectModalUi(){if(!f$&&dt.isClient()){if(await Mh(()=>import("./basic-KQ2SPbfa.js"),__vite__mapDeps([0,1])),await Mh(()=>import("./w3m-modal-D5HTq3wq.js"),__vite__mapDeps([2,1])),!document.querySelector("w3m-modal")){const r=document.createElement("w3m-modal");!ge.state.disableAppend&&!ge.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",r)}f$=!0}}}const k6e="1.7.2";function R6e(t){return new O6e({...t,basic:!0,sdkVersion:`html-core-${k6e}`})}function D6e(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),h=u.charCodeAt(0);if(e[h]!==255)throw new TypeError(u+" is ambiguous");e[h]=l}const r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,h=0,d=0;const g=l.length;for(;d!==g&&l[d]===0;)d++,u++;const m=(g-d)*s+1>>>0,v=new Uint8Array(m);for(;d!==g;){let x=l[d],A=0;for(let T=m-1;(x!==0||A<h)&&T!==-1;T--,A++)x+=256*v[T]>>>0,v[T]=x%r>>>0,x=x/r>>>0;if(x!==0)throw new Error("Non-zero carry");h=A,d++}let $=m-h;for(;$!==m&&v[$]===0;)$++;let _=n.repeat(u);for(;$<m;++$)_+=t.charAt(v[$]);return _}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,h=0,d=0;for(;l[u]===n;)h++,u++;const g=(l.length-u)*i+1>>>0,m=new Uint8Array(g);for(;u<l.length;){const x=l.charCodeAt(u);if(x>255)return;let A=e[x];if(A===255)return;let T=0;for(let k=g-1;(A!==0||T<d)&&k!==-1;k--,T++)A+=r*m[k]>>>0,m[k]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");d=T,u++}let v=g-d;for(;v!==g&&m[v]===0;)v++;const $=new Uint8Array(h+(g-v));let _=h;for(;v!==g;)$[_++]=m[v++];return $}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var L6e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Q_=D6e(L6e);class Rf extends Error{constructor(){super(),Object.setPrototypeOf(this,Rf.prototype)}}class p$ extends Error{constructor(e){super(`WalletConnect Adapter - Method ${e} is not supported by the wallet`),this.name="WalletConnectFeatureNotSupportedError"}}function B6e(t){let e=[t];return t===Mn.Mainnet||t===Mn.Deprecated_Mainnet?(e=[Mn.Mainnet,Mn.Deprecated_Mainnet],t===Mn.Deprecated_Mainnet&&console.warn(tv.mainnet)):(t===Mn.Deprecated_Devnet||t===Mn.Devnet)&&(e=[Mn.Devnet,Mn.Deprecated_Devnet],console.warn(tv.devnet)),e}const tv={mainnet:`You are using a deprecated chain ID for Solana Mainnet, please use ${Mn.Mainnet} instead.`,devnet:`You are using a deprecated chain ID for Solana Devnet, please use ${Mn.Devnet} instead.`,wallet:"The connected wallet is using a deprecated chain ID for Solana. Please, contact them to upgrade. You can learn more at https://github.com/ChainAgnostic/namespaces/blob/main/solana/caip10.md#chain-ids"};function g$(t,e){var n;const r=(n=t.namespaces.solana)==null?void 0:n.accounts.map(i=>`solana:${i.split(":")[1]}`);if(e===Mn.Mainnet)return r!=null&&r.find(i=>i===Mn.Mainnet)?Mn.Mainnet:(console.warn(tv.wallet),Mn.Deprecated_Mainnet);if(e===Mn.Devnet)return r!=null&&r.find(i=>i===Mn.Devnet)?Mn.Devnet:(console.warn(tv.wallet),Mn.Deprecated_Devnet);throw Error("WalletConnect Solana Adapter: Unable to get a default chain from the session.")}function U6e(t){return{optionalNamespaces:{solana:{chains:B6e(t),methods:[bo.signTransaction,bo.signMessage],events:[]}}}}class L5 extends Error{constructor(){super("QR Code Modal was closed by user"),Object.setPrototypeOf(this,L5.prototype),this.name="QRCodeModalError"}}class j6e{constructor(e){ot(this,"_UniversalProvider");ot(this,"_session");ot(this,"_modal");ot(this,"_projectId");ot(this,"_network");ot(this,"_ConnectQueueResolver");if(this.initClient(e.options),this._network=e.network,!e.options.projectId)throw Error("WalletConnect Adapter: Project ID is undefined");this._projectId=e.options.projectId}async connect(){var i,s,o,a,c,l;if(this._UniversalProvider||await new Promise(u=>{this._ConnectQueueResolver=u}),!this._UniversalProvider)throw new Error("WalletConnect Adapter - Universal Provider was undefined while calling 'connect()'");if(this._UniversalProvider.session){this._session=this._UniversalProvider.session;const u=g$(this._session,this._network);return this._network=u,this._UniversalProvider.setDefaultChain(u),{publicKey:this.publicKey}}await this.initModal();const e=U6e(this._network);(i=this._modal)==null||i.open();const r=new AbortController,n=r.signal;(s=this._modal)==null||s.subscribeState(u=>{u.open||r.abort(new L5)});try{const u=await Promise.race([(o=this._UniversalProvider)==null?void 0:o.connect(e),new Promise((d,g)=>{n.addEventListener("abort",()=>{g(n.reason)})})]);if((a=this._modal)==null||a.close(),this._session=u,!u)throw new Yc;const h=g$(u,this._network);return this._network=h,(c=this._UniversalProvider)==null||c.setDefaultChain(h),{publicKey:this.publicKey}}catch(u){throw(l=this._modal)==null||l.close(),u}}async disconnect(){var e;if((e=this._UniversalProvider)!=null&&e.session){if(await this.initModal(),!this._modal)throw Error("WalletConnect Adapter -Modal is undefined: unable to disconnect");await this.client.disconnect(),this._session=void 0}else throw new Rf}get client(){if(this._UniversalProvider)return this._UniversalProvider;throw new Rf}get session(){if(!this._session)throw new Rf;return this._session}get publicKey(){var e,r,n;if((e=this._UniversalProvider)!=null&&e.session&&this._session){const{address:i}=bse(((n=(r=this._session)==null?void 0:r.namespaces.solana)==null?void 0:n.accounts[0])??"");return new Te(i)}throw new Rf}async signTransaction(e){this.checkIfWalletSupportsMethod(bo.signTransaction);const r=xo(e),n=r?{}:e,{signature:i,transaction:s}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:bo.signTransaction,params:{...n,transaction:this.serialize(e)}}});return s?this.deserialize(s,r):(e.addSignature(this.publicKey,Buffer.from(Q_.decode(i))),e)}async signMessage(e){this.checkIfWalletSupportsMethod(bo.signMessage);const{signature:r}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:bo.signMessage,params:{pubkey:this.publicKey.toString(),message:Q_.encode(e)}}});return Q_.decode(r)}async signAndSendTransaction(e){this.checkIfWalletSupportsMethod(bo.signAndSendTransaction);const{signature:r}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:bo.signAndSendTransaction,params:{transaction:this.serialize(e)}}});return r}async signAllTransactions(e){try{this.checkIfWalletSupportsMethod(bo.signAllTransactions);const r=e.map(i=>this.serialize(i)),{transactions:n}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:bo.signAllTransactions,params:{transactions:r}}});return e.map((i,s)=>xo(i)?this.deserialize(n[s]??"",!0):this.deserialize(n[s]??""))}catch(r){if(r instanceof p$){const n=e.map(s=>this.signTransaction(s));return await Promise.all(n)}throw r}}async initClient(e){const r=await R1e.init(e);this._UniversalProvider=r,this._ConnectQueueResolver&&this._ConnectQueueResolver(!0)}async initModal(){if(!this._modal){if(!this._UniversalProvider)throw new Error("WalletConnect Adapter - cannot init modal when Universal Provider is undefined");this._modal=R6e({projectId:this._projectId,universalProvider:this._UniversalProvider,networks:[rx,nx,C6e],manualWCControl:!0})}}serialize(e){return Buffer.from(e.serialize({verifySignatures:!1})).toString("base64")}deserialize(e,r=!1){return r?ap.deserialize(Buffer.from(e,"base64")):yi.from(Buffer.from(e,"base64"))}checkIfWalletSupportsMethod(e){var r;if(!((r=this.session.namespaces.solana)!=null&&r.methods.includes(e)))throw new p$(e)}}const F6e="WalletConnect";class z6e extends CI{constructor(r){super();ot(this,"name",F6e);ot(this,"url","https://walletconnect.org");ot(this,"icon","data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE4NSIgdmlld0JveD0iMCAwIDMwMCAxODUiIHdpZHRoPSIzMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTYxLjQzODU0MjkgMzYuMjU2MjYxMmM0OC45MTEyMjQxLTQ3Ljg4ODE2NjMgMTI4LjIxMTk4NzEtNDcuODg4MTY2MyAxNzcuMTIzMjA5MSAwbDUuODg2NTQ1IDUuNzYzNDE3NGMyLjQ0NTU2MSAyLjM5NDQwODEgMi40NDU1NjEgNi4yNzY1MTEyIDAgOC42NzA5MjA0bC0yMC4xMzY2OTUgMTkuNzE1NTAzYy0xLjIyMjc4MSAxLjE5NzIwNTEtMy4yMDUzIDEuMTk3MjA1MS00LjQyODA4MSAwbC04LjEwMDU4NC03LjkzMTE0NzljLTM0LjEyMTY5Mi0zMy40MDc5ODE3LTg5LjQ0Mzg4Ni0zMy40MDc5ODE3LTEyMy41NjU1Nzg4IDBsLTguNjc1MDU2MiA4LjQ5MzYwNTFjLTEuMjIyNzgxNiAxLjE5NzIwNDEtMy4yMDUzMDEgMS4xOTcyMDQxLTQuNDI4MDgwNiAwbC0yMC4xMzY2OTQ5LTE5LjcxNTUwMzFjLTIuNDQ1NTYxMi0yLjM5NDQwOTItMi40NDU1NjEyLTYuMjc2NTEyMiAwLTguNjcwOTIwNHptMjE4Ljc2Nzc5NjEgNDAuNzczNzQ0OSAxNy45MjE2OTcgMTcuNTQ2ODk3YzIuNDQ1NTQ5IDIuMzk0Mzk2OSAyLjQ0NTU2MyA2LjI3NjQ3NjkuMDAwMDMxIDguNjcwODg5OWwtODAuODEwMTcxIDc5LjEyMTEzNGMtMi40NDU1NDQgMi4zOTQ0MjYtNi40MTA1ODIgMi4zOTQ0NTMtOC44NTYxNi4wMDAwNjItLjAwMDAxLS4wMDAwMS0uMDAwMDIyLS4wMDAwMjItLjAwMDAzMi0uMDAwMDMybC01Ny4zNTQxNDMtNTYuMTU0NTcyYy0uNjExMzktLjU5ODYwMi0xLjYwMjY1LS41OTg2MDItMi4yMTQwNCAwLS4wMDAwMDQuMDAwMDA0LS4wMDAwMDcuMDAwMDA4LS4wMDAwMTEuMDAwMDExbC01Ny4zNTI5MjEyIDU2LjE1NDUzMWMtMi40NDU1MzY4IDIuMzk0NDMyLTYuNDEwNTc1NSAyLjM5NDQ3Mi04Ljg1NjE2MTIuMDAwMDg3LS4wMDAwMTQzLS4wMDAwMTQtLjAwMDAyOTYtLjAwMDAyOC0uMDAwMDQ0OS0uMDAwMDQ0bC04MC44MTI0MTk0My03OS4xMjIxODVjLTIuNDQ1NTYwMjEtMi4zOTQ0MDgtMi40NDU1NjAyMS02LjI3NjUxMTUgMC04LjY3MDkxOTdsMTcuOTIxNzI5NjMtMTcuNTQ2ODY3M2MyLjQ0NTU2MDItMi4zOTQ0MDgyIDYuNDEwNTk4OS0yLjM5NDQwODIgOC44NTYxNjAyIDBsNTcuMzU0OTc3NSA1Ni4xNTUzNTdjLjYxMTM5MDguNTk4NjAyIDEuNjAyNjQ5LjU5ODYwMiAyLjIxNDAzOTggMCAuMDAwMDA5Mi0uMDAwMDA5LjAwMDAxNzQtLjAwMDAxNy4wMDAwMjY1LS4wMDAwMjRsNTcuMzUyMTAzMS01Ni4xNTUzMzNjMi40NDU1MDUtMi4zOTQ0NjMzIDYuNDEwNTQ0LTIuMzk0NTUzMSA4Ljg1NjE2MS0uMDAwMi4wMDAwMzQuMDAwMDMzNi4wMDAwNjguMDAwMDY3My4wMDAxMDEuMDAwMTAxbDU3LjM1NDkwMiA1Ni4xNTU0MzJjLjYxMTM5LjU5ODYwMSAxLjYwMjY1LjU5ODYwMSAyLjIxNDA0IDBsNTcuMzUzOTc1LTU2LjE1NDMyNDljMi40NDU1NjEtMi4zOTQ0MDkyIDYuNDEwNTk5LTIuMzk0NDA5MiA4Ljg1NjE2IDB6IiBmaWxsPSIjM2I5OWZjIi8+PC9zdmc+");ot(this,"supportedTransactionVersions",new Set(["legacy",0]));ot(this,"_publicKey");ot(this,"_connecting");ot(this,"_wallet");ot(this,"_config");ot(this,"_readyState");ot(this,"_onDisconnect");this._publicKey=null,this._connecting=!1,this._config=r,this._wallet=null,this._readyState=typeof window>"u"?Ze.Unsupported:Ze.Loadable,this._onDisconnect=this.disconnect.bind(this)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==Ze.Loadable)throw new Gc;this._connecting=!0,this._wallet=new j6e({network:this._config.network===rS.Mainnet?Mb.Mainnet:Mb.Devnet,options:this._config.options});const{publicKey:r}=await this._wallet.connect();this._publicKey=r,this.emit("connect",r),this._wallet.client.on("session_delete",this._onDisconnect)}catch(r){throw r.constructor.name==="QRCodeModalError"||r instanceof Error&&r.name==="QRCodeModalError"?new ZK:(this._connecting=!1,r)}finally{this._connecting=!1}}async disconnect(){const r=this._wallet;if(r){r.client.off("session_delete",this._onDisconnect),this._publicKey=null;try{r.client.session&&await r.disconnect()}catch(n){console.error("WalletConnectWalletAdapter: disconnect error",n),this.emit("error",new Xm(n==null?void 0:n.message,n))}}this.emit("disconnect")}async signTransaction(r){try{const n=this._wallet;if(!n)throw new Ir;try{return await n.signTransaction(r)}catch(i){throw new Xi(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}async signMessage(r){try{const n=this._wallet;if(!n)throw new Ir;try{return await n.signMessage(r)}catch(i){throw new ey(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}async signAndSendTransaction(r){try{const n=this._wallet;if(!n)throw new Ir;try{return await n.signAndSendTransaction(r)}catch(i){throw new Xi(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}async signAllTransactions(r){try{const n=this._wallet;if(!n)throw new Ir;try{return await n.signAllTransactions(r)}catch(i){throw new Xi(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}}function q6e(){const{publicKey:t,connected:e}=mu();return H.jsxs("div",{className:"wallet-card",children:[H.jsxs("div",{className:"wallet-header",children:[H.jsx("span",{className:"wallet-title",children:" WALLET"}),e&&H.jsx("span",{className:"wallet-status-badge",children:" CONNECTED"})]}),e&&t?H.jsx("div",{className:"wallet-connected",children:H.jsxs("div",{className:"wallet-display",children:[H.jsx("div",{className:"wallet-label",children:"Active Wallet"}),H.jsxs("div",{className:"wallet-pk",title:t.toString(),children:[t.toString().slice(0,10),"...",t.toString().slice(-8)]})]})}):H.jsx("div",{style:{padding:"8px 0"},children:H.jsx("div",{style:{fontSize:"11px",color:"var(--text-dim)",marginBottom:"10px",letterSpacing:"0.5px"},children:"Click button to connect real wallet"})}),H.jsx("div",{style:{marginTop:"10px"},children:H.jsx(HY,{style:{width:"100%",background:"linear-gradient(135deg, var(--info) 0%, #0088cc 100%)",color:"#fff",fontWeight:"700",fontSize:"11px",borderRadius:"3px",padding:"10px",border:"none",cursor:"pointer",fontFamily:"'Courier New', monospace",letterSpacing:"0.5px"}})})]})}function W6e(){var f,p,w,N,M;const{publicKey:t,signMessage:e,connected:r}=mu(),{connection:n}=Jm(),[i,s]=ne.useState(null),[o,a]=ne.useState(null),[c,l]=ne.useState(""),[u,h]=ne.useState(null),[d,g]=ne.useState(!1),[m,v]=ne.useState(!1),[$,_]=ne.useState(null),[x,A]=ne.useState(null),[T,k]=ne.useState(null),[D,L]=ne.useState(null),[F,B]=ne.useState(null);ne.useEffect(()=>{t&&r&&(q(),R(t.toString()))},[t,r]);const q=async()=>{try{const S=await n.getBalance(t);B((S/1e9).toFixed(2))}catch(S){console.error("Balance check error:",S)}},R=async S=>{var y,C,I,U,K,V,te,se,ce,ie;if(!S){h("Please connect wallet");return}g(!0),h(null),l(" Checking on-chain eligibility..."),_(null),A(null),L(null);try{const ve=await fetch(`http://localhost:8000/api/eligibility?wallet=${encodeURIComponent(S)}`,{method:"GET"});if(!ve.ok)throw new Error(`Server error: ${ve.status}`);const Ne=await ve.json();if(Ne.eligible){s(!0),a(Ne.allocation||0),A(Ne),Ne.proof&&k(Ne.proof),Ne.onchain&&L(Ne.onchain);const Ae=((C=(y=Ne.onchain)==null?void 0:y.reason)==null?void 0:C[0])==="nft_owned"?"NFT Holdings":((U=(I=Ne.onchain)==null?void 0:I.reason)==null?void 0:U[0])==="token_value"?"Token Value":"Allocation List";l(` ELIGIBLE!
 Reason: ${Ae}
 Value: $${((te=(V=(K=Ne.onchain)==null?void 0:K.details)==null?void 0:V.value_usd)==null?void 0:te.toFixed(2))||"N/A"}`),(se=window.showToast)==null||se.call(window," Wallet is eligible!","success")}else s(!1),a(0),l(" Not eligible for this airdrop"),(ce=window.showToast)==null||ce.call(window,"Not eligible","info")}catch(ve){const Ne=ve.message||"Failed to check eligibility";h(Ne),l(""),console.error("Eligibility check error:",ve),(ie=window.showToast)==null||ie.call(window,` ${Ne}`,"error")}finally{g(!1)}},E=S=>{S.preventDefault(),t&&(q(),R(t.toString()))},b=async()=>{var S,y;if(!t||!e||!i||o===null){h("Missing required data or wallet");return}v(!0),h(null),l(" Requesting wallet signature...");try{const C=`claim|${t.toString()}|${o}|${Date.now()}`,I=new TextEncoder().encode(C),U=await e(I),K=Buffer.from(U).toString("base64");l(" Submitting claim to blockchain...");const V=localStorage.getItem("dojo3_referrer")||null,te=await fetch("http://localhost:8000/api/claim",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet:t.toString(),amount:o,proof:T,signature:K,message:C,referrer:V})});if(!te.ok){const se=await te.json();throw new Error(se.detail||"Claim failed")}_(` Claimed ${o} DOJO tokens!`),l(""),s(!1),(S=window.showToast)==null||S.call(window,` Claimed ${o} tokens!`,"success")}catch(C){const I=C.message||"Claim failed";h(I),l(""),console.error("Claim error:",C),(y=window.showToast)==null||y.call(window,` ${I}`,"error")}finally{v(!1)}};return r?H.jsxs("div",{className:"widget",children:[H.jsx("h3",{children:" CHECK ELIGIBILITY"}),u&&H.jsx("div",{className:"error-banner",children:u}),$&&H.jsx("div",{className:"success-msg",children:$}),H.jsxs("div",{style:{background:"rgba(0,170,255,0.1)",padding:"10px",borderRadius:"3px",marginBottom:"12px",fontSize:"10px"},children:[H.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"4px"},children:"WALLET ADDRESS"}),H.jsxs("div",{style:{fontSize:"9px",fontFamily:"monospace",wordBreak:"break-all",marginBottom:"6px",color:"var(--info)"},children:[t==null?void 0:t.toString().slice(0,16),"...",t==null?void 0:t.toString().slice(-10)]}),F&&H.jsxs("div",{style:{color:"var(--success)"},children:[" SOL Balance: ",F," SOL"]})]}),H.jsx("form",{onSubmit:E,children:H.jsx("button",{type:"submit",className:`btn btn-primary ${d?"btn-loading":""}`,disabled:!t||d||m,style:{width:"100%",marginBottom:"0"},children:d?" CHECKING...":" CHECK ELIGIBILITY"})}),c&&H.jsx("div",{className:"status",style:{whiteSpace:"pre-wrap"},children:c}),i&&D&&H.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border)"},children:[H.jsx("h4",{style:{margin:"0 0 10px",fontSize:"11px",color:"var(--accent)"},children:" ON-CHAIN DETAILS"}),((p=(f=D.details)==null?void 0:f.tokens)==null?void 0:p.length)>0&&H.jsxs("div",{style:{marginBottom:"12px",fontSize:"10px"},children:[H.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"6px"},children:" TOKENS HELD:"}),D.details.tokens.map((S,y)=>H.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"6px",borderRadius:"2px",marginBottom:"4px",fontSize:"9px"},children:[H.jsxs("div",{style:{fontFamily:"monospace",color:"var(--info)"},children:[S.mint.slice(0,8),"..."]}),H.jsxs("div",{children:["Balance: ",parseFloat(S.balance).toFixed(2)]}),S.price&&H.jsxs("div",{children:["Price: $",S.price]}),S.value&&H.jsxs("div",{style:{color:"var(--success)",fontWeight:"bold"},children:["Value: $",parseFloat(S.value).toFixed(2)]})]},y))]}),((N=(w=D.details)==null?void 0:w.nfts)==null?void 0:N.length)>0&&H.jsxs("div",{style:{marginBottom:"12px",fontSize:"10px"},children:[H.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"6px"},children:" NFTs HELD:"}),D.details.nfts.map((S,y)=>H.jsxs("div",{style:{background:S.owns?"rgba(0,221,136,0.1)":"rgba(255,0,0,0.1)",padding:"6px",borderRadius:"2px",marginBottom:"4px",fontSize:"9px",borderLeft:`2px solid ${S.owns?"var(--success)":"var(--warning)"}`},children:[H.jsxs("div",{style:{fontFamily:"monospace",color:"var(--info)"},children:[S.mint.slice(0,8),"..."]}),H.jsx("div",{style:{color:S.owns?"var(--success)":"var(--warning)"},children:S.owns?" OWNED":" NOT OWNED"})]},y))]}),H.jsxs("div",{style:{background:"rgba(255,204,0,0.1)",padding:"8px",borderRadius:"2px",borderLeft:"2px solid var(--accent)",fontSize:"10px"},children:[H.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"4px"},children:"TOTAL VALUE"}),H.jsxs("div",{style:{fontSize:"14px",fontWeight:"bold",color:"var(--accent)"},children:["$",(((M=D.details)==null?void 0:M.value_usd)||0).toFixed(2)," USD"]})]})]}),i&&!$&&H.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border)"},children:[H.jsxs("div",{style:{background:"rgba(0,221,136,0.1)",padding:"12px",borderRadius:"3px",marginBottom:"12px",fontSize:"11px"},children:[H.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"6px",letterSpacing:"0.5px"},children:" ELIGIBLE - AIRDROP ALLOCATION"}),H.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"var(--success)"},children:[o," DOJO"]})]}),H.jsx("button",{onClick:b,className:`btn btn-primary ${m?"btn-loading":""}`,disabled:m,style:{width:"100%",marginBottom:"0"},children:m?" CLAIMING...":" CLAIM TOKENS"})]}),i===!1&&H.jsx("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border)"},children:H.jsxs("div",{className:"warning",children:[H.jsx("strong",{children:" Not Eligible"}),H.jsx("br",{}),"This wallet doesn't qualify yet. To become eligible:",H.jsxs("ul",{style:{margin:"8px 0 0 20px",fontSize:"10px",lineHeight:"1.6"},children:[H.jsx("li",{children:"Hold monitored tokens worth $100+ USD"}),H.jsx("li",{children:"Hold eligible NFT collections"}),H.jsx("li",{children:"Stake 0.5+ SOL for 3+ days"})]})]})})]}):H.jsxs("div",{className:"widget",children:[H.jsx("h3",{children:" CHECK ELIGIBILITY"}),H.jsx("div",{className:"warning",children:"Connect your wallet to check eligibility for the airdrop"})]})}function H6e(){return H.jsxs("div",{id:"project",className:"widget",children:[H.jsx("h3",{children:" TOKENOMICS"}),H.jsxs("div",{style:{background:"rgba(255,204,0,0.05)",padding:"14px",borderRadius:"3px",marginTop:"12px",fontSize:"11px",border:"1px solid var(--border)",lineHeight:"1.8"},children:[H.jsxs("div",{style:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid var(--border)"},children:[H.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"4px",letterSpacing:"0.5px"},children:"TOTAL SUPPLY"}),H.jsx("div",{style:{fontSize:"14px",fontWeight:"bold",color:"var(--accent)"},children:"850,000,000 DOJO"})]}),H.jsxs("div",{style:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid var(--border)"},children:[H.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"6px"},children:"ALLOCATION BREAKDOWN"}),H.jsxs("div",{style:{marginBottom:"4px"},children:[" Airdrop: ",H.jsx("strong",{style:{color:"var(--success)"},children:"60%"})," (510M)"]}),H.jsxs("div",{style:{marginBottom:"4px"},children:[" Public Sale: ",H.jsx("strong",{children:"40%"})]}),H.jsxs("div",{children:[" Referral Bonus: ",H.jsx("strong",{children:"24%"})," of allocation"]})]}),H.jsxs("div",{style:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid var(--border)"},children:[H.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"4px"},children:"VALUATION"}),H.jsxs("div",{children:[H.jsx("strong",{children:"Target Price:"})," $0.00001"]})]}),H.jsxs("div",{children:[H.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"6px",fontSize:"10px"},children:" Secure Contract"}),H.jsx("div",{style:{fontSize:"9px",color:"var(--text-dim)",fontStyle:"italic"},children:" Contract audited and deployed"})]})]}),H.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border)"},children:[H.jsx("h4",{style:{margin:"0 0 10px",fontSize:"12px",color:"var(--accent)",letterSpacing:"0.5px"},children:" ELIGIBILITY RULES"}),H.jsxs("div",{style:{fontSize:"11px",lineHeight:"1.8",color:"var(--text-dim)"},children:[H.jsx("div",{style:{marginBottom:"8px"},children:" Hold $100+ USD in verified tokens"}),H.jsx("div",{style:{marginBottom:"8px"},children:" Own Pudgy Penguins or verified NFTs"}),H.jsx("div",{style:{marginBottom:"8px"},children:" Stake 0.5+ SOL for 3+ days"}),H.jsx("div",{children:" Participate in community events"})]})]}),H.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border)"},children:[H.jsx("h4",{style:{margin:"0 0 10px",fontSize:"12px",color:"var(--accent)",letterSpacing:"0.5px"},children:" STAKING REWARDS"}),H.jsxs("div",{style:{fontSize:"11px",lineHeight:"1.8",color:"var(--text-dim)"},children:[H.jsxs("div",{style:{marginBottom:"8px"},children:[" Minimum: ",H.jsx("strong",{children:"0.5 SOL"})]}),H.jsxs("div",{style:{marginBottom:"8px"},children:[" Lock Period: ",H.jsx("strong",{children:"3 Days"})]}),H.jsxs("div",{style:{marginBottom:"8px"},children:[" Reward: ",H.jsx("strong",{children:"Exclusive Dojo3 Pixel NFT"})]}),H.jsx("div",{children:" Supply: Limited to 999"})]})]})]})}new Te("HMwy4JHwuLkMMR3q6B3atwZ4oUAGrc3yHtgC7MswWNY1");const K6e="8pSyRMP7R5qDU5BTqR93rESA1R2h5jH6hdPRjXmjnj8u",Ou=.5;function V6e(){const t=mu(),{publicKey:e,connected:r}=t,{connection:n}=Jm(),[i,s]=ne.useState(!1),[o,a]=ne.useState(""),[c,l]=ne.useState(null),[u,h]=ne.useState(null),[d,g]=ne.useState(0);ne.useEffect(()=>{e&&r&&m()},[e,r,n]);const m=async()=>{try{const $=await n.getBalance(e);g($/mh)}catch($){console.error("Balance check error:",$)}},v=async()=>{var $,_;if(!e||!r){l("Please connect wallet first");return}if(d<Ou){l(`Insufficient balance. You need ${Ou} SOL`);return}if(!t.sendTransaction){l("Wallet does not support transaction sending");return}s(!0),l(null),a(" Creating transaction...");try{const{blockhash:x}=await n.getLatestBlockhash(),A=new Te(K6e),T=hu.transfer({fromPubkey:e,toPubkey:A,lamports:Math.floor(Ou*mh)}),k=new yi({recentBlockhash:x,feePayer:e});k.add(T),a(" Requesting wallet signature...");const D=await t.sendTransaction(k,n);console.log("Transaction sent:",D),h(D),a(` Confirming transaction... ${D.slice(0,8)}...`);const L=await n.confirmTransaction(D,"confirmed");if(console.log("Confirmation result:",L),L.value.err)throw new Error("Transaction failed on chain");a(` Successfully staked ${Ou} SOL! You'll receive an NFT after 3 days.`),($=window.showToast)==null||$.call(window,` Staked ${Ou} SOL!`,"success"),setTimeout(m,1e3)}catch(x){const A=(x==null?void 0:x.message)||(x==null?void 0:x.toString())||"Staking failed";console.error("Staking error:",x),l(A),a(""),(_=window.showToast)==null||_.call(window,` ${A}`,"error")}finally{s(!1)}};return r?H.jsxs("div",{className:"widget",children:[H.jsx("h3",{children:" NFT STAKING PROGRAM"}),c&&H.jsx("div",{className:"error-banner",children:c}),o&&H.jsx("div",{className:"status",children:o}),H.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border)"},children:[H.jsxs("div",{style:{background:"rgba(0,170,255,0.1)",padding:"12px",borderRadius:"3px",marginBottom:"14px",fontSize:"11px"},children:[H.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"6px",letterSpacing:"0.5px"},children:"BALANCE"}),H.jsxs("div",{style:{fontSize:"16px",fontWeight:"bold",color:"var(--info)"},children:[d.toFixed(3)," SOL"]})]}),H.jsx("div",{style:{background:"rgba(255,204,0,0.05)",padding:"12px",borderRadius:"3px",marginBottom:"14px",fontSize:"11px",border:"1px solid var(--border)"},children:H.jsxs("div",{style:{marginBottom:"6px",lineHeight:"1.6",color:"var(--text-dim)"},children:[H.jsx("strong",{style:{color:"var(--accent)"},children:"How it works:"}),H.jsx("br",{})," Stake 0.5 SOL or more",H.jsx("br",{})," Lock for minimum 3 days",H.jsx("br",{})," Earn exclusive Dojo3 NFT",H.jsx("br",{})," Withdraw anytime after unlock"]})}),H.jsx("button",{onClick:v,disabled:i||!r||d<Ou,className:`btn btn-primary ${i?"btn-loading":""}`,style:{width:"100%",marginBottom:"0"},children:i?" STAKING...":` STAKE ${Ou} SOL`}),u&&H.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid var(--border)"},children:[H.jsx("div",{style:{fontSize:"11px",color:"var(--text-dim)",marginBottom:"6px"},children:"Transaction Hash:"}),H.jsx("div",{style:{fontSize:"10px",fontFamily:"monospace",color:"var(--success)",wordBreak:"break-all",background:"rgba(0,0,0,0.2)",padding:"8px",borderRadius:"2px"},children:u})]})]})]}):H.jsxs("div",{className:"widget",children:[H.jsx("h3",{children:" NFT STAKING"}),H.jsx("div",{className:"warning",children:"Connect your wallet to start staking"})]})}const G6e=()=>{const t=document.createElement("canvas");t.width=128,t.height=128;const e=t.getContext("2d"),r=e.createLinearGradient(0,0,128,128);r.addColorStop(0,"#FFD700"),r.addColorStop(.5,"#FFA500"),r.addColorStop(1,"#FF8C00"),e.fillStyle=r,e.fillRect(0,0,128,128);const n=8;return e.fillStyle="#FFD700",e.fillRect(5*n,2*n,6*n,6*n),e.fillStyle="#FF8C00",e.fillRect(4*n,1*n,8*n,2*n),e.fillStyle="#000",e.fillRect(6*n,3*n,1*n,1*n),e.fillRect(9*n,3*n,1*n,1*n),e.fillStyle="#FF4500",e.fillRect(5*n,8*n,6*n,6*n),e.fillStyle="#FFD700",e.fillRect(5*n,8*n,2*n,6*n),e.fillRect(9*n,8*n,2*n,6*n),e.fillStyle="#000",e.fillRect(6*n,14*n,1*n,2*n),e.fillRect(9*n,14*n,1*n,2*n),e.fillStyle="#C0C0C0",e.fillRect(11*n,9*n,1*n,7*n),e.fillStyle="#FFD700",e.fillRect(11*n,9*n,1*n,1*n),t.toDataURL()},Y6e=()=>{const t=document.createElement("canvas");t.width=128,t.height=128;const e=t.getContext("2d"),r=e.createLinearGradient(0,0,128,128);r.addColorStop(0,"#9370DB"),r.addColorStop(.5,"#8A2BE2"),r.addColorStop(1,"#4B0082"),e.fillStyle=r,e.fillRect(0,0,128,128);const n=8;return e.fillStyle="#FFD700",e.fillRect(5*n,2*n,6*n,6*n),e.fillStyle="#000",e.fillRect(4*n,2*n,8*n,3*n),e.fillStyle="#FF0000",e.fillRect(6*n,3*n,1*n,1*n),e.fillRect(9*n,3*n,1*n,1*n),e.fillStyle="#1a1a1a",e.fillRect(4*n,8*n,8*n,7*n),e.fillStyle="#FFD700",e.fillRect(4*n,12*n,8*n,1*n),e.fillStyle="#000",e.fillRect(5*n,15*n,1*n,2*n),e.fillRect(10*n,15*n,1*n,2*n),e.fillStyle="#C0C0C0",e.fillRect(12*n,10*n,1*n,2*n),e.fillRect(13*n,9*n,1*n,3*n),e.fillStyle="#000",e.fillRect(14*n,10*n,1*n,1*n),t.toDataURL()},Q6e=()=>{const t=document.createElement("canvas");t.width=128,t.height=128;const e=t.getContext("2d"),r=e.createLinearGradient(0,0,128,128);r.addColorStop(0,"#4169E1"),r.addColorStop(.5,"#1E90FF"),r.addColorStop(1,"#0047AB"),e.fillStyle=r,e.fillRect(0,0,128,128);const n=8;return e.fillStyle="#8B0000",e.fillRect(4*n,1*n,8*n,7*n),e.fillStyle="#FFD700",e.fillRect(3*n,0*n,1*n,2*n),e.fillRect(12*n,0*n,1*n,2*n),e.fillStyle="#FF0000",e.fillRect(6*n,2*n,2*n,2*n),e.fillRect(10*n,2*n,2*n,2*n),e.fillStyle="#FFD700",e.fillRect(5*n,5*n,6*n,1*n),e.fillStyle="#FFF",e.fillRect(5*n,6*n,1*n,1*n),e.fillRect(7*n,6*n,1*n,1*n),e.fillRect(9*n,6*n,1*n,1*n),e.fillStyle="#8B0000",e.fillRect(2*n,8*n,12*n,8*n),e.fillStyle="#FFD700",e.fillRect(3*n,7*n,1*n,1*n),e.fillRect(6*n,7*n,1*n,1*n),e.fillRect(9*n,7*n,1*n,1*n),e.fillRect(12*n,7*n,1*n,1*n),e.fillStyle="#8B0000",e.fillRect(13*n,10*n,2*n,3*n),e.fillStyle="#FFD700",e.fillRect(14*n,13*n,1*n,1*n),e.fillStyle="#8B0000",e.fillRect(4*n,16*n,2*n,1*n),e.fillRect(10*n,16*n,2*n,1*n),t.toDataURL()},Z6e=({src:t,alt:e,size:r=120})=>H.jsx("div",{style:{position:"relative",width:r,height:r,margin:"0 auto 10px"},children:H.jsx("img",{src:t,alt:e,style:{width:"100%",height:"100%",imageRendering:"pixelated",imageRendering:"crisp-edges",imageRendering:"-webkit-optimize-contrast",border:"2px solid var(--accent)",borderRadius:"2px",backgroundColor:"rgba(0,0,0,0.3)"}})}),J6e=()=>({warrior:G6e(),sniper:Y6e(),beast:Q6e()}),Z_=J6e(),X6e=[{id:"warrior",name:" WARRIOR NFT",rarity:"Legendary",price_eligible:.01,price_regular:.2,supply:333,description:"Fearless warrior ready for battle",attributes:["Power","Speed","Armor","Wisdom"],image:()=>Z_.warrior},{id:"sniper",name:" SNIPER NFT",rarity:"Epic",price_eligible:.01,price_regular:.2,supply:333,description:"Precision and accuracy at peak",attributes:["Precision","Focus","Agility","Intel"],image:()=>Z_.sniper},{id:"beast",name:" BEAST NFT",rarity:"Rare",price_eligible:.01,price_regular:.2,supply:333,description:"Unstoppable force of nature",attributes:["Strength","Endurance","Bite","Roar"],image:()=>Z_.beast}],J_=.01,eAe="8pSyRMP7R5qDU5BTqR93rESA1R2h5jH6hdPRjXmjnj8u";function tAe(){const t=mu(),{publicKey:e,connected:r,sendTransaction:n}=t,{connection:i}=Jm(),[s,o]=ne.useState(!1),[a,c]=ne.useState(null),[l,u]=ne.useState(""),[h,d]=ne.useState(null),[g,m]=ne.useState(!1),[v,$]=ne.useState(0);ne.useEffect(()=>{e&&r&&(_(),x())},[e,r,i]);const _=async()=>{try{const T=await i.getBalance(e);$(T/mh)}catch(T){console.error("Balance check error:",T)}},x=async()=>{try{const k=await(await fetch(`http://localhost:8000/api/eligibility?wallet=${e.toString()}`)).json();m(k.eligible||!1)}catch(T){console.error("Eligibility check error:",T)}},A=async T=>{var L,F;if(!e||!r){c("Please connect wallet first");return}if(!n){c("Wallet does not support transactions");return}const D=(g?T.price_eligible:T.price_regular)+J_;if(v<D){c(`Insufficient balance. You need ${D} SOL`);return}d(T.id),o(!0),c(null),u(` Preparing to mint ${T.name}...`);try{const{blockhash:B}=await i.getLatestBlockhash(),q=new Te(eAe),R=hu.transfer({fromPubkey:e,toPubkey:q,lamports:Math.floor(D*mh)}),E=new yi({recentBlockhash:B,feePayer:e});E.add(R),u(` Requesting wallet signature for ${T.name}...`);const b=await n(E,i);if(console.log("Transaction sent:",b),u(` Confirming payment for ${T.name}... ${b.slice(0,8)}...`),(await i.confirmTransaction(b,"confirmed")).value.err)throw new Error("Payment failed on chain");u(` ${T.name} NFT MINTED!

 Payment: ${D} SOL confirmed
 Rarity: ${T.rarity}
 Traits: ${T.attributes.join(", ")}
 Txn: ${b.slice(0,16)}...

Your NFT is in your wallet!`),(L=window.showToast)==null||L.call(window,` ${T.name} NFT minted!`,"success"),setTimeout(_,1e3),d(null)}catch(B){const q=(B==null?void 0:B.message)||(B==null?void 0:B.toString())||"NFT minting failed";console.error("Minting error:",B),q.includes("User rejected")||q.includes("user rejected")?c("Transaction rejected by user"):q.includes("Insufficient")?c("Insufficient balance"):c(q),u(""),(F=window.showToast)==null||F.call(window,` ${q}`,"error")}finally{o(!1)}};return r?H.jsxs("div",{className:"widget",children:[H.jsx("h3",{children:" NFT COLLECTIONS & MINTING"}),a&&H.jsx("div",{className:"error-banner",children:a}),l&&H.jsx("div",{className:"status",style:{whiteSpace:"pre-wrap"},children:l}),H.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border)"},children:[H.jsxs("div",{style:{background:"rgba(0,170,255,0.1)",padding:"12px",borderRadius:"3px",marginBottom:"14px",fontSize:"11px"},children:[H.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"6px"},children:"YOUR STATUS"}),H.jsxs("div",{style:{marginBottom:"6px"},children:[" Balance: ",H.jsxs("strong",{style:{color:"var(--info)"},children:[v.toFixed(3)," SOL"]})]}),H.jsxs("div",{children:[" Eligibility: ",H.jsx("strong",{style:{color:g?"var(--success)":"var(--warning)"},children:g?"ELIGIBLE (Discount)":"NOT ELIGIBLE (Regular)"})]})]}),H.jsxs("div",{style:{marginBottom:"16px",paddingBottom:"12px",borderBottom:"1px solid var(--border)"},children:[H.jsx("h4",{style:{margin:"0 0 10px",fontSize:"12px",color:"var(--accent)"},children:" PRICING"}),H.jsxs("div",{style:{fontSize:"11px",lineHeight:"1.8",color:"var(--text-dim)"},children:[H.jsxs("div",{style:{marginBottom:"6px"},children:[H.jsx("strong",{children:"Eligible:"})," 0.01 SOL + 0.01 SOL fee = 0.02 SOL total"]}),H.jsxs("div",{style:{marginBottom:"6px"},children:[H.jsx("strong",{children:"Regular:"})," 0.2 SOL + 0.01 SOL fee = 0.21 SOL total"]}),H.jsx("div",{style:{background:"rgba(255,204,0,0.1)",padding:"8px",borderRadius:"2px",border:"1px solid var(--border)"},children:" Stake 0.5+ SOL for 3 days to unlock discount rates!"})]})]}),H.jsxs("div",{children:[H.jsx("h4",{style:{margin:"0 0 12px",fontSize:"12px",color:"var(--accent)"},children:" AVAILABLE COLLECTIONS"}),H.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"12px"},children:X6e.map(T=>{const k=g?T.price_eligible:T.price_regular,D=k+J_,L=v>=D;return H.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",border:"1px solid var(--border)",borderRadius:"4px",padding:"12px"},children:[H.jsx("div",{style:{fontSize:"16px",marginBottom:"8px"},children:H.jsx("strong",{children:T.name})}),H.jsx(Z6e,{src:typeof T.image=="function"?T.image():T.image,alt:T.name,size:100}),H.jsxs("div",{style:{fontSize:"10px",color:"var(--text-dim)",marginBottom:"8px"},children:[H.jsxs("div",{style:{marginBottom:"4px"},children:[H.jsx("strong",{children:"Rarity:"})," ",H.jsx("span",{style:{color:T.rarity==="Legendary"?"#FFD700":T.rarity==="Epic"?"#9370DB":"#4169E1"},children:T.rarity})]}),H.jsxs("div",{style:{marginBottom:"4px"},children:[H.jsx("strong",{children:"Supply:"})," ",T.supply," NFTs"]}),H.jsx("div",{style:{marginBottom:"6px",lineHeight:"1.4"},children:T.description}),H.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"6px",borderRadius:"2px",marginBottom:"6px"},children:["Traits: ",T.attributes.join(", ")]})]}),H.jsxs("div",{style:{background:"rgba(255,204,0,0.1)",padding:"8px",borderRadius:"2px",marginBottom:"10px",fontSize:"11px",border:"1px solid var(--border)"},children:[H.jsxs("div",{children:[" NFT: ",k," SOL"]}),H.jsxs("div",{children:["+ Fee: ",J_," SOL"]}),H.jsxs("div",{style:{fontWeight:"bold",color:"var(--accent)",marginTop:"4px"},children:["= ",D," SOL"]})]}),H.jsx("button",{onClick:()=>A(T),disabled:s||h===T.id||!L,style:{width:"100%",padding:"8px",background:L?"var(--accent)":"var(--warning)",border:"none",borderRadius:"3px",color:"#000",fontSize:"11px",fontWeight:"bold",cursor:L?"pointer":"not-allowed",opacity:L?1:.5},children:s&&h===T.id?" MINTING...":L?` MINT (${D} SOL)`:" INSUFFICIENT SOL"})]},T.id)})})]})]})]}):H.jsxs("div",{className:"widget",children:[H.jsx("h3",{children:" NFT COLLECTIONS"}),H.jsx("div",{className:"warning",children:"Connect your wallet to browse and mint NFTs"})]})}const q0=.5,zw=.1,m$="8pSyRMP7R5qDU5BTqR93rESA1R2h5jH6hdPRjXmjnj8u";function rAe(){const t=mu(),{publicKey:e,connected:r,sendTransaction:n}=t,{connection:i}=Jm(),[s,o]=ne.useState([]),[a,c]=ne.useState(!1),[l,u]=ne.useState(null),[h,d]=ne.useState(""),[g,m]=ne.useState(0),[v,$]=ne.useState(!1),[_,x]=ne.useState({name:"",description:"",template:"classic",color:"#4ECDC4"}),[A,T]=ne.useState(null),[k,D]=ne.useState(!1);ne.useEffect(()=>{e&&r&&(L(),F())},[e,r]);const L=async()=>{try{const E=await i.getBalance(e);m((E/mh).toFixed(3))}catch(E){console.error("Balance load error:",E)}},F=async()=>{try{const E=await fetch(`http://localhost:8000/api/sites?wallet=${e.toString()}`);if(E.ok){const b=await E.json();o(b.sites||[])}}catch(E){console.error("Sites load error:",E)}},B=async E=>{var b,f;if(E.preventDefault(),!_.name.trim()){u("Site name is required");return}if(g<q0){u(`Insufficient balance required: ${q0} SOL`);return}D(!0),u(null),d(" Processing payment...");try{const{blockhash:p}=await i.getLatestBlockhash(),w=new Te(m$),N=hu.transfer({fromPubkey:e,toPubkey:w,lamports:Math.floor(q0*mh)}),M=new yi({recentBlockhash:p,feePayer:e});M.add(N),d(" Requesting wallet signature...");const S=await n(M,i);if(d(" Confirming transaction..."),(await i.confirmTransaction(S,"confirmed")).value.err)throw new Error("Payment confirmation failed on-chain");const I=await fetch("http://localhost:8000/api/sites/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet:e.toString(),name:_.name,description:_.description,template:_.template,color:_.color,txid:S,timestamp:new Date().toISOString()})});if(!I.ok)throw new Error("Failed to save site");const U=await I.json(),V=`http://${e.toString().slice(0,8).toLowerCase()}.dojo3`;d(` Site created successfully!
 Link: ${V}`),x({name:"",description:"",template:"classic",color:"#4ECDC4"}),$(!1),(b=window.showToast)==null||b.call(window," Site created successfully!","success"),setTimeout(()=>{L(),F(),d("")},2e3)}catch(p){const w=(p==null?void 0:p.message)||"Failed to create site";u(w),d(""),(f=window.showToast)==null||f.call(window,` ${w}`,"error")}finally{D(!1)}},q=async E=>{var b,f;if(g<zw){u(`Insufficient balance required: ${zw} SOL`);return}D(!0),u(null),d(" Renewing site...");try{const{blockhash:p}=await i.getLatestBlockhash(),w=new Te(m$),N=hu.transfer({fromPubkey:e,toPubkey:w,lamports:Math.floor(zw*mh)}),M=new yi({recentBlockhash:p,feePayer:e});M.add(N);const S=await n(M,i);if((await i.confirmTransaction(S,"confirmed")).value.err)throw new Error("Failed to renew site");await fetch("http://localhost:8000/api/sites/renew",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({site_id:E,wallet:e.toString(),txid:S,timestamp:new Date().toISOString()})}),d(" Site renewed successfully!"),(b=window.showToast)==null||b.call(window," Site renewed!","success"),setTimeout(()=>{L(),F(),d("")},2e3)}catch(p){const w=(p==null?void 0:p.message)||"Renewal failed";u(w),d(""),(f=window.showToast)==null||f.call(window,` ${w}`,"error")}finally{D(!1)}},R=async E=>{var b,f;if(confirm("Are you sure you want to permanently delete this site?"))try{if(!(await fetch("http://localhost:8000/api/sites/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({site_id:E,wallet:e.toString()})})).ok)throw new Error("Failed to delete site");(b=window.showToast)==null||b.call(window," Site deleted","success"),F()}catch(p){(f=window.showToast)==null||f.call(window,` ${p.message}`,"error")}};return r?H.jsxs("div",{className:"widget",children:[H.jsx("h3",{children:" SITE MANAGER"}),l&&H.jsx("div",{className:"error-banner",children:l}),h&&H.jsx("div",{className:"status",style:{whiteSpace:"pre-wrap"},children:h}),H.jsxs("div",{style:{background:"rgba(0,170,255,0.1)",padding:"12px",borderRadius:"3px",marginBottom:"16px",fontSize:"11px"},children:[H.jsx("div",{style:{color:"var(--text-dim)",marginBottom:"6px"},children:" BALANCE"}),H.jsxs("div",{style:{fontSize:"14px",fontWeight:"bold",color:"var(--info)",marginBottom:"6px"},children:[g," SOL"]}),H.jsxs("div",{style:{fontSize:"9px",color:"var(--text-dim)",lineHeight:"1.5"},children:[H.jsxs("div",{children:[" Create Site: ",q0," SOL"]}),H.jsxs("div",{children:[" Monthly Renewal: ",zw," SOL"]})]})]}),v?H.jsxs("form",{onSubmit:B,style:{marginBottom:"16px",paddingBottom:"16px",borderBottom:"1px solid var(--border)"},children:[H.jsx("h4",{style:{margin:"0 0 10px",fontSize:"12px",color:"var(--accent)"},children:" CREATE NEW SITE"}),H.jsx("input",{type:"text",placeholder:"Site Name",value:_.name,onChange:E=>x({..._,name:E.target.value}),style:{width:"100%",padding:"8px",marginBottom:"10px",border:"1px solid var(--border)",borderRadius:"3px",background:"rgba(0,0,0,0.2)",color:"inherit",fontSize:"11px"}}),H.jsx("textarea",{placeholder:"Site Description",value:_.description,onChange:E=>x({..._,description:E.target.value}),style:{width:"100%",padding:"8px",marginBottom:"10px",border:"1px solid var(--border)",borderRadius:"3px",background:"rgba(0,0,0,0.2)",color:"inherit",fontSize:"11px",resize:"vertical",minHeight:"60px"}}),H.jsxs("select",{value:_.template,onChange:E=>x({..._,template:E.target.value}),style:{width:"100%",padding:"8px",marginBottom:"10px",border:"1px solid var(--border)",borderRadius:"3px",background:"rgba(0,0,0,0.2)",color:"inherit",fontSize:"11px"},children:[H.jsx("option",{value:"classic",children:" Classic Template"}),H.jsx("option",{value:"modern",children:" Modern Template"}),H.jsx("option",{value:"minimal",children:" Minimal Template"}),H.jsx("option",{value:"gaming",children:" Gaming Template"})]}),H.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[H.jsx("input",{type:"color",value:_.color,onChange:E=>x({..._,color:E.target.value}),style:{width:"50px",height:"36px",border:"none",borderRadius:"3px",cursor:"pointer"}}),H.jsxs("div",{style:{flex:1,padding:"8px",background:"rgba(0,0,0,0.2)",borderRadius:"3px",fontSize:"11px"},children:["Primary Color: ",_.color]})]}),H.jsxs("div",{style:{background:"rgba(255,204,0,0.1)",padding:"10px",borderRadius:"3px",marginBottom:"10px",fontSize:"10px",border:"1px solid var(--border)"},children:[H.jsx("strong",{children:" Fee:"}),H.jsxs("div",{children:[q0," SOL will be transferred to treasury"]})]}),H.jsxs("div",{style:{display:"flex",gap:"10px"},children:[H.jsx("button",{type:"submit",disabled:k,style:{flex:1,padding:"8px",background:"var(--accent)",border:"none",borderRadius:"3px",color:"#000",fontWeight:"bold",fontSize:"11px",cursor:k?"not-allowed":"pointer",opacity:k?.5:1},children:k?" Processing...":" CREATE SITE"}),H.jsx("button",{type:"button",onClick:()=>$(!1),style:{flex:1,padding:"8px",background:"rgba(255,255,255,0.1)",border:"1px solid var(--border)",borderRadius:"3px",color:"inherit",fontSize:"11px",cursor:"pointer"},children:"CANCEL"})]})]}):H.jsx("button",{onClick:()=>$(!0),style:{width:"100%",padding:"10px",background:"var(--accent)",border:"none",borderRadius:"3px",color:"#000",fontWeight:"bold",fontSize:"12px",cursor:"pointer",marginBottom:"16px"},children:" CREATE NEW SITE"}),s.length>0?H.jsxs("div",{children:[H.jsx("h4",{style:{margin:"0 0 10px",fontSize:"12px",color:"var(--accent)"},children:" YOUR SITES"}),s.map(E=>H.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",padding:"12px",borderRadius:"3px",marginBottom:"10px",border:`2px solid ${E.color}`},children:[H.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"8px"},children:[H.jsxs("div",{children:[H.jsx("div",{style:{fontSize:"13px",fontWeight:"bold",color:E.color},children:E.name}),H.jsx("div",{style:{fontSize:"9px",color:"var(--text-dim)",marginTop:"4px"},children:E.description})]}),H.jsxs("div",{style:{fontSize:"11px",color:"var(--text-dim)",textAlign:"right"},children:[" ",E.template]})]}),H.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"8px",borderRadius:"2px",marginBottom:"10px",fontSize:"9px",fontFamily:"monospace",wordBreak:"break-all"},children:[" ",window.location.origin,"/sites/",E.id]}),H.jsxs("div",{style:{display:"flex",gap:"8px"},children:[H.jsx("button",{onClick:()=>window.open(`/sites/${E.id}`,"_blank"),style:{flex:1,padding:"6px",background:"rgba(76,205,196,0.2)",border:"1px solid var(--border)",borderRadius:"2px",color:"inherit",fontSize:"10px",cursor:"pointer"},children:" VIEW"}),H.jsx("button",{onClick:()=>q(E.id),style:{flex:1,padding:"6px",background:"rgba(255,204,0,0.2)",border:"1px solid var(--border)",borderRadius:"2px",color:"inherit",fontSize:"10px",cursor:"pointer"},children:" RENEW"}),H.jsx("button",{onClick:()=>R(E.id),style:{flex:1,padding:"6px",background:"rgba(255,0,0,0.2)",border:"1px solid var(--border)",borderRadius:"2px",color:"inherit",fontSize:"10px",cursor:"pointer"},children:" DELETE"})]})]},E.id))]}):H.jsxs("div",{style:{background:"rgba(100,100,100,0.1)",padding:"16px",borderRadius:"3px",textAlign:"center",fontSize:"11px",color:"var(--text-dim)"},children:["No sites created yet",H.jsx("br",{}),"Start now and create your first site! "]})]}):H.jsxs("div",{className:"widget",children:[H.jsx("h3",{children:" SITE MANAGER"}),H.jsx("div",{className:"warning",children:"Connect your wallet to create and manage your personal site"})]})}function nAe(){const[t,e]=ne.useState([]);ne.useEffect(()=>(window.showToast=(n,i="info")=>{const s=Date.now()+Math.random(),a=["info","success","error","warning"].includes(i)?i:"info";e(c=>[...c,{id:s,msg:n,type:a}]),setTimeout(()=>{e(c=>c.filter(l=>l.id!==s))},4e3)},()=>{window.showToast=void 0}),[]);const r=n=>{e(i=>i.filter(s=>s.id!==n))};return H.jsx("div",{className:"toast-container",children:t.map(n=>H.jsxs("div",{className:`toast toast-${n.type}`,onClick:()=>r(n.id),role:"alert",children:[H.jsx("span",{className:"toast-content",children:n.msg}),H.jsx("button",{className:"toast-close",onClick:i=>{i.stopPropagation(),r(n.id)},"aria-label":"Close",children:""})]},n.id))})}const iAe=YK("mainnet-beta");function sAe(){const t=ne.useMemo(()=>{const i="";return[new pQ,new EQ,new dQ,new z6e({projectId:i})]},[]),e=["Airdrop","Staking","NFTs","Referral Rewards"],[r,n]=ne.useState(0);return ne.useEffect(()=>{const i=setInterval(()=>n(s=>(s+1)%e.length),2200);return()=>clearInterval(i)},[]),H.jsx(QK,{endpoint:iAe,children:H.jsx(LY,{wallets:t,autoConnect:!0,children:H.jsx(qY,{children:H.jsxs("div",{className:"pixel-app",children:[H.jsx(oAe,{}),H.jsxs("header",{className:"pixel-header",children:[H.jsx("div",{className:"brand",children:"DOJO3"}),H.jsx("div",{className:"tag",children:"AIRDROP  STAKING  NFTs  MAINNET"})]}),H.jsx("section",{className:"hero",children:H.jsxs("div",{className:"hero-inner",children:[H.jsx("h1",{style:{marginBottom:8},children:"Welcome to Dojo3"}),H.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[H.jsx("div",{style:{fontSize:14,color:"var(--text-dim)"},children:"Solana "}),H.jsx("div",{className:"hero-feature",style:{fontSize:14,fontWeight:700,color:"var(--accent)"},children:e[r]},r),H.jsx("div",{style:{fontSize:13,color:"var(--text-dim)"},children:" Mainnet"})]}),H.jsx("p",{className:"lead",style:{maxWidth:720},children:"Dojo3 makes token distributions, staking and NFT drops simple and secure."}),H.jsxs("div",{style:{display:"flex",gap:10,marginTop:12,marginBottom:8},children:[H.jsx("div",{style:{background:"rgba(255,255,255,0.04)",padding:"6px 10px",borderRadius:6},children:"Check eligibility"}),H.jsx("div",{style:{background:"rgba(255,255,255,0.04)",padding:"6px 10px",borderRadius:6},children:"Claim tokens"}),H.jsx("div",{style:{background:"rgba(255,255,255,0.04)",padding:"6px 10px",borderRadius:6},children:"Stake NFTs"}),H.jsx("div",{style:{background:"rgba(255,255,255,0.04)",padding:"6px 10px",borderRadius:6},children:"Earn rewards"})]}),H.jsx("div",{className:"cta-row",style:{marginTop:14},children:H.jsx(q6e,{})})]})}),H.jsxs("main",{className:"container",children:[H.jsxs("div",{className:"grid",children:[H.jsx("div",{className:"col",children:H.jsx(W6e,{})}),H.jsx("div",{className:"col",children:H.jsx(H6e,{})})]}),H.jsx("div",{className:"admin-row",children:H.jsx(V6e,{})}),H.jsx("div",{className:"admin-row",children:H.jsx(tAe,{})}),H.jsx("div",{className:"admin-row",children:H.jsx(rAe,{})})]}),H.jsx(nAe,{}),H.jsxs("footer",{className:"pixel-footer",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[H.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[H.jsx("span",{style:{fontSize:16},children:""}),H.jsx("strong",{children:"Dojo3"})]}),H.jsx("a",{href:"https://x.com/Dojo3_",target:"_blank",rel:"noreferrer",style:{background:"#1DA1F2",color:"#fff",padding:"6px 10px",borderRadius:6,textDecoration:"none"},children:"Follow @Dojo3_"})]})]})})})})}function oAe(){const[t,e]=ne.useState(null),[r,n]=ne.useState(null);ne.useEffect(()=>{try{const g=new URLSearchParams(window.location.search),m=g.get("ref")||g.get("r");if(m){localStorage.setItem("dojo3_referrer",m),n(m),e(m);return}const v=localStorage.getItem("dojo3_referrer");v&&e(v)}catch{}},[]);const i=r||t,{publicKey:s,connected:o}=mu(),[a,c]=ne.useState(!1),l=async g=>{try{await navigator.clipboard.writeText(g),c(!0),setTimeout(()=>c(!1),1800)}catch(m){console.error("Copy failed",m)}};if(!i)return null;const u=i.length>24?`${i.slice(0,12)}${i.slice(-8)}`:i,h=o&&s?s.toString():i,d=`${window.location.origin}${window.location.pathname}?ref=${h}`;return H.jsxs("div",{style:{background:"linear-gradient(90deg,#072540,#0b3b5a)",color:"#fff",padding:"10px 14px",textAlign:"center",fontSize:"14px",display:"flex",justifyContent:"center",alignItems:"center",gap:"12px"},children:[H.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[H.jsx("div",{style:{fontSize:13,color:"#BEE3F8"},children:" Referred by"}),H.jsx("div",{style:{fontFamily:"monospace",background:"rgba(255,255,255,0.04)",padding:"6px 10px",borderRadius:6},children:u})]}),H.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[H.jsx("button",{onClick:()=>l(h),style:{padding:"6px 10px",borderRadius:6,border:"none",cursor:"pointer",background:"#0ea5a3",color:"#012"},children:"Copy Pubkey"}),H.jsx("button",{onClick:()=>l(d),style:{padding:"6px 10px",borderRadius:6,border:"1px solid rgba(255,255,255,0.08)",background:"transparent",color:"#fff",cursor:"pointer"},children:"Copy Share Link"}),H.jsx("a",{href:`https://twitter.com/intent/tweet?text=${encodeURIComponent("Claim your Dojo3 airdrop")}&url=${encodeURIComponent(d)}`,target:"_blank",rel:"noreferrer",style:{padding:"6px 10px",borderRadius:6,border:"1px solid rgba(255,255,255,0.08)",background:"transparent",color:"#1DA1F2",textDecoration:"none"},children:"Twitter"}),H.jsx("a",{href:`https://t.me/share/url?url=${encodeURIComponent(d)}&text=${encodeURIComponent("Claim your Dojo3 airdrop")}`,target:"_blank",rel:"noreferrer",style:{padding:"6px 10px",borderRadius:6,border:"1px solid rgba(255,255,255,0.08)",background:"transparent",color:"#26A5E4",textDecoration:"none"},children:"Telegram"}),H.jsx("a",{href:`https://api.whatsapp.com/send?text=${encodeURIComponent("Claim your Dojo3 airdrop: ")+encodeURIComponent(d)}`,target:"_blank",rel:"noreferrer",style:{padding:"6px 10px",borderRadius:6,border:"1px solid rgba(255,255,255,0.08)",background:"transparent",color:"#25D366",textDecoration:"none"},children:"WhatsApp"}),H.jsx("div",{style:{minWidth:80,textAlign:"left",fontSize:12,opacity:.95},children:a?H.jsx("span",{style:{color:"#d1fae5"},children:"Copied "}):H.jsx("span",{style:{color:"#cfefff"},children:"Ready to share"})})]})]})}typeof window<"u"&&!window.Buffer&&(window.Buffer=Xe.Buffer);const aAe=$9(document.getElementById("root"));aAe.render(H.jsx(sAe,{}));export{NCe as $,pt as A,pi as B,Dp as C,yAe as D,bI as E,Es as F,SV as G,CCe as H,Y as I,Yn as J,$Ce as K,b1 as L,xn as M,nn as N,ge as O,Te as P,no as Q,Jt as R,vg as S,yi as T,ns as U,ap as V,ex as W,N1 as X,c6e as Y,xg as Z,ze as _,ZY as a,eU as a0,tx as a1,Cp as a2,Mh as a3,tre as a4,e8e as a5,K8 as a6,tR as a7,Hte as a8,rre as a9,t8e as aa,XAe as ab,Hv as ac,i8e as ad,r8e as ae,e2e as af,gCe as ag,AM as ah,UL as ai,Wve as aj,t2e as ak,mCe as al,pCe as am,m2 as an,wCe as ao,yCe as ap,cS as b,ry as c,bAe as d,wAe as e,mAe as f,Fa as g,Qi as h,Wr as i,Pc as j,Yf as k,vAe as l,TCe as m,B1 as n,ACe as o,ut as p,dt as q,MCe as r,Sr as s,D1 as t,bL as u,Er as v,Oe as w,Ue as x,Xo as y,Yi as z};
